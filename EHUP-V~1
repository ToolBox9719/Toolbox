;/*FB_PKG_DELIM*/

__d("LSSendOTCNotifications",["LSIssueNewEbTaskAndGetTaskIDV2"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.forEach(c.db.table(285).fetch(),function(a){return a["delete"]()})},function(a){return c.forEach(c.filter(c.db.table(285).fetch([[[c.i64.cast([0,1])]]]),function(a){return c.i64.eq(a.pk,c.i64.cast([0,1]))&&c.i64.lt(a.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(a){return c.db.table(285).add({pk:c.i64.cast([0,1]),notificationSendingStatus:c.i64.cast([0,2]),authorityLevel:c.i64.cast([0,20])})},function(e){return d[0]=new c.Map(),d[0].set("device_ids",a[0]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),"meb_send_otc_notifications",c.i64.cast([0,50032]),d[1],c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[2]=a[0],a})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsSendOTCNotificationsStoredProcedure";a.__tables__=["encrypted_backups_otc_notification_sending_status"];e.exports=a}),null);
__d("LSSendOTCNotificationsStoredProcedure",["LSSendOTCNotifications","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSSendOTCNotifications"),e.deviceIds);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWEncryptedBackupsRestoreDialogContexts_query.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MAWEncryptedBackupsRestoreDialogContexts_query",selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup"},{alias:null,args:[{kind:"Literal",name:"family_device_id",value:""}],kind:"ScalarField",name:"has_otc_eligible_devices",storageKey:'has_otc_eligible_devices(family_device_id:"")'}],storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useMWChatEncryptedBackupsVestaUserInfo_vestaGetUserInfoResponse"}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_seen_eb_auto_restore_notice",storageKey:null}],storageKey:null}],storageKey:null},action:"THROW",path:"viewer"}],type:"Query",abstractKey:null};e.exports=a}),null);
__d("MWChatEncryptedBackupOnCloseContext",["FBLogger","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");function a(){c("FBLogger")("messenger_web_trust").warn("setOnCloseSkipConfirmation called outside of a provider")}e=b.createContext({onCloseSkipConfirmation:null,setOnCloseSkipConfirmation:a});g["default"]=e}),98);
__d("MWChatEncryptedBackupOnCloseContextProvider.react",["MWChatEncryptedBackupOnCloseContext","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useMemo;var j=b.useState;function a(a){var b=d("react-compiler-runtime").c(5);a=a.children;var e=j(null),f=e[0];e=e[1];b[0]!==f?(e={onCloseSkipConfirmation:f,setOnCloseSkipConfirmation:e},b[0]=f,b[1]=e):e=b[1];f=e;e=f;b[2]!==a||b[3]!==e?(f=i.jsx(c("MWChatEncryptedBackupOnCloseContext").Provider,{value:e,children:a}),b[2]=a,b[3]=e,b[4]=f):f=b[4];return f}g["default"]=a}),98);
__d("MWChatEncryptedBackupResetContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({isEncryptedBackupResetStarted:null});g["default"]=b}),98);
__d("MWChatEncryptedBackupResetContextProvider.react",["MWChatEncryptedBackupResetContext","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useMemo;var j=b.useRef;function a(a){var b=d("react-compiler-runtime").c(3);a=a.children;var e=j(!1);b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e={isEncryptedBackupResetStarted:e},b[0]=e):e=b[0];e=e;e=e;b[1]!==a?(e=i.jsx(c("MWChatEncryptedBackupResetContext").Provider,{value:e,children:a}),b[1]=a,b[2]=e):e=b[2];return e}g["default"]=a}),98);
__d("MWChatEncryptedBackupsDismissalDialogContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({isDismissedDisabled:!1,setIsDismissedDisabled:function(){}});g["default"]=b}),98);
__d("MWChatEncryptedBackupsDismissalDialogContextProvider.react",["MWChatEncryptedBackupsDismissalDialogContext","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useMemo;var j=b.useState;function a(a){var b=d("react-compiler-runtime").c(5),e=a.children;a=a.isDismissedDisabledValue;a=j(a);var f=a[0];a=a[1];b[0]!==f?(a={isDismissedDisabled:f,setIsDismissedDisabled:a},b[0]=f,b[1]=a):a=b[1];f=a;a=f;b[2]!==e||b[3]!==a?(f=i.jsx(c("MWChatEncryptedBackupsDismissalDialogContext").Provider,{value:a,children:e}),b[2]=e,b[3]=a,b[4]=f):f=b[4];return f}g["default"]=a}),98);
__d("MWChatEncryptedBackupsRestoreUpsellDialogContextProvider.react",["MWChatEncryptedBackupsSetIsDialogPersistedContext","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useMemo;function a(a){var b=d("react-compiler-runtime").c(5),e=a.children;a=a.setIsDialogPersisted;var f;b[0]!==a?(f={setIsDialogPersisted:a},b[0]=a,b[1]=f):f=b[1];f=f;f=f;if(a!=null){b[2]!==e||b[3]!==f?(a=i.jsx(c("MWChatEncryptedBackupsSetIsDialogPersistedContext").Provider,{value:f,children:e}),b[2]=e,b[3]=f,b[4]=a):a=b[4];return a}return e}g["default"]=a}),98);
__d("MWEBFlowSourceContextProvider.react",["MWEBFlowSourceContext","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useMemo;function a(a){var b=d("react-compiler-runtime").c(5),e=a.children;a=a.source;var f;b[0]!==a?(f={source:a},b[0]=a,b[1]=f):f=b[1];a=f;f=a;b[2]!==e||b[3]!==f?(a=i.jsx(c("MWEBFlowSourceContext").Provider,{value:f,children:e}),b[2]=e,b[3]=f,b[4]=a):a=b[4];return a}g["default"]=a}),98);
__d("MWEBHasSeenAutoRestoreNoticeContextProvider.react",["MWEBHasSeenAutoRestoreNoticeContext","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useMemo;function a(a){var b=d("react-compiler-runtime").c(5),e=a.children;a=a.hasSeenNotice;var f;b[0]!==a?(f={hasSeenNotice:a},b[0]=a,b[1]=f):f=b[1];a=f;f=a;b[2]!==e||b[3]!==f?(a=i.jsx(c("MWEBHasSeenAutoRestoreNoticeContext").Provider,{value:f,children:e}),b[2]=e,b[3]=f,b[4]=a):a=b[4];return a}g["default"]=a}),98);
__d("useHasOTCEligibleDevices",["MAWOneTimeCodeGating","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("react-compiler-runtime").c(4),b=(h||(h=c("useReStore")))(),e;a[0]!==b.tables.encrypted_backups?(e=function(){return d("ReQL").fromTableAscending(b.tables.encrypted_backups)},a[0]=b.tables.encrypted_backups,a[1]=e):e=a[1];var g;a[2]!==b?(g=[b],a[2]=b,a[3]=g):g=a[3];a=d("ReQLSuspense").useFirst(e,g,f.id+":19");return a==null||!d("MAWOneTimeCodeGating").isOneTimeCodeEnabled()?!1:a.hasOtcEligibleDevices}g["default"]=a}),98);
__d("MWEBVirtualDevicesContextProvider.react",["MAWOneTimeCodeGating","MWEBVirtualDevicesContext.react","gkx","react","react-compiler-runtime","useHasOTCEligibleDevices","useMWEncryptedBackupsListenForChangesToVirtualDevicesV2"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useMemo;var j=(b=c("gkx")("24064"))!=null?b:!1;function a(a){var b=d("react-compiler-runtime").c(14),e=a.children,f=a.hasOtcEligibleDevicesInitialValue,g=a.offlineDevicesCountInitialValue;a=a.vestaClientIDInitialValue;g=g===void 0?-1:g;a=a!=null?a:void 0;var h;b[0]!==g||b[1]!==a?(h={offlineDevicesCountInitialValue:g,vestaClientIDInitialValue:a},b[0]=g,b[1]=a,b[2]=h):h=b[2];g=c("useMWEncryptedBackupsListenForChangesToVirtualDevicesV2")(h);a=g.offlineDevicesCount;h=g.vestaClientID;g=c("useHasOTCEligibleDevices")();var k;b[3]!==g||b[4]!==f?(k=d("MAWOneTimeCodeGating").isOneTimeCodeEnabled()&&(j===!0||f===!0||g),b[3]=g,b[4]=f,b[5]=k):k=b[5];g=k;f=h!=null;b[6]!==g||b[7]!==a||b[8]!==f||b[9]!==h?(k={virtualDeviceInfo:{doesUserHaveOtcEligibleDevices:g,isPINCodeRegistered:f,offlineDevicesCount:a,vestaClientID:h}},b[6]=g,b[7]=a,b[8]=f,b[9]=h,b[10]=k):k=b[10];g=k;a=g;b[11]!==e||b[12]!==a?(f=i.jsx(d("MWEBVirtualDevicesContext.react").MWEBVirtualDevicesContext.Provider,{value:a,children:e}),b[11]=e,b[12]=a,b[13]=f):f=b[13];return f}g["default"]=a}),98);
__d("useMWChatEncryptedBackupsVestaUserInfo_vestaGetUserInfoResponse.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMWChatEncryptedBackupsVestaUserInfo_vestaGetUserInfoResponse",selections:[{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_registered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login_timeout_remaining_secs",storageKey:null}],type:"VestaGetUserInfoResponse",abstractKey:null};e.exports=a}),null);
__d("useMWChatEncryptedBackupsVestaUserInfo",["CometRelay","react-compiler-runtime","useMWChatEncryptedBackupsVestaUserInfo_vestaGetUserInfoResponse.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var c,e,f=d("react-compiler-runtime").c(4);a=a.vestaGetUserInfoResponse$key;a=d("CometRelay").useFragment(h!==void 0?h:h=b("useMWChatEncryptedBackupsVestaUserInfo_vestaGetUserInfoResponse.graphql"),a);c=(c=a==null?void 0:a.attempts_remaining)!=null?c:null;e=(e=a==null?void 0:a.is_registered)!=null?e:null;a=(a=a==null?void 0:a.login_timeout_remaining_secs)!=null?a:null;var g;f[0]!==c||f[1]!==e||f[2]!==a?(g={attemptsRemaining:c,isRegistered:e,loginTimeoutRemainingSecs:a},f[0]=c,f[1]=e,f[2]=a,f[3]=g):g=f[3];return g}g["default"]=a}),98);
__d("useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup",selections:[{alias:null,args:null,concreteType:"XFBEBVirtualDevice",kind:"LinkedField",name:"virtual_devices",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_generated_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"device_type",storageKey:null}],storageKey:null}],type:"XFBEncryptedBackup",abstractKey:null};e.exports=a}),null);
__d("useMWEncryptedBackupsGetVirtualDevicesPreloaded",["CometRelay","react","react-compiler-runtime","useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useCallback;function a(a){var c=d("react-compiler-runtime").c(4);a=a.encryptedBackup;var e=d("CometRelay").useFragment(h!==void 0?h:h=b("useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup.graphql"),a);c[0]!==(e==null?void 0:e.virtual_devices)?(a=function(){var a=0,b=null;e==null||e.virtual_devices.forEach(function(c){bb13:switch(c.device_type){case"HSM":b=c.client_generated_id;break bb13;case"OFFLINE":a=a+1;a;break bb13;default:}});return{offlineDevicesCount:a,vestaClientID:b}},c[0]=e==null?void 0:e.virtual_devices,c[1]=a):a=c[1];e==null||e.virtual_devices;a=a;var f;c[2]!==a?(f={getVirtualDevices:a},c[2]=a,c[3]=f):f=c[3];return f}g["default"]=a}),98);
__d("MAWEncryptedBackupsRestoreDialogContexts.react",["CometRelay","CometTransientDialogProvider.react","MAWEncryptedBackupsRestoreDialogContexts_query.graphql","MWChatEncryptedBackupOnCloseContextProvider.react","MWChatEncryptedBackupResetContextProvider.react","MWChatEncryptedBackupsDismissalDialogContextProvider.react","MWChatEncryptedBackupsRestoreUpsellDialogContextProvider.react","MWEBFlowSourceContextProvider.react","MWEBHasSeenAutoRestoreNoticeContextProvider.react","MWEBVestaUserInfoContext.react","MWEBVirtualDevicesContextProvider.react","react","react-compiler-runtime","useMWChatEncryptedBackupsVestaUserInfo","useMWEncryptedBackupsGetVirtualDevicesPreloaded"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));i.useMemo;function a(a){var e,f=d("react-compiler-runtime").c(30),g=a.children,i=a.query,k=a.setIsDialogPersisted;a=a.source;i=d("CometRelay").useFragment(h!==void 0?h:h=b("MAWEncryptedBackupsRestoreDialogContexts_query.graphql"),i);e=(e=i.viewer.messenger_default_encrypted_backup)==null?void 0:e.vesta_user_info;var l;f[0]!==e?(l={vestaGetUserInfoResponse$key:e},f[0]=e,f[1]=l):l=f[1];e=c("useMWChatEncryptedBackupsVestaUserInfo")(l);f[2]!==i.xfb_backup?(l={encryptedBackup:i.xfb_backup},f[2]=i.xfb_backup,f[3]=l):l=f[3];l=c("useMWEncryptedBackupsGetVirtualDevicesPreloaded")(l);l=l.getVirtualDevices;var m;f[4]!==l?(m=l(),f[4]=l,f[5]=m):m=f[5];l=m;m=l.offlineDevicesCount;l=l.vestaClientID;var n;f[6]!==e.attemptsRemaining||f[7]!==e.loginTimeoutRemainingSecs?(n={attemptsRemaining:e.attemptsRemaining,loginTimeoutRemainingSecs:e.loginTimeoutRemainingSecs,vestaClientID:null},f[6]=e.attemptsRemaining,f[7]=e.loginTimeoutRemainingSecs,f[8]=n):n=f[8];e=n;n=e;e=(e=(e=i.xfb_backup)==null?void 0:e.has_otc_eligible_devices)!=null?e:void 0;i=(i=(i=i.viewer.encrypted_backup)==null?void 0:i.has_seen_eb_auto_restore_notice)!=null?i:!1;var o;f[9]!==k?(o=function(a){k==null||k(a)},f[9]=k,f[10]=o):o=f[10];var p;f[11]!==g?(p=j.jsx(c("CometTransientDialogProvider.react"),{children:g}),f[11]=g,f[12]=p):p=f[12];f[13]!==p||f[14]!==n?(g=j.jsx(d("MWEBVestaUserInfoContext.react").MWEBVestaUserInfoContext.Provider,{value:n,children:p}),f[13]=p,f[14]=n,f[15]=g):g=f[15];f[16]!==g||f[17]!==o?(p=j.jsx(c("MWChatEncryptedBackupOnCloseContextProvider.react"),{children:j.jsx(c("MWChatEncryptedBackupResetContextProvider.react"),{children:j.jsx(c("MWChatEncryptedBackupsDismissalDialogContextProvider.react"),{isDismissedDisabledValue:!1,children:j.jsx(c("MWChatEncryptedBackupsRestoreUpsellDialogContextProvider.react"),{setIsDialogPersisted:o,children:g})})})}),f[16]=g,f[17]=o,f[18]=p):p=f[18];f[19]!==a||f[20]!==p?(n=j.jsx(c("MWEBFlowSourceContextProvider.react"),{source:a,children:p}),f[19]=a,f[20]=p,f[21]=n):n=f[21];f[22]!==n||f[23]!==i?(g=j.jsx(c("MWEBHasSeenAutoRestoreNoticeContextProvider.react"),{hasSeenNotice:i,children:n}),f[22]=n,f[23]=i,f[24]=g):g=f[24];f[25]!==m||f[26]!==g||f[27]!==e||f[28]!==l?(o=j.jsx(c("MWEBVirtualDevicesContextProvider.react"),{hasOtcEligibleDevicesInitialValue:e,offlineDevicesCountInitialValue:m,vestaClientIDInitialValue:l,children:g}),f[25]=m,f[26]=g,f[27]=e,f[28]=l,f[29]=o):o=f[29];return o}g["default"]=a}),98);
__d("MWEBLazyLoadResetPinPage",["JSResourceForInteraction","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h=c("JSResourceForInteraction")("MWEBPushResetPinPage").__setRef("MWEBLazyLoadResetPinPage");function a(a,b){c("promiseDone")(h.load().then(function(c){return c(a,b)}))}g["default"]=a}),98);
__d("MWEBPinCodeUpsellDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{}}},root:c("JSResourceForInteraction")("MWEBPinCodeUpsellDialog.react").__setRef("MWEBPinCodeUpsellDialog.entrypoint")};g["default"]=a}),98);
__d("MWEBRestoreOTCFirstDialogStepDeferred.react",["deferredLoadComponent","react","react-compiler-runtime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("deferredLoadComponent")(c("requireDeferred")("MWEBRestoreOTCFirstStep.react").__setRef("MWEBRestoreOTCFirstDialogStepDeferred.react"));function a(a){var b=d("react-compiler-runtime").c(2),c;b[0]!==a?(c=i.jsx(j,babelHelpers["extends"]({},a)),b[0]=a,b[1]=c):c=b[1];return c}g["default"]=a}),98);
__d("MAWEncryptedBackupsRestoreStep.react",["MWChatEncryptedBackupResetContext","MWChatEncryptedBackupsQPLSource.enum","MWEBLazyLoadResetPinPage","MWEBOTCDialogStepDeferred.react","MWEBPinCodeUpsellDialog.entrypoint","MWEBRestoreOTCFirstDialogStepDeferred.react","MWEBVestaUserInfoContext.react","MWEBVirtualDevicesContext.react","deferredLoadComponent","gkx","react","react-compiler-runtime","requireDeferred","requireDeferredForDisplay","usePushFDSMultiStepDialogEntryPointPage"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useCallback,k=b.useContext,l=c("deferredLoadComponent")(c("requireDeferred")("MWChatEncryptedBackupsAccessCodeInputStep.react").__setRef("MAWEncryptedBackupsRestoreStep.react")),m=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MWChatEncryptedBackupsPinCodeRestoreStep.react").__setRef("MAWEncryptedBackupsRestoreStep.react")),n=c("deferredLoadComponent")(c("requireDeferred")("MWChatEncryptedBackupsKVSOnlyRestoreStep.react").__setRef("MAWEncryptedBackupsRestoreStep.react"));function o(a){var b=d("react-compiler-runtime").c(21),e=a.offlineDevicesCount,f=a.onClose,g=a.onComplete,h=a.onForgotRC,j=a.onSkip,k=a.pushPage,m=a.shouldShowForgotButton;a=a.source;var o=d("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices();o=o.virtualDeviceInfo;if(o.doesUserHaveOtcEligibleDevices){o=a===c("MWChatEncryptedBackupsQPLSource.enum").INBOX_INTERSTITIAL_SOFTBLOCK;if(o){b[0]!==f||b[1]!==g||b[2]!==j||b[3]!==k?(a=i.jsx(c("MWEBRestoreOTCFirstDialogStepDeferred.react"),{onCloseDialog:f,onComplete:g,onSkip:j,pushPage:k}),b[0]=f,b[1]=g,b[2]=j,b[3]=k,b[4]=a):a=b[4];return a}b[5]!==f||b[6]!==g||b[7]!==j||b[8]!==k?(o=i.jsx(c("MWEBOTCDialogStepDeferred.react"),{onClose:f,onComplete:g,onSkip:j,pushPage:k}),b[5]=f,b[6]=g,b[7]=j,b[8]=k,b[9]=o):o=b[9];return o}if(e!==null&&e>=1){b[10]!==f||b[11]!==g||b[12]!==h||b[13]!==j||b[14]!==k||b[15]!==m?(a=i.jsx(l,{onClose:f,onComplete:g,onForgotRC:h,onSkip:j,pushPage:k,shouldShowForgotButton:m}),b[10]=f,b[11]=g,b[12]=h,b[13]=j,b[14]=k,b[15]=m,b[16]=a):a=b[16];return a}b[17]!==f||b[18]!==g||b[19]!==k?(o=i.jsx(n,{onClose:f,onComplete:g,pushPage:k}),b[17]=f,b[18]=g,b[19]=k,b[20]=o):o=b[20];return o}function a(a){var b=a.clientID,e=a.offlineDevicesCount,f=a.onClose,g=a.onComplete,h=a.onForgotRC,l=a.onSkip,n=a.pushPage,p=a.shouldShowForgotButton;a=a.source;var q=d("MWEBVestaUserInfoContext.react").useMWEBIsCooldownOrLockOutState(),r=d("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices();r=r.virtualDeviceInfo;r=r.doesUserHaveOtcEligibleDevices;var s=j(function(){c("MWEBLazyLoadResetPinPage")(g,n)},[g,n]),t=c("usePushFDSMultiStepDialogEntryPointPage")(c("MWEBPinCodeUpsellDialog.entrypoint"),{});t[0];var u=t[1],v=k(c("MWChatEncryptedBackupResetContext"));t=j(function(){var a;if(((a=v.isEncryptedBackupResetStarted)==null?void 0:a.current)===!0){g();return}u({onClose:l,onComplete:g},{withoutBackButton:!0})},[v,g,l,u]);if(b!=null&&q&&r)return i.jsx(o,{offlineDevicesCount:e,onClose:f,onComplete:s,onForgotRC:h,onSkip:l,pushPage:n,shouldShowForgotButton:p,source:a});else if(b!=null)return i.jsx(m,{onClose:f,onComplete:g,onSkip:l,pushPage:n,shouldShowForgotButton:p});else if(c("gkx")("13248"))return i.jsx(o,{offlineDevicesCount:e,onClose:f,onComplete:t,onForgotRC:h,onSkip:l,pushPage:n,shouldShowForgotButton:p,source:a});return i.jsx(o,{offlineDevicesCount:e,onClose:f,onComplete:g,onForgotRC:h,onSkip:l,pushPage:n,shouldShowForgotButton:p,source:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWPinCodeGating",["gkx","justknobx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("3955")&&c("justknobx")._("1015")}g.isPinCodeEnabled=a}),98);
__d("MAWUnsupportedIndexedDBNuxKey",["WebStorage"],(function(a,b,c,d,e,f,g){"use strict";var h,i="maw_unsupported_browser_nux_dismissed",j="dismissed";a=function(){var a;return((a=(h||(h=c("WebStorage"))).getLocalStorageForRead())==null?void 0:a.getItem(i))===j};b=function(){var a;(a=(h||(h=c("WebStorage"))).getLocalStorage())==null||a.setItem(i,j)};g.getIsDismissed=a;g.setIsDismissed=b}),98);
__d("MAWUserVisibleErrorsNux.react",["ix","MAWLoggerUtils","MWXIconCautionTriangle","MWXQPCard.react","QPLUserFlow","gkx","qpl","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useEffect,l={hasNoMargin:{marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(17),e=a.hasNoMargin,f=a.icon,g=a.nuxBodyText,i=a.nuxButtonProps,m=a.nuxTitleText,n=a.onCloseButtonClick,o=a.ref;a=a.secondaryButtonProps;var p;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(p=d("MAWLoggerUtils").getInstanceKey(),b[0]=p):p=b[0];var q=p,r;b[1]!==m?(p=function(){c("QPLUserFlow").start(c("qpl")._(1056846286,"652"),{annotations:{string:{nuxTitleText:m.toString()}},instanceKey:q});return function(){return c("QPLUserFlow").endSuccess(c("qpl")._(1056846286,"652"),{instanceKey:q})}},r=[q,m],b[1]=m,b[2]=p,b[3]=r):(p=b[2],r=b[3]);k(p,r);b[4]===Symbol["for"]("react.memo_cache_sentinel")?(p=c("gkx")("4425")?h("428841"):h("212797"),b[4]=p):p=b[4];r=p;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(p=c("gkx")("4425")?{props:{src:h("1745665")},type:"image"}:{props:{color:"negative",icon:c("MWXIconCautionTriangle"),size:24},type:"icon"},b[5]=p):p=b[5];p=p;b[6]!==f?(r=f!=null?f:c("gkx")("23219")?{props:{src:r},type:"image"}:p,b[6]=f,b[7]=r):r=b[7];p=e===!0?l.hasNoMargin:void 0;b[8]!==g||b[9]!==i||b[10]!==m||b[11]!==n||b[12]!==o||b[13]!==a||b[14]!==r||b[15]!==p?(f=j.jsx("div",{"data-testid":void 0,children:j.jsx(c("MWXQPCard.react"),{addOnPrimary:i,addOnSecondary:a,body:g,headline:m,icon:r,onClose:n,ref:o,xstyle:p})}),b[8]=g,b[9]=i,b[10]=m,b[11]=n,b[12]=o,b[13]=a,b[14]=r,b[15]=p,b[16]=f):f=b[16];return f}g["default"]=a}),98);
__d("MAWUserVisibleErrorsNuxWrapper.react",["fbt","CometPlaceholder.react","MAWIssueNewUserVisibleErrors","MAWUnsupportedIndexedDBNuxKey","cr:4216","cr:9767","promiseDone","react","react-compiler-runtime","requireDeferred","useMAWGetUserVisibleErrors","useMAWUnsupportedBrowserNUX"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));e=i;e.useCallback;var k=e.useState,l=c("requireDeferred")("MAWEncryptionErrorHandler").__setRef("MAWUserVisibleErrorsNuxWrapper.react");function a(a){var e=d("react-compiler-runtime").c(23),f=a.children;a=a.hasNoMargin;var g;e[0]===Symbol.for("react.memo_cache_sentinel")?(g=d("MAWUnsupportedIndexedDBNuxKey").getIsDismissed(),e[0]=g):g=e[0];g=k(g);var i=g[0],n=g[1];if(e[1]===Symbol.for("react.memo_cache_sentinel")){g=(g=b("cr:4216").buildUri({cms_id:"597429858389632"}).setDomain("www.facebook.com"))==null||(g=g.setProtocol("https"))==null?void 0:g.toString();e[1]=g}else g=e[1];g=g;e[2]===Symbol.for("react.memo_cache_sentinel")?(g={label:h._(/*BTDS*/"Learn more"),linkProps:{target:"_blank",url:g}},e[2]=g):g=e[2];g=g;var o=d("useMAWUnsupportedBrowserNUX").useMAWUnsupportedBrowserNUX();o=o.shouldShowQP;var p=k(!1),q=p[0],r=p[1];p=c("useMAWGetUserVisibleErrors")();var s=p[0],t=p[1];e[3]!==t||e[4]!==(s==null?void 0:s.errorExtraData)?(p=function(){c("promiseDone")(async function(){r(!0);if((s==null?void 0:s.errorExtraData)==="MAWEARKeychainDecryptionError"){var a=await l.load();await a.handleEARKeychainError()}return t()}(),m,function(){r(!1)})},e[3]=t,e[4]=s==null?void 0:s.errorExtraData,e[5]=p):p=e[5];p=p;var u;e[6]!==(s==null?void 0:s.errorBodyText)?(u=d("MAWIssueNewUserVisibleErrors").errorMsgBodyToFbtMap.get(s==null?void 0:s.errorBodyText),e[6]=s==null?void 0:s.errorBodyText,e[7]=u):u=e[7];u=u;var v;e[8]!==(s==null?void 0:s.errorTitleText)?(v=d("MAWIssueNewUserVisibleErrors").errorMsgTitleToFbtMap.get(s==null?void 0:s.errorTitleText),e[8]=s==null?void 0:s.errorTitleText,e[9]=v):v=e[9];v=v;e[10]!==f||e[11]!==t||e[12]!==i||e[13]!==u||e[14]!==v||e[15]!==s||e[16]!==a||e[17]!==q||e[18]!==p||e[19]!==o?(g=b("cr:9767")&&o&&!i?j.jsx(b("cr:9767"),{hasNoMargin:a,nuxBodyText:d("MAWIssueNewUserVisibleErrors").MAWUnsupportedIndexedDBErrorMsg,nuxButtonProps:g,nuxTitleText:d("MAWIssueNewUserVisibleErrors").MAWUnsupportedIndexedDBErrorMsgTitle,onCloseButtonClick:function(){n(!0),d("MAWUnsupportedIndexedDBNuxKey").setIsDismissed()}}):s&&b("cr:9767")&&v!=null&&u!=null?j.jsx(b("cr:9767"),{nuxBodyText:u,nuxButtonProps:{disabled:q,label:h._(/*BTDS*/"Refresh"),loading:q,onPress:p},nuxTitleText:v,onCloseButtonClick:function(){c("promiseDone")(t())}}):f,e[10]=f,e[11]=t,e[12]=i,e[13]=u,e[14]=v,e[15]=s,e[16]=a,e[17]=q,e[18]=p,e[19]=o,e[20]=g):g=e[20];e[21]!==g?(f=j.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MAWUserVisibleErrorsNuxWrapper",children:g}),e[21]=g,e[22]=f):f=e[22];return f}function m(){window.location.reload(!0)}g.default=a}),226);
__d("MWChatEBPinCodeVerifyIndicator.react",["fbt","MWXRow.react","MWXRowItem.react","MWXSpinner.react","MWXText.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(5);a=a.isMessenger;a=a?"disabled_DEPRECATED":"blue";var e;b[0]!==a?(e=j.jsx(c("MWXRowItem.react"),{verticalAlign:"center",children:j.jsx(c("MWXSpinner.react"),{color:a,size:12})}),b[0]=a,b[1]=e):e=b[1];b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a=j.jsx(c("MWXRowItem.react"),{verticalAlign:"center",children:j.jsx(c("MWXText.react"),{color:"secondary",testid:void 0,type:"meta3",children:h._(/*BTDS*/"Verifying your PIN")})}),b[2]=a):a=b[2];b[3]!==e?(a=j.jsxs(c("MWXRow.react"),{align:"center",paddingTop:8,spacing:8,children:[e,a]}),b[3]=e,b[4]=a):a=b[4];return a}g["default"]=a}),226);
__d("MWChatEncryptedBackupsForgotPINDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="29657246047255053"}),null);
__d("MWChatEncryptedBackupsForgotPINDialogQuery$Parameters",["MWChatEncryptedBackupsForgotPINDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWChatEncryptedBackupsForgotPINDialogQuery_facebookRelayOperation"),metadata:{},name:"MWChatEncryptedBackupsForgotPINDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWChatEncryptedBackupsForgotPINDialog.entrypoint",["JSResourceForInteraction","MWChatEncryptedBackupsForgotPINDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{queryReference:{parameters:c("MWChatEncryptedBackupsForgotPINDialogQuery$Parameters"),variables:{}}}}},root:c("JSResourceForInteraction")("MWChatEncryptedBackupsForgotPINDialog.react").__setRef("MWChatEncryptedBackupsForgotPINDialog.entrypoint")};g["default"]=a}),98);
__d("MWChatEncryptedBackupsForgotPinStepDialogPage.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{}}},root:c("JSResourceForInteraction")("MWChatEncryptedBackupsForgotPinStepDialogPage.react").__setRef("MWChatEncryptedBackupsForgotPinStepDialogPage.entrypoint")};g["default"]=a}),98);
__d("MWEncryptedBackupsForgotPinStep",["fbt","EOTRTypes","MAWEncryptedBackupsRestoreDialog.entrypoint","MWChatEncryptedBackupsForgotPINDialog.entrypoint","MWChatEncryptedBackupsForgotPinStepDialogPage.entrypoint","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEBNoMobileEOTRInformationalDialog.entrypoint","MWEBUntrustedMobileEOTRInformationalDialog.entrypoint","MWEBVirtualDevicesContext.react","MWJewelPopoverDialogContext.react","QPLUserFlow","emptyFunction","qex","react","react-compiler-runtime","useEOTRPhaseTwoAndThree","useMWXEntryPointDialog","usePushPage"],(function(a,b,c,d,e,f,g,h){"use strict";var i=["onHighIntent"],j=["onHighIntent"],k=["onHighIntent"],l;l||(l=d("react"));var m=l.useContext,n=h._(/*BTDS*/"Forgotten PIN?"),o=h._(/*BTDS*/"Need help?");e="https://www.facebook.com/help/messenger-app/431055522328649?ref=learn_more";f=(h=(f=c("qex")._("3628"))!=null?f:c("qex")._("2123"))!=null?h:!1;var p=function(a){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,a===n?"PIN_CODE_RESTORE_FORGOT_PIN_CLICK":"PIN_CODE_RESTORE_NEED_HELP_CLICK")},q=f?n:o;h=function(){p(q)};var r={children:q,href:e,onClick:h,rel:"noreferrer",target:"_blank"};function a(a){var b=d("react-compiler-runtime").c(39),e=a.offlineDevicesCount,f=a.onClose,g=a.onComplete,h=a.pushPage;a=c("useEOTRPhaseTwoAndThree")();var l;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(l={},b[0]=l):l=b[0];l=c("usePushPage")(c("MWEBNoMobileEOTRInformationalDialog.entrypoint"),l);var m=l[0];l=l[1];if(b[1]!==l){l.onHighIntent;var q=babelHelpers.objectWithoutPropertiesLoose(l,i);q=q;b[1]=l;b[2]=q}else q=b[2];b[3]===Symbol["for"]("react.memo_cache_sentinel")?(l={},b[3]=l):l=b[3];l=c("usePushPage")(c("MWEBUntrustedMobileEOTRInformationalDialog.entrypoint"),l);var s=l[0];l=l[1];if(b[4]!==l){l.onHighIntent;var t=babelHelpers.objectWithoutPropertiesLoose(l,j);t=t;b[4]=l;b[5]=t}else t=b[5];b[6]===Symbol["for"]("react.memo_cache_sentinel")?(l={},b[6]=l):l=b[6];l=c("usePushPage")(c("MWChatEncryptedBackupsForgotPinStepDialogPage.entrypoint"),l);var u=l[0];l=l[1];if(b[7]!==l){l.onHighIntent;var v=babelHelpers.objectWithoutPropertiesLoose(l,k);v=v;b[7]=l;b[8]=v}else v=b[8];if(a===d("EOTRTypes").EOTRFlow.UNTRUSTED_MOBILE){b[9]!==f||b[10]!==g||b[11]!==h||b[12]!==s?(l=function(){p(n),s({onClose:f,onComplete:g,pushPage:h})},b[9]=f,b[10]=g,b[11]=h,b[12]=s,b[13]=l):l=b[13];var w;b[14]!==l||b[15]!==t.onHoverIn||b[16]!==t.onHoverOut||b[17]!==t.onPressIn?(w={children:n,onClick:l,onHoverEnd:t.onHoverOut,onHoverStart:t.onHoverIn,onPressStart:t.onPressIn},b[14]=l,b[15]=t.onHoverIn,b[16]=t.onHoverOut,b[17]=t.onPressIn,b[18]=w):w=b[18];return w}if(a===d("EOTRTypes").EOTRFlow.NO_MOBILE){b[19]!==f||b[20]!==g||b[21]!==m?(l=function(){p(n),m({onClose:f,onComplete:g})},b[19]=f,b[20]=g,b[21]=m,b[22]=l):l=b[22];b[23]!==q.onHoverIn||b[24]!==q.onHoverOut||b[25]!==q.onPressIn||b[26]!==l?(t={children:n,onClick:l,onHoverEnd:q.onHoverOut,onHoverStart:q.onHoverIn,onPressStart:q.onPressIn},b[23]=q.onHoverIn,b[24]=q.onHoverOut,b[25]=q.onPressIn,b[26]=l,b[27]=t):t=b[27];return t}var x=e>0||!0;if(x){b[28]!==x||b[29]!==f||b[30]!==g||b[31]!==u||b[32]!==h?(w=function(){p(o),u({isRCDeviceEnabled:x,onClose:f,onComplete:g,pushPage:h},{})},b[28]=x,b[29]=f,b[30]=g,b[31]=u,b[32]=h,b[33]=w):w=b[33];b[34]!==v.onHoverIn||b[35]!==v.onHoverOut||b[36]!==v.onPressIn||b[37]!==w?(a={children:o,onClick:w,onHoverEnd:v.onHoverOut,onHoverStart:v.onHoverIn,onPressStart:v.onPressIn},b[34]=v.onHoverIn,b[35]=v.onHoverOut,b[36]=v.onPressIn,b[37]=w,b[38]=a):a=b[38];return a}else return r}function b(a){var b=d("react-compiler-runtime").c(16);a=a.onDismiss;var e=a===void 0?c("emptyFunction"):a;a=c("useEOTRPhaseTwoAndThree")();var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f={},b[0]=f):f=b[0];f=c("useMWXEntryPointDialog")(c("MAWEncryptedBackupsRestoreDialog.entrypoint"),f);var g=f[0];f=d("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices();f=f.virtualDeviceInfo;f=f.offlineDevicesCount;var h=m(c("MWJewelPopoverDialogContext.react")),i=h.setIsOpenForDialog;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(h={},b[1]=h):h=b[1];h=c("useMWXEntryPointDialog")(c("MWChatEncryptedBackupsForgotPINDialog.entrypoint"),h);var j,k;b[2]!==h?(k=h[0],j=h.slice(1),b[2]=h,b[3]=j,b[4]=k):(j=b[3],k=b[4]);if(a===d("EOTRTypes").EOTRFlow.UNTRUSTED_MOBILE||a===d("EOTRTypes").EOTRFlow.NO_MOBILE){b[5]!==g?(h={children:n,onClick:function(){p(n),g({onDismissUpsell:c("emptyFunction"),skipToForgotPINStep:!0,source:c("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_QP})}},b[5]=g,b[6]=h):h=b[6];return h}a=f>0;if(a){h=j;f=h[0];a=h[1];j=h[2];b[7]!==e||b[8]!==i||b[9]!==k?(h=function(){p(o),i(!0),k({onDismiss:e})},b[7]=e,b[8]=i,b[9]=k,b[10]=h):h=b[10];var l;b[11]!==a||b[12]!==f||b[13]!==j||b[14]!==h?(l={children:o,onClick:h,onHoverEnd:a,onHoverStart:f,onPressStart:j},b[11]=a,b[12]=f,b[13]=j,b[14]=h,b[15]=l):l=b[15];return l}else return r}g.STATIC_HELP_CENTER_LINK_PROPS=r;g.useForgotPinLinkPushPageProps=a;g.useForgotPinLinkShowDialogProps=b}),226);
__d("useMWChatEncryptedBackupsPinCodeRestore",["CometRelay","EBSMGatingUI","JSResourceForInteraction","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsSetIsDialogPersistedContext","MWEBODSEntityName.enum","MWEBPinCodeSize","MWEBUpsellDismissedEnum.facebook","MWEncryptedBackupsLocalStorageEntryEnum","QPLUserFlow","promiseDone","react","react-compiler-runtime","requireDeferred","useLabyrinthLogging","useMWChatEncryptedBackupsAddDevice","useMWChatEncryptedBackupsNumericCode","useMWEBFlowSourceContext","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");b.useCallback;var j=b.useContext,k=b.useEffect,l=b.useRef,m=b.useState,n=c("requireDeferred")("MWEBUseLocalStorage").__setRef("useMWChatEncryptedBackupsPinCodeRestore"),o=c("requireDeferred")("MWEncryptedBackupsSharedState").__setRef("useMWChatEncryptedBackupsPinCodeRestore"),p=c("requireDeferred")("mwEBGetPINSecretFromVesta").__setRef("useMWChatEncryptedBackupsPinCodeRestore"),q=c("requireDeferred")("updateUpsellsStateInRelayStore").__setRef("useMWChatEncryptedBackupsPinCodeRestore"),r=c("JSResourceForInteraction")("MWEncryptedBackupsHsmFleetMigrationGated").__setRef("useMWChatEncryptedBackupsPinCodeRestore");function a(a){var b=d("react-compiler-runtime").c(47),e=a.clientID,f=a.focusRegionId,g=a.onSubmitPin,i=a.onSubmitPinFailure,t=a.onVestaComplete,u=d("CometRelay").useRelayEnvironment();a=m(!1);var v=a[0],w=a[1];a=m(!1);var x=a[0],y=a[1];a=m(!1);var z=a[0],A=a[1],B=l(!1);a=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var C=a.startFlow,D=(h||(h=c("useReStore")))(),E=c("useMWEBFlowSourceContext")();a=m(!1);var F=a[0],G=a[1],H=j(c("MWChatEncryptedBackupsSetIsDialogPersistedContext")).setIsDialogPersisted;b[0]!==D||b[1]!==u||b[2]!==C?(a=function(a){c("promiseDone")(r.load().then(function(b){b({db:D,environment:u,pinCode:a,startFlow:C})}))},b[0]=D,b[1]=u,b[2]=C,b[3]=a):a=b[3];a=a;var I;b[4]!==D||b[5]!==u||b[6]!==t?(I=function(){var a;c("QPLUserFlow").addPoint((a=d("MWChatEncryptedBackupsQPLEvents")).restoreDeviceAuthQplEvent,"add_device_success");c("QPLUserFlow").addPoint(a.restoreQplEvent,"restore_auth_finished_and_dismissed");o.onReady(function(a){a=a.upsertEBSharedStateEntry;c("promiseDone")(a({db:D,stateKey:c("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY}))});n.onReady(s);d("MWChatEncryptedBackupsLogging").endSuccess({annotations:{bool:{is_backend_setup:d("EBSMGatingUI").isBackendSetupSuccessfulForEBSM()}},event:a.restoreQplEvent});d("MWChatEncryptedBackupsLogging").endSuccess({event:a.restoreDeviceAuthQplEvent,odsEntityName:c("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH});t();G(!1);c("promiseDone")(q.load(),function(a){a({environment:u,updateValue:d("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.UPSELLS_DISMISSED})})},b[4]=D,b[5]=u,b[6]=t,b[7]=I):I=b[7];I=I;var J;b[8]!==u||b[9]!==i||b[10]!==H?(J=function(a){i==null||i(),B.current=!0,y(!0),G(!1),c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,a),d("MWChatEncryptedBackupsLogging").endFailure({errorName:a,event:d("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityName:c("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH}),c("promiseDone")(q.load(),function(a){a({environment:u,updateValue:d("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.NOT_DISMISSED})}),H==null||H(!1)},b[8]=u,b[9]=i,b[10]=H,b[11]=J):J=b[11];J=J;var K;b[12]!==u||b[13]!==i||b[14]!==H?(K=function(){i==null||i(),B.current=!0,y(!0),G(!1),d("MWChatEncryptedBackupsLogging").endFailure({errorName:"pin_code_restore_wrong_recovery_code",event:d("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityName:c("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH}),c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"pin_code_restore_wrong_recovery_code"),c("promiseDone")(q.load(),function(a){a({environment:u,updateValue:d("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.NOT_DISMISSED})}),H==null||H(!1)},b[12]=u,b[13]=i,b[14]=H,b[15]=K):K=b[15];K=K;var L;b[16]!==u||b[17]!==a||b[18]!==I||b[19]!==J||b[20]!==K?(L={environment:u,hsmFleetMigrationResetPIN:a,onComplete:I,onFailure:J,onInvalidRecoveryCode:K},b[16]=u,b[17]=a,b[18]=I,b[19]=J,b[20]=K,b[21]=L):L=b[21];a=c("useMWChatEncryptedBackupsAddDevice")(L);var M=a[0];b[22]===Symbol.for("react.memo_cache_sentinel")?(I=function(){y(!1),A(!1),w(!1)},b[22]=I):I=b[22];b[23]!==M||b[24]!==e||b[25]!==u||b[26]!==E||b[27]!==g||b[28]!==i||b[29]!==H||b[30]!==C?(J=async function(a){var b=await p.load();await b({addDevice:M,clientID:e,environment:u,getSourceFromContext:E,onSubmitPin:g,onSubmitPinFailure:i,onVestaSecretFetch:function(){H==null||H(!0)},pinCode:a,productUseCase:"MSGR_ENC_BACKUP",setIsInProgress:G,setIsPinCodeIncorrect:w,setIsVestaError:A,startFlow:C})},b[23]=M,b[24]=e,b[25]=u,b[26]=E,b[27]=g,b[28]=i,b[29]=H,b[30]=C,b[31]=J):J=b[31];b[32]!==f||b[33]!==J?(K={enableMasking:!0,focusRegionId:f,inputSize:d("MWEBPinCodeSize").EB_PIN_CODE_SIZE,onChange:I,onComplete:J,type:"pin"},b[32]=f,b[33]=J,b[34]=K):K=b[34];L=d("useMWChatEncryptedBackupsNumericCode").useMWChatEncryptedBackupsNumericCode(K);a=L[0];I=L[1];var N=I.clearNumericInput;f=I.disabled;J=I.focusOnInput;K=I.invalidKeyPressedError;b[35]!==N?(L=function(){B.current&&(N(),B.current=!1)},I=[N],b[35]=N,b[36]=L,b[37]=I):(L=b[36],I=b[37]);k(L,I);L=f!=null?f:!1;b[38]!==J||b[39]!==a||b[40]!==K||b[41]!==F||b[42]!==x||b[43]!==v||b[44]!==z||b[45]!==L?(I={focusOnInput:J,inputProps:a,invalidKeyPressedError:K,isDisabled:L,isInProgress:F,isLabyrinthError:x,isPinCodeIncorrect:v,isVestaError:z},b[38]=J,b[39]=a,b[40]=K,b[41]=F,b[42]=x,b[43]=v,b[44]=z,b[45]=L,b[46]=I):I=b[46];return I}function s(a){var b=a.mwEBCreateLocalStorageEntry;a=a.mwEBDeleteLocalStorageEntry;b(c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION);b(c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION_2);a(c("MWEncryptedBackupsLocalStorageEntryEnum").EBSM_CORRUPTION_WIPE)}g.useMWChatEncryptedBackupsPinCodeRestore=a}),98);
__d("useWAInfraMobileDeviceList",["cr:8431","react","react-compiler-runtime","useWAInfraDeviceList"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useMemo;function a(){var a=d("react-compiler-runtime").c(3),e=c("useWAInfraDeviceList")(),f;a[0]!==e?(f=e.filter(i),a[0]=e,a[1]=f):f=a[1];e=f;f=e;if(b("cr:8431")){a[2]===Symbol["for"]("react.memo_cache_sentinel")?(e=[b("cr:8431")],a[2]=e):e=a[2];return e}return f}function i(a){var b;return a.platform==="Messenger"&&!["Mac OS X","Windows"].includes(a.manufacturer)&&!["Chrome","Safari","Firefox","Edge","System Product Name"].includes(a.model)&&!(a.manufacturer==="Apple"&&(b=a.model)!=null&&b.includes("Mac"))}g["default"]=a}),98);
__d("MWChatEncryptedBackupsPinCodeRestoreStep.react",["fbt","CometPlaceholder.react","FocusRegion.react","JSResourceForInteraction","MWChatEBPinCodeVerifyIndicator.react","MWChatEncryptedBackupsNumericCodeErrorWrapper.react","MWChatEncryptedBackupsNumericCodeInput.react","MWChatEncryptedBackupsQPLEvents","MWEBQPResetPIN.react","MWEBVestaUserInfoContext.react","MWEBVirtualDevicesContext.react","MWEncryptedBackupsForgotPinStep","MWEncryptedBackupsOtcRestoreSteps","MWLogInteraction","MWXColumn.react","MWXColumnItem.react","MWXDialogPageLegacy.react","MWXLink.react","MWXMultiStepDialogHeader.react","MWXText.react","QPLUserFlow","cr:6247","focusScopeQueries","gkx","lazyLoadComponent","nullthrows","promiseDone","react","react-compiler-runtime","useEncryptedBackupsQplImpressionRef","useMWChatEncryptedBackupsPinCodeRestore","useVisibilityObserver","useWAInfraMobileDeviceList","xplatToDOMRef"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));e=i;e.useCallback;var k=e.useEffect,l=e.useState,m=c("gkx")("23219"),n=c("JSResourceForInteraction")("MWChatEncryptedBackupsPinCodeBlockedStep.react").__setRef("MWChatEncryptedBackupsPinCodeRestoreStep.react"),o="chat-encrypted-backups-dialog-layout-restore-step";function p(a){var b=d("react-compiler-runtime").c(12),e=a.isInProgress,f=a.onClose,g=a.onComplete;a=a.pushPage;var h=d("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices();h=h.virtualDeviceInfo;h=h.offlineDevicesCount;var i=d("MWEBVestaUserInfoContext.react").useMWEBIsCooldownOrLockOutState(),k=c("useWAInfraMobileDeviceList")();k=k.length>0;var l;b[0]!==h||b[1]!==f||b[2]!==g||b[3]!==a||b[4]!==k?(l={hasMobileDevices:k,offlineDevicesCount:h,onClose:f,onComplete:g,pushPage:a},b[0]=h,b[1]=f,b[2]=g,b[3]=a,b[4]=k,b[5]=l):l=b[5];h=d("MWEncryptedBackupsForgotPinStep").useForgotPinLinkPushPageProps(l);f=i||e?"disabled":"highlight";g=i||e;b[6]!==h||b[7]!==g?(a=j.jsx(c("MWXLink.react"),babelHelpers["extends"]({},h,{disabled:g,testid:void 0})),b[6]=h,b[7]=g,b[8]=a):a=b[8];b[9]!==f||b[10]!==a?(k=j.jsx(c("MWXText.react"),{color:f,type:"button2",children:a}),b[9]=f,b[10]=a,b[11]=k):k=b[11];return k}function a(a){var e=d("react-compiler-runtime").c(42),f=a.onClose,g=a.onComplete,i=a.onSkip,s=a.pushPage;a=a.shouldShowForgotButton;a=a===void 0?!0:a;var t=l(null),u=t[0];t=t[1];var v=d("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices();v=v.virtualDeviceInfo;v=v.vestaClientID;var w;e[0]!==v?(w=c("nullthrows")(v),e[0]=v,e[1]=w):w=e[1];e[2]!==g||e[3]!==w?(v={clientID:w,focusRegionId:o,onVestaComplete:g},e[2]=g,e[3]=w,e[4]=v):v=e[4];w=d("useMWChatEncryptedBackupsPinCodeRestore").useMWChatEncryptedBackupsPinCodeRestore(v);var x=w.focusOnInput;v=w.inputProps;var y=w.invalidKeyPressedError,z=w.isInProgress,A=w.isLabyrinthError,B=w.isPinCodeIncorrect;w=w.isVestaError;var C=l(!1),D=C[0];C=C[1];z=z||D;e[5]===Symbol["for"]("react.memo_cache_sentinel")?(D=h._(/*BTDS*/"Some messages are missing. Enter your PIN to restore your chat history."),e[5]=D):D=e[5];D=D;var E=d("MWEBVestaUserInfoContext.react").useMWEBVestaUserInfo(),F=E.attemptsRemaining;E=E.loginTimeoutRemainingSecs;var G=F===0,H=d("MWEBVestaUserInfoContext.react").useMWEBIsCooldownOrLockOutState(),I=c("useEncryptedBackupsQplImpressionRef")(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"PIN_CODE_RESTORE_SCREEN",void 0,function(){x(),M!=null&&c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_OPTION_DISPLAYED_RESTORE_SCREEN")}),J=d("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices();J=J.virtualDeviceInfo;J=J.doesUserHaveOtcEligibleDevices;var K;e[6]!==z||e[7]!==f||e[8]!==g||e[9]!==s||e[10]!==a?(K=a?j.jsx(p,{isInProgress:z,onClose:f,onComplete:g,pushPage:s}):null,e[6]=z,e[7]=f,e[8]=g,e[9]=s,e[10]=a,e[11]=K):K=e[11];a=K;e[12]!==f||e[13]!==g||e[14]!==i||e[15]!==s?(K=function(){d("MWEncryptedBackupsOtcRestoreSteps").pushByOneTimeCodePage({onClose:f,onOtcComplete:g,onSkip:i,pushPage:s})},e[12]=f,e[13]=g,e[14]=i,e[15]=s,e[16]=K):K=e[16];var L=K,M=J?j.jsx(c("MWXText.react"),{color:H||z?"disabled":"highlight",type:"button2",children:j.jsx(c("MWXLink.react"),{disabled:H||z,onClick:function(){d("MWLogInteraction").logPopoverOpenCancel("initiate_restore"),c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_USE_ONE_TIME_CODE_CLICK"),L()},rel:"noreferrer",testid:void 0,children:h._(/*BTDS*/"Use a one-time code instead")})}):null;K=M!=null?M:a;e[17]===Symbol["for"]("react.memo_cache_sentinel")?(J=h._(/*BTDS*/"Enter your PIN to restore your chat history"),e[17]=J):J=e[17];a=J;e[18]===Symbol["for"]("react.memo_cache_sentinel")?(J=c("lazyLoadComponent")(n),e[18]=J):J=e[18];J=J;var N;e[19]===Symbol["for"]("react.memo_cache_sentinel")?(N={onVisible:r},e[19]=N):N=e[19];N=c("useVisibilityObserver")(N);if(e[20]!==F||e[21]!==v||e[22]!==y||e[23]!==H||e[24]!==z||e[25]!==A||e[26]!==B||e[27]!==w||e[28]!==E||e[29]!==G||e[30]!==f||e[31]!==g||e[32]!==u||e[33]!==I||e[34]!==K||e[35]!==M||e[36]!==N){a=H?j.jsx(J,{attemptsRemaining:F,loginTimeoutRemainingSecs:E,onClose:f,onComplete:g}):j.jsx(c("MWXDialogPageLegacy.react"),{callToActionGroupLayout:"expanded",includeFDSContentPadding_REMOVE_THIS_AFTER_CONTENT_PADDING_MIGRATION:!1,ref:d("xplatToDOMRef").xplatToDOMRef(I),children:j.jsxs(c("MWXColumn.react"),{align:"center",paddingHorizontal:16,paddingVertical:16,ref:N,spacing:0,children:[j.jsx(c("MWXColumnItem.react"),{align:"center",paddingTop:16,children:j.jsx("div",{className:"xg87l8a",children:j.jsx(c("MWEBQPResetPIN.react"),{})})}),j.jsx(c("MWXColumnItem.react"),{align:"center",paddingVertical:16,children:j.jsx(c("MWXText.react"),{align:"center",isSemanticHeading:!0,type:"headlineEmphasized2",children:a})}),j.jsx(c("MWXColumnItem.react"),{align:"center",children:j.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body3",children:j.jsx("div",{className:"x1l90r2v x2b8uid",children:D})})}),j.jsx(c("MWXColumnItem.react"),{align:"center",children:j.jsx(c("MWChatEncryptedBackupsNumericCodeErrorWrapper.react"),{error:(J=y!=null?y:u)!=null?J:B&&M!=null?h._(/*BTDS*/"Incorrect PIN. Try again or use a one-time code."):B?h._(/*BTDS*/"Incorrect PIN. Try again."):A||w?h._(/*BTDS*/"There was an error while using the PIN code. Please try again"):void 0,children:j.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").tabbableScopeQuery,id:o,children:j.jsx(c("MWChatEncryptedBackupsNumericCodeInput.react"),babelHelpers["extends"]({},v,{disabled:E!=null||G||z,testid:void 0}))})})}),z&&j.jsx(c("MWXColumnItem.react"),{align:"center",children:j.jsx(c("MWChatEBPinCodeVerifyIndicator.react"),{isMessenger:m})}),!z&&j.jsx(c("MWXColumnItem.react"),{align:"center",children:j.jsx("div",{className:"x1y1aw1k",children:K})}),b("cr:6247")!=null&&j.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWChatEncryptedBackupsPinCodeRestoreStep",children:j.jsx(b("cr:6247"),{onComplete:g,onError:t,setIsLoading:C})})]})});e[20]=F;e[21]=v;e[22]=y;e[23]=H;e[24]=z;e[25]=A;e[26]=B;e[27]=w;e[28]=E;e[29]=G;e[30]=f;e[31]=g;e[32]=u;e[33]=I;e[34]=K;e[35]=M;e[36]=N;e[37]=a}else a=e[37];D=a;e[38]===Symbol["for"]("react.memo_cache_sentinel")?(J=[],e[38]=J):J=e[38];k(q,J);e[39]===Symbol["for"]("react.memo_cache_sentinel")?(t=j.jsx(c("MWXMultiStepDialogHeader.react"),{withCloseButton:!1,withoutBackButton:!0}),e[39]=t):t=e[39];e[40]!==D?(C=j.jsxs(j.Fragment,{children:[t,D]}),e[40]=D,e[41]=C):C=e[41];return C}function q(){c("promiseDone")(n.load())}function r(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").ebResetObserverQplEvent,"PUSH_PIN_CODE_RESTORE_DIALOG_VISIBLE"),c("QPLUserFlow").endSuccess(d("MWChatEncryptedBackupsQPLEvents").ebResetObserverQplEvent)}g["default"]=a}),226);
__d("MWEBEOTRDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a=c("JSResourceForInteraction")("MWEBEOTRDialog.react").__setRef("MWEBEOTRDialog.entrypoint");b={getPreloadProps:function(){return{queries:{}}},root:a};g["default"]=b}),98);
__d("MWEBOTCErrorMessages",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(){return h._(/*BTDS*/"Incorrect code. Try again.")};b=function(){return h._(/*BTDS*/"Code not found. Try resending a new code.")};c=function(){return h._(/*BTDS*/"Too many attempts. Try again later.")};d=function(){return h._(/*BTDS*/"Code expired. Try generating a new code.")};e=function(){return h._(/*BTDS*/"Something went wrong. Please try again.")};f=function(){return h._(/*BTDS*/"Couldn't send code. Please try again.")};var i=function(){return h._(/*BTDS*/"Couldn't load trusted devices. Please try again.")};g.getOtcIsWrongErrorMessage=a;g.getNoSessionOngoingErrorMessage=b;g.getMaxAttemptsReachedErrorMessage=c;g.getSessionExpiredErrorMessage=d;g.getGeneralErrorMessage=e;g.getNotificationFailedToSendErrorMessage=f;g.getFailedToFetchOtcDevicesErrorMessage=i}),226);
__d("MWEBQPOneTimeCode.react",["ix","CometImageFromIXValue.react","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=c("gkx")("23433");function a(a){var b=d("react-compiler-runtime").c(5),e=a.alt,f=a.ref;a=a.xstyle;var g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g=k?h("421460"):h("421458"),b[0]=g):g=b[0];g=g;b[1]!==e||b[2]!==f||b[3]!==a?(g=j.jsx(c("CometImageFromIXValue.react"),{alt:e,ref:f,source:g,xstyle:a}),b[1]=e,b[2]=f,b[3]=a,b[4]=g):g=b[4];return g}g["default"]=a}),98);
__d("PAKECleanupSessionReasonEnum",[],(function(a,b,c,d,e,f){a=Object.freeze({FLOW_ABANDONED:0,TIMEOUT:1});f["default"]=a}),66);
__d("PAKEClientTypeEnum",[],(function(a,b,c,d,e,f){a=Object.freeze({PAKE_TEST:-1,ENCRYPTED_BACKUPS:0,EB_MULTI_USER_OTC:1});f["default"]=a}),66);
__d("useMWAbandonRestoreConfirmationDialog",["fbt","EOTRTypes","MWChatEncryptedBackupsQPLEvents","QPLUserFlow","gkx","react","react-compiler-runtime","useEOTRPhaseTwoAndThree","useMWXConfirmationDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i;(i||d("react")).useCallback;function a(a){var b=d("react-compiler-runtime").c(4),e=c("useEOTRPhaseTwoAndThree")(),f=e===d("EOTRTypes").EOTRFlow.NO_MOBILE||e===d("EOTRTypes").EOTRFlow.UNTRUSTED_MOBILE,g=c("useMWXConfirmationDialog")(),i=c("gkx")("23219");b[0]!==f||b[1]!==a||b[2]!==g?(e=function(){g({body:f?h._(/*BTDS*/"Your chats won't be backed up, and you won't be able to restore them if you switch devices."):i?h._(/*BTDS*/"This means that you won't see your full chat history on this device."):h._(/*BTDS*/"This means that you won't see your full chat history on this device and new messages that you send or receive may not load on other new devices."),cancel:f?h._(/*BTDS*/"Go back"):void 0,confirm:f?h._(/*BTDS*/"Close"):h._(/*BTDS*/"Don't restore messages"),title:f?h._(/*BTDS*/"Are you sure?"):h._(/*BTDS*/"Continue without restoring?")},function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"DONT_RESTORE_CONFIRMATION_CLICK"),a==null||a()},j)},b[0]=f,b[1]=a,b[2]=g,b[3]=e):e=b[3];return e}function j(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"DONT_RESTORE_CANCEL_CLICK")}g["default"]=a}),226);
__d("MWEBRestoreDialog.react",["EOTRTypes","FBLogger","InteractionTracing.xplat","MAWEncryptedBackupsRestoreStep.react","MAWPinCodeGating","MWChatEncryptedBackupOnCloseContext","MWChatEncryptedBackupsDismissalDialogContext","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEBHasSeenAutoRestoreNoticeContext","MWEBVirtualDevicesContext.react","MWEncryptedBackupsDeviceRegistrationId","MWEncryptedBackupsForgotRCStep","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWXMultiStepDialog_DEPRECATED.react","PAKECleanupSessionReasonEnum","PAKEClientTypeEnum","QPLUserFlow","cr:5777","cr:6320","cr:6321","cr:6701","promiseDone","react","requireDeferred","useEOTRPhaseTwoAndThree","useLabyrinthLogging","useMWAbandonRestoreConfirmationDialog","useMWEBFlowSourceContext","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));e=i;var k=e.useCallback,l=e.useContext,m=e.useEffect,n=e.useRef,o=c("requireDeferred")("CleanupPakeSession").__setRef("MWEBRestoreDialog.react"),p=c("requireDeferred")("mwEBCheckIfEBKeysExistInDisk").__setRef("MWEBRestoreDialog.react");function a(a){var e=a.cancellable;e=e===void 0?!0:e;var f=a.onClose,g=a.onDismissUpsell;a=a.skipToForgotPINStep;var i=a===void 0?!1:a,q=c("useEOTRPhaseTwoAndThree")(),r=n(!1),s=(h||(h=c("useReStore")))();a=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var t=a.startFlow,u=c("useMWEBFlowSourceContext")();a=l(c("MWChatEncryptedBackupsDismissalDialogContext"));a=a.isDismissedDisabled;var v=d("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices(),w=v.virtualDeviceInfo;v=l(c("MWEBHasSeenAutoRestoreNoticeContext"));var x=v.hasSeenNotice,y=k(function(){g==null||g(),w.doesUserHaveOtcEligibleDevices===!0&&o.onReady(function(a){c("promiseDone")(a({cleanupReason:c("PAKECleanupSessionReasonEnum").FLOW_ABANDONED,clientType:c("PAKEClientTypeEnum").ENCRYPTED_BACKUPS,deviceId:d("MWEncryptedBackupsDeviceRegistrationId").getDeviceRegistrationId(),storage:s}))})},[g,w.doesUserHaveOtcEligibleDevices,s]),z=k(function(){d("MWChatEncryptedBackupsLogging").closeDialogCancelFlow({event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,onClose:function(){return f()}}),y()},[f,y]);v=l(c("MWChatEncryptedBackupOnCloseContext"));var A=v.setOnCloseSkipConfirmation;m(function(){A(function(){return z})},[z,A]);var B=c("useMWAbandonRestoreConfirmationDialog")(z),C=k(function(){d("MWChatEncryptedBackupsLogging").cancelFlow({cancelEndPoint:"reset_skip",event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent}),f(),y()},[f,y]),D=b("cr:6320")==null?void 0:b("cr:6320")(),E=b("cr:6321")==null?void 0:b("cr:6321")(),F=w.vestaClientID!=null;m(function(){r.current||(r.current=!0,d("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:s,onFetch:function(a){var b=a.ebsmWiped,e=a.firstUpsellTime,f=a.hasEbKeysLocally,g=a.hasEBSM,h=a.hasPDB,i=a.hasUserRestoredBefore;a=a.hasUserRestoredBeforeTemp;var j=u();t({additionalAnnotations:{eb_session_identifier:e,ebsm_wiped:b,has_eb_keys_locally:f,has_ebsm:g,has_pdb:h,has_user_restored_before:i,has_user_restored_before_temp:a,restore_upsell_first_impression_time:e},event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,source:j});j===c("MWChatEncryptedBackupsQPLSource.enum").INBOX_INTERSTITIAL_SOFTBLOCK&&(c("InteractionTracing.xplat").getPendingInteractions().forEach(function(a){a.addAnnotationBoolean("eb_soft_block",!0)}),c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"INBOX_SOFTBLOCK_RESTORE_SCREEN"));c("promiseDone")(p.load(),function(a){return a(f)})}}))},[u,t,s]);return j.jsx(c("MWXMultiStepDialog_DEPRECATED.react"),{onClose:a?f:B,size:"small",withCloseButton:e,children:function(a){var e=function(b){return D!=null?D({onNextStep:b,pushPage:a}):E!=null?E({hasSeenNotice:x,onNextStep:b,pushPage:a}):f()},g=b("cr:6701")!=null?j.jsx(b("cr:6701"),{closeOnComplete:!0,onClose:f,onComplete:function(){e(f)}}):null,h=b("cr:5777")!=null?j.jsx(b("cr:5777"),{onClose:f,onComplete:function(){e(f)},pushPage:a}):null;h=q===d("EOTRTypes").EOTRFlow.UNTRUSTED_MOBILE?h:q===d("EOTRTypes").EOTRFlow.NO_MOBILE?g:null;i&&h==null&&c("FBLogger")("messenger_web_trust").mustfix("No dialog step found for EOTR flow - empty dialog rendered to the user");return i&&h!=null?h:j.jsx(c("MAWEncryptedBackupsRestoreStep.react"),{clientID:d("MAWPinCodeGating").isPinCodeEnabled()&&F?w.vestaClientID:null,offlineDevicesCount:w.offlineDevicesCount,onClose:B,onComplete:function(){e(f)},onForgotRC:function(){d("MWEncryptedBackupsForgotRCStep").pushForgotRCPage({onClose:f,onComplete:f,pushPage:a})},onSkip:C,pushPage:a,shouldShowForgotButton:!0,source:u()})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEBRestoreInThreadScrollPersistentBanner.react",["fbt","MAWEncryptedBackupsRestoreDialog.entrypoint","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWXLink.react","MWXText.react","QPLUserFlow","promiseDone","react","react-compiler-runtime","requireDeferred","useLabyrinthLogging","useMWXEntryPointDialog","useReStore","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react")),l=j.useRef,m=c("requireDeferred")("mwEBCheckIfEBKeysExistInDisk").__setRef("MWEBRestoreInThreadScrollPersistentBanner.react");function a(){var a=d("react-compiler-runtime").c(17),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b={},a[0]=b):b=a[0];b=c("useMWXEntryPointDialog")(c("MAWEncryptedBackupsRestoreDialog.entrypoint"),b);var e=b[0];b=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var f=b.startFlow,g=(i||(i=c("useReStore")))(),j=l(!1),n=c("MWChatEncryptedBackupsQPLSource.enum").IN_THREAD_SCROLL_PERSISTENT_BANNER;a[1]!==g||a[2]!==f?(b=function(a){d("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:g,onFetch:function(b){var e=b.ebsmWiped,g=b.firstUpsellTime,h=b.hasEbKeysLocally,i=b.hasEBSM,k=b.hasPDB,l=b.hasUserRestoredBefore;b=b.hasUserRestoredBeforeTemp;f({additionalAnnotations:{eb_session_identifier:g,ebsm_wiped:e,has_eb_keys_locally:h,has_ebsm:i,has_pdb:k,has_user_restored_before:l,has_user_restored_before_temp:b,restore_upsell_first_impression_time:g},event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,source:n});c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,a);j.current===!1&&(j.current=!0,c("promiseDone")(m.load(),function(a){return a(h)}))}})},a[1]=g,a[2]=f,a[3]=b):b=a[3];var o=b;a[4]!==o?(b={onVisible:function(){o("RESTORE_IN_THREAD_PERSISTENT_BANNER_IMPRESSION")}},a[4]=o,a[5]=b):b=a[5];b=c("useVisibilityObserver")(b);var p;a[6]===Symbol["for"]("react.memo_cache_sentinel")?(p={className:"xfpmyvw x80vd3b x1q0q8m5 xso031l xt0psk2 x1o1nzlu x10b6aqq x889kno x10l6tqk xh8yej3 x1vjfegm"},a[6]=p):p=a[6];var q;a[7]===Symbol["for"]("react.memo_cache_sentinel")?(q=h._(/*BTDS*/"Messages are missing."),a[7]=q):q=a[7];var r;a[8]!==e||a[9]!==o?(r=function(){o("RESTORE_IN_THREAD_PERSISTENT_BANNER_CTA_CLICKED"),e({source:n})},a[8]=e,a[9]=o,a[10]=r):r=a[10];var s;a[11]===Symbol["for"]("react.memo_cache_sentinel")?(s=k.jsx("div",{style:{color:"var(--mwp-header-button-color)",display:"inline"},children:h._(/*BTDS*/"Restore now")}),a[11]=s):s=a[11];a[12]!==r?(q=k.jsxs(c("MWXText.react"),{align:"center",color:"secondary",numberOfLines:2,type:"meta4",children:[q," ",k.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:k.jsx(c("MWXLink.react"),{onClick:r,target:"_blank",testid:void 0,weight_DEPRECATED:"semibold",children:s})})]}),a[12]=r,a[13]=q):q=a[13];a[14]!==b||a[15]!==q?(s=k.jsx("div",babelHelpers["extends"]({},p,{ref:b,children:q})),a[14]=b,a[15]=q,a[16]=s):s=a[16];return s}g["default"]=a}),226);
__d("MWEBRestoreInThreadScrollPersistentBannerWrapper.react",["MWEBEntrypointsKillswitch.enum","MWEBRestoreInThreadScrollPersistentBanner.react","react","react-compiler-runtime","useCometRouterState","useMWEBBackupState","useMWEBGetUpsellState"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(){var a=d("react-compiler-runtime").c(2),b=c("useCometRouterState")();b=b==null?void 0:b.main.route.tabKey;var e;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e={entrypoint:c("MWEBEntrypointsKillswitch.enum").IN_THREAD_SCROLL_BANNER},a[0]=e):e=a[0];e=c("useMWEBBackupState")(e);var f=c("useMWEBGetUpsellState")();f=f.isRestoreUpsellsDismissed;if(b!=="messenger"&&e===4&&f===!1){a[1]===Symbol["for"]("react.memo_cache_sentinel")?(b=i.jsx(c("MWEBRestoreInThreadScrollPersistentBanner.react"),{}),a[1]=b):b=a[1];return b}return null}g["default"]=a}),98);
__d("MWEncryptedBackupsOTCShowNotificationSentToast",["fbt","FDSCheckmarkFilled24Icon","MWChatEncryptedBackupsQPLEvents","QPLUserFlow","SVGIcon","cr:4027","cr:6570","mwPushToast","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){var a=b("cr:6570")?j.jsx(b("cr:6570"),{icon:c("FDSCheckmarkFilled24Icon")}):void 0,e=b("cr:4027")?d("SVGIcon").svgIcon(b("cr:4027")):void 0;d("mwPushToast").mwPushToast({body:h._(/*BTDS*/"Code sent."),icon:{comet:a,mds:e},testid:"mw-chat-encrypted-backups-otc-notification-sent-successful-toast"});c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_NOTIFICATION_SENT_SUCCESSFUL_TOAST")}g.showOTCNotificationSentToast=a}),226);
__d("MWEncrypedBackupsSendOTCNotifications",["FBLogger","I64","LSAuthorityLevel","LSEncryptedBackupsOpStatus","LSFactory","LSSendOTCNotificationsStoredProcedure","LSVec","MWEncryptedBackupsOTCShowNotificationSentToast","ReQL","ReQLSuspense","err","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;(i||d("react")).useCallback;async function k(a){var b=a.db,e=a.deviceIds;a=new Promise(function(a,e){var f=d("ReQL").fromTableAscending(b.tables.encrypted_backups_otc_notification_sending_status),g=f.subscribe(function(b,f){if(f.operation==="delete")return;b=f.value;if(b==null)return;f=(j||(j=d("I64"))).to_int32(b.authorityLevel);if(f!==c("LSAuthorityLevel").AUTHORITATIVE)return;g();switch((j||(j=d("I64"))).to_int32(b.notificationSendingStatus)){case c("LSEncryptedBackupsOpStatus").SUCCESS:d("MWEncryptedBackupsOTCShowNotificationSentToast").showOTCNotificationSentToast();return a();case c("LSEncryptedBackupsOpStatus").FAILURE:return e(c("err")("[sendOTCNotifications] Failure"));default:c("FBLogger")("wmi_eb").mustfix("OTC: Unexpected UNKNOWN status type for notification sending result.");return e(c("err")("[sendOTCNotifications] Unknown"))}})});await b.runInTransaction(function(a){return c("LSSendOTCNotificationsStoredProcedure")(c("LSFactory")(a),{deviceIds:c("LSVec").ofArray(e!=null?e:[])})},"readwrite",void 0,void 0,f.id+":81");return a}function a(){var a,b=d("react-compiler-runtime").c(5),e=(h||(h=c("useReStore")))();a=(a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.encrypted_backups_otc_notification_sending_status)},[e.tables.encrypted_backups_otc_notification_sending_status],f.id+":98"))==null?void 0:a.authorityLevel;a=a!=null&&(j||(j=d("I64"))).to_int32(a)===c("LSAuthorityLevel").OPTIMISTIC;var g;b[0]!==e?(g=function(a){return k({db:e,deviceIds:a})},b[0]=e,b[1]=g):g=b[1];g=g;var i;b[2]!==a||b[3]!==g?(i=[g,a],b[2]=a,b[3]=g,b[4]=i):i=b[4];return i}g.sendOTCNotifications=k;g.useSendOTCNotifications=a}),98);
__d("pakeCpace",["Promise"],(function(a,b,c,d,e,f){var g,h=function(){var a=typeof document!=="undefined"&&document.currentScript?document.currentScript.src:void 0;return function(c){c=c||{};var c=typeof c!=="undefined"?c:{},d=Object.assign,i,j;c.ready=new(g||(g=b("Promise")))(function(a,b){i=a,j=b});var k=d({},c),l=[],m="./this.program";(function(a,b){throw b});var n=!0,o=!1,p="";function aa(a){return c.locateFile?c.locateFile(a,p):p+a}var ba,ca,da;(n||o)&&(o?p=self.location.href:typeof document!=="undefined"&&document.currentScript&&(p=document.currentScript.src),a&&(p=a),p.indexOf("blob:")!==0?p=p.substr(0,p.replace(/[?#].*/,"").lastIndexOf("/")+1):p="",(ba=function(a){var b=new XMLHttpRequest();b.open("GET",a,!1);b.send(null);return b.responseText},o&&(da=function(a){var b=new XMLHttpRequest();b.open("GET",a,!1);b.responseType="arraybuffer";b.send(null);return new Uint8Array(b.response)}),ca=function(a,b,c){var d=new XMLHttpRequest();d.open("GET",a,!0);d.responseType="arraybuffer";d.onload=function(){if(d.status==200||d.status==0&&d.response){b(d.response);return}c()};d.onerror=c;d.send(null)}),function(a){return document.title=a});var ea=c.print||emptyFunction.bind(console),q=c.printErr||emptyFunction.bind(console);d(c,k);k=null;c.arguments&&(l=c.arguments);c.thisProgram&&(m=c.thisProgram);c.quit&&c.quit;var fa=0,r=function(a){fa=a},ga=function(){return fa},s;c.wasmBinary&&(s=c.wasmBinary);c.noExitRuntime||!0;typeof WebAssembly!=="object"&&A("no native wasm support detected");var ha,ia=!1;function ja(a,b){a||A(b)}var ka=typeof TextDecoder!=="undefined"?new TextDecoder("utf8"):void 0;function t(a,b,c){c=b+c;var d=b;while(a[d]&&!(d>=c))++d;if(d-b>16&&a.subarray&&ka)return ka.decode(a.subarray(b,d));else{c="";while(b<d){var e=a[b++];if(!(e&128)){c+=String.fromCharCode(e);continue}var f=a[b++]&63;if((e&224)==192){c+=String.fromCharCode((e&31)<<6|f);continue}var g=a[b++]&63;(e&240)==224?e=(e&15)<<12|f<<6|g:e=(e&7)<<18|f<<12|g<<6|a[b++]&63;if(e<65536)c+=String.fromCharCode(e);else{f=e-65536;c+=String.fromCharCode(55296|f>>10,56320|f&1023)}}}return c}function la(a,b){return a?t(v,a,b):""}function ma(a,b,c,d){if(!(d>0))return 0;var e=c;d=c+d-1;for(var f=0;f<a.length;++f){var g=a.charCodeAt(f);if(g>=55296&&g<=57343){var h=a.charCodeAt(++f);g=65536+((g&1023)<<10)|h&1023}if(g<=127){if(c>=d)break;b[c++]=g}else if(g<=2047){if(c+1>=d)break;b[c++]=192|g>>6;b[c++]=128|g&63}else if(g<=65535){if(c+2>=d)break;b[c++]=224|g>>12;b[c++]=128|g>>6&63;b[c++]=128|g&63}else{if(c+3>=d)break;b[c++]=240|g>>18;b[c++]=128|g>>12&63;b[c++]=128|g>>6&63;b[c++]=128|g&63}}b[c]=0;return c-e}function na(a,b,c){return ma(a,v,b,c)}function oa(a){var b=0;for(var c=0;c<a.length;++c){var d=a.charCodeAt(c);d>=55296&&d<=57343&&(d=65536+((d&1023)<<10)|a.charCodeAt(++c)&1023);d<=127?++b:d<=2047?b+=2:d<=65535?b+=3:b+=4}return b}var pa=typeof TextDecoder!=="undefined"?new TextDecoder("utf-16le"):void 0;function qa(a,b){var c=a,d=c>>1,e=d+b/2;while(!(d>=e)&&za[d])++d;c=d<<1;if(c-a>32&&pa)return pa.decode(v.subarray(a,c));else{e="";for(d=0;!(d>=b/2);++d){c=w[a+d*2>>1];if(c==0)break;e+=String.fromCharCode(c)}return e}}function ra(a,b,c){c===void 0&&(c=2147483647);if(c<2)return 0;c-=2;var d=b;c=c<a.length*2?c/2:a.length;for(var e=0;e<c;++e){var f=a.charCodeAt(e);w[b>>1]=f;b+=2}w[b>>1]=0;return b-d}function sa(a){return a.length*2}function ta(a,b){var c=0,d="";while(!(c>=b/4)){var e=x[a+c*4>>2];if(e==0)break;++c;if(e>=65536){var f=e-65536;d+=String.fromCharCode(55296|f>>10,56320|f&1023)}else d+=String.fromCharCode(e)}return d}function ua(a,b,c){c===void 0&&(c=2147483647);if(c<4)return 0;var d=b;c=d+c-4;for(var e=0;e<a.length;++e){var f=a.charCodeAt(e);if(f>=55296&&f<=57343){var g=a.charCodeAt(++e);f=65536+((f&1023)<<10)|g&1023}x[b>>2]=f;b+=4;if(b+4>c)break}x[b>>2]=0;return b-d}function va(a){var b=0;for(var c=0;c<a.length;++c){var d=a.charCodeAt(c);d>=55296&&d<=57343&&++c;b+=4}return b}function wa(b,a){u.set(b,a)}function xa(b,a,c){for(var d=0;d<b.length;++d)u[a++>>0]=b.charCodeAt(d);c||(u[a>>0]=0)}var ya,u,v,w,za,x,y,Aa,Ba;function Ca(a){ya=a,c.HEAP8=u=new Int8Array(a),c.HEAP16=w=new Int16Array(a),c.HEAP32=x=new Int32Array(a),c.HEAPU8=v=new Uint8Array(a),c.HEAPU16=za=new Uint16Array(a),c.HEAPU32=y=new Uint32Array(a),c.HEAPF32=Aa=new Float32Array(a),c.HEAPF64=Ba=new Float64Array(a)}c.INITIAL_MEMORY||16777216;var Da,Ea=[],Fa=[],Ga=[];function Ha(){if(c.preRun){typeof c.preRun=="function"&&(c.preRun=[c.preRun]);while(c.preRun.length)Ka(c.preRun.shift())}Xa(Ea)}function Ia(){!c.noFSInit&&!K.init.initialized&&K.init(),K.ignorePermissions=!1,I.init(),Xa(Fa)}function Ja(){if(c.postRun){typeof c.postRun=="function"&&(c.postRun=[c.postRun]);while(c.postRun.length)Ma(c.postRun.shift())}Xa(Ga)}function Ka(a){Ea.unshift(a)}function La(a){Fa.unshift(a)}function Ma(a){Ga.unshift(a)}var z=0,Na=null,Oa=null;function Pa(a){return a}function Qa(a){z++,c.monitorRunDependencies&&c.monitorRunDependencies(z)}function Ra(a){z--;c.monitorRunDependencies&&c.monitorRunDependencies(z);if(z==0){Na!==null&&(clearInterval(Na),Na=null);if(Oa){a=Oa;Oa=null;a()}}}c.preloadedImages={};c.preloadedAudios={};function A(a){c.onAbort&&c.onAbort(a);a="Aborted("+a+")";q(a);ia=!0;a+=". Build with -s ASSERTIONS=1 for more info.";a=new WebAssembly.RuntimeError(a);j(a);throw a}var Sa="data:application/octet-stream;base64,";function Ta(a){return a.startsWith(Sa)}var B;B="pakeCpace.wasm";Ta(B)||(B=aa(B));function Ua(a){try{if(a==B&&s)return new Uint8Array(s);if(da)return da(a);else throw"both async and sync fetching of the wasm failed"}catch(a){A(a)}}function Va(){return!s&&(n||o)&&typeof fetch==="function"?fetch(B,{credentials:"same-origin"}).then(function(a){if(!a.ok)throw"failed to load wasm binary file at '"+B+"'";return a.arrayBuffer()})["catch"](function(){return Ua(B)}):(g||(g=b("Promise"))).resolve().then(function(){return Ua(B)})}function Wa(){var b={a:vd};function d(b,a){a=b.exports;c.asm=a;ha=c.asm.ha;Ca(ha.buffer);Da=c.asm.ka;La(c.asm.ia);Ra("wasm-instantiate")}Qa("wasm-instantiate");function g(a){d(a.instance)}function h(a){return Va().then(function(a){return WebAssembly.instantiate(a,b)}).then(function(a){return a}).then(a,function(a){q("failed to asynchronously prepare wasm: "+a),A(a)})}function i(){if(!s&&typeof WebAssembly.instantiateStreaming==="function"&&!Ta(B)&&typeof fetch==="function")return fetch(B,{credentials:"same-origin"}).then(function(a){a=WebAssembly.instantiateStreaming(a,b);return a.then(g,function(a){q("wasm streaming compile failed: "+a);q("falling back to ArrayBuffer instantiation");return h(g)})});else return h(g)}if(c.instantiateWasm)try{var a=c.instantiateWasm(b,d);return a}catch(a){q("Module.instantiateWasm callback failed with error: "+a);return!1}i()["catch"](j);return{}}var C,D;function Xa(a){while(a.length>0){var b=a.shift();if(typeof b=="function"){b(c);continue}var d=b.func;typeof d==="number"?b.arg===void 0?E(d)():E(d)(b.arg):d(b.arg===void 0?null:b.arg)}}function E(a){return Da.get(a)}function Ya(a){return wd(a+16)+16}function Za(a){this.excPtr=a,this.ptr=a-16,this.set_type=function(a){x[this.ptr+4>>2]=a},this.get_type=function(){return x[this.ptr+4>>2]},this.set_destructor=function(a){x[this.ptr+8>>2]=a},this.get_destructor=function(){return x[this.ptr+8>>2]},this.set_refcount=function(a){x[this.ptr>>2]=a},this.set_caught=function(a){a=a?1:0,u[this.ptr+12>>0]=a},this.get_caught=function(){return u[this.ptr+12>>0]!=0},this.set_rethrown=function(a){a=a?1:0,u[this.ptr+13>>0]=a},this.get_rethrown=function(){return u[this.ptr+13>>0]!=0},this.init=function(a,b){this.set_type(a),this.set_destructor(b),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var a=x[this.ptr>>2];x[this.ptr>>2]=a+1},this.release_ref=function(){var a=x[this.ptr>>2];x[this.ptr>>2]=a-1;return a===1}}function $a(a){this.free=function(){X(this.ptr),this.ptr=0},this.set_base_ptr=function(a){x[this.ptr>>2]=a},this.get_base_ptr=function(){return x[this.ptr>>2]},this.set_adjusted_ptr=function(a){x[this.ptr+4>>2]=a},this.get_adjusted_ptr_addr=function(){return this.ptr+4},this.get_adjusted_ptr=function(){return x[this.ptr+4>>2]},this.get_exception_ptr=function(){var a=zd(this.get_exception_info().get_type());if(a)return x[this.get_base_ptr()>>2];a=this.get_adjusted_ptr();return a!==0?a:this.get_base_ptr()},this.get_exception_info=function(){return new Za(this.get_base_ptr())},a===void 0?(this.ptr=wd(8),this.set_adjusted_ptr(0)):this.ptr=a}var ab=[];function bb(a){a.add_ref()}var cb=0;function db(a){a=new $a(a);var b=a.get_exception_info();b.get_caught()||(b.set_caught(!0),cb--);b.set_rethrown(!1);ab.push(a);bb(b);return a.get_exception_ptr()}var F=0;function eb(a){try{return X(new Za(a).ptr)}catch(a){}}function fb(a){if(a.release_ref()&&!a.get_rethrown()){var b=a.get_destructor();b&&E(b)(a.excPtr);eb(a.excPtr)}}function gb(){Y(0);var a=ab.pop();fb(a.get_exception_info());a.free();F=0}function hb(a){a=new $a(a);var b=a.get_base_ptr();F||(F=b);a.free();throw b}function ib(){var a=F;if(!a){r(0);return 0|0}var b=new Za(a),c=b.get_type(),d=new $a();d.set_base_ptr(a);d.set_adjusted_ptr(a);if(!c){r(0);return d.ptr|0}var e=Array.prototype.slice.call(arguments);for(var f=0;f<e.length;f++){var g=e[f];if(g===0||g===c)break;if(yd(g,c,d.get_adjusted_ptr_addr())){r(g);return d.ptr|0}}r(c);return d.ptr|0}function jb(){var a=F;if(!a){r(0);return 0|0}var b=new Za(a),c=b.get_type(),d=new $a();d.set_base_ptr(a);d.set_adjusted_ptr(a);if(!c){r(0);return d.ptr|0}var e=Array.prototype.slice.call(arguments);for(var f=0;f<e.length;f++){var g=e[f];if(g===0||g===c)break;if(yd(g,c,d.get_adjusted_ptr_addr())){r(g);return d.ptr|0}}r(c);return d.ptr|0}function kb(){var a=ab.pop();a||A("no exception to throw");var b=a.get_exception_info(),c=a.get_base_ptr();!b.get_rethrown()?(ab.push(a),b.set_rethrown(!0),b.set_caught(!1),cb++):a.free();F=c;throw c}function lb(a,b,c){var d=new Za(a);d.init(b,c);F=a;cb++;throw a}function mb(){return cb}var G={splitPath:function(a){var b=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return b.exec(a).slice(1)},normalizeArray:function(a,b){var c=0;for(var d=a.length-1;d>=0;d--){var e=a[d];e==="."?a.splice(d,1):e===".."?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c;c--)a.unshift("..");return a},normalize:function(a){var b=a.charAt(0)==="/",c=a.substr(-1)==="/";a=G.normalizeArray(a.split("/").filter(function(a){return!!a}),!b).join("/");!a&&!b&&(a=".");a&&c&&(a+="/");return(b?"/":"")+a},dirname:function(a){a=G.splitPath(a);var b=a[0];a=a[1];if(!b&&!a)return".";a&&(a=a.substr(0,a.length-1));return b+a},basename:function(a){if(a==="/")return"/";a=G.normalize(a);a=a.replace(/\/$/,"");var b=a.lastIndexOf("/");return b===-1?a:a.substr(b+1)},extname:function(a){return G.splitPath(a)[3]},join:function(){var a=Array.prototype.slice.call(arguments,0);return G.normalize(a.join("/"))},join2:function(a,b){return G.normalize(a+"/"+b)}};function nb(){if(typeof crypto==="object"&&typeof crypto.getRandomValues==="function"){var a=new Uint8Array(1);return function(){crypto.getRandomValues(a);return a[0]}}else return function(){A("randomDevice")}}var H={resolve:function(){var a="",b=!1;for(var c=arguments.length-1;c>=-1&&!b;c--){var d=c>=0?arguments[c]:K.cwd();if(typeof d!=="string")throw new TypeError("Arguments to path.resolve must be strings");else if(!d)return"";a=d+"/"+a;b=d.charAt(0)==="/"}a=G.normalizeArray(a.split("/").filter(function(a){return!!a}),!b).join("/");return(b?"/":"")+a||"."},relative:function(a,b){a=H.resolve(a).substr(1);b=H.resolve(b).substr(1);function c(a){var b=0;for(;b<a.length;b++)if(a[b]!=="")break;var c=a.length-1;for(;c>=0;c--)if(a[c]!=="")break;return b>c?[]:a.slice(b,c-b+1)}a=c(a.split("/"));c=c(b.split("/"));b=Math.min(a.length,c.length);var d=b;for(var e=0;e<b;e++)if(a[e]!==c[e]){d=e;break}b=[];for(var e=d;e<a.length;e++)b.push("..");b=b.concat(c.slice(d));return b.join("/")}},I={ttys:[],init:function(){},shutdown:function(){},register:function(a,b){I.ttys[a]={input:[],output:[],ops:b},K.registerDevice(a,I.stream_ops)},stream_ops:{open:function(a){var b=I.ttys[a.node.rdev];if(!b)throw new K.ErrnoError(43);a.tty=b;a.seekable=!1},close:function(a){a.tty.ops.flush(a.tty)},flush:function(a){a.tty.ops.flush(a.tty)},read:function(b,a,c,d,e){if(!b.tty||!b.tty.ops.get_char)throw new K.ErrnoError(60);e=0;for(var f=0;f<d;f++){var g;try{g=b.tty.ops.get_char(b.tty)}catch(a){throw new K.ErrnoError(29)}if(g===void 0&&e===0)throw new K.ErrnoError(6);if(g===null||g===void 0)break;e++;a[c+f]=g}e&&(b.node.timestamp=Date.now());return e},write:function(b,a,c,d,e){if(!b.tty||!b.tty.ops.put_char)throw new K.ErrnoError(60);try{for(var f=0;f<d;f++)b.tty.ops.put_char(b.tty,a[c+f])}catch(a){throw new K.ErrnoError(29)}d&&(b.node.timestamp=Date.now());return f}},default_tty_ops:{get_char:function(a){if(!a.input.length){var b=null;typeof window!="undefined"&&typeof window.prompt=="function"?(b=window.prompt("Input: "),b!==null&&(b+="\n")):typeof readline=="function"&&(b=readline(),b!==null&&(b+="\n"));if(!b)return null;a.input=ud(b,!0)}return a.input.shift()},put_char:function(a,b){b===null||b===10?(ea(t(a.output,0)),a.output=[]):b!=0&&a.output.push(b)},flush:function(a){a.output&&a.output.length>0&&(ea(t(a.output,0)),a.output=[])}},default_tty1_ops:{put_char:function(a,b){b===null||b===10?(q(t(a.output,0)),a.output=[]):b!=0&&a.output.push(b)},flush:function(a){a.output&&a.output.length>0&&(q(t(a.output,0)),a.output=[])}}};function ob(a){A()}var J={ops_table:null,mount:function(a){return J.createNode(null,"/",16384|511,0)},createNode:function(a,b,c,d){if(K.isBlkdev(c)||K.isFIFO(c))throw new K.ErrnoError(63);J.ops_table||(J.ops_table={dir:{node:{getattr:J.node_ops.getattr,setattr:J.node_ops.setattr,lookup:J.node_ops.lookup,mknod:J.node_ops.mknod,rename:J.node_ops.rename,unlink:J.node_ops.unlink,rmdir:J.node_ops.rmdir,readdir:J.node_ops.readdir,symlink:J.node_ops.symlink},stream:{llseek:J.stream_ops.llseek}},file:{node:{getattr:J.node_ops.getattr,setattr:J.node_ops.setattr},stream:{llseek:J.stream_ops.llseek,read:J.stream_ops.read,write:J.stream_ops.write,allocate:J.stream_ops.allocate,mmap:J.stream_ops.mmap,msync:J.stream_ops.msync}},link:{node:{getattr:J.node_ops.getattr,setattr:J.node_ops.setattr,readlink:J.node_ops.readlink},stream:{}},chrdev:{node:{getattr:J.node_ops.getattr,setattr:J.node_ops.setattr},stream:K.chrdev_stream_ops}});c=K.createNode(a,b,c,d);K.isDir(c.mode)?(c.node_ops=J.ops_table.dir.node,c.stream_ops=J.ops_table.dir.stream,c.contents={}):K.isFile(c.mode)?(c.node_ops=J.ops_table.file.node,c.stream_ops=J.ops_table.file.stream,c.usedBytes=0,c.contents=null):K.isLink(c.mode)?(c.node_ops=J.ops_table.link.node,c.stream_ops=J.ops_table.link.stream):K.isChrdev(c.mode)&&(c.node_ops=J.ops_table.chrdev.node,c.stream_ops=J.ops_table.chrdev.stream);c.timestamp=Date.now();a&&(a.contents[b]=c,a.timestamp=c.timestamp);return c},getFileDataAsTypedArray:function(a){if(!a.contents)return new Uint8Array(0);return a.contents.subarray?a.contents.subarray(0,a.usedBytes):new Uint8Array(a.contents)},expandFileStorage:function(a,b){var c=a.contents?a.contents.length:0;if(c>=b)return;var d=1024*1024;b=Math.max(b,c*(c<d?2:1.125)>>>0);c!=0&&(b=Math.max(b,256));d=a.contents;a.contents=new Uint8Array(b);a.usedBytes>0&&a.contents.set(d.subarray(0,a.usedBytes),0)},resizeFileStorage:function(a,b){if(a.usedBytes==b)return;if(b==0)a.contents=null,a.usedBytes=0;else{var c=a.contents;a.contents=new Uint8Array(b);c&&a.contents.set(c.subarray(0,Math.min(b,a.usedBytes)));a.usedBytes=b}},node_ops:{getattr:function(a){var b={};b.dev=K.isChrdev(a.mode)?a.id:1;b.ino=a.id;b.mode=a.mode;b.nlink=1;b.uid=0;b.gid=0;b.rdev=a.rdev;K.isDir(a.mode)?b.size=4096:K.isFile(a.mode)?b.size=a.usedBytes:K.isLink(a.mode)?b.size=a.link.length:b.size=0;b.atime=new Date(a.timestamp);b.mtime=new Date(a.timestamp);b.ctime=new Date(a.timestamp);b.blksize=4096;b.blocks=Math.ceil(b.size/b.blksize);return b},setattr:function(a,b){b.mode!==void 0&&(a.mode=b.mode),b.timestamp!==void 0&&(a.timestamp=b.timestamp),b.size!==void 0&&J.resizeFileStorage(a,b.size)},lookup:function(a,b){throw K.genericErrors[44]},mknod:function(a,b,c,d){return J.createNode(a,b,c,d)},rename:function(a,b,c){if(K.isDir(a.mode)){var d;try{d=K.lookupNode(b,c)}catch(a){}if(d)for(var e in d.contents)throw new K.ErrnoError(55)}delete a.parent.contents[a.name];a.parent.timestamp=Date.now();a.name=c;b.contents[c]=a;b.timestamp=a.parent.timestamp;a.parent=b},unlink:function(a,b){delete a.contents[b],a.timestamp=Date.now()},rmdir:function(a,b){var c=K.lookupNode(a,b);for(c in c.contents)throw new K.ErrnoError(55);delete a.contents[b];a.timestamp=Date.now()},readdir:function(a){var b=[".",".."];for(var c in a.contents){if(!Object.prototype.hasOwnProperty.call(a.contents,c))continue;b.push(c)}return b},symlink:function(a,b,c){a=J.createNode(a,b,511|40960,0);a.link=c;return a},readlink:function(a){if(!K.isLink(a.mode))throw new K.ErrnoError(28);return a.link}},stream_ops:{read:function(b,a,c,d,e){var f=b.node.contents;if(e>=b.node.usedBytes)return 0;b=Math.min(b.node.usedBytes-e,d);if(b>8&&f.subarray)a.set(f.subarray(e,e+b),c);else for(d=0;d<b;d++)a[c+d]=f[e+d];return b},write:function(b,a,c,d,e,f){if(!d)return 0;b=b.node;b.timestamp=Date.now();if(a.subarray&&(!b.contents||b.contents.subarray))if(f){b.contents=a.subarray(c,c+d);b.usedBytes=d;return d}else if(b.usedBytes===0&&e===0){b.contents=a.slice(c,c+d);b.usedBytes=d;return d}else if(e+d<=b.usedBytes){b.contents.set(a.subarray(c,c+d),e);return d}J.expandFileStorage(b,e+d);if(b.contents.subarray&&a.subarray)b.contents.set(a.subarray(c,c+d),e);else for(f=0;f<d;f++)b.contents[e+f]=a[c+f];b.usedBytes=Math.max(b.usedBytes,e+d);return d},llseek:function(a,b,c){b=b;c===1?b+=a.position:c===2&&(K.isFile(a.node.mode)&&(b+=a.node.usedBytes));if(b<0)throw new K.ErrnoError(28);return b},allocate:function(a,b,c){J.expandFileStorage(a.node,b+c),a.node.usedBytes=Math.max(a.node.usedBytes,b+c)},mmap:function(a,b,c,d,e,f){if(b!==0)throw new K.ErrnoError(28);if(!K.isFile(a.node.mode))throw new K.ErrnoError(43);e=a.node.contents;if(!(f&2)&&e.buffer===ya)b=!1,a=e.byteOffset;else{(d>0||d+c<e.length)&&(e.subarray?e=e.subarray(d,d+c):e=Array.prototype.slice.call(e,d,d+c));b=!0;a=ob(c);if(!a)throw new K.ErrnoError(48);u.set(e,a)}return{ptr:a,allocated:b}},msync:function(b,a,c,d,e){if(!K.isFile(b.node.mode))throw new K.ErrnoError(43);if(e&2)return 0;J.stream_ops.write(b,a,0,d,c,!1);return 0}}};function pb(a,b,c,d){var e=d?"":Pa("al "+a);ca(a,function(c){ja(c,'Loading data file "'+a+'" failed (no arrayBuffer).'),b(new Uint8Array(c)),e&&Ra(e)},function(b){if(c)c();else throw'Loading data file "'+a+'" failed.'});e&&Qa(e)}var K={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(a,b){b===void 0&&(b={});a=H.resolve(K.cwd(),a);if(!a)return{path:"",node:null};var c={follow_mount:!0,recurse_count:0};for(var d in c)b[d]===void 0&&(b[d]=c[d]);if(b.recurse_count>8)throw new K.ErrnoError(32);c=G.normalizeArray(a.split("/").filter(function(a){return!!a}),!1);d=K.root;a="/";for(var e=0;e<c.length;e++){var f=e===c.length-1;if(f&&b.parent)break;d=K.lookupNode(d,c[e]);a=G.join2(a,c[e]);K.isMountpoint(d)&&((!f||f&&b.follow_mount)&&(d=d.mounted.root));if(!f||b.follow){f=0;while(K.isLink(d.mode)){var g=K.readlink(a);a=H.resolve(G.dirname(a),g);g=K.lookupPath(a,{recurse_count:b.recurse_count});d=g.node;if(f++>40)throw new K.ErrnoError(32)}}}return{path:a,node:d}},getPath:function(a){var b;while(!0){if(K.isRoot(a)){var c=a.mount.mountpoint;return!b?c:c[c.length-1]!=="/"?c+"/"+b:c+b}b=b?a.name+"/"+b:a.name;a=a.parent}},hashName:function(a,b){var c=0;for(var d=0;d<b.length;d++)c=(c<<5)-c+b.charCodeAt(d)|0;return(a+c>>>0)%K.nameTable.length},hashAddNode:function(a){var b=K.hashName(a.parent.id,a.name);a.name_next=K.nameTable[b];K.nameTable[b]=a},hashRemoveNode:function(a){var b=K.hashName(a.parent.id,a.name);if(K.nameTable[b]===a)K.nameTable[b]=a.name_next;else{b=K.nameTable[b];while(b){if(b.name_next===a){b.name_next=a.name_next;break}b=b.name_next}}},lookupNode:function(a,b){var c=K.mayLookup(a);if(c)throw new K.ErrnoError(c,a);c=K.hashName(a.id,b);for(c=K.nameTable[c];c;c=c.name_next){var d=c.name;if(c.parent.id===a.id&&d===b)return c}return K.lookup(a,b)},createNode:function(a,b,c,d){a=new K.FSNode(a,b,c,d);K.hashAddNode(a);return a},destroyNode:function(a){K.hashRemoveNode(a)},isRoot:function(a){return a===a.parent},isMountpoint:function(a){return!!a.mounted},isFile:function(a){return(a&61440)===32768},isDir:function(a){return(a&61440)===16384},isLink:function(a){return(a&61440)===40960},isChrdev:function(a){return(a&61440)===8192},isBlkdev:function(a){return(a&61440)===24576},isFIFO:function(a){return(a&61440)===4096},isSocket:function(a){return(a&49152)===49152},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(a){var b=K.flagModes[a];if(typeof b==="undefined")throw new Error("Unknown file open mode: "+a);return b},flagsToPermissionString:function(a){var b=["r","w","rw"][a&3];a&512&&(b+="w");return b},nodePermissions:function(a,b){if(K.ignorePermissions)return 0;if(b.includes("r")&&!(a.mode&292))return 2;else if(b.includes("w")&&!(a.mode&146))return 2;else if(b.includes("x")&&!(a.mode&73))return 2;return 0},mayLookup:function(a){var b=K.nodePermissions(a,"x");if(b)return b;return!a.node_ops.lookup?2:0},mayCreate:function(a,b){try{K.lookupNode(a,b);return 20}catch(a){}return K.nodePermissions(a,"wx")},mayDelete:function(a,b,c){var d;try{d=K.lookupNode(a,b)}catch(a){return a.errno}b=K.nodePermissions(a,"wx");if(b)return b;if(c){if(!K.isDir(d.mode))return 54;if(K.isRoot(d)||K.getPath(d)===K.cwd())return 10}else if(K.isDir(d.mode))return 31;return 0},mayOpen:function(a,b){if(!a)return 44;if(K.isLink(a.mode))return 32;else if(K.isDir(a.mode)&&(K.flagsToPermissionString(b)!=="r"||b&512))return 31;return K.nodePermissions(a,K.flagsToPermissionString(b))},MAX_OPEN_FDS:4096,nextfd:function(a,b){a===void 0&&(a=0);b===void 0&&(b=K.MAX_OPEN_FDS);for(a=a;a<=b;a++)if(!K.streams[a])return a;throw new K.ErrnoError(33)},getStream:function(a){return K.streams[a]},createStream:function(a,b,c){K.FSStream||(K.FSStream=function(){},K.FSStream.prototype={object:{get:function(){return this.node},set:function(a){this.node=a}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}});var d=new K.FSStream();for(var e in a)d[e]=a[e];a=d;e=K.nextfd(b,c);a.fd=e;K.streams[e]=a;return a},closeStream:function(a){K.streams[a]=null},chrdev_stream_ops:{open:function(a){var b=K.getDevice(a.node.rdev);a.stream_ops=b.stream_ops;a.stream_ops.open&&a.stream_ops.open(a)},llseek:function(){throw new K.ErrnoError(70)}},major:function(a){return a>>8},minor:function(a){return a&255},makedev:function(a,b){return a<<8|b},registerDevice:function(a,b){K.devices[a]={stream_ops:b}},getDevice:function(a){return K.devices[a]},getMounts:function(a){var b=[];a=[a];while(a.length){var c=a.pop();b.push(c);a.push.apply(a,c.mounts)}return b},syncfs:function(a,b){typeof a==="function"&&(b=a,a=!1);K.syncFSRequests++;K.syncFSRequests>1&&q("warning: "+K.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var c=K.getMounts(K.root.mount),d=0;function e(a){K.syncFSRequests--;return b(a)}function f(a){if(a){if(!f.errored){f.errored=!0;return e(a)}return}++d>=c.length&&e(null)}c.forEach(function(b){if(!b.type.syncfs)return f(null);b.type.syncfs(b,a,f)})},mount:function(a,b,c){var d=c==="/",e=!c,f;if(d&&K.root)throw new K.ErrnoError(10);else if(!d&&!e){e=K.lookupPath(c,{follow_mount:!1});c=e.path;f=e.node;if(K.isMountpoint(f))throw new K.ErrnoError(10);if(!K.isDir(f.mode))throw new K.ErrnoError(54)}e={type:a,opts:b,mountpoint:c,mounts:[]};b=a.mount(e);b.mount=e;e.root=b;d?K.root=b:f&&(f.mounted=e,f.mount&&f.mount.mounts.push(e));return b},unmount:function(a){a=K.lookupPath(a,{follow_mount:!1});if(!K.isMountpoint(a.node))throw new K.ErrnoError(28);a=a.node;var b=a.mounted,c=K.getMounts(b);Object.keys(K.nameTable).forEach(function(a){a=K.nameTable[a];while(a){var b=a.name_next;c.includes(a.mount)&&K.destroyNode(a);a=b}});a.mounted=null;b=a.mount.mounts.indexOf(b);a.mount.mounts.splice(b,1)},lookup:function(a,b){return a.node_ops.lookup(a,b)},mknod:function(a,b,c){var d=K.lookupPath(a,{parent:!0});d=d.node;a=G.basename(a);if(!a||a==="."||a==="..")throw new K.ErrnoError(28);var e=K.mayCreate(d,a);if(e)throw new K.ErrnoError(e);if(!d.node_ops.mknod)throw new K.ErrnoError(63);return d.node_ops.mknod(d,a,b,c)},create:function(a,b){b=b!==void 0?b:438;b&=4095;b|=32768;return K.mknod(a,b,0)},mkdir:function(a,b){b=b!==void 0?b:511;b&=511|512;b|=16384;return K.mknod(a,b,0)},mkdirTree:function(a,b){a=a.split("/");var c="";for(var d=0;d<a.length;++d){if(!a[d])continue;c+="/"+a[d];try{K.mkdir(c,b)}catch(a){if(a.errno!=20)throw a}}},mkdev:function(a,b,c){typeof c==="undefined"&&(c=b,b=438);b|=8192;return K.mknod(a,b,c)},symlink:function(a,b){if(!H.resolve(a))throw new K.ErrnoError(44);var c=K.lookupPath(b,{parent:!0});c=c.node;if(!c)throw new K.ErrnoError(44);b=G.basename(b);var d=K.mayCreate(c,b);if(d)throw new K.ErrnoError(d);if(!c.node_ops.symlink)throw new K.ErrnoError(63);return c.node_ops.symlink(c,b,a)},rename:function(a,b){var c=G.dirname(a),d=G.dirname(b),e=G.basename(a),f=G.basename(b),g,h;g=K.lookupPath(a,{parent:!0});h=g.node;g=K.lookupPath(b,{parent:!0});g=g.node;if(!h||!g)throw new K.ErrnoError(44);if(h.mount!==g.mount)throw new K.ErrnoError(75);var i=K.lookupNode(h,e);a=H.relative(a,d);if(a.charAt(0)!==".")throw new K.ErrnoError(28);a=H.relative(b,c);if(a.charAt(0)!==".")throw new K.ErrnoError(55);var j;try{j=K.lookupNode(g,f)}catch(a){}if(i===j)return;d=K.isDir(i.mode);b=K.mayDelete(h,e,d);if(b)throw new K.ErrnoError(b);b=j?K.mayDelete(g,f,d):K.mayCreate(g,f);if(b)throw new K.ErrnoError(b);if(!h.node_ops.rename)throw new K.ErrnoError(63);if(K.isMountpoint(i)||j&&K.isMountpoint(j))throw new K.ErrnoError(10);if(g!==h){b=K.nodePermissions(h,"w");if(b)throw new K.ErrnoError(b)}K.hashRemoveNode(i);try{h.node_ops.rename(i,g,f)}catch(a){throw a}finally{K.hashAddNode(i)}},rmdir:function(a){var b=K.lookupPath(a,{parent:!0});b=b.node;a=G.basename(a);var c=K.lookupNode(b,a),d=K.mayDelete(b,a,!0);if(d)throw new K.ErrnoError(d);if(!b.node_ops.rmdir)throw new K.ErrnoError(63);if(K.isMountpoint(c))throw new K.ErrnoError(10);b.node_ops.rmdir(b,a);K.destroyNode(c)},readdir:function(a){a=K.lookupPath(a,{follow:!0});a=a.node;if(!a.node_ops.readdir)throw new K.ErrnoError(54);return a.node_ops.readdir(a)},unlink:function(a){var b=K.lookupPath(a,{parent:!0});b=b.node;if(!b)throw new K.ErrnoError(44);a=G.basename(a);var c=K.lookupNode(b,a),d=K.mayDelete(b,a,!1);if(d)throw new K.ErrnoError(d);if(!b.node_ops.unlink)throw new K.ErrnoError(63);if(K.isMountpoint(c))throw new K.ErrnoError(10);b.node_ops.unlink(b,a);K.destroyNode(c)},readlink:function(a){a=K.lookupPath(a);a=a.node;if(!a)throw new K.ErrnoError(44);if(!a.node_ops.readlink)throw new K.ErrnoError(28);return H.resolve(K.getPath(a.parent),a.node_ops.readlink(a))},stat:function(a,b){a=K.lookupPath(a,{follow:!b});b=a.node;if(!b)throw new K.ErrnoError(44);if(!b.node_ops.getattr)throw new K.ErrnoError(63);return b.node_ops.getattr(b)},lstat:function(a){return K.stat(a,!0)},chmod:function(a,b,c){if(typeof a==="string"){c=K.lookupPath(a,{follow:!c});c=c.node}else c=a;if(!c.node_ops.setattr)throw new K.ErrnoError(63);c.node_ops.setattr(c,{mode:b&4095|c.mode&-4096,timestamp:Date.now()})},lchmod:function(a,b){K.chmod(a,b,!0)},fchmod:function(a,b){a=K.getStream(a);if(!a)throw new K.ErrnoError(8);K.chmod(a.node,b)},chown:function(a,b,c,d){if(typeof a==="string"){b=K.lookupPath(a,{follow:!d});c=b.node}else c=a;if(!c.node_ops.setattr)throw new K.ErrnoError(63);c.node_ops.setattr(c,{timestamp:Date.now()})},lchown:function(a,b,c){K.chown(a,b,c,!0)},fchown:function(a,b,c){a=K.getStream(a);if(!a)throw new K.ErrnoError(8);K.chown(a.node,b,c)},truncate:function(a,b){if(b<0)throw new K.ErrnoError(28);if(typeof a==="string"){var c=K.lookupPath(a,{follow:!0});c=c.node}else c=a;if(!c.node_ops.setattr)throw new K.ErrnoError(63);if(K.isDir(c.mode))throw new K.ErrnoError(31);if(!K.isFile(c.mode))throw new K.ErrnoError(28);a=K.nodePermissions(c,"w");if(a)throw new K.ErrnoError(a);c.node_ops.setattr(c,{size:b,timestamp:Date.now()})},ftruncate:function(a,b){a=K.getStream(a);if(!a)throw new K.ErrnoError(8);if((a.flags&2097155)===0)throw new K.ErrnoError(28);K.truncate(a.node,b)},utime:function(a,b,c){a=K.lookupPath(a,{follow:!0});a=a.node;a.node_ops.setattr(a,{timestamp:Math.max(b,c)})},open:function(a,b,d,e,f){if(a==="")throw new K.ErrnoError(44);b=typeof b==="string"?K.modeStringToFlags(b):b;d=typeof d==="undefined"?438:d;b&64?d=d&4095|32768:d=0;var g;if(typeof a==="object")g=a;else{a=G.normalize(a);try{var h=K.lookupPath(a,{follow:!(b&131072)});g=h.node}catch(a){}}h=!1;if(b&64)if(g){if(b&128)throw new K.ErrnoError(20)}else g=K.mknod(a,d,0),h=!0;if(!g)throw new K.ErrnoError(44);K.isChrdev(g.mode)&&(b&=-513);if(b&65536&&!K.isDir(g.mode))throw new K.ErrnoError(54);if(!h){d=K.mayOpen(g,b);if(d)throw new K.ErrnoError(d)}b&512&&K.truncate(g,0);b&=~(128|512|131072);h=K.createStream({node:g,path:K.getPath(g),flags:b,seekable:!0,position:0,stream_ops:g.stream_ops,ungotten:[],error:!1},e,f);h.stream_ops.open&&h.stream_ops.open(h);c.logReadFiles&&!(b&1)&&(K.readFiles||(K.readFiles={}),a in K.readFiles||(K.readFiles[a]=1));return h},close:function(a){if(K.isClosed(a))throw new K.ErrnoError(8);a.getdents&&(a.getdents=null);try{a.stream_ops.close&&a.stream_ops.close(a)}catch(a){throw a}finally{K.closeStream(a.fd)}a.fd=null},isClosed:function(a){return a.fd===null},llseek:function(a,b,c){if(K.isClosed(a))throw new K.ErrnoError(8);if(!a.seekable||!a.stream_ops.llseek)throw new K.ErrnoError(70);if(c!=0&&c!=1&&c!=2)throw new K.ErrnoError(28);a.position=a.stream_ops.llseek(a,b,c);a.ungotten=[];return a.position},read:function(b,a,c,d,e){if(d<0||e<0)throw new K.ErrnoError(28);if(K.isClosed(b))throw new K.ErrnoError(8);if((b.flags&2097155)===1)throw new K.ErrnoError(8);if(K.isDir(b.node.mode))throw new K.ErrnoError(31);if(!b.stream_ops.read)throw new K.ErrnoError(28);var f=typeof e!=="undefined";if(!f)e=b.position;else if(!b.seekable)throw new K.ErrnoError(70);a=b.stream_ops.read(b,a,c,d,e);f||(b.position+=a);return a},write:function(b,a,c,d,e,f){if(d<0||e<0)throw new K.ErrnoError(28);if(K.isClosed(b))throw new K.ErrnoError(8);if((b.flags&2097155)===0)throw new K.ErrnoError(8);if(K.isDir(b.node.mode))throw new K.ErrnoError(31);if(!b.stream_ops.write)throw new K.ErrnoError(28);b.seekable&&b.flags&1024&&K.llseek(b,0,2);var g=typeof e!=="undefined";if(!g)e=b.position;else if(!b.seekable)throw new K.ErrnoError(70);a=b.stream_ops.write(b,a,c,d,e,f);g||(b.position+=a);return a},allocate:function(a,b,c){if(K.isClosed(a))throw new K.ErrnoError(8);if(b<0||c<=0)throw new K.ErrnoError(28);if((a.flags&2097155)===0)throw new K.ErrnoError(8);if(!K.isFile(a.node.mode)&&!K.isDir(a.node.mode))throw new K.ErrnoError(43);if(!a.stream_ops.allocate)throw new K.ErrnoError(138);a.stream_ops.allocate(a,b,c)},mmap:function(a,b,c,d,e,f){if((e&2)!==0&&(f&2)===0&&(a.flags&2097155)!==2)throw new K.ErrnoError(2);if((a.flags&2097155)===1)throw new K.ErrnoError(2);if(!a.stream_ops.mmap)throw new K.ErrnoError(43);return a.stream_ops.mmap(a,b,c,d,e,f)},msync:function(b,a,c,d,e){return!b||!b.stream_ops.msync?0:b.stream_ops.msync(b,a,c,d,e)},munmap:function(a){return 0},ioctl:function(a,b,c){if(!a.stream_ops.ioctl)throw new K.ErrnoError(59);return a.stream_ops.ioctl(a,b,c)},readFile:function(a,b){b===void 0&&(b={});b.flags=b.flags||0;b.encoding=b.encoding||"binary";if(b.encoding!=="utf8"&&b.encoding!=="binary")throw new Error('Invalid encoding type "'+b.encoding+'"');var c,d=K.open(a,b.flags);a=K.stat(a);a=a.size;var e=new Uint8Array(a);K.read(d,e,0,a,0);b.encoding==="utf8"?c=t(e,0):b.encoding==="binary"&&(c=e);K.close(d);return c},writeFile:function(a,b,c){c===void 0&&(c={});c.flags=c.flags||577;a=K.open(a,c.flags,c.mode);if(typeof b==="string"){var d=new Uint8Array(oa(b)+1),e=ma(b,d,0,d.length);K.write(a,d,0,e,void 0,c.canOwn)}else if(ArrayBuffer.isView(b))K.write(a,b,0,b.byteLength,void 0,c.canOwn);else throw new Error("Unsupported data type");K.close(a)},cwd:function(){return K.currentPath},chdir:function(a){a=K.lookupPath(a,{follow:!0});if(a.node===null)throw new K.ErrnoError(44);if(!K.isDir(a.node.mode))throw new K.ErrnoError(54);var b=K.nodePermissions(a.node,"x");if(b)throw new K.ErrnoError(b);K.currentPath=a.path},createDefaultDirectories:function(){K.mkdir("/tmp"),K.mkdir("/home"),K.mkdir("/home/web_user")},createDefaultDevices:function(){K.mkdir("/dev");K.registerDevice(K.makedev(1,3),{read:function(){return 0},write:function(b,a,c,d,e){return d}});K.mkdev("/dev/null",K.makedev(1,3));I.register(K.makedev(5,0),I.default_tty_ops);I.register(K.makedev(6,0),I.default_tty1_ops);K.mkdev("/dev/tty",K.makedev(5,0));K.mkdev("/dev/tty1",K.makedev(6,0));var a=nb();K.createDevice("/dev","random",a);K.createDevice("/dev","urandom",a);K.mkdir("/dev/shm");K.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){K.mkdir("/proc");var a=K.mkdir("/proc/self");K.mkdir("/proc/self/fd");K.mount({mount:function(){var b=K.createNode(a,"fd",16384|511,73);b.node_ops={lookup:function(a,b){a=+b;var c=K.getStream(a);if(!c)throw new K.ErrnoError(8);b={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return c.path}}};b.parent=b;return b}};return b}},{},"/proc/self/fd")},createStandardStreams:function(){c.stdin?K.createDevice("/dev","stdin",c.stdin):K.symlink("/dev/tty","/dev/stdin"),c.stdout?K.createDevice("/dev","stdout",null,c.stdout):K.symlink("/dev/tty","/dev/stdout"),c.stderr?K.createDevice("/dev","stderr",null,c.stderr):K.symlink("/dev/tty1","/dev/stderr"),K.open("/dev/stdin",0),K.open("/dev/stdout",1),K.open("/dev/stderr",1)},ensureErrnoError:function(){if(K.ErrnoError)return;K.ErrnoError=function(a,b){this.node=b,this.setErrno=function(a){this.errno=a},this.setErrno(a),this.message="FS error"};K.ErrnoError.prototype=new Error();K.ErrnoError.prototype.constructor=K.ErrnoError;[44].forEach(function(a){K.genericErrors[a]=new K.ErrnoError(a),K.genericErrors[a].stack="<generic error, no stack>"})},staticInit:function(){K.ensureErrnoError(),K.nameTable=new Array(4096),K.mount(J,{},"/"),K.createDefaultDirectories(),K.createDefaultDevices(),K.createSpecialDirectories(),K.filesystems={MEMFS:J}},init:function(a,b,d){K.init.initialized=!0,K.ensureErrnoError(),c.stdin=a||c.stdin,c.stdout=b||c.stdout,c.stderr=d||c.stderr,K.createStandardStreams()},quit:function(){K.init.initialized=!1;for(var a=0;a<K.streams.length;a++){var b=K.streams[a];if(!b)continue;K.close(b)}},getMode:function(a,b){var c=0;a&&(c|=292|73);b&&(c|=146);return c},findObject:function(a,b){a=K.analyzePath(a,b);if(a.exists)return a.object;else return null},analyzePath:function(a,b){try{var c=K.lookupPath(a,{follow:!b});a=c.path}catch(a){}var d={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var c=K.lookupPath(a,{parent:!0});d.parentExists=!0;d.parentPath=c.path;d.parentObject=c.node;d.name=G.basename(a);c=K.lookupPath(a,{follow:!b});d.exists=!0;d.path=c.path;d.object=c.node;d.name=c.node.name;d.isRoot=c.path==="/"}catch(a){d.error=a.errno}return d},createPath:function(a,b,c,d){a=typeof a==="string"?a:K.getPath(a);c=b.split("/").reverse();while(c.length){d=c.pop();if(!d)continue;var e=G.join2(a,d);try{K.mkdir(e)}catch(a){}a=e}return e},createFile:function(a,b,c,d,e){c=G.join2(typeof a==="string"?a:K.getPath(a),b);a=K.getMode(d,e);return K.create(c,a)},createDataFile:function(a,b,c,d,e,f){var g=b;a&&(a=typeof a==="string"?a:K.getPath(a),g=b?G.join2(a,b):a);b=K.getMode(d,e);a=K.create(g,b);if(c){if(typeof c==="string"){d=new Array(c.length);for(e=0,g=c.length;e<g;++e)d[e]=c.charCodeAt(e);c=d}K.chmod(a,b|146);e=K.open(a,577);K.write(e,c,0,c.length,0,f);K.close(e);K.chmod(a,b)}return a},createDevice:function(a,b,c,d){a=G.join2(typeof a==="string"?a:K.getPath(a),b);b=K.getMode(!!c,!!d);K.createDevice.major||(K.createDevice.major=64);var e=K.makedev(K.createDevice.major++,0);K.registerDevice(e,{open:function(a){a.seekable=!1},close:function(a){d&&d.buffer&&d.buffer.length&&d(10)},read:function(b,a,d,e,f){f=0;for(var g=0;g<e;g++){var h;try{h=c()}catch(a){throw new K.ErrnoError(29)}if(h===void 0&&f===0)throw new K.ErrnoError(6);if(h===null||h===void 0)break;f++;a[d+g]=h}f&&(b.node.timestamp=Date.now());return f},write:function(b,a,c,e,f){for(f=0;f<e;f++)try{d(a[c+f])}catch(a){throw new K.ErrnoError(29)}e&&(b.node.timestamp=Date.now());return f}});return K.mkdev(a,b,e)},forceLoadFile:function(a){if(a.isDevice||a.isFolder||a.link||a.contents)return!0;if(typeof XMLHttpRequest!=="undefined")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");else if(ba)try{a.contents=ud(ba(a.url),!0),a.usedBytes=a.contents.length}catch(a){throw new K.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:function(a,b,c,d,e){function f(){this.lengthKnown=!1,this.chunks=[]}f.prototype.get=function(a){if(a>this.length-1||a<0)return void 0;var b=a%this.chunkSize;a=a/this.chunkSize|0;return this.getter(a)[b]};f.prototype.setDataGetter=function(a){this.getter=a};f.prototype.cacheLength=function(){var a=new XMLHttpRequest();a.open("HEAD",c,!1);a.send(null);if(!(a.status>=200&&a.status<300||a.status===304))throw new Error("Couldn't load "+c+". Status: "+a.status);var b=Number(a.getResponseHeader("Content-length")),d,e=(d=a.getResponseHeader("Accept-Ranges"))&&d==="bytes";a=(d=a.getResponseHeader("Content-Encoding"))&&d==="gzip";var f=1024*1024;e||(f=b);var g=function(d,e){if(d>e)throw new Error("invalid range ("+d+", "+e+") or no bytes requested!");if(e>b-1)throw new Error("only "+b+" bytes available! programmer error!");var a=new XMLHttpRequest();a.open("GET",c,!1);b!==f&&a.setRequestHeader("Range","bytes="+d+"-"+e);typeof Uint8Array!="undefined"&&(a.responseType="arraybuffer");a.overrideMimeType&&a.overrideMimeType("text/plain; charset=x-user-defined");a.send(null);if(!(a.status>=200&&a.status<300||a.status===304))throw new Error("Couldn't load "+c+". Status: "+a.status);if(a.response!==void 0)return new Uint8Array(a.response||[]);else return ud(a.responseText||"",!0)},h=this;h.setDataGetter(function(a){var c=a*f,d=(a+1)*f-1;d=Math.min(d,b-1);typeof h.chunks[a]==="undefined"&&(h.chunks[a]=g(c,d));if(typeof h.chunks[a]==="undefined")throw new Error("doXHR failed!");return h.chunks[a]});(a||!b)&&(f=b=1,b=this.getter(0).length,f=b,ea("LazyFiles on gzip forces download of the whole file when length is accessed"));this._length=b;this._chunkSize=f;this.lengthKnown=!0};if(typeof XMLHttpRequest!=="undefined"){if(!o)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";f=new f();Object.defineProperties(f,{length:{get:function(){this.lengthKnown||this.cacheLength();return this._length}},chunkSize:{get:function(){this.lengthKnown||this.cacheLength();return this._chunkSize}}});f={isDevice:!1,contents:f}}else var f={isDevice:!1,url:c};var g=K.createFile(a,b,f,d,e);f.contents?g.contents=f.contents:f.url&&(g.contents=null,g.url=f.url);Object.defineProperties(g,{usedBytes:{get:function(){return this.contents.length}}});var h={};a=Object.keys(g.stream_ops);a.forEach(function(a){var b=g.stream_ops[a];h[a]=function(){K.forceLoadFile(g);return b.apply(null,arguments)}});h.read=function(b,a,c,d,e){K.forceLoadFile(g);b=b.node.contents;if(e>=b.length)return 0;d=Math.min(b.length-e,d);if(b.slice)for(var f=0;f<d;f++)a[c+f]=b[e+f];else for(var f=0;f<d;f++)a[c+f]=b.get(e+f);return d};g.stream_ops=h;return g},createPreloadedFile:function(a,b,c,d,e,f,g,h,i,j){var k=b?H.resolve(G.join2(a,b)):a,l=Pa("cp "+k);function m(c){function m(c){j&&j(),h||K.createDataFile(a,b,c,d,e,i),f&&f(),Ra(l)}if(Browser.handledByPreloadPlugin(c,k,m,function(){g&&g(),Ra(l)}))return;m(c)}Qa(l);typeof c=="string"?pb(c,function(a){return m(a)},g):m(c)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(a,b,c){b=b||function(){};c=c||function(){};var d=K.indexedDB();try{var e=d.open(K.DB_NAME(),K.DB_VERSION)}catch(a){return c(a)}e.onupgradeneeded=function(){ea("creating db");var a=e.result;a.createObjectStore(K.DB_STORE_NAME)};e.onsuccess=function(){var d=e.result;d=d.transaction([K.DB_STORE_NAME],"readwrite");var f=d.objectStore(K.DB_STORE_NAME),g=0,h=0,i=a.length;function j(){h==0?b():c()}a.forEach(function(a){a=f.put(K.analyzePath(a).object.contents,a);a.onsuccess=function(){g++,g+h==i&&j()};a.onerror=function(){h++,g+h==i&&j()}});d.onerror=c};e.onerror=c},loadFilesFromDB:function(a,b,c){b=b||function(){};c=c||function(){};var d=K.indexedDB();try{var e=d.open(K.DB_NAME(),K.DB_VERSION)}catch(a){return c(a)}e.onupgradeneeded=c;e.onsuccess=function(){var d=e.result;try{var f=d.transaction([K.DB_STORE_NAME],"readonly")}catch(a){c(a);return}var g=f.objectStore(K.DB_STORE_NAME),h=0,i=0,j=a.length;function k(){i==0?b():c()}a.forEach(function(a){var b=g.get(a);b.onsuccess=function(){K.analyzePath(a).exists&&K.unlink(a),K.createDataFile(G.dirname(a),G.basename(a),b.result,!0,!0,!0),h++,h+i==j&&k()};b.onerror=function(){i++,h+i==j&&k()}});f.onerror=c};e.onerror=c}},L={mappings:{},DEFAULT_POLLMASK:5,calculateAt:function(a,b,c){if(b[0]==="/")return b;var d;if(a===-100)d=K.cwd();else{a=K.getStream(a);if(!a)throw new K.ErrnoError(8);d=a.path}if(b.length==0){if(!c)throw new K.ErrnoError(44);return d}return G.join2(d,b)},doStat:function(a,b,c){try{var d=a(b)}catch(a){if(a&&a.node&&G.normalize(b)!==G.normalize(K.getPath(a.node)))return-54;throw a}x[c>>2]=d.dev;x[c+4>>2]=0;x[c+8>>2]=d.ino;x[c+12>>2]=d.mode;x[c+16>>2]=d.nlink;x[c+20>>2]=d.uid;x[c+24>>2]=d.gid;x[c+28>>2]=d.rdev;x[c+32>>2]=0;D=[d.size>>>0,(C=d.size,+Math.abs(C)>=1?C>0?(Math.min(+Math.floor(C/4294967296),4294967295)|0)>>>0:~~+Math.ceil((C-+(~~C>>>0))/4294967296)>>>0:0)],x[c+40>>2]=D[0],x[c+44>>2]=D[1];x[c+48>>2]=4096;x[c+52>>2]=d.blocks;x[c+56>>2]=d.atime.getTime()/1e3|0;x[c+60>>2]=0;x[c+64>>2]=d.mtime.getTime()/1e3|0;x[c+68>>2]=0;x[c+72>>2]=d.ctime.getTime()/1e3|0;x[c+76>>2]=0;D=[d.ino>>>0,(C=d.ino,+Math.abs(C)>=1?C>0?(Math.min(+Math.floor(C/4294967296),4294967295)|0)>>>0:~~+Math.ceil((C-+(~~C>>>0))/4294967296)>>>0:0)],x[c+80>>2]=D[0],x[c+84>>2]=D[1];return 0},doMsync:function(a,b,c,d,e){a=v.slice(a,a+c);K.msync(b,a,e,c,d)},doMkdir:function(a,b){a=G.normalize(a);a[a.length-1]==="/"&&(a=a.substr(0,a.length-1));K.mkdir(a,b,0);return 0},doMknod:function(a,b,c){switch(b&61440){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}K.mknod(a,b,c);return 0},doReadlink:function(a,b,c){if(c<=0)return-28;a=K.readlink(a);var d=Math.min(c,oa(a)),e=u[b+d];na(a,b,c+1);u[b+d]=e;return d},doAccess:function(a,b){if(b&-8)return-28;a=K.lookupPath(a,{follow:!0});a=a.node;if(!a)return-44;var c="";b&4&&(c+="r");b&2&&(c+="w");b&1&&(c+="x");return c&&K.nodePermissions(a,c)?-2:0},doDup:function(a,b,c){var d=K.getStream(c);d&&K.close(d);return K.open(a,b,0,c,c).fd},doReadv:function(a,b,c,d){var e=0;for(var f=0;f<c;f++){var g=x[b+f*8>>2],h=x[b+(f*8+4)>>2];g=K.read(a,u,g,h,d);if(g<0)return-1;e+=g;if(g<h)break}return e},doWritev:function(a,b,c,d){var e=0;for(var f=0;f<c;f++){var g=x[b+f*8>>2],h=x[b+(f*8+4)>>2];g=K.write(a,u,g,h,d);if(g<0)return-1;e+=g}return e},varargs:void 0,get:function(){L.varargs+=4;var a=x[L.varargs-4>>2];return a},getStr:function(a){a=la(a);return a},getStreamFromFD:function(a){a=K.getStream(a);if(!a)throw new K.ErrnoError(8);return a},get64:function(a,b){return a}};function qb(a,b){try{if(b===0)return-28;var c=K.cwd(),d=oa(c);if(b<d+1)return-68;na(c,a,b);return a}catch(a){if(typeof K==="undefined"||!(a instanceof K.ErrnoError))throw a;return-a.errno}}function rb(a,b,c){L.varargs=c;try{a=L.getStr(a);c=c?L.get():0;a=K.open(a,b,c);return a.fd}catch(a){if(typeof K==="undefined"||!(a instanceof K.ErrnoError))throw a;return-a.errno}}function sb(a,b,c,d,e){}function tb(a){switch(a){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+a)}}function ub(){var a=new Array(256);for(var b=0;b<256;++b)a[b]=String.fromCharCode(b);vb=a}var vb=void 0;function M(a){var b="";a=a;while(v[a])b+=vb[v[a++]];return b}var N={},O={},wb={},xb=48,yb=57;function zb(a){if(void 0===a)return"_unknown";a=a.replace(/[^a-zA-Z0-9_]/g,"$");var b=a.charCodeAt(0);if(b>=xb&&b<=yb)return"_"+a;else return a}function Ab(a,b){zb(a);return function(){return b.apply(this,arguments)}}function Bb(a,b){var c=Ab(b,function(a){this.name=b;this.message=a;a=new Error(a).stack;a!==void 0&&(this.stack=this.toString()+"\n"+a.replace(/^Error(:[^\n]*)?\n/,""))});c.prototype=Object.create(a.prototype);c.prototype.constructor=c;c.prototype.toString=function(){if(this.message===void 0)return this.name;else return this.name+": "+this.message};return c}var P=void 0;function Q(a){throw new P(a)}var Cb=void 0;function Db(a){throw new Cb(a)}function R(a,b,c){a.forEach(function(a){wb[a]=b});function d(b){b=c(b);b.length!==a.length&&Db("Mismatched type converter count");for(var d=0;d<a.length;++d)S(a[d],b[d])}var e=new Array(b.length),f=[],g=0;b.forEach(function(a,b){Object.prototype.hasOwnProperty.call(O,a)?e[b]=O[a]:(f.push(a),Object.prototype.hasOwnProperty.call(N,a)||(N[a]=[]),N[a].push(function(){e[b]=O[a],++g,g===f.length&&d(e)}))});0===f.length&&d(e)}function S(a,b,c){c===void 0&&(c={});if(!("argPackAdvance"in b))throw new TypeError("registerType registeredInstance requires argPackAdvance");var d=b.name;a||Q('type "'+d+'" must have a positive integer typeid pointer');if(Object.prototype.hasOwnProperty.call(O,a))if(c.ignoreDuplicateRegistrations)return;else Q("Cannot register type '"+d+"' twice");O[a]=b;delete wb[a];if(Object.prototype.hasOwnProperty.call(N,a)){c=N[a];delete N[a];c.forEach(function(a){a()})}}function Eb(a,b,c,d,e){var f=tb(c);b=M(b);S(a,{name:b,fromWireType:function(a){return!!a},toWireType:function(a,b){return b?d:e},argPackAdvance:8,readValueFromPointer:function(a){var d;if(c===1)d=u;else if(c===2)d=w;else if(c===4)d=x;else throw new TypeError("Unknown boolean type size: "+b);return this.fromWireType(d[a>>f])},destructorFunction:null})}function Fb(a){if(!(this instanceof T))return!1;if(!(a instanceof T))return!1;var b=this.$$.ptrType.registeredClass,c=this.$$.ptr,d=a.$$.ptrType.registeredClass;a=a.$$.ptr;while(b.baseClass)c=b.upcast(c),b=b.baseClass;while(d.baseClass)a=d.upcast(a),d=d.baseClass;return b===d&&c===a}function Gb(a){return{count:a.count,deleteScheduled:a.deleteScheduled,preservePointerOnDelete:a.preservePointerOnDelete,ptr:a.ptr,ptrType:a.ptrType,smartPtr:a.smartPtr,smartPtrType:a.smartPtrType}}function Hb(a){function b(a){return a.$$.ptrType.registeredClass.name}Q(b(a)+" instance already deleted")}var Ib=!1;function Jb(a){}function Kb(a){a.smartPtr?a.smartPtrType.rawDestructor(a.smartPtr):a.ptrType.registeredClass.rawDestructor(a.ptr)}function Lb(a){a.count.value-=1;var b=0===a.count.value;b&&Kb(a)}function Mb(a){if("undefined"===typeof FinalizationGroup){Mb=function(a){return a};return a}Ib=new FinalizationGroup(function(a){for(var b=a.next();!b.done;b=a.next()){var c=b.value;c.ptr&&Lb(c)}});Mb=function(a){Ib.register(a,a.$$,a.$$);return a};Jb=function(a){Ib.unregister(a.$$)};return Mb(a)}function Nb(){this.$$.ptr||Hb(this);if(this.$$.preservePointerOnDelete){this.$$.count.value+=1;return this}else{var a=Mb(Object.create(Object.getPrototypeOf(this),{$$:{value:Gb(this.$$)}}));a.$$.count.value+=1;a.$$.deleteScheduled=!1;return a}}function Ob(){this.$$.ptr||Hb(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Q("Object already scheduled for deletion"),Jb(this),Lb(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Pb(){return!this.$$.ptr}var Qb=void 0,Rb=[];function Sb(){while(Rb.length){var a=Rb.pop();a.$$.deleteScheduled=!1;a["delete"]()}}function Tb(){this.$$.ptr||Hb(this);this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Q("Object already scheduled for deletion");Rb.push(this);Rb.length===1&&Qb&&Qb(Sb);this.$$.deleteScheduled=!0;return this}function Ub(){T.prototype.isAliasOf=Fb,T.prototype.clone=Nb,T.prototype["delete"]=Ob,T.prototype.isDeleted=Pb,T.prototype.deleteLater=Tb}function T(){}var Vb={};function Wb(a,b,c){if(void 0===a[b].overloadTable){var d=a[b];a[b]=function(){Object.prototype.hasOwnProperty.call(a[b].overloadTable,arguments.length)||Q("Function '"+c+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+a[b].overloadTable+")!");return a[b].overloadTable[arguments.length].apply(this,arguments)};a[b].overloadTable=[];a[b].overloadTable[d.argCount]=d}}function Xb(a,b,d){Object.prototype.hasOwnProperty.call(c,a)?((void 0===d||void 0!==c[a].overloadTable&&void 0!==c[a].overloadTable[d])&&Q("Cannot register public name '"+a+"' twice"),Wb(c,a,a),Object.prototype.hasOwnProperty.call(c,d)&&Q("Cannot register multiple overloads of a function with the same number of arguments ("+d+")!"),c[a].overloadTable[d]=b):(c[a]=b,void 0!==d&&(c[a].numArguments=d))}function Yb(a,b,c,d,e,f,g,h){this.name=a,this.constructor=b,this.instancePrototype=c,this.rawDestructor=d,this.baseClass=e,this.getActualType=f,this.upcast=g,this.downcast=h,this.pureVirtualFunctions=[]}function Zb(a,b,c){while(b!==c)b.upcast||Q("Expected null or instance of "+c.name+", got an instance of "+b.name),a=b.upcast(a),b=b.baseClass;return a}function $b(a,b){if(b===null){this.isReference&&Q("null is not a valid "+this.name);return 0}b.$$||Q('Cannot pass "'+Lc(b)+'" as a '+this.name);b.$$.ptr||Q("Cannot pass deleted object as a pointer of type "+this.name);a=b.$$.ptrType.registeredClass;b=Zb(b.$$.ptr,a,this.registeredClass);return b}function ac(a,b){var c;if(b===null){this.isReference&&Q("null is not a valid "+this.name);if(this.isSmartPointer){c=this.rawConstructor();a!==null&&a.push(this.rawDestructor,c);return c}else return 0}b.$$||Q('Cannot pass "'+Lc(b)+'" as a '+this.name);b.$$.ptr||Q("Cannot pass deleted object as a pointer of type "+this.name);!this.isConst&&b.$$.ptrType.isConst&&Q("Cannot convert argument of type "+(b.$$.smartPtrType?b.$$.smartPtrType.name:b.$$.ptrType.name)+" to parameter type "+this.name);var d=b.$$.ptrType.registeredClass;c=Zb(b.$$.ptr,d,this.registeredClass);if(this.isSmartPointer){void 0===b.$$.smartPtr&&Q("Passing raw pointer to smart pointer is illegal");switch(this.sharingPolicy){case 0:b.$$.smartPtrType===this?c=b.$$.smartPtr:Q("Cannot convert argument of type "+(b.$$.smartPtrType?b.$$.smartPtrType.name:b.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:c=b.$$.smartPtr;break;case 2:if(b.$$.smartPtrType===this)c=b.$$.smartPtr;else{var e=b.clone();c=this.rawShare(c,Jc.toHandle(function(){e["delete"]()}));a!==null&&a.push(this.rawDestructor,c)}break;default:Q("Unsupporting sharing policy")}}return c}function bc(a,b){if(b===null){this.isReference&&Q("null is not a valid "+this.name);return 0}b.$$||Q('Cannot pass "'+Lc(b)+'" as a '+this.name);b.$$.ptr||Q("Cannot pass deleted object as a pointer of type "+this.name);b.$$.ptrType.isConst&&Q("Cannot convert argument of type "+b.$$.ptrType.name+" to parameter type "+this.name);a=b.$$.ptrType.registeredClass;b=Zb(b.$$.ptr,a,this.registeredClass);return b}function cc(a){return this.fromWireType(y[a>>2])}function dc(a){this.rawGetPointee&&(a=this.rawGetPointee(a));return a}function ec(a){this.rawDestructor&&this.rawDestructor(a)}function fc(a){a!==null&&a["delete"]()}function gc(a,b,c){if(b===c)return a;if(void 0===c.baseClass)return null;a=gc(a,b,c.baseClass);return a===null?null:c.downcast(a)}function hc(){return Object.keys(lc).length}function ic(){var a=[];for(var b in lc)Object.prototype.hasOwnProperty.call(lc,b)&&a.push(lc[b]);return a}function jc(a){Qb=a,Rb.length&&Qb&&Qb(Sb)}function kc(){c.getInheritedInstanceCount=hc,c.getLiveInheritedInstances=ic,c.flushPendingDeletes=Sb,c.setDelayFunction=jc}var lc={};function mc(a,b){b===void 0&&Q("ptr should not be undefined");while(a.baseClass)b=a.upcast(b),a=a.baseClass;return b}function nc(a,b){b=mc(a,b);return lc[b]}function oc(a,b){(!b.ptrType||!b.ptr)&&Db("makeClassHandle requires ptr and ptrType");var c=!!b.smartPtrType,d=!!b.smartPtr;c!==d&&Db("Both smartPtrType and smartPtr must be specified");b.count={value:1};return Mb(Object.create(a,{$$:{value:b}}))}function pc(a){var b=this.getPointee(a);if(!b){this.destructor(a);return null}var c=nc(this.registeredClass,b);if(void 0!==c)if(0===c.$$.count.value){c.$$.ptr=b;c.$$.smartPtr=a;return c.clone()}else{c=c.clone();this.destructor(a);return c}function d(){if(this.isSmartPointer)return oc(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:b,smartPtrType:this,smartPtr:a});else return oc(this.registeredClass.instancePrototype,{ptrType:this,ptr:a})}c=this.registeredClass.getActualType(b);c=Vb[c];if(!c)return d.call(this);var e;this.isConst?e=c.constPointerType:e=c.pointerType;c=gc(b,this.registeredClass,e.registeredClass);if(c===null)return d.call(this);if(this.isSmartPointer)return oc(e.registeredClass.instancePrototype,{ptrType:e,ptr:c,smartPtrType:this,smartPtr:a});else return oc(e.registeredClass.instancePrototype,{ptrType:e,ptr:c})}function qc(){U.prototype.getPointee=dc,U.prototype.destructor=ec,U.prototype.argPackAdvance=8,U.prototype.readValueFromPointer=cc,U.prototype.deleteObject=fc,U.prototype.fromWireType=pc}function U(a,b,c,d,e,f,g,h,i,j,k){this.name=a,this.registeredClass=b,this.isReference=c,this.isConst=d,this.isSmartPointer=e,this.pointeeType=f,this.sharingPolicy=g,this.rawGetPointee=h,this.rawConstructor=i,this.rawShare=j,this.rawDestructor=k,!e&&b.baseClass===void 0?d?(this.toWireType=$b,this.destructorFunction=null):(this.toWireType=bc,this.destructorFunction=null):this.toWireType=ac}function rc(a,b,d){Object.prototype.hasOwnProperty.call(c,a)||Db("Replacing nonexistant public symbol"),void 0!==c[a].overloadTable&&void 0!==d?c[a].overloadTable[d]=b:(c[a]=b,c[a].argCount=d)}function sc(a,b,d){a=c["dynCall_"+a];return d&&d.length?a.apply(null,[b].concat(d)):a.call(null,b)}function tc(a,b,c){return a.includes("j")?sc(a,b,c):E(b).apply(null,c)}function uc(a,b){var c=[];return function(){c.length=arguments.length;for(var d=0;d<arguments.length;d++)c[d]=arguments[d];return tc(a,b,c)}}function V(a,b){a=M(a);function c(){return a.includes("j")?uc(a,b):E(b)}c=c();typeof c!=="function"&&Q("unknown function pointer with signature "+a+": "+b);return c}var vc=void 0;function wc(a){a=xd(a);var b=M(a);X(a);return b}function xc(a,b){var c=[],d={};function e(a){if(d[a])return;if(O[a])return;if(wb[a]){wb[a].forEach(e);return}c.push(a);d[a]=!0}b.forEach(e);throw new vc(a+": "+c.map(wc).join([", "]))}function yc(a,b,c,d,e,f,g,h,i,j,k,l,m){k=M(k);f=V(e,f);h&&(h=V(g,h));j&&(j=V(i,j));m=V(l,m);var n=zb(k);Xb(n,function(){xc("Cannot construct "+k+" due to unbound types",[d])});R([a,b,c],d?[d]:[],function(b){b=b[0];var c;d?(c=b.registeredClass,b=c.instancePrototype):b=T.prototype;var e=Ab(n,function(){if(Object.getPrototypeOf(this)!==g)throw new P("Use 'new' to construct "+k);if(void 0===i.constructor_body)throw new P(k+" has no accessible constructor");var a=i.constructor_body[arguments.length];if(void 0===a)throw new P("Tried to invoke ctor of "+k+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(i.constructor_body).toString()+") parameters instead!");return a.apply(this,arguments)}),g=Object.create(b,{constructor:{value:e}});e.prototype=g;var i=new Yb(k,e,g,m,c,f,h,j);b=new U(k,i,!0,!1,!1);var l=new U(k+"*",i,!1,!1,!1),o=new U(k+" const*",i,!1,!0,!1);Vb[a]={pointerType:l,constPointerType:o};rc(n,e);return[b,l,o]})}function zc(a,b){var c=[];for(var d=0;d<a;d++)c.push(x[(b>>2)+d]);return c}function Ac(a){while(a.length){var b=a.pop(),c=a.pop();c(b)}}function Bc(a,b,c,d,e,f){ja(b>0);var g=zc(b,c);e=V(d,e);R([],[a],function(a){a=a[0];var c="constructor "+a.name;void 0===a.registeredClass.constructor_body&&(a.registeredClass.constructor_body=[]);if(void 0!==a.registeredClass.constructor_body[b-1])throw new P("Cannot register multiple constructors with identical number of parameters ("+(b-1)+") for class '"+a.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");a.registeredClass.constructor_body[b-1]=function(){xc("Cannot construct "+a.name+" due to unbound types",g)};R([],g,function(d){d.splice(1,0,null);a.registeredClass.constructor_body[b-1]=Cc(c,d,null,e,f);return[]});return[]})}function Cc(a,b,c,d,e){var f=b.length;f<2&&Q("argTypes array size mismatch! Must at least get return value and 'this' types!");var g=b[1]!==null&&c!==null,h=!1;for(c=1;c<b.length;++c)if(b[c]!==null&&b[c].destructorFunction===void 0){h=!0;break}var i=b[0].name!=="void",j=f-2,k=new Array(j),l=[],m=[];return function(){arguments.length!==j&&Q("function "+a+" called with "+arguments.length+" arguments, expected "+j+" args!");m.length=0;var c;l.length=g?2:1;l[0]=e;g&&(c=b[1].toWireType(m,this),l[1]=c);for(var f=0;f<j;++f)k[f]=b[f+2].toWireType(m,arguments[f]),l.push(k[f]);var n=d.apply(null,l);function o(d){if(h)Ac(m);else for(var a=g?1:2;a<b.length;a++){var e=a===1?c:k[a-2];b[a].destructorFunction!==null&&b[a].destructorFunction(e)}if(i)return b[0].fromWireType(d)}return o(n)}}function Dc(a,b,c,d,e,f,g,h){var i=zc(c,d);b=M(b);f=V(e,f);R([],[a],function(a){a=a[0];var d=a.name+"."+b;b.startsWith("@@")&&(b=Symbol[b.substring(2)]);h&&a.registeredClass.pureVirtualFunctions.push(b);function e(){xc("Cannot call "+d+" due to unbound types",i)}var j=a.registeredClass.instancePrototype,k=j[b];void 0===k||void 0===k.overloadTable&&k.className!==a.name&&k.argCount===c-2?(e.argCount=c-2,e.className=a.name,j[b]=e):(Wb(j,b,d),j[b].overloadTable[c-2]=e);R([],i,function(e){e=Cc(d,e,a,f,g);void 0===j[b].overloadTable?(e.argCount=c-2,j[b]=e):j[b].overloadTable[c-2]=e;return[]});return[]})}var Ec=[],W=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Fc(a){a>4&&0===--W[a].refcount&&(W[a]=void 0,Ec.push(a))}function Gc(){var a=0;for(var b=5;b<W.length;++b)W[b]!==void 0&&++a;return a}function Hc(){for(var a=5;a<W.length;++a)if(W[a]!==void 0)return W[a];return null}function Ic(){c.count_emval_handles=Gc,c.get_first_emval=Hc}var Jc={toValue:function(a){a||Q("Cannot use deleted val. handle = "+a);return W[a].value},toHandle:function(a){switch(a){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var b=Ec.length?Ec.pop():W.length;W[b]={refcount:1,value:a};return b}}};function Kc(a,b){b=M(b),S(a,{name:b,fromWireType:function(a){var b=Jc.toValue(a);Fc(a);return b},toWireType:function(a,b){return Jc.toHandle(b)},argPackAdvance:8,readValueFromPointer:cc,destructorFunction:null})}function Lc(a){if(a===null)return"null";var b=typeof a;if(b==="object"||b==="array"||b==="function")return a.toString();else return""+a}function Mc(a,b){switch(b){case 2:return function(a){return this.fromWireType(Aa[a>>2])};case 3:return function(a){return this.fromWireType(Ba[a>>3])};default:throw new TypeError("Unknown float type: "+a)}}function Nc(a,b,c){c=tb(c);b=M(b);S(a,{name:b,fromWireType:function(a){return a},toWireType:function(a,b){return b},argPackAdvance:8,readValueFromPointer:Mc(b,c),destructorFunction:null})}function Oc(a,b,c,d,e,f){var g=zc(b,c);a=M(a);e=V(d,e);Xb(a,function(){xc("Cannot call "+a+" due to unbound types",g)},b-1);R([],g,function(c){c=[c[0],null].concat(c.slice(1));rc(a,Cc(a,c,null,e,f),b-1);return[]})}function Pc(a,b,c){switch(b){case 0:return c?function(a){return u[a]}:function(a){return v[a]};case 1:return c?function(a){return w[a>>1]}:function(a){return za[a>>1]};case 2:return c?function(a){return x[a>>2]}:function(a){return y[a>>2]};default:throw new TypeError("Unknown integer type: "+a)}}function Qc(a,b,c,d,e){b=M(b);e===-1&&(e=4294967295);e=tb(c);var f=function(a){return a};if(d===0){var g=32-8*c;f=function(a){return a<<g>>>g}}c=b.includes("unsigned");var h=function(a,b){};c?c=function(a,b){h(b,this.name);return b>>>0}:c=function(a,b){h(b,this.name);return b};S(a,{name:b,fromWireType:f,toWireType:c,argPackAdvance:8,readValueFromPointer:Pc(b,e,d!==0),destructorFunction:null})}function Rc(a,b,c){var d=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],e=d[b];function f(a){a=a>>2;var b=y,c=b[a];b=b[a+1];return new e(ya,b,c)}c=M(c);S(a,{name:c,fromWireType:f,argPackAdvance:8,readValueFromPointer:f},{ignoreDuplicateRegistrations:!0})}function Sc(a,b){b=M(b);var c=b==="std::string";S(a,{name:b,fromWireType:function(a){var b=y[a>>2],d;if(c){var e=a+4;for(var f=0;f<=b;++f){var g=a+4+f;if(f==b||v[g]==0){var h=g-e;h=la(e,h);d===void 0?d=h:(d+=String.fromCharCode(0),d+=h);e=g+1}}}else{h=new Array(b);for(var f=0;f<b;++f)h[f]=String.fromCharCode(v[a+4+f]);d=h.join("")}X(a);return d},toWireType:function(a,b){b instanceof ArrayBuffer&&(b=new Uint8Array(b));var d,e=typeof b==="string";e||b instanceof Uint8Array||b instanceof Uint8ClampedArray||b instanceof Int8Array||Q("Cannot pass non-string to std::string");c&&e?d=function(){return oa(b)}:d=function(){return b.length};d=d();var f=wd(4+d+1);y[f>>2]=d;if(c&&e)na(b,f+4,d+1);else if(e)for(e=0;e<d;++e){var g=b.charCodeAt(e);g>255&&(X(f),Q("String has UTF-16 code units that do not fit in 8 bits"));v[f+4+e]=g}else for(e=0;e<d;++e)v[f+4+e]=b[e];a!==null&&a.push(X,f);return f},argPackAdvance:8,readValueFromPointer:cc,destructorFunction:function(a){X(a)}})}function Tc(a,b,c){c=M(c);var d,e,f,g,h;b===2?(d=qa,e=ra,g=sa,f=function(){return za},h=1):b===4&&(d=ta,e=ua,g=va,f=function(){return y},h=2);S(a,{name:c,fromWireType:function(a){var c=y[a>>2],e=f(),g,i=a+4;for(var j=0;j<=c;++j){var k=a+4+j*b;if(j==c||e[k>>h]==0){var l=k-i;l=d(i,l);g===void 0?g=l:(g+=String.fromCharCode(0),g+=l);i=k+b}}X(a);return g},toWireType:function(a,d){typeof d==="string"||Q("Cannot pass non-string to C++ string type "+c);var f=g(d),i=wd(4+f+b);y[i>>2]=f>>h;e(d,i+4,f+b);a!==null&&a.push(X,i);return i},argPackAdvance:8,readValueFromPointer:cc,destructorFunction:function(a){X(a)}})}function Uc(a,b){b=M(b),S(a,{isVoid:!0,name:b,argPackAdvance:0,fromWireType:function(){return void 0},toWireType:function(a,b){return void 0}})}function Vc(a){a>4&&(W[a].refcount+=1)}function Wc(a,b){var c=O[a];void 0===c&&Q(b+" has unknown type "+wc(a));return c}function Xc(a,b){a=Wc(a,"_emval_take_value");a=a.readValueFromPointer(b);return Jc.toHandle(a)}function Yc(){A("")}function Zc(a){A("OOM")}function $c(a){v.length,a=a>>>0,Zc(a)}var ad={};function bd(){return m||"./this.program"}function cd(){if(!cd.strings){var a=(typeof navigator==="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8";a={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:a,_:bd()};for(var b in ad)ad[b]===void 0?delete a[b]:a[b]=ad[b];var c=[];for(var b in a)c.push(b+"="+a[b]);cd.strings=c}return cd.strings}function dd(a,b){var c=0;cd().forEach(function(d,e){var f=b+c;x[a+e*4>>2]=f;xa(d,f);c+=d.length+1});return 0}function ed(a,b){var c=cd();x[a>>2]=c.length;var d=0;c.forEach(function(a){d+=a.length+1});x[b>>2]=d;return 0}function fd(a){try{a=L.getStreamFromFD(a);K.close(a);return 0}catch(a){if(typeof K==="undefined"||!(a instanceof K.ErrnoError))throw a;return a.errno}}function gd(a,b,c,d){try{a=L.getStreamFromFD(a);a=L.doReadv(a,b,c);x[d>>2]=a;return 0}catch(a){if(typeof K==="undefined"||!(a instanceof K.ErrnoError))throw a;return a.errno}}function hd(a,b,c,d,e){try{a=L.getStreamFromFD(a);var f=4294967296;c=c*f+(b>>>0);f=9007199254740992;if(c<=-f||c>=f)return-61;K.llseek(a,c,d);D=[a.position>>>0,(C=a.position,+Math.abs(C)>=1?C>0?(Math.min(+Math.floor(C/4294967296),4294967295)|0)>>>0:~~+Math.ceil((C-+(~~C>>>0))/4294967296)>>>0:0)],x[e>>2]=D[0],x[e+4>>2]=D[1];a.getdents&&c===0&&d===0&&(a.getdents=null);return 0}catch(a){if(typeof K==="undefined"||!(a instanceof K.ErrnoError))throw a;return a.errno}}function id(a,b,c,d){try{a=L.getStreamFromFD(a);a=L.doWritev(a,b,c);x[d>>2]=a;return 0}catch(a){if(typeof K==="undefined"||!(a instanceof K.ErrnoError))throw a;return a.errno}}function jd(){return ga()}function kd(a){r(a)}function ld(a){return a%4===0&&(a%100!==0||a%400===0)}function md(a,b){var c=0;for(var d=0;d<=b;c+=a[d++]);return c}var nd=[31,29,31,30,31,30,31,31,30,31,30,31],od=[31,28,31,30,31,30,31,31,30,31,30,31];function pd(a,b){a=new Date(a.getTime());while(b>0){var c=ld(a.getFullYear()),d=a.getMonth();c=(c?nd:od)[d];if(b>c-a.getDate())b-=c-a.getDate()+1,a.setDate(1),d<11?a.setMonth(d+1):(a.setMonth(0),a.setFullYear(a.getFullYear()+1));else{a.setDate(a.getDate()+b);return a}}return a}function qd(a,b,c,d){var e=x[d+40>>2];d={tm_sec:x[d>>2],tm_min:x[d+4>>2],tm_hour:x[d+8>>2],tm_mday:x[d+12>>2],tm_mon:x[d+16>>2],tm_year:x[d+20>>2],tm_wday:x[d+24>>2],tm_yday:x[d+28>>2],tm_isdst:x[d+32>>2],tm_gmtoff:x[d+36>>2],tm_zone:e?la(e):""};e=la(c);c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var f in c)e=e.replace(new RegExp(f,"g"),c[f]);var g=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],h=["January","February","March","April","May","June","July","August","September","October","November","December"];function i(a,b,c){a=typeof a==="number"?a.toString():a||"";while(a.length<b)a=c[0]+a;return a}function j(a,b){return i(a,b,"0")}function k(a,b){function c(a){return a<0?-1:a>0?1:0}var d;(d=c(a.getFullYear()-b.getFullYear()))===0&&((d=c(a.getMonth()-b.getMonth()))===0&&(d=c(a.getDate()-b.getDate())));return d}function l(a){switch(a.getDay()){case 0:return new Date(a.getFullYear()-1,11,29);case 1:return a;case 2:return new Date(a.getFullYear(),0,3);case 3:return new Date(a.getFullYear(),0,2);case 4:return new Date(a.getFullYear(),0,1);case 5:return new Date(a.getFullYear()-1,11,31);case 6:return new Date(a.getFullYear()-1,11,30)}}function m(a){a=pd(new Date(a.tm_year+1900,0,1),a.tm_yday);var b=new Date(a.getFullYear(),0,4),c=new Date(a.getFullYear()+1,0,4);b=l(b);c=l(c);if(k(b,a)<=0)if(k(c,a)<=0)return a.getFullYear()+1;else return a.getFullYear();else return a.getFullYear()-1}c={"%a":function(a){return g[a.tm_wday].substring(0,3)},"%A":function(a){return g[a.tm_wday]},"%b":function(a){return h[a.tm_mon].substring(0,3)},"%B":function(a){return h[a.tm_mon]},"%C":function(a){a=a.tm_year+1900;return j(a/100|0,2)},"%d":function(a){return j(a.tm_mday,2)},"%e":function(a){return i(a.tm_mday,2," ")},"%g":function(a){return m(a).toString().substring(2)},"%G":function(a){return m(a)},"%H":function(a){return j(a.tm_hour,2)},"%I":function(a){a=a.tm_hour;a==0?a=12:a>12&&(a-=12);return j(a,2)},"%j":function(a){return j(a.tm_mday+md(ld(a.tm_year+1900)?nd:od,a.tm_mon-1),3)},"%m":function(a){return j(a.tm_mon+1,2)},"%M":function(a){return j(a.tm_min,2)},"%n":function(){return"\n"},"%p":function(a){if(a.tm_hour>=0&&a.tm_hour<12)return"AM";else return"PM"},"%S":function(a){return j(a.tm_sec,2)},"%t":function(){return"\t"},"%u":function(a){return a.tm_wday||7},"%U":function(a){var b=new Date(a.tm_year+1900,0,1),c=b.getDay()===0?b:pd(b,7-b.getDay());a=new Date(a.tm_year+1900,a.tm_mon,a.tm_mday);if(k(c,a)<0){var d=md(ld(a.getFullYear())?nd:od,a.getMonth()-1)-31,e=31-c.getDate();e=e+d+a.getDate();return j(Math.ceil(e/7),2)}return k(c,b)===0?"01":"00"},"%V":function(a){var b=new Date(a.tm_year+1900,0,4),c=new Date(a.tm_year+1901,0,4);b=l(b);c=l(c);var d=pd(new Date(a.tm_year+1900,0,1),a.tm_yday);if(k(d,b)<0)return"53";if(k(c,d)<=0)return"01";b.getFullYear()<a.tm_year+1900?c=a.tm_yday+32-b.getDate():c=a.tm_yday+1-b.getDate();return j(Math.ceil(c/7),2)},"%w":function(a){return a.tm_wday},"%W":function(a){var b=new Date(a.tm_year,0,1),c=b.getDay()===1?b:pd(b,b.getDay()===0?1:7-b.getDay()+1);a=new Date(a.tm_year+1900,a.tm_mon,a.tm_mday);if(k(c,a)<0){var d=md(ld(a.getFullYear())?nd:od,a.getMonth()-1)-31,e=31-c.getDate();e=e+d+a.getDate();return j(Math.ceil(e/7),2)}return k(c,b)===0?"01":"00"},"%y":function(a){return(a.tm_year+1900).toString().substring(2)},"%Y":function(a){return a.tm_year+1900},"%z":function(a){a=a.tm_gmtoff;var b=a>=0;a=Math.abs(a)/60;a=a/60*100+a%60;return(b?"+":"-")+String("0000"+a).slice(-4)},"%Z":function(a){return a.tm_zone},"%%":function(){return"%"}};for(var f in c)e.includes(f)&&(e=e.replace(new RegExp(f,"g"),c[f](d)));c=ud(e,!1);if(c.length>b)return 0;wa(c,a);return c.length-1}function rd(a,b,c,d){return qd(a,b,c,d)}d=function(a,b,c,d){a||(a=this),this.parent=a,this.mount=a.mount,this.mounted=null,this.id=K.nextInode++,this.name=b,this.mode=c,this.node_ops={},this.stream_ops={},this.rdev=d};var sd=292|73,td=146;Object.defineProperties(d.prototype,{read:{get:function(){return(this.mode&sd)===sd},set:function(a){a?this.mode|=sd:this.mode&=~sd}},write:{get:function(){return(this.mode&td)===td},set:function(a){a?this.mode|=td:this.mode&=~td}},isFolder:{get:function(){return K.isDir(this.mode)}},isDevice:{get:function(){return K.isChrdev(this.mode)}}});K.FSNode=d;K.staticInit();ub();P=c.BindingError=Bb(Error,"BindingError");Cb=c.InternalError=Bb(Error,"InternalError");Ub();qc();kc();vc=c.UnboundTypeError=Bb(Error,"UnboundTypeError");Ic();function ud(a,b,c){c=c>0?c:oa(a)+1;c=new Array(c);a=ma(a,c,0,c.length);b&&(c.length=a);return c}var vd={p:Ya,t:db,w:gb,b:ib,g:jb,x:eb,K:kb,u:lb,Y:mb,d:hb,ba:qb,_:rb,U:sb,da:Eb,z:yc,y:Bc,o:Dc,ca:Kc,N:Nc,ga:Oc,s:Qc,m:Rc,M:Sc,G:Tc,ea:Uc,fa:Fc,R:Vc,Q:Xc,C:Yc,Z:$c,$:dd,aa:ed,W:fd,L:gd,T:hd,F:id,a:jd,H:Qd,I:Pd,l:Rd,c:Dd,e:Gd,k:Hd,h:Md,X:Nd,q:Fd,J:Od,P:Jd,B:Td,S:Wd,i:Kd,r:Ed,f:Bd,j:Cd,D:Id,O:Ld,n:Sd,v:Ud,A:Vd,E:kd,V:rd};Wa();c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.ia).apply(null,arguments)};c._bytearray_free=function(){return(c._bytearray_free=c.asm.ja).apply(null,arguments)};var X=c._free=function(){return(X=c._free=c.asm.la).apply(null,arguments)},wd=c._malloc=function(){return(wd=c._malloc=c.asm.ma).apply(null,arguments)},xd=c.___getTypeName=function(){return(xd=c.___getTypeName=c.asm.na).apply(null,arguments)};c.___embind_register_native_and_builtin_types=function(){return(c.___embind_register_native_and_builtin_types=c.asm.oa).apply(null,arguments)};var Y=c._setThrew=function(){return(Y=c._setThrew=c.asm.pa).apply(null,arguments)},Z=c.stackSave=function(){return(Z=c.stackSave=c.asm.qa).apply(null,arguments)},$=c.stackRestore=function(){return($=c.stackRestore=c.asm.ra).apply(null,arguments)},yd=c.___cxa_can_catch=function(){return(yd=c.___cxa_can_catch=c.asm.sa).apply(null,arguments)},zd=c.___cxa_is_pointer_type=function(){return(zd=c.___cxa_is_pointer_type=c.asm.ta).apply(null,arguments)};c.dynCall_ji=function(){return(c.dynCall_ji=c.asm.ua).apply(null,arguments)};c.dynCall_viijii=function(){return(c.dynCall_viijii=c.asm.va).apply(null,arguments)};c.dynCall_jiji=function(){return(c.dynCall_jiji=c.asm.wa).apply(null,arguments)};var Ad=c.dynCall_jiiii=function(){return(Ad=c.dynCall_jiiii=c.asm.xa).apply(null,arguments)};c.dynCall_iiiiij=function(){return(c.dynCall_iiiiij=c.asm.ya).apply(null,arguments)};c.dynCall_iiiiijj=function(){return(c.dynCall_iiiiijj=c.asm.za).apply(null,arguments)};c.dynCall_iiiiiijj=function(){return(c.dynCall_iiiiiijj=c.asm.Aa).apply(null,arguments)};function Bd(a,b,c){var d=Z();try{E(a)(b,c)}catch(a){$(d);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Cd(a,b,c,d){var e=Z();try{E(a)(b,c,d)}catch(a){$(e);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Dd(a,b){var c=Z();try{return E(a)(b)}catch(a){$(c);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Ed(a,b){var c=Z();try{E(a)(b)}catch(a){$(c);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Fd(a,b,c,d,e,f,g){var h=Z();try{return E(a)(b,c,d,e,f,g)}catch(a){$(h);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Gd(a,b,c){var d=Z();try{return E(a)(b,c)}catch(a){$(d);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Hd(a,b,c,d){var e=Z();try{return E(a)(b,c,d)}catch(a){$(e);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Id(a,b,c,d,e){var f=Z();try{E(a)(b,c,d,e)}catch(a){$(f);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Jd(a,b,c,d,e,f,g,h,i){var j=Z();try{return E(a)(b,c,d,e,f,g,h,i)}catch(a){$(j);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Kd(a){var b=Z();try{E(a)()}catch(a){$(b);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Ld(a,b,c,d,e,f){var g=Z();try{E(a)(b,c,d,e,f)}catch(a){$(g);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Md(a,b,c,d,e){var f=Z();try{return E(a)(b,c,d,e)}catch(a){$(f);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Nd(a,b,c,d,e,f){var g=Z();try{return E(a)(b,c,d,e,f)}catch(a){$(g);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Od(a,b,c,d,e,f,g,h){var i=Z();try{return E(a)(b,c,d,e,f,g,h)}catch(a){$(i);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Pd(a,b,c,d){var e=Z();try{return E(a)(b,c,d)}catch(a){$(e);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Qd(a,b,c,d){var e=Z();try{return E(a)(b,c,d)}catch(a){$(e);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Rd(a){var b=Z();try{return E(a)()}catch(a){$(b);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Sd(a,b,c,d,e,f,g,h){var i=Z();try{E(a)(b,c,d,e,f,g,h)}catch(a){$(i);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Td(a,b,c,d,e,f,g,h,i,j,k,l){var m=Z();try{return E(a)(b,c,d,e,f,g,h,i,j,k,l)}catch(a){$(m);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Ud(a,b,c,d,e,f,g,h,i,j,k){var l=Z();try{E(a)(b,c,d,e,f,g,h,i,j,k)}catch(a){$(l);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Vd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var aa=Z();try{E(a)(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p)}catch(a){$(aa);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Wd(a,b,c,d,e){var f=Z();try{return Ad(a,b,c,d,e)}catch(a){$(f);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}var Xd;Oa=function a(){Xd||Yd(),Xd||(Oa=a)};function Yd(a){a||l;if(z>0)return;Ha();if(z>0)return;function b(){if(Xd)return;Xd=!0;c.calledRun=!0;if(ia)return;Ia();i(c);c.onRuntimeInitialized&&c.onRuntimeInitialized();Ja()}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),b()},1)):b()}c.run=Yd;if(c.preInit){typeof c.preInit=="function"&&(c.preInit=[c.preInit]);while(c.preInit.length>0)c.preInit.pop()()}Yd();return c.ready}}();typeof f==="object"&&typeof e==="object"?e.exports=h:typeof define==="function"&&define.amd?define([],function(){return h}):typeof f==="object"&&(f.Module=h)}),null);
__d("PakeCpaceWasm",["PakeCpaceUtils","Promise","bx","err","pakeCpace"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var e={locateFile:function(){return c("bx").getURL(c("bx")("20913"))},wasmBinary:a};return new(h||(h=b("Promise")))(function(a){c("pakeCpace")(e).then(function(b){return a({clientBegin:function(a,c,d){var e=0;try{e=a.clientBegin(c,d);a=b.getInt8Array(e);return a}finally{b._bytearray_free(e)}},clientFinalize:function(a,c){var e=0,f=0;try{c=d("PakeCpaceUtils").uint8ArrayToVectorInt(b,c);a=a.clientFinalize(c);e=a.getKey1Ptr();c=b.getInt8Array(e);f=a.getKey2Ptr();a=b.getInt8Array(f);return{clientKey1:c,clientKey2:a}}finally{b._bytearray_free(e),b._bytearray_free(f)}},createCPaceClient:function(a){return new b.PAKEClient(a)},createCPaceServer:function(a){return new b.PAKEServer(a)},serverHandleClientStepOnePacket:function(a,c,e,f){var g=0,h=0,i=0;try{e=d("PakeCpaceUtils").uint8ArrayToVectorInt(b,e);a=a.handleClientStepOnePacket(c,e,f);g=a.getKey1Ptr();c=b.getInt8Array(g);h=a.getKey2Ptr();e=b.getInt8Array(h);i=a.getPacketPtr();f=b.getInt8Array(i);return{serverKey1:c,serverKey2:e,stepTwoPacket:f}}finally{b._bytearray_free(g),b._bytearray_free(h),b._bytearray_free(i)}}})})["catch"](function(a){throw c("err")("Failed to initialize wasm module, "+a)})})}g.PakeCPaceWasm=a}),98);
__d("usePakeInitiatorManager",["FBLogger","PakeCpaceWasm","promiseDone","react","react-compiler-runtime","requireDeferred","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.useEffect,j=b.useRef,k=c("requireDeferred")("establishPakeHandshakeAsInitiator").__setRef("usePakeInitiatorManager"),l=3e4;function a(a){var b=d("react-compiler-runtime").c(15),e=a.onGeneralFailure,f=a.onMaxAttemptsReached,g=a.onNoSessionExists,h=a.onSessionExpired,r=a.onSuccessfulSecretDecryption,s=a.onWrongOtc,t=a.timeout,u=a.clientType,v=t===void 0?l:t,w=c("useAsyncReStore")(),x=j(null),y=j(q),z=j(p),A=j(null),B=j(!1);b[0]===Symbol.for("react.memo_cache_sentinel")?(a=function(){var a;z.current();z.current=o;(a=x.current)==null||a.delete();x.current=null;y.current();y.current=n},b[0]=a):a=b[0];var C=a;b[1]===Symbol.for("react.memo_cache_sentinel")?(t=function(){B.current===!1&&(B.current=!0,c("promiseDone")(d("PakeCpaceWasm").PakeCPaceWasm().then(function(a){A.current=a}),void 0,m));return C},a=[C],b[1]=t,b[2]=a):(t=b[1],a=b[2]);i(t,a);b[3]!==u||b[4]!==w||b[5]!==e||b[6]!==f||b[7]!==g||b[8]!==h||b[9]!==r||b[10]!==s||b[11]!==v?(t=function(a){return Promise.all([w,k.load()]).then(async function(b){var c=b[0];b=b[1];b=await b({clientType:u,onGeneralFailure:e,onMaxAttemptsReached:f,onNoSessionExists:g,onSessionExpired:h,onSuccessfulSecretDecryption:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=b;C();r.apply(void 0,d)},onWrongOtc:s,otc:a,pakeCpaceModule:A.current,storage:c,timeout:v});c=b.pakeClient;var d=b.stopTimeout;b=b.unsubFromMessagesTable;x.current=c;y.current=d;z.current=b})},b[3]=u,b[4]=w,b[5]=e,b[6]=f,b[7]=g,b[8]=h,b[9]=r,b[10]=s,b[11]=v,b[12]=t):t=b[12];a=t;b[13]!==a?(t={establishPakeHandshakeAsInitiator:a},b[13]=a,b[14]=t):t=b[14];return t}function m(){c("FBLogger")("wmi_eb").mustfix("PAKE: Error loading WASM module")}function n(){}function o(){}function p(){}function q(){}g.default=a}),98);
__d("MWEncryptedBackupsInsertOTCStep.react",["fbt","EBSMGatingUI","FBLogger","FocusRegion.react","JSResourceForInteraction","MWChatEncryptedBackupsDismissalDialogContext","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsNumericCodeErrorWrapper.react","MWChatEncryptedBackupsNumericCodeInput.react","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsSetIsDialogPersistedContext","MWEBEOTRDialog.entrypoint","MWEBLazyLoadResetPinPage","MWEBOTCErrorMessages","MWEBQPOneTimeCode.react","MWEBVirtualDevicesContext.react","MWEncrypedBackupsSendOTCNotifications","MWEncryptedBackupsLocalStorageEntryEnum","MWXColumn.react","MWXColumnItem.react","MWXDeferredPopoverTrigger.react","MWXDialogPageLegacy.react","MWXLink.react","MWXMultiStepDialogHeader.react","MWXRow.react","MWXRowItem.react","MWXSpinner.react","MWXText.react","PAKEClientTypeEnum","QPLUserFlow","focusScopeQueries","gkx","justknobx","promiseDone","react","requireDeferred","useAsyncReStore","useMWChatEncryptedBackupsNumericCode","useMWEBFlowSourceContext","usePakeInitiatorManager","usePushFDSMultiStepDialogEntryPointPage","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useContext,m=b.useEffect,n=b.useMemo,o=b.useRef,p=b.useState,q=c("requireDeferred")("MWEBUseLocalStorage").__setRef("MWEncryptedBackupsInsertOTCStep.react"),r=c("requireDeferred")("MWEncryptedBackupsFetchBackupIds").__setRef("MWEncryptedBackupsInsertOTCStep.react"),s=c("requireDeferred")("MWEncryptedBackupsOTCEligibleDevicesPopover.react").__setRef("MWEncryptedBackupsInsertOTCStep.react"),t=c("requireDeferred")("MWEncryptedBackupsSharedState").__setRef("MWEncryptedBackupsInsertOTCStep.react"),u=c("requireDeferred")("deserializeSecretsAndAddDevice").__setRef("MWEncryptedBackupsInsertOTCStep.react"),v=c("JSResourceForInteraction")("MWEBPushResetPinPage").__setRef("MWEncryptedBackupsInsertOTCStep.react"),w="chat-encrypted-backups-dialog-layout-second-step",x=6,y="https://www.facebook.com/help/messenger-app/431055522328649?ref=learn_more",z=c("gkx")("23219"),aa=c("gkx")("20861"),A=c("justknobx")._("654");function a(a){var b=a.onClose,e=a.onComplete,f=a.onSkip,g=a.pushPage;a=p(!1);var i=a[0],B=a[1],C=o(!1),D=o(!1),E=o(function(){});a=p(null);var F=a[0],G=a[1],H=c("useAsyncReStore")(),ba=c("useMWEBFlowSourceContext")(),I=l(c("MWChatEncryptedBackupsSetIsDialogPersistedContext")).setIsDialogPersisted;m(function(){return function(){E.current()}},[]);a=d("MWEncrypedBackupsSendOTCNotifications").useSendOTCNotifications();var J=a[0],K=a[1],L=k(function(){J()["catch"](function(){c("FBLogger")("wmi_eb").mustfix("OTC: Send otc notifications sproc failed."),c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_SEND_NOTIFICATION_FAILURE"),G(d("MWEBOTCErrorMessages").getNotificationFailedToSendErrorMessage())})},[J]);a=p(!1);var M=a[0],ca=a[1];a=c("useVisibilityObserver")({onVisible:function(){ca(!0)}});m(function(){if(A===!0)return;C.current===!1&&(C.current=!0,c("promiseDone")(v.load()),L())},[L]);m(function(){if(A===!1)return;if(C.current===!0||M===!1)return;C.current=!0;c("promiseDone")(v.load());L()},[M,L]);var N=l(c("MWChatEncryptedBackupsDismissalDialogContext")),O=N.setIsDismissedDisabled;N=d("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices();var P=N.virtualDeviceInfo,Q=k(function(){P.vestaClientID!=null?(O(!0),c("MWEBLazyLoadResetPinPage")(e,g)):e()},[e,g,O,P.vestaClientID]);N=c("usePakeInitiatorManager")({clientType:c("PAKEClientTypeEnum").ENCRYPTED_BACKUPS,onGeneralFailure:k(function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_API_FAILURE"),G(d("MWEBOTCErrorMessages").getGeneralErrorMessage()),D.current=!0,B(!1),I==null||I(!1)},[I]),onMaxAttemptsReached:k(function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_MAX_ATTEMPTS_REACHED"),G(d("MWEBOTCErrorMessages").getMaxAttemptsReachedErrorMessage()),D.current=!0,B(!1)},[]),onNoSessionExists:k(function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_NO_SESSION"),G(d("MWEBOTCErrorMessages").getNoSessionOngoingErrorMessage()),D.current=!0,B(!1)},[]),onSessionExpired:k(function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_SESSION_EXPIRED"),G(d("MWEBOTCErrorMessages").getSessionExpiredErrorMessage()),D.current=!0,B(!1)},[]),onSuccessfulSecretDecryption:k(function(a){var b=a.decryptedSecret,e=a.initiatorId;I==null||I(!0);c("promiseDone")(u.load(),function(a){c("promiseDone")(H.then(function(f){return a({db:f,initiatorId:e,onAddDeviceFailure:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_ADD_DEVICE_FAILURE"),G(d("MWEBOTCErrorMessages").getGeneralErrorMessage()),D.current=!0,B(!1),I==null||I(!1)},onAddDeviceFinish:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_ADD_DEVICE_FINISHED"),d("MWChatEncryptedBackupsLogging").endSuccess({annotations:{bool:{is_backend_setup:d("EBSMGatingUI").isBackendSetupSuccessfulForEBSM()}},event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent}),t.onReady(function(a){a=a.upsertEBSharedStateEntry;c("promiseDone")(a({db:f,stateKey:c("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY}))}),q.onReady(function(a){var b=a.mwEBCreateLocalStorageEntry;a=a.mwEBDeleteLocalStorageEntry;b(c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION);b(c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION_2);a(c("MWEncryptedBackupsLocalStorageEntryEnum").EBSM_CORRUPTION_WIPE)}),Q(),B(!1),r.onReady(function(a){a=a.encryptedBackupsFetchBackupIds;a(f)["catch"](function(a){return c("FBLogger")("wmi_eb").mustfix("OTC Restore: Error when fetching backup ids, %s",a)})})},secrets:b})}),function(a){E.current=a})})},[H,Q,I]),onWrongOtc:k(function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_INCORRECT_CODE"),G(d("MWEBOTCErrorMessages").getOtcIsWrongErrorMessage()),D.current=!0,B(!1)},[])});var da=N.establishPakeHandshakeAsInitiator;N=d("useMWChatEncryptedBackupsNumericCode").useMWChatEncryptedBackupsNumericCode({focusRegionId:w,inputSize:x,onChange:function(){G()},onComplete:function(a){var b=ba();c("QPLUserFlow").addAnnotations(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,{string:{restore_type:"one_time_code",source:b}});B(!0);c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_SUBMIT");c("promiseDone")(da(a))},type:"otc"});var ea=N[0];N=N[1];var R=N.clearNumericInput,S=N.focusOnInput,T=N.isLoading,U=k(function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_RESEND_CLICK"),L(),S()},[S,L]);N=c("usePushFDSMultiStepDialogEntryPointPage")(c("MWEBEOTRDialog.entrypoint"),{});N[0];var V=N[1],W=k(function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_HELP_CLICK"),V({onClose:b,onSkip:f})},[b,f,V]);m(function(){D.current&&(R(),D.current=!1)},[R]);N=c("useVisibilityObserver")({onVisible:function(){c("QPLUserFlow").addAnnotations(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,{bool:{otc_check_first:!1,otc_devices_popover:!0}}),c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_SCREEN"),S()}});var fa=h._(/*BTDS*/"Check Messenger or Facebook on your mobile device for a one-time code"),X=n(function(){return{disabled:T||K,label:h._(/*BTDS*/"Resend code"),onPress:U,testid:"mw-eb-otc-insert-resend-code-button",type:"secondary"}},[T,K,U]),Y=c("justknobx")._("4787"),Z=n(function(){return{label:h._(/*BTDS*/"Need help?"),linkProps:Y?{rel:"noreferrer",target:"_blank",url:y}:void 0,onPress:Y?void 0:W,testid:"mw-eb-otc-insert-help-button"}},[W,Y]),$=Z!=null;return j.jsxs(j.Fragment,{children:[j.jsx(c("MWXMultiStepDialogHeader.react"),{withCloseButton:!1,withoutBackButton:!0,withoutHeaderBottomBorder:!0}),j.jsx(c("MWXDialogPageLegacy.react"),{callToActionGroupLayout:"expanded",includeFDSContentPadding_REMOVE_THIS_AFTER_CONTENT_PADDING_MIGRATION:!1,primaryCallToAction:$&&!i?X:void 0,ref:N,secondaryCallToAction:$&&!i?Z:void 0,children:j.jsx("div",{className:"x2lwn1j",ref:a,children:j.jsxs(c("MWXColumn.react"),{align:"center",paddingHorizontal:16,paddingTop:16,paddingVertical:$&&!i?void 0:16,spacing:8,children:[j.jsx(c("MWXColumnItem.react"),{align:"center",paddingTop:16,children:j.jsx("div",{className:"xg87l8a",children:j.jsx(c("MWEBQPOneTimeCode.react"),{})})}),j.jsx(c("MWXColumnItem.react"),{align:"center",paddingVertical:16,children:j.jsx(c("MWXText.react"),{align:"center",isSemanticHeading:!0,type:"headlineEmphasized2",children:fa})}),j.jsx(c("MWXColumnItem.react"),{align:"center",children:j.jsx("div",{className:"x1l90r2v x2b8uid",children:j.jsx(c("MWXDeferredPopoverTrigger.react"),{align:"middle",popoverProps:{},popoverResource:s,position:"above",children:function(a,b){return j.jsx(c("MWXText.react"),{color:"secondary",type:"body3",children:h._(/*BTDS*/"After confirming on {device} that you requested a code, you can enter it here.",[h._param("device",j.jsx(c("MWXText.react"),{color:"blueLink",ref:a,type:"bodyLink3",children:j.jsx(c("MWXLink.react"),{onClick:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_DEVICES_POPOVER_CLICK"),b()},testid:void 0,children:h._(/*BTDS*/"your mobile device")})}))])})}})})}),j.jsxs(c("MWXColumnItem.react"),{align:"center",children:[j.jsx(c("MWChatEncryptedBackupsNumericCodeErrorWrapper.react"),{error:F,children:j.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").tabbableScopeQuery,id:w,children:j.jsx(c("MWChatEncryptedBackupsNumericCodeInput.react"),babelHelpers["extends"]({},ea,{disabled:T||i,testid:void 0}))})}),aa&&F===d("MWEBOTCErrorMessages").getGeneralErrorMessage()?j.jsx("div",{className:"xwib8y2",children:j.jsx(c("MWXText.react"),{align:"center",color:"negative",type:"body4",children:h._(/*BTDS*/"[meta-only] please rageshake from both devices (mobile and web) when reporting an OTC bug")})}):null]}),i&&j.jsx(c("MWXColumnItem.react"),{align:"center",paddingTop:$?16:0,paddingVertical:$?8:0,children:j.jsxs(c("MWXRow.react"),{align:"center",paddingTop:8,spacing:8,children:[j.jsx(c("MWXRowItem.react"),{verticalAlign:"center",children:j.jsx(c("MWXSpinner.react"),{color:z?"disabled_DEPRECATED":"blue",size:12})}),j.jsx(c("MWXRowItem.react"),{verticalAlign:"center",children:j.jsx(c("MWXText.react"),{color:"secondary",testid:void 0,type:"body3",children:h._(/*BTDS*/"Verifying your code")})})]})}),!$&&!i&&j.jsx(c("MWXColumnItem.react"),{align:"center",paddingTop:8,children:j.jsx(c("MWXText.react"),{color:X.disabled?"disabled":"highlight",type:"button2",children:j.jsx(c("MWXLink.react"),{disabled:X.disabled,onClick:X.onPress,rel:"noreferrer",children:X.label})})})]})})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWEncryptedBackupsQPWithPinPlaceholder.react",["MWXColumn.react","MWXGlimmer.react","MWXRow.react","MWXRowItem.react","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("gkx")("23433"),k={logoGlimmer:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",height:"xxk0z11",width:"xvy4d1p",$$css:!0},pinInputGlimmer:{borderStartStartRadius:"x1i5p2am",borderStartEndRadius:"x1whfx0g",borderEndEndRadius:"xr2y4jy",borderEndStartRadius:"x1ihp6rs",height:"xc9qbxq",$$css:!0},root:{backgroundColor:"xlhe6ec",borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x972fbf",borderInlineEndWidth:"x10w94by",borderBottomWidth:"x1qhh985",borderInlineStartWidth:"x14e42zd",boxShadow:"xjf5wm9",boxSizing:"x9f619",minWidth:"xeuugli",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"x1iorvi4",paddingInlineEnd:"x11lfxj5",paddingBottom:"xjkvuk6",paddingInlineStart:"x135b78x",$$css:!0},textGlimmer:{borderStartStartRadius:"x1i5p2am",borderStartEndRadius:"x1whfx0g",borderEndEndRadius:"xr2y4jy",borderEndStartRadius:"x1ihp6rs",height:"x1qx5ct2",$$css:!0}};function a(){var a=d("react-compiler-runtime").c(6),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b={0:{className:"xlhe6ec x1obq294 x5a5i1n xde0f50 x15x8krk x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x972fbf x10w94by x1qhh985 x14e42zd xjf5wm9 x9f619 xeuugli x6ikm8r x10wlt62 x11lfxj5 x135b78x xw7yly9 x1ys307a x1yztbdb xyqm7xq x1l90r2v xyamay9"},1:{className:"xlhe6ec x1obq294 x5a5i1n xde0f50 x15x8krk x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x972fbf x10w94by x1qhh985 x14e42zd xjf5wm9 x9f619 xeuugli x6ikm8r x10wlt62 x11lfxj5 x135b78x xw7yly9 x1ys307a x1yztbdb xyqm7xq x2lwn1j xsag5q8 xz9dl7a"}}[!!j<<0],a[0]=b):b=a[0];var e;a[1]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx(c("MWXRowItem.react"),{verticalAlign:"center",children:i.jsx(c("MWXGlimmer.react"),{index:0,xstyle:k.logoGlimmer})}),a[1]=e):e=a[1];a[2]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsxs(c("MWXRow.react"),{spacingVertical:0,verticalAlign:"center",children:[e,i.jsx(c("MWXRowItem.react"),{expanding:!0,children:i.jsx(c("MWXGlimmer.react"),{index:0,xstyle:k.textGlimmer})})]}),a[2]=e):e=a[2];var f;a[3]===Symbol["for"]("react.memo_cache_sentinel")?(f=i.jsx(c("MWXRow.react"),{wrap:"none",children:i.jsx(c("MWXRowItem.react"),{expanding:!0,children:i.jsx("div",{className:"x16ngw23 xwib8y2",children:i.jsx(c("MWXGlimmer.react"),{index:0,xstyle:k.textGlimmer})})})}),a[3]=f):f=a[3];var g;a[4]===Symbol["for"]("react.memo_cache_sentinel")?(g=i.jsx(c("MWXRow.react"),{direction:"forward",wrap:"none",children:i.jsx(c("MWXRowItem.react"),{expanding:!0,children:i.jsx(c("MWXGlimmer.react"),{index:1,xstyle:k.pinInputGlimmer})})}),a[4]=g):g=a[4];a[5]===Symbol["for"]("react.memo_cache_sentinel")?(b=i.jsx("div",babelHelpers["extends"]({},b,{children:i.jsxs(c("MWXColumn.react"),{spacing:8,style:k.root,children:[e,f,g,i.jsx(c("MWXRow.react"),{wrap:"none",children:i.jsx(c("MWXRowItem.react"),{expanding:!0,children:i.jsx("div",{className:"x18xe386 xpdvgm7 x1y1aw1k",children:i.jsx(c("MWXGlimmer.react"),{index:0,xstyle:k.textGlimmer})})})})]})})),a[5]=b):b=a[5];return b}g["default"]=a}),98);
__d("MWEncryptedBackupsThreadListNux_query.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider"}],kind:"Fragment",metadata:null,name:"MWEncryptedBackupsThreadListNux_query",selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup"},{alias:null,args:[{kind:"Literal",name:"family_device_id",value:""}],kind:"ScalarField",name:"has_otc_eligible_devices",storageKey:'has_otc_eligible_devices(family_device_id:"")'}],storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useMWChatEncryptedBackupsVestaUserInfo_vestaGetUserInfoResponse"}],storageKey:null}],storageKey:null},{condition:"__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"if_viewer_can_see_messenger_eb_new_user_onboarding_upsells",plural:!1,selections:[{args:null,documentName:"MWEncryptedBackupsThreadListNux_query",fragmentName:"MWEBNewUserOnboardingThreadListUpsellWrapper_viewer",fragmentPropName:"viewer",kind:"ModuleImport"}],storageKey:null}]}],storageKey:null},action:"THROW",path:"viewer"},{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query"}]}],type:"Query",abstractKey:null};e.exports=a}),null);
__d("MWEncryptedBackupsThreadListNux.react",["CometPlaceholder.react","CometRelay","JSResourceForInteraction","MWChatEncryptedBackupsQPLSource.enum","MWEBEntrypointsKillswitch.enum","MWEBMobileOnboardingEligibility","MWEBVestaUserInfoContext.react","MWEBVirtualDevicesContextProvider.react","MWEBWebOnboardingUpsellUtils","MWEncryptedBackupsThreadListNux_query.graphql","MWEncryptedBackupsThreadListQPWrapper.react","cr:10269","cr:20045","cr:2046","react","react-compiler-runtime","useMWChatEncryptedBackupsVestaUserInfo","useMWEBBackupState","useMWEncryptedBackupsGetVirtualDevicesPreloaded"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));i.useMemo;var k=d("MWEBMobileOnboardingEligibility").requireMobileOnboardingIfEligible(c("JSResourceForInteraction")("MWEBMobileOnboardingQPBannerWrapper.react").__setRef("MWEncryptedBackupsThreadListNux.react"));function l(a){var e,f,g,i=d("react-compiler-runtime").c(22),k=a.children;a=a.fragmentKey;a=d("CometRelay").useFragment(h!==void 0?h:h=b("MWEncryptedBackupsThreadListNux_query.graphql"),a);var l;i[0]===Symbol["for"]("react.memo_cache_sentinel")?(l={entrypoint:c("MWEBEntrypointsKillswitch.enum").INBOX_THREADLIST},i[0]=l):l=i[0];l=c("useMWEBBackupState")(l);e=(e=a.viewer.messenger_default_encrypted_backup)==null?void 0:e.vesta_user_info;var n;i[1]!==e?(n={vestaGetUserInfoResponse$key:e},i[1]=e,i[2]=n):n=i[2];e=c("useMWChatEncryptedBackupsVestaUserInfo")(n);i[3]!==e.attemptsRemaining||i[4]!==e.loginTimeoutRemainingSecs?(n={attemptsRemaining:e.attemptsRemaining,loginTimeoutRemainingSecs:e.loginTimeoutRemainingSecs,vestaClientID:null},i[3]=e.attemptsRemaining,i[4]=e.loginTimeoutRemainingSecs,i[5]=n):n=i[5];e=n;n=e;e=a==null?void 0:a.xfb_backup;var o;i[6]!==e?(o={encryptedBackup:e},i[6]=e,i[7]=o):o=i[7];e=c("useMWEncryptedBackupsGetVirtualDevicesPreloaded")(o);o=e.getVirtualDevices;i[8]!==o?(e=o(),i[8]=o,i[9]=e):e=i[9];o=e;e=o.offlineDevicesCount;o=o.vestaClientID;f=(f=a==null||(g=a.xfb_backup)==null?void 0:g.has_otc_eligible_devices)!=null?f:void 0;var p;i[10]!==l||i[11]!==k||i[12]!==a?(p=j.jsx(m,{backupState:l,children:k,fragment:a}),i[10]=l,i[11]=k,i[12]=a,i[13]=p):p=i[13];i[14]!==p||i[15]!==n?(l=j.jsx(d("MWEBVestaUserInfoContext.react").MWEBVestaUserInfoContext.Provider,{value:n,children:p}),i[14]=p,i[15]=n,i[16]=l):l=i[16];i[17]!==e||i[18]!==l||i[19]!==f||i[20]!==o?(k=j.jsx(c("MWEBVirtualDevicesContextProvider.react"),{hasOtcEligibleDevicesInitialValue:f,offlineDevicesCountInitialValue:e,vestaClientIDInitialValue:o,children:l}),i[17]=e,i[18]=l,i[19]=f,i[20]=o,i[21]=k):k=i[21];return k}function m(a){var e=d("react-compiler-runtime").c(8),f=a.backupState,g=a.children;a=a.fragment;switch(f){case 4:e[0]!==g||e[1]!==a?(f=b("cr:2046")!=null?j.jsx(b("cr:2046"),{fragmentKey:a,trigger:d("MWEncryptedBackupsThreadListQPWrapper.react").MWEncryptedBackupsQPTrigger.THREAD_LIST,children:g}):g,e[0]=g,e[1]=a,e[2]=f):f=e[2];return f;case 1:return null;case 2:if(d("MWEBWebOnboardingUpsellUtils").IS_E2E_TEST_UNRELATED_TO_ENCRYPTED_BACKUPS)return g;e[3]!==g?(f=b("cr:20045")?j.jsx(b("cr:20045"),{source:c("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_QP,children:g}):g,e[3]=g,e[4]=f):f=e[4];f=f;var h;e[5]!==f||e[6]!==a.viewer.if_viewer_can_see_messenger_eb_new_user_onboarding_upsells?(h=a.viewer.if_viewer_can_see_messenger_eb_new_user_onboarding_upsells?j.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWEncryptedBackupsJewelNuxWrapper.OnboardingThreadListQP",children:j.jsx(d("CometRelay").MatchContainer,{match:a.viewer.if_viewer_can_see_messenger_eb_new_user_onboarding_upsells,props:{bannerSource:c("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_PERSISTENT_BANNER,children:f,qpSource:c("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_ONBOARDING_QP}})}):b("cr:10269")?j.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWEncryptedBackupsThreadListNux.OnboardingThreadListQP",children:j.jsx(b("cr:10269"),{source:c("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_QP,children:f})}):j.jsx(k,{fallback:f,props:{children:f,source:c("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_ONBOARDING_QP,trigger:d("MWEncryptedBackupsThreadListQPWrapper.react").MWEncryptedBackupsQPTrigger.THREAD_LIST}}),e[5]=f,e[6]=a.viewer.if_viewer_can_see_messenger_eb_new_user_onboarding_upsells,e[7]=h):h=e[7];return h;default:return g}}function a(a){var b=d("react-compiler-runtime").c(3),e=a.children;a=a.fragmentKey;var f;b[0]!==e||b[1]!==a?(f=j.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWEncryptedBackupsThreadListNux.Query",children:j.jsx(l,{fragmentKey:a,children:e})}),b[0]=e,b[1]=a,b[2]=f):f=b[2];return f}g["default"]=a}),98);
__d("MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query",selections:[{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"MWEncryptedBackupsThreadListRestoreQPWrapper_query"}]}],type:"Query",abstractKey:null};e.exports=a}),null);
__d("useHasRestoreInterstitialSoftblockBeenDismissed",["MWEncryptedBackupsLocalStorageEntryEnum","MWEncryptedBackupsSharedState","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b,e=a.backupState;a=a.isCooldownOrLockOutState;var g=(h||(h=c("useReStore")))();b=(b=d("ReQLSuspense").useFirst(function(){return e===4?d("ReQL").fromTableAscending(g.tables.experiences_shared_state).getKeyRange(c("MWEncryptedBackupsLocalStorageEntryEnum").INTERSTITIAL_DIALOG_VERIFY_DEVICE_NUX_DISMISSED).map(i):d("ReQL").empty()},[e,g],f.id+":34"))!=null?b:!1;var j=e===4&&b===!1&&d("MWEncryptedBackupsSharedState").getEntryPresentInLocalStorage({db:g,stateKey:c("MWEncryptedBackupsLocalStorageEntryEnum").INTERSTITIAL_DIALOG_VERIFY_DEVICE_NUX_DISMISSED})!=null;return b===!0||j===!0||a}function i(a){a=a.stateValue;return a!=null}g["default"]=a}),98);
__d("useMWEBIsUpsellDeferred",["MWEncryptedBackupsDeferLocalStorageUpsell","ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useMemo;function a(a){var b=d("react-compiler-runtime").c(18);a=a.upsellType;var e=(h||(h=c("useReStore")))(),g;b[0]!==a?(g=d("MWEncryptedBackupsDeferLocalStorageUpsell").getLocalStorageKeys(a),b[0]=a,b[1]=g):g=b[1];a=g;g=a;var i=g.countdownInMS,j=g.impressionsCountKey,k=g.lastImpressionTimeKey,l=g.maxImpressionLimit;b[2]!==i||b[3]!==e.tables.experiences_shared_state||b[4]!==k?(a=function(){return d("ReQL").fromTableAscending(e.tables.experiences_shared_state).getKeyRange(k).map(function(a){a=a.stateValue;return a!=null&&+a+i>Date.now()?!0:!1})},b[2]=i,b[3]=e.tables.experiences_shared_state,b[4]=k,b[5]=a):a=b[5];b[6]!==i||b[7]!==e||b[8]!==k?(g=[i,e,k],b[6]=i,b[7]=e,b[8]=k,b[9]=g):g=b[9];a=d("ReQLSuspense").useFirst(a,g,f.id+":41");b[10]!==e.tables.experiences_shared_state||b[11]!==j||b[12]!==l?(g=function(){return d("ReQL").fromTableAscending(e.tables.experiences_shared_state).getKeyRange(j).map(function(a){a=a.stateValue;return l===d("MWEncryptedBackupsDeferLocalStorageUpsell").INFINITE_IMPRESSIONS_LIMIT||+a<l?!1:!0})},b[10]=e.tables.experiences_shared_state,b[11]=j,b[12]=l,b[13]=g):g=b[13];var m;b[14]!==e||b[15]!==j||b[16]!==l?(m=[e,j,l],b[14]=e,b[15]=j,b[16]=l,b[17]=m):m=b[17];b=d("ReQLSuspense").useFirst(g,m,f.id+":56");return a===!0||b===!0}g["default"]=a}),98);
__d("useMWEncryptedBackupsIsUpsellDismissed",["MWEBVestaUserInfoContext.react","MWEBVirtualDevicesContext.react","MWEncryptedBackupsDeferLocalStorageUpsell","react","react-compiler-runtime","useMWEBIsUpsellDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useState;function a(a){var b=d("react-compiler-runtime").c(5);a=a.upsellType;var e=d("MWEBVestaUserInfoContext.react").useMWEBIsCooldownOrLockOutState(),f=i(!1),g=f[0];f=f[1];var h;b[0]!==a?(h={upsellType:a},b[0]=a,b[1]=h):h=b[1];h=c("useMWEBIsUpsellDeferred")(h);var j=d("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices();j=j.virtualDeviceInfo;j=j.doesUserHaveOtcEligibleDevices;if(e&&a===d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_WITH_PIN_JEWEL&&!j){b[2]===Symbol["for"]("react.memo_cache_sentinel")?(e=[!0,f],b[2]=e):e=b[2];return e}a=h===!0||g;b[3]!==a?(j=[a,f],b[3]=a,b[4]=j):j=b[4];return j}g["default"]=a}),98);
__d("MWEncryptedBackupsThreadListRestoreQPWrapperDeferred.react",["CometPlaceholder.react","CometRelay","EncryptedBackupsSupportedPlatformUtils","MWEBVestaUserInfoContext.react","MWEncryptedBackupsDeferLocalStorageUpsell","MWEncryptedBackupsQPWithPinPlaceholder.react","MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query.graphql","deferredLoadComponent","gkx","react","react-compiler-runtime","requireDeferred","useHasRestoreInterstitialSoftblockBeenDismissed","useMWEBGetUpsellState","useMWEncryptedBackupsIsUpsellDismissed"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k=c("deferredLoadComponent")(c("requireDeferred")("MWEncryptedBackupsThreadListRestoreQPWrapper.react").__setRef("MWEncryptedBackupsThreadListRestoreQPWrapperDeferred.react")),l=c("gkx")("3952");function a(a){var e=d("react-compiler-runtime").c(15),f=a.children,g=a.fragmentKey;a=a.trigger;g=d("CometRelay").useFragment(h!==void 0?h:h=b("MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query.graphql"),g);var i=d("MWEBVestaUserInfoContext.react").useMWEBIsCooldownOrLockOutState(),m=c("useMWEBGetUpsellState")();m=m.isRestoreUpsellsDismissed;var n;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(n={upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_JEWEL},e[0]=n):n=e[0];n=c("useMWEncryptedBackupsIsUpsellDismissed")(n);var o=n[0];n=n[1];var p;e[1]===Symbol["for"]("react.memo_cache_sentinel")?(p={upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_WITH_PIN_JEWEL},e[1]=p):p=e[1];p=c("useMWEncryptedBackupsIsUpsellDismissed")(p);var q=p[0];p=p[1];var r;e[2]===Symbol["for"]("react.memo_cache_sentinel")?(r={upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.PERSISTENT_BANNER_JEWEL},e[2]=r):r=e[2];r=c("useMWEncryptedBackupsIsUpsellDismissed")(r);var s=r[0];r=r[1];var t;e[3]!==i?(t={backupState:4,isCooldownOrLockOutState:i},e[3]=i,e[4]=t):t=e[4];i=c("useHasRestoreInterstitialSoftblockBeenDismissed")(t);t=d("EncryptedBackupsSupportedPlatformUtils").useMWEncryptedBackupsGetCurrentSupportedPlatform();o=o||q;if(m||o&&!l||o&&l&&s)return f;e[5]===Symbol["for"]("react.memo_cache_sentinel")?(q=j.jsx(c("MWEncryptedBackupsQPWithPinPlaceholder.react"),{}),e[5]=q):q=e[5];e[6]!==f||e[7]!==t||e[8]!==g||e[9]!==o||e[10]!==r||e[11]!==n||e[12]!==p||e[13]!==a?(m=j.jsx(c("CometPlaceholder.react"),{fallback:q,name:"MWEncryptedBackupsThreadListRestoreQPWrapperDeferred",children:j.jsx(k,{children:f,currentSupportedPlatform:t,fragmentKey:g,hasDismissedQps:o,setHasDismissedBanner:r,setHasDismissedQp:n,setHasDismissedQpWithPin:p,trigger:a})}),e[6]=f,e[7]=t,e[8]=g,e[9]=o,e[10]=r,e[11]=n,e[12]=p,e[13]=a,e[14]=m):m=e[14];s=m;switch(t){case d("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.INSTAGRAM_DIRECT_INBOX:return f;case d("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.MESSENGER_DOT_COM:case d("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_INBOX:return i?s:f;case d("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_DOT_COM:return s}}g["default"]=a}),98);
__d("MWEncryptedBackupsThreadListRestoreQPWrapperDeferredWithEBCheck.react",["cr:9938"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:9938")}),98);
__d("useMWEBSetHasSeenNoticeMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9618790408209960"}),null);
__d("useMWEBSetHasSeenNoticeMutation.graphql",["useMWEBSetHasSeenNoticeMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"SetHasSeenEbAutoRestoreNoticeResponsePayload",kind:"LinkedField",name:"set_has_seen_eb_auto_restore_notice",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMWEBSetHasSeenNoticeMutation",selections:a,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"useMWEBSetHasSeenNoticeMutation",selections:a},params:{id:b("useMWEBSetHasSeenNoticeMutation_facebookRelayOperation"),metadata:{},name:"useMWEBSetHasSeenNoticeMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("useMWEBSetHasSeenNotice",["CometRelay","react","react-compiler-runtime","useMWEBSetHasSeenNoticeMutation.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useCallback;function a(){var a=d("react-compiler-runtime").c(3),c;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(c=h!==void 0?h:h=b("useMWEBSetHasSeenNoticeMutation.graphql"),a[0]=c):c=a[0];c=d("CometRelay").useMutation(c);var e=c[0];a[1]!==e?(c=function(){e({variables:{}})},a[1]=e,a[2]=c):c=a[2];return c}g["default"]=a}),98);
__d("useMWEBAutoRestoreNoticeStep",["MWChatEncryptedBackupsDismissalDialogContext","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWEBUseLocalStorage","MWEncryptedBackupsLocalStorageEntryEnum","QPLUserFlow","ReQL","ReQLSuspense","deferredLoadComponent","react","react-compiler-runtime","requireDeferred","useLabyrinthLogging","useMWEBFlowSourceContext","useMWEBSetHasSeenNotice","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=j||d("react");var k=h||(h=c("react"));b.useCallback;var l=b.useContext,m=c("deferredLoadComponent")(c("requireDeferred")("MWEBAutoRestoreNoticeDialogStep.react").__setRef("useMWEBAutoRestoreNoticeStep"));function a(){var a=d("react-compiler-runtime").c(10),b=d("useLabyrinthLogging").useLabyrinthLoggingFlow(),e=b.startFlow;b=l(c("MWChatEncryptedBackupsDismissalDialogContext"));var g=b.setIsDismissedDisabled,h=c("useMWEBFlowSourceContext")(),j=(i||(i=c("useReStore")))();a[0]!==j.tables.auto_restore_opt_out?(b=function(){return d("ReQL").fromTableAscending(j.tables.auto_restore_opt_out)},a[0]=j.tables.auto_restore_opt_out,a[1]=b):b=a[1];var o;a[2]!==j?(o=[j],a[2]=j,a[3]=o):o=a[3];var p=d("ReQLSuspense").useArray(b,o,f.id+":55"),q=c("useMWEBSetHasSeenNotice")();a[4]!==p||a[5]!==h||a[6]!==q||a[7]!==g||a[8]!==e?(b=function(a){var b=a.hasSeenNotice,f=a.onNextStep,i=a.pushPage;a=p.filter(n).length>0;var j=function(){d("MWChatEncryptedBackupsLogging").endSuccess({event:d("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent}),f()};e({event:d("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent,source:h()});if(a){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent,"AUTO_RESTORE_NOTICE_SCREEN_OPTED_OUT");j();return}c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent,"AUTO_RESTORE_NOTICE_SCREEN_OPTED_IN");d("MWEBUseLocalStorage").mwEBCreateLocalStorageEntry(c("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_REMEMBER_BROWSER_CONSENT);if(b){j();return}g(!0);q();i(function(){return k.jsx(m,{onComplete:j,pushPage:i})},{withoutBackButton:!0,withoutCloseButton:!0})},a[4]=p,a[5]=h,a[6]=q,a[7]=g,a[8]=e,a[9]=b):b=a[9];return b}function n(a){return a.optOutKey===c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_OPTED_OUT_OF_AUTO_RESTORE}g["default"]=a}),98);
__d("useMWResetAttachmentsRangesOnEBOnboard",["LSThreadMediaGalleryGroup","MAWFetchAndPersistMedia","MAWMediaRestoreEBRange","MWEBEntrypointsKillswitch.enum","promiseDone","react","react-compiler-runtime","useMWEBBackupState"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;function a(a){var b=d("react-compiler-runtime").c(8),e=a.thread;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a={entrypoint:c("MWEBEntrypointsKillswitch.enum").MEDIA_GALLERY_RESTORE},b[0]=a):a=b[0];var f=c("useMWEBBackupState")(a);b[1]===Symbol["for"]("react.memo_cache_sentinel")?(a=d("MAWMediaRestoreEBRange").getMediaRestoreEBRange(),b[1]=a):a=b[1];var g=a,h;b[2]!==f||b[3]!==e.threadKey?(a=function(){f===3&&(g.resetRange(e.threadKey),c("promiseDone")(d("MAWFetchAndPersistMedia").updateLocalAttachmentsRange(e.threadKey,c("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS,{hasMoreBefore:!0})))},h=[f,g,e.threadKey],b[2]=f,b[3]=e.threadKey,b[4]=a,b[5]=h):(a=b[4],h=b[5]);i(a,h);b[6]!==f?(a={backupState:f},b[6]=f,b[7]=a):a=b[7];return a}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("getVendorPrefixedName",["invariant","ExecutionEnvironment","UserAgent","camelize"],(function(a,b,c,d,e,f,g,h){var i,j={},k=["Webkit","ms","Moz","O"],l=new RegExp("^("+k.join("|")+")"),m=(i||(i=c("ExecutionEnvironment"))).canUseDOM?document.createElement("div").style:{};function n(a){for(var b=0;b<k.length;b++){var c=k[b]+a;if(c in m)return c}return null}function o(a){switch(a){case"lineClamp":return c("UserAgent").isEngine_DEPRECATED_DANGEROUS("WebKit >= 315.14.2")||c("UserAgent").isEngine("Blink")?"WebkitLineClamp":null;default:return null}}function a(a){var b=c("camelize")(a);if(j[b]===void 0){var d=b.charAt(0).toUpperCase()+b.slice(1);l.test(d)&&h(0,957,a);(i||(i=c("ExecutionEnvironment"))).canUseDOM?j[b]=b in m?b:n(d):j[b]=o(b)}return j[b]}g["default"]=a}),98);
__d("BrowserSupportCore",["getVendorPrefixedName"],(function(a,b,c,d,e,f){"use strict";a={hasCSSAnimations:function(){return!!b("getVendorPrefixedName")("animationName")},hasCSSTransforms:function(){return!!b("getVendorPrefixedName")("transform")},hasCSS3DTransforms:function(){return!!b("getVendorPrefixedName")("perspective")},hasCSSTransitions:function(){return!!b("getVendorPrefixedName")("transition")}};c=a;f["default"]=c}),66);
__d("BrowserSupport",["BrowserSupportCore","ExecutionEnvironment","UserAgent_DEPRECATED","getVendorPrefixedName","memoize"],(function(a,b,c,d,e,f,g){var h,i,j,k=null;function l(){if((j||(j=c("ExecutionEnvironment"))).canUseDOM){k||(k=document.createElement("div"));return k}return null}b=function(a){return c("memoize")(function(){var b=l();return!b?!1:a(b)})};e=b(function(a){a.style.cssText="position:-moz-sticky;position:-webkit-sticky;position:-o-sticky;position:-ms-sticky;position:sticky;";return/sticky/.test(a.style.position)});f=b(function(a){return"scrollSnapType"in a.style||"webkitScrollSnapType"in a.style||"msScrollSnapType"in a.style});var m=b(function(a){return"scrollBehavior"in a.style});b=b(function(a){if(!("pointerEvents"in a.style))return!1;a.style.cssText="pointer-events:auto";return a.style.pointerEvents==="auto"});var n=(h=c("memoize"))(function(){return!(d("UserAgent_DEPRECATED").webkit()&&!d("UserAgent_DEPRECATED").chrome()&&d("UserAgent_DEPRECATED").windows())&&"FileList"in window&&"FormData"in window}),o=h(function(){return!!a.blob}),p=h(function(){return(j||(j=c("ExecutionEnvironment"))).canUseDOM&&document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","foreignObject").toString().includes("SVGForeignObject")}),q=h(function(){return!!window.MutationObserver});h=h(function(){var a={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd"},b=c("getVendorPrefixedName")("transition");return a[b]||null});var r=function(){return!!window.CanvasRenderingContext2D};g.hasCSSAnimations=(i=c("BrowserSupportCore")).hasCSSAnimations;g.hasCSSTransforms=i.hasCSSTransforms;g.hasCSS3DTransforms=i.hasCSS3DTransforms;g.hasCSSTransitions=i.hasCSSTransitions;g.hasPositionSticky=e;g.hasScrollSnapPoints=f;g.hasScrollBehavior=m;g.hasPointerEvents=b;g.hasFileAPI=n;g.hasBlobFactory=o;g.hasSVGForeignObject=p;g.hasMutationObserver=q;g.getTransitionEndEvent=h;g.hasCanvasRenderingContext2D=r}),98);
__d("DOMControl",["$","DataStore"],(function(a,b,c,d,e,f){a=function(){"use strict";function a(a){this.root=b("$").fromIDOrElement(a),this.updating=!1,b("DataStore").set(a,"DOMControl",this)}var c=a.prototype;c.getRoot=function(){return this.root};c.beginUpdate=function(){if(this.updating)return!1;this.updating=!0;return!0};c.endUpdate=function(){this.updating=!1};c.update=function(a){if(!this.beginUpdate())return this;this.onupdate(a);this.endUpdate()};c.onupdate=function(a){};a.getInstance=function(a){return b("DataStore").get(a,"DOMControl")};return a}();e.exports=a}),null);
__d("Input",["CSS","DOMControl","DOMQuery"],(function(a,b,c,d,e,f,g){function h(a){return!/\S/.test(a||"")}function i(a){return h(a.value)}function a(a){return i(a)?"":a.value}function b(a){return a.value}function e(a,b){a.value=b||"";b=c("DOMControl").getInstance(a);b&&b.resetHeight&&b.resetHeight()}function f(a,b){b||(b=""),a.setAttribute("aria-label",b),a.setAttribute("placeholder",b)}function j(a){a.value="",a.style.height=""}function k(a,b){d("CSS").conditionClass(a,"enter_submit",b)}function l(a){return d("CSS").hasClass(a,"enter_submit")}function m(a,b){b>0?a.setAttribute("maxlength",b.toString()):a.removeAttribute("maxlength")}g.isWhiteSpaceOnly=h;g.isEmpty=i;g.getValue=a;g.getValueRaw=b;g.setValue=e;g.setPlaceholder=f;g.reset=j;g.setSubmitOnEnter=k;g.getSubmitOnEnter=l;g.setMaxLength=m}),98);
__d("normalizeBoundingClientRect",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){a=a.ownerDocument.documentElement;var c=a?a.clientLeft:0;a=a?a.clientTop:0;var d=Math.round(b.left)-c;c=Math.round(b.right)-c;var e=Math.round(b.top)-a;b=Math.round(b.bottom)-a;return{left:d,right:c,top:e,bottom:b,width:c-d,height:b-e}}f["default"]=a}),66);
__d("getElementRect",["containsNode","normalizeBoundingClientRect"],(function(a,b,c,d,e,f,g){function a(a){var b,d=a==null||(b=a.ownerDocument)==null?void 0:b.documentElement;return!a||!("getBoundingClientRect"in a)||!c("containsNode")(d,a)?{left:0,right:0,top:0,bottom:0,width:0,height:0}:c("normalizeBoundingClientRect")(a,a.getBoundingClientRect())}g["default"]=a}),98);
__d("getElementPosition",["getElementRect"],(function(a,b,c,d,e,f,g){function a(a){a=c("getElementRect")(a);return{x:a.left,y:a.top,width:a.right-a.left,height:a.bottom-a.top}}g["default"]=a}),98);
__d("Form",["DOM","DOMQuery","DTSG","DTSGUtils","DataStore","FBLogger","Input","LSD","PHPQuerySerializer","Random","SprinkleConfig","URI","getElementPosition","isFacebookURI","isNode"],(function(a,b,c,d,e,f,g){var h,i,j="FileList"in window,k="FormData"in window;function l(a){var b={};(h||(h=c("PHPQuerySerializer"))).serialize(a).split("&").forEach(function(a){if(a){a=/^([^=]*)(?:=(.*))?$/.exec(a);var d=(i||(i=c("URI"))).decodeComponent(a[1]),e=a[2]!==void 0;e=e?(i||(i=c("URI"))).decodeComponent(a[2]):null;b[d]=e}});return b}var m={getInputs:function(a){a===void 0&&(a=document);return[].concat(d("DOMQuery").scry(a,"input"),d("DOMQuery").scry(a,"select"),d("DOMQuery").scry(a,"textarea"),d("DOMQuery").scry(a,"button"))},getInputsByName:function(a){var b={};m.getInputs(a).forEach(function(a){var c=b[a.name];b[a.name]=c===void 0?a:[a].concat(c)});return b},getSelectValue:function(a){return a.options[a.selectedIndex].value},setSelectValue:function(a,b){for(var c=0;c<a.options.length;++c)if(a.options[c].value===b){a.selectedIndex=c;break}},getRadioValue:function(a){for(var b=0;b<a.length;b++)if(a[b].checked)return a[b].value;return null},getElements:function(a){return a.tagName==="FORM"&&a.elements!==a?Array.from(a.elements):m.getInputs(a)},getAttribute:function(a,b){return(a.getAttributeNode(b)||{}).value||null},setDisabled:function(a,b){m.getElements(a).forEach(function(a){if(a.disabled!==void 0){var d=c("DataStore").get(a,"origDisabledState");b?(d===void 0&&c("DataStore").set(a,"origDisabledState",a.disabled),a.disabled=b):d===!1&&(a.disabled=!1)}})},forEachValue:function(a,b,c){m.getElements(a).forEach(function(a){if(!a.name||a.disabled)return;if(a.type==="submit")return;if(a.type==="reset"||a.type==="button"||a.type==="image")return;if((a.type==="radio"||a.type==="checkbox")&&!a.checked)return;if(a.nodeName==="SELECT"){for(var b=0,e=a.options.length;b<e;b++){var f=a.options[b];f.selected&&c("select",a.name,f.value)}return}if(a.type==="file"){if(j){f=a.files;for(b=0;b<f.length;b++)c("file",a.name,f.item(b))}return}c(a.type,a.name,d("Input").getValue(a))}),b&&b.name&&b.type==="submit"&&d("DOMQuery").contains(a,b)&&d("DOMQuery").isNodeOfType(b,["input","button"])&&c("submit",b.name,b.value)},createFormData:function(a,b){if(!k)return null;var d=new FormData();if(a)if(c("isNode")(a))m.forEachValue(a,b,function(a,b,c){d.append(b,c)});else{b=l(a);for(a in b)b[a]==null?d.append(a,""):d.append(a,b[a])}return d},serialize:function(a,b){var c={};m.forEachValue(a,b,function(a,b,d){if(a==="file")return;m._serializeHelper(c,b,d)});return m._serializeFix(c)},_serializeHelper:function(a,b,c){var d=Object.prototype.hasOwnProperty,e=/([^\]]+)\[([^\]]*)\](.*)/.exec(b);if(e){if(!a[e[1]]||!d.call(a,e[1])){a[e[1]]=d={};if(a[e[1]]!==d)return}d=0;if(e[2]==="")while(a[e[1]][d]!==void 0)d++;else d=e[2];e[3]===""?a[e[1]][d]=c:m._serializeHelper(a[e[1]],d.concat(e[3]),c)}else a[b]=c},_serializeFix:function(a){for(var b in a)a[b]instanceof Object&&(a[b]=m._serializeFix(a[b]));b=Object.keys(a);if(b.length===0||b.some(isNaN))return a;b.sort(function(a,b){return a-b});var c=0,d=b.every(function(a){return+a===c++});return d?b.map(function(b){return a[b]}):a},post:function(a,b,e,f){f===void 0&&(f=!0);a=new(i||(i=c("URI")))(a);var g=document.createElement("form");g.action=a.toString();g.method="POST";g.style.display="none";var h=!c("isFacebookURI")(a);if(e){if(h){g.rel="noreferrer";if(e==="_blank"){e=btoa(c("Random").uint32());var j=window.open("about:blank",e);j!==void 0&&(j.opener=null)}}g.target=e}if(f&&(!h&&a.getSubdomain()!=="apps")){j=d("DTSG").getToken();j&&(b.fb_dtsg=j,c("SprinkleConfig").param_name&&(b[c("SprinkleConfig").param_name]=c("DTSGUtils").getNumericValue(j)));c("LSD").token&&(b.lsd=c("LSD").token,c("SprinkleConfig").param_name&&!j&&(b[c("SprinkleConfig").param_name]=c("DTSGUtils").getNumericValue(c("LSD").token)))}m.createHiddenInputs(b,g);d("DOMQuery").getRootElement().appendChild(g);g.submit();return!1},post_UNSAFE_LET_ANYONE_IMPERSONATE_THE_USER_FOR_THESE_WRITES:function(a,b,c){m.post(a,b,c)},createHiddenInputs:function(a,b,d,e){e===void 0&&(e=!1);d=d||{};a=l(a);for(var f in a){if(a[f]===null)continue;if(d[f]&&e)d[f].value=a[f];else{var g=c("DOM").create("input",{type:"hidden",name:f,value:a[f]});d[f]=g;b.appendChild(g)}}return d},getFirstElement:function(a,b){b===void 0&&(b=['input[type="text"]',"textarea",'input[type="password"]','input[type="button"]','input[type="submit"]']);var e=[];for(var f=0;f<b.length;f++){e=d("DOMQuery").scry(a,b[f]);for(var g=0;g<e.length;g++){var h=e[g];try{var i=c("getElementPosition")(h);if(i.y>0&&i.x>0)return h}catch(a){}}}return null},focusFirst:function(a){a=m.getFirstElement(a);if(a){a.focus();return!0}return!1}};f.exports=m}),34);
__d("AsyncUploadBase",["ArbiterMixin","AsyncRequest","AsyncResponse","BrowserSupport","Form","forEachObject","mixin","removeFromArray"],(function(a,b,c,d,e,f,g){a=function(a){function b(b){var c;c=a.call(this)||this;c._allowCrossOrigin=!1;c._allowCrossPageTransition=!1;c._customHeader={};c._inFlight=!1;c._limit=10;c._option={};c._preventDefaultErrorHandler=!1;c._suspended=!1;b&&c.setURI(b);c.setNetworkErrorRetryLimit(0);return c}babelHelpers.inheritsLoose(b,a);b.parseFiles=function(a){var b={};c("forEachObject")(a,function(a,c){if(Array.isArray(a))b[c]=a;else{b[c]=[];if(a instanceof window.FileList)for(var d=0;d<a.length;d++)b[c].push(a.item(d));else(a instanceof window.File||a instanceof window.Blob)&&b[c].push(a)}});return b};var e=b.prototype;e.setAllowCrossOrigin=function(a){this._allowCrossOrigin=!!a;return this};e.setAllowCrossPageTransition=function(a){this._allowCrossPageTransition=!!a;return this};e.setCustomHttpHeader=function(a,b){this._customHeader[a]=b;return this};e.setData=function(a){this._data=a;return this};e.setOption=function(a,b){this._option[a]=b;return this};e.setPreventDefaultErrorHandler=function(a){this._preventDefaultErrorHandler=a;return this};e.setLimit=function(a){this._limit=a;return this};e.setNetworkErrorRetryLimit=function(a){this._retryLimit=a;return this};e.setPreprocessHandler=function(a){this._preprocessHandler=a;return this};e.setRelativeTo=function(a){this._relativeTo=a;return this};e.setStatusElement=function(a){this._statusElement=a;return this};e.setURI=function(a){this._uri=a;return this};e.suspend=function(){this._suspended=!0;return this};e.resume=function(){this._suspended=!1;this._processQueue();return this};e.isUploading=function(){return this._inFlight};e._createFileUpload=function(a,b,c){return new h(a,b,c)};e._processQueue=function(){if(this._suspended)return;while(this._pending.length<this._limit){if(!this._waiting.length)break;var a=this._waiting.shift(),b=this._preprocessHandler;b?b(a,this._processUpload.bind(this)):this._processUpload(a);this._pending.push(a)}};e._processUpload=function(a){var b=d("Form").createFormData(a.getData()||this._data);if(a.getFile()){b.append(a.getName(),a.getFile());var e=a.getFile().uploadID;e&&b.append("upload_id",e);a.getAdditionalData().forEach(function(a,c){return b.append(c,a)})}e=new(c("AsyncRequest"))().setAllowCrossOrigin(this._allowCrossOrigin).setAllowCrossPageTransition(this._allowCrossPageTransition).setURI(this._uri).setRawData(b).setStatusElement(this._statusElement).setHandler(this._success.bind(this,a)).setErrorHandler(this._failure.bind(this,a)).setUploadProgressHandler(this._progress.bind(this,a)).setInitialHandler(this._initial.bind(this,a));for(var f in this._option)e.setOption(f,this._option[f]);for(f in this._customHeader)e.setRequestHeader(f,this._customHeader[f]);this._relativeTo&&e.setRelativeTo(this._relativeTo);e.send();a.setAsyncRequest(e);this._inFlight=!0;a.getRetryCount()||this.inform("start",a)};e._abort=function(a){this._pending.indexOf(a)!==-1&&(c("removeFromArray")(this._pending,a),this._processQueue()),c("removeFromArray")(this._waiting,a),a.abort()};e._initial=function(a){if(a.isAborted())return;this.inform("initial",a)};e._success=function(a,b){if(a.isAborted()){this.inform("success_after_abort",b);return}this._complete(a);this.inform("success",a.handleSuccess(b));this._processQueue()};e._retryUpload=function(a){a.increaseRetryCount(),this._processUpload(a)};e._failure=function(a,b){if(a.isAborted())return;if(b.error===1004&&a.getRetryCount()<(this._retryLimit||0))return this._retryUpload(a);this._complete(a);this.inform("failure",a.handleFailure(b))!==!1&&(this._preventDefaultErrorHandler||c("AsyncResponse").defaultErrorHandler(b));this._processQueue()};e._progress=function(a,b){if(a.isAborted())return;this.inform("progress",a.handleProgress(b))};e._complete=function(a){c("removeFromArray")(this._pending,a),this._pending.length||(this._inFlight=!1)};b.isSupported=function(){return d("BrowserSupport").hasFileAPI()};return b}(c("mixin")(c("ArbiterMixin")));var h=function(){function a(a,b,c){this._additionalData=new Map(),this._success=null,this._response=null,this._progressEvent=null,this._request=null,this._numRetries=0,this._aborted=!1,this._name=a,this._file=b,this._data=c}var b=a.prototype;b.getName=function(){return this._name};b.getFile=function(){return this._file};b.setFile=function(a){this._file=a};b.getData=function(){return this._data};b.getAdditionalData=function(){return this._additionalData};b.isComplete=function(){return this._success!==null};b.isSuccess=function(){return this._success===!0};b.getResponse=function(){return this._response};b.getProgressEvent=function(){return this._progressEvent};b.setAsyncRequest=function(a){this._request=a;return this};b.increaseRetryCount=function(){this._numRetries++;return this};b.getRetryCount=function(){return this._numRetries};b.isWaiting=function(){return!this._request};b.isAborted=function(){return this._aborted};b.abort=function(){this._request=null,this._aborted=!0};b.handleSuccess=function(a){this._success=!0;this._response=a;this._progressEvent=null;return this};b.handleFailure=function(a){this._success=!1;this._response=a;this._progressEvent=null;return this};b.handleProgress=function(a){this._progressEvent=a;return this};return a}();g["default"]=a}),98);
__d("AsyncUploadRequest",["AsyncUploadBase"],(function(a,b,c,d,e,f,g){a=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b._files=null,b._uploads=[],b._fileLessUpload=null,babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);var d=b.prototype;d.setFiles=function(a){this._files=c("AsyncUploadBase").parseFiles(a);return this};d.setAlwaysReturnResponse=function(a){this._shouldAlwaysReturnResponse=a};d.abort=function(){var a=this;this._uploads.forEach(function(b){return a._abort(b)})};d.send=function(){var a=this;if(this._inFlight)return;this._inFlight=!0;this._uploads=[];for(var b in this._files)this._files[b].forEach(function(c){a._uploads.push(a._createFileUpload(b,c))});this._waiting=this._uploads.slice(0);this._pending=[];this._uploads.length?this._processQueue():(this._fileLessUpload=this._createFileUpload(null,null),this._processUpload(this._fileLessUpload))};d._processQueue=function(){a.prototype._processQueue.call(this);if(!this._pending.length&&!this._waiting.length){var b=this._uploads;b=this._shouldAlwaysReturnResponse?this._fileLessUpload!=null?{response:this._fileLessUpload.getResponse(),uploads:b}:{response:b[0].getResponse(),uploads:b}:b;this.inform("complete",b)}};b.isSupported=function(){return c("AsyncUploadBase").isSupported()};return b}(c("AsyncUploadBase"));g["default"]=a}),98);
__d("BehaviorsMixin",[],(function(a,b,c,d,e,f){var g=function(){function a(a){this.$1=a,this.$2=!1}var b=a.prototype;b.enable=function(){this.$2||(this.$2=!0,this.$1.enable())};b.disable=function(){this.$2&&(this.$2=!1,this.$1.disable())};return a}(),h=1;function i(a){a.__BEHAVIOR_ID||(a.__BEHAVIOR_ID=h++);return a.__BEHAVIOR_ID}a={enableBehavior:function(a){this._behaviors||(this._behaviors={});var b=i(a);this._behaviors[b]||(this._behaviors[b]=new g(new a(this)));this._behaviors[b].enable();return this},disableBehavior:function(a){if(this._behaviors){a=i(a);this._behaviors[a]&&this._behaviors[a].disable()}return this},enableBehaviors:function(a){a.forEach(this.enableBehavior,this);return this},destroyBehaviors:function(){if(this._behaviors){for(var a in this._behaviors)this._behaviors[a].disable();this._behaviors={}}},hasBehavior:function(a){return this._behaviors&&i(a)in this._behaviors}};b=a;f["default"]=b}),66);
__d("ChatGeminiDisplayContextProvider.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;var j=c.useContext;c.useMemo;var k=i.createContext({displaySurface:"inbox"});function a(a){var b=d("react-compiler-runtime").c(6),c=a.children,e=a.displaySurface;a=a.sideChatMainMessage;var f;b[0]!==e||b[1]!==a?(f={displaySurface:e,sideChatMainMessage:a},b[0]=e,b[1]=a,b[2]=f):f=b[2];e=f;a=e;b[3]!==c||b[4]!==a?(f=i.jsx(k.Provider,{value:a,children:c}),b[3]=c,b[4]=a,b[5]=f):f=b[5];return f}function b(){return j(k)}g.ChatGeminiDisplayContextProvider=a;g.useChatGeminiDisplayContext=b}),98);
__d("DeletionType.react",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({Global:0,Local:1});c=a;f["default"]=c}),66);
__d("FDSDots3HorizontalFilled16Icon",["cr:14853"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:14853")}),98);
__d("shield",[],(function(a,b,c,d,e,f){function a(a,b){for(var c=arguments.length,d=new Array(c>2?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];if(typeof a!=="function")throw new TypeError("shield expects a function as the first argument");return function(){return a.apply(b,d)}}f["default"]=a}),66);
__d("FileForm",["ArbiterMixin","AsyncRequest","AsyncResponse","AsyncUploadRequest","BehaviorsMixin","DOMQuery","DataStore","Event","FBLogger","Form","Parent","isElementNode","mixin","setTimeout","shield"],(function(a,b,c,d,e,f,g){function h(a){var b={};a=d("DOMQuery").scry(a,'input[type="file"]');a.forEach(function(a){b[a.name]=a.files});return b}function i(a){a=d("DOMQuery").scry(a,'input[type="file"]');a.forEach(function(a){a.files=null})}a=function(a){function b(b,e,f){var g;g=a.call(this)||this;g._allowCrossOrigin=!1;g._allowCrossPageTransition=!1;g._uploadInParallel=!1;g._handleSubmit=function(a){if(a.isDefaultPrevented()||a.getTarget()!==g._form)return;if(g.inform("submit")===!1){a.prevent();return}g.submit(a)};g._click=function(a){a=a.getTarget();while(c("isElementNode")(a)){if(a.type==="submit"){g._clickTarget=a;c("setTimeout")(g._unclick,0);break}a=a.parentNode}};g._unclick=function(){g._clickTarget=null};g.initial=function(a){return g.inform("initial",{upload:a})};if(b.getAttribute("rel")==="async")throw c("FBLogger")("FileForm","primer-only").mustfixThrow("FileForm cannot be used with Primer forms.");if((b.getAttribute("method")||"").toUpperCase()!=="POST")throw c("FBLogger")("FileForm","post-only").mustfixThrow("FileForm must be used with POST forms.");g._form=b;g._previousEncoding=g._form.enctype;g._form.enctype=g._form.encoding="multipart/form-data";g._files=null;g._customHeader={};e&&g.enableBehaviors(e);g._options=f||{};g.setAllowCrossOrigin(g._options.allowCrossOrigin);g.setAllowCrossPageTransition(g._options.allowCrossPageTransition);g.setUploadInParallel(g._options.uploadInParallel);g.setConcurrentLimit(g._options.concurrentLimit);g.setPreprocessHandler(g._options.preprocessHandler);g.setNetworkErrorRetryLimit(g._options.networkErrorRetryLimit);g._listeners=[c("Event").listen(document.documentElement,"submit",g._handleSubmit),c("Event").listen(g._form,"click",g._click)];d("DataStore").set(g._form,"FileForm",g);return g}babelHelpers.inheritsLoose(b,a);var e=b.prototype;e.getRoot=function(){return this._form};e.setAllowCrossOrigin=function(a){this._allowCrossOrigin=!!a;return this};e.setAllowCrossPageTransition=function(a){this._allowCrossPageTransition=!!a;return this};e.setUploadInParallel=function(a){this._uploadInParallel=!!a;return this};e.setConcurrentLimit=function(a){this._concurrentLimit=a;return this};e.setCustomHttpHeader=function(a,b){this._customHeader[a]=b;return this};e.setPreprocessHandler=function(a){this._preprocessHandler=a;return this};e.setNetworkErrorRetryLimit=function(a){this._retryLimit=a;return this};e.setFiles=function(a){this._files=a;return this};e.submit=function(a){var b=this,e;if(this._uploadInParallel&&c("AsyncUploadRequest").isSupported()){e=new(c("AsyncUploadRequest"))().setPreprocessHandler(this._preprocessHandler).setData(d("Form").serialize(this._form,this._clickTarget)).setNetworkErrorRetryLimit(this._retryLimit);for(var f in this._customHeader)e.setCustomHttpHeader(f,this._customHeader[f]);this._concurrentLimit&&e.setLimit(this._concurrentLimit);this._files?e.setFiles(this._files):e.setFiles(h(this._form));var g=[e.subscribe("progress",function(a,c){b.progress(c,c.getProgressEvent())}),e.subscribe("initial",function(a,c){b.initial(c)}),e.subscribe("success",function(a,c){b.success(c,c.getResponse())}),e.subscribe("start",function(a,c){b.inform("start",{upload:c})}),e.subscribe("failure",function(a,c){b.failure(c,c.getResponse());return!1}),e.subscribe("complete",function(){while(g.length)g.pop().unsubscribe()})]}else{var i;f=this._files;if(f){i=d("Form").createFormData(d("Form").serialize(this._form,this._clickTarget));var j=c("AsyncUploadRequest").parseFiles(f);f=function(a){var b=j[a];b.length===1?i.append(a,b[0]):(a+="[]",b.forEach(function(b){i.append(a,b)}))};for(var k in j)f(k)}else i=d("Form").createFormData(this._form,this._clickTarget);e=new(c("AsyncRequest"))().setRawData(i).setHandler(function(a){return b.success(null,a)}).setErrorHandler(function(a){return b.failure(null,a)}).setUploadProgressHandler(function(a){return b.progress(null,a)}).setInitialHandler(c("shield")(this.initial,this,null));this.inform("start",{upload:null})}e.setAllowCrossOrigin(this._allowCrossOrigin).setAllowCrossPageTransition(this._allowCrossPageTransition).setRelativeTo(this._form).setStatusElement(this._getStatusElement()).setURI(this._form.action).send();this._request=e;a&&a.prevent()};e.success=function(a,b){b={response:b,upload:a};this.inform("success",b)!==!1&&c("Event").fire(this._form,"success",b);this._cleanup()};e.failure=function(a,b){a={response:b,upload:a};this.inform("failure",a)!==!1&&(c("Event").fire(this._form,"error",a)!==!1&&c("AsyncResponse").defaultErrorHandler(b));this._cleanup()};e.progress=function(a,b){this.inform("progress",{event:b,upload:a})};e.abort=function(){this._request&&(this._request.abort(),this._cleanup())};e.clear=function(){i(this._form)};e.destroy=function(){this._cleanup();while(this._listeners&&this._listeners.length)this._listeners.pop().remove();this._listeners=null;this._form.enctype=this._form.encoding=this._previousEncoding;d("DataStore").remove(this._form,"FileForm")};e._cleanup=function(){this._request=null};e._getStatusElement=function(){return d("Parent").byClass(this._form,"stat_elem")||this._form};b.getInstance=function(a){return d("DataStore").get(a,"FileForm")};return b}(c("mixin")(c("ArbiterMixin"),c("BehaviorsMixin")));Object.assign(a,{EVENTS:["start","submit","initial","progress","success","failure"]});g["default"]=a}),98);
__d("FileInputUploader",["ArbiterMixin","DOM","DTSG","FileForm","Form","mixin"],(function(a,b,c,d,e,f){a=function(a){"use strict";function c(b){var c;c=a.call(this)||this;c._inputElem=b;c._data={};return c}babelHelpers.inheritsLoose(c,a);var d=c.prototype;d.setInput=function(a){this._inputElem=a;return this};d.setURI=function(a){this._uri=a;return this};d.setData=function(a){this._data=a;return this};d.setPreprocessHandler=function(a){this._preprocessHandler=a;return this};d.setNetworkErrorRetryLimit=function(a){this._retryLimit=a;return this};d.setFiles=function(a){this._files=a;return this};d.setAllowCrossOrigin=function(a){this._allowCrossOrigin=!!a;return this};d.setAllowCrossPageTransition=function(a){this._allowCrossPageTransition=!!a;return this};d.setUploadInParallel=function(a){this._uploadInParallel=!!a;return this};d.setConcurrentLimit=function(a){this._concurrentLimit=a;return this};d.abort=function(){this._fileForm&&(this._fileForm.abort(),this._destroyFileForm())};d.send=function(){this._createForm();var a=this._inputElem&&!this._inputElem.parentElement;if(!a&&this._inputElem){var c=this._inputElem.cloneNode(!1);b("DOM").replace(this._inputElem,c)}this._inputElem&&b("DOM").appendContent(this._formElem,this._inputElem);b("DOM").appendContent(document.body,this._formElem);this._fileForm.submit();!a&&this._inputElem&&b("DOM").replace(c,this._inputElem);this._removeFormEl()};d._onFileFormEvent=function(a,b){(a==="success"||a==="failure")&&this._destroyFileForm();return this.inform(a,b)};d._createForm=function(){var a;this._destroyFileForm();this._formElem=b("DOM").create("form",{action:this._uri,method:"post"});this._fileForm=new(b("FileForm"))(this._formElem,null,{allowCrossOrigin:!!this._allowCrossOrigin,allowCrossPageTransition:!!this._allowCrossPageTransition,uploadInParallel:!!this._uploadInParallel,concurrentLimit:(a=this._concurrentLimit)!=null?a:0,preprocessHandler:(a=this._preprocessHandler)!=null?a:null,networkErrorRetryLimit:(a=this._retryLimit)!=null?a:0});this._files&&this._fileForm.setFiles(this._files);this._fileForm.subscribe(b("FileForm").EVENTS,this._onFileFormEvent.bind(this));b("Form").createHiddenInputs(babelHelpers["extends"]({fb_dtsg:b("DTSG").getToken()},this._data),this._formElem)};d._removeFormEl=function(){b("DOM").remove(this._formElem),this._formElem=null};d._destroyFileForm=function(){this._fileForm&&(this._fileForm.destroy(),this._fileForm=null)};return c}(b("mixin")(b("ArbiterMixin")));e.exports=a}),null);
__d("ImageExif",["exif-js","vulture"],(function(a,b,c,d,e,f){b("exif-js").enableXmp();function g(a){b("vulture")("jfJj0OxtaQS23dtNAa6Ux_EwezA=");var c=function(c){b("vulture")("8F4iLDRkom8J18_Npp9oMWLeDL0=");return a.charCodeAt(c)&255};this.getByteAt=c;this.getShortAt=function(a,c){b("vulture")("TeU6NItY5ANxAZydB6TwOqiL6bY=");a=this.getSShortAt(a,c);return a>0?a:a+65536};this.getSShortAt=function(a,d){b("vulture")("S4t94uk7tzwYl5k8oJz00fs8vl0=");var e=c(a);a=c(a+1);return d?(e<<8)+a:(a<<8)+e};this.getLongAt=function(a,c){b("vulture")("2Q-5gBtdRhPNNCFecrVNr8DZJMk=");a=this.getSLongAt(a,c);return a>0?a:a+4294967296};this.getSLongAt=function(a,d){b("vulture")("EoPgIRKY39sdRScK6YFgkDLj7Sw=");var e=c(a),f=c(a+1),g=c(a+2);a=c(a+3);return d?(((e<<8)+f<<8)+g<<8)+a:(((a<<8)+g<<8)+f<<8)+e};this.getStringAt=function(c,d){b("vulture")("woG_qxb_3fmLzMCtRNbGb-1tmBw=");return a.substr(c,d)};this.getLength=function(){b("vulture")("5DiADBCRPZk7Ra8zshGxcjYCbzU=");return a.length}}a={readFromFile:function(a,b){var c=this,d=new FileReader();d.addEventListener("load",function(a){a=a.target.result;a=a instanceof ArrayBuffer?c.readFromArrayBuffer(a):c.readFromBinaryString(a);b(a)},!1);window.DataView?d.readAsArrayBuffer(a):d.readAsBinaryString(a)},readFromBinaryString:function(a){b("vulture")("b8G7o959xanJZN7AwUHW_lILvuo=");return b("exif-js").readFromBinaryFile(new g(a))},readFromArrayBuffer:function(a){return b("exif-js").readFromBinaryFile(a)}};e.exports=a}),null);
__d("StringEncoding",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){a=new Uint8Array(a);var c=0,d=[];while(c<a.length){var e=a[c],f=void 0;if(e>>7===0)f=1;else if(e>>5===6)e&=31,f=2;else if(e>>4===14)e&=15,f=3;else if(e>>3===30)e&=7,f=4;else if(e>>2===62)e&=3,f=5;else if(e>>1===126)e&=1,f=6;else throw new Error("Cannot decode as UTF-8 - unrecognised codepoint header");if(c+f>a.length)throw new Error("Cannot decode as UTF-8 - incomplete codepoint");for(var g=1;g<f;g++){var h=a[c+g];if(h>>6!==2)throw new Error("Cannot decode as UTF-8 - unrecognised codepoint subsequent byte");h&=63;e<<=6;e|=h}if(e>1114111)throw new Error("Cannot decode as UTF-8 - JavaScript doesn't support codepoints over 0x10FFFF");if(!e)switch(b){case"error":throw new Error("Cannot decode as UTF-8 - contains a null and we're not allowing them");case"ignore":continue;case"truncate":return String.fromCodePoint.apply(String,d);case"include":break}d.push(e);c+=f}return String.fromCodePoint.apply(String,d)}function g(a){return(a&255)<<8|a>>8}function b(a,b){if(a.byteLength%2!==0)throw new Error("Cannot decode as UTF-16 - data length mod 2 != 0");a=new Uint16Array(a);var c=0,d=[],e=!1;a[0]===65279?++c:a[0]==65534&&(++c,e=!0);while(c<a.length){var f=a[c];e&&(f=g(f));var h=f;if(f>55295&&f<57344){if((f&64512)!==55296)throw new Error("Cannot decode as UTF-16 - incorrect signature for high surrogate");if(c+1>=a.length)throw new Error("Cannot decode as UTF-16 - incomplete codepoint");++c;var i=a[c];e&&(i=g(i));if((i&64512)!==56320)throw new Error("Cannot decode as UTF-16 - incorrect signature for low surrogate");h=((f&1023)<<10|i&1023)+65536}if(!h)switch(b){case"error":throw new Error("Cannot decode as UTF-16 - contains a null and we're not allowing them");case"ignore":continue;case"truncate":return String.fromCodePoint.apply(String,d);case"include":break}d.push(h);++c}return String.fromCodePoint.apply(String,d)}function h(a){return(a&255)<<24|(a&255<<8)<<8|(a&255<<16)>>8|a>>>24}function c(a,b){if(a.byteLength%4!==0)throw new Error("Cannot decode as UTF-32 - data length mod 4 != 0");a=new Uint32Array(a);var c=0,d=[],e=!1;a[0]===65279?++c:a[0]==4294836224&&(++c,e=!0);while(c<a.length){var f=a[c];e&&(f=h(f));if(f&2147483648)throw new Error("Cannot decode as UTF-32 - invalid codepoint");if(f>1114111)throw new Error("Cannot decode as UTF-32 - JavaScript doesn't support codepoints over 0x10FFFF");if(!f)switch(b){case"error":throw new Error("Cannot decode as UTF-32 - contains a null and we're not allowing them");case"ignore":continue;case"truncate":return String.fromCodePoint.apply(String,d);case"include":break}d.push(f);++c}return String.fromCodePoint.apply(String,d)}var i={"utf-8":a,"utf-16":b,"utf-32":c};d=function(){function a(a,b){a?this.$1=a:this.$1=["utf-8","utf-16","utf-32"];b||(b="error");this.$2=b;for(a of this.$1)this.$3(a)}var b=a.prototype;b.getPrecedence=function(){return this.$1};b.decode=function(a){var b=[];for(var c of this.$1){var d=this.$3(c);try{return d(a,this.$2)}catch(a){b.push(a)}}throw new Error(b.join(", "))};b.$3=function(a){var b=i[a];if(!b)throw new Error("Unknown encoding "+a);return b};return a}();f.Decoder=d}),66);
__d("ImageMetadata",["ImageExif","StringEncoding","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";b=function(){function b(a){this.$4="",this.$6=a,this.$7=new Uint8Array(a),this.$8()}var e=b.prototype;e.$8=function(){var a=0;while(a<this.$7.length){a=this.$9(a);if(a===-1)return;var b=this.$7[a+1];b=h[b];if(!b)return;var c=b.length;c===void 0&&(c=this.$7[a+2]*256+this.$7[a+3]);this.$10(a,c,b);if(b.name==="SOS")return;a+=2+c}};e.$10=function(a,b,c){switch(c.name){case"APP1":this.$11(a+4,i)?(this.$1||(this.$1=a,this.$2=b),this.$12(a+4+i.length,b-2-i.length)):this.$11(a+4,j)?(this.$1=a,this.$2=b,this.$13(a+4+j.length,b-2-j.length)):this.$11(a+4,k)&&this.$14(a+4+k.length,b-2-k.length);break;case"SOF0":case"SOF1":case"SOF2":case"SOF3":case"SOF5":case"SOF6":case"SOF7":case"JPG":case"SOF9":case"SOF10":case"SOF11":case"SOF13":case"SOF14":case"SOF15":this.$15(a+4,b-2);break}};e.$15=function(a,b){b=this.$7[a+3]*256+this.$7[a+4];a=this.$7[a+1]*256+this.$7[a+2];b>0&&a>0&&(this.$5={x:b,y:a})};e.$12=function(a,b){a=emptyFunction;try{emptyFunction=c("emptyFunction");var e=d("ImageExif").readFromArrayBuffer(this.$6)||{}}finally{emptyFunction=a}b={};for(a in e){var f=e[a];typeof f==="string"&&(f=f.trim());b[a.trim()]=f}this.$3=b};e.$13=function(a,b){var c=new(d("StringEncoding").Decoder)(null,"truncate");try{c=c.decode(this.$6.slice(a,a+b));this.$4=c}catch(a){return}};e.$14=function(a){};e.$11=function(a,b){var c=this;return b.split("").every(function(b){return c.$7[a++]===b.charCodeAt(0)})};e.$9=function(a){for(a=a;a+1<this.$7.length;++a)if(this.$7[a]===255&&this.$7[a+1]!==0&&this.$7[a+1]!==255)return a;return-1};e.hasAPP1=function(){return Boolean(this.$1)};e.hasExif=function(){return Boolean(this.$3)};e.hasXMP=function(){return Boolean(this.$4)};e.hasSize=function(){return Boolean(this.$5)};e.getAPP1Location=function(){return!this.hasAPP1()?null:this.$1};e.getAPP1Length=function(){return!this.hasAPP1()?null:this.$2};e.getExif=function(){if(!this.$3)throw new Error("Image has no Exif data");return this.$3};e.getXMPString=function(){return this.$4};e.getSize=function(){if(!this.$5)throw new Error("Could not find size data?!");return this.$5};e.getBufferLength=function(){if(!this.$6)throw new Error("Do not find buffer data!");return this.$6.byteLength};b.genMetadataFromBlob=async function(a){return new b(await b.$16(a))};b.$16=function(b){return new Promise(function(c,d){var e=new a.FileReader();e.onabort=d;e.onerror=d;e.onload=c;e.readAsArrayBuffer(b)})};return b}();var h=[];h[216]={name:"SOI",length:0};h[192]={name:"SOF0"};h[193]={name:"SOF1"};h[194]={name:"SOF2"};h[195]={name:"SOF3"};h[197]={name:"SOF5"};h[198]={name:"SOF6"};h[199]={name:"SOF7"};h[200]={name:"JPG"};h[201]={name:"SOF9"};h[202]={name:"SOF10"};h[203]={name:"SOF11"};h[205]={name:"SOF13"};h[206]={name:"SOF14"};h[207]={name:"SOF15"};h[196]={name:"DHT"};h[219]={name:"DQT"};h[221]={name:"DRI",length:2};h[218]={name:"SOS"};h[208]={name:"RST0",length:0};h[209]={name:"RST1",length:0};h[210]={name:"RST2",length:0};h[211]={name:"RST3",length:0};h[212]={name:"RST4",length:0};h[213]={name:"RST5",length:0};h[214]={name:"RST6",length:0};h[215]={name:"RST7",length:0};h[224]={name:"APP0"};h[225]={name:"APP1"};h[226]={name:"APP2"};h[227]={name:"APP3"};h[228]={name:"APP4"};h[229]={name:"APP5"};h[230]={name:"APP6"};h[231]={name:"APP7"};h[232]={name:"APP8"};h[233]={name:"APP9"};h[234]={name:"APP10"};h[235]={name:"APP11"};h[236]={name:"APP12"};h[237]={name:"APP13"};h[238]={name:"APP14"};h[239]={name:"APP15"};h[254]={name:"COM"};h[217]={name:"EOI",length:0};var i="Exif\0\0",j="http://ns.adobe.com/xap/1.0/\0",k="http://ns.adobe.com/xmp/extension/\0";g.default=b}),98);
__d("LSArrayRemoveObjectAt",["I64","LSSynchronousPromise"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c,e){return d("LSSynchronousPromise").makeSynchronousPromise([c.splice((h||(h=d("I64"))).to_int32(e),1)])}g.call=a}),98);
__d("LSCancelTaskByQueueName",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.forEach(b.filter(b.db.table(2).fetch([[[a[0]]],"queueNameTaskId"]),function(c){return c.queueName===a[0]&&c.context===b.i64.to_string(a[1])}),function(a){var d=a.item;return b.sequence([function(a){return c[0]=d.taskDispatchPriority,b.forEach(b.filter(b.db.table(2).fetch([[[d.taskId]]]),function(a){return b.i64.eq(a.taskId,d.taskId)&&a.queueName===d.queueName}),function(a){return a["delete"]()})},function(a){return b.i64.eq(c[0],b.i64.cast([0,1e3]))||b.i64.eq(c[0],b.i64.cast([0,2e3]))?c[1]=b.i64.cast([0,734739218]):c[1]=b.i64.cast([0,734737036])}])})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreCancelTaskByQueueNameStoredProcedure";a.__tables__=["pending_tasks"];e.exports=a}),null);
__d("LSCommunityThreadCreationStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({FAILURE:2,PENDING:0,SUCCESS:1});f["default"]=a}),66);
__d("LSCreateCommunitySubThread",["LSCreateOfflineThreadingID","LSIssueNewTaskAndGetTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSCreateOfflineThreadingID"),d[0]).then(function(a){return a=a,d[1]=a[0],a})},function(e){return d[2]=new c.Map(),d[2].set("client_mutation_id",d[1]),d[2].set("community_id",a[0]),d[2].set("parent_message_id",a[2]),d[2].set("parent_thread_id",a[1]),c.i64.gt(c.i64.cast([0,0]),c.i64.cast([0,0]))?(d[7]=c.i64.of_float(Date.now()),d[3]=c.i64.add(d[7],c.i64.cast([0,0]))):d[3]=c.i64.cast([0,0]),d[4]=d[2].get("parent_thread_id"),d[5]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),["create_community_sub_thread","_",c.i64.to_string(d[4])].join(""),c.i64.cast([0,665]),d[5],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,d[3],c.i64.cast([0,0])).then(function(a){return a=a,d[6]=a[0],a})},function(a){return e[0]=d[6]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxCreateCommunitySubThreadStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSCreateCommunitySubThreadStoredProcedure",["LSCreateCommunitySubThread","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSCreateCommunitySubThread"),e.communityId,e.parentThreadId,e.parentMessageId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSDeleteReaction",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(8).fetch([[[a[0],a[1],a[2]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&c.messageId===a[1]&&b.i64.eq(c.actorId,a[2])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxDeleteReactionStoredProcedure";a.__tables__=["reactions"];e.exports=a}),null);
__d("LSInsertAnonymousTaskContext",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(311).add({taskId:a[0],projectName:a[1]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSAnonymousCredentialsInsertAnonymousTaskContextStoredProcedure";a.__tables__=["anonymous_task_context"];e.exports=a}),null);
__d("LSIssueNewTaskUsingSyncChannel",["LSIssueNewTaskAndGetTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[12]).then(function(a){return a=a,d[0]=a[0],a})},function(b){return c.db.table(306).add({taskId:d[0],syncChannel:a[10],requiresAuthentication:a[11]})},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSCoreIssueNewTaskUsingSyncChannelStoredProcedure";a.__tables__=["lightspeed_task_context"];e.exports=a}),null);
__d("LSDispatchMediaReceiverFetchForWeb",["LSInsertAnonymousTaskContext","LSIssueNewTaskUsingSyncChannel","LSMailboxTaskCompletionApiOnTaskInsertion"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[0].set("message_id",a[1]),d[0].set("receiver_fetch_id",a[2]),d[0].set("should_fetch_accessibility_summary_text",a[3]),d[1]=d[0].get("message_id"),d[4]=["LSMediaReceiverFetchTransportAnonymizedMsgrWebE2EEMediaReceiverFetchSyncAction",".",d[1]].join(""),d[2]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTaskUsingSyncChannel"),d[4],c.i64.cast([0,1018]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,2]),!1,c.i64.cast([0,0])).then(function(a){return a=a,d[3]=a[0],a})},function(a){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskInsertion"),d[3])},function(a){return c.storedProcedure(b("LSInsertAnonymousTaskContext"),d[3],"LS_MediaReceiverFetch")}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMediaReceiverFetchTransportDispatchMediaReceiverFetchForWebStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSDispatchMediaReceiverFetchForWebStoredProcedure",["LSDispatchMediaReceiverFetchForWeb","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSDispatchMediaReceiverFetchForWeb"),e.threadKey,e.messageId,e.receiverFetchId,e.shouldFetchAccessibilitySummaryText);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSGenerateTraceId",["LSRequestId","MetaConfig"],(function(a,b,c,d,e,f,g){"use strict";function a(){if(c("MetaConfig")._("62"))return c("LSRequestId").generate();else return void 0}g["default"]=a}),98);
__d("LSInsertRollCallContribution",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(c){return b.forEach(b.filter(b.db.table(255).fetch([[[a[0],a[1],a[2],a[3]]],"optimistic"]),function(c){return b.i64.eq(c.rollCallContributionId,a[0])&&b.i64.eq(c.rollCallId,a[1])&&c.messageId===a[2]&&b.i64.eq(c.messageTimestampMs,a[3])&&b.i64.lt(c.authorityLevel,a[23])}),function(a){return a["delete"]()})},function(c){return b.db.table(255).add({rollCallContributionId:a[0],rollCallId:a[1],messageId:a[2],messageTimestampMs:a[3],threadKey:a[4],primaryMediaUrl:a[5],primaryMediaUrlFallback:a[6],primaryMediaExpiryMs:a[7],primaryMediaWidth:a[8],primaryMediaHeight:a[9],primaryMediaMimeType:a[10],previewMediaUrl:a[11],previewMediaUrlFallback:a[12],previewMediaExpiryMs:a[13],previewMediaWidth:a[14],previewMediaHeight:a[15],previewMediaMimeType:a[16],authorityLevel:a[23],contributorId:a[17],offlineThreadingId:a[18],blurOverride:a[19],contributionSource:a[20],contributionType:a[21],content:a[22]})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxInsertRollCallContributionStoredProcedure";a.__tables__=["roll_call_contributions_v2"];e.exports=a}),null);
__d("LSUpdateMessageSubThreadKey",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(12).fetch([[[a[0]]],"messageId"]),function(b){var c=b.update;b.item;return c({subthreadKey:a[1]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpdateMessageSubThreadKeyStoredProcedure";a.__tables__=["messages"];e.exports=a}),null);
__d("LSLocalApplyOptimisticCommunityChatSubThread",["LSArrayGetObjectAt","LSCreateOfflineThreadingID","LSGetViewerFBID","LSLocalize","LSUpdateMessageSubThreadKey"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.cast([0,16408]),d[1]=c.i64.cast([0,0]),d[2]=c.i64.cast([0,268437504]),d[3]=c.i64.cast([0,0]),d[4]=c.i64.cast([0,0]),d[5]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSCreateOfflineThreadingID"),d[5]).then(function(a){return a=a,d[6]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,261320435]),void 0).then(function(a){return d[7]=a})},function(e){return c.filter(c.db.table(12).fetch([[[a[2]]],"messageId"]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[2]}).next().then(function(e,f){var g=e.done;e=e.value;return g?d[8]=d[7]:(f=e.item,c.sequence([function(e){return d[23]=f.text,d[23]!==void 0?c.resolve(d[22]=d[23]):c.sequence([function(b){return c.filter(c.db.table(12).fetch([[[a[2]]],"messageId"]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[2]}).next().then(function(b,c){var a=b.done;b=b.value;return a?d[24]=void 0:(c=b.item,d[24]=c.senderId)})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1369731110]),void 0).then(function(a){return d[26]=a})},function(b){return c.i64.neq(d[24],void 0)?c.sequence([function(b){return c.db.table(216).fetch([[[d[24],a[0]]]]).next().then(function(b,c){var a=b.done;b=b.value;return a?d[31]=void 0:(c=b.item,d[31]=c.profileName)})},function(a){return c.filter(c.db.table(7).fetch([[[d[24]]]]),function(a){return c.i64.eq(a.id,d[24])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(b,c){var a=b.done;b=b.value;return a?d[33]=void 0:(c=b.item,d[37]=c.firstName,d[37]!==void 0?d[36]=d[37]:d[36]=c.name,d[33]=d[36])})},function(a){return d[31]!==void 0?d[35]=d[31]:(d[33]!==void 0?d[36]=d[33]:d[36]=d[26],d[35]=d[36]),d[27]=d[35]}]):c.resolve(d[27]=d[26])},function(b){return c.db.table(16).fetch([[[a[1],a[2]]]]).next().then(function(b,c){var a=b.done;b=b.value;return a?d[28]=void 0:(c=b.item,d[28]=c.attachmentType)})},function(a){return c.i64.eq(d[28],c.i64.cast([0,5]))?c.sequence([function(a){return d[31]=c.createArray(),d[33]=(d[31].push(d[27]),d[31]),b("LSLocalize").localizeV2Async(c.i64.cast([0,216075330]),d[31]).then(function(a){return d[32]=a})},function(a){return d[30]=d[32]}]):c.sequence([function(a){return c.i64.eq(d[28],c.i64.cast([0,2]))?c.sequence([function(a){return d[32]=c.createArray(),d[34]=(d[32].push(d[27]),d[32]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3093868587]),d[32]).then(function(a){return d[33]=a})},function(a){return d[31]=d[33]}]):c.sequence([function(a){return c.i64.eq(d[28],c.i64.cast([0,4]))?c.sequence([function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[27]),d[33]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1965569930]),d[33]).then(function(a){return d[34]=a})},function(a){return d[32]=d[34]}]):c.sequence([function(a){return c.i64.eq(d[28],c.i64.cast([0,1]))?c.sequence([function(a){return d[34]=c.createArray(),d[36]=(d[34].push(d[27]),d[34]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3981943156]),d[34]).then(function(a){return d[35]=a})},function(a){return d[33]=d[35]}]):c.sequence([function(a){return c.i64.eq(d[28],c.i64.cast([0,3]))?c.sequence([function(a){return d[35]=c.createArray(),d[37]=(d[35].push(d[27]),d[35]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2071149394]),d[35]).then(function(a){return d[36]=a})},function(a){return d[34]=d[36]}]):c.sequence([function(a){return d[35]=c.createArray(),d[37]=(d[35].push(d[27]),d[35]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2414298738]),d[35]).then(function(a){return d[36]=a})},function(a){return d[34]=d[36]}])},function(a){return d[33]=d[34]}])},function(a){return d[32]=d[33]}])},function(a){return d[31]=d[32]}])},function(a){return d[30]=d[31]}])},function(a){return d[22]=d[30]}])},function(a){return d[8]=d[22]}]))})},function(b){return d[10]=d[8],c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[void 0,void 0],d[11]=c[0],d[12]=c[1],c):(b=a.item,c=[b.themeFbid,b.customEmoji],d[11]=c[0],d[12]=c[1])})},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[14]=a[0],a})},function(a){return c.forEach(c.filter(c.db.table(9).fetch([[[d[6]]]]),function(a){return c.i64.eq(a.threadKey,d[6])&&c.i64.lt(a.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:d[6],mailboxType:c.i64.cast([0,0]),threadType:c.i64.cast([0,26]),clientThreadKey:d[6],folderName:"community",parentThreadKey:a[1],lastActivityTimestampMs:c.i64.cast([0,0]),lastReadWatermarkTimestampMs:c.i64.cast([0,0]),snippetHasEmoji:!1,snippetSenderContactId:d[14],ongoingCallState:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,20]),capabilities:d[0],capabilities2:d[1],capabilities3:d[2],capabilities4:d[3],capabilities5:d[4],threadName:d[10],themeFbid:d[11],customEmoji:d[12]})},function(b){return c.filter(c.db.table(12).fetch([[[a[2]]],"messageId"]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[2]}).next().then(function(a,b){var c=a.done;a=a.value;return c?d[15]=void 0:(b=a.item,d[15]=b.senderId)})},function(a){return d[17]=c.createArray(),c.i64.neq(d[15],void 0)?d[22]=(d[17].push(d[15]),d[17]):0,c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[18]=a[0],a})},function(a){return c.i64.neq(d[15],d[18])?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[22]=a[0],a})},function(a){return d[23]=(d[17].push(d[22]),d[17])}]):c.resolve()},function(a){return d[19]=c.i64.of_int32(d[17].length),c.i64.gt(d[19],c.i64.cast([0,0]))?c.loopAsync(d[19],function(a){return d[22]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[17],d[22]).then(function(a){return a=a,d[23]=a[0],d[24]=a[1],a})},function(a){return c.forEach(c.filter(c.db.table(14).fetch([[[d[6],d[23]]]]),function(a){return c.i64.eq(a.threadKey,d[6])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(a.contactId,d[23])&&c.i64.lt(a.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(a){return c.db.table(14).add({threadKey:d[6],contactId:d[23],readWatermarkTimestampMs:c.i64.cast([0,0]),deliveredWatermarkTimestampMs:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,20]),isModerator:!1})}])}):c.resolve()},function(e){return c.storedProcedure(b("LSUpdateMessageSubThreadKey"),a[2],d[6])},function(a){return c.resolve()},function(b){return d[20]=new c.Map(),d[20].set("client_mutation_id",d[6]),d[20].set("community_id",a[0]),d[20].set("parent_thread_id",a[1]),d[20].set("parent_message_id",a[2]),d[21]=c.toJSON(d[20]),c.db.table(312).put({threadKey:d[6],metadata:d[21]})},function(a){return e[0]=d[6]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxLocalApplyOptimisticCommunityChatSubThreadStoredProcedure";a.__tables__=["messages","contextual_profile_v1","contacts","attachments","threads","participants","threads_optimistic_metadata"];e.exports=a}),null);
__d("LSLocalApplyOptimisticRollCallContribution",["LSArrayGetObjectAt","LSGetFirstAvailableAttachmentCTAID","LSGetViewerFBID","LSInsertAttachmentItem","LSInsertRollCallContribution","LSLocalize"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return a[1]!==void 0?c.sequence([function(b){return c.db.table(250).fetch([[[c.i64.from_string(a[1]),a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?(function(a){c.logger(a).mustfix(a)}("[LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure] couldn't find roll call in table roll_calls"),e=["Roll Call",c.i64.cast([0,0])],d[0]=e[0],d[1]=e[1]):(b=a.item,e=[b.rollCallPrompt,b.expiryTimestampSec],d[0]=e[0],d[1]=e[1])})},function(b){return c.islc(c.sortBy(c.filter(c.db.table(255).fetch(),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(b.rollCallId,c.i64.from_string(a[1]))}),[["messageTimestampMs","DESC"]]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var c=a.done;a=a.value;return c?d[3]=void 0:(b=a.item,d[3]=b.messageId)})},function(b){return d[3]!==void 0?c.sequence([function(b){return d[7]=c.createArray(),c.forEach(c.islc(c.sortBy(c.db.table(18).fetch([[[a[0],d[3]]],"fk_attachments"]),[["attachmentIndex","ASC"]]),0,c.i64.to_float(c.i64.cast([0,2]))),function(a){a=a.item;return d[8]=new c.Map(),d[8].set("attachment_index",a.attachmentIndex),d[8].set("preview_url",a.previewUrl),d[8].set("preview_url_expiration_timestamp_ms",a.previewUrlExpirationTimestampMs),d[8].set("preview_url_mime_type",a.previewUrlMimeType),d[8].set("preview_width",a.previewWidth),d[8].set("preview_height",a.previewHeight),d[8].set("default_cta_id",a.defaultCtaId),d[8].set("playable_url",a.playableUrl),d[9]=(d[7].push(d[8]),d[7])})},function(a){return d[5]=d[7]}]):c.resolve((d[7]=c.createArray(),d[5]=d[7]))},function(e){return c.i64.neq(a[6],void 0)?d[6]=a[6]:d[6]=c.i64.cast([0,0]),c.i64.eq(d[6],c.i64.cast([0,0]))?(d[7]=c.i64.of_int32(a[2].length),c.i64.eq(d[7],c.i64.cast([0,1]))?c.sequence([function(e){return a[5]!==void 0?d[8]=c.i64.from_string(a[5]):d[8]=c.i64.cast([0,0]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3989800917]),void 0).then(function(a){return d[9]=a})},function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[2],c.i64.cast([0,0])).then(function(a){return a=a,d[10]=a[0],d[11]=a[1],a})},function(a){return c.storedProcedure(b("LSGetFirstAvailableAttachmentCTAID")).then(function(a){return a=a,d[12]=a[0],a})},function(b){return d[13]=d[10].get("offline_attachment_id"),d[14]=d[10].get("attachment_index"),c.filter(c.db.table(16).fetch([[[a[0],a[3],a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&b.messageId===a[3]&&b.attachmentFbid===a[1]&&c.i64.gt(b.authorityLevel,c.i64.cast([0,20]))}).next().then(function(b){var e=b.done;b.value;return e?c.db.table(16).put({threadKey:a[0],messageId:a[3],attachmentFbid:a[1],timestampMs:a[4],offlineAttachmentId:d[13],attachmentType:c.i64.cast([0,7]),filesize:c.i64.cast([0,0]),attachmentCta1Id:d[12],attachmentIndex:d[14],hasMedia:!1,hasXma:!0,isSharable:!1,xmaLayoutType:c.i64.cast([0,10]),cta1Title:d[9],cta1Type:"xma_disabled_cta",defaultCtaTitle:d[9],defaultCtaType:"xma_disabled_cta",defaultCtaId:d[12],titleText:d[0],authorityLevel:c.i64.cast([0,20]),countdownTimestampMs:c.i64.mul(d[1],c.i64.cast([0,1e3])),maxTitleNumOfLines:c.i64.cast([0,4])}):0})},function(a){return d[15]=d[10].get("preview_url"),d[26]=d[15]==null?"":d[15],d[16]=d[10].get("preview_url_mime_type"),d[27]=d[16]==null?"":d[16],d[17]=d[10].get("preview_height"),d[23]=d[17]==null?c.i64.cast([0,0]):d[17],d[18]=d[10].get("preview_width"),d[22]=d[18]==null?c.i64.cast([0,0]):d[18],d[19]=d[10].get("playable_url"),d[25]=d[19]==null?"":d[19],d[20]=d[10].get("playable_url_mime_type"),c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[21]=a[0],a})},function(e){return c.storedProcedure(b("LSInsertRollCallContribution"),c.i64.cast([0,0]),c.i64.from_string(a[1]),a[3],a[4],a[0],d[25],"",c.i64.cast([0,0]),d[22],d[23],d[20]==null?"":d[20],d[26],"",c.i64.cast([0,0]),d[22],d[23],d[27],d[21],a[3],!1,d[8],a[6],void 0,c.i64.cast([0,20]))},function(b){return c.forEach(c.db.table(250).fetch([[[c.i64.from_string(a[1]),a[0]]]]),function(a){var b=a.update;a.item;return b({isBlurred:!1,viewerHasContributed:!0})})},function(e){return d[24]=d[10].get("attachment_index"),c.storedProcedure(b("LSInsertAttachmentItem"),a[1],d[24],a[0],c.i64.cast([0,0]),a[3],void 0,c.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,d[25],void 0,void 0,void 0,void 0,d[26],d[26],c.i64.cast([0,0]),d[27],d[22],d[23],void 0,d[12],d[9],"xma_disabled_cta",void 0,void 0,void 0,!1,"full",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)},function(e){return d[28]=c.i64.of_int32(d[5].length),c.i64.gt(d[28],c.i64.cast([0,0]))?c.loopAsync(d[28],function(e){return d[29]=e,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[5],d[29]).then(function(a){return a=a,d[30]=a[0],d[31]=a[1],a})},function(e){return d[32]=d[30].get("attachment_index"),d[33]=d[30].get("preview_url"),d[34]=d[30].get("preview_url_expiration_timestamp_ms"),d[35]=d[30].get("preview_url_mime_type"),d[36]=d[30].get("preview_width"),d[37]=d[30].get("preview_height"),d[38]=d[30].get("default_cta_id"),d[39]=d[30].get("playable_url"),c.storedProcedure(b("LSInsertAttachmentItem"),a[1],c.i64.add(d[32],c.i64.cast([0,1])),a[0],c.i64.cast([0,0]),a[3],void 0,c.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,d[39],void 0,void 0,void 0,void 0,d[33],d[33],d[34],d[35],d[36],d[37],void 0,d[38],d[9],"xma_disabled_cta",void 0,void 0,void 0,!1,"full",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)}])}):c.resolve()}]):c.resolve((d[8]=c.i64.of_int32(a[2].length),function(a){c.logger(a).mustfix(a)}(["[LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure] expected only 1 attachment for MEDIA contribution, but found ",c.i64.to_string(d[8])].join(""))))):c.resolve(c.i64.eq(d[6],c.i64.cast([0,1]))?a[7]!==void 0?0:function(a){c.logger(a).mustfix(a)}("[LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure] expected non-null content for TEXT contribution, but found null"):c.i64.eq(d[6],c.i64.cast([0,2]))?function(a){c.logger(a).mustfix(a)}("[LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure] LINK contributions are not yet supported"):0)}]):c.resolve(function(a){c.logger(a).mustfix(a)}("[LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure] param product_fbid is missing"))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure";a.__tables__=["roll_calls","roll_call_contributions_v2","attachment_items","attachments"];e.exports=a}),null);
__d("LSLocalApplyOptimisticSharedAlbumContribution",["LSArrayGetObjectAt","LSArrayRemoveObjectAt","LSCollapseAttachments","LSGetFirstAvailableAttachmentCTAID","LSInsertAttachmentItem","LSLocalize"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2856734260]),void 0).then(function(a){return d[0]=a})},function(a){return c.storedProcedure(b("LSGetFirstAvailableAttachmentCTAID")).then(function(a){return a=a,d[1]=a[0],a})},function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[2],c.i64.cast([0,0])).then(function(a){return a=a,d[2]=a[0],d[3]=a[1],a})},function(e){return d[4]=c.i64.random(),d[5]=c.i64.to_string(d[4]),a[1]!==void 0?c.sequence([function(b){return c.db.table(279).fetch([[[c.i64.from_string(a[1]),a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?(function(a){c.logger(a).mustfix(a)}("[LSMailboxLocalApplyOptimisticSharedAlbumContributionStoredProcedure] couldn't find album in table shared_albums"),d[6]=void 0):(b=a.item,d[6]=b.title)})},function(e){return d[6]!==void 0?c.sequence([function(b){return d[8]=d[2].get("offline_attachment_id"),d[9]=d[2].get("attachment_index"),c.filter(c.db.table(16).fetch([[[a[0],a[3],d[5]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&b.messageId===a[3]&&b.attachmentFbid===d[5]&&c.i64.gt(b.authorityLevel,c.i64.cast([0,20]))}).next().then(function(b){var e=b.done;b.value;return e?c.db.table(16).put({threadKey:a[0],messageId:a[3],attachmentFbid:d[5],timestampMs:a[4],offlineAttachmentId:d[8],attachmentType:c.i64.cast([0,7]),filesize:c.i64.cast([0,0]),attachmentCta1Id:d[1],attachmentIndex:d[9],hasMedia:!1,hasXma:!0,isSharable:!1,xmaLayoutType:c.i64.cast([0,10]),cta1Title:d[0],cta1Type:"xma_disabled_cta",defaultCtaTitle:d[0],defaultCtaType:"xma_shared_album_viewer",defaultCtaId:d[1],titleText:d[6],authorityLevel:c.i64.cast([0,20]),maxTitleNumOfLines:c.i64.cast([0,4]),collapsibleId:c.i64.from_string(a[1])}):0})},function(d){return c.storedProcedure(b("LSCollapseAttachments"),a[0],c.i64.from_string(a[1]))},function(e){return d[10]=c.i64.of_int32(a[2].length),c.i64.gt(d[10],c.i64.cast([0,0]))?c.loopAsync(d[10],function(e){return d[12]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[2],d[12]).then(function(a){return a=a,d[13]=a[0],d[14]=a[1],a})},function(b){return d[15]=d[13].get("preview_url"),d[23]=d[15]==null?"":d[15],d[16]=d[13].get("preview_height"),d[24]=d[16]==null?c.i64.cast([0,0]):d[16],d[17]=d[13].get("preview_width"),d[25]=d[17]==null?c.i64.cast([0,0]):d[17],d[18]=d[13].get("preview_url_mime_type"),d[19]=d[13].get("playable_url"),d[20]=d[13].get("playable_url_mime_type"),d[21]=d[13].get("preview_url_mime_type"),d[22]=d[13].get("offline_attachment_id"),d[22]!==void 0?c.sequence([function(b){return d[27]="",d[28]=c.i64.from_string(d[22]),d[29]=c.i64.from_string(a[1]),d[26]=c.i64.of_float(Date.now()),c.forEach(c.filter(c.db.table(280).fetch([[[d[29],d[28],a[0],d[27]]]]),function(b){return c.i64.eq(b.sharedAlbumId,d[29])&&c.i64.eq(b.sharedAlbumContributionId,d[28])&&c.i64.eq(b.threadKey,a[0])&&b.messageId===d[27]&&c.i64.lt(b.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(280).add({messageId:d[27],sharedAlbumContributionId:d[28],sharedAlbumId:d[29],threadKey:a[0],mediaUrl:d[19]==null?d[23]:d[19],mediaHeight:d[24],mediaWidth:d[25],mediaUrlFallback:"",urlExpiryMs:c.i64.cast([0,0]),creationTimestampMs:d[26],authorityLevel:c.i64.cast([0,20]),previewMediaUrl:d[23],previewMediaHeight:d[24],previewMediaWidth:d[25],previewMediaMimeType:d[18]==null?"":d[18]})}]):c.resolve(function(a){c.logger(a).mustfix(a)}("[LSMailboxLocalApplyOptimisticSharedAlbumContributionStoredProcedure] param $attachment_otid is missing"))}])}):c.resolve()},function(e){return d[11]=c.createArray(),d[12]=(d[11].push(c.i64.cast([0,0])),d[11]),c.forEach(c.islc(c.sortBy(c.db.table(280).fetch([[[c.i64.from_string(a[1])]]]),[["creationTimestampMs","DESC"]]),0,c.i64.to_float(c.i64.cast([0,4]))),function(e){var f=e.item;return c.sequence([function(a){return d[15]=f.previewMediaUrl,c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[11],c.i64.cast([0,0])).then(function(a){return a=a,d[12]=a[0],d[13]=a[1],a})},function(e){return c.i64.eq(c.i64.cast([0,0]),d[12])?d[14]=d[6]:d[14]=void 0,c.storedProcedure(b("LSInsertAttachmentItem"),d[5],d[12],a[0],c.i64.cast([0,0]),a[3],void 0,c.i64.cast([0,0]),void 0,d[14],void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,d[15],d[15],c.i64.cast([0,0]),f.previewMediaMimeType,f.mediaWidth,f.mediaHeight,void 0,d[1],void 0,"xma_shared_album_viewer",void 0,void 0,void 0,!1,"full",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)},function(a){return c.nativeTypeOperation("Array",b("LSArrayRemoveObjectAt"),d[11],c.i64.cast([0,0])).then(function(a){return a=a,d[16]=a[0],a})},function(a){return d[16]=(d[11].push(c.i64.add(d[12],c.i64.cast([0,1]))),d[11])}])})}]):c.resolve()}]):c.resolve(function(a){c.logger(a).mustfix(a)}("[LSMailboxLocalApplyOptimisticSharedAlbumContributionStoredProcedure] param product_fbid is missing"))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxLocalApplyOptimisticSharedAlbumContributionStoredProcedure";a.__tables__=["shared_albums","attachments","shared_album_contributions"];e.exports=a}),null);
__d("LSLocalApplyOptimisticMessageWithAttachmentsV2",["LSArrayGetObjectAt","LSLocalApplyOptimisticMessageV2","LSLocalApplyOptimisticRollCallContribution","LSLocalApplyOptimisticSharedAlbumContribution","LSSetMessageDisplayedContentTypes"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.storedProcedure(b("LSLocalApplyOptimisticMessageV2"),a[0],a[1],a[2],a[3],a[4],a[5],void 0).then(function(a){return a=a,d[0]=a[0],d[1]=a[1],a})},function(e){return d[2]=a[5].get("attachments"),d[3]=a[5].get("product_type"),d[3]==="roll_call"?(d[4]=a[5].get("product_fbid"),d[5]=a[5].get("product_attribution"),d[6]=a[5].get("contribution_type"),c.storedProcedure(b("LSLocalApplyOptimisticRollCallContribution"),a[1],d[4],d[2],d[0],d[1],d[5],d[6],a[3])):d[3]==="shared_albums"?(d[4]=a[5].get("product_fbid"),d[5]=a[5].get("product_attribution"),c.storedProcedure(b("LSLocalApplyOptimisticSharedAlbumContribution"),a[1],d[4],d[2],d[0],d[1],d[5])):(d[4]=c.i64.of_int32(d[2].length),c.i64.gt(d[4],c.i64.cast([0,0]))?c.loopAsync(d[4],function(e){return d[5]=e,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[2],d[5]).then(function(a){return a=a,d[6]=a[0],d[7]=a[1],a})},function(b){return d[8]=d[6].get("attachment_fbid"),d[9]=d[6].get("offline_attachment_id"),d[10]=d[6].get("attachment_type"),d[11]=d[6].get("filename"),d[12]=d[6].get("filesize"),d[13]=d[6].get("attachment_index"),d[14]=d[6].get("has_media"),d[15]=d[6].get("has_xma"),d[16]=d[6].get("playable_url"),d[17]=d[6].get("playable_url_mime_type"),d[18]=d[6].get("playable_duration_ms"),d[19]=d[6].get("preview_url"),d[20]=d[6].get("preview_url_mime_type"),d[21]=d[6].get("mini_preview"),d[22]=d[6].get("preview_width"),d[23]=d[6].get("preview_height"),d[24]=d[6].get("xma_layout_type"),d[25]=d[6].get("xmas_template_type"),d[26]=d[6].get("cta1_title"),d[27]=d[6].get("cta1_type"),d[28]=d[6].get("attachment_cta1_id"),d[29]=d[6].get("cta2_title"),d[30]=d[6].get("cta2_type"),d[31]=d[6].get("attachment_cta2_id"),d[32]=d[6].get("cta3_title"),d[33]=d[6].get("cta3_type"),d[34]=d[6].get("attachment_cta3_id"),d[35]=d[6].get("image_url"),d[36]=d[6].get("action_url"),d[37]=d[6].get("title_text"),d[38]=d[6].get("subtitle_text"),d[39]=d[6].get("description_text"),d[40]=d[6].get("source_text"),d[41]=d[6].get("original_file_hash"),d[42]=d[6].get("sound_bite_client_sound_key"),d[43]=d[6].get("sound_bite_visual"),d[44]=d[6].get("ephemeral_media_state"),d[45]=d[6].get("waveform_data"),d[46]=d[6].get("avatar_audio_message_animated_url"),d[47]=d[6].get("avatar_audio_message_idle_url"),d[48]=d[6].get("avatar_audio_message_animated_b_url"),d[49]=d[6].get("avatar_audio_message_idle_b_url"),d[50]=d[6].get("avatar_audio_message_background_graphics_image_url"),d[51]=d[6].get("avatar_audio_message_pose_id"),d[52]=d[6].get("sampling_frequency_hz"),d[53]=d[6].get("should_autoplay_video"),d[54]=d[6].get("has_xma_favicon"),d[55]=d[6].get("favicon_url"),d[19]!==void 0?d[56]=d[19]:d[56]=d[16],c.filter(c.db.table(16).fetch([[[a[1],d[0],d[8]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&b.messageId===d[0]&&b.attachmentFbid===d[8]&&c.i64.gt(b.authorityLevel,c.i64.cast([0,20]))}).next().then(function(b){var e=b.done;b.value;return e?c.db.table(16).put({threadKey:a[1],messageId:d[0],attachmentFbid:d[8],timestampMs:d[1],offlineAttachmentId:d[9],attachmentType:d[10],filename:d[11],filesize:d[12],attachmentIndex:d[13],hasMedia:d[14],hasXma:d[15],isSharable:!1,playableUrl:d[16],playableUrlMimeType:d[17],playableDurationMs:d[18],previewUrl:d[56],previewUrlMimeType:d[20],miniPreview:d[21],previewWidth:d[22],previewHeight:d[23],xmaLayoutType:d[24],xmasTemplateType:d[25],cta1Title:d[26],cta1Type:d[27],attachmentCta1Id:d[28],cta2Title:d[29],cta2Type:d[30],attachmentCta2Id:d[31],cta3Title:d[32],cta3Type:d[33],attachmentCta3Id:d[34],imageUrl:d[35],actionUrl:d[36],titleText:d[37],subtitleText:d[38],descriptionText:d[39],sourceText:d[40],ephemeralMediaState:d[44],waveformData:d[45],samplingFrequencyHz:d[52],originalFileHash:d[41],authorityLevel:c.i64.cast([0,20]),shouldAutoplayVideo:d[53],hasXmaFavicon:d[54],faviconUrl:d[55]}):0})}])}):c.resolve())},function(e){return d[4]=c.i64.of_int32(d[2].length),c.i64.gt(d[4],c.i64.cast([0,0]))?(d[5]=a[5].get("sticker_id"),c.storedProcedure(b("LSSetMessageDisplayedContentTypes"),a[1],d[0],d[1],a[3],!1,c.i64.neq(d[5],void 0))):c.resolve()},function(a){return a=[d[0],d[1]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure";a.__tables__=["attachments"];e.exports=a}),null);
__d("LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure",["LSLocalApplyOptimisticMessageWithAttachmentsV2","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSLocalApplyOptimisticMessageWithAttachmentsV2"),e.senderId,e.threadKey,e.threadType,e.text,e.snippet,e.extraSendMessageParams);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSLocalCreateOptimisticCommunityChatSubThread",["LSLocalApplyOptimisticCommunityChatSubThread"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.storedProcedure(b("LSLocalApplyOptimisticCommunityChatSubThread"),a[0],a[1],a[2]).then(function(a){return a=a,d[0]=a[0],a})},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxLocalCreateOptimisticCommunityChatSubThreadStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSLocalCreateOptimisticCommunityChatSubThreadStoredProcedure",["LSLocalCreateOptimisticCommunityChatSubThread","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSLocalCreateOptimisticCommunityChatSubThread"),e.communityId,e.parentThreadId,e.parentMessageId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSOptimisticContributeToTextPrompt",["LSLocalApplyOptimisticMessageV2","LSLocalApplyOptimisticRollCallContribution"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=c.createArray(),d[1]=new c.Map(),d[1].set("snippet_has_emoji",void 0),d[1].set("sticker_id",void 0),d[1].set("sticker_alt_text",void 0),d[1].set("hot_emoji_size",void 0),d[1].set("external_attachment_url",void 0),d[1].set("attribution_app_id",void 0),d[1].set("source",c.i64.cast([0,0])),d[1].set("platform_ref",void 0),d[1].set("platform_token",void 0),d[1].set("reply_source_id",void 0),d[1].set("reply_source_type",void 0),d[1].set("reply_source_type_v2",void 0),d[1].set("mention_data",void 0),d[1].set("mark_read",void 0),d[1].set("calculate_denormalizations",void 0),d[1].set("optimistic_attachment_preview",void 0),d[1].set("initiating_app_id",void 0),d[1].set("initiating_source",void 0),d[1].set("power_up_style",c.i64.cast([0,0])),d[1].set("data_trace_id",void 0),d[1].set("attachments",d[0]),d[1].set("should_copy_attachments",!1),d[1].set("magic_words_data",void 0),d[1].set("local_data_id",void 0),d[1].set("reply_type",void 0),d[1].set("dety_params",void 0),d[1].set("product_type","roll_call"),d[1].set("product_fbid",a[2]),d[1].set("product_attribution",a[3]),c.storedProcedure(b("LSLocalApplyOptimisticMessageV2"),a[1],a[0],c.i64.cast([0,18]),a[4],a[4],d[1],void 0).then(function(a){return a=a,d[2]=a[0],d[3]=a[1],a})},function(e){return d[4]=c.createArray(),c.storedProcedure(b("LSLocalApplyOptimisticRollCallContribution"),a[0],a[2],d[4],d[2],d[3],a[3],c.i64.cast([0,1]),a[4])}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticContributeToTextPromptStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSOptimisticContributeToTextPromptStoredProcedure",["LSOptimisticContributeToTextPrompt","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticContributeToTextPrompt"),e.threadKey,e.senderId,e.promptId,e.productAttribution,e.text);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSOptimisticCreateRollCall",["LSCreateOfflineThreadingID","LSGetViewerFBID","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSCreateOfflineThreadingID"),d[0]).then(function(a){return a=a,d[1]=a[0],a})},function(b){return c.forEach(c.filter(c.db.table(250).fetch([[[d[1],a[0]]]]),function(b){return c.i64.eq(b.rollCallId,d[1])&&c.i64.eq(b.threadKey,a[0])&&c.i64.lt(b.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(250).add({rollCallId:d[1],threadKey:a[0],rollCallPrompt:a[1],expiryTimestampSec:c.i64.cast([0,0]),isBlurred:!1,authorityLevel:c.i64.cast([0,20]),offlineThreadingId:d[1],canViewWithoutContributing:!1})},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("prompt",a[1]),d[2].set("offline_threading_id",d[1]),d[2].set("prompt_type",a[2]),c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[3]=a[0],a})},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[4]=!1:(b=a.item,c.sequence([function(a){return c.filter(c.db.table(14).fetch([[[b.threadKey,d[3]]]]),function(a){return c.i64.eq(a.threadKey,b.threadKey)&&c.i64.eq(c.i64.cast([0,0]),b.mailboxType)&&c.i64.eq(a.contactId,d[3])}).next().then(function(e,f){var a=e.done;e=e.value;return a?d[10]=!1:(f=e.item,c.i64.eq(b.threadType,c.i64.cast([0,152]))?(d[13]=f.threadRoles,c.i64.lt(c.i64.cast([0,7]),c.i64.cast([0,0]))||c.i64.gt(c.i64.cast([0,7]),c.i64.cast([0,9]))?d[14]=!1:d[14]=!c.i64.eq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,7]))),d[13]),c.i64.cast([0,0])),d[15]=b.capabilities,d[16]=b.capabilities2,d[17]=b.capabilities3,d[18]=b.capabilities4,d[19]=b.capabilities5,d[21]=c.i64.div(c.i64.cast([0,223]),c.i64.cast([0,64])),d[22]=c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.sub(c.i64.cast([0,223]),c.i64.mul(d[21],c.i64.cast([0,64]))))),c.i64.lt(c.i64.cast([0,223]),c.i64.cast([0,0]))||c.i64.gt(c.i64.cast([0,223]),c.i64.cast([0,289]))?d[20]=!1:(c.i64.eq(d[21],c.i64.cast([0,0]))?d[23]=!c.i64.eq(c.i64.and_(d[22],d[15]),c.i64.cast([0,0])):(c.i64.eq(d[21],c.i64.cast([0,1]))?d[24]=!c.i64.eq(c.i64.and_(d[22],d[16]),c.i64.cast([0,0])):(c.i64.eq(d[21],c.i64.cast([0,2]))?d[25]=!c.i64.eq(c.i64.and_(d[22],d[17]),c.i64.cast([0,0])):(c.i64.eq(d[21],c.i64.cast([0,3]))?d[26]=!c.i64.eq(c.i64.and_(d[22],d[18]),c.i64.cast([0,0])):(c.i64.eq(d[21],c.i64.cast([0,4]))?d[27]=!c.i64.eq(c.i64.and_(d[22],d[19]),c.i64.cast([0,0])):d[27]=!1,d[26]=d[27]),d[25]=d[26]),d[24]=d[25]),d[23]=d[24]),d[20]=d[23]),d[14]===d[20]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting"),c["throw"]("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting")),d[12]=d[14]):d[12]=!1,d[10]=d[12])})},function(a){return d[4]=d[10]}]))})},function(b){return d[4]?d[2].set("perform_action_as_page",!0):0,c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[6]=c.i64.cast([0,1]):(b=a.item,d[11]=b.syncGroup,c.i64.neq(d[11],void 0)?d[10]=d[11]:d[10]=c.i64.cast([0,1]),d[6]=d[10])})},function(a){return d[2].set("sync_group",d[6]),d[8]=d[2].get("thread_key"),d[9]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[8]),c.i64.cast([0,607]),d[9],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return a=[d[1],d[0]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticCreateRollCallStoredProcedure";a.__tables__=["roll_calls","threads","participants"];e.exports=a}),null);
__d("LSOptimisticCreateRollCallStoredProcedure",["LSOptimisticCreateRollCall","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticCreateRollCall"),e.threadKey,e.prompt,e.promptType);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSOptimisticUpsertReaction",["LSCancelTaskByQueueName","LSDeleteReaction","LSIssueNewTask","LSUpsertReaction"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[21]=b.syncGroup,c.i64.neq(d[21],void 0)?d[20]=d[21]:d[20]=c.i64.cast([0,1]),d[0]=d[20])})},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("timestamp_ms",a[1]),d[2].set("message_id",a[2]),d[2].set("actor_id",a[3]),d[2].set("reaction",a[4]),d[2].set("reaction_style",void 0),d[2].set("sync_group",d[0]),d[3]=c.createArray(),d[4]=(d[3].push("reaction"),d[3]),d[5]=d[2].get("message_id"),d[6]=(d[3].push(d[5]),d[3]),d[7]=c.toJSON(d[3]),c.storedProcedure(b("LSCancelTaskByQueueName"),d[7],c.i64.cast([0,29]))},function(e){return a[4]===""?c.sequence([function(d){return c.storedProcedure(b("LSDeleteReaction"),a[0],a[2],a[3])},function(a){return d[8]=void 0}]):c.sequence([function(e){return a[4]==="\u2764\ufe0f"||a[4]==="\u2764\ufe0f"?d[20]="\u2764":d[20]=a[4],c.storedProcedure(b("LSUpsertReaction"),a[0],a[1],a[2],a[3],d[20],c.i64.cast([0,20]),void 0)},function(a){return d[8]=void 0}])},function(b){return void 0?d[9]=!1:d[9]=!0,d[9]?d[10]=void 0:(d[20]=new c.Map(),d[20].set("feature_tags",void 0),d[21]=new c.Map(),d[21].set("logging_metadata",d[20]),d[22]=c.toJSON(d[21]),d[10]=d[22]),c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[11]=c.i64.cast([0,1]):(b=a.item,d[21]=b.syncGroup,c.i64.neq(d[21],void 0)?d[20]=d[21]:d[20]=c.i64.cast([0,1]),d[11]=d[20])})},function(e){return d[13]=new c.Map(),d[13].set("thread_key",a[0]),d[13].set("timestamp_ms",a[1]),d[13].set("message_id",a[2]),d[13].set("actor_id",a[3]),d[13].set("reaction",a[4]),d[13].set("reaction_style",void 0),d[13].set("sync_group",d[11]),d[13].set("send_attribution",a[5]),d[13].set("dataclass_params",d[10]),d[13].set("attachment_fbid",void 0),d[14]=c.createArray(),d[15]=(d[14].push("reaction"),d[14]),d[16]=d[13].get("message_id"),d[17]=(d[14].push(d[16]),d[14]),d[18]=c.toJSON(d[14]),d[19]=c.toJSON(d[13]),c.storedProcedure(b("LSIssueNewTask"),d[18],c.i64.cast([0,29]),d[19],void 0,void 0,a[6]==null?c.i64.cast([0,0]):a[6],c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticUpsertReactionStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSOptimisticUpsertReactionStoredProcedure",["LSOptimisticUpsertReaction","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticUpsertReaction"),e.threadKey,e.timestampMs,e.messageId,e.actorId,e.reaction,e.sendAttribution,e.pluginType);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSUpdateOrInsertReactionV2",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.db.table(226).fetch([[[a[0],a[1],a[2]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?b.db.table(12).fetch([[[a[1]]],"messageId"]).next().then(function(d,e){var c=d.done;d=d.value;return c?0:(e=d.item,b.sequence([function(c){return b.forEach(b.filter(b.db.table(226).fetch([[[a[0],a[1],a[2]]],"optimistic"]),function(c){return b.i64.eq(c.threadKey,a[0])&&c.messageId===a[1]&&b.i64.eq(c.reactionFbid,a[2])&&b.i64.lt(c.authorityLevel,a[5])}),function(a){return a["delete"]()})},function(c){return b.db.table(226).add({messageId:a[1],threadKey:a[0],reactionFbid:a[2],messageTimestamp:e.timestampMs,authorityLevel:a[5],count:a[4],viewerIsReactor:a[6],viewerReactionTimestampMs:a[7],lastUpdatedTimestampMs:a[8]})}]))}):(e=d.item,c[2]=e.lastUpdatedTimestampMs,c[1]=e.authorityLevel,b.i64.eq(a[5],b.i64.cast([0,20]))||b.i64.eq(c[1],b.i64.cast([0,80]))&&b.i64.eq(a[5],b.i64.cast([0,80]))||b.i64.eq(c[1],b.i64.cast([0,20]))&&b.i64.eq(a[5],b.i64.cast([0,80]))&&b.i64.le(b.i64.add(c[2],b.i64.cast([0,2e3])),a[8])||b.i64.eq(c[1],b.i64.cast([0,20]))&&b.i64.eq(a[5],b.i64.cast([0,60]))||b.i64.eq(c[1],b.i64.cast([0,60]))&&b.i64.eq(a[5],b.i64.cast([0,80]))&&b.i64.le(c[2],a[8])?c[3]=!0:c[3]=!1,c[3]?b.db.table(226).put({messageId:a[1],threadKey:a[0],reactionFbid:a[2],messageTimestamp:e.messageTimestamp,reactionLiteral:a[3],count:a[4],authorityLevel:a[5],viewerIsReactor:a[6],viewerReactionTimestampMs:b.i64.cast([0,0]),lastUpdatedTimestampMs:a[8]}):b.resolve())})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxUpdateOrInsertReactionV2StoredProcedure";a.__tables__=["reactions_v2","messages"];e.exports=a}),null);
__d("LSOptimisticUpsertReactionV2",["LSCancelTaskByQueueName","LSDeleteReaction","LSIssueNewTaskWithExtraOperations","LSUpdateOrInsertReactionV2","LSUpsertReaction"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return c.i64.eq(a[8],c.i64.cast([0,2]))?c.sequence([function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[16]=c.i64.cast([0,1]):(b=a.item,d[25]=b.syncGroup,c.i64.neq(d[25],void 0)?d[24]=d[25]:d[24]=c.i64.cast([0,1]),d[16]=d[24])})},function(e){return d[18]=new c.Map(),d[18].set("thread_id",a[1]),d[18].set("message_id",a[2]),d[18].set("message_timestamp",a[3]),d[18].set("actor_id",a[0]),d[18].set("reaction_fbid",a[4]),d[18].set("reaction_style",a[7]),d[18].set("operation",a[8]),d[18].set("viewer_is_reactor",a[6]),d[18].set("current_count",a[5]),d[18].set("reaction_literal",a[9]),d[18].set("sync_group",d[16]),d[19]=c.createArray(),d[20]=(d[19].push("reaction_v2"),d[19]),d[21]=d[18].get("message_id"),d[22]=(d[19].push(d[21]),d[19]),d[23]=c.toJSON(d[19]),c.storedProcedure(b("LSCancelTaskByQueueName"),d[23],c.i64.cast([0,604]))}]):c.resolve()},function(e){return[c.i64.cast([0,2]),c.i64.cast([0,3])].some(function(b){return c.i64.eq(a[8],b)})?d[0]=c.i64.add(a[5],c.i64.cast([-1,4294967295])):d[0]=c.i64.add(a[5],c.i64.cast([0,1])),[c.i64.cast([0,2]),c.i64.cast([0,3])].some(function(b){return c.i64.eq(a[8],b)})?d[1]=!1:d[1]=!0,d[2]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSUpdateOrInsertReactionV2"),a[1],a[2],a[4],a[9],d[0],c.i64.cast([0,20]),d[1],c.i64.cast([0,0]),d[2])},function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[3]=void 0:(b=a.item,d[3]=b.threadType)})},function(e){return c.i64.neq(d[3],c.i64.cast([0,23]))?[c.i64.cast([0,2]),c.i64.cast([0,3])].some(function(b){return c.i64.eq(a[8],b)})?c.i64.eq(a[8],c.i64.cast([0,2]))?c.storedProcedure(b("LSDeleteReaction"),a[1],a[2],a[0]):c.sequence([function(b){return c.filter(c.db.table(8).fetch([[[a[1],a[2],a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[2]&&c.i64.eq(b.actorId,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))}).next().then(function(a,b){var c=a.done;a=a.value;return c?d[16]=void 0:(b=a.item,d[16]=b.reaction)})},function(e){return a[9]!==void 0?(a[9]==="\u2764\ufe0f"||a[9]==="\u2764\ufe0f"?d[18]="\u2764":d[18]=a[9],d[18]===d[16]?c.storedProcedure(b("LSDeleteReaction"),a[1],a[2],a[0]):c.resolve()):c.resolve()}]):a[9]!==void 0?(a[9]==="\u2764\ufe0f"||a[9]==="\u2764\ufe0f"?d[16]="\u2764":d[16]=a[9],d[17]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSUpsertReaction"),a[1],a[3],a[2],a[0],d[16],c.i64.cast([0,20]),d[17])):c.resolve():c.resolve()},function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[5]=c.i64.cast([0,1]):(b=a.item,d[17]=b.syncGroup,c.i64.neq(d[17],void 0)?d[16]=d[17]:d[16]=c.i64.cast([0,1]),d[5]=d[16])})},function(b){return d[7]=new c.Map(),d[7].set("thread_id",a[1]),d[7].set("message_id",a[2]),d[7].set("message_timestamp",a[3]),d[7].set("actor_id",a[0]),d[7].set("reaction_fbid",a[4]),d[7].set("reaction_style",a[7]),d[7].set("current_count",a[5]),d[7].set("viewer_is_reactor",a[6]),d[7].set("operation",a[8]),d[7].set("reaction_literal",a[9]),d[7].set("entry_point",void 0),d[7].set("sync_group",d[5]),c.db.table(9).fetch([[[a[1]]]]).next().then(function(b,e){var f=b.done;b=b.value;return f?d[8]=!1:(e=b.item,c.sequence([function(b){return c.filter(c.db.table(14).fetch([[[e.threadKey,a[0]]]]),function(b){return c.i64.eq(b.threadKey,e.threadKey)&&c.i64.eq(c.i64.cast([0,0]),e.mailboxType)&&c.i64.eq(b.contactId,a[0])}).next().then(function(b,f){var a=b.done;b=b.value;return a?d[16]=!1:(f=b.item,c.i64.eq(e.threadType,c.i64.cast([0,152]))?(d[19]=f.threadRoles,c.i64.lt(c.i64.cast([0,7]),c.i64.cast([0,0]))||c.i64.gt(c.i64.cast([0,7]),c.i64.cast([0,9]))?d[20]=!1:d[20]=!c.i64.eq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,7]))),d[19]),c.i64.cast([0,0])),d[21]=e.capabilities,d[22]=e.capabilities2,d[23]=e.capabilities3,d[24]=e.capabilities4,d[25]=e.capabilities5,d[27]=c.i64.div(c.i64.cast([0,223]),c.i64.cast([0,64])),d[28]=c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.sub(c.i64.cast([0,223]),c.i64.mul(d[27],c.i64.cast([0,64]))))),c.i64.lt(c.i64.cast([0,223]),c.i64.cast([0,0]))||c.i64.gt(c.i64.cast([0,223]),c.i64.cast([0,289]))?d[26]=!1:(c.i64.eq(d[27],c.i64.cast([0,0]))?d[29]=!c.i64.eq(c.i64.and_(d[28],d[21]),c.i64.cast([0,0])):(c.i64.eq(d[27],c.i64.cast([0,1]))?d[30]=!c.i64.eq(c.i64.and_(d[28],d[22]),c.i64.cast([0,0])):(c.i64.eq(d[27],c.i64.cast([0,2]))?d[31]=!c.i64.eq(c.i64.and_(d[28],d[23]),c.i64.cast([0,0])):(c.i64.eq(d[27],c.i64.cast([0,3]))?d[32]=!c.i64.eq(c.i64.and_(d[28],d[24]),c.i64.cast([0,0])):(c.i64.eq(d[27],c.i64.cast([0,4]))?d[33]=!c.i64.eq(c.i64.and_(d[28],d[25]),c.i64.cast([0,0])):d[33]=!1,d[32]=d[33]),d[31]=d[32]),d[30]=d[31]),d[29]=d[30]),d[26]=d[29]),d[20]===d[26]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting"),c["throw"]("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting")),d[18]=d[20]):d[18]=!1,d[16]=d[18])})},function(a){return d[8]=d[16]}]))})},function(a){return d[8]?d[7].set("perform_action_as_page",!0):0,d[10]=c.createArray(),d[11]=(d[10].push("reaction_v2"),d[10]),d[12]=d[7].get("message_id"),d[13]=(d[10].push(d[12]),d[10]),d[14]=c.toJSON(d[10]),d[15]=c.toJSON(d[7]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),d[14],c.i64.cast([0,604]),d[15],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticUpsertReactionV2StoredProcedure";a.__tables__=["threads","reactions","participants"];e.exports=a}),null);
__d("LSOptimisticUpsertReactionV2StoredProcedure",["LSOptimisticUpsertReactionV2","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticUpsertReactionV2"),e.actorId,e.threadId,e.messageId,e.messageTimestamp,e.reactionFbid,e.currentCount,e.viewerIsReactor,e.reactionStyle,e.operation,e.reactionLiteral);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSTaskType",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["BatchLookup","CreateThread","DeleteMessage","DeviceRegistration","DisableDevice","EnableDevice","MessageRangeQuery","PreKeyUpload","SendMessage","SendOrRemoveReaction","UnsendMessage","VerifyThreadChecksum"]);c=a;f["default"]=c}),66);
__d("LSTasks",["FBLogger","I64","LSIntEnum","LSJson","LSPendingTasksPluginType","LSTaskType"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){switch(a){case c("LSTaskType").BatchLookup:return"10003";case c("LSTaskType").CreateThread:return"10002";case c("LSTaskType").DeleteMessage:return"155";case c("LSTaskType").DeviceRegistration:return"10001";case c("LSTaskType").DisableDevice:return"10007";case c("LSTaskType").EnableDevice:return"10006";case c("LSTaskType").MessageRangeQuery:return"14";case c("LSTaskType").PreKeyUpload:return"10004";case c("LSTaskType").SendMessage:return"10005";case c("LSTaskType").SendOrRemoveReaction:return"29";case c("LSTaskType").UnsendMessage:return"33";case c("LSTaskType").VerifyThreadChecksum:throw c("FBLogger")("messenger_web").mustfixThrow("[LS] Not a supported task type")}}async function a(a,b,e,f){await a.pending_tasks.add({context:j(b),dataTraceId:void 0,enqueueTimestampMs:(h||(h=d("I64"))).of_float(Date.now()),failureCount:h.zero,firstExecutedTimestampMs:h.zero,httpUrlOverride:void 0,initTraceTimestampMs:void 0,minTimeToSyncTimestampMs:h.zero,pluginType:(i||(i=d("LSIntEnum"))).ofNumber(c("LSPendingTasksPluginType").LS_BROKER),priority:h.zero,queueName:e,syncGroupId:void 0,taskValue:d("LSJson").stringify(f),timeoutTimestampMs:void 0})}g.enqueue=a}),98);
__d("LexicalComposerContext",["cr:509"],(function(a,b,c,d,e,f){e.exports=b("cr:509")}),null);
__d("LexicalText",["cr:2181"],(function(a,b,c,d,e,f){e.exports=b("cr:2181")}),null);
__d("LexicalUtils",["cr:2774"],(function(a,b,c,d,e,f){e.exports=b("cr:2774")}),null);
__d("MAWEditMessageContext.react",["emptyFunction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;e=b.createContext;b.useMemo;var j=b.useState;function a(a){var b=d("react-compiler-runtime").c(5);a=a.children;var c=j(null),e=c[0];c=c[1];b[0]!==e?(c={editMessageData:e,setEditMessageData:c},b[0]=e,b[1]=c):c=b[1];e=c;c=e;b[2]!==a||b[3]!==c?(e=i.jsx(k.Provider,{value:c,children:a}),b[2]=a,b[3]=c,b[4]=e):e=b[4];return e}var k=e({editMessageData:null,setEditMessageData:c("emptyFunction")});g.MAWEditMessageContext=a;g.Context=k}),98);
__d("MWDeleteAllDBs",["MAWEncryptionIndexedDbV2","MAWIndexedDBDeletion","cr:10030"],(function(a,b,c,d,e,f,g){"use strict";async function a(a,c){b("cr:10030")&&await b("cr:10030").deleteIndexedDB(a),await d("MAWIndexedDBDeletion").deleteMAWPersistence(),(c==null?void 0:c.deleteEncryptionDB)===!0&&await d("MAWEncryptionIndexedDbV2").deleteEncryptionDB_UNSAFE(void 0,"delete_all_dbs")}g.deleteAllDBs_DO_NOT_USE_UNLESS_YOU_KNOW_WHAT_YOU_ARE_DOING=a}),98);
__d("MAWEncryptionErrorHandler",["FBLogger","MAWSetupWorker","MWDeleteAllDBs"],(function(a,b,c,d,e,f,g){"use strict";async function a(){var a="MAWEARKeychainDecryptionError",b="error";try{await d("MAWSetupWorker").terminateWorker(a);return d("MWDeleteAllDBs").deleteAllDBs_DO_NOT_USE_UNLESS_YOU_KNOW_WHAT_YOU_ARE_DOING(b,{deleteEncryptionDB:!0})}catch(d){c("FBLogger")("messenger_web").catching(d).mustfixThrow("Fail to delete dbs from: %s terminateWorkerReason: %s",b,a)}}g.handleEARKeychainError=a}),98);
__d("MAWIssueReceiverFetchTask",["LSDispatchMediaReceiverFetchForWebStoredProcedure","LSFactory","MAWBridgeUpdateClientMediaStatusHandler","MAWMediaDownloadStatus","WAHashUtils","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e,g){c("promiseDone")(d("MAWBridgeUpdateClientMediaStatusHandler").call(a,{details:"issue_receiver_fetch_task",key:d("WAHashUtils").stringToPlaintextHash(b),status:c("MAWMediaDownloadStatus").DOWNLOADING,type:"main"}));return a.runInTransaction(function(a){return c("LSDispatchMediaReceiverFetchForWebStoredProcedure")(c("LSFactory")(a),{messageId:b,receiverFetchId:e,shouldFetchAccessibilitySummaryText:!0,threadKey:g})},"readwrite",void 0,void 0,f.id+":38")}g.issueReceiverFetchTask=a}),98);
__d("MAWMediaDownloadStatusUIStateType",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a==null)return!1;switch(a){case"non_retryable_error":case"non_retryable_error_with_preview":case"retryable_error":case"retryable_error_with_preview":return!0;default:return!1}}function b(a){if(a==null)return!1;switch(a){case"retryable_error":case"retryable_error_with_preview":return!0;default:return!1}}f.isErrorState=a;f.isRetryableErrorState=b}),66);
__d("MessageReactionOperation",[],(function(a,b,c,d,e,f){a=Object.freeze({ADD:1,REMOVE:2,REMOVE_MULTI_REACT:3});f["default"]=a}),66);
__d("MessageReactionStyle",[],(function(a,b,c,d,e,f){a=Object.freeze({BASIC_SUPER_REACT_ANIMATION:1});f["default"]=a}),66);
__d("useMWPSendOrUnsendReaction",["FBLogger","I64","Int64Hooks","LSFactory","LSIntEnum","LSOptimisticUpsertReactionStoredProcedure","LSOptimisticUpsertReactionV2StoredProcedure","MWPActor.react","MessageReactionOperation","MessageReactionStyle","ReQL","promiseDone","react-compiler-runtime","useIsMultiReactionEnabled","useIsReactionsV2Enabled","useMWLSDefaultThreadSourceAndResetAttribution","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,b,e,g,h,j){c("promiseDone")(a.runInTransaction(function(a){return c("LSOptimisticUpsertReactionV2StoredProcedure")(c("LSFactory")(a),{actorId:b,currentCount:h,messageId:e.messageId,messageTimestamp:e.timestampMs,operation:(i||(i=d("LSIntEnum"))).ofNumber(c("MessageReactionOperation").ADD),reactionFbid:g,reactionLiteral:j,reactionStyle:i.ofNumber(c("MessageReactionStyle").BASIC_SUPER_REACT_ANIMATION),threadId:e.threadKey,viewerIsReactor:!0})},"readwrite",void 0,void 0,f.id+":42"))}async function l(a,b,e,g,h,j,k){await a.runInTransaction(function(a){return c("LSOptimisticUpsertReactionV2StoredProcedure")(c("LSFactory")(a),{actorId:b,currentCount:g,messageId:e.messageId,messageTimestamp:e.timestampMs,operation:(i||(i=d("LSIntEnum"))).ofNumber(k?c("MessageReactionOperation").REMOVE_MULTI_REACT:c("MessageReactionOperation").REMOVE),reactionFbid:h,reactionLiteral:j,reactionStyle:i.ofNumber(c("MessageReactionStyle").BASIC_SUPER_REACT_ANIMATION),threadId:e.threadKey,viewerIsReactor:!1})},"readwrite",void 0,void 0,f.id+":72")}function m(a,b,e,f,g){c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.reactions_v2).getKeyRange(e.threadKey,e.messageId,f)).then(function(c){c!=null?k(a,b,e,f,c.count,g):k(a,b,e,f,(j||(j=d("I64"))).zero,g)}))}function a(a){var b=d("react-compiler-runtime").c(7),e=(h||(h=c("useReStore")))(),g=d("MWPActor.react").useActor(),i=c("useMWLSDefaultThreadSourceAndResetAttribution")(),k=d("useIsMultiReactionEnabled").useIsMultiReactEnabled(a.threadKey),n,o;b[0]!==g||b[1]!==e||b[2]!==i||b[3]!==k||b[4]!==a?(n=function(b){c("promiseDone")(async function(){var h=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.threads).getKeyRange(a.threadKey));h=h?d("useIsReactionsV2Enabled").isReactionsV2Enabled(h):!1;if(h){var n=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.reaction_v2_types).filter(function(a){return a.reactionLiteral===b||a.reactionLiteralVariant16===b}));if(n!=null){h=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.reactions_v2).getKeyRange(a.threadKey,a.messageId).filter(function(a){return(!k||(j||(j=d("I64"))).equal(a.reactionFbid,n.reactionFbid))&&a.viewerIsReactor}));if(h==null)return m(e,g,a,n.reactionFbid,b);var o=(j||(j=d("I64"))).equal(h.reactionFbid,n.reactionFbid);(!k||o)&&await l(e,g,a,h.count,h.reactionFbid,b,k);o||await m(e,g,a,n.reactionFbid,b)}else c("FBLogger")("messenger_web").warn("Reactions v2: trying to send reaction that is not in reaction_v2_types table");return}return e.runInTransaction(function(e){return c("LSOptimisticUpsertReactionStoredProcedure")(c("LSFactory")(e),{actorId:g,messageId:a.messageId,reaction:b,sendAttribution:i(a.threadKey),threadKey:a.threadKey,timestampMs:(j||(j=d("I64"))).of_float(Date.now())})},"readwrite",void 0,void 0,f.id+":227")}())},o=[e,a,k,g,i],b[0]=g,b[1]=e,b[2]=i,b[3]=k,b[4]=a,b[5]=n,b[6]=o):(n=b[5],o=b[6]);return d("Int64Hooks").useCallbackInt64(n,o)}g.default=a}),98);
__d("MAWPSendOrRemoveReaction.react",["I64","Int64Hooks","LSMessagingThreadAttributionType","MAWExternalId","MAWODSProxy","MWLSThread","MWPActor.react","WAOdsEnums","cr:9778","promiseDone","requireDeferred","sendToSentQPLLogger","useIsSecureMessage","useLSMessagingSource","useMWPSendOrUnsendReaction","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("MWLogMessageAction").__setRef("MAWPSendOrRemoveReaction.react");function a(a,e,f){var g,k=(i||(i=c("useReStore")))(),l=d("MWPActor.react").useActor(),m=(g=b("cr:9778")==null?void 0:b("cr:9778").useSendOrRemoveReaction(a.threadKey,(h||(h=d("I64"))).to_string(a.senderId)))!=null?g:null,n=c("useIsSecureMessage")(k,a,{fallbackIsSecure:e}),o=c("useMWPSendOrUnsendReaction")(a);g=c("useLSMessagingSource")();var p=d("MWLSThread").useThread(a.threadKey);return d("Int64Hooks").useMemoInt64(function(){return function(b,g,h){if(n&&m!==null){var i=d("MAWExternalId").generateExternalId(),q=function(a){return m(b,g,a,i).then(function(a){return[a]})},r=d("sendToSentQPLLogger").markSendToSentStartWithAnnotation(p,{isReaction:!0},c("LSMessagingThreadAttributionType").UNKNOWN,void 0,void 0,i);c("promiseDone")(q(r));d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_SEND_REACTION,key:"post-cutover_msg"})}else e&&d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_SEND_REACTION,key:"pre-cutover_msg"}),o(g!=null?g:"");j.onReady(function(b){return c("promiseDone")(b.log(k,a.messageId,a.threadKey,f,h,void 0,void 0,void 0,a.senderId,void 0,l))})}},[n,m,e,o,k,g,p,a.messageId,a.threadKey,a.senderId,f,l])}g.useSendOrRemoveReaction=a}),98);
__d("MLCInstrumentationCommands",["Lexical"],(function(a,b,c,d,e,f,g){"use strict";b=(a=d("Lexical")).createCommand();c=a.createCommand();e=a.createCommand();f=a.createCommand();g.COMMIT_COMMAND=b;g.INTERACTION_INSTRUMENTATION_READY=c;g.DOCUMENT_COMMAND=e;g.PLUGIN_EVENT_COMMAND=f}),98);
__d("MWBroadcastChannelLoggingShapes",[],(function(a,b,c,d,e,f){"use strict";a={action:2,event:195,parentSurface:11,source:105,surface:73};b={action:2,event:191,parentSurface:11,source:105,surface:73};c={action:2,event:190,parentSurface:11,source:105,surface:73};d={action:2,event:189,parentSurface:11,source:105,surface:73};e={action:1,event:188,parentSurface:11,source:104,surface:74};var g={action:1,event:187,parentSurface:11,source:104,surface:74},h={action:2,event:186,parentSurface:11,source:103,surface:74},i={action:1,event:184,parentSurface:11,source:102,surface:73},j={action:1,event:185,parentSurface:11,source:101,surface:73},k={action:1,event:183,parentSurface:11,source:101,surface:73},l={action:2,event:182,parentSurface:11,source:100,surface:73},m={action:1,event:185,parentSurface:11,source:102,surface:72},n={action:1,event:184,parentSurface:11,source:102,surface:72},o={action:1,event:183,parentSurface:11,source:101,surface:72},p={action:2,event:182,parentSurface:11,source:100,surface:72},q={action:1,clientExtras:{entry_point:"public_chats:comet_www_inbox"},event:95,parentSurface:7,source:8,surface:4},r={action:2,clientExtras:{entry_point:"public_chats:comet_www_inbox"},event:161,parentSurface:7,source:8,surface:4},s={action:1,clientExtras:{entry_point:"public_chats:profile_channels_tab_item"},event:95,parentSurface:11,source:8,surface:58},t=babelHelpers["extends"]({},s,{clientExtras:{entry_point:"public_chats:profile_channels_tab_null_state"}}),u=babelHelpers["extends"]({},s,{clientExtras:{entry_point:"public_chats:profile_from_mbs"}}),v=babelHelpers["extends"]({},s,{clientExtras:{entry_point:"public_chats:fandom_create_channel_email"}}),w={action:2,clientExtras:{entry_point:"public_chats:profile_channels_tab_item"},event:162,parentSurface:21,source:90,surface:59},x={action:2,clientExtras:{entry_point:"public_chats:profile_channels_tab_null_state"},event:163,parentSurface:21,source:90,surface:59},y={action:2,clientExtras:{entry_point:"public_chats:profile_channels_tab_item"},event:161,parentSurface:21,source:90,surface:59},z=babelHelpers["extends"]({},y,{clientExtras:{entry_point:"public_chats:profile_channels_tab_null_state"}}),A={action:2,clientExtras:{entry_point:"public_chats:newsfeed_qp"},event:164,parentSurface:11,source:92,surface:65},B={action:2,clientExtras:{entry_point:"public_chats:profile_qp"},event:164,parentSurface:21,source:92,surface:66},C={action:2,clientExtras:{entry_point:"public_chats:newsfeed_qp"},event:161,parentSurface:11,source:92,surface:65},D={action:2,clientExtras:{entry_point:"public_chats:profile_qp"},event:161,parentSurface:21,source:92,surface:66},E={action:1,clientExtras:{entry_point:"public_chats:newsfeed_qp"},event:95,parentSurface:11,source:8,surface:65},F={action:1,clientExtras:{entry_point:"public_chats:profile_qp"},event:95,parentSurface:21,source:8,surface:66},G={action:1,clientExtras:{entry_point:"public_chats:profile_creation_bar"},event:95,parentSurface:11,source:88,surface:64},H={action:1,clientExtras:{entry_point:"public_chats:channel_creation_qp"},event:95,parentSurface:11,source:67,surface:27},I={action:1,clientExtras:{entry_point:"public_chats:newsfeed_composer"},event:95,parentSurface:11,source:88,surface:69},J={action:1,clientExtras:{entry_point:"public_chats:channels_gutter"},event:95,parentSurface:11,source:8,surface:91},K={action:2,clientExtras:{entry_point:"public_chats:profile_creation_bar"},event:161,parentSurface:11,source:88,surface:64},L={action:2,clientExtras:{entry_point:"public_chats:newsfeed_composer"},event:161,parentSurface:11,source:88,surface:69},M={action:1,event:147,parentSurface:4,source:81,surface:51},N={action:1,event:165,parentSurface:21,source:93,surface:58},O={action:1,event:148,parentSurface:11,source:89,surface:21},P={action:2,event:7,parentSurface:17,source:82,surface:41},Q={action:2,event:146,parentSurface:4,source:81,surface:51},R={action:2,event:261,parentSurface:4,source:81,surface:51},S={action:1,event:53,parentSurface:4,source:81,surface:51},T={action:1,event:8,parentSurface:17,source:8,surface:41},U={action:1,event:234,parentSurface:8,source:27,surface:16},V={action:1,event:234,parentSurface:7,source:62,surface:7},W={action:1,event:235,parentSurface:7,source:62,surface:7},X={action:1,event:236,parentSurface:7,source:62,surface:7},Y={action:2,event:239,parentSurface:11,source:147,surface:87},Z={action:1,event:240,parentSurface:11,source:147,surface:87},$={action:2,event:241,parentSurface:11,source:147,surface:87},aa={action:1,event:242,parentSurface:11,source:147,surface:87},ba={action:1,event:243,parentSurface:11,source:147,surface:87};f.CREATOR_WAITLIST_ALREADY_HAS_ACCESS_VIEW_RENDERED=a;f.CREATOR_WAITLIST_LOGGED_OUT_VIEW_RENDERED=b;f.CREATOR_WAITLIST_NOT_ELIGIBLE_VIEW_RENDERED=c;f.CREATOR_WAITLIST_ALREADY_REGISTERED_VIEW_RENDERED=d;f.CREATOR_WAITLIST_INTEREST_REASONS_SUBMIT_SUCCESS=e;f.CREATOR_WAITLIST_INTEREST_REASONS_SUBMIT_ATTEMPT=g;f.CREATOR_WAITLIST_INTEREST_REASONS_RENDERED=h;f.CREATOR_WAITLIST_LANDING_PAGE_LEARN_MORE_TAPPED=i;f.CREATOR_WAITLIST_LANDING_PAGE_REQUEST_ACCESS_SUCCESS=j;f.CREATOR_WAITLIST_LANDING_PAGE_REQUEST_ACCESS_ATTEMPT=k;f.CREATOR_WAITLIST_LANDING_PAGE_RENDERED=l;f.CREATOR_WAITLIST_NEWSFEED_QP_REQUEST_ACCESS_SUCCESS=m;f.CREATOR_WAITLIST_NEWSFEED_QP_LEARN_MORE_TAPPED=n;f.CREATOR_WAITLIST_NEWSFEED_QP_REQUEST_ACCESS_TAPPED=o;f.CREATOR_WAITLIST_NEWSFEED_QP_RENDERED=p;f.CREATE_CHANNEL_TAPPED_FULL_PAGE_SHAPE=q;f.CREATE_CHANNEL_OPTION_RENDERED_FULL_PAGE_SHAPE=r;f.CREATE_CHANNEL_TAPPED_CHANNELS_TAB_SHAPE=s;f.CREATE_CHANNEL_TAPPED_CHANNELS_TAB_NULL_STATE_SHAPE=t;f.CREATE_CHANNEL_TAPPED_CHANNELS_TAB_MBS_SHAPE=u;f.CREATE_CHANNEL_TAPPED_CHANNELS_TAB_FCC_EMAIL_SHAPE=v;f.CHANNELS_LIST_RENDERED_SHAPE=w;f.CHANNELS_LIST_NULL_STATE_RENDERED_SHAPE=x;f.CREATE_CHANNEL_OPTION_CHANNELS_TAB_RENDERED_SHAPE=y;f.CREATE_CHANNEL_OPTION_CHANNELS_TAB_NULL_STATE_RENDERED_SHAPE=z;f.CREATE_BROADCAST_CHANNEL_NEWSFEED_QP_RENDERED_SHAPE=A;f.CREATE_BROADCAST_CHANNEL_PROFILE_PAGE_QP_RENDERED_SHAPE=B;f.CREATE_CHANNEL_OPTION_NEWSFEED_QP_RENDERED_SHAPE=C;f.CREATE_CHANNEL_OPTION_PROFILE_PAGE_QP_RENDERED_SHAPE=D;f.CREATE_BROADCAST_CHANNEL_NEWSFEED_QP_TAP_SHAPE=E;f.CREATE_BROADCAST_CHANNEL_PROFILE_PAGE_QP_TAP_SHAPE=F;f.CREATE_BROADCAST_CHANNEL_PROFILE_COMPOSER_TAP_SHAPE=G;f.CREATE_BROADCAST_CHANNEL_JEWEL_QP_TAP_SHAPE=H;f.CREATE_BROADCAST_CHANNEL_NEWSFEED_COMPOSER_TAP_SHAPE=I;f.CREATE_BROADCAST_CHANNEL_FROM_GUTTER_TAP_SHAPE=J;f.CREATE_BROADCAST_CHANNEL_PROFILE_COMPOSER_RENDERED_SHAPE=K;f.CREATE_BROADCAST_CHANNEL_NEWSFEED_COMPOSER_RENDERED_SHAPE=L;f.APPLUS_BROADCAST_CHANNEL_EDUCATION_NUX_BUTTON_TAP_SHAPE=M;f.APPLUS_TAP_BROADCAST_CHANNEL_IN_CHANNELS_TAB_SHAPE=N;f.APPLUS_TAP_PIN_TO_FEATURE_IN_CREATION_FORM=O;f.PUBLIC_BROADCAST_CHAT_CREATION_SHEET_RENDERED_SHAPE=P;f.APPLUS_BROADCAST_CHANNEL_EDUCATION_NUX_RENDERED_SHAPE=Q;f.PUBLIC_BROADCAST_CHANNEL_NUX_CAROUSEL_SLIDE_RENDERED=R;f.BROADCAST_CHANNEL_CHANGE_IMAGE_TAP_SHAPE=S;f.THREAD_CREATE_TAP_SHAPE=T;f.VIEW_PINNED_MESSAGES_FROM_THREAD_DETAIL=U;f.VIEW_PINNED_MESSAGES_FROM_THREAD_VIEW_BANNER=V;f.PIN_MESSAGE=W;f.UNPIN_MESSAGE=X;f.SHARE_TO_CHANNELS_ENTRY_POINT_RENDERED=Y;f.SHARE_TO_CHANNELS_ENTRY_POINT_TAPPED=Z;f.SHARE_TO_CHANNELS_PAGE_IMPRESSION=$;f.SHARE_TO_CHANNELS_CHANNEL_TAPPED=aa;f.SHARE_TO_CHANNELS_DEFAULT_TOGGLE_CLICKED=ba}),66);
__d("MWCMSubthreadChatTabContext.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext;c.useMemo;var k=e({pushSubthreadViewPage:null});function a(){return j(k)}function b(a){var b=d("react-compiler-runtime").c(5),c=a.children;a=a.pushSubthreadViewPage;var e;b[0]!==a?(e={pushSubthreadViewPage:a},b[0]=a,b[1]=e):e=b[1];a=e;e=a;b[2]!==c||b[3]!==e?(a=i.jsx(k.Provider,{value:e,children:c}),b[2]=c,b[3]=e,b[4]=a):a=b[4];return a}g.useSubthreadChatTabContext=a;g.MWCMSubthreadChatTabContextProvider=b}),98);
__d("MWCMSubthreadsInboxFocusContext.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext;c.useMemo;var k=c.useState,l=e({isSubthreadFocused:!1,setIsSubthreadFocused:function(){}});function a(){return j(l)}function b(a){var b=d("react-compiler-runtime").c(5);a=a.children;var c=k(!1),e=c[0];c=c[1];b[0]!==e?(c={isSubthreadFocused:e,setIsSubthreadFocused:c},b[0]=e,b[1]=c):c=b[1];e=c;c=e;b[2]!==a||b[3]!==c?(e=i.jsx(l.Provider,{value:c,children:a}),b[2]=a,b[3]=c,b[4]=e):e=b[4];return e}g.useIsSubthreadFocusedContext=a;g.MWCMIsSubthreadFocusedContextProvider=b}),98);
__d("MWXTooltipGroup.react",["cr:824"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:824")}),98);
__d("MWChatPromptFlyoutFrontCard.react",["fbt","BaseTextArea.react","CometPlaceholder.react","MWChatPollFacepile.react","MWPActor.react","ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore","vulture"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react"),l={textarea:{background:"x11g6tue",borderTopStyle:"x1ejq31n",borderInlineEndStyle:"x18oe1m7",borderBottomStyle:"x1sy0etr",borderInlineStartStyle:"xstzfhl",color:"xzsf02u",fontSize:"x6prxxf",fontWeight:"x1xlr1w8",height:"x1m3v4wt",paddingTop:"xyamay9",paddingBottom:"x1l90r2v",paddingInlineStart:"xmzvs34",paddingInlineEnd:"xf159sx",paddingLeft:null,paddingRight:null,textAlign:"x2b8uid",width:"xrostsh",$$css:!0}};function m(){var a=d("react-compiler-runtime").c(10);c("vulture")("--I5l4MGyBjEFx_7p5moc1YSO7o=");var b=(i||(i=c("useReStore")))(),e=d("MWPActor.react").useActor(),g;a[0]!==b.tables.contacts||a[1]!==e?(g=function(){return d("ReQL").fromTableAscending(b.tables.contacts).getKeyRange(e).map(n)},a[0]=b.tables.contacts,a[1]=e,a[2]=g):g=a[2];var h;a[3]!==b||a[4]!==e?(h=[b,e],a[3]=b,a[4]=e,a[5]=h):h=a[5];g=d("ReQLSuspense").useFirst(g,h,f.id+":72");a[6]!==g?(h=g!=null?[{profile_picture_url:g}]:[],a[6]=g,a[7]=h):h=a[7];g=h;a[8]!==g?(h=k.jsx(c("MWChatPollFacepile.react"),{contacts:g,direction:"reversed",gap:"negative",size:"mediumLarge"}),a[8]=g,a[9]=h):h=a[9];return h}function n(a){return a.profilePictureUrl}function a(a){var b=d("react-compiler-runtime").c(12),e=a.maxLength,f=a.onChange,g=a.showFacepile;a=a.value;g=g===void 0?!1:g;var i;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(i={className:"x9bbmet xbjudin xnlwouz xpp8er5 xs9wviy xi1c1fh xdt5ytf x1iyjqo2 x2lah0s x1m3v4wt x1gslohp x12nagc x1n2onr6 xrostsh x1vjfegm"},b[0]=i):i=b[0];var j;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(j=h._(/*BTDS*/"Prompt"),b[1]=j):j=b[1];var n;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(n=h._(/*BTDS*/"Type something"),b[2]=n):n=b[2];b[3]!==e||b[4]!==f||b[5]!==a?(j=k.jsx(c("BaseTextArea.react"),{"aria-label":j,maxLength:e,onChange:f,placeholder:n,suppressFocusRing:!0,unresizable:!0,value:a,xstyle:l.textarea}),b[3]=e,b[4]=f,b[5]=a,b[6]=j):j=b[6];b[7]!==g?(n=g?k.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWChatPromptFlyoutFrontCard",children:k.jsx("div",{className:"xvc5jky x11t971q x1l90r2v",children:k.jsx(m,{})})}):null,b[7]=g,b[8]=n):n=b[8];b[9]!==j||b[10]!==n?(e=k.jsxs("div",babelHelpers["extends"]({},i,{children:[j,n]})),b[9]=j,b[10]=n,b[11]=e):e=b[11];return e}g["default"]=a}),226);
__d("MWChatReactionsActionContainer.react",["JSResourceForInteraction","MWV2MessageRowIsRowFocusedContext.react","MWXLazyPopoverTrigger.react","MWXPopoverLoadingState.react","emptyFunction","qex","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.useContext,k=b.useState,l={popoverLoading:{minHeight:"x1wiwyrm",minWidth:"x1q6reyq",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(28),e=a.align,f=a.alwaysShowEmojiPicker,g=a.children,h=a.closeActionsMenu,m=a.disableCustomReactions,n=a.disableReflowToPositionOnNarrowWidth,o=a.hasReactionsV2,p=a.isBroadcastChannel,q=a.isBroadcastThread,r=a.isSecure,s=a.messageID,t=a.onVisibilityChange,u=a.reactionsPopoverResource,v=a.sendReaction;a=e===void 0?"middle":e;e=f===void 0?!1:f;f=m===void 0?!1:m;m=n===void 0?!1:n;n=r===void 0?!1:r;var w=j(d("MWV2MessageRowIsRowFocusedContext.react").context);b[0]!==u?(r=u!=null?u:c("JSResourceForInteraction")("MWChatReactionsMenu.react").__setRef("MWChatReactionsActionContainer.react"),b[0]=u,b[1]=r):r=b[1];u=r;r=k(!1);var x=r[0],y=r[1];r=e||x;b[2]!==h||b[3]!==o||b[4]!==v?(e=function(a,b){b=b[0];b=o!==!0&&b===a;v(a,b);return h()},b[2]=h,b[3]=o,b[4]=v,b[5]=e):e=b[5];x=e;b[6]!==w||b[7]!==t?(e=function(a){a||y(!1),t(a),w.setFocused(a)},b[6]=w,b[7]=t,b[8]=e):e=b[8];e=e;var z=c("qex")._("2997")?"button_aggressive":"button";a=a==="end_"?"end":a;var A;b[9]===Symbol["for"]("react.memo_cache_sentinel")?(A=i.jsx(c("MWXPopoverLoadingState.react"),{withArrow:!1,xstyle:l.popoverLoading}),b[9]=A):A=b[9];var B;b[10]!==h||b[11]!==f||b[12]!==p||b[13]!==q||b[14]!==n||b[15]!==s||b[16]!==x||b[17]!==r?(B={closeActionsMenu:h,disableCustomReactions:f,isBroadcastChannel:p,isBroadcastThread:q,isSecure:n,messageID:s,onClose:c("emptyFunction"),onSelect:x,setShowEmojiPicker:y,showEmojiPicker:r},b[10]=h,b[11]=f,b[12]=p,b[13]=q,b[14]=n,b[15]=s,b[16]=x,b[17]=r,b[18]=B):B=b[18];f=r?"dialog":"menu";p=r?"below":"above";b[19]!==g||b[20]!==m||b[21]!==e||b[22]!==u||b[23]!==B||b[24]!==f||b[25]!==p||b[26]!==a?(q=i.jsx(c("MWXLazyPopoverTrigger.react"),{align:a,disableReflowToPositionOnNarrowWidth:m,fallback:A,onVisibilityChange:e,popoverProps:B,popoverResource:u,popoverType:f,position:p,preloadTrigger:z,children:g}),b[19]=g,b[20]=m,b[21]=e,b[22]=u,b[23]=B,b[24]=f,b[25]=p,b[26]=a,b[27]=q):q=b[27];return q}g["default"]=a}),98);
__d("MWChatSettingsQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9672376216183311"}),null);
__d("MWChatSettingsQuery.graphql",["MWChatSettingsQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"chat_tabs_turned_off",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"chat_sounds_on",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatSettingsQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWChatSettingsQuery",selections:a},params:{id:b("MWChatSettingsQuery_facebookRelayOperation"),metadata:{},name:"MWChatSettingsQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatSettingsQuery",["CometRelay","CometRelayEnvironment","MWChatSettingsQuery.graphql","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){var b=d("CometRelay").fetchQuery(c("CometRelayEnvironment"),j,{},{fetchPolicy:"store-or-network"}).toPromise().then(function(b){var c,d,e=b==null||(c=b.viewer)==null?void 0:c.chat_tabs_turned_off;b=b==null||(d=b.viewer)==null?void 0:d.chat_sounds_on;a(e,b);return});c("promiseDone")(b)},j=h!==void 0?h:h=b("MWChatSettingsQuery.graphql");a=function(a){i(function(b,c){return a(b)})};e=function(a){i(function(b,c){return a(c!=null&&c)})};g.areChatTabsTurnedOff=a;g.areChatTabsSoundsOn=e}),98);
__d("MWFalcoFeatureEventLogger",["I64","LSMessagingThreadTypeUtil","MessengerWebEventsFalcoEvent","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e,f,g){c("gkx")("24170")&&c("MessengerWebEventsFalcoEvent").log(function(){return{entry_point:a,event_name:b,is_secured:d("LSMessagingThreadTypeUtil").isArmadilloSecure(g),other_user_fbid:e!=null?(h||(h=d("I64"))).to_string(e):null,thread_fbid:(h||(h=d("I64"))).to_string(f)}})}g.logEvent=a}),98);
__d("useMWPCloseConversationSearchSession",["MWPConversationSearchContext.react","MWPConversationSearchLogger","nullthrows","react","react-compiler-runtime","useMWPClearConversationSearch"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.useContext;function a(){var a=d("react-compiler-runtime").c(5),b=c("useMWPClearConversationSearch")(),e=i(d("MWPConversationSearchContext.react").context),f;a[0]!==e?(f=c("nullthrows")(e),a[0]=e,a[1]=f):f=a[1];e=f;var g=e.setIsConversationSearchVisible;a[2]!==b||a[3]!==g?(f=function(a){g(!1),b(a),c("MWPConversationSearchLogger").logMessageSearchEnd()},a[2]=b,a[3]=g,a[4]=f):f=a[4];return f}g["default"]=a}),98);
__d("MWInboxInfoPanelContext.react",["Int64Hooks","MWInboxPersistedUIState","MWResponsiveLayoutConstants","MWResponsiveLayoutContext.react","cr:124","emptyFunction","gkx","isMessengerPWA","react","useEmptyFunction","useMWPCloseConversationSearchSession"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h,k=j.createContext,l=j.useCallback,m=j.useContext,n=j.useRef,o=j.useState,p=(j=b("cr:124"))!=null?j:c("useEmptyFunction"),q=k({currentSubthreadView:null,isOnBestPracticesPageRef:{current:!1},isOnMemberRequestsPageRef:{current:!1},navToBestPracticesRef:{current:!1},openMethod:"saved_state",pushBestPracticesPage:c("emptyFunction"),pushMemberRequestsPage:c("emptyFunction"),setCurrentSubthreadView:c("emptyFunction"),setPushBestPracticesPage:c("emptyFunction"),setPushMemberRequestsPage:c("emptyFunction"),setShouldNavToMemberRequests:c("emptyFunction"),setShowSubthreadList:c("emptyFunction"),setSubthreadKey:c("emptyFunction"),setThreadInfoVisible:c("emptyFunction"),shouldNavToMemberRequests:!1,sourceIsSubthreadNav:{current:!1},subthreadKey:null,threadInfoVisible:!c("isMessengerPWA")()});function a(){return m(q)}function e(a){a=a.children;var b=d("MWInboxPersistedUIState").usePersistedUIState(!c("isMessengerPWA")(),"__MWInboxDetail.info__"),e=b[0],f=b[1];b=o("saved_state");var g=b[0],h=b[1],j=n(!1);b=o(null);var k=b[0],r=b[1],s=n(!1),t=j.current,u=n(c("emptyFunction")),v=u.current,w=n(!1),x=n(!1),y=n(!1);b=o(null);var z=b[0],A=b[1],B=c("useMWPCloseConversationSearchSession")();b=l(function(){f(!1),r(null),A(null)},[f]);p(d("MWResponsiveLayoutConstants").MWLayoutPanel.INFO_PANEL,b);b=m(c("MWResponsiveLayoutContext.react"));var C=b.popCard,D=b.pushCard,E=l(function(a){if(c("gkx")("24056")){a=Boolean(a)===!1?C:D;a(d("MWResponsiveLayoutConstants").MWLayoutPanel.INFO_PANEL)}},[D,C]),F=l(function(a){a?(h("callback"),A(null),r(null)):B({shouldClearThreadSearch:!1,shouldResetNavigation:!1}),f(a),E(a)},[f,B,E]),G=l(function(a){f(!1),r(a),E(a)},[f,E]),H=l(function(a){j.current=a},[]),I=l(function(a,b){b===void 0&&(b=!1),a&&(f(!1),B({shouldClearThreadSearch:!1,shouldResetNavigation:!1}),r(null)),A(a?"subthreadList":null),y.current=a&&b,E(a)},[f,E,B]),J=l(function(a){u.current=a},[]),K=l(function(a){u.current=a},[]);b=d("Int64Hooks").useMemoInt64(function(){return{currentSubthreadView:z,isOnBestPracticesPageRef:x,isOnMemberRequestsPageRef:w,navToBestPracticesRef:s,openMethod:g,pushBestPracticesPage:v,pushMemberRequestsPage:v,setCurrentSubthreadView:A,setPushBestPracticesPage:K,setPushMemberRequestsPage:J,setShouldNavToMemberRequests:H,setShowSubthreadList:I,setSubthreadKey:G,setThreadInfoVisible:F,shouldNavToMemberRequests:t,sourceIsSubthreadNav:y,subthreadKey:k,threadInfoVisible:e}},[z,x,g,v,K,J,H,I,G,F,t,k,e,s]);return i.jsx(q.Provider,{value:b,children:a})}e.displayName=e.name+" [from "+f.id+"]";g.useMWInboxInfoPanelContext=a;g.MWInboxInfoPanelProvider=e}),98);
__d("useAttachmentDataLS",["I64","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=d("react-compiler-runtime").c(9),e=(i||(i=c("useReStore")))(),g;b[0]!==e||b[1]!==a.messageId||b[2]!==a.threadKey?(g=function(){return d("ReQL").fromTableAscending(e.tables.attachments).getKeyRange(a.threadKey,a.messageId).map(function(a){var b=l(e,a);return{attachment:a,attachmentCTAs:b}})},b[0]=e,b[1]=a.messageId,b[2]=a.threadKey,b[3]=g):g=b[3];var h;b[4]!==e||b[5]!==a?(h=[a,e],b[4]=e,b[5]=a,b[6]=h):h=b[6];g=d("ReQLSuspense").useArray(g,h,f.id+":41").toSorted(k);var m=(h=g[0])==null?void 0:h.attachment;h=d("ReQLSuspense").useArray(function(){return m==null?d("ReQL").empty():d("ReQL").fromTableAscending(e.tables.attachment_items).getKeyRange(m.attachmentFbid).map(function(a){var b=l(e,a);return{attachmentItem:a,attachmentItemCTAs:b}})},[m,e],f.id+":60").reduce(j,[[],[]]);var n=h[0];h=h[1];var o=[];g.map(function(a){o.push(a.attachment)});if(n.length>0)h=h;else{g=(g=g[0])==null?void 0:g.attachmentCTAs;var p;b[7]!==g?(p=g?[g]:[],b[7]=g,b[8]=p):p=b[8];h=p}return{attachmentCTAs:h,attachmentItems:n,attachments:o}}function j(a,b){var c=b.attachmentItem;b=b.attachmentItemCTAs;a[0].push(c);a[1].push(b);return a}function k(a,b){return(h||(h=d("I64"))).compare(a.attachment.attachmentIndex,b.attachment.attachmentIndex)}function l(a,b){var c={},e=b.attachmentCta1Id,g=b.attachmentCta2Id,h=b.attachmentCta3Id;b=b.defaultCtaId;c.defaultCta=b!=null?d("ReQLSuspense").first(d("ReQL").fromTableAscending(a.tables.attachment_ctas).getKeyRange(b),f.id+":113"):void 0;c.attachmentCta1=e!=null?d("ReQLSuspense").first(d("ReQL").fromTableAscending(a.tables.attachment_ctas).getKeyRange(e),f.id+":121"):void 0;c.attachmentCta2=g!=null?d("ReQLSuspense").first(d("ReQL").fromTableAscending(a.tables.attachment_ctas).getKeyRange(g),f.id+":129"):void 0;c.attachmentCta3=h!=null?d("ReQLSuspense").first(d("ReQL").fromTableAscending(a.tables.attachment_ctas).getKeyRange(h),f.id+":137"):void 0;return c}g.useAttachmentDataLS=a}),98);
__d("fetchOpenMissingMessage",["FBLogger","I64","LSFactory","LSMessagePointQueryStoredProcedure"],(function(a,b,c,d,e,f,g){"use strict";var h;async function a(a,b,e){var g;g=(h||(h=d("I64"))).to_int32((g=b.syncGroup)!=null?g:(h||(h=d("I64"))).neg_one);if(g!==-1&&g===95){c("FBLogger")("messenger_web").mustfix("fetchMissingMessage: incorrect call to MPQ with secure mailbox");return}await a.runInTransaction(function(a){return c("LSMessagePointQueryStoredProcedure")(c("LSFactory")(a),{messageId:e,threadKey:b.threadKey,threadType:b.threadType})},"readwrite",void 0,void 0,f.id+":38")}g.default=a}),98);
__d("fetchSecureMissingMessage",["MAWBridgeSendAndReceive","MAWMiActOnActThreadReady","MAWMpsGating","MAWPutMessagesToDB","MpsMessageToLoadResponse","MpsOverBridge","MpsTypes","WAJids","WAStanzaUtils","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MAWBridgeIssuePointQueryHandler").__setRef("fetchSecureMissingMessage");async function a(a,b,c,e,g,j,k){b=await d("MAWMiActOnActThreadReady").waitForACTThreadReady(a.tables,b,k);var l=b.chatJid;if(d("MAWMpsGating").isFullMpsEnabled()){k=await d("MpsOverBridge").mps().loadMessage({config:{strategy:"local-first"},debug:{purpose:"fetchSecureMissingMessageFullMps"},messageId:d("MpsTypes").toMessageId(c),threadId:d("MpsTypes").toThreadId(l)});if(k.value!=null){b=babelHelpers.extends({},d("MpsMessageToLoadResponse").messageToLoadMsgsResponse([k.value]),{hasMoreAfter:!1,hasMoreBefore:!1});await d("MAWPutMessagesToDB").insertMessageResponseIntoDatabase(a,b,g)}return}k=await i({config:{admin:!0,editMsgHistory:!1,media:!0,polls:!0,reactions:!1,receiverFetch:!0,xma:!0},externalId:c});await d("MAWPutMessagesToDB").insertMessageResponseIntoDatabaseByExternalId(a,k,g);if(k.msgs.length>0||!e)return;if(d("MAWMpsGating").isMpsPointQueryEnabled()){await d("MpsOverBridge").mps().copMps.loadMsgIntoMaw({config:{shouldFetchSupplementals:!0,shouldFetchTags:!1,strategy:"full-fetch"},debug:{purpose:"fetchSecureMissingMessageM3"},messageId:d("MpsTypes").toMessageId(c),threadId:d("MpsTypes").toThreadId(l)});return}var m=await h.load();return a.runInTransaction(async function(a){await m.call(a,{jid:l,messageId:c,taskSource:j,threadId:d("WAJids").threadIdForChatJid(l)})},"readwrite",void 0,void 0,f.id+":120")}async function i(a){var b=a.config;a=a.externalId;return babelHelpers.extends({},await d("MAWBridgeSendAndReceive").sendAndReceive("backend","loadMsgsByExternalId",{config:b,externalId:d("WAStanzaUtils").toStanzaId(a)}))}g.default=a}),98);
__d("useGetOriginalMsgFromBumpMsg",["FBLogger","LSMEBTaskCreationSource","LSMessagingThreadTypeUtil","MAWFetchExternalIdUsingCache","MAWStateContext.react","MWEBEntrypointsKillswitch.enum","ReQL","ReQLSuspense","fetchOpenMissingMessage","fetchSecureMissingMessage","isMWBumpMessage","promiseDone","react","react-compiler-runtime","useMWEBBackupState","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useContext;function a(a,b,e){var g=d("react-compiler-runtime").c(14),i;g[0]!==a?(i=c("isMWBumpMessage")(a),g[0]=a,g[1]=i):i=g[1];var k=i,l=(h||(h=c("useReStore")))(),m=j(d("MAWStateContext.react").MAWDispatchContext);g[2]===Symbol["for"]("react.memo_cache_sentinel")?(a={entrypoint:c("MWEBEntrypointsKillswitch.enum").BUMP_MESSAGES},g[2]=a):a=g[2];i=c("useMWEBBackupState")(a);g[3]!==l.tables.threads||g[4]!==e?(a=function(){return e!=null?d("ReQL").fromTableAscending(l.tables.threads,["threadKey","threadType","syncGroup"]).getKeyRange(e):d("ReQL").empty()},g[3]=l.tables.threads,g[4]=e,g[5]=a):a=g[5];var n;g[6]!==l||g[7]!==e?(n=[l,e],g[6]=l,g[7]=e,g[8]=n):n=g[8];var o=d("ReQLSuspense").useFirst(a,n,f.id+":44");g[9]!==l.tables.messages||g[10]!==k||g[11]!==b?(a=function(){return b!=null&&k?d("ReQL").fromTableDescending(l.tables.messages.index("messageId")).getKeyRange(b):d("ReQL").empty()},n=[l.tables.messages,b,k],g[9]=l.tables.messages,g[10]=k,g[11]=b,g[12]=a,g[13]=n):(a=g[12],n=g[13]);g=d("ReQLSuspense").useFirst(a,n,f.id+":56");if(g==null&&o!=null&&b!=null&&k)if(d("LSMessagingThreadTypeUtil").isArmadilloSecure(o.threadType)){var p=i===3;c("promiseDone")(d("MAWFetchExternalIdUsingCache").fetchExternalIdUsingCache(b).then(function(a){a!=null?c("promiseDone")(c("fetchSecureMissingMessage")(l,o.threadKey,a,p,m,c("LSMEBTaskCreationSource").EB_POINT_QUERY_BUMP_MESSAGES,"MAWFetchBumpMessage")):c("FBLogger")("mw_bump_message").warn("[useGetOriginalMsgFromBumpMsg] failed fetch external id, invalid msgId %s",b)}))}else c("promiseDone")(c("fetchOpenMissingMessage")(l,o,b));return g}g["default"]=a}),98);
__d("useAttachmentData",["react-compiler-runtime","useAttachmentDataLS","useGetOriginalMsgFromBumpMsg"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b=d("react-compiler-runtime").c(4);var e=c("useGetOriginalMsgFromBumpMsg")(a.replyType,a.replySourceId,a.threadKey);e=e!=null?e:a;a=d("useAttachmentDataLS").useAttachmentDataLS(e);e=a.attachmentCTAs;var f=a.attachmentItems;a=a.attachments;var g;b[0]!==e||b[1]!==f||b[2]!==a?(g={attachmentCTAs:e,attachmentItems:f,attachments:a},b[0]=e,b[1]=f,b[2]=a,b[3]=g):g=b[3];return g}g.useAttachmentData=a}),98);
__d("MWPAttachmentDataContext",["FBLogger","I64","ReQL","ReQLSuspense","react","react-compiler-runtime","useAttachmentData","useAttachmentDataLS","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react")),l=j,m=l.createContext,n=l.useContext,o=m({attachmentCTAs:[],attachmentItems:[],attachments:[]});function a(a){var b=d("react-compiler-runtime").c(3),c=a.children,e=a.isSecureMessage;a=a.message;a=d("useAttachmentData").useAttachmentData(a,e);b[0]!==a||b[1]!==c?(e=k.jsx(o.Provider,{value:a,children:c}),b[0]=a,b[1]=c,b[2]=e):e=b[2];return e}function b(a){var b=d("react-compiler-runtime").c(3),c=a.attachmentData;a=a.children;var e;b[0]!==c||b[1]!==a?(e=k.jsx(o.Provider,{value:c,children:a}),b[0]=c,b[1]=a,b[2]=e):e=b[2];return e}function e(a){var b=d("react-compiler-runtime").c(3),c=a.children;a=a.message;a=d("useAttachmentDataLS").useAttachmentDataLS(a);var e;b[0]!==a||b[1]!==c?(e=k.jsx(o.Provider,{value:a,children:c}),b[0]=a,b[1]=c,b[2]=e):e=b[2];return e}function p(a){var b=n(o).attachments;a=q(a);if(b.length===0&&a.length>0){c("FBLogger")("messenger_web_media","attachment_context_missing").info("MWPAttachmentContext is not set, failed to retrieve attachments from context, instead retrieved attachments directly from LSDB");return a}return b}function q(a){var b=d("react-compiler-runtime").c(10),e=(h||(h=c("useReStore")))(),g;b[0]!==e.tables.attachments||b[1]!==a.messageId||b[2]!==a.threadKey?(g=function(){return d("ReQL").fromTableAscending(e.tables.attachments).getKeyRange(a.threadKey,a.messageId)},b[0]=e.tables.attachments,b[1]=a.messageId,b[2]=a.threadKey,b[3]=g):g=b[3];var i;b[4]!==e||b[5]!==a.messageId||b[6]!==a.threadKey?(i=[e,a.messageId,a.threadKey],b[4]=e,b[5]=a.messageId,b[6]=a.threadKey,b[7]=i):i=b[7];g=d("ReQLSuspense").useArray(g,i,f.id+":99");b[8]!==g?(i=g.toSorted(r),b[8]=g,b[9]=i):i=b[9];return i}function r(a,b){return(i||(i=d("I64"))).compare(a.attachmentIndex,b.attachmentIndex)}function s(a){var b,e,f,g=(i||(i=d("I64"))).to_int32(a.attachmentIndex);b=(b=n(o).attachmentCTAs[g])!=null?b:{};var h=t(a),j=(b==null?void 0:b.defaultCta)==null&&(h==null?void 0:h.defaultCta)!=null||(b==null?void 0:b.attachmentCta1)==null&&(h==null?void 0:h.attachmentCta1)!=null;if(h!=null&&(e=h.attachmentCta1)!=null&&(e=e.type_)!=null&&e.includes("poll")||b!=null&&(f=b.attachmentCta1)!=null&&(f=f.type_)!=null&&f.includes("poll")){var k,l;g={attachmentIndex:g,contextCta1Type:(b==null||(k=b.attachmentCta1)==null?void 0:k.type_)||"null",contextHasCta1:(b==null?void 0:b.attachmentCta1)!=null,contextHasDefaultCta:(b==null?void 0:b.defaultCta)!=null,lsCta1Type:(h==null||(l=h.attachmentCta1)==null?void 0:l.type_)||"null",lsHasCta1:(h==null?void 0:h.attachmentCta1)!=null,lsHasDefaultCta:(h==null?void 0:h.defaultCta)!=null,messageId:a.messageId||"null",shouldUseFallback:j};c("FBLogger")("messenger_web_media","poll_cta_debug").info("Poll CTA debug: %s",JSON.stringify(g))}if(j){c("FBLogger")("messenger_web_media","attachment_context_missing").info("MWPAttachmentContext is not set, failed to retrieve attachmentCTAs from context, instead retrieved attachmentCTAs directly from LSDB");return h}return b}function t(a){var b=(h||(h=c("useReStore")))(),d={};d.defaultCta=u(b,a==null?void 0:a.defaultCtaId);d.attachmentCta1=u(b,a==null?void 0:a.attachmentCta1Id);d.attachmentCta2=u(b,a==null?void 0:a.attachmentCta2Id);d.attachmentCta3=u(b,a==null?void 0:a.attachmentCta3Id);return d}function u(a,b){var c=d("react-compiler-runtime").c(4),e,g;c[0]!==b||c[1]!==a?(e=function(){return b!=null?d("ReQL").fromTableAscending(a.tables.attachment_ctas).getKeyRange(b):d("ReQL").empty()},g=[a,b],c[0]=b,c[1]=a,c[2]=e,c[3]=g):(e=c[2],g=c[3]);return d("ReQLSuspense").useFirst(e,g,f.id+":176")}function v(a){var b;b=(b=n(o).attachmentItems)!=null?b:[];a=w(a);if(b.length===0&&a.length>0){c("FBLogger")("messenger_web_media","attachment_context_missing").info("MWPAttachmentContext is not set, failed to retrieve attachmentItems from context, instead retrieved attachmentItems directly from LSDB");return a}return b}function w(a){var b=d("react-compiler-runtime").c(6),e=(h||(h=c("useReStore")))(),g;b[0]!==a.attachmentFbid||b[1]!==e.tables.attachment_items?(g=function(){var b=a.attachmentFbid;return d("ReQL").fromTableAscending(e.tables.attachment_items).getKeyRange(b)},b[0]=a.attachmentFbid,b[1]=e.tables.attachment_items,b[2]=g):g=b[2];var i;b[3]!==a||b[4]!==e?(i=[a,e],b[3]=a,b[4]=e,b[5]=i):i=b[5];return d("ReQLSuspense").useArray(g,i,f.id+":206")}g.MWPAttachmentDataContext=o;g.MWPAttachmentDataContextProvider=a;g.MWPAttachmentDataContextProviderMAW=b;g.MWPAttachmentDataContextProviderLS=e;g.useMWPGetAttachments=p;g.useMWPGetAttachmentCTAs=s;g.useMWPGetAttachmentItems=v}),98);
__d("MWPReplyContext.react",["I64","emptyFunction","react","react-compiler-runtime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));b=h;e=b.createContext;b.useCallback;b.useMemo;var k=b.useState,l=c("requireDeferred")("MWPReplyLogging").__setRef("MWPReplyContext.react"),m=e({clearReply:c("emptyFunction"),reply:void 0,setReply:c("emptyFunction")});function n(a){try{return JSON.parse(a)}catch(a){return}}function a(a){var b=d("react-compiler-runtime").c(17),c=a.children,e=a.clearThreadReply,f=a.getRepliesState,g=a.persistRepliesState,h=a.senderId;a=a.threadKey;var o;b[0]!==f||b[1]!==a?(o=f!=null&&a!=null?n(f((i||(i=d("I64"))).to_string(a))):void 0,b[0]=f,b[1]=a,b[2]=o):o=b[2];f=o;a=k(f);var p=a[0],q=a[1];b[3]!==e||b[4]!==p?(o=function(a,b){l.onReady(function(c){c.logClearReply(b,a,p!=null)});q();if(e!=null)return e((i||(i=d("I64"))).to_string(a))},b[3]=e,b[4]=p,b[5]=o):o=b[5];f=o;b[6]!==g||b[7]!==p||b[8]!==h?(a=function(a,b){l.onReady(function(c){c.logSetReply(p,a,b)});q(a);if(g!=null)return g({messageId:a.messageId,offlineThreadingId:a.offlineThreadingId,senderId:h,sendStatusV2:a.sendStatusV2,threadKey:(i||(i=d("I64"))).to_string(b),timestampMs:a.timestampMs})},b[6]=g,b[7]=p,b[8]=h,b[9]=a):a=b[9];o=a;b[10]!==f||b[11]!==p||b[12]!==o?(a={clearReply:f,reply:p,setReply:o},b[10]=f,b[11]=p,b[12]=o,b[13]=a):a=b[13];f=a;o=f;b[14]!==c||b[15]!==o?(a=j.jsx(m.Provider,{value:o,children:c}),b[14]=c,b[15]=o,b[16]=a):a=b[16];return a}g.MWPReplyContext=m;g.MWPReplyContextProvider=a}),98);
__d("MWXMAAttachmentSharedStackConstants",[],(function(a,b,c,d,e,f){"use strict";a=213;b=160;f.STACK_ITEM_HEIGHT=a;f.STACK_ITEM_WIDTH=b}),66);
__d("RollCallContributionType",[],(function(a,b,c,d,e,f){a=Object.freeze({MEDIA:0,TEXT:1,LINK:2});f["default"]=a}),66);
__d("RollCallPromptType",[],(function(a,b,c,d,e,f){a=Object.freeze({MEDIA:0,TEXT:1,LINK:2});f["default"]=a}),66);
__d("PhotosMimeType",[],(function(a,b,c,d,e,f){function g(a){return h(a)[0]==="image"}function a(a){var b=h(a);return g(a)&&(b[1]==="jpeg"||b[1]==="pjpeg")}function h(a){return a.split("/")}f.isImage=g;f.isJpeg=a}),66);
__d("PhotosUploadID",[],(function(a,b,c,d,e,f){var g=1024;function a(){return(g++).toString()}f.getNewID=a}),66);
__d("ReactComposerMediaFilterUtils",["ComposerXNativeAudioUploadsConfig","VideoUploadConfig"],(function(a,b,c,d,e,f,g){function a(a){var b=h(a).length;a=i(a).length;return b>a}function b(a){return h(a).length>0}function d(a){return j(a).length>0}function h(a){return k(a,c("VideoUploadConfig").videoExtensions)}function i(a){var b={gif:!0};return k(a,b)}function j(a){var b={};Object.keys(c("ComposerXNativeAudioUploadsConfig").audioExtensions).forEach(function(a){b[a]=c("ComposerXNativeAudioUploadsConfig").audioExtensions[a]!==0});return k(a,b)}function k(a,b){return a.filter(function(a){a=a.indexOf(".")!==-1?(a=(a=a.split(".").pop())==null?void 0:a.toLowerCase())!=null?a:"":"";return b[a]})}g.hasEditableVideos=a;g.hasVideos=b;g.hasAudioFiles=d;g.filterVideos=h;g.filterNonEditableVideos=i;g.filterAudioFiles=j;g.filterFileOfSupportedType=k}),98);
__d("XSphericalPhotoSphereMetadataAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/spherical_media/photo/metadata/",{})}),null);
__d("SphericalImageUtils",["ImageMetadata","Promise","XAsyncRequest","XSphericalPhotoSphereMetadataAsyncController","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=2048;d=function(){function d(){}d.genArrayBufferFromBlob=function(c){return new(h||(h=b("Promise")))(function(b,d){if(a.FileReader){var e=new a.FileReader();e.onabort=d;e.onerror=d;e.onload=function(a){b(a.target.result)};e.readAsArrayBuffer(c)}else d(new Error("global.FileReader doesn't exit"))})};d.shouldCheckInServer=function(a){if(!a.hasExif()&&!a.hasXMP()||!a.hasSize())return!1;var b=a.getXMPString();if(this.getMayContainSphericalMetadata(b))return!0;var c=a.getSize(),d=c.x;c=c.y;if(Math.max(d,c)<i||d/c<2&&c/d<2)return!1;c=a.hasExif()?a.getExif():{};return b===""&&(!c.Make||!c.Model)?!1:!0};d.genPhotosphereMetadata=function(a){var d=this;return new(h||(h=b("Promise")))(function(b,e){c("promiseDone")(d.genArrayBufferFromBlob(a),function(a){try{var f=new(c("ImageMetadata"))(a);d.shouldCheckInServer(f)?c("promiseDone")(d.genPhotosphereMetadataFromServer(f.hasSize()?f.getSize():{x:0,y:0},f.getXMPString(),f.hasExif()?f.getExif():{}),function(a){a=a.payload;b({photoSphereMetadata:a,imageMetadata:f})},e):b({})}catch(a){a.__manual=!0,e(a)}},e)})};d.genPhotosphereMetadataFromServer=function(a,d,e){var f=this;return new(h||(h=b("Promise")))(function(b,g){new(c("XAsyncRequest"))(c("XSphericalPhotoSphereMetadataAsyncController").getURIBuilder().getURI()).setMethod("POST").setData({exif_string:f.getExifString(e),height:a.y,width:a.x,xmp:d}).setHandler(b).setErrorHandler(g).send()})};d.getExifString=function(a){return JSON.stringify(a,function(a,b){return a==="FocalLength"&&b.numerator&&b.denominator?b.numerator+"/"+b.denominator:b})};d.getMayContainSphericalMetadata=function(a){return a!==""&&a.indexOf("GPano:")>-1};return d}();g["default"]=d}),98);
__d("SphericalImage",["SphericalImageUtils"],(function(a,b,c,d,e,f,g){"use strict";var h="ProjectionType";a=function(){function a(a){this.props=a}a.createFromBlob=async function(a){a=await c("SphericalImageUtils").genPhotosphereMetadata(a);return new this(a)};var b=a.prototype;b.isSpherical=function(){return Boolean(this.props.photoSphereMetadata)};b.getImageMetadata=function(){return this.props.imageMetadata};b.getPhotoSphereMetadata=function(){return this.props.photoSphereMetadata};b.getSize=function(){return this.props.imageMetadata?this.props.imageMetadata.getSize():null};b.getBufferLength=function(){return this.props.imageMetadata?this.props.imageMetadata.getBufferLength():null};b.getProjectionType=function(){var a="";this.props.photoSphereMetadata&&this.props.photoSphereMetadata[h]&&(a=this.props.photoSphereMetadata[h]);return a};return a}();g.default=a}),98);
__d("SphericalPhotoUploadHelper",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){return b&&Math.max(b.x,b.y)<=c||a==="cubestrip"?!1:!0}function b(a,b,c){return b==null||b<=c||a==="cubestrip"?!1:!0}f.shouldResize360=a;f.shouldRecompress360=b}),66);
__d("curry",["bind"],(function(a,b,c,d,e,f,g){a=c("bind")(null,c("bind"),null);b=a;g["default"]=b}),98);
__d("loadImageFromBlob",["Promise"],(function(a,b,c,d,e,f){var g;function a(a){return new(g||(g=b("Promise")))(function(b,c){var d=new Image();d.onload=function(){URL.revokeObjectURL(d.src),b(d)};d.onerror=function(a){URL.revokeObjectURL(d.src),c(a)};d.src=URL.createObjectURL(a)})}f["default"]=a}),66);
__d("XComposerPhotoUploader",["AsyncUploadRequest","FileInputUploader","PhotosMimeType","PhotosUploadID","ReactComposerMediaFilterUtils","SphericalImage","SphericalPhotoTypedConfig","SphericalPhotoUploadHelper","curry","emptyFunction","loadImageFromBlob","performanceNow","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=a.URL||a.webkitURL||{};b=function(){function a(a){this.$6=!1,this.$21={},this.$2=a.uploadData||{},this.$1=a.uploadEndpoint,this.$3=a.retryLimit,this.$4=a.concurrentLimit,this.$5=a.resizer,this.$7=a.onUploadEnqueued||c("emptyFunction"),this.$8=a.onUploadsEnqueued||c("emptyFunction"),this.$9=a.onResizeStart||c("emptyFunction"),this.$12=a.onResizeProgress||c("emptyFunction"),this.$10=a.onResizeSuccess||c("emptyFunction"),this.$11=a.onResizeFailure||c("emptyFunction"),this.$13=a.onSphericalCheckFailure||c("emptyFunction"),this.$14=a.onSphericalCheckSuccess||c("emptyFunction"),this.$15=a.onUploadIsSpherical||c("emptyFunction"),this.$16=a.onUploadSent||c("emptyFunction"),this.$17=a.onUploadStart||c("emptyFunction"),this.$18=a.onUploadProgress||c("emptyFunction"),this.$19=a.onUploadSuccess||c("emptyFunction"),this.$20=a.onUploadFailure||c("emptyFunction"),this.$6=a.preventDefaultErrorHandler}var b=a.prototype;b.setUploadEndpoint=function(a){this.$1=a};b.setOption=function(a,b){this.$21[a]=b;return this};b.getUploadData=function(){return this.$2};b.setUploadData=function(a){this.$2=a};b.upload=function(a,b){var e=this;b||0;b=babelHelpers.extends({},this.$2);var f=null;if(!this.$22(a)){var g=d("PhotosUploadID").getNewID();a.uploadID=g;b.upload_id=g;this.$7({uploadID:g,fileName:a.value.split("/").pop().split("\\").pop(),fileURL:i.createObjectURL?i.createObjectURL(a):null})}else{f=Array.from(a.files);f=f.filter(function(a){return!d("ReactComposerMediaFilterUtils").hasVideos([a.name])});if(f.length===0)return;f.forEach(function(a){a.uploadID||(a.uploadID=d("PhotosUploadID").getNewID()),e.$7({uploadID:a.uploadID,fileName:a.name,isSpherical:!1,fileURL:i.createObjectURL?i.createObjectURL(a):null})})}this.$8();g=new(c("FileInputUploader"))(a).setURI(this.$1).setData(b).setAllowCrossOrigin(!0).setNetworkErrorRetryLimit(this.$3).setUploadInParallel(!0);f&&f.length>0&&(g.setFiles({farr:f}),this.$5?g.setPreprocessHandler(this.$23.bind(this)):g.setPreprocessHandler(this.$24.bind(this)),this.$4&&g.setConcurrentLimit(this.$4));g.subscribe("progress",function(b,c){return e.$18(e.$25(c,a),c)});g.subscribe("failure",function(b,c){return e.$20(e.$25(c,a),c,f)});g.subscribe("start",function(b,c){return e.$17(e.$25(c,a),c)});g.subscribe("success",function(b,c){return e.$19(e.$25(c,a),c)});try{g.send(),this.$16(a)}catch(a){throw a}};b.uploadFiles=function(a){var b=this;a=Array.from(a);var c=[];a.forEach(function(a){var e=d("PhotosUploadID").getNewID();a.uploadID||(a.uploadID=e);b.$7({fileName:a.name,fileURL:i.createObjectURL?i.createObjectURL(a):null,isSpherical:!1,uploadID:e});c.push(e)});a=this.getAsyncFileUploadRequest(a,c,this.$6===!0?{preventDefaultErrorHandler:this.$6}:void 0);a.send()};b.getAsyncFileUploadRequest=function(a,b,c){var d=this;c=this.$26(a,c);c.subscribe("start",function(c,e){c=(c=d.$25({upload:e},{}))!=null?c:d.$27(a,b,e);d.$17(c,{upload:e})});c.subscribe("progress",function(c,e){c=(c=d.$25({upload:e},{}))!=null?c:d.$27(a,b,e);d.$18(c,{upload:e,event:e.getProgressEvent()})});c.subscribe("success",function(c,e){c=(c=d.$25({upload:e},{}))!=null?c:d.$27(a,b,e);d.$19(c,{upload:e,response:e.getResponse()})});c.subscribe("failure",function(c,e){c=(c=d.$25({upload:e},{}))!=null?c:d.$27(a,b,e);return d.$20(c,{upload:e,response:e.getResponse()},a)});return c};b.getAsyncUploadRequest=function(a,b){var c=this;b=this.$26(a,b);b.subscribe("start",function(a,b){return c.$17(b.getFile().uploadID,{upload:b})});b.subscribe("progress",function(a,b){return c.$18(b.getFile().uploadID,{upload:b,event:b.getProgressEvent()})});b.subscribe("success",function(a,b){return c.$19(b.getFile().uploadID,{upload:b,response:b.getResponse()})});b.subscribe("failure",function(b,d){return c.$20(d.getFile().uploadID,{upload:d,response:d.getResponse()},a)});return b};b.$26=function(a,b){a=new(c("AsyncUploadRequest"))().setData(babelHelpers.extends({},b&&b.data,this.$2)).setFiles({farr:a}).setAllowCrossOrigin(!0).setURI(this.$1);b!=null&&b.preventDefaultErrorHandler&&a.setPreventDefaultErrorHandler(!0);this.$4&&a.setLimit(this.$4);this.$5?a.setPreprocessHandler(this.$23.bind(this)):a.setPreprocessHandler(this.$24.bind(this));for(b in this.$21)a.setOption(b,this.$21[b]);return a};b.$27=function(a,b,c){c=c.getFile();a=a.indexOf(c);return b[a]};b.$25=function(a,b){if(a.upload)return a.upload.getFile().uploadID;else return b.uploadID};b.$24=function(a,b){var d=this;c("promiseDone")(async function(){return await d.$28(a,b)}())};b.$28=async function(a,b){var c=a.getFile();c=await this.$29(c);var d=a.getFile().uploadID;c&&c.isSpherical()?this.$15(c.isSpherical(),c,d):this.$15(!1,null,"");b(a)};b.$23=function(a,b){var d=this;c("promiseDone")(async function(){return await d.$30(a,b)}())};b.$29=async function(a){var b=(h||(h=c("performanceNow")))();try{var d=await c("SphericalImage").createFromBlob(a);this.$14(a,(h||(h=c("performanceNow")))()-b,d);return d}catch(d){this.$13(a,(h||(h=c("performanceNow")))()-b);return null}};b.$31=function(a){return this.$32(this.$5.resizeBlob.bind(this.$5),a)};b.$33=function(a,b){b===void 0&&(b=c("SphericalPhotoTypedConfig").upload_size_limit);return this.$32(this.$5.resize360Blob.bind(this.$5),a,b)};b.$34=function(a){return c("loadImageFromBlob")(a).then(function(a){return{width:a.width,height:a.height}})};b.$32=function(a,b,d){var e=this,f=c("curry")(this.$12,b.uploadID),g=c("curry")(this.$9,b),h=function(){return e.$34(b).then(g)};return new Promise(function(c,e){h(),a(b,function(a,b,d,f,g,h,i){a?e(a):d?c({originalWidth:f,originalHeight:g}):c({blob:b,originalWidth:f,originalHeight:g,outputWidth:h,outputHeight:i})},f,d)})};b.$30=async function(a,b){var e=a.getFile(),f=this.$5.isEligible(e==null?void 0:e.size,e==null?void 0:e.type);if(!e||!d("PhotosMimeType").isJpeg(e.type)||!f){this.$15(!1,null,"");e&&c("promiseDone")(this.$34(e).then(function(b){a.getAdditionalData().set("js_resized",!1).set("original_file_size",e.size).set("original_width",b==null?void 0:b.width).set("original_height",b==null?void 0:b.height).set("upload_width",b==null?void 0:b.width).set("upload_height",b==null?void 0:b.height)},c("emptyFunction")));b(a);return}f=(h||(h=c("performanceNow")))();var g,i;try{var j=null;j=await this.$29(e);if(j&&j.isSpherical()){this.$15(!0,j,e.uploadID);var k=j.getSize(),l=c("SphericalPhotoTypedConfig").upload_size_limit,m=j.getProjectionType(),n=!1;n=d("SphericalPhotoUploadHelper").shouldRecompress360(m,j.getBufferLength(),c("SphericalPhotoTypedConfig").upload_bytes_limit);j=d("SphericalPhotoUploadHelper").shouldResize360(m,k,l);k&&(j||n)&&(!j?g=await this.$33(e,Math.max(k.x,k.y)-1):g=await this.$33(e))}else this.$15(!1,null,""),g=await this.$31(e);g&&(g.blob!=null&&(i=g.blob,i.uploadID=e.uploadID,i.name=e.name,a.setFile(i)),a.getAdditionalData().set("js_resized",!0).set("original_file_size",e.size).set("original_width",g.originalWidth).set("original_height",g.originalHeight).set("upload_width",g.outputWidth).set("upload_height",g.outputHeight));m=i===null;a.getFile().filename=e.name;this.$10(e,i||e,m,(h||(h=c("performanceNow")))()-f,a.getAdditionalData().get("original_width"),a.getAdditionalData().get("original_height"),a.getAdditionalData().get("upload_width"),a.getAdditionalData().get("upload_height"))}catch(a){l=(h||(h=c("performanceNow")))()-f;this.$11(e,i||e,a,l)}b(a)};b.$22=function(a){return!!a.files&&c("AsyncUploadRequest").isSupported()};return a}();g.default=b}),98);
__d("MWPromptCreationUtils",["I64","LSAuthorityLevel","LSFactory","LSIntEnum","LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure","LSMessagingThreadAttributionType","LSOptimisticContributeToTextPromptStoredProcedure","LSOptimisticCreateRollCallStoredProcedure","LSShape","LSVec","MWXMAAttachmentSharedStackConstants","MessagingAttachmentType","OfflineThreadingId","Promise","ReQL","RollCallContributionType","RollCallPromptType","XComposerPhotoUploader"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,e,g,k){return new(j||(j=b("Promise")))(function(b,j){a.runInTransaction(function(a){return c("LSOptimisticCreateRollCallStoredProcedure")(c("LSFactory")(a),{prompt:g,promptType:(h||(h=d("LSIntEnum"))).ofNumber(k),threadKey:e})},"readwrite",void 0,void 0,f.id+":49").then(function(e){var f=e[0],g=d("ReQL").fromTableAscending(a.tables.roll_calls).subscribe(function(a,e){if(e.operation==="add"||e.operation==="put"){a=e.value.offlineThreadingId;var h=(i||(i=d("I64"))).to_int32(e.value.authorityLevel)>=c("LSAuthorityLevel").AUTHORITATIVE;h&&a!=null&&(i||(i=d("I64"))).equal(a,f)&&(g(),b(e.value.rollCallId))}})})["catch"](function(a){j(a)})})}function k(a,b,e,g,h){return a.runInTransaction(function(a){return c("LSOptimisticContributeToTextPromptStoredProcedure")(c("LSFactory")(a),{productAttribution:String(c("LSMessagingThreadAttributionType").ROLLCALL),promptId:(i||(i=d("I64"))).to_string(g),senderId:b,text:h!=null?h:"",threadKey:e})},"readwrite",void 0,void 0,f.id+":91")}function l(a,b,e,g,j,k,l,m){var n,o=d("OfflineThreadingId").createOfflineThreadingID(),p=(n=m==null?void 0:m.startsWith("video/"))!=null?n:!1;return a.runInTransaction(function(a){return c("LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure")(c("LSFactory")(a),{extraSendMessageParams:d("LSShape").ofRecord({attachments:c("LSVec").ofArray([d("LSShape").ofRecord({attachment_fbid:o,attachment_index:(i||(i=d("I64"))).zero,attachment_type:(h||(h=d("LSIntEnum"))).ofNumber(p?c("MessagingAttachmentType").VIDEO:c("MessagingAttachmentType").IMAGE),has_media:!0,has_xma:!0,offline_attachment_id:o,playable_url:p?l:void 0,preview_height:i.of_float(d("MWXMAAttachmentSharedStackConstants").STACK_ITEM_HEIGHT),preview_url:p?void 0:l,preview_url_mime_type:p?void 0:m,preview_width:i.of_float(d("MWXMAAttachmentSharedStackConstants").STACK_ITEM_WIDTH)})]),contribution_type:h.ofNumber(c("RollCallContributionType").MEDIA),product_fbid:i.to_string(j),product_type:"roll_call",source:h.ofNumber(c("LSMessagingThreadAttributionType").ROLLCALL)}),senderId:b,text:k,threadKey:e,threadType:g})},"readwrite",void 0,void 0,f.id+":114").then(function(a){a=a[0];return a})}function e(a,d,e,f,g,h,i,m,n){switch(i){case c("RollCallPromptType").MEDIA:return l(a,d,e,f,g,h,m,n);case c("RollCallPromptType").TEXT:return k(a,d,e,g,h);default:return(j||(j=b("Promise"))).reject("Unsupported type")}}function m(a,b,e,f){var g=d("OfflineThreadingId").createOfflineThreadingID();a=a;a.uploadID=g;var h=new(c("XComposerPhotoUploader"))({onUploadFailure:function(a,b){},onUploadSuccess:function(a,b){},uploadEndpoint:"/messenger/upload_roll_call/"});h.getAsyncFileUploadRequest([a],[g],{data:{message_otid:e,roll_call_id:(i||(i=d("I64"))).to_string(b),thread_id:f}}).send()}g.createAuthoritiativeRollCall=a;g.createOptimisticRollCallMessage=e;g.startRollCallMediaUpload=m}),98);
__d("MWV2MessageRowActionsContext.react",["emptyFunction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;f=e.createContext;var j=e.useContext;e={current:c("emptyFunction")};var k={current:c("emptyFunction")},l={current:c("emptyFunction")};c={current:c("emptyFunction")};e={forwardMessage:e,openReactionsMenu:k,removeMessage:l,replyToMessage:c};var m=f(e);function a(){return j(m)}function b(a){var b=d("react-compiler-runtime").c(3),c=a.children;a=a.value;var e;b[0]!==c||b[1]!==a?(e=i.jsx(m.Provider,{value:a,children:c}),b[0]=c,b[1]=a,b[2]=e):e=b[2];return e}g.useMessageRowActionsContext=a;g.MWV2MessageRowActionsContextProvider=b}),98);
__d("MWV2OnlyGlobalRemoveMessageDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{}},root:c("JSResourceForInteraction")("MWV2OnlyGlobalRemoveMessageDialog.react").__setRef("MWV2OnlyGlobalRemoveMessageDialog.entrypoint")};g["default"]=a}),98);
__d("MessengerDiscoverableBroadcastChatsClientEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4148");b=d("FalcoLoggerInternal").create("messenger_discoverable_broadcast_chats_client_events",a);e=b;g["default"]=e}),98);
__d("MetaBrandExclamationTriangleFilled24Icon.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.203 2.088a2.028 2.028 0 0 1 3.594 0l8.956 16.86C23.486 20.326 22.5 22 20.956 22H3.044c-1.545 0-2.53-1.673-1.797-3.053l8.956-16.859zm3.048 14.91c0 .6-.417 1-1.25 1-.834 0-1.25-.4-1.25-1s.416-1 1.25-1c.833 0 1.25.4 1.25 1zm-.375-8.125a.875.875 0 0 0-1.75 0v4.975a.875.875 0 1 0 1.75 0V8.873z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MwbActorExperienceEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3231");b=d("FalcoLoggerInternal").create("mwb_actor_experience_event",a);e=b;g["default"]=e}),98);
__d("SubthreadCreationStrings.react",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a=h._(/*BTDS*/"Create sidechat");b=h._(/*BTDS*/"See sidechat");g.createSubthreadLabel=a;g.viewSubthreadLabel=b}),226);
__d("cdsPushToast",["BaseToasterStateManager","CDSIcon.react","MetaBrandExclamationTriangleFilled24Icon.react","basePushToast","deferredLoadComponent","getToastDurationFromTextLength","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=["action"],i,j=i||d("react"),k=c("BaseToasterStateManager").getInstance(),l=c("deferredLoadComponent")(c("requireDeferred")("CDSToast.react").__setRef("cdsPushToast"));function m(a,b){var e=b!=null?b:k;if(d("basePushToast").passesNewToastAPIGK())if(d("basePushToast").isInteractiveToast(a)){var f=d("basePushToast").pushPersistentToast(j.jsx(l,babelHelpers["extends"]({},a,{loadImmediately:!0,onDismiss:function(){return e.expire(f)}})),e);return f}else{a.action;b=babelHelpers.objectWithoutPropertiesLoose(a,h);b=babelHelpers["extends"]({withoutCloseButton:!0},b);var g=d("basePushToast").pushAlertToast(babelHelpers["extends"]({},b),j.jsx(l,babelHelpers["extends"]({},b,{loadImmediately:!0,onDismiss:function(){return e.expire(g)}})),e);return g}else{b=c("getToastDurationFromTextLength")(a.message.toString());var i=e.push(j.jsx(l,babelHelpers["extends"]({},a,{loadImmediately:!0,onDismiss:function(){return e.expire(i)}})),b);return i}}function a(a){return m({message:a})}function b(a,b){return m(babelHelpers["extends"]({},a,{addOnStart:j.jsx(c("CDSIcon.react"),{icon:c("MetaBrandExclamationTriangleFilled24Icon.react"),size:24})}),b)}function e(a,b){var c=b!=null?b:k,d=c.push(j.jsx(l,babelHelpers["extends"]({},a,{loadImmediately:!0,onDismiss:function(){return c.expire(d)}})),Infinity);return d}g.pushToast=m;g.pushSimpleToast=a;g.pushErrorToast=b;g.pushPersistentToast=e}),98);
__d("getMWOtherUserFBID",["I64","LSMessagingThreadTypeUtil","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;async function a(a,b,c,e){var f=d("LSMessagingThreadTypeUtil").isOneToOne(e);if(!f)return null;f=d("LSMessagingThreadTypeUtil").isArmadilloSecure(e);if(!f)return c;e=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.participants,["contactId"]).getKeyRange(c).filter(function(a){a=a.contactId;return!(h||(h=d("I64"))).equal(a,b)}).take(1));return e==null?void 0:e.contactId}g.getMWOtherUserFBID=a}),98);
__d("handleMWV2NoMessageOrTurn",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(){c("FBLogger")("gen_ai_feedback_actions").mustfix("Either message or turn must be provided")}g["default"]=a}),98);
__d("shouldUseImageGrouping",["I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){var c,e=a.displayedContentTypes,f=a.groupId;c=(h||(h=d("I64"))).to_int32((c=a.groupSize)!=null?c:(h||(h=d("I64"))).zero);return b&&(h||(h=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(2))&&f!=null&&a.groupIndex!=null&&a.groupSize!=null&&c>1}g["default"]=a}),98);
__d("threadCreationUtils",["I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){return(h||(h=d("I64"))).equal(a.creationStatus,(i||(i=d("LSIntEnum"))).ofNumber(b))}g.creationStatusEquals=a}),98);
__d("useGenAiFeedbackSubmittedToast",["fbt","cdsPushToast","handleMWV2NoMessageOrTurn","react","react-compiler-runtime","useMWXPushToast"],(function(a,b,c,d,e,f,g,h){"use strict";var i;(i||d("react")).useCallback;function a(a,b){var e=d("react-compiler-runtime").c(6),f=c("useMWXPushToast")(),g=j,i;e[0]!==a||e[1]!==f||e[2]!==b?(a?i=f:b?i=g:c("handleMWV2NoMessageOrTurn")(),e[0]=a,e[1]=f,e[2]=b,e[3]=i):i=e[3];e[4]!==i?(g=function(){i&&i({title:h._(/*BTDS*/"Feedback has been submitted")})},e[4]=i,e[5]=g):g=e[5];i;return g}function j(a){a=a.title;d("cdsPushToast").pushToast({message:a})}g["default"]=a}),226);
__d("useMediaDownloadStatusForGroup",["MAWMediaDownloadStatusUIStateType","react","react-compiler-runtime","useMAWMediaDownloadStatusBulk"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useMemo;function a(a,b,e){var f=d("react-compiler-runtime").c(19);bb0:{if(!b){f[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=[],f[0]=b):b=f[0];b=b;break bb0}if(f[1]!==e||f[2]!==a){var g;f[4]!==e?(g=function(a){var b=a.attachment;a=a.mediaStatus;return b==null?null:{attachment:b,mediaRenderQpl:e,mediaStatus:a,statusKey:b.attachmentFbid}},f[4]=e,f[5]=g):g=f[5];g=a.map(g).filter(Boolean);f[1]=e;f[2]=a;f[3]=g}else g=f[3];b=g}a=b;g=c("useMAWMediaDownloadStatusBulk")(a);b=g.uiStates;f[6]!==b?(g=b!=null?b:[],f[6]=b,f[7]=g):g=f[7];b=g;var h=b;f[8]!==h?(g=h.filter(j),f[8]=h,f[9]=g):g=f[9];b=g;g=b;if(f[10]!==a||f[11]!==h){f[13]!==h?(b=function(a,b){return a.attachment!=null&&d("MAWMediaDownloadStatusUIStateType").isRetryableErrorState(h[b])},f[13]=h,f[14]=b):b=f[14];b=a.filter(b).map(i);f[10]=a;f[11]=h;f[12]=b}else b=f[12];a=b;b=a;a=g.length;f[15]!==b||f[16]!==a||f[17]!==h?(g={attachmentsToRetryDownload:b,mediaDownloadErrorsCount:a,mediaDownloadStatuses:h},f[15]=b,f[16]=a,f[17]=h,f[18]=g):g=f[18];return g}function i(a){var b=a.attachment;a=a.mediaStatus;return{attachment:b,mediaStatus:a}}function j(a){return d("MAWMediaDownloadStatusUIStateType").isErrorState(a)}g["default"]=a}),98);
__d("useGetMediaGroupInformation",["I64","ReQL","ReQLSuspense","qex","react","shouldUseImageGrouping","useMediaDownloadStatusForGroup","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useMemo;function a(a,b,e){var g,j,l,m=(h||(h=c("useReStore")))(),n=a.groupId,o=a.threadKey;g=(i||(i=d("I64"))).to_int32((g=a.groupIndex)!=null?g:(i||(i=d("I64"))).zero);j=i.to_int32((j=a.groupSize)!=null?j:(i||(i=d("I64"))).zero);var p=c("shouldUseImageGrouping")(a,b);a=p?4:0;p&&j<4&&(a=j);var q=d("ReQLSuspense").useArray(function(){return p&&n!=null?d("ReQL").fromTableDescending(m.tables.messages.index("messageGroupId")).getKeyRange(n).map(function(a){var b;b=(b=d("ReQLSuspense").first(d("ReQL").fromTableDescending(m.tables.attachments).getKeyRange(o,a.messageId),f.id+":101"))!=null?b:null;var c=b!=null?d("ReQLSuspense").first(d("ReQL").fromTableDescending(m.tables.client_media_status).getKeyRange(b.attachmentFbid),f.id+":109"):void 0;return{attachment:b,mediaStatus:c,message:a}}):d("ReQL").empty()},[m,n,o,p],f.id+":93"),r=k(function(){return q.sort(function(a,b){return(i||(i=d("I64"))).to_int32((a=a.message.groupIndex)!=null?a:(i||(i=d("I64"))).zero)-i.to_int32((a=b.message.groupIndex)!=null?a:(i||(i=d("I64"))).zero)})},[q]),s=p&&r.length>=1?(b=r[0])==null?void 0:b.message:null;b=d("ReQLSuspense").useFirst(function(){if(!p||s==null)return d("ReQL").empty();var a;c("qex")._("18")?a=d("ReQL").fromTableAscending(m.tables.messages.index("messageDisplayOrderOfflineThreadingId")).getKeyRange(s.threadKey).bounds({gte:d("ReQL").key(s.primarySortKey,s.offlineThreadingId)}):a=d("ReQL").fromTableAscending(m.tables.messages.index("messageDisplayOrder")).getKeyRange(s.threadKey).bounds({gte:d("ReQL").key(s.primarySortKey)});return a.filter(function(a){return a.groupId!==s.groupId}).filter(function(a){return!a.isAdminMessage})},[m,s,p],f.id+":137");e=c("useMediaDownloadStatusForGroup")(r,p,e);var t=e.attachmentsToRetryDownload,u=e.mediaDownloadErrorsCount;e=e.mediaDownloadStatuses;if(p!==!0)return null;l=r.length>=1?(i||(i=d("I64"))).to_int32((l=(l=r[0])==null||(l=l.message)==null?void 0:l.groupIndex)!=null?l:(i||(i=d("I64"))).zero):0;l=g===l;var v=new Array(a),w=function(a){var b=r.findIndex(function(b){return b.message.groupIndex!=null&&(i||(i=d("I64"))).to_int32(b.message.groupIndex)===a});b===-1?v[a]={attachment:null,message:null}:v[a]={attachment:r[b].attachment,message:r[b].message}};for(var x=0;x<a&&x<a;++x)w(x);return{attachmentsToRetryDownload:t,groupId:n,groupIndex:g,groupSize:j,groupsLastMessage:r!=null&&r.length>0?r[r.length-1].message:null,groupsNextMessage:b!=null?b:null,hasAllMessagesSent:r.every(function(a){return(i||(i=d("I64"))).equal(a.message.sendStatusV2,i.of_int32(2))}),hasMissingMedia:r.some(function(a){return a.attachment==null}),hasMissingMessages:r.length!==j,isFirstMediaMessageInGroup:l,isMediaGroupLastMessage:b==null,mediaDownloadErrorsCount:u,mediaDownloadStatuses:e,messagesAndAttachments:r,messagesAndAttachmentsShownInGroup:v,tileSize:a}}g["default"]=a}),98);
__d("useMWV2LocalRemoveMessage",["I64","LSDict","LSIntEnum","LSTaskType","LSTasks","MWV2LogMessageClick","MessengerWebUXLogger","QPLUserFlow","Random","WebUserFlowLoggingDataContextProvider.react","promiseDone","qpl","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;b=k||d("react");b.useCallback;var l=b.useContext;function a(){var a=d("react-compiler-runtime").c(4),b=(h||(h=c("useReStore")))(),e=l(d("WebUserFlowLoggingDataContextProvider.react").WebUserFlowLoggingDataContext),g=e.loggingDataRef,k=c("MessengerWebUXLogger").useInteractionLogger();a[0]!==b||a[1]!==k||a[2]!==g?(e=function(a){var e=c("qpl")._(25308285,"2002"),h=Date.now()+(Math.round(d("Random").random()*1e4)+1e4);c("QPLUserFlow").start(e,{annotations:{string:{isEphemeralMessage:a.ephemeralDurationInSec!=null||a.ephemeralExpirationTs!=null?"true":"false",type:"openDeleteMessageForMe"}},instanceKey:h});d("MWV2LogMessageClick").log(b,a,46);c("promiseDone")(b.runInTransaction(function(b){return d("LSTasks").enqueue(b,c("LSTaskType").DeleteMessage,(i||(i=d("I64"))).to_string((j||(j=d("LSIntEnum"))).ofNumber(155)),new(c("LSDict"))([["message_id",a.messageId],["thread_key",a.threadKey]])).then(function(){k==null||k(babelHelpers["extends"]({},g.current,{eventName:"message_remove_success",eventType:"backend"})),c("QPLUserFlow").endSuccess(e,{instanceKey:h})})["catch"](function(a){return k==null?void 0:k(babelHelpers["extends"]({},g.current,{eventName:"message_remove_failure",eventType:"backend",extraData:babelHelpers["extends"]({},g.current.extraData,{error:a.toString()})}))})},"readwrite",void 0,void 0,f.id+":57"))},a[0]=b,a[1]=k,a[2]=g,a[3]=e):e=a[3];return e}g["default"]=a}),98);
__d("useHandleRemoveLocalMessage",["DeletionType.react","MessengerWebUXLogger","cr:9775","react","react-compiler-runtime","useGetMediaGroupInformation","useIsSecureMessage","useMWV2LocalRemoveMessage","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useCallback;function a(){return j}function j(a,b){}var k=b("cr:9775")||a;function e(a,b,e){var f=d("react-compiler-runtime").c(10),g=(h||(h=c("useReStore")))(),i=c("MessengerWebUXLogger").useInteractionLogger(),j;f[0]!==a?(j={fallbackThreadType:a},f[0]=a,f[1]=j):j=f[1];var l=c("useIsSecureMessage")(g,b,j),m=k(),n=c("useMWV2LocalRemoveMessage")(),o=c("useGetMediaGroupInformation")(b,l);f[2]!==l||f[3]!==n||f[4]!==i||f[5]!==o||f[6]!==b||f[7]!==e||f[8]!==m?(a=function(a){i==null||i(babelHelpers["extends"]({},a,{eventName:"message_remove_confirm"})),l?m(b,o):n(b),e&&e(c("DeletionType.react").Local)},f[2]=l,f[3]=n,f[4]=i,f[5]=o,f[6]=b,f[7]=e,f[8]=m,f[9]=a):a=f[9];return a}g["default"]=e}),98);
__d("useLogMAWEditMessage",["I64","LSMessagingThreadTypeUtil","LsFalcoEventEntryPoint","LsMessageActionFalcoEvent","MessengerWebUXLogger","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(h||d("react")).useCallback;function a(){var a=d("react-compiler-runtime").c(2),b=c("MessengerWebUXLogger").useInteractionLogger(),e;a[0]!==b?(e=function(a,e,f,g,h){d("LSMessagingThreadTypeUtil").isArmadilloSecure(a)?b==null||b({eventName:j(h)}):c("LsMessageActionFalcoEvent").log(function(){return{action:{type:k(h)},error:{message:void 0},extra:{is_community_chats:d("LSMessagingThreadTypeUtil").isPublicCMThread(a)?"1":"0"},message:{attachment_type:"",entry_point:d("LsFalcoEventEntryPoint").messageActions,id:f,recipient_id:(i||(i=d("I64"))).to_string(g)},thread:{group_size:i.to_string(i.zero),id:e!=null?(i||(i=d("I64"))).to_string(e):void 0,type:d("LSMessagingThreadTypeUtil").isGroup(a)?2:1}}})},a[0]=b,a[1]=e):e=a[1];return e}function j(a){switch(a){case"EDIT_MESSAGE":return"edit_message";case"EDIT_MESSAGE_CANCEL":return"edit_message_cancel";case"EDIT_MESSAGE_TAP":return"edit_message_tap"}}function k(a){switch(a){case"EDIT_MESSAGE":return 90;case"EDIT_MESSAGE_CANCEL":return 92;case"EDIT_MESSAGE_TAP":return 89}}g["default"]=a}),98);
__d("useOpenSubthreadView",["GroupsCometChatsEngagementLogger","I64","MWCMSubthreadChatTabContext.react","MWCMSubthreadsInboxFocusContext.react","MWInboxInfoPanelContext.react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("react-compiler-runtime").c(5),b=d("MWInboxInfoPanelContext.react").useMWInboxInfoPanelContext(),c=b.setCurrentSubthreadView,e=b.setSubthreadKey;b=(b=d("MWCMSubthreadChatTabContext.react").useSubthreadChatTabContext())!=null?b:{};var f=b.pushSubthreadViewPage;b=d("MWCMSubthreadsInboxFocusContext.react").useIsSubthreadFocusedContext();var g=b.setIsSubthreadFocused;a[0]!==f||a[1]!==c||a[2]!==g||a[3]!==e?(b=function(a,b){b=b===void 0?!1:b;d("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{is_chat_tab:f!=null?"1":"0",is_subthread:"1"},event:"thread_open",parent_surface:"thread_view",source:b===!0?"subthread_creation":"subthread_xma",surface:"subthread_view",thread_id:(h||(h=d("I64"))).to_string(a)});f!=null?f==null||f(a):(c("subthreadView"),e(a),g(!0))},a[0]=f,a[1]=c,a[2]=g,a[3]=e,a[4]=b):b=a[4];return b}g["default"]=a}),98);
__d("useMWCMCreateSubthread",["fbt","FBLogger","Int64Hooks","LSCommunityThreadCreationStatus","LSCreateCommunitySubThreadStoredProcedure","LSFactory","LSLocalCreateOptimisticCommunityChatSubThreadStoredProcedure","LSPlatformWaitForTaskCompletion","LSThreadBitOffset","MWLSThread","ReQL","ReQLSuspense","emptyFunction","promiseDone","react","threadCreationUtils","useCommunityFolder","useMWXPushErrorToast","useOpenSubthreadView","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;b=j||d("react");var k=b.useEffect,l=b.useRef,m=b.useState;function a(a){var b=(i||(i=c("useReStore")))(),e=d("MWLSThread").useThreadExn(a.threadKey),g=c("useCommunityFolder")(e),j=l(c("emptyFunction")),n=c("useMWXPushErrorToast")(),o=m(!1),p=o[0],q=o[1],r=c("useOpenSubthreadView")(),s=d("LSThreadBitOffset").has(206,e);k(function(){return function(){j==null||j.current()}},[]);o=d("Int64Hooks").useCallbackInt64(async function(){if(g==null)return;var d=await b.runInTransaction(function(b){return c("LSLocalCreateOptimisticCommunityChatSubThreadStoredProcedure")(c("LSFactory")(b),{communityId:g.folderId,parentMessageId:a.messageId,parentThreadId:a.threadKey})},"readwrite",void 0,void 0,f.id+":65");d=d[0];r(d,!0)},[b,g,a.messageId,a.threadKey,r]);e=d("Int64Hooks").useCallbackInt64(function(){if(s)return;var e=function(a){a=a[0];if(a==null)return i();var e=d("ReQL").fromTableAscending(b.tables.thread_creation_status).getKeyRange(a);a=d("ReQLSuspense").first(e,f.id+":97");a==null||d("threadCreationUtils").creationStatusEquals(a,c("LSCommunityThreadCreationStatus").PENDING)?g():h(a);function g(){j.current=e.subscribe(function(a,b){if(b.operation==="delete")return;a=b.value;if(d("threadCreationUtils").creationStatusEquals(a,c("LSCommunityThreadCreationStatus").PENDING))return;j.current();h(a)})}function h(a){q(!1);try{var b=a.threadId;if(d("threadCreationUtils").creationStatusEquals(a,c("LSCommunityThreadCreationStatus").FAILURE)||b==null)throw c("FBLogger")("cm_web").warn("sidechat creation failed");r(b,!0)}catch(a){i()}}},i=function(){q(!1),n({title:h._(/*BTDS*/"Sidechat creation failed")})};if(g==null)return;q(!0);c("promiseDone")(c("LSPlatformWaitForTaskCompletion")(b,function(b){return c("LSCreateCommunitySubThreadStoredProcedure")(c("LSFactory")(b),{communityId:g.folderId,parentMessageId:a.messageId,parentThreadId:a.threadKey})},"createSocialChannel"),function(a){return e(a)},i)},[b,g,s,a.messageId,a.threadKey,r,n]);return[s?o:e,p]}g.default=a}),226);
__d("useMWChatReactionsActionContainerProps.react",["I64","LSMessagingThreadTypeUtil","MAWPSendOrRemoveReaction.react","MWCMThreadTypes.react","MWChatMessageId","react","useIsReactionsV2Enabled"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useCallback,k=b.useMemo;function a(a,b,c,e,f,g){var h=d("LSMessagingThreadTypeUtil").isArmadilloSecure(c),l=(i||(i=d("I64"))).to_string(a.threadKey),m=i.to_string(a.timestampMs),n=k(function(){return d("MWChatMessageId").makeSent(l,a.messageId,m)},[l,a.messageId,m]),o=d("MAWPSendOrRemoveReaction.react").useSendOrRemoveReaction(a,h,"reaction_tray"),p=d("MWCMThreadTypes.react").isBroadcastThread(c);c=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(c);var q=d("useIsReactionsV2Enabled").useIsReactionsV2Enabled(a.threadKey),r=j(function(b,c){e&&e();return o(a.messageId,c?void 0:b,c?"remove_reaction":"reaction")},[e,o,a.messageId]),s=q&&p;return{closeActionsMenu:b,disableCustomReactions:s,hasReactionsV2:q,isBroadcastChannel:c,isBroadcastThread:p,isSecure:h,messageID:n,onVisibilityChange:f,reactionsPopoverResource:g,sendReaction:r}}g["default"]=a}),98);
__d("useMWFalcoFeatureEventLogger",["MWFalcoFeatureEventLogger","MWPActor.react","getMWOtherUserFBID","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useCallback;function a(a,b){var e=d("react-compiler-runtime").c(5),f=(h||(h=c("useReStore")))(),g=d("MWPActor.react").useActor(),i;e[0]!==g||e[1]!==f||e[2]!==a||e[3]!==b?(i=function(c,e){d("getMWOtherUserFBID").getMWOtherUserFBID(f,g,a,b).then(function(f){d("MWFalcoFeatureEventLogger").logEvent(c,e,f,a,b)})["catch"](j)},e[0]=g,e[1]=f,e[2]=a,e[3]=b,e[4]=i):i=e[4];return i}function j(){}g["default"]=a}),98);
__d("useMWPIsMessagePinned",["ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useDeferredValue;function a(a){var b=d("react-compiler-runtime").c(8),e=(h||(h=c("useReStore")))(),g,i;b[0]!==e||b[1]!==a?(g=function(){return a!=null?d("ReQL").fromTableAscending(e.tables.msg_pinned_messages_v2).getKeyRange(a.threadKey,a.messageId):d("ReQL").empty()},i=[e,a],b[0]=e,b[1]=a,b[2]=g,b[3]=i):(g=b[2],i=b[3]);g=!!d("ReQLSuspense").useFirst(g,i,f.id+":28");var k;b[4]!==e||b[5]!==a?(i=function(){return a!=null&&!a.isUnsent?d("ReQL").fromTableAscending(e.tables.client_web_pinned_messages).getKeyRange(a.threadKey,a.offlineThreadingId):d("ReQL").empty()},k=[e,a],b[4]=e,b[5]=a,b[6]=i,b[7]=k):(i=b[6],k=b[7]);b=!!d("ReQLSuspense").useFirst(i,k,f.id+":38");return j(g||b)}g["default"]=a}),98);
__d("useMWResponsiveCloseOnHide",["MWResponsiveLayoutContext.react","MWResponsiveLayoutShowState","react","react-compiler-runtime","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useEffect;function a(a,b){var e=d("react-compiler-runtime").c(7),f=a,g=i(c("MWResponsiveLayoutContext.react")),h=d("MWResponsiveLayoutShowState").getCardShowState(f,g)==="hidden",k=c("usePrevious")(h),l;e[0]!==b||e[1]!==g||e[2]!==h||e[3]!==a||e[4]!==k?(f=function(){h&&Boolean(k)===!1&&(g.popCard(a),b())},l=[k,h,a,g,b],e[0]=b,e[1]=g,e[2]=h,e[3]=a,e[4]=k,e[5]=f,e[6]=l):(f=e[5],l=e[6]);return j(f,l)}g["default"]=a}),98);
__d("useMWV2ShouldDisableReactions.react",["LSMessagingThreadTypeUtil","ReQL","ReQLSuspense","isFeatureLimitEnabled","react-compiler-runtime","useIsReactionsV2Enabled","useIsReadOnlyFeatureLimitedWithThreadType","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e=d("react-compiler-runtime").c(9),g;e[0]!==a?(g=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a),e[0]=a,e[1]=g):g=e[1];g=g;a=c("useIsReadOnlyFeatureLimitedWithThreadType")(a);var i;e[2]!==a||e[3]!==g?(i=(!g||c("isFeatureLimitEnabled")())&&a,e[2]=a,e[3]=g,e[4]=i):i=e[4];a=i;g=d("useIsReactionsV2Enabled").useIsReactionsV2Enabled(b);var j=(h||(h=c("useReStore")))();e[5]!==j.tables.reaction_v2_types?(i=function(){return d("ReQL").fromTableAscending(j.tables.reaction_v2_types)},e[5]=j.tables.reaction_v2_types,e[6]=i):i=e[6];e[7]!==j?(b=[j],e[7]=j,e[8]=b):b=e[8];e=d("ReQLSuspense").useFirst(i,b,f.id+":38")!=null;return a||g&&!e}g["default"]=a}),98);
__d("useSharedNUX",["CometNUXManagerContext","FBLogger","react","react-compiler-runtime","useNUXLoggers","useStable"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useEffect,k=b.useState;function a(a){var b=d("react-compiler-runtime").c(9),e;b[0]!==a?(e=function(){return a},b[0]=a,b[1]=e):e=b[1];var f=c("useStable")(e);f!==a&&c("FBLogger")("comet_ui").mustfix("Error nux changed at runtime from %s to %s, this is not supported and will lead to erratic behavior, we have continued to use your initially supplied nux",f!=null?f:"null",a!=null?a:"null");e=k(!1);var g=e[0],h=e[1];e=i(c("CometNUXManagerContext"));var l=e.registerNUX;e=e.removeNUX;var m,n;b[2]!==f||b[3]!==l?(m=function(){if(f==null)return;return l(f,h,!0)},n=[f,l],b[2]=f,b[3]=l,b[4]=m,b[5]=n):(m=b[4],n=b[5]);j(m,n);m=c("useNUXLoggers")(f,e);b[6]!==g||b[7]!==m?(n=[g,m],b[6]=g,b[7]=m,b[8]=n):n=b[8];return n}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("BaseDialogTitle.react",["BaseDialogLabelIDProvider","BasePlaceholderContext","react","react-compiler-runtime","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext;function a(a){var b=d("react-compiler-runtime").c(4),e=a.asBox;a=a.children;e=e===void 0?!1:e;var f=d("BaseDialogLabelIDProvider").useDialogHeaderID(),g=j(c("BasePlaceholderContext"));g=g===!0?null:f;b[0]!==e||b[1]!==a||b[2]!==g?(f=e?i.jsx(d("react-strict-dom").html.div,{id:g,children:a}):i.jsx(d("react-strict-dom").html.span,{id:g,children:a}),b[0]=e,b[1]=a,b[2]=g,b[3]=f):f=b[3];return f}g["default"]=a}),98);
__d("BaseIconButton.react",["BaseIsDecorativeContext","CometPressable.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["children","ref","variant"],i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(17),e,f,g,i;b[0]!==a?(e=a.children,g=a.ref,i=a.variant,f=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=i):(e=b[1],f=b[2],g=b[3],i=b[4]);a=i;i=a.xstyleConfig;a=f;a=a.disabled;var k=f.linkProps!=null?"link":"button",l=Boolean(a)&&i.pressableDisabled,m;b[5]!==l||b[6]!==i.pressable?(m=[i.pressable,l],b[5]=l,b[6]=i.pressable,b[7]=m):m=b[7];b[8]!==e?(l=j.jsx(c("BaseIsDecorativeContext").Provider,{value:!0,children:e}),b[8]=e,b[9]=l):l=b[9];b[10]!==a||b[11]!==f||b[12]!==g||b[13]!==k||b[14]!==m||b[15]!==l?(i=j.jsx(c("CometPressable.react"),babelHelpers["extends"]({},f,{disabled:a,ref:g,role:k,xstyle:m,children:l})),b[10]=a,b[11]=f,b[12]=g,b[13]=k,b[14]=m,b[15]=l,b[16]=i):i=b[16];return i}g["default"]=a}),98);
__d("BaseScrollRegionObserver.react",["intersectionObserverEntryIsIntersecting","react","react-compiler-runtime","stylex","useIntersectionObserver"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i.useMemo,l={end:{bottom:"x1ey2m1c",$$css:!0},start:{top:"x13vifvy",$$css:!0},target:{insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",left:null,right:null,opacity:"xg01cxk",position:"x10l6tqk",zIndex:"x8knxv4",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(9),c=a.end,e=a.rootRef;a=a.start;var f;b[0]!==e||b[1]!==a?(f=a?j.jsx(m,{callback:a.callback,rootRef:e,xstyle:[l.target,l.start,a.heightXStyle]}):null,b[0]=e,b[1]=a,b[2]=f):f=b[2];a=f;b[3]!==c||b[4]!==e?(f=c?j.jsx(m,{callback:c.callback,rootRef:e,xstyle:[l.target,l.end,c.heightXStyle]}):null,b[3]=c,b[4]=e,b[5]=f):f=b[5];c=f;b[6]!==c||b[7]!==a?(e=j.jsxs(j.Fragment,{children:[a,c]}),b[6]=c,b[7]=a,b[8]=e):e=b[8];return e}function m(a){var b=a.callback,d=a.rootRef;a=a.xstyle;var e=k(function(){return{root:function(){return d==null?void 0:d.current},rootMargin:{bottom:0,left:0,right:0,top:0},threshold:0}},[d]);e=c("useIntersectionObserver")(function(a){a=c("intersectionObserverEntryIsIntersecting")(a);b(a)},e);return j.jsx("div",babelHelpers["extends"]({},(h||(h=c("stylex"))).props(a),{ref:e}))}m.displayName=m.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CDSDialogHeaderFooterContainerContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({isInner:!1,isSticky:!1,showBackground:!1,xstyle:null});g["default"]=b}),98);
__d("CDSDialogHeaderContainer.react",["CDSDialogHeaderFooterContainerContext","react","react-compiler-runtime","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i.useContext,l={background:{backgroundColor:"x1jx94hy",$$css:!0},header:{alignItems:"x6s0dn4",display:"x78zum5",flexShrink:"x2lah0s",insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",justifyContent:"x1qughib",minHeight:"x8nclml",position:"x1n2onr6 xv7j57z",top:"x13vifvy",zIndex:"x1vjfegm",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(8),e=a.addOnBottom,f=a.children;a=a.xstyle;var g=k(c("CDSDialogHeaderFooterContainerContext")),i=g.showBackground;g=g.xstyle;var m;b[0]!==g||b[1]!==i||b[2]!==a?(m=(h||(h=c("stylex"))).props(l.header,i===!0&&l.background,g,a),b[0]=g,b[1]=i,b[2]=a,b[3]=m):m=b[3];b[4]!==e||b[5]!==f||b[6]!==m?(g=j.jsxs("div",babelHelpers["extends"]({},m,{children:[f,e]})),b[4]=e,b[5]=f,b[6]=m,b[7]=g):g=b[7];return g}g["default"]=a}),98);
__d("MetaLockup.react",["fbt","react","react-compiler-runtime","stylex","useCurrentDisplayMode"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react")),l=j.useId,m={10:{height:"x170jfvy",width:"x1pju0fl",$$css:!0},12:{height:"x1kpxq89",width:"x1247r65",$$css:!0},16:{height:"xlup9mm",width:"x1dmp6jm",$$css:!0},20:{height:"x1qx5ct2",width:"x1exxlbk",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(17),e=a.fill,f=a.size;a=a.xstyle;var g=l(),h=l(),i=l(),j=l(),m=c("useCurrentDisplayMode")();m=m==="dark";var p=f<=12;e=e!=null?e:m?"#DEE3E9":null;if(p){b[0]!==h||b[1]!==i||b[2]!==j||b[3]!==m||b[4]!==e||b[5]!==f||b[6]!==a?(p=k.jsx(n,{fill:e,gradientAId:h,gradientBId:i,gradientCId:j,isDarkModeEnabled:m,size:f,xstyle:a}),b[0]=h,b[1]=i,b[2]=j,b[3]=m,b[4]=e,b[5]=f,b[6]=a,b[7]=p):p=b[7];return p}b[8]!==g||b[9]!==h||b[10]!==i||b[11]!==j||b[12]!==m||b[13]!==e||b[14]!==f||b[15]!==a?(p=k.jsx(o,{clipPathId:g,fill:e,gradientAId:h,gradientBId:i,gradientCId:j,isDarkModeEnabled:m,size:f,xstyle:a}),b[8]=g,b[9]=h,b[10]=i,b[11]=j,b[12]=m,b[13]=e,b[14]=f,b[15]=a,b[16]=p):p=b[16];return p}function n(a){var b=d("react-compiler-runtime").c(26),e=a.fill,f=a.gradientAId,g=a.gradientBId,j=a.gradientCId,l=a.isDarkModeEnabled,n=a.size;a=a.xstyle;var o;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(o=h._(/*BTDS*/"Meta logo"),b[0]=o):o=b[0];var p;b[1]!==n||b[2]!==a?(p=(i||(i=c("stylex"))).props([a,m[n]]),b[1]=n,b[2]=a,b[3]=p):p=b[3];b[4]!==e||b[5]!==f||b[6]!==g||b[7]!==j||b[8]!==l?(n=!l&&e==null&&k.jsxs("defs",{children:[k.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:f,x1:"124.38",x2:"160.839",y1:"99",y2:"59.326",children:[k.jsx("stop",{offset:".427",stopColor:"#0278F1"}),k.jsx("stop",{offset:".917",stopColor:"#0180FA"})]}),k.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:g,x1:"42",x2:"-1.666",y1:"4.936",y2:"61.707",children:[k.jsx("stop",{offset:".427",stopColor:"#0165E0"}),k.jsx("stop",{offset:".917",stopColor:"#0180FA"})]}),k.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:j,x1:"27.677",x2:"132.943",y1:"28.71",y2:"71.118",children:[k.jsx("stop",{stopColor:"#0064E0"}),k.jsx("stop",{offset:".656",stopColor:"#0066E2"}),k.jsx("stop",{offset:"1",stopColor:"#0278F1"})]})]}),b[4]=e,b[5]=f,b[6]=g,b[7]=j,b[8]=l,b[9]=n):n=b[9];a=e!=null?e:"#1C2B33";var q;b[10]!==a?(q=k.jsx("path",{d:"M185.508 3.01h18.704l31.803 57.313L267.818 3.01h18.297v94.175h-15.264v-72.18l-27.88 49.977h-14.319l-27.88-49.978v72.18h-15.264V3.01ZM336.281 98.87c-7.066 0-13.286-1.565-18.638-4.674-5.352-3.12-9.527-7.434-12.528-12.952-2.989-5.517-4.483-11.835-4.483-18.973 0-7.214 1.461-13.608 4.385-19.17 2.923-5.561 6.989-9.908 12.187-13.05 5.198-3.13 11.176-4.707 17.923-4.707 6.715 0 12.484 1.587 17.319 4.74 4.847 3.164 8.572 7.598 11.177 13.291 2.615 5.693 3.923 12.371 3.923 20.046v4.171h-51.793c.945 5.737 3.275 10.258 6.989 13.554 3.715 3.295 8.407 4.937 14.078 4.937 4.549 0 8.461-.667 11.747-2.014 3.286-1.347 6.374-3.383 9.253-6.12l8.099 9.886c-8.055 7.357-17.934 11.036-29.638 11.036Zm11.143-55.867c-3.198-3.252-7.385-4.872-12.56-4.872-5.045 0-9.264 1.653-12.66 4.97-3.407 3.318-5.55 7.784-6.451 13.39h37.133c-.451-5.737-2.275-10.237-5.462-13.488ZM386.513 39.467h-14.044V27.03h14.044V6.447h14.715V27.03h21.341v12.437h-21.341v31.552c0 5.244.901 8.988 2.703 11.233 1.803 2.244 4.88 3.36 9.253 3.36 1.935 0 3.572-.076 4.924-.23a97.992 97.992 0 0 0 4.461-.645v12.316c-1.67.493-3.549.898-5.637 1.205-2.099.317-4.286.47-6.583.47-15.89 0-23.836-8.649-23.836-25.957V39.467ZM500 97.185h-14.44v-9.82c-2.571 3.678-5.835 6.513-9.791 8.506-3.968 1.993-8.462 3-13.506 3-6.209 0-11.715-1.588-16.506-4.752-4.803-3.153-8.572-7.51-11.308-13.039-2.748-5.54-4.121-11.879-4.121-19.006 0-7.17 1.395-13.52 4.187-19.038 2.791-5.518 6.648-9.843 11.571-12.985 4.935-3.13 10.594-4.707 16.99-4.707 4.813 0 9.132.93 12.956 2.791a25.708 25.708 0 0 1 9.528 7.905v-9.01H500v70.155Zm-14.715-45.61c-1.571-3.985-4.066-7.138-7.461-9.448-3.396-2.31-7.33-3.46-11.781-3.46-6.308 0-11.319 2.102-15.055 6.317-3.737 4.215-5.605 9.92-5.605 17.09 0 7.215 1.802 12.94 5.396 17.156 3.604 4.215 8.484 6.317 14.66 6.317 4.538 0 8.593-1.16 12.154-3.492 3.549-2.332 6.121-5.475 7.692-9.427V51.575Z",fill:a}),b[10]=a,b[11]=q):q=b[11];a=e!=null?e:"#0180FA";var r;b[12]!==a?(r=k.jsx("path",{d:"M107.666 0C95.358 0 86.865 4.504 75.195 19.935 64.14 5.361 55.152 0 42.97 0 18.573 0 0 29.768 0 65.408 0 86.847 12.107 99 28.441 99c15.742 0 25.269-13.2 33.445-27.788l9.663-16.66a643.785 643.785 0 0 1 2.853-4.869 746.668 746.668 0 0 1 3.202 5.416l9.663 16.454C99.672 92.72 108.126 99 122.45 99c16.448 0 27.617-13.723 27.617-33.25 0-37.552-19.168-65.75-42.4-65.75ZM57.774 46.496l-9.8 16.25c-9.595 15.976-13.639 19.526-19.67 19.526-6.373 0-11.376-5.325-11.376-17.547 0-24.51 12.062-47.451 26.042-47.451 7.273 0 12.678 3.61 22.062 17.486a547.48 547.48 0 0 0-7.258 11.736Zm64.308 35.776c-6.648 0-11.034-4.233-20.012-19.39l-9.663-16.386c-2.79-4.737-5.402-9.04-7.88-12.945 9.73-14.24 15.591-17.984 23.002-17.984 14.118 0 26.204 20.96 26.204 49.158 0 11.403-4.729 17.547-11.651 17.547Z",fill:a}),b[12]=a,b[13]=r):r=b[13];b[14]!==e||b[15]!==f||b[16]!==g||b[17]!==j||b[18]!==l?(a=!l&&e==null&&k.jsxs(k.Fragment,{children:[k.jsx("path",{d:"M145.631 36h-16.759c3.045 7.956 4.861 17.797 4.861 28.725 0 11.403-4.729 17.547-11.651 17.547H122v16.726l.449.002c16.448 0 27.617-13.723 27.617-33.25 0-10.85-1.6-20.917-4.435-29.75Z",fill:"url(#"+f+")"}),k.jsx("path",{d:"M42 .016C18.63.776.832 28.908.028 63h16.92C17.483 39.716 28.762 18.315 42 17.31V.017Z",fill:"url(#"+g+")"}),k.jsx("path",{d:"m75.195 19.935.007-.009c2.447 3.223 5.264 7.229 9.33 13.62l-.005.005c2.478 3.906 5.09 8.208 7.88 12.945l9.663 16.386c8.978 15.157 13.364 19.39 20.012 19.39.31 0 .617-.012.918-.037v16.76c-.183.003-.367.005-.551.005-14.323 0-22.777-6.281-35.182-27.447L77.604 55.1l-.625-1.065L77 54c-2.386-4.175-7.606-12.685-11.973-19.232l.005-.008-.62-.91C63.153 31.983 61.985 30.313 61 29l-.066.024c-7.006-9.172-11.818-11.75-17.964-11.75-.324 0-.648.012-.97.037V.016c.322-.01.646-.016.97-.016 12.182 0 21.17 5.36 32.225 19.935Z",fill:"url(#"+j+")"})]}),b[14]=e,b[15]=f,b[16]=g,b[17]=j,b[18]=l,b[19]=a):a=b[19];b[20]!==p||b[21]!==n||b[22]!==q||b[23]!==r||b[24]!==a?(e=k.jsxs("svg",babelHelpers["extends"]({"aria-label":o},p,{role:"img",viewBox:"0 0 500 100",children:[n,q,r,a]})),b[20]=p,b[21]=n,b[22]=q,b[23]=r,b[24]=a,b[25]=e):e=b[25];return e}function o(a){var b=d("react-compiler-runtime").c(30),e=a.clipPathId,f=a.fill,g=a.gradientAId,j=a.gradientBId,l=a.gradientCId,n=a.isDarkModeEnabled,o=a.size;a=a.xstyle;var p;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(p=h._(/*BTDS*/"Meta logo"),b[0]=p):p=b[0];var q;b[1]!==o||b[2]!==a?(q=(i||(i=c("stylex"))).props([a,m[o]]),b[1]=o,b[2]=a,b[3]=q):q=b[3];b[4]!==e||b[5]!==f||b[6]!==g||b[7]!==j||b[8]!==l||b[9]!==n?(o=!n&&f==null&&k.jsxs("defs",{children:[k.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:g,x1:"125",x2:"160.217",y1:"97",y2:"57.435",children:[k.jsx("stop",{offset:".21",stopColor:"#0278F1"}),k.jsx("stop",{offset:".533",stopColor:"#0180FA"})]}),k.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:j,x1:"44",x2:"0",y1:"5",y2:"64",children:[k.jsx("stop",{offset:".427",stopColor:"#0165E0"}),k.jsx("stop",{offset:".917",stopColor:"#0180FA"})]}),k.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:l,x1:"28.5",x2:"135",y1:"29",y2:"72",children:[k.jsx("stop",{stopColor:"#0064E0"}),k.jsx("stop",{offset:".656",stopColor:"#0066E2"}),k.jsx("stop",{offset:"1",stopColor:"#0278F1"})]}),k.jsx("clipPath",{id:e,children:k.jsx("path",{d:"M0 0h496.236v100H0z",fill:"#fff"})})]}),b[4]=e,b[5]=f,b[6]=g,b[7]=j,b[8]=l,b[9]=n,b[10]=o):o=b[10];a="url(#"+e+")";e=f!=null?f:"#1C2B33";var r;b[11]!==e?(r=k.jsx("path",{d:"M182.141 3.213h18.808l31.98 57.849 31.979-57.849h18.401V98.27h-15.345V25.416l-28.042 50.448h-14.394l-28.042-50.448V98.27h-15.345V3.213ZM332.804 99.967c-7.107 0-13.353-1.573-18.739-4.718-5.387-3.146-9.586-7.504-12.595-13.07-3.011-5.569-4.515-11.95-4.515-19.148 0-7.287 1.47-13.738 4.413-19.35 2.942-5.613 7.027-10.004 12.255-13.173 5.229-3.168 11.238-4.753 18.027-4.753 6.744 0 12.55 1.596 17.416 4.787 4.865 3.191 8.611 7.661 11.237 13.41 2.624 5.749 3.938 12.492 3.938 20.233v4.21h-52.077c.95 5.794 3.292 10.354 7.027 13.68 3.735 3.328 8.453 4.991 14.157 4.991 4.571 0 8.509-.679 11.814-2.037 3.303-1.358 6.404-3.417 9.302-6.178l8.147 9.98c-8.103 7.425-18.038 11.136-29.807 11.136Zm11.204-56.389c-3.215-3.281-7.425-4.923-12.629-4.923-5.07 0-9.314 1.676-12.731 5.025-3.418 3.35-5.58 7.854-6.484 13.512h37.343c-.453-5.794-2.286-10.331-5.499-13.614ZM382.846 40.014h-14.123V27.453h14.123V6.676h14.802v20.777h21.455v12.561h-21.455v31.844c0 5.295.905 9.075 2.716 11.338 1.809 2.264 4.911 3.395 9.302 3.395 1.945 0 3.598-.078 4.956-.237a92.35 92.35 0 0 0 4.481-.646v12.425c-1.675.498-3.564.906-5.669 1.223a44.63 44.63 0 0 1-6.62.475c-15.979 0-23.968-8.735-23.968-26.208V40.014ZM496.236 98.27h-14.53v-9.913c-2.58 3.712-5.862 6.575-9.845 8.588-3.983 2.014-8.51 3.022-13.579 3.022-6.247 0-11.78-1.596-16.601-4.787s-8.612-7.581-11.373-13.172c-2.761-5.59-4.142-11.983-4.142-19.18 0-7.243 1.403-13.648 4.21-19.216 2.806-5.567 6.688-9.935 11.645-13.104 4.956-3.168 10.648-4.753 17.075-4.753 4.844 0 9.189.94 13.037 2.818a25.768 25.768 0 0 1 9.573 7.978v-9.098h14.53V98.27Zm-14.801-46.035c-1.585-4.028-4.085-7.207-7.503-9.54-3.418-2.33-7.367-3.496-11.848-3.496-6.338 0-11.384 2.128-15.141 6.382-3.758 4.255-5.635 10.004-5.635 17.246 0 7.289 1.809 13.06 5.431 17.314 3.621 4.255 8.532 6.382 14.734 6.382 4.571 0 8.645-1.176 12.222-3.53 3.575-2.353 6.155-5.522 7.74-9.506V52.235Z",fill:e}),b[11]=e,b[12]=r):r=b[12];e=f!=null?f:"#0180FA";var s;b[13]!==e?(s=k.jsx("path",{d:"M108 0C95.66 0 86.015 9.294 77.284 21.1 65.284 5.821 55.25 0 43.24 0 18.76 0 0 31.862 0 65.586 0 86.69 10.21 100 27.31 100c12.308 0 21.16-5.803 36.897-33.31 0 0 6.56-11.584 11.072-19.564 1.582 2.553 3.243 5.3 4.997 8.253l7.38 12.414C102.03 91.848 110.038 100 124.551 100c16.659 0 25.931-13.492 25.931-35.034C150.483 29.656 131.301 0 108 0ZM52.207 59.241c-12.759 20-17.172 24.483-24.276 24.483-7.31 0-11.655-6.418-11.655-17.862 0-24.483 12.207-49.517 26.759-49.517 7.88 0 14.465 4.55 24.552 18.991-9.578 14.691-15.38 23.905-15.38 23.905Zm48.153-2.517-8.823-14.715a301.425 301.425 0 0 0-6.884-10.723c7.952-12.274 14.511-18.39 22.313-18.39 16.206 0 29.172 23.863 29.172 53.173 0 11.172-3.659 17.655-11.241 17.655-7.268 0-10.739-4.8-24.537-27Z",fill:e}),b[13]=e,b[14]=s):s=b[14];b[15]!==f||b[16]!==g||b[17]!==j||b[18]!==l||b[19]!==n?(e=!n&&f==null&&k.jsxs(k.Fragment,{children:[k.jsx("path",{d:"M145.586 35H130.66c3.452 8.746 5.478 19.482 5.478 31.069 0 11.172-3.659 17.655-11.241 17.655-1.407 0-2.672-.18-3.897-.631V99.82c1.143.122 2.324.18 3.552.18 16.659 0 25.931-13.492 25.931-35.034 0-10.737-1.774-20.95-4.897-29.966Z",fill:"url(#"+g+")"}),k.jsx("path",{d:"M43.241 0c.254 0 .507.003.759.008v16.36c-.32-.015-.642-.023-.965-.023-14.183 0-26.139 23.782-26.736 47.655H.014C.59 30.87 19.143 0 43.24 0Z",fill:"url(#"+j+")"}),k.jsx("path",{d:"M43.241 0c11.152 0 20.601 5.02 31.502 17.971 3.065 3.828 6.761 8.805 10.716 14.557l.017.025.025-.003a311.041 311.041 0 0 1 6.036 9.459l8.823 14.715c13.798 22.2 17.269 27 24.537 27H125v16.273c-.149.002-.298.003-.448.003-14.513 0-22.522-8.152-36.897-32.207l-7.38-12.414a596.368 596.368 0 0 0-2.294-3.834L78 51.5c-5.5-9-9-14.5-12-18.5l-.05.038c-9.18-12.63-15.47-16.693-22.916-16.693H43V0L43.241 0Z",fill:"url(#"+l+")"})]}),b[15]=f,b[16]=g,b[17]=j,b[18]=l,b[19]=n,b[20]=e):e=b[20];b[21]!==a||b[22]!==r||b[23]!==s||b[24]!==e?(f=k.jsxs("g",{clipPath:a,children:[r,s,e]}),b[21]=a,b[22]=r,b[23]=s,b[24]=e,b[25]=f):f=b[25];b[26]!==f||b[27]!==q||b[28]!==o?(g=k.jsxs("svg",babelHelpers["extends"]({"aria-label":p},q,{role:"img",viewBox:"0 0 500 100",children:[o,f]})),b[26]=f,b[27]=q,b[28]=o,b[29]=g):g=b[29];return g}g["default"]=a}),226);
__d("MetaLockupPrimary.react",["MetaLockup.react"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("MetaLockup.react")}),98);
__d("CDSDialogMetaLockupHeading.react",["MetaLockupPrimary.react","react","react-compiler-runtime","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={companyLogo:{alignItems:"x6s0dn4",display:"x78zum5",marginInlineStart:"x1diwwjn",marginInlineEnd:"xbmvrgn",marginLeft:null,marginRight:null,$$css:!0}};function a(){var a=d("react-compiler-runtime").c(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=i.jsx(d("react-strict-dom").html.div,{style:j.companyLogo,children:i.jsx(c("MetaLockupPrimary.react"),{size:12})}),a[0]=b):b=a[0];return b}g["default"]=a}),98);
__d("CDSDialogTitle.react",["BaseDialogTitle.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(2);a=a.children;var e;b[0]!==a?(e=i.jsx(c("BaseDialogTitle.react"),{children:a}),b[0]=a,b[1]=e):e=b[1];return e}g["default"]=a}),98);
__d("CDSIconButtonVariants",[],(function(a,b,c,d,e,f,g){"use strict";a={pressable:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",display:"x3nfvp2",paddingTop:"x1y1aw1k",paddingInlineEnd:"xf159sx",paddingBottom:"xwib8y2",paddingInlineStart:"xmzvs34",transform:"x19kf12q",$$css:!0},pressableDisabled:{opacity:"xti2d7y",$$css:!0}};b={contained:{backgroundColor:"x1jx94hy",boxShadow:"xi1c1fh",$$css:!0},primary:{backgroundColor:"xtvsq51",$$css:!0},primaryOnMedia:{backgroundColor:"xyyilqk",$$css:!0},secondary:{backgroundColor:"x1qhmfi1",borderTopColor:"x1s9qjmn",borderInlineEndColor:"x71vvrb",borderBottomColor:"x7gj0x1",borderInlineStartColor:"x167l43f",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",$$css:!0}};c={dense:{paddingTop:"x1iorvi4",paddingBottom:"xjkvuk6",paddingInlineStart:"x135b78x",paddingInlineEnd:"x11lfxj5",paddingLeft:null,paddingRight:null,$$css:!0},regular:{paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2",paddingInlineStart:"xmzvs34",paddingInlineEnd:"xf159sx",paddingLeft:null,paddingRight:null,$$css:!0}};d={xstyleConfig:{pressable:a.pressable,pressableDisabled:a.pressableDisabled}};e={xstyleConfig:babelHelpers["extends"]({},d.xstyleConfig,{pressable:[a.pressable,b.contained]})};f={xstyleConfig:babelHelpers["extends"]({},d.xstyleConfig,{pressable:[a.pressable,b.primary]})};var h={xstyleConfig:babelHelpers["extends"]({},d.xstyleConfig,{pressable:[a.pressable,b.primaryOnMedia]})};a={xstyleConfig:babelHelpers["extends"]({},d.xstyleConfig,{pressable:[a.pressable,b.secondary]})};b={xstyleConfig:{pressable:[c.dense]}};c={xstyleConfig:{pressable:[c.regular]}};g.CDSIconButtonDefaultVariant=d;g.CDSIconButtonContainedVariant=e;g.CDSIconButtonPrimaryVariant=f;g.CDSIconButtonPrimaryOnMediaVariant=h;g.CDSIconButtonSecondaryVariant=a;g.CDSIconButtonDenseVariant=b;g.CDSIconButtonRegularVariant=c}),98);
__d("CDSIconButton.react",["BaseIconButton.react","CDSIconButtonVariants","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["children","density","ref","type","xstyle"],i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(16),e,f,g,i,l,m;b[0]!==a?(e=a.children,i=a.density,g=a.ref,l=a.type,m=a.xstyle,f=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=i,b[5]=l,b[6]=m):(e=b[1],f=b[2],g=b[3],i=b[4],l=b[5],m=b[6]);a=i===void 0?"regular":i;i=l===void 0?"default":l;if(b[7]!==a||b[8]!==i||b[9]!==m){l=k(i);var n=a==="regular"?d("CDSIconButtonVariants").CDSIconButtonRegularVariant:d("CDSIconButtonVariants").CDSIconButtonDenseVariant;l.xstyleConfig.pressable=[l.xstyleConfig.pressable,n.xstyleConfig.pressable,m];b[7]=a;b[8]=i;b[9]=m;b[10]=l}else l=b[10];b[11]!==e||b[12]!==f||b[13]!==g||b[14]!==l?(n=j.jsx(c("BaseIconButton.react"),babelHelpers["extends"]({},f,{ref:g,variant:l,children:e})),b[11]=e,b[12]=f,b[13]=g,b[14]=l,b[15]=n):n=b[15];return n}function k(a){switch(a){case"contained":return d("CDSIconButtonVariants").CDSIconButtonContainedVariant;case"primary":return d("CDSIconButtonVariants").CDSIconButtonPrimaryVariant;case"primary-on-media":return d("CDSIconButtonVariants").CDSIconButtonPrimaryOnMediaVariant;case"secondary":return d("CDSIconButtonVariants").CDSIconButtonSecondaryVariant;default:return d("CDSIconButtonVariants").CDSIconButtonDefaultVariant}}g["default"]=a}),98);
__d("CDSTextConfig",["cx","UserAgent"],(function(a,b,c,d,e,f,g,h){"use strict";a={blueLink:{color:"x1fey0fg",$$css:!0},disabledText:{color:"x1dntmbh",$$css:!0},inherit_INTERNAL_ONLY:{color:"x1heor9g",$$css:!0},inverseText:{color:"x1qoxp87",$$css:!0},navListSelectedAccentText:{color:"x15d4u2p",$$css:!0},negative:{color:"x1a1m0xk",$$css:!0},placeholderText:{color:"x12scifz",$$css:!0},placeholderTextOnMedia:{color:"x10dhlfy",$$css:!0},positive:{color:"x6u5lvz",$$css:!0},primaryButtonText:{color:"xtk6v10",$$css:!0},primaryDeemphasizedButtonText:{color:"x1mvi0mv",$$css:!0},primaryOnMediaButtonText:{color:"x1yeb1j6",$$css:!0},primaryText:{color:"xzsf02u",$$css:!0},primaryTextOnMedia:{color:"x17z8epw",$$css:!0},secondaryButtonText:{color:"x1dem4cn",$$css:!0},secondaryDestructiveButtonText:{color:"x8tsa8r",$$css:!0},secondaryOnMediaButtonText:{color:"xdczh51",$$css:!0},secondaryText:{color:"xi81zsa",$$css:!0},secondaryTextOnMedia:{color:"xkxfvhb",$$css:!0},toastText_DO_NOT_USE_WILL_BE_DELETED_WITHOUT_NOTICE:{color:"xf9uev8",$$css:!0},toastTextLink:{color:"x1cpl2wf",$$css:!0},warning:{color:"xcly8g5",$$css:!0}};var i={apple:{MozOsxFontSmoothing:"xlh3980",WebkitFontSmoothing:"xvmahel",fontFamily:"x13c4wfe",$$css:!0},"default":{fontFamily:"x10q8g1b",$$css:!0},segoe:{fontFamily:"x1vm4pi3",$$css:!0}};b={apple:{fontFamily:"xrg5i2u",$$css:!0},"default":{fontFamily:"x15zrtf0",$$css:!0},windows:{fontFamily:"x12qp5cl",$$css:!0}};d={apple:{fontFamily:"x1miljz0",$$css:!0},"default":{fontFamily:"x1uzi27p",$$css:!0},windows:{fontFamily:"x18qtup9",$$css:!0}};e={apple:{fontFamily:"x13sc5st",$$css:!0},"default":{fontFamily:"x15bjy8r",$$css:!0},windows:{fontFamily:"x1q5ab00",$$css:!0}};f={apple:{fontFamily:"x17lgo4e",$$css:!0},"default":{fontFamily:"xygjavf",$$css:!0},windows:{fontFamily:"x1t03qr3",$$css:!0}};h={apple:{fontFamily:"xej1f7s",$$css:!0},"default":{fontFamily:"xfsvlko",$$css:!0},windows:{fontFamily:"x188k2y4",$$css:!0}};var j={apple:{fontFamily:"x1gbch0d",$$css:!0},"default":{fontFamily:"x1orftwa",$$css:!0},windows:{fontFamily:"x1215byi",$$css:!0}},k={apple:{fontFamily:"x1fnpb41",$$css:!0},"default":{fontFamily:"x1rg2z3u",$$css:!0},windows:{fontFamily:"x1ff8u0n",$$css:!0}},l={apple:{fontFamily:"x1cihehr",$$css:!0},"default":{fontFamily:"x1shdpqr",$$css:!0},windows:{fontFamily:"x11x3m1q",$$css:!0}},m={apple:{fontFamily:"xcd4a2j",$$css:!0},"default":{fontFamily:"xzz1hku",$$css:!0},windows:{fontFamily:"xhqx0jl",$$css:!0}},n={apple:{fontFamily:"x7igvfm",$$css:!0},"default":{fontFamily:"x1fh7n3k",$$css:!0},windows:{fontFamily:"x1i3kngk",$$css:!0}},o={apple:{fontFamily:"x31b0c2",$$css:!0},"default":{fontFamily:"x1gk729v",$$css:!0},windows:{fontFamily:"x1rhavg7",$$css:!0}},p={apple:{fontFamily:"x1ht2ja9",$$css:!0},"default":{fontFamily:"x6f7imt",$$css:!0},windows:{fontFamily:"x9axs75",$$css:!0}},q={apple:{fontFamily:"x15smpfu",$$css:!0},"default":{fontFamily:"x1vv9oc4",$$css:!0},windows:{fontFamily:"xghutw1",$$css:!0}},r={body:{fontSize:"xt4736n",fontStretch:"x1havqas",fontWeight:"x1f0sm9e",$$css:!0},bodyEmphasized:{fontSize:"xpeg176",fontStretch:"x1b1u5bx",fontWeight:"x95da8x",$$css:!0},display1:{fontSize:"x1eb87vt",fontStretch:"xtvf9r5",fontWeight:"x1appeqy",$$css:!0},headline1:{fontSize:"x1t8f6od",fontStretch:"xzclw06",fontWeight:"x9f5f11",$$css:!0},headline2:{fontSize:"x1i8mgoa",fontStretch:"x163i06a",fontWeight:"x1kwtg5e",$$css:!0},headline3:{fontSize:"x1ejgnnb",fontStretch:"xza2c7i",fontWeight:"x1apb90u",$$css:!0},meta:{fontSize:"xnk8lw1",fontStretch:"xuarlqh",fontWeight:"xuemr51",$$css:!0},metaEmphasized:{fontSize:"xivvn39",fontStretch:"x18l1vnj",fontWeight:"x1vqvvx9",$$css:!0},primaryLabel:{fontSize:"x1sfkdl8",fontStretch:"xurcqga",fontWeight:"x3vd66c",$$css:!0},primaryLabelEmphasized:{fontSize:"xygqn1s",fontStretch:"x5wmda4",fontWeight:"xj3mx7g",$$css:!0},secondaryLabel:{fontSize:"x1qo61fq",fontStretch:"x81x36d",fontWeight:"xa4e6wy",$$css:!0},secondaryLabelEmphasized:{fontSize:"x1km5fng",fontStretch:"x1w0ydog",fontWeight:"xiq6o0p",$$css:!0},tertiaryLabel:{fontSize:"x1r3utbx",fontStretch:"xrah2mz",fontWeight:"xlahvtq",$$css:!0}},s={"default":function(a){switch(a){case"body":return[4,5];case"bodyEmphasized":return[4,5];case"display1":return[10,8];case"headline1":return[7,7];case"headline2":return[6,7];case"headline3":return[5,5];case"meta":return[4,5];case"metaEmphasized":return[4,5];case"primaryLabel":return[5,5];case"primaryLabelEmphasized":return[5,5];case"secondaryLabel":return[4,5];case"secondaryLabelEmphasized":return[4,5];case"tertiaryLabel":return[2,3]}},segoe:function(a){switch(a){case"body":return[5,4];case"bodyEmphasized":return[5,4];case"display1":return[12,6,3];case"headline1":return[9,5,3];case"headline2":return[8,5,2];case"headline3":return[6,4,1];case"meta":return[6,3,1];case"metaEmphasized":return[5,4,1];case"primaryLabel":return[5,4];case"primaryLabelEmphasized":return[5,4];case"secondaryLabel":return[5,4];case"secondaryLabelEmphasized":return[5,4];case"tertiaryLabel":return[3,2]}},sfGecko:function(a){switch(a){case"body":return[5,4];case"bodyEmphasized":return[5,4];case"display1":return[11,7];case"headline1":return[8,6];case"headline2":return[7,6];case"headline3":return[5,5];case"meta":return[5,4];case"metaEmphasized":return[5,4];case"primaryLabel":return[5,4];case"primaryLabelEmphasized":return[5,4];case"secondaryLabel":return[5,4];case"secondaryLabelEmphasized":return[5,4];case"tertiaryLabel":return[3,2]}},sfWebkit:function(a){switch(a){case"body":return[5,4];case"bodyEmphasized":return[5,4];case"display1":return[10,8];case"headline1":return[7,7];case"headline2":return[7,6];case"headline3":return[5,5];case"meta":return[5,4];case"metaEmphasized":return[5,4];case"primaryLabel":return[5,5];case"primaryLabelEmphasized":return[5,5];case"secondaryLabel":return[5,4];case"secondaryLabelEmphasized":return[5,4];case"tertiaryLabel":return[3,3]}}},t=function(){if(c("UserAgent").isPlatform("Windows >= 6"))return[i.segoe,s.segoe,"windows"];return c("UserAgent").isPlatform("Mac OS X >= 10.11")&&!c("UserAgent").isBrowser("Firefox < 55")||c("UserAgent").isPlatform("iOS >= 9")?[i.apple,c("UserAgent").isEngine("Gecko")?s.sfGecko:s.sfWebkit,"apple"]:[i["default"],s["default"],"default"]}(),u=t[0],v=t[1];t=t[2];a={colors:{blueLink:a.blueLink,disabledText:a.disabledText,inherit_INTERNAL_ONLY:a.inherit_INTERNAL_ONLY,inverseText:a.inverseText,navListSelectedAccentText:a.navListSelectedAccentText,negative:a.negative,placeholderText:a.placeholderText,placeholderTextOnMedia:a.placeholderTextOnMedia,positive:a.positive,primaryButtonText:a.primaryButtonText,primaryDeemphasizedButtonText:a.primaryDeemphasizedButtonText,primaryOnMediaButtonText:a.primaryOnMediaButtonText,primaryText:a.primaryText,primaryTextOnMedia:a.primaryTextOnMedia,secondaryButtonText:a.secondaryButtonText,secondaryDestructiveButtonText:a.secondaryDestructiveButtonText,secondaryOnMediaButtonText:a.secondaryOnMediaButtonText,secondaryText:a.secondaryText,secondaryTextOnMedia:a.secondaryTextOnMedia,toastText_DO_NOT_USE_WILL_BE_DELETED_WITHOUT_NOTICE:a.toastText_DO_NOT_USE_WILL_BE_DELETED_WITHOUT_NOTICE,toastTextLink:a.toastTextLink,warning:a.warning},defaultFontFamily:u,offsets:v,styles:{body:{lineHeight:"var(--body-line-height)",style:[r.body,b[t]]},bodyEmphasized:{lineHeight:"var(--body-emphasized-line-height)",style:[r.bodyEmphasized,d[t]]},display1:{lineHeight:"var(--display1-line-height)",style:[r.display1,e[t]]},headline1:{lineHeight:"var(--headline1-line-height)",style:[r.headline1,f[t]]},headline2:{lineHeight:"var(--headline2-line-height)",style:[r.headline2,h[t]]},headline3:{lineHeight:"var(--headline3-line-height)",style:[r.headline3,j[t]]},meta:{lineHeight:"var(--meta-line-height)",style:[r.meta,k[t]]},metaEmphasized:{lineHeight:"var(--meta-emphasized-line-height)",style:[r.metaEmphasized,l[t]]},primaryLabel:{lineHeight:"var(--primary-label-line-height)",style:[r.primaryLabel,m[t]]},primaryLabelEmphasized:{lineHeight:"var(--primary-label-emphasized-line-height)",style:[r.primaryLabelEmphasized,n[t]]},secondaryLabel:{lineHeight:"var(--secondary-label-line-height)",style:[r.secondaryLabel,o[t]]},secondaryLabelEmphasized:{lineHeight:"var(--secondary-label-emphasized-line-height)",style:[r.secondaryLabelEmphasized,p[t]]},tertiaryLabel:{lineHeight:"var(--tertiary-label-line-height)",style:[r.tertiaryLabel,q[t]]}}};u=a;g["default"]=u}),98);
__d("XMDSTextStyleContext.react",["CDSTextStyleContext.react"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("CDSTextStyleContext.react"),Object.keys(d("CDSTextStyleContext.react")).forEach(function(a){if(a==="default"||a==="__esModule")return;g[a]=d("CDSTextStyleContext.react")[a]})}),98);
__d("CDSText.react",["BaseHeading.react","BaseText.react","CDSTextConfig","JSResourceForInteraction","XMDSTextStyleContext.react","react","xplatToDOMRef"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");b=c("JSResourceForInteraction")("XMDSTooltipImpl.react").__setRef("CDSText.react");var j=d("BaseText.react").createBaseTextComponent(c("CDSTextConfig"),b);function a(a){var b=a.asBox;b=b===void 0?!1:b;var e=a.children,f=a.color;f=f===void 0?"primaryText":f;var g=a.id,h=a.isPrimaryHeading;h=h===void 0?!1:h;var k=a.isSemanticHeading;k=k===void 0?!1:k;var l=a.maxLines,m=a.ref,n=a.testid;n=a.textAlign;n=n===void 0?"start":n;var o=a.textStyle;o=o===void 0?"body":o;var p=a.truncationTooltip;a=a.xstyle;n=i.jsx(j,{alignment:n,colorName:f,elementType:b?"div":"span",id:g,lines:l,ref:d("xplatToDOMRef").xplatToDOMRef(m),styleName:o,testid:void 0,truncationTooltip:p,xstyle:a,children:i.jsx(c("XMDSTextStyleContext.react").Provider,{value:o,children:e})});return k||h?i.jsx(c("BaseHeading.react"),{isPrimaryHeading:h,children:n}):n}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MetaBrandCaretLeftOutline24.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.753 4.341a1 1 0 0 0-1.412-.094l-8 7a1 1 0 0 0 0 1.506l8 7a1 1 0 0 0 1.318-1.506L9.518 12l7.14-6.247a1 1 0 0 0 .094-1.412z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MetaBrandCaretRightOutline24.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.247 4.341a1 1 0 0 1 1.412-.094l8 7a1 1 0 0 1 0 1.506l-8 7a1 1 0 0 1-1.318-1.506L14.482 12l-7.14-6.247a1 1 0 0 1-.094-1.412z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MetaBrandXFilled24.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("path",{d:"M5.707 4.293a1 1 0 1 0-1.414 1.414L10.586 12l-6.293 6.293a1 1 0 1 0 1.414 1.414L12 13.414l6.293 6.293a1 1 0 0 0 1.414-1.414L13.414 12l6.293-6.293a1 1 0 1 0-1.414-1.414L12 10.586 5.707 4.293z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("CDSDialogHeader.react",["fbt","CDSDialogHeaderContainer.react","CDSDialogMetaLockupHeading.react","CDSDialogTitle.react","CDSIcon.react","CDSIconButton.react","CDSText.react","Locale","MetaBrandCaretLeftOutline24.svg.react","MetaBrandCaretRightOutline24.svg.react","MetaBrandXFilled24.svg.react","emptyFunction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=c("Locale").isRTL();function a(a){var b=d("react-compiler-runtime").c(36),e=a.addOnEnd,f=a.backTestID,g=a.closeTestID,i=a.disabled,l=a.onBack,m=a.onClose,n=a.title,o=a.titleHidden,p=a.withBackButton,q=a.withCloseButton;a=a.withCompanyLogo;f=f===void 0?"back-button":f;g=g===void 0?"close-button":g;i=i===void 0?!1:i;l=l===void 0?c("emptyFunction"):l;m=m===void 0?c("emptyFunction"):m;o=o===void 0?!1:o;p=p===void 0?!1:p;q=q===void 0?!0:q;a=a===void 0?!1:a;var r=Boolean(n),s;b[0]!==n?(s=h.isFbtInstance(n)||typeof n==="string",b[0]=n,b[1]=s):s=b[1];s=s;var t;b[2]!==n||b[3]!==o||b[4]!==s||b[5]!==r?(t=r?j.jsx("div",babelHelpers["extends"]({},{0:{},1:{className:"xzpqnlu x1hyvwdk xjm9jq1 x6ikm8r x10wlt62 x10l6tqk x1i1rx1s"}}[!!o<<0],{children:j.jsx(c("CDSDialogTitle.react"),{children:s?j.jsx(c("CDSText.react"),{isSemanticHeading:!0,textStyle:"headline3",children:n!=null?n:null}):n!=null?n:null})})):null,b[2]=n,b[3]=o,b[4]=s,b[5]=r,b[6]=t):t=b[6];n=t;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(o=j.jsx("div",{className:"x1vqgdyp x100vrsf"}),b[7]=o):o=b[7];s=o;r=q&&!a?s:null;t=e!=null?s:null;o=p||a?s:null;s=a?s:null;var u;b[8]===Symbol["for"]("react.memo_cache_sentinel")?(u={className:"x78zum5 x13fj5qh x1xegmmw"},b[8]=u):u=b[8];var v;b[9]!==r||b[10]!==f||b[11]!==i||b[12]!==l||b[13]!==p||b[14]!==a?(v=a?j.jsx(c("CDSDialogMetaLockupHeading.react"),{}):p?j.jsx(c("CDSIconButton.react"),{"aria-label":h._(/*BTDS*/"Back"),disabled:i,onPress:l,testid:void 0,children:j.jsx(c("CDSIcon.react"),{color:"primary",icon:k?c("MetaBrandCaretRightOutline24.svg.react"):c("MetaBrandCaretLeftOutline24.svg.react"),size:24})}):r,b[9]=r,b[10]=f,b[11]=i,b[12]=l,b[13]=p,b[14]=a,b[15]=v):v=b[15];b[16]!==t||b[17]!==v?(r=j.jsxs("div",babelHelpers["extends"]({},u,{children:[v,t]})),b[16]=t,b[17]=v,b[18]=r):r=b[18];b[19]===Symbol["for"]("react.memo_cache_sentinel")?(f={className:"x78zum5 x1iyjqo2 xl56j7k"},b[19]=f):f=b[19];b[20]!==n?(l=j.jsx("div",babelHelpers["extends"]({},f,{children:n})),b[20]=n,b[21]=l):l=b[21];b[22]===Symbol["for"]("react.memo_cache_sentinel")?(p={className:"x78zum5 x13fj5qh x1xegmmw"},b[22]=p):p=b[22];a=e!=null?e:s;b[23]!==o||b[24]!==g||b[25]!==i||b[26]!==m||b[27]!==q?(u=q?j.jsx(c("CDSIconButton.react"),{"aria-label":h._(/*BTDS*/"Close"),disabled:i,onPress:m,testid:void 0,children:j.jsx(c("CDSIcon.react"),{color:"primary",icon:c("MetaBrandXFilled24.svg.react"),size:24})}):o,b[23]=o,b[24]=g,b[25]=i,b[26]=m,b[27]=q,b[28]=u):u=b[28];b[29]!==a||b[30]!==u?(t=j.jsxs("div",babelHelpers["extends"]({},p,{children:[a,u]})),b[29]=a,b[30]=u,b[31]=t):t=b[31];b[32]!==r||b[33]!==l||b[34]!==t?(v=j.jsxs(c("CDSDialogHeaderContainer.react"),{children:[r,l,t]}),b[32]=r,b[33]=l,b[34]=t,b[35]=v):v=b[35];return v}g["default"]=a}),226);
__d("CDSGlimmer.react",["BaseLoadingStateElement.react","react","react-compiler-runtime","useCurrentDisplayMode","useVisibilityObserver"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.useState,k={animationDelay:"xvo38ju",$$css:!0},l={animationDelay:function(a){return[k,{"--x-animationDelay":function(a){return typeof a==="number"?a+"ms":a!=null?a:void 0}(a%10*200+"ms")}]},circle:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",$$css:!0},dark:{animationName:"xbql7jm",backgroundColor:"x10l5999",opacity:"xzl3qmq",$$css:!0},darkOnWhiteBackground:{animationName:"x1hx36qn",backgroundColor:"x13a6qad",opacity:"x1bu4zmy",$$css:!0},light:{animationName:"xbql7jm",backgroundColor:"x10l5999",opacity:"xzl3qmq",$$css:!0},lightOnWhiteBackground:{animationName:"x1hx36qn",backgroundColor:"x13a6qad",opacity:"x1bu4zmy",$$css:!0},paused:{animationPlayState:"xorstpt",$$css:!0},root:{animationDirection:"xpz12be",animationDuration:"x1q3qbx4",animationIterationCount:"xa4qsjk",animationTimingFunction:"x3kn0hh",borderStartStartRadius:"x18a5s7t",borderStartEndRadius:"x2wv2di",borderEndEndRadius:"x1v8jt1",borderEndStartRadius:"xy21cdz",$$css:!0}};function m(a,b){if(a==="dark")return b?l.darkOnWhiteBackground:l.dark;else return b?l.lightOnWhiteBackground:l.light}function a(a){var b=d("react-compiler-runtime").c(17),e=a.index,f=a.onWhiteBackground,g=a.shape;a=a.xstyle;e=e===void 0?0:e;f=f===void 0?!1:f;g=g===void 0?"rectangle":g;var h=c("useCurrentDisplayMode")(),k=j(!0),n=k[0],o=k[1];b[0]===Symbol["for"]("react.memo_cache_sentinel")?(k=function(a){a=a.hiddenReason;a!=="COMPONENT_UNMOUNTED"&&o(!0)},b[0]=k):k=b[0];k=k;var p;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(p=function(){o(!1)},b[1]=p):p=b[1];p=p;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(k={onHidden:k,onVisible:p},b[2]=k):k=b[2];p=c("useVisibilityObserver")(k);b[3]!==h||b[4]!==f?(k=m(h,f),b[3]=h,b[4]=f,b[5]=k):k=b[5];h=k;f=n&&l.paused;k=g==="circle"&&l.circle;b[6]!==e?(n=l.animationDelay(e),b[6]=e,b[7]=n):n=b[7];b[8]!==h||b[9]!==n||b[10]!==f||b[11]!==k||b[12]!==a?(g=[l.root,h,f,k,a,n],b[8]=h,b[9]=n,b[10]=f,b[11]=k,b[12]=a,b[13]=g):g=b[13];b[14]!==p||b[15]!==g?(e=i.jsx(c("BaseLoadingStateElement.react"),{ref:p,xstyle:g}),b[14]=p,b[15]=g,b[16]=e):e=b[16];return e}g["default"]=a}),98);
__d("CDSDialogLoadingStateImpl.react",["CDSGlimmer.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={firstLine:{height:"x170jfvy",marginBottom:"xyorhqc",marginInlineStart:"xqsn43r",marginInlineEnd:"x3aesyq",marginLeft:null,marginRight:null,maxWidth:"xq2pcee",$$css:!0},glimmer:{alignSelf:"xqcrz7y",boxSizing:"x9f619",width:"x19sv2k2",$$css:!0},heading:{height:"x1qx5ct2",marginBottom:"xieb3on",marginInlineStart:"xqsn43r",marginInlineEnd:"x3aesyq",marginLeft:null,marginRight:null,maxWidth:"xws0hc0",$$css:!0},secondLine:{height:"x170jfvy",marginBottom:"xyorhqc",marginInlineStart:"xqsn43r",marginInlineEnd:"x3aesyq",marginLeft:null,marginRight:null,maxWidth:"xg16ivm",$$css:!0}};function a(){var a=d("react-compiler-runtime").c(3),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=i.jsx(c("CDSGlimmer.react"),{xstyle:[j.glimmer,j.heading]}),a[0]=b):b=a[0];var e;a[1]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx(c("CDSGlimmer.react"),{xstyle:[j.glimmer,j.firstLine]}),a[1]=e):e=a[1];a[2]===Symbol["for"]("react.memo_cache_sentinel")?(b=i.jsxs(i.Fragment,{children:[b,e,i.jsx(c("CDSGlimmer.react"),{xstyle:[j.glimmer,j.secondLine]})]}),a[2]=b):b=a[2];return b}g["default"]=a}),98);
__d("CDSMiniToastContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({activeToasts:{},add:function(){return""},remove:function(){}});g["default"]=b}),98);
__d("CDSMiniToastIDContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext("");g["default"]=b}),98);
__d("CDSMiniToastProvider.react",["BasePortal.react","CDSMiniToastContext","CDSMiniToastIDContext","CometPlaceholder.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;b.useMemo;var j=b.useRef,k=b.useState;function a(a){var b=d("react-compiler-runtime").c(11);a=a.children;var e=j(1),f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f={},b[0]=f):f=b[0];f=k(f);var g=f[0],h=f[1];b[1]===Symbol["for"]("react.memo_cache_sentinel")?(f=function(a){e.current=e.current+1;var b="minitoast-"+e.current;h(function(c){return babelHelpers["extends"]({},c,(c={},c[b]=a,c))});return b},b[1]=f):f=b[1];f=f;var m;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(m=function(a){h(function(b){b=babelHelpers["extends"]({},b);delete b[a];return b})},b[2]=m):m=b[2];m=m;b[3]!==g?(f={activeToasts:g,add:f,remove:m},b[3]=g,b[4]=f):f=b[4];m=f;f=m;b[5]!==g?(m=Object.keys(g).length>0&&i.jsx(c("BasePortal.react"),{hidden:Object.keys(g).length===0,target:document.body,xstyle:l.root,children:Object.keys(g).map(function(a){return i.jsx(c("CometPlaceholder.react"),{fallback:null,children:i.jsx(c("CDSMiniToastIDContext").Provider,{value:a,children:g[a]})},a)})}),b[5]=g,b[6]=m):m=b[6];var n;b[7]!==a||b[8]!==f||b[9]!==m?(n=i.jsxs(c("CDSMiniToastContext").Provider,{value:f,children:[a,m]}),b[7]=a,b[8]=f,b[9]=m,b[10]=n):n=b[10];return n}var l={root:{alignItems:"x6s0dn4",bottom:"x1ey2m1c",display:"x78zum5",flexDirection:"xdt5ytf",insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",left:null,right:null,justifyContent:"xl56j7k",pointerEvents:"x47corl",position:"xixxii4",top:"x13vifvy",zIndex:"x1ladpmw",$$css:!0}};g["default"]=a}),98);
__d("useWindowEvent",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;function a(a,b,c){var e=d("react-compiler-runtime").c(5),f=c===void 0?window:c,g;e[0]!==b||e[1]!==a||e[2]!==f?(c=function(){f.addEventListener(a,b);return function(){f.removeEventListener(a,b)}},g=[a,b,f],e[0]=b,e[1]=a,e[2]=f,e[3]=c,e[4]=g):(c=e[3],g=e[4]);i(c,g)}g["default"]=a}),98);
__d("CDSDialogPage.react",["BaseHeadingContextWrapper.react","BaseScrollRegionObserver.react","BaseScrollableArea.react","CDSDialogHeaderFooterContainerContext","CDSMiniToastProvider.react","FocusInertRegion.react","focusScopeQueries","react","react-compiler-runtime","useEventHandler","useMatchViewport","useMergeRefs","useWindowEvent"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useLayoutEffect;b.useMemo;var l=b.useRef,m=b.useState,n={footerShadow:{boxShadow:"x1pzs5fi",$$css:!0},inert:{pointerEvents:"x47corl",userSelect:"x87ps6o",$$css:!0},scrollableArea:{flexGrow:"x1iyjqo2",overscrollBehaviorY:"xy5w88m",$$css:!0},scrollSectionObserver:{height:"x1ycjhwn",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(70),e=a.ref,f=a.children,g=a.footer,h=a.header,o=a.isContentInert,p=a.isFooterSticky,q=a.onScroll,r=a.onScrollBottom,s=a.testid;a=a.withFooterShadow;o=o===void 0?!1:o;a=a===void 0?!1:a;var t=c("useMatchViewport")("max","width",679),u=l(null),v,w;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(v=function(){u.current=window.innerHeight},w=[],b[0]=v,b[1]=w):(v=b[0],w=b[1]);k(v,w);b[2]!==r?(v=function(){r&&r()},b[2]=r,b[3]=v):v=b[3];var x=c("useEventHandler")(v);b[4]!==q?(w=function(){q&&q()},b[4]=q,b[5]=w):w=b[5];var y=c("useEventHandler")(w);b[6]!==y||b[7]!==x?(v=function(a){y();u.current!=null&&window.pageYOffset>=((a=(a=document.body)==null?void 0:a.offsetHeight)!=null?a:0)-u.current&&x()},b[6]=y,b[7]=x,b[8]=v):v=b[8];var z=c("useEventHandler")(v);b[9]!==z?(w=function(a){var b;u.current=Math.max((b=u.current)!=null?b:0,window.innerHeight);z(a)},b[9]=z,b[10]=w):w=b[10];v=c("useEventHandler")(w);var A;b[11]!==x?(w=function(){var a;if(window.innerWidth>679)return;u.current!=null&&window.pageYOffset>=((a=(a=document.body)==null?void 0:a.offsetHeight)!=null?a:0)-u.current&&x()},A=[x],b[11]=x,b[12]=A,b[13]=w):(A=b[12],w=b[13]);j(w,A);c("useWindowEvent")("scroll",z);c("useWindowEvent")("resize",v);b[14]!==x?(w=function(){if(window.innerWidth<=679)return;x()},b[14]=x,b[15]=w):w=b[15];A=w;b[16]!==y?(v=function(){if(window.innerWidth<=679)return;y()},b[16]=y,b[17]=v):v=b[17];w=v;v=m(!1);var B=v[0],C=v[1];v=m(!1);var D=v[0],E=v[1];v=l(null);e=c("useMergeRefs")(v,e);var F=l(null),G;b[18]!==B?(G={showBackground:B},b[18]=B,b[19]=G):G=b[19];B=G;G=B;B=a?n.footerShadow:null;var H;b[20]!==p||b[21]!==D||b[22]!==B?(H={isInner:!1,isSticky:p,showBackground:D,xstyle:B},b[20]=p,b[21]=D,b[22]=B,b[23]=H):H=b[23];B=H;H=B;B=a?n.footerShadow:null;b[24]!==p||b[25]!==D||b[26]!==B?(a={isInner:!0,isSticky:p,showBackground:D,xstyle:B},b[24]=p,b[25]=D,b[26]=B,b[27]=a):a=b[27];p=a;D=p;b[28]===Symbol["for"]("react.memo_cache_sentinel")?(B={callback:function(a){C(!a)},heightXStyle:n.scrollSectionObserver},b[28]=B):B=b[28];a=B;b[29]===Symbol["for"]("react.memo_cache_sentinel")?(p={callback:function(a){E(!a)},heightXStyle:n.scrollSectionObserver},b[29]=p):p=b[29];B=p;b[30]===Symbol["for"]("react.memo_cache_sentinel")?(p={className:"x1fmog5m xu25z0z x140muxe xo1y3bh x78zum5 xdt5ytf x1iyjqo2 x1yr2tfi xbt77o1 x1jxyteu x1n2onr6 x1ja2u2z"},b[30]=p):p=b[30];var I=t?B:null,J=t?a:null,K;b[31]!==I||b[32]!==J?(K=i.jsx(c("BaseScrollRegionObserver.react"),{end:I,start:J}),b[31]=I,b[32]=J,b[33]=K):K=b[33];b[34]!==h||b[35]!==G?(I=i.jsx(c("CDSDialogHeaderFooterContainerContext").Provider,{value:G,children:h}),b[34]=h,b[35]=G,b[36]=I):I=b[36];J=g!=null;G=h!=null;h=o&&n.inert;var L;b[37]!==h?(L=[n.scrollableArea,h],b[37]=h,b[38]=L):L=b[38];h=t?null:B;B=t?null:a;b[39]!==h||b[40]!==B?(t=i.jsx(c("BaseScrollRegionObserver.react"),{end:h,rootRef:v,start:B}),b[39]=h,b[40]=B,b[41]=t):t=b[41];a=!o;b[42]===Symbol["for"]("react.memo_cache_sentinel")?(v={className:"x78zum5 xdt5ytf x1iyjqo2 xx6bls6 x889kno"},b[42]=v):v=b[42];b[43]!==f?(h=i.jsx("div",babelHelpers["extends"]({},v,{ref:F,children:f})),b[43]=f,b[44]=h):h=b[44];b[45]!==a||b[46]!==h?(B=i.jsx(c("FocusInertRegion.react"),{disabled:a,focusQuery:d("focusScopeQueries").tabbableScopeQuery,children:h}),b[45]=a,b[46]=h,b[47]=B):B=b[47];b[48]!==g||b[49]!==D?(o=i.jsx(c("CDSDialogHeaderFooterContainerContext").Provider,{value:D,children:g}),b[48]=g,b[49]=D,b[50]=o):o=b[50];b[51]!==w||b[52]!==A||b[53]!==J||b[54]!==G||b[55]!==L||b[56]!==t||b[57]!==B||b[58]!==o?(v=i.jsx(c("BaseHeadingContextWrapper.react"),{children:i.jsxs(c("BaseScrollableArea.react"),{contentRef:F,hideScrollbar:!1,horizontal:!1,onScroll:w,onScrollBottom:A,vertical:!0,withBottomShadow:J,withTopShadow:G,xstyle:L,children:[t,B,o]})}),b[51]=w,b[52]=A,b[53]=J,b[54]=G,b[55]=L,b[56]=t,b[57]=B,b[58]=o,b[59]=v):v=b[59];b[60]!==g||b[61]!==H?(f=i.jsx(c("CDSDialogHeaderFooterContainerContext").Provider,{value:H,children:g}),b[60]=g,b[61]=H,b[62]=f):f=b[62];b[63]!==e||b[64]!==K||b[65]!==I||b[66]!==v||b[67]!==f||b[68]!==s?(a=i.jsx(c("CDSMiniToastProvider.react"),{children:i.jsxs("div",babelHelpers["extends"]({},p,{"data-testid":void 0,ref:e,children:[K,I,v,f]}))}),b[63]=e,b[64]=K,b[65]=I,b[66]=v,b[67]=f,b[68]=s,b[69]=a):a=b[69];return a}g["default"]=a}),98);
__d("CDSDialogPageLoadingState.react",["fbt","CDSDialogHeader.react","CDSDialogLoadingStateImpl.react","CDSDialogPage.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(6);a=a.onClose;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=h._(/*BTDS*/"Loading..."),b[0]=e):e=b[0];b[1]!==a?(e=j.jsx(c("CDSDialogHeader.react"),{onClose:a,title:e,titleHidden:!0}),b[1]=a,b[2]=e):e=b[2];b[3]===Symbol["for"]("react.memo_cache_sentinel")?(a=j.jsx(c("CDSDialogLoadingStateImpl.react"),{}),b[3]=a):a=b[3];b[4]!==e?(a=j.jsx(c("CDSDialogPage.react"),{footer:null,header:e,children:a}),b[4]=e,b[5]=a):a=b[5];return a}g["default"]=a}),226);
__d("CDSStyleXDarkTheme",[],(function(a,b,c,d,e,f){e.exports={"fds-black":"black","fds-black-alpha-05":"rgba(0, 0, 0, 0.05)","fds-black-alpha-10":"rgba(0, 0, 0, 0.1)","fds-black-alpha-15":"rgba(0, 0, 0, 0.15)","fds-black-alpha-20":"rgba(0, 0, 0, 0.2)","fds-black-alpha-30":"rgba(0, 0, 0, 0.3)","fds-black-alpha-40":"rgba(0, 0, 0, 0.4)","fds-black-alpha-50":"rgba(0, 0, 0, 0.5)","fds-black-alpha-60":"rgba(0, 0, 0, 0.6)","fds-black-alpha-80":"rgba(0, 0, 0, 0.8)","fds-blue-05":"black","fds-blue-30":"black","fds-blue-40":"black","fds-blue-60":"black","fds-blue-70":"black","fds-blue-80":"black","fds-button-text":"black","fds-comment-background":"black","fds-dark-mode-gray-35":"black","fds-dark-mode-gray-50":"black","fds-dark-mode-gray-70":"black","fds-dark-mode-gray-80":"black","fds-dark-mode-gray-90":"black","fds-dark-mode-gray-100":"black","fds-gray-00":"black","fds-gray-05":"black","fds-gray-10":"black","fds-gray-20":"black","fds-gray-25":"black","fds-gray-30":"black","fds-gray-45":"black","fds-gray-70":"black","fds-gray-80":"black","fds-gray-90":"black","fds-gray-100":"black","fds-green-55":"black","fds-green-65":"black","fds-highlight":"black","fds-highlight-cell-background":"black","fds-primary-icon":"white","fds-primary-text":"white","fds-red-55":"black","fds-soft":"cubic-bezier(.08,.52,.52,1)","fds-spectrum-aluminum-tint-70":"black","fds-spectrum-blue-gray-tint-70":"black","fds-spectrum-cherry":"black","fds-spectrum-cherry-tint-70":"black","fds-spectrum-grape-tint-70":"black","fds-spectrum-grape-tint-90":"black","fds-spectrum-lemon-dark-1":"black","fds-spectrum-lemon-tint-70":"black","fds-spectrum-lime":"black","fds-spectrum-lime-tint-70":"black","fds-spectrum-orange-tint-70":"black","fds-spectrum-orange-tint-90":"black","fds-spectrum-seafoam-tint-70":"black","fds-spectrum-slate-dark-2":"black","fds-spectrum-slate-tint-70":"black","fds-spectrum-teal":"black","fds-spectrum-teal-dark-1":"black","fds-spectrum-teal-dark-2":"black","fds-spectrum-teal-tint-70":"black","fds-spectrum-teal-tint-90":"black","fds-spectrum-tomato":"black","fds-spectrum-tomato-tint-30":"black","fds-spectrum-tomato-tint-90":"black","fds-strong":"cubic-bezier(.12,.8,.32,1)","fds-unified-blue-35":"black","fds-unified-gray-20":"black","fds-white":"black","fds-white-alpha-05":"rgba(255, 255, 255, 0.05)","fds-white-alpha-10":"rgba(255, 255, 255, 0.1)","fds-white-alpha-20":"rgba(255, 255, 255, 0.2)","fds-white-alpha-30":"rgba(255, 255, 255, 0.3)","fds-white-alpha-40":"rgba(255, 255, 255, 0.4)","fds-white-alpha-50":"rgba(255, 255, 255, 0.5)","fds-white-alpha-60":"rgba(255, 255, 255, 0.6)","fds-white-alpha-80":"rgba(255, 255, 255, 0.8)","fds-yellow-20":"black",accent:"rgb(203,210,217)","always-white":"rgb(255,255,255)","always-black":"black","always-dark-gradient":"linear-gradient(rgba(0,0,0,0), rgba(0,0,0,0.6))","always-dark-overlay":"rgba(0, 0, 0, 0.4)","always-light-overlay":"rgba(255, 255, 255, 0.4)","always-gray-40":"#65676B","always-gray-75":"#BCC0C4","always-gray-95":"#F0F2F5","attachment-footer-background":"rgba(255,255,255,0.10)","background-deemphasized":"rgba(28,43,51)","badge-background-color-blue":"var(--accent)","badge-background-color-dark-gray":"var(--secondary-icon)","badge-background-color-gray":"var(--disabled-icon)","badge-background-color-green":"var(--positive)","badge-background-color-light-blue":"var(--highlight-bg)","badge-background-color-red":"var(--notification-badge)","badge-background-color-yellow":"var(--base-lemon)","base-blue":"#1877F2","base-cherry":"#F3425F","base-grape":"#9360F7","base-lemon":"#F7B928","base-lime":"#45BD62","base-pink":"#FF66BF","base-seafoam":"#54C7EC","base-teal":"#2ABBA7","base-tomato":"#FB724B","text-badge-info-background":"hsl(214, 100%, 59%)","text-badge-success-background":"#31A24C","text-badge-attention-background":"hsl(40, 89%, 52%)","text-badge-critical-background":"#e41e3f","blue-link":"rgb(69,153,255)","border-focused":"#A7B3BF","card-background":"rgb(52,72,84)","card-background-flat":"rgb(52,72,84)","comment-background":"rgba(255,255,255,0.10)","comment-footer-background":"#4E4F50","dataviz-primary-1":"rgb(0,174,143)","dataviz-blue-primary":"#1D85FC","dataviz-blue-secondary":"#EBF5FF","dataviz-orange":"#D06C14","disabled-button-background":"rgba(255, 255, 255, 0.2)","disabled-button-text":"rgba(255, 255, 255, 0.3)","disabled-icon":"rgba(255,255,255,0.15)","disabled-text":"rgba(255,255,255,0.15)",divider:"rgb(70,90,105)","event-date":"rgb(240,95,105)","fb-wordmark":"#FFFFFF","fb-logo":"#0866FF","filter-accent":"invert(40%) sepia(52%) saturate(200%) saturate(200%) saturate(200%) saturate(189%) hue-rotate(191deg) brightness(103%) contrast(102%)","filter-always-white":"invert(100%)","filter-disabled-icon":"invert(100%) opacity(30%)","filter-placeholder-icon":"invert(59%) sepia(11%) saturate(200%) saturate(135%) hue-rotate(176deg) brightness(96%) contrast(94%)","filter-primary-accent":"invert(40%) sepia(52%) saturate(200%) saturate(200%) saturate(200%) saturate(189%) hue-rotate(191deg) brightness(103%) contrast(102%)","filter-primary-icon":"invert(89%) sepia(6%) hue-rotate(185deg)","filter-secondary-button-icon-on-media":"invert(100%)","filter-secondary-icon":"invert(62%) sepia(98%) saturate(12%) hue-rotate(175deg) brightness(90%) contrast(96%)","filter-warning-icon":"invert(77%) sepia(29%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(128%) hue-rotate(359deg) brightness(102%) contrast(107%)","filter-blue-link-icon":"invert(73%) sepia(29%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(103.25%) hue-rotate(189deg) brightness(101%) contrast(101%)","filter-positive":"invert(37%) sepia(61%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(115%) hue-rotate(91deg) brightness(97%) contrast(105%)","filter-primary-deemphasized-button-icon":"brightness(0) saturate(100%) invert(63%) sepia(20%) saturate(1290%) hue-rotate(185deg) brightness(107%) contrast(101%)","filter-negative":"invert(25%) sepia(33%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(110%) hue-rotate(345deg) brightness(132%) contrast(96%)","focus-ring-blue":"#1877F2","glimmer-base-opaque":"#FFFFFF","glimmer-high-contrast-base-opaque":"#FFFFFF","glimmer-opacity-high-contrast-max":"0.48","glimmer-opacity-high-contrast-min":"0.1","glimmer-opacity-max":"1","glimmer-opacity-min":"0.25","glimmer-spinner-icon":"white","hero-banner-background":"#E85D07","hosted-view-selected-state":"rgb(222,227,233)","highlight-bg":"rgba(24, 119, 242, .31)","hover-overlay":"rgba(255, 255, 255, 0.1)","inverse-text":"var(--always-white)","list-cell-chevron":"rgb(203, 210, 217)","media-hover":"rgba(68, 73, 80, 0.15)","media-inner-border":"rgba(255,255,255,0.10)","media-outer-border":"#33363A","media-pressed":"rgba(255,255,255,0.30)","messenger-card-background":"#242526","messenger-card-box-shadow":"0px 0px 16px rgba(0, 0, 0, 0.3)","mwp-header-background-color":"var(--messenger-card-background)","mwp-header-button-color":"var(--accent)","mwp-message-row-background":"var(--messenger-card-background)","messenger-reply-background":"#18191A","overlay-alpha-80":"rgba(28,43,51,0.80)","overlay-on-media":"rgba(28,43,51,0.70)","nav-bar-background":"rgba(0,0,0,0.00)","popover-card-background":"var(--card-background)","nav-bar-background-gradient":"linear-gradient(to top, #242526, rgba(36,37,38,.9), rgba(36,37,38,.7), rgba(36,37,38,.4), rgba(36,37,38,0))","nav-bar-background-gradient-wash":"linear-gradient(to top, #18191A, rgba(24,25,26,.9), rgba(24,25,26,.7), rgba(24,25,26,.4), rgba(24,25,26,0))",negative:"rgb(240,95,105)","negative-background":"hsl(350, 87%, 55%, 20%)","new-notification-background":"rgba(255,255,255,0.10)","non-media-pressed":"rgba(255,255,255,0.20)","non-media-pressed-on-dark":"rgba(255,255,255,0.30)","notification-badge":"rgb(240,95,105)","placeholder-icon":"rgba(167,179,191)","placeholder-image":"rgb(70, 90, 105)","placeholder-text":"rgba(255,255,255,0.30)","placeholder-text-on-media":"rgba(255,255,255,0.45)","popover-background":"rgb(52,72,84)",positive:"rgb(85,180,115)","positive-background":"#1F3520","press-overlay":"rgba(255, 255, 255, 0.2)","primary-button-background":"rgb(0,100,224)","primary-button-icon":"rgb(255,255,255)","primary-button-pressed":"#77A7FF","primary-button-text":"rgb(255,255,255)","primary-deemphasized-button-background":"rgba(0,0,0,0.00)","primary-deemphasized-button-pressed":"rgb(255,255,255,.05)","primary-deemphasized-button-pressed-overlay":"rgb(255,255,255,.15)","primary-deemphasized-button-text":"rgb(28,43,51)","primary-icon":"rgb(255,255,255)","primary-text":"rgb(255,255,255)","primary-text-on-media":"rgb(255,255,255)","primary-web-focus-indicator":"#D24294","progress-ring-neutral-background":"rgba(255, 255, 255, 0.2)","progress-ring-neutral-foreground":"#ffffff","progress-ring-on-media-background":"rgba(255,255,255,0.20)","progress-ring-on-media-foreground":"rgb(255,255,255)","progress-ring-blue-background":"rgba(45, 136, 255, 0.2)","progress-ring-blue-foreground":"hsl(214, 100%, 59%)","progress-ring-disabled-background":"rgba(122,125,130, 0.2)","progress-ring-disabled-foreground":"#7A7D82","rating-star-active":"#FF9831","scroll-thumb":"rgba(255, 255, 255, 0.3)","scroll-shadow":"0 0px 16px 0 rgba(52,72,84,0.05)","secondary-button-background":"rgba(0,0,0,0.00)","secondary-button-background-floating":"#4B4C4F","secondary-button-background-on-dark":"rgba(255, 255, 255, 0.4)","secondary-button-pressed":"rgba(0,0,0,0.00)","secondary-button-stroke":"rgb(167,179,191)","secondary-button-text":"rgb(255,255,255)","secondary-icon":"rgb(222,227,233)","secondary-text":"rgb(222,227,233)","secondary-text-on-media":"rgba(255,255,255,0.70)","section-header-text":"#BCC0C4","shadow-1":"rgba(0, 0, 0, 0.1)","shadow-2":"rgba(0, 0, 0, 0.2)","shadow-5":"rgba(0, 0, 0, 0.5)","shadow-8":"rgba(0, 0, 0, 0.8)","shadow-base":"0 1px 2px var(--shadow-2)","shadow-elevated":"0 8px 20px 0 rgba(0, 0, 0, 0.2), 0 2px 4px 0 rgba(0, 0, 0, 0.1)","shadow-emphasis":"0 2px 12px var(--shadow-2)","shadow-inset":"rgba(255, 255, 255, 0.05)","shadow-on-media":"0px 0px 1px rgba(0, 0, 0, 0.62)","shadow-persistent":"0px 0px 12px rgba(28, 43, 51, 0.6)","shadow-primary":"0px 0px 12px rgba(28, 43, 51, 0.1)","shadow-responsive":"0px 8px 16px 0px rgba(0, 0, 0, 0.1)","surface-background":"rgb(28,43,51)","switch-active":"hsl(214, 100%, 59%)","switch-inactive":"#3E4042","switch-unchecked-background-color":"#6F7276","text-highlight":"rgb(130,185,230)","input-background":"rgb(52,72,84)","input-background-hover":"var(--input-background)","input-background-warn-hover":"hsla(var(--warning-h), var(--warning-s), var(--warning-l), 0.05)","input-background-error-hover":"hsla(var(--negative-h), var(--negative-s), var(--negative-l), 0.05)","input-background-active":"hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.05)","input-background-warn-active":"hsla(var(--warning-h), var(--warning-s), var(--warning-l), 0.05)","input-background-error-active":"hsla(var(--negative-h), var(--negative-s), var(--negative-l), 0.05)","input-background-disabled":"#18191A","input-border-color":"#3E4042","input-border-color-hover":"var(--placeholder-text)","input-label-color-highlighted":"hsl(214, 100%, 59%)","input-label-color-inside":"var(--secondary-text)","input-label-color-error":"var(--negative)","input-label-color-disabled":"var(--disabled-text)","text-input-outside-label":"#FFFFFF","toast-background":"rgb(70,90,105)","toast-text":"#FFFFFF","toast-text-link":"#4599FF","toast-border-color":"transparent","toast-border-style":"none","toast-border-width":"0px","toggle-active-background":"rgb(222,227,233)","toggle-active-icon":"rgb(28,43,51)","toggle-active-text":"rgb(28,43,51)","toggle-button-active-background":"#E6F2FF","tooltip-background":"rgb(70,90,105)","tooltip-box-shadow":"none","popover-border-color":"transparent",wash:"#3E4042","web-wash":"#18191A",warning:"rgb(245,180,0)","chat-bubble-emphasis-ring-after":"white","chat-bubble-emphasis-ring-before":"black","chat-text-blockquote-color-background-line":"rgba(255, 255, 255, 0.19)","chat-text-blockquote-color-text-primary-media":"rgba(255, 255, 255, 0.7)","chat-incoming-message-bubble-background-color":"#303030","chat-outgoing-message-bubble-background-color":"var(--accent)","chat-replied-message-background-color":"rgba(255, 255, 255, 0.12)","radio-border-color":"var(--primary-icon)","radio-border-color-disabled":"var(--disabled-button-background)","radio-border-color-selected":"var(--accent)","radio-checked-icon-color":"var(--accent)","radio-checked-icon-color-disabled":"var(--disabled-button-background)","dialog-anchor-vertical-padding":"32px","header-height":"0px","global-panel-width":"0px","global-panel-width-expanded":"0px","alert-banner-corner-radius":"8px","button-corner-radius":"4px","button-corner-radius-medium":"10px","button-corner-radius-large":"12px","button-height-large":"52px","button-height-medium":"36px","button-padding-horizontal-large":"16px","button-padding-horizontal-medium":"16px","button-padding-icon-only":"16px","button-icon-padding-large":"16px","button-icon-padding-medium":"16px","button-inner-icon-spacing-large":"3px","button-inner-icon-spacing-medium":"3px","blueprint-button-height-medium":"40px","blueprint-button-height-large":"48px","card-corner-radius":"4px","card-box-shadow":"0 8px 20px 0  var(--shadow-2), 0 2px 4px 0 var(--shadow-1)","card-padding-horizontal":"10px","card-padding-vertical":"20px","chip-corner-radius":"4px","comment-bubble":"18px","dialog-corner-radius":"4px","glimmer-corner-radius":"4px","image-corner-radius":"4px","infochip-medium-radius":"12px","input-corner-radius":"4px","input-border-width":"1px","nav-list-cell-corner-radius":"4px","list-cell-corner-radius":"4px","list-cell-min-height":"52px","list-cell-padding-vertical":"20px","list-cell-padding-vertical-with-addon":"14px","menu-base-list-item-padding-horizontal":"8px","menu-base-list-item-padding-vertical":"12px","menu-base-size-full-margin-end":"48px","menu-item-base-margin-horizontal":"8px","menu-item-base-margin-vertical":"0px","menu-item-base-padding-horizontal":"8px","menu-item-base-overlay-radius":"4px","menu-item-base-padding-vertical":"12px","menu-item-base-with-icon-padding-horizontal":"var(--menu-item-base-padding-horizontal)","separator-menu-item-margin-horizontal":"16px","separator-menu-item-margin-vertical":"4px","nav-list-cell-min-height":"0px","nav-list-cell-padding-vertical":"16px","nav-list-cell-padding-vertical-with-addon":"16px","nux-card-body-padding-end":"24px","page-footer-padding-vertical":"28px","popover-border-style":"none","popover-border-width":"0px","section-header-addOnEnd-margin-horizontal":"8px","section-header-addOnStart-margin-horizontal":"12px","section-header-addOnEnd-button-padding-horizontal":"0px","section-header-addOnEnd-button-padding-vertical":"0px","section-header-padding-vertical":"16px","section-header-subtitle-margin-vertical":"14px","section-header-subtitle-with-addOnEnd-margin-vertical":"6px","tab-height":"60px","tab-icon-padding-end":"0px","tab-text-icon-gap":"4px","tab-underline-color":"transparent","tab-underline-height":"3px","text-badge-corner-radius":"4px","text-badge-padding-horizontal":"6px","text-badge-padding-vertical":"6px","text-input-multi-padding-between-text-scrollbar":"20px","text-input-multi-padding-scrollbar":"16px","text-input-caption-margin-top":"10px","text-input-padding-vertical":"12px","toast-addon-padding-horizontal":"6px","toast-addon-padding-vertical":"0px","toast-container-max-width":"100%","toast-container-min-width":"320px","toast-container-padding-horizontal":"14px","toast-container-padding-vertical":"16px","toast-corner-radius":"8px","toaster-view-max-width":"328px","tooltip-corner-radius":"8px","typeahead-list-outer-padding-vertical":"8px","fds-animation-enter-exit-in":"cubic-bezier(0.14, 1, 0.34, 1)","fds-animation-enter-exit-out":"cubic-bezier(0.45, 0.1, 0.2, 1)","fds-animation-swap-shuffle-in":"cubic-bezier(0.14, 1, 0.34, 1)","fds-animation-swap-shuffle-out":"cubic-bezier(0.45, 0.1, 0.2, 1)","fds-animation-move-in":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-move-out":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-expand-collapse-in":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-expand-collapse-out":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-passive-move-in":"cubic-bezier(0.5, 0, 0.1, 1)","fds-animation-passive-move-out":"cubic-bezier(0.5, 0, 0.1, 1)","fds-animation-quick-move-in":"cubic-bezier(0.1, 0.9, 0.2, 1)","fds-animation-quick-move-out":"cubic-bezier(0.1, 0.9, 0.2, 1)","fds-animation-fade-in":"cubic-bezier(0, 0, 1, 1)","fds-animation-fade-out":"cubic-bezier(0, 0, 1, 1)","fds-duration-extra-extra-short-in":"100ms","fds-duration-extra-extra-short-out":"100ms","fds-duration-extra-short-in":"200ms","fds-duration-extra-short-out":"150ms","fds-duration-short-in":"280ms","fds-duration-short-out":"200ms","fds-duration-medium-in":"400ms","fds-duration-medium-out":"350ms","fds-duration-long-in":"500ms","fds-duration-long-out":"350ms","fds-duration-extra-long-in":"1000ms","fds-duration-extra-long-out":"1000ms","fds-duration-none":"0ms","fds-fast":"200ms","fds-slow":"400ms","font-family-apple":"system-ui, -apple-system, BlinkMacSystemFont, '.SFNSText-Regular', sans-serif","font-family-code":"ui-monospace, Menlo, Consolas, Monaco, monospace","font-family-default":"Helvetica, Arial, sans-serif","font-family-segoe":"Segoe UI Historic, Segoe UI, Helvetica, Arial, sans-serif","font-family-system-fds":"system-ui, -apple-system, BlinkMacSystemFont, Segoe UI Historic, Segoe UI, Helvetica, Arial, sans-serif","text-input-field-font-family":"Placeholder Font","text-input-field-font-size":"1rem","text-input-field-font-stretch":"initial","text-input-field-font-weight":"500","text-input-field-line-height":"1.2941","text-input-label-font-family":"Placeholder Font","text-input-label-font-size":"17px","text-input-label-font-size-scale-multiplier":"0.75","text-input-label-font-stretch":"initial","text-input-label-font-weight":"400","text-input-label-line-height":"1.2941","messenger-card-min-width":"300px","messenger-card-max-width":"480px","messenger-application-max-width":"2560px","messenger-sidebar-collapsed-width":"44px","messenger-sidebar-expanded-width":"240px","messenger-card-corner-radius":"8px","messenger-card-spacing":"16px","chat-bubble-padding-vertical":"8px","chat-bubble-padding-horizontal":"12px","chat-bubble-border-radius":"18px","dialog-size-medium-width":"100%","dialog-size-small-width":"100%","focus-ring-outline-forced-colors":"2px auto transparent !important","focus-ring-outline-link":"2px auto var(--focus-ring-blue)","focus-ring-shadow-default":"0 0 0 2px var(--always-white), 0 0 0 4px var(--focus-ring-blue)","focus-ring-shadow-inset":"0 0 0 2px var(--focus-ring-blue) inset, 0 0 0 4px var(--always-white) inset","glimmer-animation-direction":"alternate","glimmer-animation-duration":"1000ms","glimmer-animation-timing-function":"steps(10, end)","radio-checked-icon-size-large":"12px","radio-checked-icon-size-medium":"12px","radio-border-width":"2px","radio-size-large":"24px","radio-size-medium":"20px","blue-primary":"rgb(0,136,244)","blue-secondary":"rgb(235,245,255)","blue-tertiary":"rgb(4,59,114)","chartreuse-primary":"rgb(106,147,22)","chartreuse-secondary":"rgb(226,255,152)","chartreuse-tertiary":"rgb(50,65,19)","cyan-primary":"rgb(0,142,213)","cyan-secondary":"rgb(231,245,255)","cyan-tertiary":"rgb(15,63,93)","dataviz-primary-2":"rgb(156,219,255)","dataviz-primary-3":"rgb(73,156,255)","dataviz-secondary-1":"rgb(92,87,210)","dataviz-secondary-2":"rgb(142,129,255)","dataviz-secondary-3":"rgb(119,45,88)","dataviz-supplementary-1":"rgb(253,91,67)","dataviz-supplementary-2":"rgb(161,132,0)","dataviz-supplementary-3":"rgb(36,131,44)","dataviz-supplementary-4":"rgb(232,234,238)","fuschia-primary":"rgb(250,45,138)","fuschia-secondary":"rgb(255,241,246)","fuschia-tertiary":"rgb(118,14,62)","green-primary":"rgb(43,154,53)","green-secondary":"rgb(227,250,224)","green-tertiary":"rgb(26,68,27)","magenta-primary":"rgb(215,77,204)","magenta-secondary":"rgb(255,239,254)","magenta-tertiary":"rgb(96,36,91)","orange-primary":"rgb(208,108,20)","orange-secondary":"rgb(255,241,239)","orange-tertiary":"rgb(94,49,14)","purple-primary":"rgb(125,116,255)","purple-secondary":"rgb(245,241,255)","purple-tertiary":"rgb(55,50,121)","red-primary":"rgb(251,60,68)","red-secondary":"rgb(255,241,239)","red-tertiary":"rgb(118,22,27)","teal-primary":"rgb(0,152,124)","teal-secondary":"rgb(227,247,241)","teal-tertiary":"rgb(10,68,56)","yellow-primary":"rgb(161,132,0)","yellow-secondary":"rgb(255,246,161)","yellow-tertiary":"rgb(72,59,12)","emphasized-card-background-blue-comet":"linear-gradient(rgb(0,59,173),rgb(0,10,73))","emphasized-card-background-green-comet":"linear-gradient(rgb(0,82,35),rgb(0,20,11))","emphasized-card-background-purple-comet":"linear-gradient(rgb(66,23,160),rgb(18,3,53))","emphasized-card-background-teal-comet":"linear-gradient(rgb(0,65,75), rgb(0,19,26))","search-input-background":"rgba(255, 255, 255, 0.19)","secondary-emphasized-button-stroke":"rgb(69,153,255)","stepper-active":"#CBD2D9","stepper-inactive":"rgba(203, 210, 217, 0.4)"}}),null);
__d("CDSStyleXDefaultTheme",[],(function(a,b,c,d,e,f){e.exports={"fds-black":"#000000","fds-black-alpha-05":"rgba(0, 0, 0, 0.05)","fds-black-alpha-10":"rgba(0, 0, 0, 0.1)","fds-black-alpha-15":"rgba(0, 0, 0, 0.15)","fds-black-alpha-20":"rgba(0, 0, 0, 0.2)","fds-black-alpha-30":"rgba(0, 0, 0, 0.3)","fds-black-alpha-40":"rgba(0, 0, 0, 0.4)","fds-black-alpha-50":"rgba(0, 0, 0, 0.5)","fds-black-alpha-60":"rgba(0, 0, 0, 0.6)","fds-black-alpha-80":"rgba(0, 0, 0, 0.8)","fds-blue-05":"#ECF3FF","fds-blue-30":"#AAC9FF","fds-blue-40":"#77A7FF","fds-blue-60":"#1877F2","fds-blue-70":"#2851A3","fds-blue-80":"#1D3C78","fds-button-text":"#444950","fds-comment-background":"#F2F3F5","fds-dark-mode-gray-35":"#CCCCCC","fds-dark-mode-gray-50":"#828282","fds-dark-mode-gray-70":"#4A4A4A","fds-dark-mode-gray-80":"#373737","fds-dark-mode-gray-90":"#282828","fds-dark-mode-gray-100":"#1C1C1C","fds-gray-00":"#F5F6F7","fds-gray-05":"#F2F3F5","fds-gray-10":"#EBEDF0","fds-gray-20":"#DADDE1","fds-gray-25":"#CCD0D5","fds-gray-30":"#BEC3C9","fds-gray-45":"#8D949E","fds-gray-70":"#606770","fds-gray-80":"#444950","fds-gray-90":"#303338","fds-gray-100":"#1C1E21","fds-green-55":"#00A400","fds-green-65":"#51CE70","fds-highlight":"#3578E5","fds-highlight-cell-background":"#ECF3FF","fds-primary-icon":"#1C1E21","fds-primary-text":"#1C1E21","fds-red-55":"#FA383E","fds-soft":"cubic-bezier(.08,.52,.52,1)","fds-spectrum-aluminum-tint-70":"#E4F0F6","fds-spectrum-blue-gray-tint-70":"#CFD1D5","fds-spectrum-cherry":"#F35369","fds-spectrum-cherry-tint-70":"#FBCCD2","fds-spectrum-grape-tint-70":"#DDD5F0","fds-spectrum-grape-tint-90":"#F4F1FA","fds-spectrum-lemon-dark-1":"#F5C33B","fds-spectrum-lemon-tint-70":"#FEF2D1","fds-spectrum-lime":"#A3CE71","fds-spectrum-lime-tint-70":"#E4F0D5","fds-spectrum-orange-tint-70":"#FCDEC5","fds-spectrum-orange-tint-90":"#FEF4EC","fds-spectrum-seafoam-tint-70":"#CAEEF9","fds-spectrum-slate-dark-2":"#89A1AC","fds-spectrum-slate-tint-70":"#EAEFF2","fds-spectrum-teal":"#6BCEBB","fds-spectrum-teal-dark-1":"#4DBBA6","fds-spectrum-teal-dark-2":"#31A38D","fds-spectrum-teal-tint-70":"#D2F0EA","fds-spectrum-teal-tint-90":"#F0FAF8","fds-spectrum-tomato":"#FB724B","fds-spectrum-tomato-tint-30":"#F38E7B","fds-spectrum-tomato-tint-90":"#FDEFED","fds-strong":"cubic-bezier(.12,.8,.32,1)","fds-unified-blue-35":"#1455B0","fds-unified-gray-20":"#323436","fds-white":"#FFFFFF","fds-white-alpha-05":"rgba(255, 255, 255, 0.05)","fds-white-alpha-10":"rgba(255, 255, 255, 0.1)","fds-white-alpha-20":"rgba(255, 255, 255, 0.2)","fds-white-alpha-30":"rgba(255, 255, 255, 0.3)","fds-white-alpha-40":"rgba(255, 255, 255, 0.4)","fds-white-alpha-50":"rgba(255, 255, 255, 0.5)","fds-white-alpha-60":"rgba(255, 255, 255, 0.6)","fds-white-alpha-80":"rgba(255, 255, 255, 0.8)","fds-yellow-20":"#FFBA00",accent:"rgb(28,43,51)","always-white":"rgb(255,255,255)","always-black":"black","always-dark-gradient":"linear-gradient(rgba(0,0,0,0), rgba(0,0,0,0.6))","always-dark-overlay":"rgba(0, 0, 0, 0.4)","always-light-overlay":"rgba(255, 255, 255, 0.4)","always-gray-40":"#65676B","always-gray-75":"#BCC0C4","always-gray-95":"#F0F2F5","attachment-footer-background":"rgba(28,43,51,0.10)","background-deemphasized":"rgb(241,244,247)","badge-background-color-blue":"var(--accent)","badge-background-color-dark-gray":"var(--secondary-icon)","badge-background-color-gray":"var(--disabled-icon)","badge-background-color-green":"var(--positive)","badge-background-color-light-blue":"var(--highlight-bg)","badge-background-color-red":"var(--notification-badge)","badge-background-color-yellow":"var(--base-lemon)","base-blue":"#1877F2","base-cherry":"#F3425F","base-grape":"#9360F7","base-lemon":"#F7B928","base-lime":"#45BD62","base-pink":"#FF66BF","base-seafoam":"#54C7EC","base-teal":"#2ABBA7","base-tomato":"#FB724B","text-badge-info-background":"hsl(214, 89%, 52%)","text-badge-success-background":"#31A24C","text-badge-attention-background":"hsl(40, 89%, 52%)","text-badge-critical-background":"#e41e3f","blue-link":"rgb(0,100,224)","border-focused":"#63788A","card-background":"rgb(255,255,255)","card-background-flat":"rgb(255,255,255)","comment-background":"rgba(28,43,51,0.10)","comment-footer-background":"#F6F9FA","dataviz-primary-1":"rgb(0,174,143)","dataviz-blue-primary":"#1D85FC","dataviz-blue-secondary":"#043B72","dataviz-orange":"#D06C14","disabled-button-background":"#E4E6EB","disabled-button-text":"#BCC0C4","disabled-icon":"rgba(28,43,51,0.25)","disabled-text":"rgba(28,43,51,0.25)",divider:"rgb(222,227,233)","event-date":"rgb(220,55,60)","fb-wordmark":"#0866FF","fb-logo":"#0866FF","filter-accent":"invert(39%) sepia(57%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(147.75%) hue-rotate(202deg) brightness(97%) contrast(96%)","filter-always-white":"invert(100%)","filter-disabled-icon":"invert(80%) sepia(6%) saturate(200%) saturate(120%) hue-rotate(173deg) brightness(98%) contrast(89%)","filter-placeholder-icon":"invert(59%) sepia(11%) saturate(200%) saturate(135%) hue-rotate(176deg) brightness(96%) contrast(94%)","filter-primary-accent":"invert(39%) sepia(57%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(147.75%) hue-rotate(202deg) brightness(97%) contrast(96%)","filter-primary-icon":"invert(8%) sepia(10%) saturate(200%) saturate(200%) saturate(166%) hue-rotate(177deg) brightness(104%) contrast(91%)","filter-secondary-button-icon-on-media":"invert(100%)","filter-secondary-icon":"invert(39%) sepia(21%) saturate(200%) saturate(109.5%) hue-rotate(174deg) brightness(94%) contrast(86%)","filter-warning-icon":"invert(77%) sepia(29%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(128%) hue-rotate(359deg) brightness(102%) contrast(107%)","filter-blue-link-icon":"invert(30%) sepia(98%) saturate(200%) saturate(200%) saturate(200%) saturate(166.5%) hue-rotate(192deg) brightness(91%) contrast(101%)","filter-positive":"invert(37%) sepia(61%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(115%) hue-rotate(91deg) brightness(97%) contrast(105%)","filter-primary-deemphasized-button-icon":"invert(28%) sepia(100%) saturate(6042%) hue-rotate(202deg) brightness(96%) contrast(101%)","filter-negative":"invert(25%) sepia(33%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(110%) hue-rotate(345deg) brightness(132%) contrast(96%)","focus-ring-blue":"#1877F2","glimmer-base-opaque":"#979A9F","glimmer-high-contrast-base-opaque":"#65686C","glimmer-opacity-high-contrast-max":"1","glimmer-opacity-high-contrast-min":"0.08","glimmer-opacity-max":"1","glimmer-opacity-min":"0.25","glimmer-spinner-icon":"#65676B","hero-banner-background":"#FFFFFF","hosted-view-selected-state":"rgb(52,72,84)","highlight-bg":"#E7F3FF","hover-overlay":"rgba(0, 0, 0, 0.05)","inverse-text":"var(--always-white)","list-cell-chevron":"rgb(99,120,138)","media-hover":"rgba(68, 73, 80, 0.15)","media-inner-border":"rgba(28,43,51,0.10)","media-outer-border":"#FFFFFF","media-pressed":"rgba(28,43,51,0.30)","messenger-card-background":"#FFFFFF","messenger-card-box-shadow":"0px 1px 2px 0px #0000001A","mwp-header-background-color":"var(--messenger-card-background)","mwp-header-button-color":"var(--accent)","mwp-message-row-background":"var(--messenger-card-background)","messenger-reply-background":"#F0F2F5","overlay-alpha-80":"rgba(28,43,51,0.80)","overlay-on-media":"rgba(28,43,51,0.70)","nav-bar-background":"rgba(0,0,0,0.00)","popover-card-background":"var(--card-background)","nav-bar-background-gradient":"linear-gradient(to top, #FFFFFF, rgba(255,255,255.9), rgba(255,255,255,.7), rgba(255,255,255,.4), rgba(255,255,255,0))","nav-bar-background-gradient-wash":"linear-gradient(to top, #F0F2F5, rgba(240,242,245.9), rgba(240,242,245,.7), rgba(240,242,245,.4), rgba(240,242,245,0))",negative:"rgb(220,55,60)","negative-background":"hsl(350, 87%, 55%, 20%)","new-notification-background":"rgba(28,43,51,0.10)","non-media-pressed":"rgba(28,43,51,0.15)","non-media-pressed-on-dark":"rgba(255,255,255,0.30)","notification-badge":"rgb(220,55,60)","placeholder-icon":"rgba(133,149,164)","placeholder-image":"rgb(222, 227, 233)","placeholder-text":"rgba(28,43,51,0.50)","placeholder-text-on-media":"rgba(255,255,255,0.45)","popover-background":"rgb(255,255,255)",positive:"rgb(0,126,89)","positive-background":"#DEEFE1","press-overlay":"rgba(0, 0, 0, 0.10)","primary-button-background":"rgb(0,100,224)","primary-button-icon":"rgb(255,255,255)","primary-button-pressed":"#77A7FF","primary-button-text":"rgb(255,255,255)","primary-deemphasized-button-background":"rgba(0,0,0,0.00)","primary-deemphasized-button-pressed":"rgb(0,0,0,.05)","primary-deemphasized-button-pressed-overlay":"rgb(0,0,0,.1)","primary-deemphasized-button-text":"rgb(255,255,255)","primary-icon":"rgb(28,43,51)","primary-text":"rgb(28,43,51)","primary-text-on-media":"rgb(255,255,255)","primary-web-focus-indicator":"#D24294","progress-ring-neutral-background":"rgba(0, 0, 0, 0.2)","progress-ring-neutral-foreground":"#000000","progress-ring-on-media-background":"rgba(255,255,255,0.20)","progress-ring-on-media-foreground":"rgb(255,255,255)","progress-ring-blue-background":"rgba(24, 119, 242, 0.2)","progress-ring-blue-foreground":"hsl(214, 89%, 52%)","progress-ring-disabled-background":"rgba(190,195,201, 0.2)","progress-ring-disabled-foreground":"#BEC3C9","rating-star-active":"#EB660D","scroll-thumb":"#BCC0C4","scroll-shadow":"0 0 16px 0 rgba(52,72,84,0.05)","secondary-button-background":"rgba(0,0,0,0.00)","secondary-button-background-floating":"#ffffff","secondary-button-background-on-dark":"rgba(0, 0, 0, 0.4)","secondary-button-pressed":"rgba(0,0,0,0.00)","secondary-button-stroke":"rgb(203,210,217)","secondary-button-text":"rgb(28,43,51)","secondary-icon":"rgb(99,120,138)","secondary-text":"rgb(99,120,138)","secondary-text-on-media":"rgba(255,255,255,0.70)","section-header-text":"#4B4C4F","shadow-1":"rgba(0, 0, 0, 0.1)","shadow-2":"rgba(0, 0, 0, 0.2)","shadow-5":"rgba(0, 0, 0, 0.5)","shadow-8":"rgba(0, 0, 0, 0.8)","shadow-base":"0 1px 2px var(--shadow-2)","shadow-elevated":"0 8px 20px 0 rgba(0, 0, 0, 0.2), 0 2px 4px 0 rgba(0, 0, 0, 0.1)","shadow-emphasis":"0 2px 12px var(--shadow-2)","shadow-inset":"rgba(255, 255, 255, 0.5)","shadow-on-media":"0px 0px 1px rgba(0, 0, 0, 0.62)","shadow-persistent":"0px 0px 12px rgba(52, 72, 84, 0.05)","shadow-primary":"0px 5px 12px rgba(52, 72, 84, 0.2)","shadow-responsive":"0px 8px 16px 0px rgba(0, 0, 0, 0.1)","surface-background":"rgb(255,255,255)","switch-active":"hsl(214, 89%, 52%)","switch-inactive":"#CED0D4","switch-unchecked-background-color":"#8F9297","text-highlight":"rgb(0,97,160)","input-background":"rgb(255,255,255)","input-background-hover":"var(--input-background)","input-background-warn-hover":"hsla(var(--warning-h), var(--warning-s), var(--warning-l), 0.05)","input-background-error-hover":"hsla(var(--negative-h), var(--negative-s), var(--negative-l), 0.05)","input-background-active":"hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.05)","input-background-warn-active":"hsla(var(--warning-h), var(--warning-s), var(--warning-l), 0.05)","input-background-error-active":"hsla(var(--negative-h), var(--negative-s), var(--negative-l), 0.05)","input-background-disabled":"#F0F2F5","input-border-color":"#CED0D4","input-border-color-hover":"var(--placeholder-text)","input-label-color-highlighted":"hsl(214, 89%, 52%)","input-label-color-inside":"var(--secondary-text)","input-label-color-error":"var(--negative)","input-label-color-disabled":"var(--disabled-text)","text-input-outside-label":"#000000","toast-background":"rgb(255,255,255)","toast-text":"#1C2B33","toast-text-link":"#4599FF","toast-border-color":"transparent","toast-border-style":"none","toast-border-width":"0px","toggle-active-background":"rgb(28,43,51)","toggle-active-icon":"rgb(255,255,255)","toggle-active-text":"rgb(255,255,255)","toggle-button-active-background":"#E7F3FF","tooltip-background":"rgb(52,72,84)","tooltip-box-shadow":"none","popover-border-color":"transparent",wash:"#E4E6EB","web-wash":"#F0F2F5",warning:"rgb(210,120,5)","chat-bubble-emphasis-ring-after":"black","chat-bubble-emphasis-ring-before":"white","chat-text-blockquote-color-background-line":"rgba(0, 0, 0, 0.12)","chat-text-blockquote-color-text-primary-media":"rgba(255, 255, 255, 0.7)","chat-incoming-message-bubble-background-color":"#F0F0F0","chat-outgoing-message-bubble-background-color":"var(--accent)","chat-replied-message-background-color":"rgba(0, 0, 0, 0.03)","radio-border-color":"var(--primary-icon)","radio-border-color-disabled":"var(--disabled-button-background)","radio-border-color-selected":"var(--accent)","radio-checked-icon-color":"var(--accent)","radio-checked-icon-color-disabled":"var(--disabled-button-background)","dialog-anchor-vertical-padding":"32px","header-height":"0px","global-panel-width":"0px","global-panel-width-expanded":"0px","alert-banner-corner-radius":"8px","button-corner-radius":"4px","button-corner-radius-medium":"10px","button-corner-radius-large":"12px","button-height-large":"52px","button-height-medium":"36px","button-padding-horizontal-large":"16px","button-padding-horizontal-medium":"16px","button-padding-icon-only":"16px","button-icon-padding-large":"16px","button-icon-padding-medium":"16px","button-inner-icon-spacing-large":"3px","button-inner-icon-spacing-medium":"3px","blueprint-button-height-medium":"40px","blueprint-button-height-large":"48px","card-corner-radius":"4px","card-box-shadow":"0 8px 20px 0  var(--shadow-2), 0 2px 4px 0 var(--shadow-1)","card-padding-horizontal":"10px","card-padding-vertical":"20px","chip-corner-radius":"4px","comment-bubble":"18px","dialog-corner-radius":"4px","glimmer-corner-radius":"4px","image-corner-radius":"4px","infochip-medium-radius":"12px","input-corner-radius":"4px","input-border-width":"1px","nav-list-cell-corner-radius":"4px","list-cell-corner-radius":"4px","list-cell-min-height":"52px","list-cell-padding-vertical":"20px","list-cell-padding-vertical-with-addon":"14px","menu-base-list-item-padding-horizontal":"8px","menu-base-list-item-padding-vertical":"12px","menu-base-size-full-margin-end":"48px","menu-item-base-margin-horizontal":"8px","menu-item-base-margin-vertical":"0px","menu-item-base-padding-horizontal":"8px","menu-item-base-overlay-radius":"4px","menu-item-base-padding-vertical":"12px","menu-item-base-with-icon-padding-horizontal":"var(--menu-item-base-padding-horizontal)","separator-menu-item-margin-horizontal":"16px","separator-menu-item-margin-vertical":"4px","nav-list-cell-min-height":"0px","nav-list-cell-padding-vertical":"16px","nav-list-cell-padding-vertical-with-addon":"16px","nux-card-body-padding-end":"24px","page-footer-padding-vertical":"28px","popover-border-style":"none","popover-border-width":"0px","section-header-addOnEnd-margin-horizontal":"8px","section-header-addOnStart-margin-horizontal":"12px","section-header-addOnEnd-button-padding-horizontal":"0px","section-header-addOnEnd-button-padding-vertical":"0px","section-header-padding-vertical":"16px","section-header-subtitle-margin-vertical":"14px","section-header-subtitle-with-addOnEnd-margin-vertical":"6px","tab-height":"60px","tab-icon-padding-end":"0px","tab-text-icon-gap":"4px","tab-underline-color":"transparent","tab-underline-height":"3px","text-badge-corner-radius":"4px","text-badge-padding-horizontal":"6px","text-badge-padding-vertical":"6px","text-input-multi-padding-between-text-scrollbar":"20px","text-input-multi-padding-scrollbar":"16px","text-input-caption-margin-top":"10px","text-input-padding-vertical":"12px","toast-addon-padding-horizontal":"6px","toast-addon-padding-vertical":"0px","toast-container-max-width":"100%","toast-container-min-width":"320px","toast-container-padding-horizontal":"14px","toast-container-padding-vertical":"16px","toast-corner-radius":"8px","toaster-view-max-width":"328px","tooltip-corner-radius":"8px","typeahead-list-outer-padding-vertical":"8px","fds-animation-enter-exit-in":"cubic-bezier(0.14, 1, 0.34, 1)","fds-animation-enter-exit-out":"cubic-bezier(0.45, 0.1, 0.2, 1)","fds-animation-swap-shuffle-in":"cubic-bezier(0.14, 1, 0.34, 1)","fds-animation-swap-shuffle-out":"cubic-bezier(0.45, 0.1, 0.2, 1)","fds-animation-move-in":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-move-out":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-expand-collapse-in":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-expand-collapse-out":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-passive-move-in":"cubic-bezier(0.5, 0, 0.1, 1)","fds-animation-passive-move-out":"cubic-bezier(0.5, 0, 0.1, 1)","fds-animation-quick-move-in":"cubic-bezier(0.1, 0.9, 0.2, 1)","fds-animation-quick-move-out":"cubic-bezier(0.1, 0.9, 0.2, 1)","fds-animation-fade-in":"cubic-bezier(0, 0, 1, 1)","fds-animation-fade-out":"cubic-bezier(0, 0, 1, 1)","fds-duration-extra-extra-short-in":"100ms","fds-duration-extra-extra-short-out":"100ms","fds-duration-extra-short-in":"200ms","fds-duration-extra-short-out":"150ms","fds-duration-short-in":"280ms","fds-duration-short-out":"200ms","fds-duration-medium-in":"400ms","fds-duration-medium-out":"350ms","fds-duration-long-in":"500ms","fds-duration-long-out":"350ms","fds-duration-extra-long-in":"1000ms","fds-duration-extra-long-out":"1000ms","fds-duration-none":"0ms","fds-fast":"200ms","fds-slow":"400ms","font-family-apple":"system-ui, -apple-system, BlinkMacSystemFont, '.SFNSText-Regular', sans-serif","font-family-code":"ui-monospace, Menlo, Consolas, Monaco, monospace","font-family-default":"Helvetica, Arial, sans-serif","font-family-segoe":"Segoe UI Historic, Segoe UI, Helvetica, Arial, sans-serif","font-family-system-fds":"system-ui, -apple-system, BlinkMacSystemFont, Segoe UI Historic, Segoe UI, Helvetica, Arial, sans-serif","text-input-field-font-family":"Placeholder Font","text-input-field-font-size":"1rem","text-input-field-font-stretch":"initial","text-input-field-font-weight":"500","text-input-field-line-height":"1.2941","text-input-label-font-family":"Placeholder Font","text-input-label-font-size":"17px","text-input-label-font-size-scale-multiplier":"0.75","text-input-label-font-stretch":"initial","text-input-label-font-weight":"400","text-input-label-line-height":"1.2941","messenger-card-min-width":"300px","messenger-card-max-width":"480px","messenger-application-max-width":"2560px","messenger-sidebar-collapsed-width":"44px","messenger-sidebar-expanded-width":"240px","messenger-card-corner-radius":"8px","messenger-card-spacing":"16px","chat-bubble-padding-vertical":"8px","chat-bubble-padding-horizontal":"12px","chat-bubble-border-radius":"18px","dialog-size-medium-width":"100%","dialog-size-small-width":"100%","focus-ring-outline-forced-colors":"2px auto transparent !important","focus-ring-outline-link":"2px auto var(--focus-ring-blue)","focus-ring-shadow-default":"0 0 0 2px var(--always-white), 0 0 0 4px var(--focus-ring-blue)","focus-ring-shadow-inset":"0 0 0 2px var(--focus-ring-blue) inset, 0 0 0 4px var(--always-white) inset","glimmer-animation-direction":"alternate","glimmer-animation-duration":"1000ms","glimmer-animation-timing-function":"steps(10, end)","radio-checked-icon-size-large":"12px","radio-checked-icon-size-medium":"12px","radio-border-width":"2px","radio-size-large":"24px","radio-size-medium":"20px","blue-primary":"rgb(0,136,244)","blue-secondary":"rgb(4,59,114)","blue-tertiary":"rgb(235,245,255)","chartreuse-primary":"rgb(106,147,22)","chartreuse-secondary":"rgb(50,65,19)","chartreuse-tertiary":"rgb(226,255,152)","cyan-primary":"rgb(0,142,213)","cyan-secondary":"rgb(15,63,93)","cyan-tertiary":"rgb(231,245,255)","dataviz-primary-2":"rgb(156,219,255)","dataviz-primary-3":"rgb(73,156,255)","dataviz-secondary-1":"rgb(83,78,191)","dataviz-secondary-2":"rgb(103,96,228)","dataviz-secondary-3":"rgb(119,45,88)","dataviz-supplementary-1":"rgb(253,91,67)","dataviz-supplementary-2":"rgb(161,132,0)","dataviz-supplementary-3":"rgb(36,131,44)","dataviz-supplementary-4":"rgb(51,51,52)","fuschia-primary":"rgb(250,45,138)","fuschia-secondary":"rgb(118,14,62)","fuschia-tertiary":"rgb(255,241,246)","green-primary":"rgb(43,154,53)","green-secondary":"rgb(26,68,27)","green-tertiary":"rgb(227,250,224)","magenta-primary":"rgb(215,77,204)","magenta-secondary":"rgb(96,36,91)","magenta-tertiary":"rgb(255,239,254)","orange-primary":"rgb(208,108,20)","orange-secondary":"rgb(94,49,14)","orange-tertiary":"rgb(255,241,239)","purple-primary":"rgb(125,116,255)","purple-secondary":"rgb(55,50,121)","purple-tertiary":"rgb(245,241,255)","red-primary":"rgb(251,60,68)","red-secondary":"rgb(118,22,27)","red-tertiary":"rgb(255,241,239)","teal-primary":"rgb(0,152,124)","teal-secondary":"rgb(10,68,56)","teal-tertiary":"rgb(227,247,241)","yellow-primary":"rgb(161,132,0)","yellow-secondary":"rgb(72,59,12)","yellow-tertiary":"rgb(255,246,161)","emphasized-card-background-blue-comet":"linear-gradient(rgb(192,223,255),rgb(210,232,255))","emphasized-card-background-green-comet":"linear-gradient(rgb(185,245,170),rgb(205,250,195))","emphasized-card-background-purple-comet":"linear-gradient(rgb(210, 210, 255),rgb(225,225,253))","emphasized-card-background-teal-comet":"linear-gradient(rgb(165,240,230),rgb(195,245,240))","search-input-background":"rgba(0, 0, 0, 0.04)","secondary-emphasized-button-stroke":"rgb(0,100,224)","stepper-active":"#344854","stepper-inactive":"rgba(52, 72, 84, 0.4)"}}),null);
__d("CDSThemeConfig",["CDSStyleXDarkTheme","CDSStyleXDefaultTheme","DspCDSWebLegacyThemeUsage"],(function(a,b,c,d,e,f,g){"use strict";a=babelHelpers["extends"]({},c("CDSStyleXDefaultTheme"));b=babelHelpers["extends"]({},c("CDSStyleXDarkTheme"));Object.assign(a,c("DspCDSWebLegacyThemeUsage").light);Object.assign(b,c("DspCDSWebLegacyThemeUsage").dark);d={dark:b,light:a,type:"VARIABLES"};g["default"]=d}),98);
__d("CDSDialogContainer.react",["BaseDialog.react","BaseDialogLabelIDProvider","BaseMultiPageView.react","CDSDialogPageLoadingState.react","CDSThemeConfig","CometThemeInfraUtils","emptyFunction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useMemo;var j={anchor:{alignItems:"x1qjc9v5",maxHeight:"x1bwycvy",minHeight:"x1jee029",paddingTop:"x1x97wu9",paddingBottom:"xbr3nou",paddingInlineStart:"x135b78x",paddingInlineEnd:"x11lfxj5",paddingLeft:null,paddingRight:null,"@supports (padding: env(safe-area-inset-bottom, 0))_paddingBottom":"xqit15g","@supports (padding: env(safe-area-inset-bottom, 0))_paddingTop":"x1bi8yb4",$$css:!0},anchorBottomSheet:{"@media (max-width: 679px)_paddingBottom":"x1eevrrt","@media (max-width: 679px)_touchAction":"x15ypxgc",$$css:!0},anchorMinHeight:{"@media (max-height: 488px)_minHeight":"x1roekcs","@media (max-height: 488px)_paddingTop":"x10hnfgj","@media (max-height: 488px)_paddingBottom":"x1k7oykt","@media (max-width: 679px)_maxHeight":"x1jxyteu","@media (max-width: 679px)_minHeight":"xwnxf6m",$$css:!0},card:{backgroundColor:"x1jx94hy",borderStartStartRadius:"xazwl86",borderStartEndRadius:"x1hl0hii",borderEndEndRadius:"x1aq6byr",borderEndStartRadius:"x2k6n7x",clipPath:"xkahi35",flexGrow:"x1iyjqo2",position:"x1n2onr6","@media (max-width: 679px)_boxShadow":"x1likypf","@media (max-width: 679px)_overflowX":"x1e9k66k","@media (max-width: 679px)_overflowY":"x12l8kdc",$$css:!0},dialog:{alignItems:"x1qjc9v5",borderStartStartRadius:"xazwl86",borderStartEndRadius:"x1hl0hii",borderEndEndRadius:"x1aq6byr",borderEndStartRadius:"x2k6n7x",boxShadow:"x104qc98",display:"x78zum5",overflowX:"x1plvlek",overflowY:"xryxfnj",width:"xh8yej3",$$css:!0},dialogBottomSheet:{"@media (max-width: 679px)_borderEndEndRadius":"xpyx08","@media (max-width: 679px)_borderEndStartRadius":"xz71k5e",$$css:!0},fitToSize:{minHeight:"xsjhvl8",$$css:!0},root:{"@media (max-width: 679px)_justifyContent":"x3l4zpa",$$css:!0},rootBottomSheet:{"@media (max-width: 679px)_justifyContent":"x9a67hx",$$css:!0},rootMinHeight:{"@media (max-width: 679px)_justifyContent":"xshlqvt",$$css:!0}},k={medium:{maxWidth:"xrgej4m",$$css:!0},small:{maxWidth:"xrlsmeg",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(33),e=a.ref,f=a.anchorXStyle,g=a["aria-label"],h=a.children,l=a.disableClosingWithMask,m=a.enableBottomSheetBehavior,n=a.fitToSize,o=a.mobileFullHeight,p=a.onClose,q=a.size;a=a.testid;l=l===void 0?!1:l;m=m===void 0?!1:m;n=n===void 0?!1:n;o=o===void 0?!0:o;q=q===void 0?"small":q;var r=p!=null?p:c("emptyFunction"),s;b[0]!==r?(s=i.jsx(c("CDSDialogPageLoadingState.react"),{onClose:r}),b[0]=r,b[1]=s):s=b[1];r=s;s=r;r=d("BaseDialogLabelIDProvider").useDialogHeaderID();var t;b[2]!==f?(t=[j.anchor,f],b[2]=f,b[3]=t):t=b[3];f=t;t=n&&j.fitToSize;n=o&&j.anchorMinHeight;var u=m&&j.anchorBottomSheet,v;b[4]!==f||b[5]!==t||b[6]!==n||b[7]!==u?(v=[f,t,n,u],b[4]=f,b[5]=t,b[6]=n,b[7]=u,b[8]=v):v=b[8];f=g==null?r:void 0;t=p!=null?p:c("emptyFunction");n=!o&&j.rootMinHeight;u=m&&j.rootBottomSheet;b[9]!==n||b[10]!==u?(r=[j.root,n,u],b[9]=n,b[10]=u,b[11]=r):r=b[11];p=k[q];o=m&&j.dialogBottomSheet;b[12]!==p||b[13]!==o?(n=[j.dialog,p,o],b[12]=p,b[13]=o,b[14]=n):n=b[14];u=m&&j.dialogBottomSheet;b[15]!==u?(q=[j.card,u],b[15]=u,b[16]=q):q=b[16];b[17]!==h||b[18]!==s||b[19]!==q?(p=i.jsx(c("BaseMultiPageView.react"),{fallback:s,xstyle:q,children:h}),b[17]=h,b[18]=s,b[19]=q,b[20]=p):p=b[20];b[21]!==g||b[22]!==l||b[23]!==m||b[24]!==e||b[25]!==v||b[26]!==f||b[27]!==t||b[28]!==r||b[29]!==n||b[30]!==p||b[31]!==a?(o=i.jsx(c("BaseDialog.react"),{anchorXStyle:v,"aria-label":g,"aria-labelledby":f,disableClosingWithMask:l,enableBottomSheetBehavior:m,onClose:t,ref:e,rootXStyle:r,testid:void 0,themeConfig:d("CometThemeInfraUtils").enableCometThemeInfraThemeInXMDSComponents()?void 0:c("CDSThemeConfig"),xstyle:n,children:p}),b[21]=g,b[22]=l,b[23]=m,b[24]=e,b[25]=v,b[26]=f,b[27]=t,b[28]=r,b[29]=n,b[30]=p,b[31]=a,b[32]=o):o=b[32];return o}g["default"]=a}),98);
__d("CDSDialog.react",["BaseDialogLabelIDProvider","CDSDialogContainer.react","CDSDialogPage.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["ref","anchorXStyle","aria-label","disableClosingWithMask","enableBottomSheetBehavior","fitToSize","mobileFullHeight","onClose","size","testid"],i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(26),e,f,g,i,k,l,m,n,o,p,q;b[0]!==a?(o=a.ref,e=a.anchorXStyle,f=a["aria-label"],g=a.disableClosingWithMask,i=a.enableBottomSheetBehavior,k=a.fitToSize,l=a.mobileFullHeight,m=a.onClose,p=a.size,q=a.testid,n=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=i,b[5]=k,b[6]=l,b[7]=m,b[8]=n,b[9]=o,b[10]=p,b[11]=q):(e=b[1],f=b[2],g=b[3],i=b[4],k=b[5],l=b[6],m=b[7],n=b[8],o=b[9],p=b[10],q=b[11]);b[12]!==n?(a=j.jsx(c("CDSDialogPage.react"),babelHelpers["extends"]({},n)),b[12]=n,b[13]=a):a=b[13];b[14]!==e||b[15]!==f||b[16]!==g||b[17]!==i||b[18]!==k||b[19]!==l||b[20]!==m||b[21]!==o||b[22]!==p||b[23]!==a||b[24]!==q?(n=j.jsx(d("BaseDialogLabelIDProvider").BaseDialogLabelIDProvider,{children:j.jsx(c("CDSDialogContainer.react"),{anchorXStyle:e,"aria-label":f,disableClosingWithMask:g,enableBottomSheetBehavior:i,fitToSize:k,mobileFullHeight:l,onClose:m,ref:o,size:p,testid:void 0,children:a})}),b[14]=e,b[15]=f,b[16]=g,b[17]=i,b[18]=k,b[19]=l,b[20]=m,b[21]=o,b[22]=p,b[23]=a,b[24]=q,b[25]=n):n=b[25];return n}g["default"]=a}),98);
__d("XMDSDialog.react",["CDSDialog.react"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("CDSDialog.react"),Object.keys(d("CDSDialog.react")).forEach(function(a){if(a==="default"||a==="__esModule")return;g[a]=d("CDSDialog.react")[a]})}),98);
__d("CDSDialogLoadingState.react",["fbt","CDSDialogHeader.react","CDSDialogLoadingStateImpl.react","XMDSDialog.react","emptyFunction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(10),e=a.inline,f=a.withCloseButton,g=a.onClose;a=a.size;f=f===void 0?!1:f;g=g===void 0?c("emptyFunction"):g;var i;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(i=h._(/*BTDS*/"Loading..."),b[0]=i):i=b[0];var k;b[1]!==g||b[2]!==f?(k=j.jsx(c("CDSDialogHeader.react"),{onClose:g,withCloseButton:f}),b[1]=g,b[2]=f,b[3]=k):k=b[3];b[4]===Symbol["for"]("react.memo_cache_sentinel")?(f=j.jsx(c("CDSDialogLoadingStateImpl.react"),{}),b[4]=f):f=b[4];b[5]!==e||b[6]!==g||b[7]!==a||b[8]!==k?(i=j.jsx(c("XMDSDialog.react"),{"aria-label":i,footer:null,header:k,inline:e,onClose:g,size:a,children:f}),b[5]=e,b[6]=g,b[7]=a,b[8]=k,b[9]=i):i=b[9];return i}g["default"]=a}),226);
__d("CometIXTFacebookCDSXfacUniversalTriggerRootQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="24210126251984819"}),null);
__d("CometIXTFacebookCDSXfacUniversalTriggerRootQuery$Parameters",["CometIXTFacebookCDSXfacUniversalTriggerRootQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("CometIXTFacebookCDSXfacUniversalTriggerRootQuery_facebookRelayOperation"),metadata:{},name:"CometIXTFacebookCDSXfacUniversalTriggerRootQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("CometIXTFacebookCDSXfacUniversalTriggerEntryPoint.entrypoint",["CometIXTFacebookCDSXfacUniversalTriggerRootQuery$Parameters","JSResourceForInteraction","WebPixelRatio","react","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h;h||c("react");a={getPreloadProps:function(a){return{queries:{reference:{parameters:c("CometIXTFacebookCDSXfacUniversalTriggerRootQuery$Parameters"),variables:{input:babelHelpers["extends"]({},a,{nt_context:null,trigger_session_id:c("uuidv4")()}),scale:d("WebPixelRatio").get()}}}}},root:c("JSResourceForInteraction")("CometIXTFacebookCDSXfacUniversalTriggerRoot.react").__setRef("CometIXTFacebookCDSXfacUniversalTriggerEntryPoint.entrypoint")};b=a;g["default"]=b}),98);
__d("CometLinkTrackingUtils.workplace",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){return a}f.decorateHrefWithTrackingInfo=a}),66);
__d("FalcoAppUniverse",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({FACEBOOK:1,INSTAGRAM:2,OCULUS:3});c=a;f["default"]=c}),66);
__d("Queue",[],(function(a,b,c,d,e,f){var g={};a=function(){function a(a){this._timeout=null,this._interval=(a==null?void 0:a.interval)||0,this._processor=a==null?void 0:a.processor,this._queue=[],this._stopped=!0}var b=a.prototype;b._dispatch=function(a){var b=this;a===void 0;if(this._stopped||this._queue.length===0)return;a=this._processor;if(a==null){this._stopped=!0;throw new Error("No processor available")}var c=this._interval;if(c!=null)a.call(this,this._queue.shift()),this._timeout=setTimeout(function(){return b._dispatch()},c);else while(this._queue.length)a.call(this,this._queue.shift())};b.enqueue=function(a){this._processor&&!this._stopped?this._processor(a):this._queue.push(a);return this};b.start=function(a){a&&(this._processor=a);this._stopped=!1;this._dispatch();return this};b.isStarted=function(){return!this._stopped};b.dispatch=function(){this._dispatch(!0)};b.stop=function(a){this._stopped=!0;a&&this._timeout!=null&&clearTimeout(this._timeout);return this};b.merge=function(a,b){if(b){(b=this._queue).unshift.apply(b,a._queue)}else{(b=this._queue).push.apply(b,a._queue)}a._queue=[];this._dispatch();return this};b.getLength=function(){return this._queue.length};a.get=function(b,c){var d;b in g?d=g[b]:d=g[b]=new a(c);return d};a.exists=function(a){return a in g};a.remove=function(a){return delete g[a]};return a}();f["default"]=a}),66);
__d("FalcoLoggerTransports",["AnalyticsCoreData","Banzai","ExecutionEnvironment","FalcoAppUniverse","FalcoUtils","ODS","PersistedQueue","Queue","WebSession","performanceAbsoluteNow","promiseDone","requireDeferredForDisplay","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=c("requireDeferredForDisplay")("TransportSelectingClientSingletonConditional").__setRef("FalcoLoggerTransports"),m=5*1024,n=(b=(i||(i=c("AnalyticsCoreData"))).max_delay_br_queue)!=null?b:60*1e3,o=(e=(i||(i=c("AnalyticsCoreData"))).max_delay_br_queue_immediate)!=null?e:1e3;b=(f=(i||(i=c("AnalyticsCoreData"))).max_delay_br_init_not_complete)!=null?f:1e3;var p="falco:",q=new(c("Queue"))(),r=5e3,s=6e4,t=c("uuidv4")(),aa="ods_web_batch",u=new Map(),v=new Set(),w=new Set(),x=d("FalcoUtils").getTaggedBitmap(38),y=(e=c("FalcoAppUniverse").cast((i||(i=c("AnalyticsCoreData"))).app_universe))!=null?e:1,z=[],A=0,B=null,C=!1,D=!1,E=!1,F=!0,G=!1,H=Date.now()-s,I=1,J=b>n?b:n,K=b;Y();for(e of(f=(i||(i=c("AnalyticsCoreData"))).stateful_events_list_for_br)!=null?f:[]){v.add(e)}for(f of(b=(i||(i=c("AnalyticsCoreData"))).stateless_non_fb_events_for_br)!=null?b:[]){w.add(f)}function L(){return(i||(i=c("AnalyticsCoreData"))).enable_bladerunner&&!(k||(k=c("ExecutionEnvironment"))).isInWorker}function M(a,b){d("FalcoUtils").bumpODSMetrics(b.item.name,"event.info.streaming.batched",1);var c=b.item.extra.length;A+c>m&&(clearTimeout(B),N());z.push([a,b]);A+=c}function N(){B=null;C=!1;var a=z;S("event.info.streaming.batch_processing",a.map(function(a){return a[1].item}));!G?O(a,"event.non_critical_failure.streaming_init_not_complete"):q.enqueue(function(b){return b.log(a.map(function(a){return a[1].item}),function(b){if(!b){O(a,"event.info.banzai_fallback");return}P(a,b,"event.info.streaming.enqueued")})});z=[];A=0}function O(a,b){var e=function(){var a,e=f[0],g=f[1],h=g.item;d("FalcoUtils").bumpODSMetrics(h.name,b,1);h.identity||(h.identity=(i||(i=c("AnalyticsCoreData"))).identity);if((a=h.logCritical)!=null?a:!1)U.logCritical([h],function(a){return e.markItem(g,a)});else{((a=h.logImmediate)!=null?a:!1)?U.logImmediately([h],function(a){return e.markItem(g,a)}):U.log([h],function(a){return e.markItem(g,a)})}};for(var f of a)e();return}function P(a,b,c){for(a of a){var e=a[0],f=a[1];d("FalcoUtils").bumpODSMetrics(f.item.name,c,1);e.markItem(f,b)}}function ba(a){return{events:a.map(function(a){return{name:a.name,extra:a.extra,rate:a.policy.r,time:a.time/1e3,tag:0,tags:a.tags,shouldAddState:a.shouldAddState,identity:Q(a.identity),expTags:a.exptTags,sessionID:a.sessionId,deviceID:a.deviceId}})}}function ca(a){var b;a={deviceId:(i||(i=c("AnalyticsCoreData"))).device_id,familyDeviceId:null,osBuildNumber:null,sessionId:a,appId:i.app_id,appVersion:(a=(i||(i=c("AnalyticsCoreData"))).app_version)!=null?a:null,bundleId:null,consentState:null,identity:null,pushPhase:i.push_phase};((b=(b=(i||(i=c("AnalyticsCoreData"))).stateful_events_list_for_br)==null?void 0:b.length)!=null?b:0)>0&&(a.ambientState=(i||(i=c("AnalyticsCoreData"))).state_for_br);a.identity=Q(i.identity);return Object.freeze(a)}function Q(a){var b=a==null?void 0:a.claim;b=b!=null?[b]:[];if(y===2||y===3){var c=a==null?void 0:a.appScopedIdentity;if(c!==void 0)return{appScopedIdentity:{uid:c,identifier:c,claims:b}}}else{c=a==null?void 0:a.fbIdentity;if(c!==void 0)return{facebookIdentity:{actorId:c.actorId,accountId:c.accountId,claims:b}}}return null}function R(a,b){for(var e of a){var f,g;f=(g={},g.e=e.extra,g.r=e.policy.r,g.d=(f=e.deviceId)!=null?f:(i||(i=c("AnalyticsCoreData"))).device_id,g.s=(f=e.sessionId)!=null?f:d("WebSession").getId(),g.t=e.time,g);e.privacyContext&&(f.p=e.privacyContext);e.tags!=null&&(f.b=e.tags);g=e.identity;g&&(f.id=g);c("Banzai").post(p+e.name,f,b)}S("event.uploaded",a)}function S(a,b){for(b of b)b.name!==aa&&d("FalcoUtils").bumpODSMetrics(b.name,a,1)}function T(a,b){var e="falco.fabric.www."+(i||(i=c("AnalyticsCoreData"))).push_phase;(h||(h=d("ODS"))).bumpEntityKey(1344,e,a,b)}var U={log:function(a,b){S("event.info.banzai.log.upload_processing",a),R(a,c("Banzai").BASIC),b(!0)},logImmediately:function(a,b){S("event.info.banzai.log_immediately.upload_processing",a),R(a,c("Banzai").VITAL),b(!0)},logCritical:function(a,b){S("event.info.banzai.log_critical.upload_processing",a),R(a,{signal:!0,retry:!0}),b(!0)}};function da(a){Y();var b=V(a,"banzai_data_loss","log"),d=V(a,"banzai_data_loss","logImmediately"),e=V(a,"banzai_data_loss","logCritical"),f=V(a,"bladerunner_data_loss",""),g=V(a,"bladerunner_data_loss","logCritical");T("js.br_data_loss.posted."+a,1);if(G&&F)try{q.enqueue(function(b){return b.log([f],function(b){if(!b){T("js.br.transport_failure."+a,1);U.logCritical([g],function(b){T("js.br.failure_fallback_success_callback."+a,1)});return}T("js.br.success_callback."+a,1)})})}catch(b){T("js.br.error_enqueueing."+a,1),U.logCritical([g],function(b){T("js.br.enqueuing_fallback_success_callback."+a,1)})}else F||T("js.br.failed."+a,1),G||T("js.br.init_not_complete."+a,1),U.logCritical([g],function(b){T("js.br.init_fallback_success_callback."+a,1)});R([b],c("Banzai").BASIC);R([d],c("Banzai").VITAL);R([e],{signal:!0,retry:!0})}function V(a,b,d){return{name:b,time:(j||(j=c("performanceAbsoluteNow")))(),policy:{r:1},extra:JSON.stringify({event_index:a,falco_js_connection_id:t,logging_mode:d,logging_flow_flag:"original_flow"})}}function W(){H+r<Date.now()&&(da(I),H=Date.now(),I++)}function X(){window.setTimeout(function(){W(),I<=40&&X()},s)}function ea(a){q.start(function(b){return b({log:function(d,b){S("event.info.streaming.queue_processing",d);var e=JSON.stringify(ba(d));a?(i||(i=c("AnalyticsCoreData"))).enable_ack?c("promiseDone")(a.amendWithAck(e),function(a){a?(S("event.streamed.with_ack",d),S("event.uploaded",d)):S("event.non_critical_failure.streaming.ack_failed",d),b(a)},function(){S("event.non_critical_failure.streaming.ack_rejected",d),b(!1)}):(a.amendWithoutAck(e),S("event.streamed.without_ack",d),S("event.uploaded",d)):(S("event.non_critical_error.streaming.stream_not_available",d),b(!1))},logImmediately:function(b,a){this.log(b,a)},logCritical:function(b,a){this.log(b,a)}})})}function Y(){if(D)return;G=!1;if(!L())return;l.onReady(function(a){if(!a){F=!1;q.start(function(a){return a(U)});return}a=a;var b={onTermination:function(a){a.message==="Stream closed"?(q.stop(!0),D=!1):(d("FalcoUtils").bumpODSMetrics("","streaming.non_critical_failure.rejected",1),F=!1,q.start(function(a){return a(U)}))},onFlowStatus:function(){}};c("promiseDone")(a.requestStream({method:"Falco"},JSON.stringify(ca(d("WebSession").getId())),b,{requestId:""}).then(function(b){a=b,ea(a),G=!0,J=n,K=o})["catch"](function(a){d("FalcoUtils").bumpODSMetrics("","streaming.non_critical_failure.failed",1),q.stop(!0),D=!1}))});D=!0}function Z(a){var b,e=a.name;if(!L()||!F)return!1;if(v.has(e)||a.policy.s!==1&&((b=(i||(i=c("AnalyticsCoreData"))).br_stateful_migration_on)!=null?b:!1)){a.shouldAddState=!0;a.tags=d("FalcoUtils").xorBitmap((b=a.tags)!=null?b:[0,0],x);return!0}if(y!==1&&(i||(i=c("AnalyticsCoreData"))).enable_non_fb_br_stateless_by_default!==!0&&!w.has(e))return!1;if(a.policy.s===1){a.tags=d("FalcoUtils").xorBitmap((b=a.tags)!=null?b:[0,0],x);return!0}return!1}function $(a){if(a==="")return null;if(u.has(a))return u.get(a);else{var b={claim:""},c=a.split("^#");if(c.length>=4){var d=c[0],e=c[1],f=c[2];c=c[3];f!==""?b={appScopedIdentity:f,claim:c}:d!==""&&(b={fbIdentity:{accountId:d,actorId:e},claim:c});u.set(a,b)}return b}}function a(){if(E)return;E=!0;c("PersistedQueue").setHandler("falco_queue_log",function(b){var e,f=b.getQueueNameSuffix(),g=$(f);while(e=b.dequeueItem())(function(e){Z(e.item)?(d("FalcoUtils").bumpODSMetrics(e.item.name,"event.info.upload_method.streaming.log",1),Y(),B==null&&(B=setTimeout(N,J)),g&&!a(f)&&(e.item.identity=g),M(b,e)):(g?e.item.identity=g:e.item.identity=(i||(i=c("AnalyticsCoreData"))).identity,U.log([e.item],function(a){return b.markItem(e,a)}))})(e)});c("PersistedQueue").setHandler("falco_queue_immediately",function(b){var e,f=b.getQueueNameSuffix(),g=$(f);while(e=b.dequeueItem())(function(e){Z(e.item)?(d("FalcoUtils").bumpODSMetrics(e.item.name,"event.info.upload_method.streaming.log_immediately",1),Y(),(B==null||!C)&&(clearTimeout(B),B=setTimeout(N,K),C=!0),e.item.logImmediate=!0,g&&!a(f)&&(e.item.identity=g),M(b,e),c("PersistedQueue").isPersistenceAllowed()||(d("FalcoUtils").bumpODSMetrics(e.item.name,"event.info.streaming_no_persistence.log_immediately",1),N())):(d("FalcoUtils").bumpODSMetrics(e.item.name,"event.info.upload_method.banzai.log_immediately",1),g?e.item.identity=g:e.item.identity=(i||(i=c("AnalyticsCoreData"))).identity,U.logImmediately([e.item],function(a){return b.markItem(e,a)}))})(e)});c("PersistedQueue").setHandler("falco_queue_critical",function(b){var e,f=b.getQueueNameSuffix(),g=$(f);while(e=b.dequeueItem())(function(e){var h=e.item;Z(h)?(d("FalcoUtils").bumpODSMetrics(e.item.name,"event.info.upload_method.streaming.log_critical",1),Y(),h.logCritical=!0,!G?(g?h.identity=g:h.identity=(i||(i=c("AnalyticsCoreData"))).identity,O([[b,e]],"event.non_critical_failure.streaming_init_not_complete.log_critical")):(g&&!a(f)&&(h.identity=g),q.enqueue(function(a){return a.logCritical([h],function(a){if(!a){h.identity||(g?h.identity=g:h.identity=(i||(i=c("AnalyticsCoreData"))).identity);O([[b,e]],"event.info.banzai_fallback.log_critical");return}P([[b,e]],a,"event.uploaded")})}))):(g?h.identity=g:h.identity=(i||(i=c("AnalyticsCoreData"))).identity,d("FalcoUtils").bumpODSMetrics(e.item.name,"event.info.upload_method.banzai.log_critical",1),U.logCritical([h],function(a){return b.markItem(e,a)}))})(e)});(i||(i=c("AnalyticsCoreData"))).enable_dataloss_timer&&(Y(),W(),X());function a(a){try{var b=d("FalcoUtils").identityToString((i||(i=c("AnalyticsCoreData"))).identity);return a===b}catch(a){(h||(h=d("ODS"))).bumpEntityKey(1344,"js.br.identity.check","exception.when.comparing.with.current.user.identity",1);return!0}}}g.attach=a}),98);
__d("LSMqttEnvInitializer",["CurrentMessengerUser","MqttEnv","MqttEnvConfigStorage","MqttEnvInitializer","MqttLogger","Random","clearTimeout","qex","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";a={initialize:function(a,b,e,f){var g=c("qex")._("2071"),h=g!=null&&g!=="default"?g:null;d("MqttEnv").Env.initialize(c("Random").random,a!=null?a:d("CurrentMessengerUser").isLoggedInNow,c("clearTimeout"),c("setTimeoutAcrossTransitions"),function(){return c("MqttLogger").getInstance(h)},function(a){return b!=null&&b[a]!=null?b[a]:c("MqttEnvInitializer").genGk(a)},null,null,null,e!=null?e:d("MqttEnvConfigStorage").configRead,f!=null?f:d("MqttEnvConfigStorage").configWrite)}};b=a;g["default"]=b}),98);
__d("LSMqttChannel",["FBLogger","LSMqttEnvInitializer","MqttChannel","MqttConfig","WAResolvable"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,d,e,f,g,h){c("LSMqttEnvInitializer").initialize(b,d,e,f);(g==null||g===c("MqttConfig").appID)&&c("FBLogger")("S521050_debug_logging").warn("Constructing an MQTT client without a specified App ID.");return new(c("MqttChannel"))({appId:g!=null?g:c("MqttConfig").appID,capabilities:c("MqttConfig").capabilities,chatVisibility:c("MqttConfig").chatVisibility,clientCapabilities:c("MqttConfig").clientCapabilities,deviceId:a,endpoint:c("MqttConfig").endpoint,guestAuthString:h,initialSubscribedTopics:c("MqttConfig").subscribedTopics,phpOverride:c("MqttConfig").hostNameOverride,pollingEndpoint:c("MqttConfig").pollingEndpoint,userFbid:c("MqttConfig").fbid})}var i=null,j=new(d("WAResolvable").Resolvable)();function a(a,b,c,d,e,f,g){if(i==null){a=h(a,b,c,d,e,f,g);i=a;j.resolve(a);return a}else return i}function b(){i!=null&&(i.shutdown(),i=null,j=new(d("WAResolvable").Resolvable)())}function e(){return j.promise}f={getInstance:a,getMqttChannelPromise:e,shutdownAndClear:b};g["default"]=f}),98);
__d("SecuredActionTriggerWithAccountID.react",["CometRouteURL","react","react-compiler-runtime","useCometEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef;function a(a){var b=d("react-compiler-runtime").c(17),e=a.accountID,f=a.accountType,g=a.categoryName,h=a.entrypoint,k=a.onCancel,l=a.onExit,m=a.onFailure,n=a.onSuccess,o=a.reauthContentType;a=d("CometRouteURL").useRouteURL();var p;b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==o||b[4]!==a?(p={account_id:e,account_type:f,category_name:g,reauth_content_type:o,return_uri:a},b[0]=e,b[1]=f,b[2]=g,b[3]=o,b[4]=a,b[5]=p):p=b[5];a=c("useCometEntryPointDialog")(h,p);var q=a[0],r=j(!0);b[6]!==e||b[7]!==f||b[8]!==g||b[9]!==k||b[10]!==l||b[11]!==m||b[12]!==n||b[13]!==o||b[14]!==q?(h=function(){r.current&&q({accountID:e,accountType:f,categoryName:g,onCancel:k,onExit:l,onFailure:m,onSuccess:n,reauthContentType:o}),r.current=!1},p=[q,e,f,g,l,n,k,m,o],b[6]=e,b[7]=f,b[8]=g,b[9]=k,b[10]=l,b[11]=m,b[12]=n,b[13]=o,b[14]=q,b[15]=h,b[16]=p):(h=b[15],p=b[16]);i(h,p)}g["default"]=a}),98);
__d("Xfac_XFACAppealType",[],(function(a,b,c,d,e,f){a=Object.freeze({ADS_ABUSE:0,ACTA_SANCTION_PROPAGATION:1,SOAP_PI_UNPUBLISH:2,SPAM:3,USER_DATA_SCRAPING:4,IDES_APPEAL:5,LEGAL_VERIFICATION:6,CHECKPOINT_EPSILON:7,DEV_PLATFORM_ABUSE:8,FB_UFAC:9,IG_UFAC:10,FRL_UFAC:11,BUSINESS_VERIFICATION_STANDALONE_EMAIL:12,BUSINESS_VERIFICATION_CLASSIC:13,SIGNAL_GATHERING:14,IG_MEMORIALIZATION_APPEAL:15,MARKETPLACE_IDV_APPEAL:16,BUSINESS_VERIFICATION_PAYOUTS:17,AUTHENTICITY_REGULATION:18,AUTHENTICITY_REGULATION_SG:19,WA_BIZ_ACCOUNT_CREATION:20,BUSINESS_VERIFICATION_FOX_CBD:21,BUSINESS_VERIFICATION_FOX_CRYPTO:22,BUSINESS_VERIFICATION_FOX_DATING:23,BUSINESS_VERIFICATION_FOX_REHAB:24,BUSINESS_VERIFICATION_FOX_RMG:25,BUSINESS_VERIFICATION_FOX_RXDRUGS:26,BUSINESS_VERIFICATION_MANDATORY_SELLERS:27,THREADS_UFAC:28,BUSINESS_VERIFICATION_MV4B:29,BUSINESS_VERIFICATION_CHINA_AGENCY:30,FINANCIAL_INTEGRITY:31,BUSINESS_VERIFICATION_ADVERTISER_VETTING:32,BUSINESS_VERIFICATION_CLASSIC_GENERIC:33,AUTHENTICITY_COMPROMISE:34,AUTHENTICITY_REGULATION_AU_FINSERV:35,AUTHENTICITY_REGULATION_TW_ANTI_SCAMS:36,ORGANIC_SENSITIVE_ACTIONS:37,WA_U13:38,BUSINESS_VERIFICATION_PAID_ACTOR_ONBOARDING:39,BUSINESS_VERIFICATION_TAIWAN_FINANCIAL_SERVICES:40,MARKETPLACE_XFAC_SELFIE_APPEAL:41,MARKETPLACE_XFAC_IDV_APPEAL:42,AUTHENTICITY_REGULATION_CN:43,BUSINESS_VERIFICATION_WABA:44,BUSINESS_VERIFICATION_APP_REVIEW:45,BUSINESS_VERIFICATION_PAGE_RELATIONSHIP_TRANSPARENCY:46,BUSINESS_VERIFICATION_VR_DEVELOPER_ORGANIZATION:47,BUSINESS_VERIFICATION_BILLING_HUB:48,BUSINESS_VERIFICATION_LOW_TRUST_TIER:49,BUSINESS_VERIFICATION_NEWS_PUBLISHER:50,BUSINESS_VERIFICATION_ADS_BANHAMMERED:51,BUSINESS_VERIFICATION_MARKETING_PARTNER_PROGRAM:52,BUSINESS_VERIFICATION_AUDIENCE_NETWORK_APP:53,BUSINESS_VERIFICATION_DOMAIN_DISPUTE:54,BUSINESS_VERIFICATION_ASP_AGENCY:55,BUSINESS_VERIFICATION_SIGNAL_CONSUMPTION_WITHOUT_ONBOARD:56,BUSINESS_VERIFICATION_UNIVERSAL_PARTNER_PLATFORM:57,OCULUS_FINANCIAL_INTEGRITY:58,ADS_ACTOR_ABUSE_SCRIPTED_FOR_BUSINESS_WITH_BUSINESS_VERIFICATION:59,AUTHENTICITY_COMPROMISE_SIGNALS_BASED_VERIFICATION:60,AUTHENTICITY_REGULATION_VN_UNIVERSAL:61,AUTHENTICITY_REGULATION_TH_UNIVERSAL:62,AUTHENTICITY_REGULATION_JP_UNIVERSAL:63,AUTHENTICITY_REGULATION_KR_FINSERV:64,AUTHENTICITY_REGULATION_AU_UNIVERSAL:65,AUTHENTICITY_REGULATION_IN_FINSERV:66,AUTHENTICITY_REGULATION_SG_UNIVERSAL:67,BUSINESS_VERIFICATION_WABA_IDV:68,AUTHENTICITY_REGULATION_GENERIC_UNIVERSAL:69,ID_VERIFICATION_BILLING_HUB:70,FB_GENERIC_LIGHTWEIGHT:71,AUTHENTICITY_REGULATION_SG_FOR_PAGES:72,BUSINESS_VERIFICATION_CHINA_ADVERTISER:73,DATING_INTEGRITY_SMS:74,IG_KYX_PAY_IN:75,MESSENGER_LWE_SCAM:76,FINANCIAL_INTEGRITY_KYX:77,INDIVIDUAL_VERIFICATION_ACCOUNT_RECOVERY:78,FRLM_YOUTH:79,FB_FINANCIAL_INTEGRITY_SANCTIONS_SCREENING:80,MARKETPLACE_XFAC_FACE_REC_SELFIE_APPEAL:81,YOUTH_NON_BLOCKING:82,OC_UFAC:83,MARKETPLACE_PERKS_APPEAL:84,META_BUSINESS_ACCOUNT_CREATION:85,WA_USER_BAN_APPEAL:86,XFAC_DEMO:1e4});f["default"]=a}),66);
__d("memoizeByReference",[],(function(a,b,c,d,e,f){"use strict";var g=typeof WeakMap==="function";function a(a){var b=g?new WeakMap():new Map();return function(c){if(b.has(c)){var d=b.get(c);if(d!==void 0)return d[0]}d=a(c);b.set(c,[d]);return d}}f["default"]=a}),66);
__d("getGraphQLEnumSafe",["flipObject","memoizeByReference"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(b==null)return null;a=h(a);return!Object.prototype.hasOwnProperty.call(a,b)?null:a[b]}var h=c("memoizeByReference")(c("flipObject"));g["default"]=a}),98);
__d("useCDSEntryPointDialog",["XMDSDialogLoadingState.react","react","useBaseEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=function(a){return i.jsx(c("XMDSDialogLoadingState.react"),{onClose:a,withCloseButton:!0})};function a(a,b,d,e,f){d=d===void 0?"button":d;return c("useBaseEntryPointDialog")(a,b,d,e!=null?e:j,f)}g["default"]=a}),98);
__d("useIXTXfacUniversalTriggerCDSDialog",["cr:9557","useCDSEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";function a(a,d,e){return c("useCDSEntryPointDialog")(b("cr:9557"),a,void 0,void 0,{baseModalProps:d,carryOverRelayEnvironment_EXPERIMENTAL:e})}g["default"]=a}),98);
__d("SecuredActionTriggerWithEncryptedContext.react",["Xfac_XFACAppealType","getGraphQLEnumSafe","nullthrows","react","react-compiler-runtime","useCometEntryPointDialog","useIXTXfacUniversalTriggerCDSDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef;function k(a,b){var e=d("react-compiler-runtime").c(4),f;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=c("nullthrows")(c("getGraphQLEnumSafe")(c("Xfac_XFACAppealType"),37)),e[0]=f):f=e[0];e[1]!==b||e[2]!==a?(f={security_token:a,trigger_event_type:"XFAC_UNIVERSAL_ENTRY_ORGANIC_SENSITIVE_ACTIONS",xfac_appeal_type:f,xfac_config:b},e[1]=b,e[2]=a,e[3]=f):f=e[3];b=c("useIXTXfacUniversalTriggerCDSDialog")(f);a=b[0];return a}function a(a){var b=d("react-compiler-runtime").c(12),e=a.encryptedContext,f=a.entrypoint,g=a.flow,h=a.onExit,l=a.onSuccess,m=a.useXFAC;a=a.xfacConfig;var n=m===void 0?!1:m,o=k(e,a);b[0]!==e||b[1]!==g?(m={encryptedContext:e,flow:g},b[0]=e,b[1]=g,b[2]=m):m=b[2];a=c("useCometEntryPointDialog")(f,m);var p=a[0],q=j(!0);b[3]!==e||b[4]!==g||b[5]!==h||b[6]!==l||b[7]!==p||b[8]!==o||b[9]!==n?(f=function(){q.current&&(n?o({flowCallbacks:{onClose:h,onComplete:l}}):p({routeProps:{encryptedContext:e,flow:g,onExit:h,onSuccess:l}})),q.current=!1},m=[p,e,g,h,l,o,n],b[3]=e,b[4]=g,b[5]=h,b[6]=l,b[7]=p,b[8]=o,b[9]=n,b[10]=f,b[11]=m):(f=b[10],m=b[11]);i(f,m)}g["default"]=a}),98);
__d("TransportSelectingClientSingletonConditional",["cr:710"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:710")}),98);
__d("XMDSIcon.react",["CDSIcon.react"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("CDSIcon.react"),Object.keys(d("CDSIcon.react")).forEach(function(a){if(a==="default"||a==="__esModule")return;g[a]=d("CDSIcon.react")[a]})}),98);
__d("XMDSText.react",["CDSText.react"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("CDSText.react"),Object.keys(d("CDSText.react")).forEach(function(a){if(a==="default"||a==="__esModule")return;g[a]=d("CDSText.react")[a]})}),98);/*FB_PKG_DELIM*/
__d("$",["fb-error-lite"],(function(a,b,c,d,e,f,g){function a(a){return h(a,typeof a==="string"?document.getElementById(a):a)}function b(a){return h(a,typeof a==="string"?document.getElementById(a):a)}function h(a,b){if(!b){a=c("fb-error-lite").err('Tried to get element with id of "%s" but it is not present on the page',String(a));a.taalOpcodes=a.taalOpcodes||[];a.taalOpcodes=[c("fb-error-lite").TAALOpcode.PREVIOUS_FILE];throw a}return b}a.fromIDOrElement=b;g["default"]=a}),98);
__d("XAdsCMAccountSettingsPageControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/ads/manager/account/settings/",Object.freeze({tab:"information",highlight_tax_id:!1}),new Set(["highlight_tax_id"]));b=a;g["default"]=b}),98);
__d("XAdsCMControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/ads/manager/{?page}/{?tab}/",Object.freeze({help_tray:!1,no_redirect:!1,pixel_conversion_dialog:!1,show_edit_modal:!1,is_split_test:!1,m2w:!1,ads_manager_read_regions:!1}),void 0);b=a;g["default"]=b}),98);
__d("XAdsPEControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/adsmanager/",Object.freeze({_fb_noscript:!1,breakdown_regrouping:!1,is_reload_from_account_change:!1,is_split_test:!1,insights_section:"performance",insights_subsection:"results",root_level:"campaign",launch_quick_creation:!1,show_view_history:!1,show_inbox_re_tos:!1,from_ads_ai:!1,ads_manager_read_regions:!1,ads_manager_write_regions:!1,show_review:!1,duplicate_campaign:!1,duplicate_ad:!1,show_shops_messaging_opt_out_modal:!1,is_mfr_model_shown_by_default:!1,show_inline_verification:!1,show_mm_onboarding_modal:!1,show_select_post_modal:!1,ad_page_id:0,adset_page_id:0,campaign_page_id:0,creative_page_id:0,auto_transform_dialog:!1,external_creation:!1,external_creation_from_url:!1,focus_mode:!1,gtao:!0,mdsa_eligibility:!1,recommendation_read_only:!1,treenav:!0,show_dfca_create_audience_modal:!1}),void 0);b=a;g["default"]=b}),98);
__d("AdsManagerConstURIUtils",["AdsManagerReadRegions","XAdsCMAccountSettingsPageControllerRouteBuilder","XAdsCMControllerRouteBuilder","XAdsPEControllerRouteBuilder","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d){d=c("XAdsPEControllerRouteBuilder").buildUri(babelHelpers["extends"]({},d,{nav_entry_point:b!=null?b:void 0,nav_source:a}));return j(d)}function b(a,b,d){d=c("XAdsCMControllerRouteBuilder").buildUri(babelHelpers["extends"]({},d,{nav_entry_point:b!=null?b:void 0,nav_source:a}));return j(d)}function d(a,b,d){d=c("XAdsCMAccountSettingsPageControllerRouteBuilder").buildUri(babelHelpers["extends"]({},d,{nav_entry_point:b!=null?b:void 0,nav_source:a}));return j(d)}function h(a){return window.location.host.includes("adsmanager")&&!c("AdsManagerReadRegions").excluded_endpoints.some(function(b){return a.includes(b)})&&c("gkx")("1221")?!0:!1}function i(a,b){b===void 0&&(b=!0);return window.location.host.includes("adsmanager")&&c("gkx")("13382")&&(c("AdsManagerReadRegions").excluded_endpoints.some(function(b){return a.includes(b)})||!b)?!0:!1}function j(a){h(a.toString())?a.addQueryParam("ads_manager_read_regions","true"):i(a.toString())?a.addQueryParam("ads_manager_write_regions","true"):(a.getQueryParam("ads_manager_read_regions")!==null||a.getQueryParam("ads_manager_write_regions")!==null)&&(a.removeQueryParam("ads_manager_read_regions"),a.removeQueryParam("ads_manager_write_regions"));return a}g.getAdsManagerURI=a;g.getXAdsCMControllerURI=b;g.getXAdsCMAccountSettingsPageURI=d;g.shouldRouteToAMReadRegions=h;g.shouldRouteToAMWriteRegions=i;g.getAMReadOrWriteRegionsURI=j}),98);
__d("ArbiterMixin",["Arbiter","guid"],(function(a,b,c,d,e,f,g){var h="arbiter$"+c("guid")(),i=Object.prototype.hasOwnProperty;a={_getArbiterInstance:function(){return i.call(this,h)?this[h]:this[h]=new(c("Arbiter"))()},inform:function(a,b,c){return this._getArbiterInstance().inform(a,b,c)},subscribe:function(a,b,c){return this._getArbiterInstance().subscribe(a,b,c)},subscribeOnce:function(a,b,c){return this._getArbiterInstance().subscribeOnce(a,b,c)},unsubscribe:function(a){this._getArbiterInstance().unsubscribe(a)},unsubscribeCurrentSubscription:function(){this._getArbiterInstance().unsubscribeCurrentSubscription()},releaseCurrentPersistentEvent:function(){this._getArbiterInstance().releaseCurrentPersistentEvent()},registerCallback:function(a,b){return this._getArbiterInstance().registerCallback(a,b)},query:function(a){return this._getArbiterInstance().query(a)}};b=a;g["default"]=b}),98);
__d("CSS",["$","CSSCore"],(function(a,b,c,d,e,f,g){var h=typeof window!="undefined"?window.CSS:null,i="hidden_elem";h=h&&h.supports.bind(h);function a(a,b){c("$").fromIDOrElement(a).className=b||"";return a}function j(a,b){return a instanceof Document||a instanceof Text?!1:d("CSSCore").hasClass(c("$").fromIDOrElement(a),b)}function b(a,b){return a instanceof Document||a instanceof Text?!1:d("CSSCore").matchesSelector(c("$").fromIDOrElement(a),b)}function k(a,b){return d("CSSCore").addClass(c("$").fromIDOrElement(a),b)}function l(a,b){return d("CSSCore").removeClass(c("$").fromIDOrElement(a),b)}function m(a,b,e){return d("CSSCore").conditionClass(c("$").fromIDOrElement(a),b,!!e)}function n(a,b){return m(a,b,!j(a,b))}function e(a){return!j(a,i)}function f(a){return k(a,i)}function o(a){return l(a,i)}function p(a){return n(a,i)}function q(a,b){return m(a,i,!b)}g.supports=h;g.setClass=a;g.hasClass=j;g.matchesSelector=b;g.addClass=k;g.removeClass=l;g.conditionClass=m;g.toggleClass=n;g.shown=e;g.hide=f;g.show=o;g.toggle=p;g.conditionShow=q}),98);
__d("isTextNode",["isNode"],(function(a,b,c,d,e,f,g){function a(a){return c("isNode")(a)&&a.nodeType==3}g["default"]=a}),98);
__d("containsNode",["isTextNode"],(function(a,b,c,d,e,f,g){function h(a,b){if(!a||!b)return!1;else if(a===b)return!0;else if(c("isTextNode")(a))return!1;else if(c("isTextNode")(b))return h(a,b.parentNode);else if("contains"in a)return a.contains(b);else if(a.compareDocumentPosition)return!!(a.compareDocumentPosition(b)&16);else return!1}g["default"]=h}),98);
__d("createArrayFromMixed",["invariant"],(function(a,b,c,d,e,f,g,h){function i(a){var b=a.length;!Array.isArray(a)&&(typeof a==="object"||typeof a==="function")||h(0,3914);typeof b==="number"||h(0,3915);b===0||b-1 in a||h(0,3916);typeof a.callee!=="function"||h(0,3917);if(a.hasOwnProperty)try{return Array.prototype.slice.call(a)}catch(a){}var c=Array(b);for(var d=0;d<b;d++)c[d]=a[d];return c}function j(a){return!!a&&(typeof a==="object"||typeof a==="function")&&"length"in a&&!("setInterval"in a)&&typeof a.nodeType!=="number"&&(Array.isArray(a)||"callee"in a||"item"in a)}function a(a){if(!j(a))return[a];else if(Array.isArray(a))return a.slice();else return i(a)}g["default"]=a}),98);
__d("createObjectFrom",[],(function(a,b,c,d,e,f){function g(a,b){if(b===void 0)return g(a,!0);var c={};if(Array.isArray(b))for(var d=a.length-1;d>=0;d--)c[a[d]]=b[d];else for(d=a.length-1;d>=0;d--)c[a[d]]=b;return c}f["default"]=g}),66);
__d("isElementNode",["isNode"],(function(a,b,c,d,e,f){function a(a){return b("isNode")(a)&&a.nodeType==1}e.exports=a}),null);
__d("DOMQuery",["CSS","FBLogger","containsNode","createArrayFromMixed","createObjectFrom","ge","ifRequired","isElementNode","isNode"],(function(a,b,c,d,e,f,g){var h=/^\.-?[_a-zA-Z]+[\w-]*$/;function i(a,b){return a.hasAttribute?a.hasAttribute(b):a.getAttribute(b)!==null}function a(a,b){a=j(a,b);return a[0]}function b(a,b,c){b=j(a,b);a=j(a,c);b.length===1&&a.length===1&&b[0]===a[0]?c=b:c=b.concat(a);return c[0]}function j(a,b){if(!a||!a.getElementsByTagName)return[];b=b.split(" ");var e=[a];for(var f=0;f<b.length;f++){if(e.length===0)break;if(b[f]==="")continue;var g=b[f],j=b[f],k=[],l=!1;if(g.charAt(0)=="^")if(f===0)l=!0,g=g.slice(1);else return[];g=g.replace(/\[(?:[^=\]]*=(?:\"[^\"]*\"|\'[^\']*\'))?|[.#]/g," $&");g=g.split(" ");var m=g[0]||"*",n=m=="*",o=g[1]&&g[1].charAt(0)=="#";if(o){o=c("ge")(g[1].slice(1),a,m);if(o&&(n||o.tagName.toLowerCase()==m))for(var p=0;p<e.length;p++)if(l&&c("containsNode")(o,e[p])){k=[o];break}else if(document==e[p]||c("containsNode")(e[p],o)&&e[p]!==o){k=[o];break}}else{o=[];p=e.length;var q,r=!l&&j.indexOf("[")<0&&document.querySelectorAll;for(var s=0;s<p;s++){if(l){q=[];var t=e[s].parentNode;while(c("isElementNode")(t))(n||t.tagName.toLowerCase()==m)&&q.push(t),t=t.parentNode}else r?h.test(j)?q=e[s].getElementsByClassName(j.substring(1)):q=e[s].querySelectorAll(j):q=e[s].getElementsByTagName(m);t=q.length;for(var u=0;u<t;u++)o.push(q[u])}if(!r)for(q=1;q<g.length;q++){t=g[q];u=t.charAt(0)==".";n=t.substring(1);for(s=0;s<o.length;s++){p=o[s];if(!p||p.nodeType!==1)continue;if(u){d("CSS").hasClass(p,n)||delete o[s];continue}else{j=t.slice(1,t.length-1);m=j.indexOf("=");if(m<0){if(!i(p,j)){delete o[s];continue}}else{r=j.substr(0,m);j=j.substr(m+1);j=j.slice(1,j.length-1);if(p.getAttribute(r)!=j){delete o[s];continue}}}}}for(s=0;s<o.length;s++)if(o[s]){k.push(o[s]);if(l)break}}e=k}return e}function e(){var a=window.getSelection;if(a)return a()+"";else{a=document.selection;if(a)return a.createRange().text}return null}function f(a,b){(typeof a==="string"||typeof b==="string")&&c("FBLogger")("dom_query").info("Support for node IDs is deprecated. Use containsNode(ge(<id1>), ge(<id2>)) instead");return c("containsNode")(c("ge")(a),c("ge")(b))}function k(){var a=c("ifRequired")("Quickling",function(a){return a.isActive()?c("ge")("content"):null});return a||document.body}function l(a,b){b=c("createArrayFromMixed")(b).join("|").toUpperCase().split("|");b=c("createObjectFrom")(b);return c("isNode")(a)&&a.nodeName in b}function m(a){return l(a,["input","textarea"])||a.contentEditable==="true"}g.find=a;g.findPushSafe=b;g.scry=j;g.getSelection=e;g.contains=f;g.getRootElement=k;g.isNodeOfType=l;g.isInputNode=m}),98);
__d("DOMEvent",["invariant"],(function(a,b,c,d,e,f,g,h){a=function(){function a(a){this.event=a||window.event,typeof this.event.srcElement!=="unknown"||h(0,5798),this.target=this.event.target||this.event.srcElement}var b=a.prototype;b.preventDefault=function(){var a=this.event;a.preventDefault?(a.preventDefault(),"defaultPrevented"in a||(a.defaultPrevented=!0)):a.returnValue=!1;return this};b.isDefaultPrevented=function(){var a=this.event;return"defaultPrevented"in a?a.defaultPrevented:a.returnValue===!1};b.stopPropagation=function(){var a=this.event;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0;return this};b.kill=function(){this.stopPropagation().preventDefault();return this};a.killThenCall=function(b){return function(c){new a(c).kill();return b()}};return a}();g["default"]=a}),98);
__d("dedupString",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b;return Object.keys((b={},b[a]=0,b))[0]}f["default"]=a}),66);
__d("wrapFunction",[],(function(a,b,c,d,e,f){var g={};function a(a,b,c){var d=b in g?g[b](a,c):a;return function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return d.apply(this,b)}}a.setWrapper=function(a,b){g[b]=a};f["default"]=a}),66);
__d("DOMEventListener",["invariant","dedupString","emptyFunction","passiveEventListenerUtil","wrapFunction"],(function(a,b,c,d,e,f,g){var h=b("passiveEventListenerUtil").isPassiveEventListenerSupported,i,j;window.addEventListener?(i=function(a,c,d,e){e===void 0&&(e=!1),d.wrapper=b("wrapFunction")(d,"entry",b("dedupString")("DOMEventListener.add "+c)),a.addEventListener(c,d.wrapper,h?e:!1)},j=function(a,b,c,d){d===void 0&&(d=!1),a.removeEventListener(b,c.wrapper,h?d:!1)}):window.attachEvent?(i=function(a,c,d,e){e===void 0,d.wrapper=b("wrapFunction")(d,"entry","DOMEventListener.add "+c),a.attachEvent||g(0,2798),a.attachEvent("on"+c,d.wrapper)},j=function(a,b,c,d){d===void 0,a.detachEvent||g(0,2799),a.detachEvent("on"+b,c.wrapper)}):j=i=b("emptyFunction");a={add:function(a,b,c,d){d===void 0&&(d=!1);i(a,b,c,d);return{remove:function(){j(a,b,c,d)}}},remove:j};e.exports=a}),null);
__d("DataStore",["DataStoreConfig","gkx","isEmpty"],(function(a,b,c,d,e,f){"use strict";var g,h=b("DataStoreConfig").expandoKey,i=b("DataStoreConfig").useExpando,j=b("gkx")("25572")&&window.WeakMap?new window.WeakMap():null,k={},l=1;function m(a){if(typeof a==="string")return"str_"+a;else{var b;return"elem_"+((b=a.__FB_TOKEN)!=null?b:a.__FB_TOKEN=[l++])[0]}}function n(a){if(j!=null&&typeof a==="object"){j.get(a)===void 0&&j.set(a,{});return j.get(a)}else if(i&&typeof a==="object")return a[h]||(a[h]={});a=m(a);return k[a]||(k[a]={})}var o={set:function(a,b,c){if(!a)throw new TypeError("DataStore.set: namespace is required, got "+typeof a);var d=n(a);d[b]=c;return a},get:function(a,b,c){if(!a)throw new TypeError("DataStore.get: namespace is required, got "+typeof a);var d=n(a),e=d[b];if(e===void 0&&a.getAttribute!=null)if(a.hasAttribute!=null&&!a.hasAttribute("data-"+b))e=void 0;else{a=a.getAttribute("data-"+b);e=a===null?void 0:a}c!==void 0&&e===void 0&&(e=d[b]=c);return e},remove:function(a,c){if(!a)throw new TypeError("DataStore.remove: namespace is required, got "+typeof a);var d=n(a),e=d[c];delete d[c];(g||(g=b("isEmpty")))(d)&&o.purge(a);return e},purge:function(a){if(j!=null&&typeof a==="object")return j["delete"](a);else i&&typeof a==="object"?delete a[h]:delete k[m(a)]},_storage:k};e.exports=o}),null);
__d("Scroll",[],(function(a,b,c,d,e,f){function g(a,b){return!!b&&(a===b.documentElement||a===b.body)}function a(a){var b,c;if(a==null)return 0;var d=a.ownerDocument;return g(a,d)?(d==null||(b=d.body)==null?void 0:b.scrollTop)||(d==null||(c=d.documentElement)==null?void 0:c.scrollTop)||0:a.scrollTop||0}function b(a,b){if(a==null)return;var c=a.ownerDocument;g(a,c)?(c!=null&&c.body&&(c.body.scrollTop=b||0),c!=null&&c.documentElement&&(c.documentElement.scrollTop=b||0)):a.scrollTop=b||0}function c(a){var b,c,d=a.ownerDocument;return g(a,d)?(d==null||(b=d.body)==null?void 0:b.scrollLeft)||(d==null||(c=d.documentElement)==null?void 0:c.scrollLeft)||0:a.scrollLeft||0}function d(a,b){var c=a.ownerDocument;g(a,c)?(c!=null&&c.body&&(c.body.scrollLeft=b||0),c!=null&&c.documentElement&&(c.documentElement.scrollLeft=b||0)):a.scrollLeft=b||0}f.getTop=a;f.setTop=b;f.getLeft=c;f.setLeft=d}),66);
__d("FlowMigrationUtilsForLegacyFiles",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";var h="flow_typing_for_legacy_code";function a(a){c("FBLogger")(h).blameToPreviousFile().event(h+".bad_call").mustfix(a);return new Error("["+h+"] "+a)}g.invariantViolation=a}),98);
__d("getDocumentScrollElement",["FlowMigrationUtilsForLegacyFiles"],(function(a,b,c,d,e,f,g){"use strict";var h=typeof navigator!=="undefined"&&navigator.userAgent.indexOf("AppleWebKit")>-1;function a(a){a=a||document;if(a.scrollingElement)return a.scrollingElement;a=!h&&a.compatMode==="CSS1Compat"?a.documentElement:a.body;a||d("FlowMigrationUtilsForLegacyFiles").invariantViolation("null result in getDocumentScrollElement");return a}g["default"]=a}),98);
__d("getObjectValues",[],(function(a,b,c,d,e,f){function a(a){var b=[];for(var c in a)b.push(a[c]);return b}f["default"]=a}),66);
__d("Event",["$","Arbiter","DOMEvent","DOMEventListener","DOMQuery","DataStore","ErrorGuard","ExecutionEnvironment","FBLogger","Parent","Scroll","TimeSlice","UserAgent","dedupString","fb-error","getDocumentScrollElement","getObjectValues"],(function(a,b,c,d,e,f){var g,h,i=b("fb-error").TAAL,j="Event.listeners";Event.prototype||(Event.prototype={});function k(a){(a.type==="click"||a.type==="mouseover"||a.type==="keydown")&&b("Arbiter").inform("Event/stop",{event:a})}var l=function(){"use strict";function a(a,b,c){this.cancelBubble=!1,this.target=a,this.type=b,this.data=c}var c=a.prototype;c.getData=function(){this.data=this.data||{};return this.data};c.stop=function(){return Event.stop(this)};c.prevent=function(){return Event.prevent(this)};c.isDefaultPrevented=function(){return Event.isDefaultPrevented(this)};c.kill=function(){return Event.kill(this)};c.getTarget=function(){return new(b("DOMEvent"))(this).target||null};return a}();function m(a){if(a instanceof l)return a;a||(!window.addEventListener&&document.createEventObject?a=window.event?document.createEventObject(window.event):{}:a={});if(!a._inherits_from_prototype)for(var b in Event.prototype)try{a[b]=Event.prototype[b]}catch(a){}return a}Object.assign(Event.prototype,{_inherits_from_prototype:!0,getRelatedTarget:function(){var a=this.relatedTarget||(this.fromElement===this.srcElement?this.toElement:this.fromElement);return a&&a.nodeType?a:null},getModifiers:function(){var a={control:!!this.ctrlKey,shift:!!this.shiftKey,alt:!!this.altKey,meta:!!this.metaKey};a.access=b("UserAgent").isPlatform("Mac OS X")?a.control:a.alt;a.any=a.control||a.shift||a.alt||a.meta;return a},isRightClick:function(){return this.which?this.which===3:this.button&&this.button===2},isMiddleClick:function(){return this.which?this.which===2:this.button&&this.button===4},isDefaultRequested:function(){return this.getModifiers().any||this.isMiddleClick()||this.isRightClick()}},l.prototype);c={listen:function(a,c,d,e,f){typeof d==="function"&&(d=b("TimeSlice").guard(d,b("dedupString")("Event.js "+c+" handler")));!f||typeof f==="boolean"?f={passive:!1}:f={passive:f.passive||!1};if(!(g||(g=b("ExecutionEnvironment"))).canUseDOM)return new u(a,d,null,c,e,null,f);typeof a==="string"&&(a=b("$")(a));typeof e==="undefined"&&(e=Event.Priority.NORMAL);if(typeof c==="object"){var h={};for(var k in c)h[k]=Event.listen(a,k,c[k],e,f);return h}if(c.match(/^on/i))throw new TypeError("Bad event name `"+c+"': use `click', not `onclick'.");if(!a){k=i.blameToPreviousFrame(new Error("Cannot listen to an undefined element."));b("FBLogger")("event").catching(k).mustfix("Tried to listen to element of type %s",c);throw k}if(a.nodeName=="LABEL"&&c=="click"){h=a.getElementsByTagName("input");a=h.length==1?h[0]:a}else if(a===window&&c==="scroll"){k=b("getDocumentScrollElement")();k!==document.documentElement&&k!==document.body&&(a=k)}h=b("DataStore").get(a,j,{});k=o[c];k&&(c=k.base,k.wrap&&(d=k.wrap(d)));q(a,h,c,f);k=h[c];e in k||(k[e]=[]);var l=k[e].length;d=new u(a,d,h,c,e,l,f);k[e][l]=d;k.numHandlers++;f.passive||(k.numNonPassiveHandlers++,p(a,h[c],c));return d},stop:function(a){var c=new(b("DOMEvent"))(a).stopPropagation();k(c.event);return a},prevent:function(a){new(b("DOMEvent"))(a).preventDefault();return a},isDefaultPrevented:function(a){return new(b("DOMEvent"))(a).isDefaultPrevented(a)},kill:function(a){a=new(b("DOMEvent"))(a).kill();k(a.event);return!1},getKeyCode:function(a){a=new(b("DOMEvent"))(a).event;if(!a)return!1;switch(a.keyCode){case 63232:return 38;case 63233:return 40;case 63234:return 37;case 63235:return 39;case 63272:case 63273:case 63275:return null;case 63276:return 33;case 63277:return 34}if(a.shiftKey)switch(a.keyCode){case 33:case 34:case 37:case 38:case 39:case 40:return null}return a.keyCode},getPriorities:function(){if(!n){var a=b("getObjectValues")(Event.Priority);a.sort(function(a,b){return a-b});n=a}return n},fire:function(a,b,c){c=new l(a,b,c);var d;do{var e=Event.__getHandler(a,b);e&&(d=e(c));a=a.parentNode}while(a&&d!==!1&&!c.cancelBubble);return d!==!1},__fire:function(a,b,c){a=Event.__getHandler(a,b);if(a)return a(m(c))},__getHandler:function(a,c){var d=b("DataStore").get(a,j);return d&&d[c]?d[c].domHandler:a["on"+c]},getPosition:function(a){a=new(b("DOMEvent"))(a).event;var c=b("getDocumentScrollElement")(),d=a.clientX+b("Scroll").getLeft(c);a=a.clientY+b("Scroll").getTop(c);return{x:d,y:a}}};Object.assign(Event,c);var n=null;d=function(a){return function(c){if(!b("DOMQuery").contains(this,c.getRelatedTarget()))return a.call(this,c)}};var o;!window.navigator.msPointerEnabled?o={mouseenter:{base:"mouseover",wrap:d},mouseleave:{base:"mouseout",wrap:d}}:o={mousedown:{base:"MSPointerDown"},mousemove:{base:"MSPointerMove"},mouseup:{base:"MSPointerUp"},mouseover:{base:"MSPointerOver"},mouseout:{base:"MSPointerOut"},mouseenter:{base:"MSPointerOver",wrap:d},mouseleave:{base:"MSPointerOut",wrap:d}};if(b("UserAgent").isBrowser("Firefox < 52")){f=function(a,b){b=m(b);var c=b.getTarget();while(c)Event.__fire(c,a,b),c=c.parentNode};document.documentElement.addEventListener("focus",f.bind(null,"focusin"),!0);document.documentElement.addEventListener("blur",f.bind(null,"focusout"),!0)}var p=function(a,c,d){var e=c.numNonPassiveHandlers==0;e!=c.options.passive&&(c.domHandlerRemover.remove(),c.options.passive=e,c.domHandlerRemover=b("DOMEventListener").add(a,d,c.domHandler,{passive:e}))},q=function(a,c,d,e){if(d in c)return;var f=b("TimeSlice").guard(t.bind(a,d),b("dedupString")("Event listenHandler "+d));c[d]={numHandlers:0,numNonPassiveHandlers:0,domHandlerRemover:b("DOMEventListener").add(a,d,f,e),domHandler:f,options:e};c="on"+d;if(a[c]){f=a===document.documentElement?Event.Priority._BUBBLE:Event.Priority.TRADITIONAL;var g=a[c];a[c]=null;Event.listen(a,d,g,f,e)}};function r(a){return!a.href.endsWith("#")?!1:a.href===document.location.href||a.href===document.location.href+"#"}function s(a,b){return a.nodeName==="INPUT"&&a.type===b}var t=function(a,c){c=m(c);if(!b("DataStore").get(this,j))throw new Error("Bad listenHandler context.");var d=b("DataStore").get(this,j)[a];if(!d)throw new Error("No registered handlers for `"+a+"'.");if(a=="click"||a=="contextmenu"||a=="mousedown"&&c.which==2){a=c.getTarget();var e=b("Parent").byTag(a,"a");e instanceof HTMLAnchorElement&&e.href&&r(e)&&!s(a,"file")&&!s(a,"submit")&&c.prevent()}e=Event.getPriorities();for(a=0;a<e.length;a++){var f=e[a];if(f in d){f=d[f];for(var g=0;g<f.length;g++){if(!f[g])continue;var h=f[g].fire(this,c);if(h===!1)return c.kill();else c.cancelBubble&&c.stop()}}}return c.returnValue};Event.Priority={URGENT:-20,TRADITIONAL:-10,NORMAL:0,_BUBBLE:1e3};var u=function(){"use strict";function a(a,b,c,d,e,f,g){this.$1=a,this.$2=b,this.$3=c,this.$7=d,this.$6=e,this.$4=f,this.$5=g}var c=a.prototype;c.isRemoved=function(){return!this.$3};c.remove=function(){if((g||(g=b("ExecutionEnvironment"))).canUseDOM){if(this.isRemoved()){b("FBLogger")("Event").warn("Event handler has already been removed");return}var a=this.$3[this.$7];a.numHandlers<=1?(a.domHandlerRemover.remove(),delete this.$3[this.$7]):(delete a[this.$6][this.$4],a.numHandlers--,this.$5.passive||(a.numNonPassiveHandlers--,p(this.$1,this.$3[this.$7],this.$7)));this.$3=null}};c.fire=function(a,c){return(g||(g=b("ExecutionEnvironment"))).canUseDOM?(h||(h=b("ErrorGuard"))).applyWithGuard(this.$2,a,[c],{name:"eventhandler:"+c.type+":"+(typeof a.name=="string"?a.name:a.id)}):!0};return a}();a.$E=Event.$E=m;e.exports=Event}),null);
__d("TrustedTypesLinkTagHTMLPolicy",["TrustedTypes","err"],(function(a,b,c,d,e,f,g){"use strict";a={createHTML:function(a){if(a==="<link />")return a;throw c("err")("Violating Trusted Type policies. Only works for '<link />' strings.")}};b=c("TrustedTypes").createPolicy("link-tag-html",a);d=b;g["default"]=d}),98);
__d("getMarkupWrap",["invariant","ExecutionEnvironment","TrustedTypesLinkTagHTMLPolicy"],(function(a,b,c,d,e,f,g,h){var i,j=(i||c("ExecutionEnvironment")).canUseDOM?document.createElement("div"):null,k={};b=[1,'<select multiple="true">',"</select>"];d=[1,"<table>","</table>"];e=[3,"<table><tbody><tr>","</tr></tbody></table>"];var l=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],m={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:b,option:b,caption:d,colgroup:d,tbody:d,tfoot:d,thead:d,td:e,th:e};f=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];f.forEach(function(a){m[a]=l,k[a]=!0});function a(a){a=a;!j&&h(0,144);Object.prototype.hasOwnProperty.call(m,a)||(a="*");Object.prototype.hasOwnProperty.call(k,a)||(a==="*"?j.innerHTML=c("TrustedTypesLinkTagHTMLPolicy").createHTML("<link />"):j.innerHTML="<"+a+"></"+a+">",k[a]=!j.firstChild);return k[a]?m[a]:null}g["default"]=a}),98);
__d("createNodesFromMarkup",["invariant","ExecutionEnvironment","TrustedTypesNoOpPolicy_DO_NOT_USE","getMarkupWrap"],(function(a,b,c,d,e,f,g,h){var i,j=(i||c("ExecutionEnvironment")).canUseDOM?document.createElement("div"):null,k=/^\s*<(\w+)/;function l(a){a=a.match(k);return a&&a[1].toLowerCase()}function a(a,b){var d=j;!j&&h(0,5001);var e=l(a);e=e&&c("getMarkupWrap")(e);if(e){d.innerHTML=e[1]+a+e[2];e=e[0];while(e--)d=d.lastChild}else d.innerHTML=c("TrustedTypesNoOpPolicy_DO_NOT_USE").createHTML(a);e=d.getElementsByTagName("script");e.length&&(b||h(0,5002),Array.from(e).forEach(b));a=Array.from(d.childNodes);while(d.lastChild)d.removeChild(d.lastChild);return a}g["default"]=a}),98);
__d("evalGlobal",[],(function(a,b,c,d,e,f){function a(a){if(typeof a!=="string")throw new TypeError("JS sent to evalGlobal is not a string. Only strings are permitted.");if(!a)return;var b=document.createElement("script");try{b.appendChild(document.createTextNode(a))}catch(c){b.text=a}a=document.getElementsByTagName("head")[0]||document.documentElement;a.appendChild(b);a.removeChild(b)}f["default"]=a}),66);
__d("HTML",["invariant","Bootloader","FBLogger","createNodesFromMarkup","emptyFunction","evalGlobal"],(function(a,b,c,d,e,f,g){var h=/(<(\w+)[^>]*?)\/>/g,i={abbr:!0,area:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0};a=function(){"use strict";function a(c){c&&typeof c.__html==="string"&&(c=c.__html);if(!(this instanceof a))return c instanceof a?c:new a(c);if(c){var d=typeof c;d==="string"||g(0,277,d)}this.$1=c||"";this.$2=!1;this.$3=null;this.$4=b("emptyFunction");this.$5=null;this.$6=!1}var c=a.prototype;c.toString=function(){return this.$1};c.getContent=function(){return this.$1};c.getNodes=function(){this.$7();return this.$3};c.getRootNode=function(){this.$5&&g(0,278);var a=this.getNodes();if(a.length===1)this.$5=a[0];else{var b=document.createDocumentFragment();for(var c=0;c<a.length;c++)b.appendChild(a[c]);this.$5=b}return this.$5};c.getAction=function(){var a=this;this.$7();var b=function(){a.$4()};return this.$2?function(){setTimeout(b,0)}:b};c.$7=function(){if(this.$3!==null)return;if(!this.$1){this.$3=[];return}var a=this.$1.replace(h,function(a,b,c){return i[c.toLowerCase()]?a:b+"></"+c+">"}),c=null;a=b("createNodesFromMarkup")(a,function(a){b("FBLogger")("staticresources").warn("HTML: encountered script node while parsing, hasSrc=%s, type=%s",Boolean(a.src),a.type==null||a.type===""?"<unknown>":a.type),a.type!=="application/ld+json"&&a.type!=="application/json"&&(c=c||[],c.push(a.src?b("Bootloader").requestJSResource_UNSAFE_NEEDS_REVIEW_BY_SECURITY_AND_XFN.bind(b("Bootloader"),a.src):b("evalGlobal").bind(null,a.innerHTML)),a.parentNode.removeChild(a))});c&&(this.$6=!0,this.$4=function(){for(var a=0;a<c.length;a++)c[a]()});this.$3=a};c.setDeferred=function(a){this.$2=!!a;return this};c.hasInlineJs=function(){return this.$6};a.isHTML=function(b){return!!b&&(b instanceof a||b.__html!==void 0)};a.replaceJSONWrapper=function(b){return b&&b.__html!==void 0?new a(b.__html):b};return a}();e.exports=a}),null);
__d("TrustedTypesIEFixDOMPolicy",["TrustedTypes"],(function(a,b,c,d,e,f,g){"use strict";a={createHTML:function(a){return a}};b=c("TrustedTypes").createPolicy("dom-ie-fix",a);d=b;g["default"]=d}),98);
__d("UserAgent_DEPRECATED",[],(function(a,b,c,d,e,f){var g=!1,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;function x(){if(g)return;g=!0;var a=navigator.userAgent,b=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(a),c=/(Mac OS X)|(Windows)|(Linux)/.exec(a);s=/\b(iPhone|iP[ao]d)/.exec(a);t=/\b(iP[ao]d)/.exec(a);q=/Android/i.exec(a);u=/FBAN\/\w+;/i.exec(a);v=/FBAN\/mLite;/i.exec(a);w=/Mobile/i.exec(a);r=!!/Win64/.exec(a);if(b){h=b[1]?parseFloat(b[1]):b[5]?parseFloat(b[5]):NaN;h&&document&&document.documentMode&&(h=document.documentMode);var d=/(?:Trident\/(\d+.\d+))/.exec(a);m=d?parseFloat(d[1])+4:h;i=b[2]?parseFloat(b[2]):NaN;j=b[3]?parseFloat(b[3]):NaN;k=b[4]?parseFloat(b[4]):NaN;k?(b=/(?:Chrome\/(\d+\.\d+))/.exec(a),l=b&&b[1]?parseFloat(b[1]):NaN):l=NaN}else h=i=j=l=k=NaN;if(c){if(c[1]){d=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(a);n=d?parseFloat(d[1].replace("_",".")):!0}else n=!1;o=!!c[2];p=!!c[3]}else n=o=p=!1}function y(){return x()||h}function a(){return x()||m>h}function b(){return y()&&r}function c(){return x()||i}function d(){return x()||j}function z(){return x()||k}function e(){return z()}function A(){return x()||l}function B(){return x()||o}function C(){return x()||n}function D(){return x()||p}function E(){return x()||s}function F(){return x()||s||t||q||w}function G(){return x()||v!=null?null:u}function H(){return x()||q}function I(){return x()||t}f.ie=y;f.ieCompatibilityMode=a;f.ie64=b;f.firefox=c;f.opera=d;f.webkit=z;f.safari=e;f.chrome=A;f.windows=B;f.osx=C;f.linux=D;f.iphone=E;f.mobile=F;f.nativeApp=G;f.android=H;f.ipad=I}),66);
__d("isScalar",[],(function(a,b,c,d,e,f){function a(a){return/string|number|boolean/.test(typeof a)}f["default"]=a}),66);
__d("DOM",["$","DOMQuery","Event","FBLogger","FbtResultBase","HTML","TrustedTypesIEFixDOMPolicy","UserAgent_DEPRECATED","createArrayFromMixed","fb-error","isNode","isScalar","isTextNode"],(function(a,b,c,d,e,f,g){a=function(a,b,c){a=document.createElement(a);b&&h.setAttributes(a,b);c!=null&&h.setContent(a,c);return a};var h={find:(b=d("DOMQuery")).find,findPushSafe:b.findPushSafe,scry:b.scry,getSelection:b.getSelection,contains:b.contains,getRootElement:b.getRootElement,isNodeOfType:b.isNodeOfType,isInputNode:b.isInputNode,create:a,setAttributes:function(a,b){b.type&&(a.type=b.type);for(var d in b){var e=b[d],f=/^on/i.test(d);f&&typeof e!=="function"&&c("FBLogger")("dom").warn("Handlers passed to DOM.setAttributes must be functions. Handler passed for %s was %s",d,typeof e);if(d=="type")continue;else d=="style"?typeof e==="string"?a.style.cssText=e:Object.assign(a.style,e):f?c("Event").listen(a,d.substr(2),e):d in a?a[d]=e:a.setAttribute&&a.setAttribute(d,e)}},prependContent:function(a,b){if(!a)throw c("fb-error").TAAL.blameToPreviousFile(new Error("reference element is not a node"));return j(b,a,function(b){a.firstChild?a.insertBefore(b,a.firstChild):a.appendChild(b)})},insertAfter:function(a,b){if(!a||!a.parentNode)throw c("fb-error").TAAL.blameToPreviousFile(new Error("reference element does not have a parent"));var d=a.parentNode;return j(b,d,function(b){a.nextSibling?d.insertBefore(b,a.nextSibling):d.appendChild(b)})},insertBefore:function(a,b){if(!a||!a.parentNode)throw c("fb-error").TAAL.blameToPreviousFile(new Error("reference element does not have a parent"));var d=a.parentNode;return j(b,d,function(b){d.insertBefore(b,a)})},setContent:function(a,b){if(!a)throw c("fb-error").TAAL.blameToPreviousFile(new Error("reference element is not a node"));while(a.firstChild)i(a.firstChild);return h.appendContent(a,b)},appendContent:function(a,b){if(!a)throw c("fb-error").TAAL.blameToPreviousFile(new Error("reference element is not a node"));return j(b,a,function(b){a.appendChild(b)})},replace:function(a,b){if(!a||!a.parentNode)throw c("fb-error").TAAL.blameToPreviousFile(new Error("reference element does not have a parent"));var d=a.parentNode;return j(b,d,function(b){d.replaceChild(b,a)})},remove:function(a){i(typeof a==="string"?c("$")(a):a)},empty:function(a){a=typeof a==="string"?c("$")(a):a;while(a.firstChild)i(a.firstChild)}};function i(a){a.parentNode&&a.parentNode.removeChild(a)}function j(a,b,e){a=c("HTML").replaceJSONWrapper(a);if(a instanceof c("HTML")&&b.firstChild===null&&-1===a.toString().indexOf("<script")){var f=d("UserAgent_DEPRECATED").ie();if(!f||f>7&&!d("DOMQuery").isNodeOfType(b,["table","tbody","thead","tfoot","tr","select","fieldset"])){var g=f?'<em style="display:none;">&nbsp;</em>':"";b.innerHTML=c("TrustedTypesIEFixDOMPolicy").createHTML(g+a);f&&b.removeChild(b.firstChild);return Array.from(b.childNodes)}}else if(c("isTextNode")(b)){b.data=a;return[a]}g=document.createDocumentFragment();var h;f=[];b=[];var i=!1;a=c("createArrayFromMixed")(a);a.length===1&&a[0]instanceof c("FbtResultBase")&&(a=a[0].getContents());for(var j=0;j<a.length;j++){h=c("HTML").replaceJSONWrapper(a[j]);if(h instanceof c("HTML")){b.push(h.getAction());var k=h.getNodes();!i&&h.hasInlineJs()&&(c("FBLogger")("staticresources").warn("DOM: adding HTML which contains inline JS"),i=!0);for(var l=0;l<k.length;l++)f.push(k[l]),g.appendChild(k[l])}else if(c("isScalar")(h)||h instanceof c("FbtResultBase")){l=document.createTextNode(h);f.push(l);g.appendChild(l)}else c("isNode")(h)?(f.push(h),g.appendChild(h)):(Array.isArray(h)&&c("FBLogger")("dom").warn("Nest arrays not supported"),h!==null&&c("FBLogger")("dom").warn("No way to set content %s",h))}e(g);b.forEach(function(a){a()});return f}e=h;g["default"]=e}),98);
__d("AsyncDOM",["CSS","DOM","FBLogger"],(function(a,b,c,d,e,f){a={invoke:function(a,c){for(var d=0;d<a.length;++d){var e=a[d],f=e[0],g=e[1],h=e[2];e=e[3];h=h&&c||null;g&&(h=b("DOM").scry(h||document.documentElement,g)[0]);h||b("FBLogger")("async_dom").warn("Could not find relativeTo element for %s AsyncDOM operation based on selector: %s",f,g);switch(f){case"hide":b("CSS").hide(h);break;case"show":b("CSS").show(h);break;case"setContent":b("DOM").setContent(h,e);break;case"appendContent":b("DOM").appendContent(h,e);break;case"prependContent":b("DOM").prependContent(h,e);break;case"insertAfter":b("DOM").insertAfter(h,e);break;case"insertBefore":b("DOM").insertBefore(h,e);break;case"remove":b("DOM").remove(h);break;case"replace":b("DOM").replace(h,e);break;default:b("FBLogger")("async_dom").warn("Received invalid command %s for AsyncDOM operation",f)}}}};e.exports=a}),null);
__d("AsyncResponse",["invariant","Bootloader","FBLogger","HTML","WebDriverConfig"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(){function a(a,b){this.error=0,this.errorSummary=null,this.errorDescription=null,this.errorMid=null,this.onload=null,this.replay=!1,this.payload=b,this.request=a,this.silentError=!1,this.transientError=!1,this.blockedAction=!1,this.is_last=!0,this.responseHeaders=null}var b=a.prototype;b.getRequest=function(){return this.request};b.getPayload=function(){return this.payload};b.toError=function(){this.error!==0||h(0,5599);var a=this.errorSummary||"",b=this.getErrorDescriptionString()||"",c=new Error(a.toString()+": "+b);Object.assign(c,{code:this.error,description:this.errorDescription||"",descriptionString:b,response:this,summary:a,isSilent:this.silentError,isTransient:this.transientError,mid:this.errorMid});return c};b.getError=function(){return this.error};b.getErrorSummary=function(){return this.errorSummary};b.setErrorSummary=function(a){a=a===void 0?null:a;this.errorSummary=a;return this};b.getErrorDescription=function(){return this.errorDescription};b.getErrorDescriptionString=function(){var a=this.getErrorDescription();if(a==null)return null;if(c("HTML").isHTML(a)){var b=new(c("HTML"))(a);return b.getRootNode().textContent}return a.toString()};b.getErrorIsWarning=function(){return!!this.errorIsWarning};b.isSilent=function(){return!!this.silentError};b.isTransient=function(){return!!this.transientError};b.isBlockedAction=function(){return!!this.blockedAction};b.getResponseHeader=function(a){var b=this.responseHeaders;if(!b)return null;b=b.replace(/^\n/,"");a=a.toLowerCase();b=b.split("\r\n");for(var c=0;c<b.length;++c){var d=b[c],e=d.indexOf(": ");if(e<=0)continue;var f=d.substring(0,e).toLowerCase();if(f===a)return d.substring(e+2)}return null};a.defaultErrorHandler=function(b){try{!b.silentError?a.verboseErrorHandler(b):c("FBLogger")("async_response").catching(b.toError()).warn("default error handler called")}catch(a){alert(b)}};a.verboseErrorHandler=function(a,b){c("Bootloader").loadModules(["ExceptionDialog"],function(c){return c.showAsyncError(a,b)},"AsyncResponse")};return a}();g["default"]=a}),98);
__d("FetchStreamConfig",[],(function(a,b,c,d,e,f){a=Object.freeze({delim:"/*<!-- fetch-stream -->*/"});f["default"]=a}),66);
__d("StreamBlockReader",[],(function(a,b,c,d,e,f){a=function(){function a(a){var b=this;if(!a.getReader)throw new Error("No getReader method found on given object");this.$3=a.getReader();this.$1="";this.$2=null;this.$4=!1;this.$5="utf-8";this.$6="";this.$9=!1;this.$8=function(){return Promise.reject("Sorry, you are somehow using this too early.")};this.$7=new Promise(function(a,c){b.$8=a})}var b=a.prototype;b.changeEncoding=function(a){if(this.$2)throw new Error("Decoder already in use, encoding cannot be changed");this.$5=a};b.$10=function(){if(!self.TextDecoder)throw new Error("TextDecoder is not supported here");this.$2||(this.$2=new self.TextDecoder(this.$5));return this.$2};b.$11=function(){if(this.$9)throw new Error("Something else is already reading from this reader");this.$9=!0};b.$12=function(){this.$9=!1};b.isDone=function(){return this.$4};b.$13=async function(){if(this.$6!==""){var a=this.$6;this.$6="";return a}if(this.isDone())throw new Error("You cannot read from a stream that is done");a=await this.$3.read();var b=a.done;a=a.value;this.$4=b;b&&this.$8();return a?this.$10().decode(a,{stream:!b}):""};b.readNextBlock=async function(){this.$11();var a=this.$13();this.$12();return a};b.readUntilStringOrEnd=async function(a){return await this.readUntilOneOfStringOrEnd_DO_NOT_USE([a])};b.readUntilStringOrThrow=async function(a){if(!a)throw new Error("cannot read empty string");this.$11();var b="",c=0;while(!this.isDone()){b+=await this.$13();if(b.length<a.length)continue;var d=b.substring(c).indexOf(a);if(d!==-1){d+=c;this.$6=b.substring(d+a.length);this.$12();return b.substring(0,d)}else c=b.length-a.length+1}this.$6=b;this.$12();throw new Error("Breakpoint not found")};b.readUntilOneOfStringOrEnd_DO_NOT_USE=async function(a){this.$11();var b="";while(!this.isDone()){b+=await this.$13();for(var c=0;c<a.length;c++){var d=a[c],e=b.indexOf(d);if(e!==-1){this.$6=b.substring(e+d.length);this.$12();return b.substring(0,e)}}}this.$12();return b};b.waitUntilDone=async function(){return this.$7};return a}();f.default=a}),66);
__d("mixin",[],(function(a,b,c,d,e,f){function a(){var a=function(){},b=0,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];while(e[b]){c=e[b];for(var g in c)Object.prototype.hasOwnProperty.call(c,g)&&(a.prototype[g]=c[g]);b+=1}return a}f["default"]=a}),66);
__d("FetchStreamTransport",["ArbiterMixin","FetchStreamConfig","StreamBlockReader","TimeSlice","URI","mixin","nullthrows"],(function(a,b,c,d,e,f,g){var h,i=0;a=function(a){function b(b){var c;if(!self.ReadableStream||!self.fetch||!Request||!TextDecoder)throw new Error("fetch stream transport is not supported here");c=a.call(this)||this;c.$FetchStreamTransport$p_6=null;c.$FetchStreamTransport$p_1=b;c.$FetchStreamTransport$p_3=!1;c.$FetchStreamTransport$p_4=!1;c.$FetchStreamTransport$p_5=!1;c.$FetchStreamTransport$p_2=++i;return c||babelHelpers.assertThisInitialized(c)}babelHelpers.inheritsLoose(b,a);var d=b.prototype;d.hasFinished=function(){return this.$FetchStreamTransport$p_5};d.getRequestURI=function(){return new(h||(h=c("URI")))(this.$FetchStreamTransport$p_1).addQueryData({__a:1,__adt:this.$FetchStreamTransport$p_2,__req:"fetchstream_"+this.$FetchStreamTransport$p_2,ajaxpipe_fetch_stream:1})};d.send=function(){if(this.$FetchStreamTransport$p_3)throw new Error("FetchStreamTransport instances cannot be re-used.");this.$FetchStreamTransport$p_3=!0;var a=new Request(this.getRequestURI().toString(),{mode:"same-origin",credentials:"include"});this.$FetchStreamTransport$p_6=c("TimeSlice").getGuardedContinuation("FetchStreamTransport: waiting on first response");a=self.fetch(a,{redirect:"follow"});this.$FetchStreamTransport$p_7(a)};d.$FetchStreamTransport$p_7=async function(a){var b=this,d;try{d=await a}catch(a){this.abort()}if(!d||!d.body||!d.ok){this.abort();return}var e=new(c("StreamBlockReader"))(d.body);a=async function(){var a=await e.readUntilStringOrEnd(c("FetchStreamConfig").delim);if(b.$FetchStreamTransport$p_4)return 1;c("nullthrows")(b.$FetchStreamTransport$p_6)(function(){var d=JSON.parse(a);e.isDone()||d.finished?b.$FetchStreamTransport$p_5=!0:b.$FetchStreamTransport$p_6=c("TimeSlice").getGuardedContinuation("FetchStreamTransport: waiting on next response");b.inform("response",d.content)})};while(!this.$FetchStreamTransport$p_5&&!this.$FetchStreamTransport$p_4)if(await a())break};d.abort=function(){var a=this;if(this.$FetchStreamTransport$p_4||this.$FetchStreamTransport$p_5)return;this.$FetchStreamTransport$p_4=!0;this.$FetchStreamTransport$p_5=!0;if(this.$FetchStreamTransport$p_6){var b=this.$FetchStreamTransport$p_6;b(function(){a.inform("abort")})}else this.inform("abort")};return b}(c("mixin")(c("ArbiterMixin")));g.default=a}),98);
__d("HTTPErrors",["emptyFunction"],(function(a,b,c,d,e,f,g){function a(a){return{summary:"HTTP Error",description:"Unknown HTTP error #"+a}}b={get:a,getAll:c("emptyFunction").thatReturns(new Map())};d=b;g["default"]=d}),98);
__d("SessionName",["SessionNameConfig"],(function(a,b,c,d,e,f){e.exports={getName:function(){return b("SessionNameConfig").seed}}}),null);
__d("bind",[],(function(a,b,c,d,e,f){function a(a,b){var c=Array.prototype.slice.call(arguments,2);if(typeof b!=="string")return Function.prototype.bind.apply(b,[a].concat(c));function d(){var d=c.concat(Array.prototype.slice.call(arguments));if(a[b])return a[b].apply(a,d)}d.toString=function(){return"bound lazily: "+a[b]};return d}e.exports=a}),null);
__d("executeAfter",[],(function(a,b,c,d,e,f){function a(a,b,c){return function(){a.apply(c||this,arguments),b.apply(c||this,arguments)}}e.exports=a}),null);
__d("goURI",["cr:8906"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:8906")}),98);
__d("isSparkDotMetaDotComURI",[],(function(a,b,c,d,e,f){var g=new RegExp("(^|\\.)spark\\.meta\\.com$","i"),h=["https"];function a(a){if(a.isEmpty()&&a.toString()!=="#")return!1;return!a.getDomain()&&!a.getProtocol()?!1:h.indexOf(a.getProtocol())!==-1&&g.test(a.getDomain())}f["default"]=a}),66);
__d("AsyncRequest",["errorCode","fbt","invariant","AdsManagerConstURIUtils","Arbiter","AsyncDOM","AsyncRequestConfig","AsyncResponse","Bootloader","CSS","DTSG","DTSG_ASYNC","Deferred","Env","ErrorGuard","Event","FBLogger","FetchStreamTransport","HTTPErrors","HasteResponse","PHPQuerySerializer","Parent","Promise","ResourceTimingsStore","ResourceTypes","Run","ScriptPath","ServerJS","SessionName","TimeSlice","URI","UserAgent_DEPRECATED","ZeroRewrites","bind","clearTimeout","emptyFunction","executeAfter","fb-error","ge","getAsyncHeaders","getAsyncParams","gkx","goURI","isArDotMetaDotComURI","isDevelopersDotMetaDotComURI","isEmpty","isFacebookURI","isHorizonDotMetaDotComURI","isInternalFBURI","isMessengerDotComURI","isSparkDotMetaDotComURI","isWearableDotDeveloperDotMetaDotComURI","isWorkDotMetaDotComURI","isWorkplaceDotComURI","isWorkroomsDotComURI","performanceAbsoluteNow","promiseDone","replaceTransportMarkers","setTimeout","setTimeoutAcrossTransitions","unrecoverableViolation","uriIsRelativePath"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k,l,m,n,o,p,q;e=19e3;f=500;var r=1006,s=1004,t=1010,u=new Set([f,t,s,r]),v=!1;d("Run").onAfterUnload(function(){v=!0});function w(){return v}function x(a){return"onprogress"in a}function y(a){return"upload"in a&&"onprogress"in a.upload}function z(a){return"withCredentials"in a}function A(a){return a.status in{0:1,12029:1,12030:1,12031:1,12152:1}}function B(a){a=!a||typeof a==="function";a||c("FBLogger")("asyncresponse").mustfix("AsyncRequest response handlers must be functions. Pass a function, or use bind() to build one.");return a}var C=2,D=C,E=!1;c("Arbiter").subscribe("page_transition",function(a,b){!E?D=b.id:E=!1});var F="for (;;);",G=F.length,H=function(){function a(b){var e=this,f;this._allowIrrelevantRequests=!1;this._delayPreDisplayJS=!1;this._shouldReplaceTransportMarkers=!1;this._dispatchErrorResponse=function(a,b){var d=a.getError();e.clearStatusIndicator();if(!e._isRelevant()||d===t){e.abort();return}if(e._isServerDialogErrorCode(d)){var f=d==1357008||d==1357007;e.interceptHandler(a);d==1357007?e._displayServerDialog(a,f,!0):e._displayServerDialog(a,f)}else if(e.initialHandler(a)!==!1){c("clearTimeout")(e.timer);try{b(a)}catch(b){e.finallyHandler(a);throw b}e.finallyHandler(a)}};this._onStateChange=function(){var b=e.transport;if(!b)return;try{a._inflightCount--;d("ResourceTimingsStore").measureResponseReceived(c("ResourceTypes").XHR,e.resourceTimingStoreUID);try{b.getResponseHeader("X-FB-Debug")&&(e._xFbServer=b.getResponseHeader("X-FB-Debug"),c("fb-error").ErrorXFBDebug.add(e._xFbServer))}catch(a){}if(b.status>=200&&b.status<300)a.lastSuccessTime=Date.now(),e._handleXHRResponse(b);else if(d("UserAgent_DEPRECATED").webkit()&&typeof b.status==="undefined")e._invokeErrorHandler(1002);else if(c("AsyncRequestConfig").retryOnNetworkError&&A(b)&&e.remainingRetries>0&&!e._requestTimeout){e.remainingRetries--;delete e.transport;e.send(!0);return}else e._invokeErrorHandler();e.getOption("asynchronous_DEPRECATED")!==!1&&delete e.transport}catch(a){if(w())return;delete e.transport;e.remainingRetries>0?(e.remainingRetries--,e.send(!0)):(e.getOption("suppressErrorAlerts")||c("FBLogger")("AsyncRequest").catching(a).mustfix("AsyncRequest exception when attempting to handle a state change"),e._invokeErrorHandler(1007))}};this._handleTimeout=function(){e.continuation.last(function(){e._requestTimeout=!0;var a=e.timeoutHandler;e.abandon();a&&a(e);c("setTimeout")(function(){c("Arbiter").inform("AsyncRequest/timeout",{request:e})},0)})};this.continuation=c("TimeSlice").getPlaceholderReusableContinuation();this.transport=null;this.method="POST";this.uri="";this.timeout=null;this.timer=null;this.initialHandler=f=c("emptyFunction");this.handler=null;this.uploadProgressHandler=null;this.errorHandler=c("AsyncResponse").defaultErrorHandler;this.transportErrorHandler=null;this.timeoutHandler=null;this.interceptHandler=f;this.finallyHandler=f;this.abortHandler=f;this.serverDialogCancelHandler=null;this.relativeTo=null;this.statusElement=null;this.statusClass="";this.data={};this.headers={};this.file=null;this.context={};this.readOnly=!1;this.writeRequiredParams=[];this.remainingRetries=0;this.userActionID="-";this.resourceTimingStoreUID=d("ResourceTimingsStore").getUID(c("ResourceTypes").XHR,b!=null?b.toString():"");this.flushedResponseTextParseIndex=0;this.option={asynchronous_DEPRECATED:!0,suppressErrorHandlerWarning:!1,suppressEvaluation:!1,suppressErrorAlerts:!1,retries:0,bundle:!1,handleErrorAfterUnload:!1,useFetchTransport:!1};this.transportErrorHandler=c("bind")(this,"errorHandler");b!==void 0&&this.setURI(b);this.setAllowCrossPageTransition(c("AsyncRequestConfig").asyncRequestsSurviveTransitionsDefault||!1)}var e=a.prototype;e._dispatchResponse=function(a){this.clearStatusIndicator();if(!this._isRelevant()){this._invokeErrorHandler(t);return}if(this.initialHandler(a)===!1)return;c("clearTimeout")(this.timer);var b,d=this.getHandler();if(d)try{b=this._shouldSuppressJS(d(a))}catch(b){a.is_last&&this.finallyHandler(a);throw b}b||this._handleJSResponse(a);a.is_last&&this.finallyHandler(a)};e._shouldSuppressJS=function(b){return b===a.suppressOnloadToken};e._handlePreDisplayServerJS=function(a,b){var d=!1,e=[],f=function(){if(d){c("FBLogger")("AsyncResponse").warn("registerToBlockDisplayUntilDone_DONOTUSE called after AsyncResponse display started. This is a no-op.");return function(){}}var a,b=new(c("Deferred"))();e.push(b.getPromise());return c("TimeSlice").guard(function(){a&&c("clearTimeout")(a),b.resolve()},"AsyncRequestDisplayBlockingEvent",{propagationType:c("TimeSlice").PropagationType.EXECUTION})};a.handle(b,{bigPipeContext:{registerToBlockDisplayUntilDone_DONOTUSE:f}});d=!0;return e};e._hasEvalDomOp=function(a){return a&&a.length?a.some(function(a){return a[0]==="eval"}):!1};e._handleJSResponse=function(a){var b=this.getRelativeTo(),e=a.domops,f=a.dtsgToken,g=a.dtsgAsyncGetToken,h=a.jsmods,i=a.savedServerJSInstance;i&&i instanceof c("ServerJS")?i=i:i=new(c("ServerJS"))();i.setRelativeTo(b);if(h){var j={define:h.define,instances:h.instances,markup:h.markup};delete h.define;delete h.instances;delete h.markup;this._hasEvalDomOp(e)&&(j.elements=h.elements,delete h.elements);i.handle(j)}j=new(m||(m=c("URI")))(this.uri);(!j.getDomain()&&!j.getProtocol()||document.location.origin===j.getOrigin())&&(f&&d("DTSG").setToken(f),g&&d("DTSG_ASYNC").setToken(g));e&&(q||(q=c("ErrorGuard"))).applyWithGuard(function(){return d("AsyncDOM").invoke(e,b)},null,[],{errorType:"warn"});h&&i.handle(h);this._handleJSRegisters(a,"onload");this._handleJSRegisters(a,"onafterload")};e._handleJSRegisters=function(a,b){a=a[b];if(a)for(b=0;b<a.length;b++){var d=null,e=a[b],f=e.match(/^\"caller:([^\"]+?)\";(.*)/);f!=null&&(d=f[1],e=f[2]);(q||(q=c("ErrorGuard"))).applyWithGuard(new Function(e),this,[]);c("FBLogger")("comet_infra").info("Detected dynamic new Function(...) call in AsyncRequest._handleJSRegisters(...).",new(m||(m=c("URI")))(this.uri).getPath(),d)}};e.invokeResponseHandler=function(a){var e=this;if(typeof a.redirect!=="undefined"){c("setTimeout")(function(){e.setURI(a.redirect,!0).send()},0);return}if(a.bootloadOnly!==void 0){var f=typeof a.bootloadOnly==="string"?JSON.parse(a.bootloadOnly):a.bootloadOnly,g=function(a){c("TimeSlice").guard(function(){c("Bootloader").loadPredictedResourceMap(a)},"Bootloader.loadPredictedResourceMap",{root:!0})()};for(f of f)g(f);return}if(!this.handler&&!this.errorHandler&&!this.transportErrorHandler&&!this.preBootloadHandler&&this.initialHandler===c("emptyFunction")&&this.finallyHandler===c("emptyFunction"))return;var h=a.asyncResponse;if(typeof h!=="undefined"){if(!this._isRelevant()){this._invokeErrorHandler(t);return}h.updateScriptPath&&c("ScriptPath").set(h.updateScriptPath.path,h.updateScriptPath.token,h.updateScriptPath.extra_info);h.lid&&(this._responseTime=Date.now(),this.lid=h.lid);d("HasteResponse").handleSRPayload((g=h.hsrp)!=null?g:{});var i,j;if(h.getError()&&!h.getErrorIsWarning()){f=this.getErrorHandler().bind(this);i=(q||(q=c("ErrorGuard"))).guard(this._dispatchErrorResponse,{name:"AsyncRequest#_dispatchErrorResponse for "+this.getURI()});i=i.bind(this,h,f);j="error"}else{i=(q||(q=c("ErrorGuard"))).guard(this._dispatchResponse.bind(this),{name:"AsyncRequest#_dispatchResponse for "+this.getURI()});i=i.bind(this,h);j="response";g=h.domops;if(!this._delayPreDisplayJS&&h.jsmods&&h.jsmods.pre_display_requires&&!this._hasEvalDomOp(g)){f=h.jsmods;g={define:f.define,instances:f.instances,markup:f.markup};delete f.define;delete f.instances;delete f.markup;g.pre_display_requires=f.pre_display_requires;delete f.pre_display_requires;f=new(c("ServerJS"))();f.setRelativeTo(this.getRelativeTo());h.savedServerJSInstance=f;var k=this._handlePreDisplayServerJS(f,g);if(k&&k.length){var m=i;i=function(){c("promiseDone")((l||(l=b("Promise"))).all(k).then(m))}}}}var o=(n||(n=c("performanceAbsoluteNow")))();i=c("executeAfter")(i,function(){c("Arbiter").inform("AsyncRequest/"+j,{request:e,response:h,ts:o})});this.preBootloadHandler&&this.preBootloadHandler(h);c("Bootloader").loadResources((f=h.allResources)!=null?f:[],{onAll:c("AsyncRequestConfig").immediateDispatch?i:function(){c("setTimeout")(i,0)}})}else typeof a.transportError!=="undefined"?this._xFbServer?this._invokeErrorHandler(1008):this._invokeErrorHandler(1012):this._invokeErrorHandler(1007)};e._invokeErrorHandler=function(a){var b=this,d=this.transport;if(!d)return;var e;if(this.responseText==="")e=1002;else if(this._requestAborted)e=1011;else{try{e=a||d.status||s}catch(a){e=1005}!1===navigator.onLine&&(e=r)}var f,g;a=!0;if(e===r)g=i._(/*BTDS*/"No network connection"),f=i._(/*BTDS*/"Your browser appears to be offline. Please check your Internet connection and try again.");else if(e>=300&&e<=399){g=i._(/*BTDS*/"Redirection");f=i._(/*BTDS*/"Your access to Facebook was redirected or blocked by a third party at this time. Please contact your ISP or reload.");var h=d.getResponseHeader("Location");h&&c("goURI")(h,!0);a=!0}else g=i._(/*BTDS*/"Oops!"),f=i._(/*BTDS*/"Something went wrong. We're working on getting this fixed as soon as we can. You may be able to try again.");var j=new(c("AsyncResponse"))(this,d);Object.assign(j,{error:e,errorSummary:g,errorDescription:f,silentError:a,errorMid:d.getResponseHeader("Error-Mid")});c("setTimeout")(function(){c("Arbiter").inform("AsyncRequest/error",{request:b,response:j})},0);if(w()&&!this.getOption("handleErrorAfterUnload"))return;if(!this.transportErrorHandler){c("FBLogger")("asyncresponse").mustfix("Async request to %s failed with a %d error, but there was no error handler available to deal with it.",this.getURI(),e);return}h=this.getTransportErrorHandler().bind(this);!(this.getOption("suppressErrorAlerts")||u.has(e))?c("FBLogger")("asyncresponse").addToCategoryKey(String(e)).mustfix("Async request failed with error %s: %s when requesting %s",e,f.toString(),this.getURI()):u.has(e)&&c("FBLogger")("asyncresponse").addToCategoryKey(String(e)).warn("Async request failed with error %s: %s when requesting %s",e,f.toString(),this.getURI());(q||(q=c("ErrorGuard"))).applyWithGuard(this._dispatchErrorResponse,this,[j,h])};e._isServerDialogErrorCode=function(a){return a==1357008||a==1357007||a==1357041||a==1442002||a==1357001};e._displayServerDialog=function(a,b,d){var e=this;d===void 0&&(d=!1);var f=a.getPayload();if(f.__dialog!==void 0){this._displayServerLegacyDialog(a,b);return}b=f.__dialogx;new(c("ServerJS"))().handle(b);if(f.__should_use_mwa_reauth===!0){c("Bootloader").loadModules(["MWADeveloperReauthBarrier"],function(b){b.registerRequest(f.__dialogID,e,a)},"AsyncRequest");return}c("Bootloader").loadModules(["ConfirmationDialog"],function(b){b.setupConfirmation(a,e,d)},"AsyncRequest")};e._displayServerLegacyDialog=function(a,b){var d=this,e=a.getPayload().__dialog;if(c("gkx")("20935")){var f;c("FBLogger")("comet_infra").addMetadata("COMET_INFRA","ERROR_CODE",a.getError().toString()).addMetadata("COMET_INFRA","ERROR_URL",(f=(f=a.request)==null?void 0:f.getURI())!=null?f:"unknown").mustfix("AsyncRequest._displayServerLegacyDialog called in Comet")}c("Bootloader").loadModules(["Dialog"],function(c){c=new c(e);b&&c.setHandler(d._displayConfirmationHandler.bind(d,c));c.setCancelHandler(function(){var b=d.getServerDialogCancelHandler();try{b&&b(a)}catch(a){throw a}finally{d.finallyHandler(a)}}).setCausalElement(d.relativeTo).show()},"AsyncRequest")};e._displayConfirmationHandler=function(a){this.data.confirmed=1,Object.assign(this.data,a.getFormData()),this.send()};e.$1=function(a){a.subscribe("response",this._handleJSONPResponse.bind(this)),a.subscribe("abort",this._handleJSONPAbort.bind(this)),this.transport=a};e._handleJSONPResponse=function(a,b){a=this.transport;if(!a)return;b.bootloadOnly||(this.is_first=this.is_first===void 0);b=this._interpretResponse(b);b.asyncResponse&&(b.asyncResponse.is_first=this.is_first,b.asyncResponse.is_last=a.hasFinished());this.invokeResponseHandler(b);a.hasFinished()&&delete this.transport};e._handleJSONPAbort=function(){this._invokeErrorHandler(),delete this.transport};e._handleXHRResponse=function(a){var b;if(this.getOption("suppressEvaluation"))b={asyncResponse:new(c("AsyncResponse"))(this,a)};else try{this._handleFlushedResponse();a=a.responseText;a=this._filterOutFlushedText(a);a=this._unshieldResponseText(a);a=JSON.parse(a);b=this._interpretResponse(a)}catch(a){b=a.message,c("FBLogger")("async_request").catching(a).warn("Failed to handle response")}this.invokeResponseHandler(b)};e._handleFlushedResponse=function(){var a=this.flushedResponseHandler,b=this.transport;if(a&&b){var c=b.responseText.indexOf(F);c=c===-1?b.responseText.length:c;a(b.responseText.substring(this.flushedResponseTextParseIndex,c));this.flushedResponseTextParseIndex=c}};e._unshieldResponseText=function(a){if(a.length<=G)throw new Error("Response too short on async");var b=0;while(a.charAt(b)==" "||a.charAt(b)=="\n")b++;b&&a.substring(b,b+G)==F;return a.substring(b+G)};e._filterOutFlushedText=function(a){if(!this.flushedResponseHandler)return a;var b=a.indexOf(F);return b<0?a:a.substr(b)};e._interpretResponse=function(a){if(a.redirect)return{redirect:a.redirect};if(a.bootloadOnly)return{bootloadOnly:a.bootloadOnly};var b=a.error&&this._isServerDialogErrorCode(a.error);this._shouldReplaceTransportMarkers&&a.payload&&!b&&c("replaceTransportMarkers")({relativeTo:this.getRelativeTo(),bigPipeContext:null},a.payload);b=new(c("AsyncResponse"))(this);if(a.__ar!=1)c("FBLogger")("AsyncRequest").warn("AsyncRequest to endpoint %s returned a JSON response, but it is not properly formatted. The endpoint needs to provide a response using the AsyncResponse class in PHP.",this.getURI()),b.payload=a;else{Object.assign(b,a);a=this.transport;a&&a.getAllResponseHeaders!==void 0&&(b.responseHeaders=a.getAllResponseHeaders())}return{asyncResponse:b}};e._isMultiplexable=function(){if(this.getOption("useFetchTransport")){c("FBLogger")("AsyncRequest").mustfix("You cannot bundle AsyncRequest that uses iframe transport.");return!1}if(!c("isFacebookURI")(new(m||(m=c("URI")))(this.uri))){c("FBLogger")("AsyncRequest").mustfix("You can not bundle AsyncRequest sent to non-facebook URIs.  Uri: %s",this.getURI());return!1}if(!this.getOption("asynchronous_DEPRECATED")){c("FBLogger")("AsyncRequest").mustfix("We cannot bundle synchronous AsyncRequests");return!1}return!0};e.handleResponse=function(a){a=this._interpretResponse(a);this.invokeResponseHandler(a)};e.setMethod=function(a){this.method=a.toString().toUpperCase();return this};e.getMethod=function(){return this.method};e.setData=function(a){this.data=a;return this};e.setRequestHeader=function(a,b){this.headers[a]=b;return this};e.setRawData=function(a){this.rawData=a;return this};e.getData=function(){return this.data};e.setContextData=function(a,b,c){c=c===void 0?!0:c;c&&(this.context["_log_"+a]=b);return this};e._setUserActionID=function(){this.userActionID=(d("SessionName").getName()||"-")+"/-"};e.setURI=function(a,b){b===void 0&&(b=!1);typeof a==="string"&&a.match(/^\/?u_\d+_\d+/)&&c("FBLogger")("asyncrequest").warn("Invalid URI %s",a);var e=new(m||(m=c("URI")))(a);if(this.getOption("useFetchTransport")&&!c("isFacebookURI")(e)){b&&j(0,45284);return this}if(!this._allowCrossOrigin&&!this.getOption("useFetchTransport")&&!e.isSameOrigin()&&!c("uriIsRelativePath")(e)){b&&j(0,45285);return this}this._setUserActionID();if(!a||e.isEmpty()){c("FBLogger")("async_request").mustfix("URI cannot be empty");return this}this.uri=d("ZeroRewrites").rewriteURI(e);return this};e.getURI=function(){return this.uri.toString()};e.delayPreDisplayJS=function(a){a===void 0&&(a=!0);this._delayPreDisplayJS=a;return this};e.setInitialHandler=function(a){this.initialHandler=a;return this};e.setPayloadHandler=function(a){this.setHandler(function(b){a(b.payload)});return this};e.setHandler=function(a){B(a)&&(this.handler=a);return this};e.setFlushedResponseHandler=function(a){B(a)&&(this.flushedResponseHandler=a);return this};e.getHandler=function(){return this.handler||c("emptyFunction")};e.setProgressHandler=function(a){B(a)&&(this.progressHandler=a);return this};e.setUploadProgressHandler=function(a){B(a)&&(this.uploadProgressHandler=a);return this};e.setErrorHandler=function(a){B(a)&&(this.errorHandler=a);return this};e.setTransportErrorHandler=function(a){this.transportErrorHandler=a;return this};e.getErrorHandler=function(){return this.errorHandler||c("emptyFunction")};e.getTransportErrorHandler=function(){return this.transportErrorHandler||c("emptyFunction")};e.setTimeoutHandler=function(a,b){B(b)&&(this.timeout=a,this.timeoutHandler=b);return this};e.resetTimeout=function(a){if(!(this.timeoutHandler===null))if(a===null)this.timeout=null,c("clearTimeout")(this.timer),this.timer=null;else{var b=!this._allowCrossPageTransition;this.timeout=a;c("clearTimeout")(this.timer);b?this.timer=c("setTimeout")(this._handleTimeout.bind(this),this.timeout):this.timer=c("setTimeoutAcrossTransitions")(this._handleTimeout.bind(this),this.timeout)}return this};e.setNewSerial=function(){this.id=++C;return this};e.setInterceptHandler=function(a){this.interceptHandler=a;return this};e.setFinallyHandler=function(a){this.finallyHandler=a;return this};e.setAbortHandler=function(a){this.abortHandler=a;return this};e.getServerDialogCancelHandler=function(){return this.serverDialogCancelHandler};e.setServerDialogCancelHandler=function(a){this.serverDialogCancelHandler=a;return this};e.setPreBootloadHandler=function(a){this.preBootloadHandler=a;return this};e.setReadOnly=function(a){typeof a!=="boolean"||(this.readOnly=a);return this};e.getReadOnly=function(){return this.readOnly};e.setRelativeTo=function(a){this.relativeTo=a;return this};e.getRelativeTo=function(){return this.relativeTo};e.setStatusClass=function(a){this.statusClass=a;return this};e.setStatusElement=function(a){this.statusElement=a;return this};e.getStatusElement=function(){return c("ge")(this.statusElement)};e._isRelevant=function(){if(this._allowCrossPageTransition)return!0;return!this.id?!0:this.id>D};e.clearStatusIndicator=function(){var a=this.getStatusElement();a&&(d("CSS").removeClass(a,"async_saving"),d("CSS").removeClass(a,this.statusClass))};e._addStatusIndicator=function(){var a=this.getStatusElement();a&&(d("CSS").addClass(a,"async_saving"),d("CSS").addClass(a,this.statusClass))};e.specifiesWriteRequiredParams=function(){var a=this;return this.writeRequiredParams.every(function(b){a.data[b]=a.data[b]||(o||(o=c("Env")))[b]||(c("ge")(b)||{}).value;return a.data[b]!==void 0?!0:!1})};e.setOption=function(a,b){typeof this.option[a]!=="undefined"&&(this.option[a]=b);return this};e.getOption=function(a){typeof this.option[a]==="undefined";return this.option[a]};e.abort=function(){var a=this;this.continuation.last(function(){var b=a.transport;if(b){var d=a.getTransportErrorHandler();a.setOption("suppressErrorAlerts",!0);a.setTransportErrorHandler(c("emptyFunction"));a._requestAborted=!0;b.abort();a.setTransportErrorHandler(d)}a.abortHandler();K.unschedule(a)})};e.abandon=function(){var a=this;this.continuation.last(function(){var b;c("clearTimeout")(a.timer);a.setOption("suppressErrorAlerts",!0).setHandler(b=c("emptyFunction")).setErrorHandler(b).setTransportErrorHandler(b).setProgressHandler(b).setUploadProgressHandler(b);b=a.transport;b&&(a._requestAborted=!0,x(b)&&delete b.onprogress,y(b)&&delete b.upload.onprogress,b.abort());a.abortHandler();K.unschedule(a)})};e.setNectarModuleDataSafe=function(a){var b=this.setNectarModuleData;b&&b.call(this,a);return this};e.setAllowCrossPageTransition=function(a){this._allowCrossPageTransition=!!a;this.timer&&this.resetTimeout(this.timeout);return this};e.getAllowIrrelevantRequests=function(){return this._allowIrrelevantRequests};e.setAllowIrrelevantRequests=function(a){this._allowIrrelevantRequests=a;return this};e.setAllowCrossOrigin=function(a){this._allowCrossOrigin=a;return this};e.setAllowCredentials=function(a){this._allowCredentials=a;return this};e.setIsBackgroundRequest=function(a){this._isBackgroundRequest=a;return this};e.setReplaceTransportMarkers=function(a){a===void 0&&(a=!0);this._shouldReplaceTransportMarkers=a;return this};e.sendAndReturnAbortHandler=function(){var a=this;this.send();return function(){return a.abort()}};e.send=function(b){var e=this;b=b||!1;if(!this.uri)return!1;this.errorHandler||!this.getOption("suppressErrorHandlerWarning");this.getOption("useFetchTransport")&&this.method!="GET"&&this.setMethod("GET");this.timeoutHandler!==null&&this.getOption("useFetchTransport");if(!this.getReadOnly()){this.specifiesWriteRequiredParams();if(this.method!="POST")return!1}if(document.location.search.toString().includes(this.uri.toString()))return!1;if(this.uri.toString().includes("/../")||this.uri.toString().includes("\\../")||this.uri.toString().includes("/..\\")||this.uri.toString().includes("\\..\\"))return!1;Object.assign(this.data,c("getAsyncParams")(this.method));(p||(p=c("isEmpty")))(this.context)||(Object.assign(this.data,this.context),this.data.ajax_log=1);(o||(o=c("Env"))).force_param&&Object.assign(this.data,(o||(o=c("Env"))).force_param);this._setUserActionID();if(this.getOption("bundle")&&this._isMultiplexable()){K.schedule(this);return!0}this.setNewSerial();this.getOption("asynchronous_DEPRECATED")||this.uri.addQueryData({__sjax:1});c("Arbiter").inform("AsyncRequest/send",{request:this,ts:(n||(n=c("performanceAbsoluteNow")))()});var f,g;this.method=="GET"&&this.uri.addQueryData({fb_dtsg_ag:d("DTSG_ASYNC").getToken()});d("AdsManagerConstURIUtils").shouldRouteToAMReadRegions(this.uri.toString())&&this.getReadOnly()&&this.method.toLowerCase()==="get"?this.uri.addQueryData({ads_manager_read_regions:!0}):d("AdsManagerConstURIUtils").shouldRouteToAMWriteRegions(this.uri.toString(),this.getReadOnly())&&this.uri.addQueryData({ads_manager_write_regions:!0});this.method=="GET"||this.rawData?(f=this.uri.addQueryData(this.data).toString(),g=this.rawData||""):(this._allowCrossOrigin&&this.uri.addQueryData({__a:1}),f=this.uri.toString(),g=(k||(k=d("PHPQuerySerializer"))).serialize(this.data));if(this.transport)return!1;if(this.getOption("useFetchTransport"))try{var h=new(c("FetchStreamTransport"))(this.uri);this.$1(h);this._markRequestSent();h.send();return!0}catch(a){this.setOption("useFetchTransport",!1)}this.flushedResponseHandler&&(this.flushedResponseTextParseIndex=0);var i;try{i=d("ZeroRewrites").getTransportBuilderForURI(this.uri)()}catch(a){throw c("unrecoverableViolation")(a.message,"comet_infra",{},{blameToPreviousFrame:1})}if(!i)return!1;this.schedule("AsyncRequest.send");i.onreadystatechange=function(){var a=e.transport;a&&a.readyState>=2&&a.readyState<=3&&e._handleFlushedResponse();i.readyState===4&&e.continuation.last(e._onStateChange)};this.progressHandler&&x(i)&&(i.onprogress=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];e.continuation(function(){e.progressHandler&&e.progressHandler.apply(e,b)})});this.uploadProgressHandler&&y(i)&&(i.upload.onprogress=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];e.continuation(function(){e.uploadProgressHandler&&e.uploadProgressHandler.apply(e,b)})});b||(this.remainingRetries=this.getOption("retries"));this.transport=i;try{i.open(this.method,f,c("gkx")("25571")?!0:this.getOption("asynchronous_DEPRECATED"))}catch(a){return!1}if(!this.uri.isSameOrigin()&&!c("uriIsRelativePath")(this.uri)&&!this.getOption("useFetchTransport")){if(!z(i))return!1;this._canSendCredentials()&&(i.withCredentials=!0)}this.method=="POST"&&!this.rawData&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded");this._isBackgroundRequest&&i.setRequestHeader("X-FB-BACKGROUND-STATE","1");var j=c("getAsyncHeaders")(this.uri);Object.keys(j).forEach(function(a){i&&i.setRequestHeader(a,j[a])});c("Arbiter").inform("AsyncRequest/will_send",{request:this});if(i)for(h in this.headers)Object.prototype.hasOwnProperty.call(this.headers,h)&&i.setRequestHeader(h,this.headers[h]);this._addStatusIndicator();this._markRequestSent();i.send(g);this.timeout!==null&&this.resetTimeout(this.timeout);a._inflightCount++;return!0};e.schedule=function(a){this.continuation=c("TimeSlice").getReusableContinuation(a)};e._canSendCredentials=function(){if(this._allowCredentials===!1)return!1;var a=new(m||(m=c("URI")))(this.uri);return c("isFacebookURI")(a)||c("isInternalFBURI")(a)||c("isMessengerDotComURI")(a)||c("isWorkplaceDotComURI")(a)||c("isWorkroomsDotComURI")(a)||c("isWorkDotMetaDotComURI")(a)||c("isHorizonDotMetaDotComURI")(a)||c("isSparkDotMetaDotComURI")(a)||c("isWearableDotDeveloperDotMetaDotComURI")(a)||c("isDevelopersDotMetaDotComURI")(a)||c("isArDotMetaDotComURI")(a)};e._markRequestSent=function(){var a=new(m||(m=c("URI")))(this.getURI()).getQualifiedURI().toString();d("ResourceTimingsStore").updateURI(c("ResourceTypes").XHR,this.resourceTimingStoreUID,a);d("ResourceTimingsStore").annotate(c("ResourceTypes").XHR,this.resourceTimingStoreUID).addStringAnnotation("uri",a);d("ResourceTimingsStore").measureRequestSent(c("ResourceTypes").XHR,this.resourceTimingStoreUID)};e.promisePayload=function(a){return this.exec().then(function(a){return a.payload},function(a){throw a.toError()})};e.exec=function(a){var d=this;if(this.getHandler()!==c("emptyFunction")||this.getErrorHandler()!==c("AsyncResponse").defaultErrorHandler)throw new Error("exec is an async function and does not allow previously set handlers");return new(l||(l=b("Promise")))(function(b,c){d.setHandler(b).setErrorHandler(c).send(a)})};a.bootstrap=function(b,e,f){var g="GET",h=!0,i={};(f||e&&e.rel=="async-post")&&(g="POST",h=!1,b&&(b=new(m||(m=c("URI")))(b),i=b.getQueryData(),b.setQueryData({})));f=d("Parent").byClass(e,"stat_elem")||e;if(f&&d("CSS").hasClass(f,"async_saving"))return!1;b=new a(b).setReadOnly(h).setMethod(g).setData(i).setNectarModuleDataSafe(e).setRelativeTo(e);e&&(b.setHandler(function(a){c("Event").fire(e,"success",{response:a})}),b.setErrorHandler(function(a){c("Event").fire(e,"error",{response:a})!==!1&&c("AsyncResponse").defaultErrorHandler(a)}));if(f instanceof HTMLElement){b.setStatusElement(f);h=f.getAttribute("data-status-class");h&&b.setStatusClass(h)}b.send();return!1};a.bootstrap_UNSAFE_LET_ANYONE_IMPERSONATE_THE_USER_FOR_THESE_WRITES=function(b,c,d){a.bootstrap(b,c,d)};a.post=function(b,c){new a(b).setReadOnly(!1).setMethod("POST").setData(c).send();return!1};a.post_UNSAFE_LET_ANYONE_IMPERSONATE_THE_USER_FOR_THESE_WRITES=function(b,c){a.post(b,c)};a.getLastID=function(){return C};a.ignoreUpdate=function(){E=!0};a.getInflightCount=function(){return this._inflightCount};return a}();H._inflightCount=0;var I,J=[],K=function(){function a(){this._requests=[]}var b=a.prototype;b.add=function(a){this._requests.push(a)};b.remove=function(a){var b=this._requests,c=this._requestsSent;for(var d=0,e=b.length;d<e;d++)b[d]===a&&(c?b[d]=null:b.splice(d,1))};b.send=function(){this._requestsSent&&j(0,4390);this._requestsSent=!0;this._wrapperRequest=null;var a=this._requests;if(!a.length)return;var b;if(a.length===1)b=a[0];else{a=a.filter(Boolean).map(function(a){return[a.uri.getPath(),(k||(k=d("PHPQuerySerializer"))).serialize(a.data)]});b=this._wrapperRequest=new H("/ajax/proxy.php").setAllowCrossPageTransition(!0).setData({data:a}).setHandler(this._handler.bind(this)).setTransportErrorHandler(this._transportErrorHandler.bind(this))}b&&b.setOption("bundle",!1).send()};b._handler=function(a){var b=this,c=a.getPayload().responses;if(c.length!==this._requests.length)return;a=function(a){var d=b._requests[a];if(!d)return 0;var e=d.uri.getPath();b._wrapperRequest&&(d.id=b._wrapperRequest.id);if(c[a][0]!==e){d.continuation.last(function(){d.invokeResponseHandler({transportError:"Wrong response order in bundled request to "+e})});return 0}d.continuation.last(function(){d.handleResponse(c[a][1])})};var d;for(var e=0;e<this._requests.length;e++){d=a(e);if(d===0)continue}J.splice(J.indexOf(this,1))};b._transportErrorHandler=function(a){var b=this,c={transportError:a.errorDescription};a=this._requests.filter(Boolean).map(function(a){b._wrapperRequest&&(a.id=b._wrapperRequest.id);a.invokeResponseHandler(c);return a.uri.getPath()})};a.schedule=function(b){b.schedule("AsyncMultiplex.schedule");I||(I=new a(),J.push(I),c("TimeSlice").guard(function(){c("setTimeoutAcrossTransitions")(function(){I&&(I.send(),I=null)},0)},"AsyncMultiplex.schedule",{propagationType:c("TimeSlice").PropagationType.ORPHAN})());I.add(b);return I};a.unschedule=function(a){J.forEach(function(b){b.remove(a)})};return a}();H.suppressOnloadToken={};a.AsyncRequest=H;g["default"]=H}),226);
__d("FDSCheckmarkFilled24PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("477815"),24);b=a;g["default"]=b}),98);
__d("MDSLockSvgIcon.react",["MDSSvgIcon.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3),e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx("path",{clipRule:"evenodd",d:"M12.25 15.5a.25.25 0 00.25-.25V12a5.5 5.5 0 1111 0v3.25c0 .138.112.25.25.25h.75a2 2 0 012 2v9a2 2 0 01-2 2h-13a2 2 0 01-2-2v-9a2 2 0 012-2h.75zm3 0h5.5a.25.25 0 00.25-.25V12a3 3 0 10-6 0v3.25c0 .138.112.25.25.25z",fillRule:"evenodd"}),b[0]=e):e=b[0];b[1]!==a?(e=i.jsx(c("MDSSvgIcon.react"),babelHelpers["extends"]({},a,{children:e})),b[1]=a,b[2]=e):e=b[2];return e}g["default"]=a}),98);
__d("MDSSwitch.react",["BaseSwitch.react","BaseTheme.react","BaseView.react","Locale","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["aria-describedby","aria-hidden","disabled","onClick","onValueChange","ref","tabIndex","testid","value","xstyle"],i,j=i||d("react"),k=d("Locale").isRTL(),l={background:{bottom:"x1ey2m1c",boxSizing:"x9f619",insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",left:null,right:null,pointerEvents:"x47corl",position:"x10l6tqk",top:"x13vifvy",transitionDuration:"x1eub6wo",transitionProperty:"x19991ni",transitionTimingFunction:"x1d72o",$$css:!0},backgroundDisabledColor_DEPRECATED:{backgroundColor:"xwcfey6",$$css:!0},backgroundInactive:{transitionDuration:"xii2z7h",transitionTimingFunction:"x1r7x56h",$$css:!0},slider:{borderStartStartRadius:"x6nl9eh",borderStartEndRadius:"x1a5l9x9",borderEndEndRadius:"x7vuprf",borderEndStartRadius:"x1mg3h75",boxShadow:"xvo6coq",height:"x1qx5ct2",insetInlineStart:"xaoy8p5",left:null,right:null,pointerEvents:"x47corl",position:"x10l6tqk",top:"xs7f9wi",transitionDuration:"x1eub6wo",transitionProperty:"x11xpdln",transitionTimingFunction:"x1d72o",width:"xw4jnvo",$$css:!0},sliderActiveColor:{backgroundColor:"x1ky6f7f",$$css:!0},sliderActiveLeft:{transform:"x13gy369",$$css:!0},sliderActiveRight:{transform:"x13n5tbt",$$css:!0},sliderColor_DEPRECATED:{backgroundColor:"x14hiurz",$$css:!0},sliderDisabled_DEPRECATED:{backgroundColor:"xszat0t",transitionDuration:"xii2z7h",transitionTimingFunction:"x1r7x56h",$$css:!0},sliderInactiveColor:{backgroundColor:"x1mck26p",$$css:!0},"switch":{backgroundColor:"x14nfmen",borderStartStartRadius:"x6nl9eh",borderStartEndRadius:"x1a5l9x9",borderEndEndRadius:"x7vuprf",borderEndStartRadius:"x1mg3h75",borderTopWidth:"x972fbf",borderInlineEndWidth:"x10w94by",borderBottomWidth:"x1qhh985",borderInlineStartWidth:"x14e42zd",boxSizing:"x9f619",display:"x1rg5ohu",height:"xxk0z11",opacity:"x1hc1fzr",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"xexx8yu",paddingInlineEnd:"xyri2b",paddingBottom:"x18d9i69",paddingInlineStart:"x1c1uobl",position:"x1n2onr6",transitionDuration:"x1eub6wo",transitionProperty:"x19991ni",transitionTimingFunction:"x1d72o",width:"x187nhsf",$$css:!0},switchDisabledColor:{opacity:"xti2d7y",$$css:!0},trackColorActive:{backgroundColor:"xbpvyw4",$$css:!0},trackColorActive_DEPRECATED:{backgroundColor:"x1792ry3",$$css:!0},trackColorInactive:{backgroundColor:"x1czgurv",$$css:!0},trackColorInactive_DEPRECATED:{backgroundColor:"x1qhmfi1",$$css:!0}},m={dark:{"disabled-button-background":"#ececec","secondary-button-background":"#d8d8d8","toggle-active-background":"#429AFF"},light:{"disabled-button-background":"#ececec","secondary-button-background":"#d8d8d8","toggle-active-background":"#0A7CFF"},type:"VARIABLES"};function n(a,b){return c("gkx")("5751")?[l.background,b===!1&&l.backgroundInactive,b===!1?l.trackColorInactive:l.trackColorActive]:[l.background,l.trackColorActive_DEPRECATED,a?l.backgroundDisabledColor_DEPRECATED:b===!1&&l.trackColorInactive_DEPRECATED]}function o(a,b){return c("gkx")("5751")?[l.slider,l.sliderActiveColor,b===!1&&l.sliderInactiveColor,b&&(k?l.sliderActiveLeft:l.sliderActiveRight)]:[l.slider,l.sliderColor_DEPRECATED,a===!0&&l.sliderDisabled_DEPRECATED,b&&(k?l.sliderActiveLeft:l.sliderActiveRight)]}function a(a){var b=d("react-compiler-runtime").c(39),e,f,g,i,k,p,q,r,s,t,u;b[0]!==a?(e=a["aria-describedby"],f=a["aria-hidden"],q=a.disabled,k=a.onClick,p=a.onValueChange,i=a.ref,r=a.tabIndex,s=a.testid,t=a.value,u=a.xstyle,g=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=i,b[5]=k,b[6]=p,b[7]=q,b[8]=r,b[9]=s,b[10]=t,b[11]=u):(e=b[1],f=b[2],g=b[3],i=b[4],k=b[5],p=b[6],q=b[7],r=b[8],s=b[9],t=b[10],u=b[11]);a=q===void 0?!1:q;q=a&&c("gkx")("5751")&&l.switchDisabledColor;var v;b[12]!==q||b[13]!==u?(v=[l["switch"],q,u],b[12]=q,b[13]=u,b[14]=v):v=b[14];b[15]!==a||b[16]!==t?(q=n(a,t),b[15]=a,b[16]=t,b[17]=q):q=b[17];b[18]!==q?(u=j.jsx(c("BaseView.react"),{xstyle:q}),b[18]=q,b[19]=u):u=b[19];b[20]!==a||b[21]!==t?(q=o(a,t),b[20]=a,b[21]=t,b[22]=q):q=b[22];var w;b[23]!==q?(w=j.jsx(c("BaseView.react"),{xstyle:q}),b[23]=q,b[24]=w):w=b[24];b[25]!==e||b[26]!==f||b[27]!==g||b[28]!==a||b[29]!==i||b[30]!==k||b[31]!==p||b[32]!==v||b[33]!==u||b[34]!==w||b[35]!==r||b[36]!==s||b[37]!==t?(q=j.jsx(c("BaseTheme.react"),{config:c("gkx")("5751")?void 0:m,children:j.jsxs(c("BaseSwitch.react"),babelHelpers["extends"]({"aria-describedby":e,"aria-hidden":f},g,{checked:t,disabled:a,onClick:k,onValueChange:p,ref:i,tabIndex:r,testid:void 0,xstyle:v,children:[u,w]}))}),b[25]=e,b[26]=f,b[27]=g,b[28]=a,b[29]=i,b[30]=k,b[31]=p,b[32]=v,b[33]=u,b[34]=w,b[35]=r,b[36]=s,b[37]=t,b[38]=q):q=b[38];return q}g["default"]=a}),98);
__d("MercuryIDs",[],(function(a,b,c,d,e,f){"use strict";var g={isValid:function(a){return a==null||a===""||typeof a!=="string"?!1:/^\w{3,12}:.+/.test(a)},isValidThreadID:function(a){if(!g.isValid(a))return!1;a=g.tokenize(a);switch(a.type){case"user":case"support":case"thread":case"root":return!0;default:return!1}},tokenize:function(a){if(a==null||a===""||!g.isValid(a))throw new Error("bad_id_format "+String(a));var b=a.indexOf(":");return{type:a.substr(0,b),value:a.substr(b+1)}},getUserIDFromParticipantID:function(a){if(!g.isValid(a))throw new Error("bad_id_format "+a);a=g.tokenize(a);var b=a.type;a=a.value;return b==="fbid"?a:null},getParticipantIDFromUserID:function(a){if(isNaN(a))throw new Error("Not a user ID: "+a);return"fbid:"+a},getUserIDFromThreadID:function(a){return!this.isCanonical(a)?null:this.tokenize(a).value},getThreadIDFromUserID:function(a){return"user:"+a},getThreadIDFromThreadFBID:function(a){return"thread:"+a},getThreadIDFromSupportInboxItemID:function(a){return"support:"+a},getThreadFBIDFromThreadID:function(a){return this.tokenize(a).value},getThreadKeyfromThreadIDUserID:function(a,b){if(a==null||a===""||!g.isValid(a))throw new Error("bad_id_format "+String(a));var c=this.tokenize(a).type;a=this.tokenize(a).value;if(c!=="user")return"g"+a;c="";var d="";if(a.length!==b.length)c=a.length>b.length?a:b,d=a.length>b.length?b:a;else if(b===a)return b+"u"+a;else{var e=0;while(e<a.length&&e<b.length)if(a[e]===b[e])e++;else{c=a[e]>b[e]?a:b;d=a[e]>b[e]?b:a;break}}return d+"u"+c},getThreadIDFromParticipantID:function(a){a=this.getUserIDFromParticipantID(a);return a?this.getThreadIDFromUserID(a):null},getParticipantIDFromFromThreadID:function(a){a=this.getUserIDFromThreadID(a);return a?this.getParticipantIDFromUserID(a):null},getSupportInboxItemIDFromThreadID:function(a){return this.tokenize(a).value},isCanonical:function(a){return this.isValid(a)&&this.tokenize(a).type==="user"},isGroupChat:function(a){return this.isValid(a)&&this.tokenize(a).type!=="user"},isLocalThread:function(a){return this.isValid(a)&&this.tokenize(a).type==="root"}};e.exports=g}),null);
__d("MessengerCheckmark.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 36 36",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M26.378 9.169c.597.347.8 1.112.453 1.709l-9 15.5a1.25 1.25 0 0 1-1.965.256l-6.5-6.5a1.25 1.25 0 1 1 1.768-1.768l5.121 5.121a.25.25 0 0 0 .393-.05L24.67 9.621a1.25 1.25 0 0 1 1.709-.453z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("XControllerURIBuilder",["invariant","URI","gkx","isInternalFBURI"],(function(a,b,c,d,e,f,g,h){var i;a=function(){function a(a,b){this.$1={},this.$2=a,this.$3=b}var b=a.prototype;b.setInt=function(a,b){return this.__setParam(a,"Int",b)};b.setFBID=function(a,b){return this.__setParam(a,"FBID",b)};b.setFloat=function(a,b){return this.__setParam(a,"Float",b)};b.setString=function(a,b){return this.__setParam(a,"String",b)};b.setExists=function(a,b){b===!1&&(b=void 0);return this.__setParam(a,"Exists",b)};b.setBool=function(a,b){return this.__setParam(a,"Bool",b)};b.setBoolVector=function(a,b){return this.__setParam(a,"BoolVector",b)};b.setBoolVec=function(a,b){return this.__setParam(a,"BoolVec",b)};b.setEnum=function(a,b){return this.__setParam(a,"Enum",b)};b.setPath=function(a,b){return this.__setParam(a,"Path",b)};b.setIntVector=function(a,b){return this.__setParam(a,"IntVector",b)};b.setIntVec=function(a,b){return this.__setParam(a,"IntVec",b)};b.setIntKeyset=function(a,b){return this.__setParam(a,"IntKeyset",b)};b.setIntSet=function(a,b){return this.__setParam(a,"IntSet",b.join(","))};b.setFloatVector=function(a,b){return this.__setParam(a,"FloatVector",b)};b.setFloatVec=function(a,b){return this.__setParam(a,"FloatVec",b)};b.setFloatSet=function(a,b){return this.__setParam(a,"FloatSet",b.join(","))};b.setFloatKeyset=function(a,b){return this.__setParam(a,"FloatKeyset",b.join(","))};b.setStringVector=function(a,b){return this.__setParam(a,"StringVector",b)};b.setStringVec=function(a,b){return this.__setParam(a,"StringVec",b)};b.setStringKeyset=function(a,b){return this.__setParam(a,"StringKeyset",b)};b.setStringSet=function(a,b){return this.__setParam(a,"StringSet",b)};b.setFBIDVector=function(a,b){return this.__setParam(a,"FBIDVector",b)};b.setFBIDVec=function(a,b){return this.__setParam(a,"FBIDVec",b)};b.setFBIDSet=function(a,b){return this.__setParam(a,"FBIDSet",b)};b.setFBIDKeyset=function(a,b){return this.__setParam(a,"FBIDKeyset",b)};b.setEnumVector=function(a,b){return this.__setParam(a,"EnumVector",b)};b.setEnumVec=function(a,b){return this.__setParam(a,"EnumVec",b)};b.setEnumSet=function(a,b){return this.__setParam(a,"EnumSet",b)};b.setEnumKeyset=function(a,b){return this.__setParam(a,"EnumKeyset",b)};b.setIntToIntMap=function(a,b){return this.__setParam(a,"IntToIntMap",b)};b.setIntToIntDict=function(a,b){return this.__setParam(a,"IntToIntDict",b)};b.setIntToFloatMap=function(a,b){return this.__setParam(a,"IntToFloatMap",b)};b.setIntToFloatDict=function(a,b){return this.__setParam(a,"IntToFloatDict",b)};b.setIntToStringMap=function(a,b){return this.__setParam(a,"IntToStringMap",b)};b.setIntToStringDict=function(a,b){return this.__setParam(a,"IntToStringDict",b)};b.setIntToBoolMap=function(a,b){return this.__setParam(a,"IntToBoolMap",b)};b.setIntToBoolDict=function(a,b){return this.__setParam(a,"IntToBoolDict",b)};b.setStringToIntMap=function(a,b){return this.__setParam(a,"StringToIntMap",b)};b.setStringToFloatMap=function(a,b){return this.__setParam(a,"StringToFloatMap",b)};b.setStringToStringMap=function(a,b){return this.__setParam(a,"StringToStringMap",b)};b.setStringToNullableStringMap=function(a,b){return this.__setParam(a,"StringToNullableStringMap",b)};b.setStringToBoolMap=function(a,b){return this.__setParam(a,"StringToBoolMap",b)};b.setStringToEnumMap=function(a,b){return this.__setParam(a,"StringToEnumMap",b)};b.setEnumToStringVectorMap=function(a,b){return this.__setParam(a,"EnumToStringVectorMap",b)};b.setEnumToStringVecDict=function(a,b){return this.__setParam(a,"EnumToStringVecDict",b)};b.setEnumToStringMap=function(a,b){return this.__setParam(a,"EnumToStringMap",b)};b.setEnumToBoolMap=function(a,b){return this.__setParam(a,"EnumToBoolMap",b)};b.setEnumToBoolDict=function(a,b){return this.__setParam(a,"EnumToBoolDict",b)};b.setEnumToEnumMap=function(a,b){return this.__setParam(a,"EnumToEnumMap",b)};b.setEnumToEnumDict=function(a,b){return this.__setParam(a,"EnumToEnumDict",b)};b.setEnumToIntMap=function(a,b){return this.__setParam(a,"EnumToIntMap",b)};b.setEnumToEnumToStringVecMapMap=function(a,b){return this.__setParam(a,"EnumToEnumToStringVecMapMap",b)};b.setEnumToFBIDVectorMap=function(a,b){return this.__setParam(a,"EnumToFBIDVectorMap",b)};b.setEnumToFBIDVecDict=function(a,b){return this.__setParam(a,"EnumToFBIDVecDict",b)};b.setStringToIntDict=function(a,b){return this.__setParam(a,"StringToIntDict",b)};b.setStringToNullableIntDict=function(a,b){return this.__setParam(a,"StringToNullableIntDict",b)};b.setStringToFloatDict=function(a,b){return this.__setParam(a,"StringToFloatDict",b)};b.setStringToStringKeysetDict=function(a,b){return this.__setParam(a,"StringToStringKeysetDict",b)};b.setStringToNullableFloatDict=function(a,b){return this.__setParam(a,"StringToNullableFloatDict",b)};b.setStringToStringDict=function(a,b){return this.__setParam(a,"StringToStringDict",b)};b.setStringToNullableStringDict=function(a,b){return this.__setParam(a,"StringToNullableStringDict",b)};b.setStringToBoolDict=function(a,b){return this.__setParam(a,"StringToBoolDict",b)};b.setStringToEnumDict=function(a,b){return this.__setParam(a,"StringToEnumDict",b)};b.setEnumToIntDict=function(a,b){return this.__setParam(a,"EnumToIntDict",b)};b.setEnumToStringDict=function(a,b){return this.__setParam(a,"EnumToStringDict",b)};b.setHackType=function(a,b){return this.__setParam(a,"HackType",b)};b.setTypeAssert=function(a,b){return this.__setParam(a,"TypeAssert",b)};b.__validateRequiredParamsExistence=function(){for(var a in this.$3)!this.$3[a].required||Object.prototype.hasOwnProperty.call(this.$1,a)||h(0,903,a)};b.setParams=function(a){for(var b in a){this.__assertParamExists(b);var c=this.$3[b].type;this.__setParam(b,c,a[b])}return this};b.__assertParamExists=function(a){a in this.$3||h(0,37339,a)};b.__setParam=function(a,b,c){this.__assertParamExists(a);var d=this.$3[a].type,e={StringOrPFBID:"String",IntOrPFBID:"Int",FBIDOrPFBID:"FBID",PaymentLegacyAdAccountID:"Int"};e=e[d];d===b||e===b||h(0,37340,a,b,d);this.__setParamInt(a,c);return this};b.__setParamInt=function(a,b){this.$1[a]=b};b.getRequest_LEGACY_UNTYPED=function(a){return a.setReplaceTransportMarkers().setURI(this.getURI())};b.setPreviousActorIsPageVoice=function(a){this.__setParamInt("paipv",a?1:0);return this};b.getURI=function(){this.__validateRequiredParamsExistence();var a={},b="",d=/^(.*)?\{(\?)?(\*)?(.+?)\}(.*)?$/,e=this.$2.split("/"),f=!1;for(var g=0;g<e.length;g++){var j=e[g];if(j==="")continue;var k=d.exec(j);if(!k)b+="/"+j;else{j=k[2]==="?";var l=k[4],m=this.$3[l];m||h(0,11837,l,this.$2);if(j&&f)continue;if(this.$1[l]==null&&j){f=!0;continue}j=this.$1[l]!=null?this.$1[l]:m.defaultValue;j!=null||h(0,907,l);m=k[1]?k[1]:"";k=k[5]?k[5]:"";b+="/"+m+j+k;a[l]=!0}}this.$2.slice(-1)==="/"&&(b+="/");b===""&&(b="/");m=new(i||(i=c("URI")))(b);for(j in this.$1){k=this.$1[j];if(!a[j]&&k!=null){l=this.$3[j];m.addQueryData(j,l&&l.type==="Exists"?null:k)}}return m};b.getLookasideURI=function(){var a="lookaside.facebook.com";c("isInternalFBURI")((i||(i=c("URI"))).getRequestURI())?a="lookaside.internalfb.com":c("gkx")("21116")&&(a="lookaside.internmc.facebook.com");return this.getURI().setDomain(a).setProtocol("https")};a.create=function(b,c){return function(){return new a(b,c)}};return a}();a.prototype.getRequest=function(a){return this.getRequest_LEGACY_UNTYPED(a)};g["default"]=a}),98);
__d("XRequest",["invariant"],(function(a,b,c,d,e,f,g){var h=function(a,b,c){var d;switch(a){case"Bool":d=b&&b!=="false"&&b!=="0"||!1;break;case"Int":d=b.toString();/-?\d+/.test(d)||g(0,11839,b);break;case"Float":d=parseFloat(b,10);isNaN(d)&&g(0,11840,b);break;case"FBID":d=b.toString();for(var e=0;e<d.length;++e){var f=d.charCodeAt(e);48<=f&&f<=57||g(0,11841,b)}break;case"String":d=b.toString();break;case"Enum":c===0?d=h("Int",b,null):c===1?d=h("String",b,null):c===2?d=b:g(0,5044,c);break;default:if(f=/^Nullable(\w+)$/.exec(a))b===null?d=null:d=h(f[1],b,c);else if(e=/^(\w+)Vector$/.exec(a)){!Array.isArray(b)?(d=b.toString(),d=d===""?[]:d.split(",")):d=b;var i=e[1];typeof i==="string"||g(0,5045);d=d.map(function(a){return h(i,a,c&&c.member)})}else if(f=/^(\w+)(Set|Keyset)$/.exec(a))!Array.isArray(b)?(d=b.toString(),d=d===""?[]:d.split(",")):d=b,d=d.reduce(function(a,b){a[b]=b;return a},{}),i=f[1],typeof i==="string"||g(0,5045),d=Object.keys(d).map(function(a){return h(i,d[a],c&&c.member)});else if(e=/^(\w+)To(\w+)Map$/.exec(a)){d={};var j=e[1],k=e[2];typeof j==="string"&&typeof k==="string"||g(0,5045);Object.keys(b).forEach(function(a){d[h(j,a,c&&c.key)]=h(k,b[a],c&&c.value)})}else g(0,11842,a)}return d};a=function(){function a(a,b,c){var d=this;this.$1=b;this.$2=babelHelpers["extends"]({},c.getQueryData());b=a.split("/").filter(function(a){return a});a=c.getPath().split("/").filter(function(a){return a});var e;for(var f=0;f<b.length;++f){var h=/^\{(\?)?(\*)?(\w+)\}$/.exec(b[f]);if(!h){b[f]===a[f]||g(0,5047,c.getPath());continue}var i=!!h[1],j=!!h[2];!j||f===b.length-1||g(0,11843,e);e=h[3];Object.prototype.hasOwnProperty.call(this.$1,e)||g(0,11844,e);this.$1[e].required?i&&g(0,5050,e):i||this.$1[e].defaultValue!=null||g(0,5057,e);a[f]&&(this.$2[e]=j?a.slice(f).join("/"):a[f])}Object.keys(this.$1).forEach(function(a){!d.$1[a].required||Object.prototype.hasOwnProperty.call(d.$2,a)||g(0,5051)})}var b=a.prototype;b.getExists=function(a){return this.$2[a]!==void 0};b.getBool=function(a){return this.$3(a,"Bool")};b.getInt=function(a){return this.$3(a,"Int")};b.getFloat=function(a){return this.$3(a,"Float")};b.getFBID=function(a){return this.$3(a,"FBID")};b.getString=function(a){return this.$3(a,"String")};b.getEnum=function(a){return this.$3(a,"Enum")};b.getOptionalInt=function(a){return this.$4(a,"Int")};b.getOptionalFloat=function(a){return this.$4(a,"Float")};b.getOptionalFBID=function(a){return this.$4(a,"FBID")};b.getOptionalString=function(a){return this.$4(a,"String")};b.getOptionalEnum=function(a){return this.$4(a,"Enum")};b.getIntVector=function(a){return this.$3(a,"IntVector")};b.getFloatVector=function(a){return this.$3(a,"FloatVector")};b.getFBIDVector=function(a){return this.$3(a,"FBIDVector")};b.getStringVector=function(a){return this.$3(a,"StringVector")};b.getEnumVector=function(a){return this.$3(a,"EnumVector")};b.getOptionalIntVector=function(a){return this.$4(a,"IntVector")};b.getOptionalFloatVector=function(a){return this.$4(a,"FloatVector")};b.getOptionalFBIDVector=function(a){return this.$4(a,"FBIDVector")};b.getOptionalStringVector=function(a){return this.$4(a,"StringVector")};b.getOptionalEnumVector=function(a){return this.$4(a,"EnumVector")};b.getIntSet=function(a){return this.$3(a,"IntSet")};b.getFBIDSet=function(a){return this.$3(a,"FBIDSet")};b.getFBIDKeyset=function(a){return this.$3(a,"FBIDKeyset")};b.getStringSet=function(a){return this.$3(a,"StringSet")};b.getEnumKeyset=function(a){return this.$3(a,"EnumKeyset")};b.getOptionalIntSet=function(a){return this.$4(a,"IntSet")};b.getOptionalFBIDSet=function(a){return this.$4(a,"FBIDSet")};b.getOptionalFBIDKeyset=function(a){return this.$4(a,"FBIDKeyset")};b.getOptionalStringSet=function(a){return this.$4(a,"StringSet")};b.getEnumToBoolMap=function(a){return this.$3(a,"EnumToBoolMap")};b.getEnumToEnumMap=function(a){return this.$3(a,"EnumToEnumMap")};b.getEnumToFloatMap=function(a){return this.$3(a,"EnumToFloatMap")};b.getEnumToIntMap=function(a){return this.$3(a,"EnumToIntMap")};b.getEnumToStringMap=function(a){return this.$3(a,"EnumToStringMap")};b.getIntToBoolMap=function(a){return this.$3(a,"IntToBoolMap")};b.getIntToEnumMap=function(a){return this.$3(a,"IntToEnumMap")};b.getIntToFloatMap=function(a){return this.$3(a,"IntToFloatMap")};b.getIntToIntMap=function(a){return this.$3(a,"IntToIntMap")};b.getIntToStringMap=function(a){return this.$3(a,"IntToStringMap")};b.getStringToBoolMap=function(a){return this.$3(a,"StringToBoolMap")};b.getStringToEnumMap=function(a){return this.$3(a,"StringToEnumMap")};b.getStringToFloatMap=function(a){return this.$3(a,"StringToFloatMap")};b.getStringToIntMap=function(a){return this.$3(a,"StringToIntMap")};b.getStringToStringMap=function(a){return this.$3(a,"StringToStringMap")};b.getOptionalEnumToBoolMap=function(a){return this.$4(a,"EnumToBoolMap")};b.getOptionalEnumToEnumMap=function(a){return this.$4(a,"EnumToEnumMap")};b.getOptionalEnumToFloatMap=function(a){return this.$4(a,"EnumToFloatMap")};b.getOptionalEnumToIntMap=function(a){return this.$4(a,"EnumToIntMap")};b.getOptionalEnumToStringMap=function(a){return this.$4(a,"EnumToStringMap")};b.getOptionalIntToBoolMap=function(a){return this.$4(a,"IntToBoolMap")};b.getOptionalIntToEnumMap=function(a){return this.$4(a,"IntToEnumMap")};b.getOptionalIntToFloatMap=function(a){return this.$4(a,"IntToFloatMap")};b.getOptionalIntToIntMap=function(a){return this.$4(a,"IntToIntMap")};b.getOptionalIntToStringMap=function(a){return this.$4(a,"IntToStringMap")};b.getOptionalStringToBoolMap=function(a){return this.$4(a,"StringToBoolMap")};b.getOptionalStringToEnumMap=function(a){return this.$4(a,"StringToEnumMap")};b.getOptionalStringToFloatMap=function(a){return this.$4(a,"StringToFloatMap")};b.getOptionalStringToIntMap=function(a){return this.$4(a,"StringToIntMap")};b.getOptionalStringToStringMap=function(a){return this.$4(a,"StringToStringMap")};b.getEnumToNullableEnumMap=function(a){return this.$3(a,"EnumToNullableEnumMap")};b.getEnumToNullableFloatMap=function(a){return this.$3(a,"EnumToNullableFloatMap")};b.getEnumToNullableIntMap=function(a){return this.$3(a,"EnumToNullableIntMap")};b.getEnumToNullableStringMap=function(a){return this.$3(a,"EnumToNullableStringMap")};b.getIntToNullableEnumMap=function(a){return this.$3(a,"IntToNullableEnumMap")};b.getIntToNullableFloatMap=function(a){return this.$3(a,"IntToNullableFloatMap")};b.getIntToNullableIntMap=function(a){return this.$3(a,"IntToNullableIntMap")};b.getIntToNullableStringMap=function(a){return this.$3(a,"IntToNullableStringMap")};b.getStringToNullableEnumMap=function(a){return this.$3(a,"StringToNullableEnumMap")};b.getStringToNullableFloatMap=function(a){return this.$3(a,"StringToNullableFloatMap")};b.getStringToNullableIntMap=function(a){return this.$3(a,"StringToNullableIntMap")};b.getStringToNullableStringMap=function(a){return this.$3(a,"StringToNullableStringMap")};b.getOptionalEnumToNullableEnumMap=function(a){return this.$4(a,"EnumToNullableEnumMap")};b.getOptionalEnumToNullableFloatMap=function(a){return this.$4(a,"EnumToNullableFloatMap")};b.getOptionalEnumToNullableIntMap=function(a){return this.$4(a,"EnumToNullableIntMap")};b.getOptionalEnumToNullableStringMap=function(a){return this.$4(a,"EnumToNullableStringMap")};b.getOptionalIntToNullableEnumMap=function(a){return this.$4(a,"IntToNullableEnumMap")};b.getOptionalIntToNullableFloatMap=function(a){return this.$4(a,"IntToNullableFloatMap")};b.getOptionalIntToNullableIntMap=function(a){return this.$4(a,"IntToNullableIntMap")};b.getOptionalIntToNullableStringMap=function(a){return this.$4(a,"IntToNullableStringMap")};b.getOptionalStringToNullableEnumMap=function(a){return this.$4(a,"StringToNullableEnumMap")};b.getOptionalStringToNullableFloatMap=function(a){return this.$4(a,"StringToNullableFloatMap")};b.getOptionalStringToNullableStringMap=function(a){return this.$4(a,"StringToNullableStringMap")};b.$3=function(a,b){this.$5(a,b);var c=this.$1[a];if(!Object.prototype.hasOwnProperty.call(this.$2,a)&&c.defaultValue!=null){c.required&&g(0,5052);return h(b,c.defaultValue,c.enumType)}c.required||b==="Bool"||c.defaultValue!=null||g(0,11845,b,a,b,a);return h(b,this.$2[a],c.enumType)};b.$4=function(a,b){this.$5(a,b);var c=this.$1[a];c.required&&g(0,11846,b,a,b,a);c.defaultValue&&g(0,5052);return Object.prototype.hasOwnProperty.call(this.$2,a)?h(b,this.$2[a],c.enumType):null};b.$5=function(a,b){Object.prototype.hasOwnProperty.call(this.$1,a)||g(0,37317,a),this.$1[a].type===b||g(0,11848,a,b,this.$1[a].type)};return a}();f["default"]=a}),66);
__d("XController",["XControllerURIBuilder","XRequest"],(function(a,b,c,d,e,f,g){a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.getURIBuilder=function(a){var b=this,d=new(c("XControllerURIBuilder"))(this.$1,this.$2);if(a){var e=this.getRequest(a);Object.keys(this.$2).forEach(function(a){var c=b.$2[a],f="";!c.required&&!Object.prototype.hasOwnProperty.call(c,"defaultValue")&&(f="Optional");f="get"+f+c.type;f=e[f](a);if(f==null||Object.prototype.hasOwnProperty.call(c,"defaultValue")&&f===c.defaultValue)return;c="set"+c.type;d[c](a,f)})}return d};b.getRequest=function(a){return new(c("XRequest"))(this.$1,this.$2,a)};a.create=function(b,c){return new a(b,c)};return a}();g["default"]=a}),98);
__d("ZenonPeerID",["invariant"],(function(a,b,c,d,e,f,g,h){"use strict";var i="MW_PEER_ID";function a(a){a.length>0||h(0,33504);if(a==="MW_PEER_ID")return i;isNaN(a)===!1||h(0,33551,a);return a}function b(a){return isNaN(a)||a===i?null:a}g.ZenonMWPeerID=i;g.convertStringToPeerID=a;g.convertPeerIDForLogging=b}),98);
__d("ZenonProductConnectFunnel",["FBLogger","performanceNow","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(){return Math.trunc((h||(h=c("performanceNow")))())};a=function(){function a(){this.$6=null,this.$7=null,this.$1=null,this.$2=null,this.$3=null,this.$4=null,this.$5=null,this.$8=new Map(),this.$9=new Map()}var b=a.prototype;b.$10=function(a){var b=this.$8.get(a);if(b!=null)return b;b={acceptedTs:this.$3,connectedTs:null,connectingTs:null,contactingTs:null,endCallTs:null,permissionsReceivedTs:this.$5,permissionsRequestTs:this.$4,ringingTs:this.$2,triggeredTs:this.$1};var c={cameraPermission:this.$6,microphonePermission:this.$7};this.clearPreJoinTimings();this.$8.set(a,b);this.$9.set(a,c);return b};b.$11=function(a,b){var d;a=a==null||(d=a.getLogIdentifiers())==null?void 0:d.clientSessionID;if(a==null){c("FBLogger")("rtc_www").warn("ProductConnectFunnel: could not record UI event due to missing signaling ID");return}a=this.$10(a);if(a[b]!=null)return;a[b]=i()};b.getTimings=function(a){return this.$8.get(a)};b.getPreJoinTimings=function(){return{acceptedTs:this.$3,ringingTs:this.$2,triggeredTs:this.$1}};b.clearPreJoinTimings=function(){this.$3=null,this.$2=null,this.$1=null,this.$4=null,this.$5=null,this.$6=null,this.$7=null};b.setPreJoinTimings=function(a){this.$3=a.acceptedTs,this.$2=a.ringingTs,this.$1=a.triggeredTs};b.getAnnotations=function(a){return this.$9.get(a)};b.remove=function(a){this.clearPreJoinTimings(),this.$8["delete"](a),this.$9["delete"](a)};b.setUITriggered=function(){var a;(a=this.$1)!=null?a:this.$1=i()};b.setUIPermissionsRequest=function(){var a=this;if(this.$4!=null||!navigator.permissions)return;this.$4=i();var b=navigator.permissions;c("promiseDone")(b.query({name:"microphone"}).then(function(b){a.$7=b.state}));c("promiseDone")(b.query({name:"camera"}).then(function(b){a.$6=b.state}))};b.setUIPermissionsReceived=function(){var a;if(this.$4==null)return;(a=this.$5)!=null?a:this.$5=i()};b.setUIAccepted=function(){var a;(a=this.$3)!=null?a:this.$3=i()};b.setUIConnected=function(a){this.$11(a,"connectedTs")};b.setUIConnecting=function(a){this.$11(a,"connectingTs")};b.setUIRinging=function(){var a;(a=this.$2)!=null?a:this.$2=i()};b.setUIContacting=function(a){this.$11(a,"contactingTs")};b.setUIEnded=function(a){this.$11(a,"endCallTs")};return a}();b=new a();g["default"]=b}),98);
__d("bs_caml_array",[],(function(a,b,c,d,e,f){"use strict";function a(b,c,a){var d=new Array(a),e=0;c=c;while(e<a)d[e]=b[c],e=e+1|0,c=c+1|0;return d}function g(a,b){while(!0){var c=b,d=a;if(!c)return d;b=c.tl;a=c.hd.length+d|0;continue}}function h(a,b,c){while(!0){var d=c,e=b;if(!d)return;var f=d.hd,g=f.length;e=e;var h=0;while(h<g)a[e]=f[h],e=e+1|0,h=h+1|0;c=d.tl;b=e;continue}}function b(a){var b=g(0,a);b=new Array(b);h(b,0,a);return b}function c(a,b,c){if(b<0||b>=a.length)throw{RE_EXN_ID:"Invalid_argument",_1:"index out of bounds",Error:new Error()};a[b]=c}function d(a,b){if(b<0||b>=a.length)throw{RE_EXN_ID:"Invalid_argument",_1:"index out of bounds",Error:new Error()};return a[b]}function e(a,b){var c=new Array(a);for(var d=0;d<a;++d)c[d]=b;return c}function i(a){var b=new Array(a);for(var c=0;c<a;++c)b[c]=0;return b}function j(b,c,d,e,a){if(e<=c){for(var f=0;f<a;++f)d[f+e|0]=b[f+c|0];return}for(f=a-1|0;f>=0;--f)d[f+e|0]=b[f+c|0]}function k(a){return a.slice(0)}f.dup=k;f.sub=a;f.concat=b;f.make=e;f.make_float=i;f.blit=j;f.get=d;f.set=c}),null);
__d("bs_curry",["bs_caml_array"],(function(a,b,c,d,e,f){"use strict";function g(a,c){while(!0){var d=c,e=a,f=e.length;f=f===0?1:f;var h=d.length;h=f-h|0;if(h===0)return e.apply(null,d);if(h>=0)return function(b,a){return function(c){return g(b,a.concat([c]))}}(e,d);c=b("bs_caml_array").sub(d,f,-h|0);a=e.apply(null,b("bs_caml_array").sub(d,0,f));continue}}function h(a,b){var c=a.length;if(c===1)return a(b);else switch(c){case 1:return a(b);case 2:return function(c){return a(b,c)};case 3:return function(c,d){return a(b,c,d)};case 4:return function(c,d,e){return a(b,c,d,e)};case 5:return function(c,d,e,f){return a(b,c,d,e,f)};case 6:return function(c,d,e,f,g){return a(b,c,d,e,f,g)};case 7:return function(c,d,e,f,g,h){return a(b,c,d,e,f,g,h)};default:return g(a,[b])}}function a(a){var b=a.length;if(b===1)return a;else return function(b){return h(a,b)}}function i(a,b,c){var d=a.length;if(d===2)return a(b,c);else switch(d){case 1:return g(a(b),[c]);case 2:return a(b,c);case 3:return function(d){return a(b,c,d)};case 4:return function(d,e){return a(b,c,d,e)};case 5:return function(d,e,f){return a(b,c,d,e,f)};case 6:return function(d,e,f,g){return a(b,c,d,e,f,g)};case 7:return function(d,e,f,g,h){return a(b,c,d,e,f,g,h)};default:return g(a,[b,c])}}function c(a){var b=a.length;if(b===2)return a;else return function(b,c){return i(a,b,c)}}function j(a,b,c,d){var e=a.length;if(e===3)return a(b,c,d);else switch(e){case 1:return g(a(b),[c,d]);case 2:return g(a(b,c),[d]);case 3:return a(b,c,d);case 4:return function(e){return a(b,c,d,e)};case 5:return function(e,f){return a(b,c,d,e,f)};case 6:return function(e,f,g){return a(b,c,d,e,f,g)};case 7:return function(e,f,g,h){return a(b,c,d,e,f,g,h)};default:return g(a,[b,c,d])}}function d(a){var b=a.length;if(b===3)return a;else return function(b,c,d){return j(a,b,c,d)}}function k(a,b,c,d,e){var f=a.length;if(f===4)return a(b,c,d,e);else switch(f){case 1:return g(a(b),[c,d,e]);case 2:return g(a(b,c),[d,e]);case 3:return g(a(b,c,d),[e]);case 4:return a(b,c,d,e);case 5:return function(f){return a(b,c,d,e,f)};case 6:return function(f,g){return a(b,c,d,e,f,g)};case 7:return function(f,g,h){return a(b,c,d,e,f,g,h)};default:return g(a,[b,c,d,e])}}function e(a){var b=a.length;if(b===4)return a;else return function(b,c,d,e){return k(a,b,c,d,e)}}function l(a,b,c,d,e,f){var h=a.length;if(h===5)return a(b,c,d,e,f);else switch(h){case 1:return g(a(b),[c,d,e,f]);case 2:return g(a(b,c),[d,e,f]);case 3:return g(a(b,c,d),[e,f]);case 4:return g(a(b,c,d,e),[f]);case 5:return a(b,c,d,e,f);case 6:return function(g){return a(b,c,d,e,f,g)};case 7:return function(g,h){return a(b,c,d,e,f,g,h)};default:return g(a,[b,c,d,e,f])}}function m(a){var b=a.length;if(b===5)return a;else return function(b,c,d,e,f){return l(a,b,c,d,e,f)}}function n(a,b,c,d,e,f,h){var i=a.length;if(i===6)return a(b,c,d,e,f,h);else switch(i){case 1:return g(a(b),[c,d,e,f,h]);case 2:return g(a(b,c),[d,e,f,h]);case 3:return g(a(b,c,d),[e,f,h]);case 4:return g(a(b,c,d,e),[f,h]);case 5:return g(a(b,c,d,e,f),[h]);case 6:return a(b,c,d,e,f,h);case 7:return function(g){return a(b,c,d,e,f,h,g)};default:return g(a,[b,c,d,e,f,h])}}function o(a){var b=a.length;if(b===6)return a;else return function(b,c,d,e,f,g){return n(a,b,c,d,e,f,g)}}function p(a,b,c,d,e,f,h,i){var j=a.length;if(j===7)return a(b,c,d,e,f,h,i);else switch(j){case 1:return g(a(b),[c,d,e,f,h,i]);case 2:return g(a(b,c),[d,e,f,h,i]);case 3:return g(a(b,c,d),[e,f,h,i]);case 4:return g(a(b,c,d,e),[f,h,i]);case 5:return g(a(b,c,d,e,f),[h,i]);case 6:return g(a(b,c,d,e,f,h),[i]);case 7:return a(b,c,d,e,f,h,i);default:return g(a,[b,c,d,e,f,h,i])}}function q(a){var b=a.length;if(b===7)return a;else return function(b,c,d,e,f,g,h){return p(a,b,c,d,e,f,g,h)}}function r(a,b,c,d,e,f,h,i,j){var k=a.length;if(k===8)return a(b,c,d,e,f,h,i,j);else switch(k){case 1:return g(a(b),[c,d,e,f,h,i,j]);case 2:return g(a(b,c),[d,e,f,h,i,j]);case 3:return g(a(b,c,d),[e,f,h,i,j]);case 4:return g(a(b,c,d,e),[f,h,i,j]);case 5:return g(a(b,c,d,e,f),[h,i,j]);case 6:return g(a(b,c,d,e,f,h),[i,j]);case 7:return g(a(b,c,d,e,f,h,i),[j]);default:return g(a,[b,c,d,e,f,h,i,j])}}function s(a){var b=a.length;if(b===8)return a;else return function(b,c,d,e,f,g,h,i){return r(a,b,c,d,e,f,g,h,i)}}f.app=g;f._1=h;f.__1=a;f._2=i;f.__2=c;f._3=j;f.__3=d;f._4=k;f.__4=e;f._5=l;f.__5=m;f._6=n;f.__6=o;f._7=p;f.__7=q;f._8=r;f.__8=s}),null);
__d("bs_belt_Option",["bs_caml_option","bs_curry"],(function(a,b,c,d,e,f){"use strict";function g(a,c){if(a!==void 0&&c(b("bs_caml_option").valFromOption(a)))return a}function a(a,c){return g(a,b("bs_curry").__1(c))}function h(a,c){if(a!==void 0)return c(b("bs_caml_option").valFromOption(a))}function c(a,c){return h(a,b("bs_curry").__1(c))}function d(a){if(a!==void 0)return b("bs_caml_option").valFromOption(a);throw{RE_EXN_ID:"Not_found",Error:new Error()}}function i(a,c,d){if(a!==void 0)return d(b("bs_caml_option").valFromOption(a));else return c}function e(a,c,d){return i(a,c,b("bs_curry").__1(d))}function j(a,c){if(a!==void 0)return b("bs_caml_option").some(c(b("bs_caml_option").valFromOption(a)))}function k(a,c){return j(a,b("bs_curry").__1(c))}function l(a,c){if(a!==void 0)return c(b("bs_caml_option").valFromOption(a))}function m(a,c){return l(a,b("bs_curry").__1(c))}function n(a,c){if(a!==void 0)return b("bs_caml_option").valFromOption(a);else return c}function o(a){return a!==void 0}function p(a){return a===void 0}function q(a,c,d){if(a!==void 0)if(c!==void 0)return d(b("bs_caml_option").valFromOption(a),b("bs_caml_option").valFromOption(c));else return!1;else return c===void 0}function r(a,c,d){return q(a,c,b("bs_curry").__2(d))}function s(a,c,d){if(a!==void 0)if(c!==void 0)return d(b("bs_caml_option").valFromOption(a),b("bs_caml_option").valFromOption(c));else return 1;else if(c!==void 0)return-1;else return 0}function t(a,c,d){return s(a,c,b("bs_curry").__2(d))}f.keepU=g;f.keep=a;f.forEachU=h;f.forEach=c;f.getExn=d;f.mapWithDefaultU=i;f.mapWithDefault=e;f.mapU=j;f.map=k;f.flatMapU=l;f.flatMap=m;f.getWithDefault=n;f.isSome=o;f.isNone=p;f.eqU=q;f.eq=r;f.cmpU=s;f.cmp=t}),null);
__d("goURIWWW",["URI"],(function(a,b,c,d,e,f,g){"use strict";var h;g["default"]=(h||c("URI")).go}),98);
__d("mapMapToArray",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=[],d=0;for(var e of a){var f=e[0],g=e[1];c.push(b(g,f,d,a));d++}return c}f["default"]=a}),66);
__d("mapSet",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=new Set();for(a of a)c.add(b(a));return c}f["default"]=a}),66);
__d("recoil-shared/util/Recoil_err",["fb-error"],(function(a,b,c,d,e,f){"use strict";a=b("fb-error").err;e.exports=a}),null);
__d("useDebounced",["debounce","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useMemo,k=b.useRef;function a(a,b,d){b===void 0&&(b=100);d===void 0&&(d=!1);var e=k(a),f=k(!0),g=k(null);i(function(){f.current=!0;g.current&&(g.current(),g.current=null);return function(){f.current=!1}},[]);i(function(){e.current=a},[a]);var h=j(function(){return c("debounce")(function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];f.current?e.current.apply(e,b):g.current=function(){e.current.apply(e,b)}},b,null,!1,d)},[b,d]);return h}g["default"]=a}),98);
__d("useForceUpdate",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useReducer;function a(){var a=i(j,0);a=a[1];return a}function j(a){return a+1}g["default"]=a}),98);
__d("useStyleXTransition",["differenceSets","mapMapToArray","mapSet","nullthrows","react","react-compiler-runtime","setImmediate","sortBy","useForceUpdate","useIsMountedRef","useStable"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useEffect,k=b.useLayoutEffect,l=b.useRef;e=window;var m=e.clearTimeout,n=e.requestAnimationFrame,o=e.setTimeout;function p(){var a=d("react-compiler-runtime").c(3),b=c("useStable")(q),e;a[0]!==b?(e=function(){return function(){return Array.from(b.values()).forEach(m)}},a[0]=b,a[1]=e):e=a[1];var f;a[2]===Symbol["for"]("react.memo_cache_sentinel")?(f=[],a[2]=f):f=a[2];j(e,f);return b}function q(){return new Map()}function r(){var a=d("react-compiler-runtime").c(3),b=c("useForceUpdate")(),e=c("useIsMountedRef")(),f;a[0]!==b||a[1]!==e.current?(f=function(){return function(){e.current&&b()}},a[0]=b,a[1]=e.current,a[2]=f):f=a[2];return c("useStable")(f)}function a(a,b,d,e){var f=r(),g=p(),h=c("useStable")(function(){return new Map()}),j=l(!0),q=d.enter,s=d.leave,t=d.base,u=d.duration,v=u===void 0?100:u,w=d.durationIn,x=d.durationOut,y=d.onEnter,z=d.onLeave,A=d.onEnterComplete,B=d.onLeaveComplete,C=i(function(a,b,c){return{item:b,key:a,order:c,xstyle:[t,j.current&&q],style:{transitionDuration:(w!=null?w:v)+"ms"}}},[t,q,w,v]),D=new Map(a.map(function(a,c){return[b(a),{item:a,order:c}]})),E=c("differenceSets")(new Set(D.keys()),new Set(h.keys())),F=c("differenceSets")(new Set(h.keys()),new Set(D.keys())),G=new Map();u=Array.from(c("mapSet")(F,function(a){a=c("nullthrows")(h.get(a));a=a.order;return a})).sort(function(a,b){return a-b});u.forEach(function(b,c){b=b-c;while(b<a.length){c=(c=G.get(b))!=null?c:0;G.set(b,c+1);b+=1}});d=c("sortBy")([].concat(c("mapMapToArray")(h,function(a){var b=a.key;b=D.get(b);if(b){return babelHelpers["extends"]({},a,{item:b.item,order:b.order+((b=G.get(b.order))!=null?b:0)})}return a}),Array.from(c("mapSet")(E,function(a){var b=c("nullthrows")(D.get(a)),d=b.item;b=b.order;return C(a,d,b)}))),function(a){return a.order});k(function(){if(e===!0)return;a.forEach(function(a,d){var e,i=b(a),j=(e=h.get(i))!=null?e:C(i,a,d);E.has(i)&&n(function(){j.xstyle=[t,q],m(g.get(i)),g.set(i,o(function(){A&&A(a)},w!=null?w:v)),c("setImmediate")(function(){j.xstyle=[t,q],y&&y(a),f()})});j.item=a;j.order=d+((e=G.get(d))!=null?e:0);h.set(i,j)});Array.from(F.values()).forEach(function(a){var b=h.get(a);if(b==null)return;var d=b.item;b.status!=="leaving"&&(b.status="leaving",b.style={transitionDuration:(x!=null?x:v)+"ms"},n(function(){b.xstyle=[t,s],m(g.get(a)),g.set(a,o(function(){h["delete"](a),B&&B(d),f()},x!=null?x:v)),c("setImmediate")(function(){z&&z(d),f()})}))});j.current=!1},void 0);return d}g["default"]=a}),98);
__d("useThrottledComet",["CometThrottle","react","useStable"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useLayoutEffect,k=b.useRef;function a(a,b){b===void 0&&(b=100);var d=k(a);j(function(){d.current=a},[a]);var e=c("useStable")(function(){return c("CometThrottle")(function(){var a=arguments;return d.current==null?void 0:d.current.apply(d,a)},b)});i(function(){return function(){e.cancel()}},[]);return e}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("EncryptedBackupsDYIFileUtils",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";var h="media";e="messages.zip";function i(){if(navigator.storage!=null&&navigator.storage.getDirectory!=null)return navigator.storage.getDirectory();throw c("FBLogger")("wmi_eb").mustfixThrow("Storage management API is not supported. Please try one of the supported browsers.")}async function a(){var a=await i();return a.getDirectoryHandle(h,{create:!0})}async function b(a,b,d){a=await a.getFileHandle(b,{create:!0});try{b=await a.createSyncAccessHandle();b.write(d);b.flush();b.close()}catch(e){if(e instanceof Error){if(e instanceof TypeError)try{b=await a.createWritable();await b.write(d);await b.close();return}catch(a){if(a instanceof Error){if(a instanceof TypeError)throw c("FBLogger")("wmi_eb").mustfixThrow("Write operation is not supported. Please try one of the supported browsers.");throw c("FBLogger")("wmi_eb").mustfixThrow("Failed to write using writable: %e",a.message)}throw a}throw c("FBLogger")("wmi_eb").mustfixThrow("Failed to write using sync access handle: %s",e.message)}throw e}}async function d(a,b){a=await a.getFileHandle(b);try{var d=await a.createSyncAccessHandle(),e=new ArrayBuffer(d.getSize());d.read(e);d.close();return new Blob([e])}catch(d){if(d instanceof Error){if(d instanceof TypeError)return a.getFile();throw c("FBLogger")("wmi_eb").mustfixThrow("Failed to read file %s, %s",b,d.message)}throw d}}g.DyiMediaFolder=h;g.DyiArchiveFilename=e;g.getRootFolderHandle=i;g.getMediaFolderHandle=a;g.writeFile=b;g.readFile=d}),98);
__d("MAWThreadKeyUtils",["I64","vulture"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return(h||(h=d("I64"))).to_string(a)}function b(a){return a}function e(a){c("vulture")("9DZDuAw4Bd5gY57CNHpZSR8vpLc=");return a}function f(a){return(h||(h=d("I64"))).of_string(a)}function i(a){return a}g.stringThreadKeyFromThreadKey=a;g.toStringThreadKey=b;g.stringThreadKeyFromString=e;g.stringThreadKeyToI64=f;g.stringThreadKeyToString=i}),98);
__d("EncryptedBackupsDYIGenerateThreadMetadata",["CurrentUser","EncryptedBackupsDYISingleton","I64","IGDWebUtils","LSMessagingThreadTypeUtil","MAWThreadKeyUtils","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){return d("IGDWebUtils").isOnInstagramWeb()?(j||(j=d("I64"))).of_string(c("CurrentUser").getEIMU()):(j||(j=d("I64"))).of_string(c("CurrentUser").getAccountID())}function l(a,b){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.threads).getKeyRange(d("MAWThreadKeyUtils").stringThreadKeyToI64(b)))}function m(a,b){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange(b))}function a(a,b){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.contacts).filter(function(a){return b.has((j||(j=d("I64"))).to_string(a.id))}))}function n(a,b){var c;return(c=d("ReQL")).toArrayAsync(c.leftJoin(c.fromTableAscending(a.tables.participants,["contactId"]).getKeyRange(b),c.fromTableAscending(a.tables.contacts,["name"])))}function o(a){return d("LSMessagingThreadTypeUtil").isOneToOne(a)||d("LSMessagingThreadTypeUtil").isOpenOneToOne(a)}function p(a,b,c){if(c!=null&&c.trim()!=="")return c+"_"+b;switch(a.length){case 0:return"Thread_"+b;case 1:return a[0]+"_"+b;case 2:return a[0]+"and"+a[1]+"_"+b;case 3:return""+a[0]+a[1]+"and"+a[2]+"_"+b;case 4:return""+a[0]+a[1]+a[2]+"and1other_"+b;default:return""+a[0]+a[1]+a[2]+"and"+(a.length-3)+"others_"+b}}async function q(a,b,c,e,f,g){var i=[],k=[f];f=await l(c,a);if(f!=null)if(o(f.threadType)){var q=b.getThreadIdForThreadKey(a);if(q==null){b.getLogger().WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Cannot find thread id for thread key ",""])),a);return}q=await m(c,(j||(j=d("I64"))).of_string(q));(q==null?void 0:q.id)!=null&&(q==null?void 0:q.name)!=null&&b.setContactNameForContactId((j||(j=d("I64"))).to_string(q.id),q.name);q=(q==null?void 0:q.name)||"Unknown User";i.push(q);k.push(q);b.setThreadMetaDataByThreadKey(a,k,p(i,g,f.threadName))}else{q=await n(c,f.threadKey);q.forEach(function(a){var c=a[0];a=a[1];(c==null?void 0:c.contactId)!=null&&(a==null?void 0:a.name)!=null&&b.setContactNameForContactId((j||(j=d("I64"))).to_string(c.contactId),a.name);if(!(j||(j=d("I64"))).equal(c.contactId,e)){c=(a==null?void 0:a.name)||"Unknown User";i.push(c);k.push(c)}});b.setThreadMetaDataByThreadKey(a,k,p(i,g,f.threadName))}else b.setThreadMetaDataByThreadKey(a,k,p(i,g))}async function b(a){var b,c=d("EncryptedBackupsDYISingleton").getSingleton(),e=c.getLogger(),f=await c.getDB(),g=await m(f,k()),h=(b=g==null?void 0:g.id)!=null?b:(j||(j=d("I64"))).zero,l=(b=g==null?void 0:g.name)!=null?b:"Me";c.setContactNameForContactId((j||(j=d("I64"))).to_string(h),l);return a.reduce(async function(a,b,d){await a;a=c.getThreadIdForThreadKey(b);a==null&&void e.WARN(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Cannot find thread id for thread key ",""])),b);return q(b,c,f,h,l,d)},Promise.resolve())}g.getAllUnmappedContacts=a;g.EncryptedBackupsDYIGenerateThreadMetadata=b}),98);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("fflate-0.6.10",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){var a,b="";try{a={}.Worker}catch(a){}g["default"]=a?function(c,d,e,f,g){var h=!1,i=new a(c+b,{eval:!0}).on("error",function(a){return g(a,null)}).on("message",function(a){return g(null,a)}).on("exit",function(a){a&&!h&&g(new Error("exited with code "+a),null)});i.postMessage(e,f);i.terminate=function(){h=!0;return a.prototype.terminate.call(i)};return i}:function(a,b,c,d,e){setImmediate(function(){return e(new Error("async operations unsupported - update to Node 12+ (or Node 10-11 with the --experimental-worker CLI flag)"),null)});a=function(){};return{terminate:a,postMessage:a}}}var j=!1;function k(){j||(j=!0,i());return h.exports}var l={},m={exports:l};function n(){var a=k(),b=Uint8Array,c=Uint16Array,d=Uint32Array,e=new b([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),f=new b([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),g=new b([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),h=function(a,b){var e=new c(31);for(var f=0;f<31;++f)e[f]=b+=1<<a[f-1];a=new d(e[30]);for(var f=1;f<30;++f)for(b=e[f];b<e[f+1];++b)a[b]=b-e[f]<<5|f;return[e,a]},i=h(e,2),j=i[0],m=i[1];j[28]=258,m[258]=28;i=h(f,0);var n=i[0],o=i[1],p=new c(32768);for(h=0;h<32768;++h){i=(h&43690)>>>1|(h&21845)<<1;i=(i&52428)>>>2|(i&13107)<<2;i=(i&61680)>>>4|(i&3855)<<4;p[h]=((i&65280)>>>8|(i&255)<<8)>>>1}var q=function(a,b,d){var e=a.length,f=0,g=new c(b);for(;f<e;++f)++g[a[f]-1];var h=new c(b);for(f=0;f<b;++f)h[f]=h[f-1]+g[f-1]<<1;if(d){g=new c(1<<b);d=15-b;for(f=0;f<e;++f)if(a[f]){var i=f<<4|a[f],j=b-a[f],k=h[a[f]-1]++<<j;for(j=k|(1<<j)-1;k<=j;++k)g[p[k]>>>d]=i}}else{g=new c(e);for(f=0;f<e;++f)a[f]&&(g[f]=p[h[a[f]-1]++]>>>15-a[f])}return g},r=new b(288);for(h=0;h<144;++h)r[h]=8;for(h=144;h<256;++h)r[h]=9;for(h=256;h<280;++h)r[h]=7;for(h=280;h<288;++h)r[h]=8;var s=new b(32);for(h=0;h<32;++h)s[h]=5;var t=q(r,9,0),u=q(r,9,1),v=q(s,5,0),w=q(s,5,1),x=function(a){var b=a[0];for(var c=1;c<a.length;++c)a[c]>b&&(b=a[c]);return b},y=function(a,b,c){var d=b/8|0;return(a[d]|a[d+1]<<8)>>(b&7)&c},z=function(a,b){var c=b/8|0;return(a[c]|a[c+1]<<8|a[c+2]<<16)>>(b&7)},aa=function(a){return(a/8|0)+(a&7&&1)},A=function(a,e,f){(e==null||e<0)&&(e=0);(f==null||f>a.length)&&(f=a.length);var g=new(a instanceof c?c:a instanceof d?d:b)(f-e);g.set(a.subarray(e,f));return g},B=function(a,c,d){var h=a.length;if(!h||d&&!d.l&&h<5)return c||new b(0);var i=!c||d,k=!d||d.i;d||(d={});c||(c=new b(h*3));var l=function(a){var d=c.length;if(a>d){d=new b(Math.max(d*2,a));d.set(c);c=d}},m=d.f||0,o=d.p||0,p=d.b||0,r=d.l,s=d.d,t=d.m,v=d.n,B=h*8;do{if(!r){d.f=m=y(a,o,1);var C=y(a,o+1,3);o+=3;if(!C){var D=aa(o)+4,E=a[D-4]|a[D-3]<<8,F=D+E;if(F>h){if(k)throw"unexpected EOF";break}i&&l(p+E);c.set(a.subarray(D,F),p);d.b=p+=E,d.p=o=F*8;continue}else if(C==1)r=u,s=w,t=9,v=5;else if(C==2){E=y(a,o,31)+257;F=y(a,o+10,15)+4;C=E+y(a,o+5,31)+1;o+=14;var G=new b(C),H=new b(19);for(var I=0;I<F;++I)H[g[I]]=y(a,o+I*3,7);o+=F*3;F=x(H);var J=(1<<F)-1;H=q(H,F,1);for(var I=0;I<C;){F=H[y(a,o,J)];o+=F&15;var D=F>>>4;if(D<16)G[I++]=D;else{F=0;var K=0;D==16?(K=3+y(a,o,3),o+=2,F=G[I-1]):D==17?(K=3+y(a,o,7),o+=3):D==18&&(K=11+y(a,o,127),o+=7);while(K--)G[I++]=F}}D=G.subarray(0,E);K=G.subarray(E);t=x(D);v=x(K);r=q(D,t,1);s=q(K,v,1)}else throw"invalid block type";if(o>B){if(k)throw"unexpected EOF";break}}i&&l(p+131072);J=(1<<t)-1;H=(1<<v)-1;C=o;for(;;C=o){F=r[z(a,o)&J];G=F>>>4;o+=F&15;if(o>B){if(k)throw"unexpected EOF";break}if(!F)throw"invalid length/literal";if(G<256)c[p++]=G;else if(G==256){C=o,r=null;break}else{E=G-254;if(G>264){var I=G-257;D=e[I];E=y(a,o,(1<<D)-1)+j[I];o+=D}F=s[z(a,o)&H];G=F>>>4;if(!F)throw"invalid distance";o+=F&15;K=n[G];if(G>3){D=f[G];K+=z(a,o)&(1<<D)-1,o+=D}if(o>B){if(k)throw"unexpected EOF";break}i&&l(p+131072);F=p+E;for(;p<F;p+=4)c[p]=c[p-K],c[p+1]=c[p+1-K],c[p+2]=c[p+2-K],c[p+3]=c[p+3-K];p=F}}d.l=r,d.p=C,d.b=p;r&&(m=1,d.m=t,d.d=s,d.n=v)}while(!m);return p==c.length?c:A(c,0,p)},C=function(a,b,c){c<<=b&7;b=b/8|0;a[b]|=c;a[b+1]|=c>>>8},D=function(a,b,c){c<<=b&7;b=b/8|0;a[b]|=c;a[b+1]|=c>>>8;a[b+2]|=c>>>16},E=function(a,d){var e=[];for(var f=0;f<a.length;++f)a[f]&&e.push({s:f,f:a[f]});a=e.length;var g=e.slice();if(!a)return[L,0];if(a==1){var h=new b(e[0].s+1);h[e[0].s]=1;return[h,1]}e.sort(function(a,b){return a.f-b.f});e.push({s:-1,f:25001});h=e[0];var i=e[1],j=0,k=1,l=2;e[0]={s:-1,f:h.f+i.f,l:h,r:i};while(k!=a-1)h=e[e[j].f<e[l].f?j++:l++],i=e[j!=k&&e[j].f<e[l].f?j++:l++],e[k++]={s:-1,f:h.f+i.f,l:h,r:i};h=g[0].s;for(var f=1;f<a;++f)g[f].s>h&&(h=g[f].s);var m=new c(h+1);i=F(e[k-1],m,0);if(i>d){var f=0;j=0;l=i-d;h=1<<l;g.sort(function(a,b){return m[b.s]-m[a.s]||a.f-b.f});for(;f<a;++f){e=g[f].s;if(m[e]>d)j+=h-(1<<i-m[e]),m[e]=d;else break}j>>>=l;while(j>0){k=g[f].s;m[k]<d?j-=1<<d-m[k]++-1:++f}for(;f>=0&&j;--f){e=g[f].s;m[e]==d&&(--m[e],++j)}i=d}return[new b(m),i]},F=function(a,b,c){return a.s==-1?Math.max(F(a.l,b,c+1),F(a.r,b,c+1)):b[a.s]=c},G=function(a){var b=a.length;while(b&&!a[--b]);var d=new c(++b),e=0,f=a[0],g=1,h=function(a){d[e++]=a};for(var i=1;i<=b;++i)if(a[i]==f&&i!=b)++g;else{if(!f&&g>2){for(;g>138;g-=138)h(32754);g>2&&(h(g>10?g-11<<5|28690:g-3<<5|12305),g=0)}else if(g>3){h(f),--g;for(;g>6;g-=6)h(8304);g>2&&(h(g-3<<5|8208),g=0)}while(g--)h(f);g=1;f=a[i]}return[d.subarray(0,e),b]},H=function(a,b){var c=0;for(var d=0;d<b.length;++d)c+=a[d]*b[d];return c},I=function(a,b,c){var d=c.length;b=aa(b+2);a[b]=d&255;a[b+1]=d>>>8;a[b+2]=a[b]^255;a[b+3]=a[b+1]^255;for(var e=0;e<d;++e)a[b+e+4]=c[e];return(b+4+d)*8},J=function(a,b,d,h,i,j,k,l,m,n,o){C(b,o++,d);++i[256];d=E(i,15);var p=d[0];d=d[1];var u=E(j,15),w=u[0];u=u[1];var x=G(p),y=x[0];x=x[1];var z=G(w),aa=z[0];z=z[1];var A=new c(19);for(var B=0;B<y.length;++B)A[y[B]&31]++;for(var B=0;B<aa.length;++B)A[aa[B]&31]++;var F=E(A,7),J=F[0];F=F[1];var K=19;for(;K>4&&!J[g[K-1]];--K);var L=n+5<<3,M=H(i,r)+H(j,s)+k;i=H(i,p)+H(j,w)+k+14+3*K+H(A,J)+(2*A[16]+3*A[17]+7*A[18]);if(L<=M&&L<=i)return I(b,o,a.subarray(m,m+n));C(b,o,1+(i<M)),o+=2;if(i<M){j=q(p,d,0),k=p,A=q(w,u,0),L=w;a=q(J,F,0);C(b,o,x-257);C(b,o+5,z-1);C(b,o+10,K-4);o+=14;for(var B=0;B<K;++B)C(b,o+3*B,J[g[B]]);o+=3*K;m=[y,aa];for(n=0;n<2;++n){i=m[n];for(var B=0;B<i.length;++B){M=i[B]&31;C(b,o,a[M]),o+=J[M];M>15&&(C(b,o,i[B]>>>5&127),o+=i[B]>>>12)}}}else j=t,k=r,A=v,L=s;for(var B=0;B<l;++B)if(h[B]>255){M=h[B]>>>18&31;D(b,o,j[M+257]),o+=k[M+257];M>7&&(C(b,o,h[B]>>>23&31),o+=e[M]);d=h[B]&31;D(b,o,A[d]),o+=L[d];d>3&&(D(b,o,h[B]>>>5&8191),o+=f[d])}else D(b,o,j[h[B]]),o+=k[h[B]];D(b,o,j[256]);return o+k[256]},K=new d([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),L=new b(0),M=function(a,g,h,i,j,k){var l=a.length,n=new b(i+l+5*(1+Math.ceil(l/7e3))+j),p=n.subarray(i,n.length-j),q=0;if(!g||l<8)for(var r=0;r<=l;r+=65535){var s=r+65535;s<l?q=I(p,q,a.subarray(r,s)):(p[r]=k,q=I(p,q,a.subarray(r,l)))}else{s=K[g-1];g=s>>>13;s=s&8191;var t=(1<<h)-1,u=new c(32768),v=new c(t+1),w=Math.ceil(h/3),x=2*w;h=function(b){return(a[b]^a[b+1]<<w^a[b+2]<<x)&t};var y=new d(25e3),z=new c(288),B=new c(32),C=0,D=0,r=0,E=0,F=0,G=0;for(;r<l;++r){var H=h(r),M=r&32767,N=v[H];u[M]=N;v[H]=M;if(F<=r){var O=l-r;if((C>7e3||E>24576)&&O>423){q=J(a,p,0,y,z,B,D,E,G,r-G,q);E=C=D=0,G=r;for(var P=0;P<286;++P)z[P]=0;for(var P=0;P<30;++P)B[P]=0}var Q=2,R=0,ba=s,S=M-N&32767;if(O>2&&H==h(r-S)){H=Math.min(g,O)-1;var ca=Math.min(32767,r);O=Math.min(258,O);while(S<=ca&&--ba&&M!=N){if(a[r+Q]==a[r+Q-S]){var T=0;for(;T<O&&a[r+T]==a[r+T-S];++T);if(T>Q){Q=T,R=S;if(T>H)break;T=Math.min(S,T-2);var da=0;for(var P=0;P<T;++P){var U=r-S+P+32768&32767,V=u[U];V=U-V+32768&32767;V>da&&(da=V,N=U)}}}M=N,N=u[M];S+=M-N+32768&32767}}if(R){y[E++]=268435456|m[Q]<<18|o[R];V=m[Q]&31;U=o[R]&31;D+=e[V]+f[U];++z[257+V];++B[U];F=r+Q;++C}else y[E++]=a[r],++z[a[r]]}}q=J(a,p,k,y,z,B,D,E,G,r-G,q);!k&&q&7&&(q=I(p,q+1,L))}return A(n,0,i+aa(q)+j)},N=function(){var a=new Int32Array(256);for(var b=0;b<256;++b){var c=b,d=9;while(--d)c=(c&1&&-306674912)^c>>>1;a[b]=c}return a}(),O=function(){var a=-1;return{p:function(b){var c=a;for(var d=0;d<b.length;++d)c=N[c&255^b[d]]^c>>>8;a=c},d:function(){return~a}}},P=function(){var a=1,b=0;return{p:function(c){var d=a,e=b,f=c.length;for(var g=0;g!=f;){var h=Math.min(g+2655,f);for(;g<h;++g)e+=d+=c[g];d=(d&65535)+15*(d>>16),e=(e&65535)+15*(e>>16)}a=d,b=e},d:function(){a%=65521,b%=65521;return(a&255)<<24|a>>>8<<16|(b&255)<<8|b>>>8}}},Q=function(a,b,c,d,e){return M(a,b.level==null?6:b.level,b.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(a.length)))*1.5):12+b.mem,c,d,!e)},R=function(a,b){var c={};for(var d in a)c[d]=a[d];for(var d in b)c[d]=b[d];return c},ba=function(b,c,a){var d=b();b=b.toString();b=b.slice(b.indexOf("[")+1,b.lastIndexOf("]")).replace(/ /g,"").split(",");for(var e=0;e<d.length;++e){var f=d[e],g=b[e];if(typeof f=="function"){c+=";"+g+"=";var h=f.toString();if(f.prototype)if(h.indexOf("[native code]")!=-1){var i=h.indexOf(" ",8)+1;c+=h.slice(i,h.indexOf("(",i))}else{c+=h;for(i in f.prototype)c+=";"+g+".prototype."+i+"="+f.prototype[i].toString()}else c+=h}else a[g]=f}return[c,a]},S=[],ca=function(a){var e=[];for(var f in a)(a[f]instanceof b||a[f]instanceof c||a[f]instanceof d)&&e.push((a[f]=new a[f].constructor(a[f])).buffer);return e},T=function(c,d,e,f){var b;if(!S[e]){var g="",h={},i=c.length-1;for(var j=0;j<i;++j)b=ba(c[j],g,h),g=b[0],h=b[1];S[e]=ba(c[i],g,h)}b=R({},S[e][1]);return a["default"](S[e][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+d.toString()+"}",e,b,ca(b),f)},da=function(){return[b,c,d,e,f,g,j,n,u,w,p,q,x,y,z,aa,A,B,za,ha,ia]},U=function(){return[b,c,d,e,f,g,m,o,t,r,v,s,p,K,L,q,C,D,E,F,G,H,I,J,aa,A,M,Q,wa,ha]},V=function(){return[ma,pa,Z,O,N]},ea=function(){return[na,oa]},fa=function(){return[qa,Z,P]},ga=function(){return[ra]},ha=function(a){return postMessage(a,[a.buffer])},ia=function(a){return a&&a.size&&new b(a.size)},ja=function(a,b,c,d,e,f){var g=T(c,d,e,function(b,a){g.terminate(),f(b,a)});g.postMessage([a,b],b.consume?[a.buffer]:[]);return function(){g.terminate()}},W=function(a){a.ondata=function(a,b){return postMessage([a,b],[a.buffer])};return function(b){return a.push(b.data[0],b.data[1])}},ka=function(a,b,c,d,e){var f,g=T(a,d,e,function(a,c){a?(g.terminate(),b.ondata.call(b,a)):(c[1]&&g.terminate(),b.ondata.call(b,a,c[0],c[1]))});g.postMessage(c);b.push=function(a,c){if(f)throw"stream finished";if(!b.ondata)throw"no stream handler";g.postMessage([a,f=c],[a.buffer])};b.terminate=function(){g.terminate()}},X=function(a,b){return a[b]|a[b+1]<<8},Y=function(a,b){return(a[b]|a[b+1]<<8|a[b+2]<<16|a[b+3]<<24)>>>0},la=function(a,b){return Y(a,b)+Y(a,b+4)*4294967296},Z=function(a,b,c){for(;c;++b)a[b]=c,c>>>=8},ma=function(a,b){var c=b.filename;a[0]=31,a[1]=139,a[2]=8,a[8]=b.level<2?4:b.level==9?2:0,a[9]=3;b.mtime!=0&&Z(a,4,Math.floor(new Date(b.mtime||Date.now())/1e3));if(c){a[3]=8;for(b=0;b<=c.length;++b)a[b+10]=c.charCodeAt(b)}},na=function(a){if(a[0]!=31||a[1]!=139||a[2]!=8)throw"invalid gzip data";var b=a[3],c=10;b&4&&(c+=a[10]|(a[11]<<8)+2);for(var d=(b>>3&1)+(b>>4&1);d>0;d-=!a[c++]);return c+(b&2)},oa=function(a){var b=a.length;return(a[b-4]|a[b-3]<<8|a[b-2]<<16|a[b-1]<<24)>>>0},pa=function(a){return 10+(a.filename&&a.filename.length+1||0)},qa=function(a,b){b=b.level;b=b==0?0:b<6?1:b==9?3:2;a[0]=120,a[1]=b<<6|(b?32-2*b:1)},ra=function(a){if((a[0]&15)!=8||a[0]>>>4>7||(a[0]<<8|a[1])%31)throw"invalid zlib data";if(a[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function sa(a,b){!b&&typeof a=="function"&&(b=a,a={});this.ondata=b;return a}var ta=function(){function a(a,b){!b&&typeof a=="function"&&(b=a,a={}),this.ondata=b,this.o=a||{}}a.prototype.p=function(a,b){this.ondata(Q(a,this.o,0,0,!b),b)};a.prototype.push=function(a,b){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=b;this.p(a,b||!1)};return a}();l.Deflate=ta;var ua=function(){function a(a,b){ka([U,function(){return[W,ta]}],this,sa.call(this,a,b),function(a){a=new ta(a.data);onmessage=W(a)},6)}return a}();l.AsyncDeflate=ua;function va(a,b,c){c||(c=b,b={});if(typeof c!="function")throw"no callback";return ja(a,b,[U],function(a){return ha(wa(a.data[0],a.data[1]))},0,c)}l.deflate=va;function wa(a,b){return Q(a,b||{},0,0)}l.deflateSync=wa;var $=function(){function a(a){this.s={},this.p=new b(0),this.ondata=a}a.prototype.e=function(a){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var c=this.p.length,d=new b(c+a.length);d.set(this.p),d.set(a,c),this.p=d};a.prototype.c=function(a){this.d=this.s.i=a||!1;a=this.s.b;var b=B(this.p,this.o,this.s);this.ondata(A(b,a,this.s.b),this.d);this.o=A(b,this.s.b-32768),this.s.b=this.o.length;this.p=A(this.p,this.s.p/8|0),this.s.p&=7};a.prototype.push=function(a,b){this.e(a),this.c(b)};return a}();l.Inflate=$;var xa=function(){function a(a){this.ondata=a,ka([da,function(){return[W,$]}],this,0,function(){var a=new $();onmessage=W(a)},7)}return a}();l.AsyncInflate=xa;function ya(a,b,c){c||(c=b,b={});if(typeof c!="function")throw"no callback";return ja(a,b,[da],function(a){return ha(za(a.data[0],ia(a.data[1])))},1,c)}l.inflate=ya;function za(a,b){return B(a,b)}l.inflateSync=za;var Aa=function(){function a(a,b){this.c=O(),this.l=0,this.v=1,ta.call(this,a,b)}a.prototype.push=function(a,b){ta.prototype.push.call(this,a,b)};a.prototype.p=function(a,b){this.c.p(a);this.l+=a.length;a=Q(a,this.o,this.v&&pa(this.o),b&&8,!b);this.v&&(ma(a,this.o),this.v=0);b&&(Z(a,a.length-8,this.c.d()),Z(a,a.length-4,this.l));this.ondata(a,b)};return a}();l.Gzip=Aa;l.Compress=Aa;i=function(){function a(a,b){ka([U,V,function(){return[W,ta,Aa]}],this,sa.call(this,a,b),function(a){a=new Aa(a.data);onmessage=W(a)},8)}return a}();l.AsyncGzip=i;l.AsyncCompress=i;function Ba(a,b,c){c||(c=b,b={});if(typeof c!="function")throw"no callback";return ja(a,b,[U,V,function(){return[Ca]}],function(a){return ha(Ca(a.data[0],a.data[1]))},2,c)}l.gzip=Ba;l.compress=Ba;function Ca(a,b){b||(b={});var c=O(),d=a.length;c.p(a);a=Q(a,b,pa(b),8);var e=a.length;return ma(a,b),Z(a,e-8,c.d()),Z(a,e-4,d),a}l.gzipSync=Ca;l.compressSync=Ca;var Da=function(){function a(a){this.v=1,$.call(this,a)}a.prototype.push=function(a,b){$.prototype.e.call(this,a);if(this.v){a=this.p.length>3?na(this.p):4;if(a>=this.p.length&&!b)return;this.p=this.p.subarray(a),this.v=0}if(b){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}$.prototype.c.call(this,b)};return a}();l.Gunzip=Da;var Ea=function(){function a(a){this.ondata=a,ka([da,ea,function(){return[W,$,Da]}],this,0,function(){var a=new Da();onmessage=W(a)},9)}return a}();l.AsyncGunzip=Ea;function Fa(a,b,c){c||(c=b,b={});if(typeof c!="function")throw"no callback";return ja(a,b,[da,ea,function(){return[Ga]}],function(a){return ha(Ga(a.data[0]))},3,c)}l.gunzip=Fa;function Ga(a,c){return B(a.subarray(na(a),-8),c||new b(oa(a)))}l.gunzipSync=Ga;var Ha=function(){function a(a,b){this.c=P(),this.v=1,ta.call(this,a,b)}a.prototype.push=function(a,b){ta.prototype.push.call(this,a,b)};a.prototype.p=function(a,b){this.c.p(a);a=Q(a,this.o,this.v&&2,b&&4,!b);this.v&&(qa(a,this.o),this.v=0);b&&Z(a,a.length-4,this.c.d());this.ondata(a,b)};return a}();l.Zlib=Ha;h=function(){function a(a,b){ka([U,fa,function(){return[W,ta,Ha]}],this,sa.call(this,a,b),function(a){a=new Ha(a.data);onmessage=W(a)},10)}return a}();l.AsyncZlib=h;function Ia(a,b,c){c||(c=b,b={});if(typeof c!="function")throw"no callback";return ja(a,b,[U,fa,function(){return[Ja]}],function(a){return ha(Ja(a.data[0],a.data[1]))},4,c)}l.zlib=Ia;function Ja(a,b){b||(b={});var c=P();c.p(a);a=Q(a,b,2,4);return qa(a,b),Z(a,a.length-4,c.d()),a}l.zlibSync=Ja;var Ka=function(){function a(a){this.v=1,$.call(this,a)}a.prototype.push=function(a,b){$.prototype.e.call(this,a);if(this.v){if(this.p.length<2&&!b)return;this.p=this.p.subarray(2),this.v=0}if(b){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}$.prototype.c.call(this,b)};return a}();l.Unzlib=Ka;var La=function(){function a(a){this.ondata=a,ka([da,ga,function(){return[W,$,Ka]}],this,0,function(){var a=new Ka();onmessage=W(a)},11)}return a}();l.AsyncUnzlib=La;function Ma(a,b,c){c||(c=b,b={});if(typeof c!="function")throw"no callback";return ja(a,b,[da,ga,function(){return[Na]}],function(a){return ha(Na(a.data[0],ia(a.data[1])))},5,c)}l.unzlib=Ma;function Na(a,b){return B((ra(a),a.subarray(2,-4)),b)}l.unzlibSync=Na;var Oa=function(){function a(a){this.G=Da,this.I=$,this.Z=Ka,this.ondata=a}a.prototype.push=function(a,c){if(!this.ondata)throw"no stream handler";if(!this.s){if(this.p&&this.p.length){var d=new b(this.p.length+a.length);d.set(this.p),d.set(a,this.p.length)}else this.p=a;if(this.p.length>2){var e=this;d=function(){e.ondata.apply(e,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(d):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(d):new this.Z(d);this.s.push(this.p,c);this.p=null}}else this.s.push(a,c)};return a}();l.Decompress=Oa;i=function(){function a(a){this.G=Ea,this.I=xa,this.Z=La,this.ondata=a}a.prototype.push=function(a,b){Oa.prototype.push.call(this,a,b)};return a}();l.AsyncDecompress=i;function Pa(a,b,c){c||(c=b,b={});if(typeof c!="function")throw"no callback";return a[0]==31&&a[1]==139&&a[2]==8?Fa(a,b,c):(a[0]&15)!=8||a[0]>>4>7||(a[0]<<8|a[1])%31?ya(a,b,c):Ma(a,b,c)}l.decompress=Pa;function Qa(a,b){return a[0]==31&&a[1]==139&&a[2]==8?Ga(a,b):(a[0]&15)!=8||a[0]>>4>7||(a[0]<<8|a[1])%31?za(a,b):Na(a,b)}l.decompressSync=Qa;var Ra=function(a,c,d,e){for(var f in a){var g=a[f],h=c+f;g instanceof b?d[h]=[g,e]:Array.isArray(g)?d[h]=[g[0],R(e,g[1])]:Ra(g,h+"/",d,e)}},Sa=typeof TextEncoder!="undefined"&&new TextEncoder(),Ta=typeof TextDecoder!="undefined"&&new TextDecoder(),Ua=0;try{Ta.decode(L,{stream:!0}),Ua=1}catch(a){}var Va=function(a){for(var b="",c=0;;){var d=a[c++],e=(d>127)+(d>223)+(d>239);if(c+e>a.length)return[b,A(a,c-1)];!e?b+=String.fromCharCode(d):e==3?(d=((d&15)<<18|(a[c++]&63)<<12|(a[c++]&63)<<6|a[c++]&63)-65536,b+=String.fromCharCode(55296|d>>10,56320|d&1023)):e&1?b+=String.fromCharCode((d&31)<<6|a[c++]&63):b+=String.fromCharCode((d&15)<<12|(a[c++]&63)<<6|a[c++]&63)}};Ba=function(){function a(a){this.ondata=a,Ua?this.t=new TextDecoder():this.p=L}a.prototype.push=function(a,c){if(!this.ondata)throw"no callback";c=!!c;if(this.t){this.ondata(this.t.decode(a,{stream:!0}),c);if(c){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}return}if(!this.p)throw"stream finished";var d=new b(this.p.length+a.length);d.set(this.p);d.set(a,this.p.length);a=Va(d);d=a[0];a=a[1];if(c){if(a.length)throw"invalid utf-8 data";this.p=null}else this.p=a;this.ondata(d,c)};return a}();l.DecodeUTF8=Ba;h=function(){function a(a){this.ondata=a}a.prototype.push=function(a,b){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(Wa(a),this.d=b||!1)};return a}();l.EncodeUTF8=h;function Wa(a,c){if(c){var d=new b(a.length);for(var e=0;e<a.length;++e)d[e]=a.charCodeAt(e);return d}if(Sa)return Sa.encode(a);d=a.length;var f=new b(a.length+(a.length>>1)),g=0,h=function(a){f[g++]=a};for(var e=0;e<d;++e){if(g+5>f.length){var i=new b(g+8+(d-e<<1));i.set(f);f=i}i=a.charCodeAt(e);i<128||c?h(i):i<2048?(h(192|i>>6),h(128|i&63)):i>55295&&i<57344?(i=65536+(i&1023<<10)|a.charCodeAt(++e)&1023,h(240|i>>18),h(128|i>>12&63),h(128|i>>6&63),h(128|i&63)):(h(224|i>>12),h(128|i>>6&63),h(128|i&63))}return A(f,0,g)}l.strToU8=Wa;function Xa(a,b){if(b){b="";for(var c=0;c<a.length;c+=16384)b+=String.fromCharCode.apply(null,a.subarray(c,c+16384));return b}else if(Ta)return Ta.decode(a);else{c=Va(a);b=c[0];a=c[1];if(a.length)throw"invalid utf-8 data";return b}}l.strFromU8=Xa;var Ya=function(a){return a==1?3:a<6?2:a==9?1:0},Za=function(a,b){return b+30+X(a,b+26)+X(a,b+28)},$a=function(a,b,c){var d=X(a,b+28),e=Xa(a.subarray(b+46,b+46+d),!(X(a,b+8)&2048));d=b+46+d;var f=Y(a,b+20);c=c&&f==4294967295?ab(a,d):[f,Y(a,b+24),Y(a,b+42)];f=c[0];var g=c[1];c=c[2];return[X(a,b+10),f,g,e,d+X(a,b+30)+X(a,b+32),c]},ab=function(a,b){for(;X(a,b)!=1;b+=4+X(a,b+2));return[la(a,b+12),la(a,b+4),la(a,b+20)]},bb=function(a){var b=0;if(a)for(var c in a){var d=a[c].length;if(d>65535)throw"extra field too long";b+=d+4}return b},cb=function(b,c,d,e,f,g,h,i){var a=e.length,j=d.extra,k=i&&i.length,l=bb(j);Z(b,c,h!=null?33639248:67324752),c+=4;h!=null&&(b[c++]=20,b[c++]=d.os);b[c]=20,c+=2;b[c++]=d.flag<<1|(g==null&&8),b[c++]=f&&8;b[c++]=d.compression&255,b[c++]=d.compression>>8;f=new Date(d.mtime==null?Date.now():d.mtime);var m=f.getFullYear()-1980;if(m<0||m>119)throw"date not in range 1980-2099";Z(b,c,m<<25|f.getMonth()+1<<21|f.getDate()<<16|f.getHours()<<11|f.getMinutes()<<5|f.getSeconds()>>>1),c+=4;g!=null&&(Z(b,c,d.crc),Z(b,c+4,g),Z(b,c+8,d.size));Z(b,c+12,a);Z(b,c+14,l),c+=16;h!=null&&(Z(b,c,k),Z(b,c+6,d.attrs),(Z(b,c+10,h),c+=14));b.set(e,c);c+=a;if(l)for(m in j){f=j[m];g=f.length;Z(b,c,+m);Z(b,c+2,g);b.set(f,c+4),c+=4+g}k&&(b.set(i,c),c+=k);return c},db=function(a,b,c,d,e){Z(a,b,101010256),Z(a,b+8,c),Z(a,b+10,c),Z(a,b+12,d),Z(a,b+16,e)},eb=function(){function a(a){this.filename=a,this.c=O(),this.size=0,this.compression=0}a.prototype.process=function(a,b){this.ondata(null,a,b)};a.prototype.push=function(a,b){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(a);this.size+=a.length;b&&(this.crc=this.c.d());this.process(a,b||!1)};return a}();l.ZipPassThrough=eb;Ia=function(){function a(a,b){var c=this;b||(b={});eb.call(this,a);this.d=new ta(b,function(a,b){c.ondata(null,a,b)});this.compression=8;this.flag=Ya(b.level)}a.prototype.process=function(a,b){try{this.d.push(a,b)}catch(a){this.ondata(a,null,b)}};a.prototype.push=function(a,b){eb.prototype.push.call(this,a,b)};return a}();l.ZipDeflate=Ia;i=function(){function a(a,b){var c=this;b||(b={});eb.call(this,a);this.d=new ua(b,function(a,b,d){c.ondata(a,b,d)});this.compression=8;this.flag=Ya(b.level);this.terminate=this.d.terminate}a.prototype.process=function(a,b){this.d.push(a,b)};a.prototype.push=function(a,b){eb.prototype.push.call(this,a,b)};return a}();l.AsyncZipDeflate=i;Pa=function(){function a(a){this.ondata=a,this.u=[],this.d=1}a.prototype.add=function(c){var d=this;if(this.d&2)throw"stream finished";var e=Wa(c.filename),a=e.length,f=c.comment,g=f&&Wa(f);f=a!=c.filename.length||g&&f.length!=g.length;var h=a+bb(c.extra)+30;if(a>65535)throw"filename too long";a=new b(h);cb(a,0,c,e,f);var i=[a],j=function(){for(var a=0,b=i;a<b.length;a++){var c=b[a];d.ondata(null,c,!1)}i=[]},k=this.d;this.d=0;var l=this.u.length,m=R(c,{f:e,u:f,o:g,t:function(){c.terminate&&c.terminate()},r:function(){j();if(k){var a=d.u[l+1];a?a.r():d.d=1}k=1}}),n=0;c.ondata=function(a,e,f){if(a)d.ondata(a,e,f),d.terminate();else{n+=e.length;i.push(e);if(f){a=new b(16);Z(a,0,134695760);Z(a,4,c.crc);Z(a,8,n);Z(a,12,c.size);i.push(a);m.c=n,m.b=h+n+16,m.crc=c.crc,m.size=c.size;k&&m.r();k=1}else k&&j()}};this.u.push(m)};a.prototype.end=function(){var a=this;if(this.d&2){if(this.d&1)throw"stream finishing";throw"stream finished"}this.d?this.e():this.u.push({r:function(){if(!(a.d&1))return;a.u.splice(-1,1);a.e()},t:function(){}});this.d=3};a.prototype.e=function(){var c=0,d=0,e=0;for(var f=0,a=this.u;f<a.length;f++){var g=a[f];e+=46+g.f.length+bb(g.extra)+(g.o?g.o.length:0)}a=new b(e+22);for(var f=0,h=this.u;f<h.length;f++){var g=h[f];cb(a,c,g,g.f,g.u,g.c,d,g.o);c+=46+g.f.length+bb(g.extra)+(g.o?g.o.length:0),d+=g.b}db(a,c,this.u.length,e,d);this.ondata(null,a,!0);this.d=2};a.prototype.terminate=function(){for(var b=0,a=this.u;b<a.length;b++){var c=a[b];c.t()}this.d=2};return a}();l.Zip=Pa;function fb(a,c,d){d||(d=c,c={});if(typeof d!="function")throw"no callback";var e={};Ra(a,"",e,c);var f=Object.keys(e),g=f.length,h=0,i=0,j=g,k=new Array(g),l=[],m=function(){for(var a=0;a<l.length;++a)l[a]()},n=function(){var a=new b(i+22),c=h,e=i-h;i=0;for(var f=0;f<j;++f){var g=k[f];try{var l=g.c.length;cb(a,i,g,g.f,g.u,l);var m=30+g.f.length+bb(g.extra),n=i+m;a.set(g.c,n);cb(a,h,g,g.f,g.u,l,i,g.m),h+=16+m+(g.m?g.m.length:0),i=n+l}catch(a){return d(a,null)}}db(a,h,k.length,e,c);d(null,a)};g||n();a=function(b){var c=f[b],a=e[c],j=a[0],o=a[1],p=O(),q=j.length;p.p(j);var r=Wa(c),s=r.length,t=o.comment,u=t&&Wa(t),v=u&&u.length,w=bb(o.extra),x=o.level==0?0:8;a=function(a,e){if(a)m(),d(a,null);else{a=e.length;k[b]=R(o,{size:q,crc:p.d(),c:e,f:r,m:u,u:s!=c.length||u&&t.length!=v,compression:x});h+=30+s+w+a;i+=76+2*(s+w)+(v||0)+a;--g||n()}};s>65535&&a("filename too long",null);if(!x)a(null,j);else if(q<16e4)try{a(null,wa(j,o))}catch(b){a(b,null)}else l.push(va(j,o,a))};for(c=0;c<j;++c)a(c);return m}l.zip=fb;function gb(c,d){d||(d={});var e={},f=[];Ra(c,"",e,d);c=0;d=0;for(var g in e){var a=e[g],h=a[0];a=a[1];var i=a.level==0?0:8,j=Wa(g),k=j.length,l=a.comment,m=l&&Wa(l),n=m&&m.length,o=bb(a.extra);if(k>65535)throw"filename too long";var p=i?wa(h,a):h,q=p.length,r=O();r.p(h);f.push(R(a,{size:h.length,crc:r.d(),c:p,f:j,m:m,u:k!=g.length||m&&l.length!=n,o:c,compression:i}));c+=30+k+o+q;d+=76+2*(k+o)+(n||0)+q}a=new b(d+22);h=c;r=d-c;for(p=0;p<f.length;++p){var j=f[p];cb(a,j.o,j,j.f,j.u,j.c.length);m=30+j.f.length+bb(j.extra);a.set(j.c,j.o+m);cb(a,c,j,j.f,j.u,j.c.length,j.o,j.m),c+=16+m+(j.m?j.m.length:0)}db(a,c,f.length,r,h);return a}l.zipSync=gb;var hb=function(){function a(){}a.prototype.push=function(a,b){this.ondata(null,a,b)};a.compression=0;return a}();l.UnzipPassThrough=hb;Qa=function(){function a(){var a=this;this.i=new $(function(b,c){a.ondata(null,b,c)})}a.prototype.push=function(a,b){try{this.i.push(a,b)}catch(c){this.ondata(c,a,b)}};a.compression=8;return a}();l.UnzipInflate=Qa;Ba=function(){function a(a,b){var c=this;b<32e4?this.i=new $(function(a,b){c.ondata(null,a,b)}):(this.i=new xa(function(a,b,d){c.ondata(a,b,d)}),this.terminate=this.i.terminate)}a.prototype.push=function(a,b){this.i.terminate&&(a=A(a,0)),this.i.push(a,b)};a.compression=8;return a}();l.AsyncUnzipInflate=Ba;h=function(){function a(a){this.onfile=a,this.k=[],this.o={0:hb},this.p=L}a.prototype.push=function(a,c){var d=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var e=Math.min(this.c,a.length),f=a.subarray(0,e);this.c-=e;this.d?this.d.push(f,!this.c):this.k[0].push(f);a=a.subarray(e);if(a.length)return this.push(a,c)}else{f=0;var g=0;e=void 0;var h=void 0;!this.p.length?h=a:!a.length?h=this.p:(h=new b(this.p.length+a.length),(h.set(this.p),h.set(a,this.p.length)));var i=h.length,j=this.c;a=j&&this.d;var k=function(){var a=Y(h,g);if(a==67324752){f=1,e=g;l.d=null;l.c=0;var b=X(h,g+6),c=X(h,g+8),k=b&2048;b=b&8;var m=X(h,g+26),n=X(h,g+28);if(i>g+30+m+n){var o=[];l.k.unshift(o);f=2;var p=Y(h,g+18),q=Y(h,g+22),r=Xa(h.subarray(g+30,g+=30+m),!k);p==4294967295?(m=b?[-2]:ab(h,g),p=m[0],q=m[1]):b&&(p=-1);g+=n;l.c=p;var s,t={name:r,compression:c,start:function(){if(!t.ondata)throw"no callback";if(!p)t.ondata(null,L,!0);else{var a=d.o[c];if(!a)throw"unknown compression type "+c;s=p<0?new a(r):new a(r,p,q);s.ondata=function(c,b,a){t.ondata(c,b,a)};for(var a=0,b=o;a<b.length;a++){var e=b[a];s.push(e,!1)}d.k[0]==o&&d.c?d.d=s:s.push(L,!0)}},terminate:function(){s&&s.terminate&&s.terminate()}};p>=0&&(t.size=p,t.originalSize=q);l.onfile(t)}return"break"}else if(j)if(a==134695760){e=g+=12+(j==-2&&8),f=3,l.c=0;return"break"}else if(a==33639248){e=g-=4,f=3,l.c=0;return"break"}},l=this;for(;g<i-4;++g){var m=k();if(m==="break")break}this.p=L;if(j<0){m=f?h.subarray(0,e-12-(j==-2&&8)-(Y(h,e-16)==134695760&&4)):h.subarray(0,g);a?a.push(m,!!f):this.k[+(f==2)].push(m)}if(f&2)return this.push(h.subarray(g),c);this.p=h.subarray(g)}if(c){if(this.c)throw"invalid zip file";this.p=null}};a.prototype.register=function(a){this.o[a.compression]=a};return a}();l.Unzip=h;function ib(a,c){if(typeof c!="function")throw"no callback";var d=[],e=function(){for(var a=0;a<d.length;++a)d[a]()},f={},g=a.length-22;for(;Y(a,g)!=101010256;--g)if(!g||a.length-g>65558){c("invalid zip file",null);return}var h=X(a,g+8);h||c(null,{});var i=h,j=Y(a,g+16),k=j==4294967295;if(k){g=Y(a,g-12);if(Y(a,g)!=101075792){c("invalid zip file",null);return}i=h=Y(a,g+32);j=Y(a,g+48)}g=function(g){g=$a(a,j,k);var i=g[0],l=g[1],m=g[2],n=g[3],o=g[4];g=g[5];g=Za(a,g);j=o;o=function(a,b){a?(e(),c(a,null)):(f[n]=b,--h||c(null,f))};if(!i)o(null,A(a,g,g+l));else if(i==8){g=a.subarray(g,g+l);if(l<32e4)try{o(null,za(g,new b(m)))}catch(a){o(a,null)}else d.push(ya(g,{size:m},o))}else o("unknown compression type "+i,null)};for(var l=0;l<i;++l)g(l);return e}l.unzip=ib;function jb(c){var d={},e=c.length-22;for(;Y(c,e)!=101010256;--e)if(!e||c.length-e>65558)throw"invalid zip file";var f=X(c,e+8);if(!f)return{};var g=Y(c,e+16),h=g==4294967295;if(h){e=Y(c,e-12);if(Y(c,e)!=101075792)throw"invalid zip file";f=Y(c,e+32);g=Y(c,e+48)}for(e=0;e<f;++e){var a=$a(c,g,h),i=a[0],j=a[1],k=a[2],l=a[3],m=a[4];a=a[5];a=Za(c,a);g=m;if(!i)d[l]=A(c,a,a+j);else if(i==8)d[l]=za(c.subarray(a,a+j),new b(k));else throw"unknown compression type "+i}return d}l.unzipSync=jb}var o=!1;function p(){o||(o=!0,n());return m.exports}function a(a){switch(a){case void 0:return p()}}e.exports=a}),null);
__d("fflate",["fflate-0.6.10"],(function(a,b,c,d,e,f){e.exports=b("fflate-0.6.10")()}),null);
__d("EncryptedBackupsDYIZipUtils",["EncryptedBackupsDYIFileUtils","fflate"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m;async function a(a,b,c,e,f,g){var o=await d("EncryptedBackupsDYIFileUtils").getRootFolderHandle();o=await o.getFileHandle("messages.zip",{create:!0});e("stream_file_start");var p=await o.createWritable({keepExisting:!1,mode:"exclusive"});o=new(d("fflate").Zip)();var q=0;o.ondata=function(a,b,d){if(a){c.ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Generic stream error"])));e("stream_file_error");g(a);return}q++;q%1e3===0&&c.LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Writing chunk #",""])),q);p.write(b).catch(function(a){c.ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Error during data event"]))),e("stream_file_error"),g(a)});d&&(c.LOG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Finished ZIP file generation. Saving the results"]))),e("stream_file_end"),e("write_file_start"),p.close().then(function(){e("write_file_end"),c.LOG(l||(l=babelHelpers.taggedTemplateLiteralLoose(["Closed the writing stream"]))),f()}).catch(function(a){c.ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Error during end event"]))),e("write_file_error"),g(a)}))};for(a of a){var r=a.threadName+".json";r=new(d("fflate").ZipDeflate)(r,{level:9});var s=new TextEncoder().encode(JSON.stringify(a,null,2));o.add(r);r.push(s,!0)}for(r of b)await n(o,r);o.end()}async function n(a,b){var c=b.split("/").pop(),e=await d("EncryptedBackupsDYIFileUtils").getMediaFolderHandle();e=await d("EncryptedBackupsDYIFileUtils").readFile(e,c!=null?c:b);c=await e.arrayBuffer();e=new Uint8Array(c);c=new(d("fflate").ZipPassThrough)(b);a.add(c);c.push(e,!0)}g.generateZipFile=a}),98);
__d("EncryptedBackupsDYISingleton",["EncryptedBackupsDYIFileUtils","EncryptedBackupsDYIGenerateThreadMetadata","EncryptedBackupsDYISingletonFactory","EncryptedBackupsDYITypes","EncryptedBackupsDYIZipUtils","FBLogger","I64","LSIntEnum","MAWBridge","MAWQplProxy","WAHashUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=["senderId"],i,j,k,l,m,n,o,p,q,r,s,t,u,v=null;function w(){try{return WorkerGlobalScope!==void 0&&self instanceof WorkerGlobalScope}catch(a){return!1}}function a(a,b,e){if(v==null)switch(a){case d("EncryptedBackupsDYITypes").EncryptedBackupsDYIConfig.Armadillo:if(w())throw c("FBLogger")("wmi_eb").mustfixThrow("EncryptedBackupsDYISingleton for Armadillo can only be initialised in the main thread");v=d("EncryptedBackupsDYISingletonFactory").getMAWEncryptedBackupsDYISingleton(b,e);break;case d("EncryptedBackupsDYITypes").EncryptedBackupsDYIConfig.Instamadillo:if(!w())throw c("FBLogger")("wmi_eb").mustfixThrow("EncryptedBackupsDYISingleton for Instamadillo can only be initialised in the worker");v=d("EncryptedBackupsDYISingletonFactory").getIGDEncryptedBackupsDYISingleton(b,e);break}}function b(){if(v==null)throw c("FBLogger")("wmi_eb").mustfixThrow("EncryptedBackupsDYISingleton is not initialised. Please call EncryptedBackupsDYISingleton.initSingleton() first.");return v}e=function(){function a(a,b,c,d){this.$5=new Map(),this.$6=new Set(),this.$7=new Set(),this.$8=new Map(),this.$9=new Map(),this.$10=new Map(),this.$11=new Map(),this.$12=new Map(),this.$1=a,this.$2=b,this.$3=c,this.$4=d}var b=a.prototype;b.getDB=function(){return this.$1()};b.getLogger=function(){return this.$4};b.getAllMediaUrls=function(){return Array.from(this.$5.values())};b.$13=function(a){return this.$5.get(a)};b.setMediaUrlByPlainTextHash=function(a,b){if(this.$5.has(a))return;this.$5.set(a,b)};b.addThreadKeyToThreadsRestoreInProgress=function(a){this.$6.add(a)};b.isThreadRestoreInProgressForThreadKey=function(a){return this.$6.has(a)};b.deleteThreadKeyFromThreadsRestoreInProgress=function(a){this.$6.delete(a),this.$4.LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Finished handling message range queries for thread with thread key ",". "," threads left"])),a,this.$6.size),this.$14()&&(this.$4.LOG(j||(j=babelHelpers.taggedTemplateLiteralLoose(["DYI flow complete - generating output"]))),void this.$15())};b.isThreadsRestoreComplete=function(){return this.$6.size===0};b.addPlaintextHashToAttachmentDownloadsInProgress=function(a){this.$7.add(a),this.$4.LOG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Started processing attachment with plaintext hash ","."])),d("WAHashUtils").sanitisePlaintextHash(a))};b.deletePlaintextHashFromAttachmentDownloadsInProgress=function(a){this.$7.delete(a),this.$4.LOG(l||(l=babelHelpers.taggedTemplateLiteralLoose(["Finished processing attachment with plaintext hash ",". "," attachments left"])),d("WAHashUtils").sanitisePlaintextHash(a),this.$7.size),this.$7.size<30&&this.$4.LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Remaining attachments: ",""])),Array.from(this.$7).map(d("WAHashUtils").sanitisePlaintextHash).join(", ")),this.$14()&&(this.$4.LOG(n||(n=babelHelpers.taggedTemplateLiteralLoose(["DYI flow complete - generating output"]))),void this.$15())};b.isAttachmentDownloadInProgressForPlaintextHash=function(a){return this.$7.has(a)};b.isAttachmentDownloadCompleteForPlaintextHash=function(a){return!!this.$5.get(a)};b.isAttachmentDownloadComplete=function(){return this.$7.size===0};b.setMessagesByThreadKey=function(a,b,c){a=this.getMessagesByThreadKey(a);a.set(b,c)};b.getMessagesByThreadKey=function(a){this.$16(a)||this.$8.set(a,new Map());return this.$8.get(a)};b.$16=function(a){return this.$8.has(a)};b.hasMessage=function(a,b){a=this.$8.get(a);return a==null?!1:a.has(b)};b.getThreadIdForThreadKey=function(a){return this.$10.get(a)};b.getThreadKeyForThreadId=function(a){return this.$11.get(a)};b.setThreadMapping=function(a,b){this.$10.set(a,b),this.$11.set(b,a)};b.setThreadMetaDataByThreadKey=function(a,b,c){this.$9.set(a,{participants:b,threadName:c})};b.getThreadMetadataMap=function(){return this.$9};b.setContactNameForContactId=function(a,b){this.$12.set(a,b)};b.getContactNameForContactId=function(a){return this.$12.get(a)};b.getContactNameMap=function(){return this.$12};b.getOutput=function(){var a=this;return Array.from(this.getThreadMetadataMap(),function(b){var c=b[0];b=b[1];var d=a.$16(c);d=d?Array.from(a.getMessagesByThreadKey(c),function(b){b[0];b=b[1];return babelHelpers.extends({},b,{media:Array.from(b.media,function(b){b=a.$13(b);return{uri:b!=null?"./"+b:"Failed to download media"}})})}):[];d=d.map(function(b){var c=b.senderId,d=babelHelpers.objectWithoutPropertiesLoose(b,h);if(c!=null&&d.senderName==="Unknown User"){c=a.getContactNameForContactId(c);if(c!=null)return babelHelpers.extends({},d,{senderName:c})}return b});c=d.sort(function(a,b){return typeof a.timestamp==="number"&&typeof b.timestamp==="number"?a.timestamp-b.timestamp:0});return babelHelpers.extends({},b,{messages:c})})};b.$14=function(){return this.isAttachmentDownloadComplete()&&this.isThreadsRestoreComplete()};b.$17=function(a){switch(a){case 0:return d("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.InProgress;case 1:return d("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Completed;case 2:return d("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Failed;case-1:default:return d("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.NotStarted}};b.updateDYIStatus=async function(a){var b=await this.getDB();await b.runInTransaction(async function(b){await b.encrypted_backups_dyi_backup_restore_status.put({currentStatus:(t||(t=d("LSIntEnum"))).ofNumber(a),pk:(u||(u=d("I64"))).zero})},"readwrite",void 0,void 0,f.id+":521");d("MAWBridge").getBridge().fireAndForget("event","updateDYIStatus",{qplEvent:this.$2,qplInstanceKeyE2E:(b=this.$3)!=null?b:void 0,status:this.$17(a)})};b.$18=async function(){var a=this,b=new Set();this.getContactNameMap().forEach(function(a,c){a==="Unknown User"&&b.add(c)});var c=await this.getDB();c=await d("EncryptedBackupsDYIGenerateThreadMetadata").getAllUnmappedContacts(c,b);c.forEach(function(b){var c=(u||(u=d("I64"))).to_string(b.id);a.setContactNameForContactId(c,b.name)});this.$4.LOG(o||(o=babelHelpers.taggedTemplateLiteralLoose(["Fetched remaining contact names, total of "," contacts"])),this.getContactNameMap().size.toString())};b.$15=async function(){var a=this;this.logDYIQPLPoint("complete_dyi_flow_start");await this.$18();this.$4.LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Generating output"])));var b=this.getOutput(),c=Array.from(this.$5.values());this.$4.LOG(q||(q=babelHelpers.taggedTemplateLiteralLoose(["Generating zip file"])));await d("EncryptedBackupsDYIZipUtils").generateZipFile(b,c,this.$4,function(b,c){a.logDYIQPLPoint(b,c)},async function(){a.logDYIQPLPoint("complete_dyi_flow_end"),await a.updateDYIStatus(1),void a.clear()},async function(b){a.$4.ERROR(r||(r=babelHelpers.taggedTemplateLiteralLoose(["Failed to generate zip file: ",""])),b),a.logDYIQPLPoint("complete_dyi_flow_error"),await a.updateDYIStatus(2),void a.clear()})};b.exitDYIEarly=async function(a,b){b!=null&&this.$4.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["DYI Exiting Early - Found "," instamadillo threads"])),b),this.logDYIQPLPoint("dyi_exit_early",{int:{dyi_threads:b}}),await this.updateDYIStatus(a?2:1),void this.clear()};b.clear=async function(){this.$5=new Map();this.$6=new Set();this.$7=new Set();this.$8=new Map();this.$9=new Map();var a=await d("EncryptedBackupsDYIFileUtils").getRootFolderHandle();await a.removeEntry(d("EncryptedBackupsDYIFileUtils").DyiMediaFolder,{recursive:!0})};b.logDYIQPLPoint=function(a,b){this.$3!=null&&d("MAWQplProxy").sendQplPointThroughBridge(this.$2,a,{annotations:b,instanceKey:this.$3})};return a}();g.initSingleton=a;g.getSingleton=b;g.EncryptedBackupsDYISingleton=e}),98);
__d("EncryptedBackupsDYISingletonFactory",["EncryptedBackupsDYISingleton","WATagsLogger","qpl"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return new(d("EncryptedBackupsDYISingleton").EncryptedBackupsDYISingleton)(a,c("qpl")._(521478596,"1329"),b,d("WATagsLogger").TAGS(["labyrinth_web","labyrinth_dyi",b==null?"":b.toString()]))}function b(a,b){return new(d("EncryptedBackupsDYISingleton").EncryptedBackupsDYISingleton)(a,c("qpl")._(521479842,"2163"),b,d("WATagsLogger").TAGS(["igd_labyrinth_web","igd_dyi",b==null?"":b.toString()]))}g.getMAWEncryptedBackupsDYISingleton=a;g.getIGDEncryptedBackupsDYISingleton=b}),98);
__d("EncryptedBackupsDYIMediaDownloadHandlers",["EncryptedBackupsDYIFileUtils","EncryptedBackupsDYISingleton","FBLogger","WAResultOrError","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";a=async function(a,b,e,f){f=await d("EncryptedBackupsDYIFileUtils").getMediaFolderHandle();b=b.split("/")[1];b=c("uuidv4")()+"."+b;await d("EncryptedBackupsDYIFileUtils").writeFile(f,b,e);f=d("EncryptedBackupsDYISingleton").getSingleton();f.setMediaUrlByPlainTextHash(a,d("EncryptedBackupsDYIFileUtils").DyiMediaFolder+"/"+b);f.deletePlaintextHashFromAttachmentDownloadsInProgress(a);return d("WAResultOrError").makeResult()};b=function(){c("FBLogger")("wmi_eb").debug("[DYIMediaPreviewHandler] Skipping previews for DYI");return Promise.resolve(d("WAResultOrError").makeResult())};g.DYIMediaDownloadHandler=a;g.DYIMediaPreviewHandler=b}),98);
__d("MAWMediaPreviewDownloadManager",["WAResolvable"],(function(a,b,c,d,e,f,g){"use strict";var h=1e4,i=[],j=new Map();function a(a){if(j.has(a))return;l();var b=new(d("WAResolvable").Resolvable)();j.set(a,b);i.push(a)}function b(a,b){var c=j.get(a);if(c==null)return;c.reject(b);k(a)}function c(a){return j.get(a)}function k(a){j["delete"](a)}function l(){if(i.length>=h){var a=i.shift();a!=null&&j["delete"](a)}}function e(){i=[],j.clear()}g.markMediaPreviewAsDownloading=a;g.markMediaPreviewAsFailed=b;g.getMediaPreviewDownloadingResolvable=c;g.removeMediaPreviewDownloadingResolvable=k;g.clear=e}),98);
__d("MAWHandleMediaPreviewBeforeDownloadApi",["MAWMediaPreviewDownloadManager","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a){d("MAWMediaPreviewDownloadManager").markMediaPreviewAsDownloading(a);return(h||(h=b("Promise"))).resolve()};g.handleMediaPreviewBeforeDownload=a}),98);
__d("MAWHandleMediaPreviewDownloadApi",["MAWBridgeTypesCreators","MAWDbMediaTxns","MAWDbMsgTxns","MAWDexieTable","MAWIndexedDb","MAWLoggerUtils","MAWMediaAfterTxns","MAWMediaDownloadStatus","MAWMediaDownloadStatusForUI","MAWMediaPreviewDownloadManager","MAWMediaUtils","MAWTransactionMode","MWFBLogger","WACryptoSha256","WAHashUtils","WAResultOrError","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("MWFBLogger").MWMediaLogger().tags([d("MAWLoggerUtils").Tag.MediaDownload,d("MAWLoggerUtils").Tag.MessageReceive,"MediaPreview"]);a=async function(a,b,e,f){var g=d("WAHashUtils").toPlaintextHash(await d("WACryptoSha256").sha256(b));d("MAWMediaDownloadStatusForUI").sendMediaDownloadStatusToUI({details:"handle_media_download",hash:a,status:c("MAWMediaDownloadStatus").DOWNLOADING,type:"preview"});var h=d("MAWMediaPreviewDownloadManager").getMediaPreviewDownloadingResolvable(a);h!=null&&(h.resolve(new Blob([b],{type:"image/jpeg"})),d("MAWMediaPreviewDownloadManager").removeMediaPreviewDownloadingResolvable(a));return k(a,g,b,e,f)};var k=d("MAWIndexedDb").makeMsgrTransactor({chunk:(b=d("MAWTransactionMode")).READWRITE,media:b.READWRITE,messages:b.READONLY,threads:b.READONLY},"handleMediaPreviewDownload",function(a){return function(b,e,f,g,k){return d("MAWDexieTable").dexieAll([d("MAWDbMediaTxns").maybeGetMediaFromPlaintextHash(a,b),d("MAWDbMsgTxns").maybeGetMsgByProtocolMsgId(a,k)]).then(function(k){var l=k[0],m=k[1];j.DEBUG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Handling preview for main hash ","... preview hash ","..."])),d("WAHashUtils").sanitisePlaintextHash(b),d("WAHashUtils").sanitisePlaintextHash(e));if(l==null){d("MAWMediaDownloadStatusForUI").sendMediaDownloadStatusToUI({details:"missing_media_on_save",hash:b,status:c("MAWMediaDownloadStatus").MANUAL_RETRYABLE_FAILURE,type:"preview"});j.WARN(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Main media for preview is null. Type: ",""])),g);return d("WAResultOrError").makeError("missing-media-on-save")}k=function(){switch(g){case"image":return a.media.update(l.mediaId,babelHelpers.extends({},l,{validatedImageInfo:babelHelpers.extends({},l.validatedImageInfo,{jpegThumbnail:f})}));case"video":return a.media.update(l.mediaId,babelHelpers.extends({},l,{validatedVideoInfo:babelHelpers.extends({},l.validatedVideoInfo,{jpegThumbnail:f})}));default:g;return d("MAWDexieTable").dexieResolve()}};d("MAWMediaDownloadStatusForUI").sendMediaDownloadStatusToUI({details:"handle_media_download_success",hash:b,status:c("MAWMediaDownloadStatus").SUCCESS,type:"preview"});c("gkx")("9695")||(k(),k=function(){return d("MAWDexieTable").dexieResolve()});return k().then(function(){return a.messages.where("msgId").anyOf(l.msgIds).toArray().then(function(b){return a.threads.where("jid").anyOf(b.map(function(a){return a.threadJid})).toArray().then(function(c){return d("MAWDexieTable").dexieAll(c.map(function(c){var e=d("MAWMediaUtils").createHdTypesForBridgeMedia(b);c=d("MAWBridgeTypesCreators").createBridgeMedia({chatJid:c.jid,filteredMsgIds:d("MAWBridgeTypesCreators").getMsgIdsFilteredByJid(b,c.jid),hasMediaForUI:!0,hdTypes:e,media:l,sortOrderMs:m==null?void 0:m.sortOrderMs});return d("MAWMediaAfterTxns").handleNewMediaAfterTxnWithBridgeMedia(a,c,b)})).then(function(){return d("WAResultOrError").makeResult()})})})})})}});g.handleMediaPreviewDownload=a}),98);
__d("MAWHandleMediaPreviewDownloadAsFailedApi",["MAWMediaPreviewDownloadManager","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,c){d("MAWMediaPreviewDownloadManager").markMediaPreviewAsFailed(a,c);return(h||(h=b("Promise"))).resolve()};g.handleMediaPreviewDownloadFailed=a}),98);
__d("MebWAMediaDownloader",["MAWHandleMediaPreviewBeforeDownloadApi","MAWHandleMediaPreviewDownloadApi","MAWHandleMediaPreviewDownloadAsFailedApi","WAAPI","WAIsMediaExpiredError","WALogger","WAStartMediaDownloadQplFlow","WATimeUtils","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(){function a(a,b,c){this.mediaDownloadMetadata=a,this.downloadCallbacks=b,this.waApiDownloadCall=c}var b=a.prototype;b.handle=async function(){var a,b=this.mediaDownloadMetadata.mediaEntry.mediaKeyTimestamp;if(b==null){d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web][WAMediaDownloader] Cannot download media - missing mediaKeyTimestamp"])));return this.handleError()}b=!d("WATimeUtils").happenedWithin(b,29*d("WATimeUtils").DAY_SECONDS);a=(a=this.mediaDownloadMetadata.isUrlRenewed)!=null?a:!1;if(!a&&(b||c("gkx")("23960"))){d("WALogger").LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] downloading media from MI directly"])));return this.handleUrlExpired()}a=this.mediaDownloadMetadata;b=a.hash;var e=a.mediaEntry;a=a.protocolMsgId;b=await this.waApiDownloadCall(b,e,a);if(b.success)return this.downloadCallbacks.onDownloadSuccess({mimeType:b.value.mimeType,plaintext:b.value.plaintext});if(d("WAIsMediaExpiredError").isMediaExpiredError(b.error))return this.handleUrlExpired();else return this.handleError()};b.handleUrlExpired=async function(){var a;await this.downloadCallbacks.onUrlExpired();return(a=this.mediaDownloadHandler)==null?void 0:a.handle()};b.handleError=async function(){var a;await this.downloadCallbacks.onDownloadError();return(a=this.mediaDownloadHandler)==null?void 0:a.handle()};b.getDownloadMetadata=function(){return this.mediaDownloadMetadata};b.setNextHandler=function(a){this.mediaDownloadHandler=a};return a}();b=function(a,b,e){var f=d("WAStartMediaDownloadQplFlow").startMediaDownloadQplFlow({downloadEntry:"MebWAMediaDownloader",msgType:null,protocolMsgId:e,triggerUIView:null});return c("WAAPI").downloadMedia({downloadMediaMetric:f,handleMediaPreviewBeforeDownload:d("MAWHandleMediaPreviewBeforeDownloadApi").handleMediaPreviewBeforeDownload,handleMediaPreviewDownload:d("MAWHandleMediaPreviewDownloadApi").handleMediaPreviewDownload,handleMediaPreviewDownloadFailed:d("MAWHandleMediaPreviewDownloadAsFailedApi").handleMediaPreviewDownloadFailed,hash:a,mediaEntry:b,protocolMsgId:e})};g.MebWAMediaDownloader=a;g.MebWADownloadMediaFromWorker=b}),98);
__d("EncryptedBackupsDYIMessageProcessingUtils",["EncryptedBackupsDYIMediaDownloadHandlers","EncryptedBackupsDYISingleton","FBLogger","MAWBridge","MAWFrontendMediaUtils","MebWAMediaDownloader","WAHashUtils","WAJids","WALongInt","WAMediaUtils","WAProgressiveJpegGetScanLengths","WAResultOrError","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p,q;function a(a,b){return{isUnsent:!1,media:new Set(),reactions:[],senderName:r(a),text:"",timestamp:b!=null?b:0,type:""}}function r(a){var b=d("EncryptedBackupsDYISingleton").getSingleton(),c="Unknown User";if(a!=null){b=b.getContactNameForContactId(a);b!=null&&(c=b)}return c}async function b(a,b,e,f){var g=d("EncryptedBackupsDYISingleton").getSingleton(),l=g.getLogger(),m=l.TAGS([d("WAHashUtils").sanitisePlaintextHash(a)]);c("FBLogger")("wmi_eb").tags(["labyrinth_dyi"]).debug("Sending the media download bridge call for plaintext hash: %s",d("WAHashUtils").sanitisePlaintextHash(a));f=await d("MAWBridge").getBridge().sendAndReceive("backend","dyiDownloadMediaV2",{mediaEntry:f,plaintextHash:a,protocolMsgId:b,sortOrderMs:e});c("FBLogger")("wmi_eb").tags(["labyrinth_dyi"]).debug("Received the media download result from the bridge for plaintext hash: %s, success: %s, error: %s",d("WAHashUtils").sanitisePlaintextHash(a),f.success?"true":"false",f.error);if(f.success){e=f.value;var n=e.unvalidatedMimeType;e=e.validatedResult;n=e.skipValidation?n:e.mimeType;n=await d("EncryptedBackupsDYIMediaDownloadHandlers").DYIMediaDownloadHandler(a,n,e.validatedPlaintext,b);if(!n.success){m.WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Failed to save media: ",", ",""])),n.error,n.payload);l.ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Failed to save media: ",", ",""])),n.error,n.payload);g.deletePlaintextHashFromAttachmentDownloadsInProgress(a);return}}else{m.WARN(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media: ",", ",""])),f.error,f.payload);l.ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media: ",", ",""])),f.error,f.payload);g.deletePlaintextHashFromAttachmentDownloadsInProgress(a);return}}function e(a,b,c,e,f,g,h,i,j,k,r){var s=d("EncryptedBackupsDYISingleton").getSingleton(),t=s.getLogger(),u=t.TAGS([d("WAHashUtils").sanitisePlaintextHash(j)]),v={author:d("WAJids").toMsgrUserJid(h),chat:d("WAJids").toMsgrUserJid(f),externalId:i},w={hash:j,isUrlRenewed:!1,mediaEntry:e,protocolMsgId:v,sortOrderMs:k};h={onDownloadError:function(){u.WARN(l||(l=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media"])));t.ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media"])));s.deletePlaintextHashFromAttachmentDownloadsInProgress(w.hash);return Promise.resolve()},onDownloadSuccess:async function(a){u.LOG(n||(n=babelHelpers.taggedTemplateLiteralLoose(["Successfully downloaded media"])));var b=a.mimeType;a=a.plaintext;await d("EncryptedBackupsDYIMediaDownloadHandlers").DYIMediaDownloadHandler(w.hash,b,a,v)},onUrlExpired:function(){u.LOG(o||(o=babelHelpers.taggedTemplateLiteralLoose(["Media CDN URL has expired and should be renewed"])));return Promise.resolve()}};var x=new(d("MebWAMediaDownloader").MebWAMediaDownloader)(w,h,a),y=e.serverMediaType;e=e.objectId;if(y!=null&&e!=null&&typeof k==="number"){b={backupEntFbid:b,deliveryObjectId:e,hash:j,mediaType:y,messageId:i,productType:c,sortOrder:k,threadId:f,threadKey:g};e={onResignCdnUrlFailure:function(a){u.WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Failed to resign CDN URL: ",""])),a.message);t.ERROR(q||(q=babelHelpers.taggedTemplateLiteralLoose(["Failed to resign CDN URL: ",""])),a.message);s.deletePlaintextHashFromAttachmentDownloadsInProgress(w.hash);return Promise.resolve()},onResignCdnUrlSuccess:async function(){}};j=r(b,e);x.setNextHandler(j);j.setNextHandler(new(d("MebWAMediaDownloader").MebWAMediaDownloader)(w,h,a))}void x.handle()}function f(a,b,c){var e,f,g,h;e=(e=a.integral)==null||(e=e.transport)==null||(e=e.ancillary)==null?void 0:e.mimetype;if(e==null)return d("WAResultOrError").makeError("mime-type-missing");e=d("MAWFrontendMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(e,b).serverMediaType;if(e==null)return d("WAResultOrError").makeError("server-media-type-missing");b=(b=a.integral)==null||(b=b.transport)==null||(b=b.integral)==null?void 0:b.directPath;if(b==null)return d("WAResultOrError").makeError("direct-path-missing");f=(f=a.integral)==null||(f=f.transport)==null||(f=f.integral)==null?void 0:f.fileSha256;if(f==null)return d("WAResultOrError").makeError("plaintext-hash-missing");g=d("WALongInt").maybeNumber((g=a.integral)==null||(g=g.transport)==null||(g=g.integral)==null?void 0:g.mediaKeyTimestamp);if(g==null)return d("WAResultOrError").makeError("media-key-timestamp-missing");var i;if(((h=a.ancillary)==null?void 0:h.scanLengths)!=null&&((h=a.ancillary)==null?void 0:h.scansSidecar)!=null){h=a.ancillary;var j=h.scanLengths;h=h.scansSidecar;i={scanLengths:j.map(d("WAProgressiveJpegGetScanLengths").asProgressiveJpegScanLength),sidecar:h}}var k;if(((j=a.integral)==null||(j=j.transport)==null||(j=j.ancillary)==null||(j=j.thumbnail)==null?void 0:j.downloadableThumbnail)!=null){h=a.integral.transport.ancillary.thumbnail.downloadableThumbnail;j=h.directPath;var l=h.fileEncSha256,m=h.fileSha256,n=h.mediaKey,o=h.mediaKeyTimestamp;h=h.objectId;k={directPath:j,fileEncSha256:l,fileSha256:m,mediaKey:n,mediaKeyTimestamp:d("WALongInt").maybeNumber(o),objectId:h}}o={directPath:b,downloadableThumbnail:k,fileEncSha256:(j=a.integral)==null||(j=j.transport)==null||(j=j.integral)==null?void 0:j.fileEncSha256,filename:c,fileSha256:f,mediaKey:(l=a.integral)==null||(l=l.transport)==null||(l=l.integral)==null?void 0:l.mediaKey,mediaKeyTimestamp:d("WATimeUtils").castToUnixTime(g),objectId:(m=a.integral)==null||(m=m.transport)==null||(m=m.ancillary)==null?void 0:m.objectId,progressiveJpegDetails:i,serverMediaType:e,size:d("WALongInt").maybeNumber((n=a.integral)==null||(n=n.transport)==null||(n=n.ancillary)==null?void 0:n.fileLength)};return d("WAResultOrError").makeResult(d("WAMediaUtils").rawDataToMediaEntry(o))}g.buildBaseDyiMessage=a;g.getSenderName=r;g.downloadMediaWithMediaManager=b;g.startMediaDownloadChain=e;g.decodeMediaEntryFromAttachmentPayload=f}),98);
__d("MAWUnstoredQuotedMsgUtils",["FBLogger","MAWMsgType","WAJids","WAMsgType"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(a==null)return;var b=a.content;a=a.remoteJid;var e;switch(b.type){case d("MAWMsgType").MSG_TYPE.TEXT:e=j(b);break;case d("MAWMsgType").MSG_TYPE.IMAGE:e=k(b);break;case d("MAWMsgType").MSG_TYPE.VIDEO:e=l(b);break;case d("MAWMsgType").MSG_TYPE.PTT:e=m(b);break;case d("MAWMsgType").MSG_TYPE.GIF:e=n(b);break;case d("MAWMsgType").MSG_TYPE.STICKER:e=o(b);break;case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:e=q(b);break;case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:e=r(b);break;case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:e=s(b);break;case d("WAMsgType").NOTE_REPLY:e=p(b);break;case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:e=t(b);break;default:b.type;throw c("FBLogger")("messenger_web").mustfixThrow("For flow")}return{content:e,remoteJid:a}}function i(a){if(d("WAJids").isAuthorSystem(a.author))throw c("FBLogger")("messenger_web").mustfixThrow("A system message cannot be quoted");return{author:a.author,externalId:a.externalId,ts:a.ts}}function j(a){return babelHelpers["extends"]({},i(a),{msgContent:a.msgContent,type:d("MAWMsgType").MSG_TYPE.TEXT})}function k(a){return babelHelpers["extends"]({},i(a),{type:d("MAWMsgType").MSG_TYPE.IMAGE})}function l(a){return babelHelpers["extends"]({},i(a),{type:d("MAWMsgType").MSG_TYPE.VIDEO})}function m(a){return babelHelpers["extends"]({},i(a),{type:d("MAWMsgType").MSG_TYPE.PTT})}function n(a){return babelHelpers["extends"]({},i(a),{type:d("MAWMsgType").MSG_TYPE.GIF})}function o(a){return babelHelpers["extends"]({},i(a),{type:d("MAWMsgType").MSG_TYPE.STICKER})}function p(a){return babelHelpers["extends"]({},i(a),{expirationTs:a.expirationTs,msgContent:a.msgContent,type:d("WAMsgType").NOTE_REPLY})}function q(a){return babelHelpers["extends"]({},i(a),{type:d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE})}function r(a){return babelHelpers["extends"]({},i(a),{type:d("MAWMsgType").MSG_TYPE.UNAVAILABLE})}function s(a){return babelHelpers["extends"]({},i(a),{type:d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL})}function t(a){return babelHelpers["extends"]({},i(a),{type:d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH})}function a(a){return{quote:h(a.quote)}}g.getWithQuoteMsg=a}),98);
__d("MAWUnstoredTypedMsgUtils",["MAWAdminMsgType","MAWDbMsg","MAWMsgType","MAWRavenUtils","MAWUnstoredQuotedMsgUtils","WAJids"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return{ack:a.ack,author:a.id.author,ebTimestampMs:a.ebTimestampMs,externalId:a.id.externalId,reportingMeta:a.reportingMeta,serverTs:a.serverTs,ts:a.ts}}function i(a){return{forwardingScore:a.forwardingScore,isForwarded:a.isForwarded}}function j(a){return{ephemeralSetting:k(a.ephemeralSetting),messageDeleteTs:a.deleteTs,messageExpirationTs:a.expirationTs}}function k(a){if(a==null)return;return{ephemeralExpirationInSec:a.expirationTs,ephemeralLastUpdatedOrSetTimestamp:a.updatedTs}}function a(a,b){return babelHelpers["extends"]({},h(a),i(a),d("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(a),j(a),{altIndex:void 0,collapsibleId:a.collapsibleId,isCollapsed:a.isCollapsed,msgContent:{commands:b.commands,content:(a=b.sentWithMessage)!=null?a:"",mentionedJids:b.mentionedJids},type:d("MAWMsgType").MSG_TYPE.XMA,xmaMessageType:b.targetType})}function b(a){return babelHelpers["extends"]({},h(a),i(a),d("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(a),j(a),{altIndex:void 0,editCount:0,msgContent:a.msgContent,specialTextSize:a.specialTextSize,type:d("MAWMsgType").MSG_TYPE.TEXT})}function c(a){return babelHelpers["extends"]({},h(a),i(a),d("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(a),j(a),{altIndex:void 0,plaintextHash:(a=a.mediaId)!=null?a:void 0,type:d("MAWMsgType").MSG_TYPE.IMAGE})}function e(a){return babelHelpers["extends"]({},h(a),d("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(a),j(a),{altIndex:void 0,ravenEphemeralMediaState:d("MAWRavenUtils").getEphemeralMediaState(a.ravenEphemeralMediaState),ravenEphemeralType:a.ravenEphemeralType,ravenMediaType:a.ravenMediaType,type:d("MAWMsgType").MSG_TYPE.RAVEN})}function f(a){return babelHelpers["extends"]({},h(a),i(a),d("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(a),j(a),{altIndex:void 0,plaintextHash:(a=a.mediaId)!=null?a:void 0,type:d("MAWMsgType").MSG_TYPE.VIDEO})}function l(a){return babelHelpers["extends"]({},h(a),i(a),d("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(a),j(a),{altIndex:void 0,type:d("MAWMsgType").MSG_TYPE.PTT})}function m(a){return{adminMsgContent:a.adminMsgContent,adminType:a.adminType}}function n(a){return babelHelpers["extends"]({},h(a),{altIndex:void 0,author:d("WAJids").AUTHOR_SYSTEM,msgContent:m(a.msgContent),type:d("MAWMsgType").MSG_TYPE.ADMIN})}function o(a){return babelHelpers["extends"]({},h(a),i(a),d("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(a),j(a),{altIndex:void 0,plaintextHash:(a=a.mediaId)!=null?a:void 0,type:d("MAWMsgType").MSG_TYPE.GIF})}function p(a){return babelHelpers["extends"]({},h(a),i(a),d("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(a),j(a),{altIndex:void 0,plaintextHash:(a=a.mediaId)!=null?a:void 0,type:d("MAWMsgType").MSG_TYPE.STICKER})}function q(a){return babelHelpers["extends"]({},h(a),i(a),d("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(a),j(a),{altIndex:void 0,type:d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE})}function r(a){return babelHelpers["extends"]({},h(a),{altIndex:d("MAWDbMsg").FUTUREPROOF_ALT_INDEX,msgContent:a.msgContent,type:d("MAWMsgType").MSG_TYPE.FUTUREPROOF})}function s(a){return babelHelpers["extends"]({},h(a),{altIndex:void 0,ebTimestampMs:a.ebTimestampMs,revokedExternalId:a.revokedExternalId,type:d("MAWMsgType").MSG_TYPE.REVOKED})}function t(a){return{adminMsgContent:a.adminMsgContent,adminType:a.adminType}}function u(a){return babelHelpers["extends"]({},h(a),{altIndex:void 0,msgContent:t(a.msgContent),type:d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN})}function v(a){return{adminMsgContent:a.adminMsgContent,adminType:a.adminType,screenshotActionType:a.screenshotActionType,version:a.version}}function w(a){return babelHelpers["extends"]({},h(a),{altIndex:void 0,msgContent:v(a.msgContent),type:d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION})}function x(a){return{adminType:a.adminType,authorName:a.authorName}}function y(a){return babelHelpers["extends"]({},h(a),{altIndex:void 0,msgContent:x(a.msgContent),type:d("MAWMsgType").MSG_TYPE.ICDC_ALERT})}function z(a){return babelHelpers["extends"]({},h(a),d("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(a),j(a),{altIndex:void 0,type:d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE})}function A(a,b){b=b.receiverFetchId;return babelHelpers["extends"]({},h(a),i(a),d("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(a),j(a),{altIndex:void 0,receiverFetchId:b,type:d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH})}function B(a,b){var c=a.id.author===d("WAJids").AUTHOR_ME;b=[b.name];c||b.unshift(a.id.author!==d("WAJids").AUTHOR_ME&&a.id.author!==d("WAJids").AUTHOR_SYSTEM?d("WAJids").userIdFromJid(a.id.author):a.id.author);c=c?d("MAWAdminMsgType").CURRENT_USER_CREATED_POLL:d("MAWAdminMsgType").PARTICIPANT_CREATED_POLL;return babelHelpers["extends"]({},h(a),{altIndex:void 0,msgContent:{adminMsgContent:b,adminType:c,version:1},type:d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE})}function C(a){return babelHelpers["extends"]({},h(a),{altIndex:void 0,type:d("MAWMsgType").MSG_TYPE.GROUP_POLL_UPDATE})}g.getXMAMsg=a;g.getTextMsg=b;g.getImageMsg=c;g.getRavenMsg=e;g.getVideoMsg=f;g.getPttMsg=l;g.getAdminMsg=n;g.getGifMsg=o;g.getStickerMsg=p;g.getDocumentFileMsg=q;g.getFutureproofMsg=r;g.getRevokedMsg=s;g.getEphemeralSettingAdminMsg=u;g.getEphemeralScreenshotActionMsg=w;g.getICDCAlertMsg=y;g.getBumpExistingMessageMsg=z;g.getReceiverFetchMsg=A;g.getGroupPollCreateMsg=B;g.getGroupPollUpdateMsg=C}),98);
__d("MAWUnstoredMsgUtils",["FBLogger","MAWMsgType","MAWUnstoredTypedMsgUtils","qex"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.unstoredGroupPollCreateInfo,e=a.unstoredMsg,f=a.unstoredReceiverFetchInfo;a=a.unstoredXMA;if(e==null)return null;switch(e.type){case d("MAWMsgType").MSG_TYPE.TEXT:return d("MAWUnstoredTypedMsgUtils").getTextMsg(e);case d("MAWMsgType").MSG_TYPE.IMAGE:return d("MAWUnstoredTypedMsgUtils").getImageMsg(e);case d("MAWMsgType").MSG_TYPE.VIDEO:return d("MAWUnstoredTypedMsgUtils").getVideoMsg(e);case d("MAWMsgType").MSG_TYPE.PTT:return d("MAWUnstoredTypedMsgUtils").getPttMsg(e);case d("MAWMsgType").MSG_TYPE.ADMIN:return d("MAWUnstoredTypedMsgUtils").getAdminMsg(e);case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:return d("MAWUnstoredTypedMsgUtils").getFutureproofMsg(e);case d("MAWMsgType").MSG_TYPE.REVOKED:return d("MAWUnstoredTypedMsgUtils").getRevokedMsg(e);case d("MAWMsgType").MSG_TYPE.GIF:return d("MAWUnstoredTypedMsgUtils").getGifMsg(e);case d("MAWMsgType").MSG_TYPE.STICKER:return d("MAWUnstoredTypedMsgUtils").getStickerMsg(e);case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:return d("MAWUnstoredTypedMsgUtils").getDocumentFileMsg(e);case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:return d("MAWUnstoredTypedMsgUtils").getEphemeralSettingAdminMsg(e);case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:return d("MAWUnstoredTypedMsgUtils").getEphemeralScreenshotActionMsg(e);case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:return d("MAWUnstoredTypedMsgUtils").getICDCAlertMsg(e);case d("MAWMsgType").MSG_TYPE.XMA:if((a==null?void 0:a.xma)==null)throw c("FBLogger")("messenger_web").mustfixThrow("XMA content cannot be parsed without XMA payload");return d("MAWUnstoredTypedMsgUtils").getXMAMsg(e,a==null?void 0:a.xma);case d("MAWMsgType").MSG_TYPE.RAVEN:return d("MAWUnstoredTypedMsgUtils").getRavenMsg(e);case d("MAWMsgType").MSG_TYPE.RAVEN_ACTION:case d("MAWMsgType").MSG_TYPE.REACTION:case d("MAWMsgType").MSG_TYPE.EDIT_ACTION:return null;case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:return d("MAWUnstoredTypedMsgUtils").getBumpExistingMessageMsg(e);case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:if(f==null)throw c("FBLogger")("messenger_web").mustfixThrow("Receiver Fetch Info cannot be null for Receiver Fetch Msg");return d("MAWUnstoredTypedMsgUtils").getReceiverFetchMsg(e,f);case d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:if(!c("qex")._("3169"))throw c("FBLogger")("messenger_web").mustfixThrow("Group polls are not yet supported");if(b==null)throw c("FBLogger")("messenger_web").mustfixThrow("Poll Create Info cannot be null for Poll Create Msg");return d("MAWUnstoredTypedMsgUtils").getGroupPollCreateMsg(e,b);case d("MAWMsgType").MSG_TYPE.GROUP_POLL_UPDATE:if(!c("qex")._("3169"))throw c("FBLogger")("messenger_web").mustfixThrow("Group polls are not yet supported");return d("MAWUnstoredTypedMsgUtils").getGroupPollUpdateMsg(e);default:e.type;return null}}function b(a){if(a==null)return null;switch(a.type){case d("MAWMsgType").MSG_TYPE.TEXT:return d("MAWUnstoredTypedMsgUtils").getTextMsg(a);case d("MAWMsgType").MSG_TYPE.GIF:return d("MAWUnstoredTypedMsgUtils").getGifMsg(a);case d("MAWMsgType").MSG_TYPE.STICKER:return d("MAWUnstoredTypedMsgUtils").getStickerMsg(a);default:return null}}function e(a){a=a.unstoredMsg;if(!a||a.type!==d("MAWMsgType").MSG_TYPE.REACTION)return null;a=a;return{ack:a.ack,author:a.id.author,externalId:a.id.externalId,groupingKey:a.groupingKey,reaction:a.reaction,reactToAuthor:a.reactToAuthor,reactToExternalId:a.reactToExternalId,senderTimestampMs:a.senderTimestampMs,threadJid:a.id.chat,ts:a.ts}}function f(a){a=a.unstoredMsg;if(!a||a.type!==d("MAWMsgType").MSG_TYPE.RAVEN_ACTION)return null;a=a;return{ack:a.ack,actionTimestamp:a.actionTimestamp,actionType:a.actionType,author:a.id.author,externalId:a.id.externalId,ravenActionToMsgExternalId:a.ravenActionToMsgExternalId,ts:a.ts,type:a.type}}function h(a){a=a.unstoredIncomingGroupInvite;return!a?null:babelHelpers["extends"]({},a)}function i(a){return a==null?null:{ack:a.ack,author:a.id.author,editMsgContent:a.editMsgContent,externalId:a.id.externalId,originalMsgExternalId:a.originalMsgExternalId,reportingMeta:a.reportingMeta,serverTs:a.serverTs,specialTextSize:a.specialTextSize,ts:a.ts,type:a.type}}function j(a){a=a.unstoredReceiverFetchInfo;return a==null?null:babelHelpers["extends"]({},a,{type:"sticker"})}function k(a){a=a.unstoredGroupPollCreateInfo;return a==null?null:babelHelpers["extends"]({},a,{latestSenderTimestampsMs:new Map()})}function l(a){a=a.unstoredGroupPollUpdateInfo;return a==null?null:{encryptedMessage:a.pollUpdateMessage}}g.getUnstoredMsg=a;g.getUnstoredAssociatedMsg=b;g.getUnstoredReaction=e;g.getUnstoredRavenActionMsg=f;g.getGroupInvite=h;g.getUnstoredEditActionMsg=i;g.getUnstoredReceiverFetchInfo=j;g.getUnstoredGroupPollCreateInfo=k;g.getUnstoredDbGroupPollUpdateInfo=l}),98);
__d("MAWUnstoredMediaUtils",["MAWUnstoredMsgUtils","WASortedLists"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a==null?null:{accessibilitySummaryText:a.accessibilitySummaryText,mediaEntry:a.mediaEntry,mediaType:a.mediaType,msgIds:d("WASortedLists").emptySet(),plaintextHash:a.plaintextHash,size:a.size,ts:a.ts,validatedAudioInfo:a.validatedAudioInfo,validatedDocumentFileInfo:a.validatedDocumentFileInfo,validatedImageInfo:a.validatedImageInfo,validatedVideoInfo:a.validatedVideoInfo}}function a(a){a=a.unstoredXMA;if(a==null)return;var b=a.unstoredAssociatedMedia,c=a.unstoredAssociatedMsg,e=a.unstoredFavicon,f=a.unstoredHeaderMedia,g=a.unstoredPreviews;a=a.xma;return{unstoredAssociatedMedia:(b=h(b))!=null?b:void 0,unstoredAssociatedMsg:(b=d("MAWUnstoredMsgUtils").getUnstoredAssociatedMsg(c))!=null?b:void 0,unstoredDbXMA:{author:a.author,contentRef:a.contentRef,ctas:a.ctas,defaultCTA:a.defaultCTA,externalId:a.externalId,headerTitle:a.headerTitle,isTombstoned:a.isTombstoned,maxSubtitleNumOfLines:a.maxSubtitleNumOfLines,maxTitleNumOfLines:a.maxTitleNumOfLines,overlayDescription:a.overlayDescription,overlayIconGlyph:a.overlayIconGlyph,overlayTitle:a.overlayTitle,subtitleText:a.subtitleText,targetExpiringAtSec:a.targetExpiringAtSec,targetId:a.targetId,targetType:a.targetType,targetUsername:a.targetUsername,threadJid:a.threadJid,titleText:a.titleText,xmaDataclass:a.xmaDataclass,xmaLayoutType:a.xmaLayoutType},unstoredFavicon:(c=h(e))!=null?c:void 0,unstoredHeaderMedia:(b=h(f))!=null?b:void 0,unstoredPreviews:g?g.map(function(a){return h(a)}).filter(Boolean):void 0}}g.getUnstoredMedia=h;g.getUnstoredXMA=a}),98);
__d("MAWUnstoredContentToUnstoredDbContentUtils",["MAWUnstoredMediaUtils","MAWUnstoredMsgUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b,c=(b=d("MAWUnstoredMsgUtils")).getUnstoredMsg(a),e=d("MAWUnstoredMediaUtils").getUnstoredMedia(a.unstoredMedia),f=b.getUnstoredReaction(a),g=b.getUnstoredRavenActionMsg(a),h=d("MAWUnstoredMediaUtils").getUnstoredXMA(a),i=b.getGroupInvite(a),j=b.getUnstoredEditActionMsg(a.unstoredEditMsg),k=b.getUnstoredReceiverFetchInfo(a),l=b.getUnstoredGroupPollCreateInfo(a);b=b.getUnstoredDbGroupPollUpdateInfo(a);if(i==null)return{contentTypeForLogging:a.contentTypeForLogging,unstoredDbEditActionMsg:j,unstoredDbGroupPollCreateInfo:l,unstoredDbGroupPollUpdateInfo:b,unstoredDbMedia:e,unstoredDbMsg:c,unstoredDbRavenActionMsg:g,unstoredDbReaction:f,unstoredDbReceiverFetchInfo:k,unstoredXMA:h,xmaTargetTypeForLogging:a.xmaTargetTypeForLogging};else return{contentTypeForLogging:a.contentTypeForLogging,unstoredDbEditActionMsg:j,unstoredDbGroupPollCreateInfo:l,unstoredDbGroupPollUpdateInfo:b,unstoredDbMedia:e,unstoredDbMsg:c,unstoredDbRavenActionMsg:g,unstoredDbReaction:f,unstoredDbReceiverFetchInfo:k,unstoredIncomingDbGroupInvite:i,unstoredXMA:h,xmaTargetTypeForLogging:a.xmaTargetTypeForLogging}}g.unstoredContentToUnstoredDbContent=a}),98);
__d("MAWHandleEchoProtobufsRestoreApi",["EBLogger","EchoMessageMediaFieldUtils","EncryptedBackupsDYIMessageProcessingUtils","LSMEBTaskCreationSource","MAWJids","MAWMsg","MAWMsgType","MAWODSProxy","MAWUnstoredContentToUnstoredDbContentUtils","MessageBackupSupplementalKeyGenerator","WAAckLevel","WAArmadilloApplication.pb","WAArmadilloBackupMessage.pb","WABase64","WAConsumerApplication.pb","WAGlobals","WAHashUtils","WAJids","WAMediaTransport.pb","WAMsgApplication.pb","WAMsgType","WAOdsEnums","WAParseMediaTransportProtocol","WAParseMessageApplication","WAStanzaUtils","WATimeUtils","decodeProtobuf","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=d("EBLogger").EBLogger().tags(["ProtobufRestore"]);function a(a){var b=a.isMediaGalleryRestore,e=a.taskSource;b!=null&&b?(d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.EB_RESTORE,key:"is_media_gallery_restore_param"}),D.WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["isMediaGalleryRestore is deprecated. Consider using taskSource insted"]))),b=c("LSMEBTaskCreationSource").MEDIA_GALLERY_RESTORE):b=e!=null?e:c("LSMEBTaskCreationSource").UNKNOWN;return babelHelpers["extends"]({},a,{isMediaGalleryRestore:void 0,taskSource:b})}function E(a,b,c){c={author:c,chat:b,externalId:a};return c}function F(a,b,c,e,f,g,h,n,o,p,q,r,s,t,u,v){if(a===d("MAWMsgType").MSG_TYPE.TEXT)if(h==null){D.MUSTFIX(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Text content cannot be null for msg type text - unable to restore msg"])));return}else{h={ack:c===d("WAJids").AUTHOR_ME?d("WAAckLevel").ACK.SENT:d("WAAckLevel").ACK.RECEIVED,forwardingScore:g,id:e,isForwarded:f,msgContent:{content:h,mentionedJids:n!=null?n.map(d("WAJids").validateUserJid).filter(Boolean):void 0},ts:b,type:d("MAWMsgType").MSG_TYPE.TEXT};return h}else if(a===d("MAWMsgType").MSG_TYPE.VIDEO){n={ack:c===d("WAJids").AUTHOR_ME?d("WAAckLevel").ACK.SENT:d("WAAckLevel").ACK.RECEIVED,forwardingScore:g,id:e,isForwarded:f,mediaId:void 0,ts:b,type:d("MAWMsgType").MSG_TYPE.VIDEO};return n}else if(a===d("MAWMsgType").MSG_TYPE.GIF){h={ack:c===d("WAJids").AUTHOR_ME?d("WAAckLevel").ACK.SENT:d("WAAckLevel").ACK.RECEIVED,forwardingScore:g,id:e,isForwarded:f,mediaId:void 0,ts:b,type:d("MAWMsgType").MSG_TYPE.GIF};return h}else if(a===d("MAWMsgType").MSG_TYPE.IMAGE){n={ack:c===d("WAJids").AUTHOR_ME?d("WAAckLevel").ACK.SENT:d("WAAckLevel").ACK.RECEIVED,forwardingScore:g,id:e,isForwarded:f,mediaId:void 0,ts:b,type:d("MAWMsgType").MSG_TYPE.IMAGE};return n}else if(a===d("MAWMsgType").MSG_TYPE.STICKER){h={ack:c===d("WAJids").AUTHOR_ME?d("WAAckLevel").ACK.SENT:d("WAAckLevel").ACK.RECEIVED,forwardingScore:g,id:e,isForwarded:f,mediaId:void 0,ts:b,type:d("MAWMsgType").MSG_TYPE.STICKER};return h}else if(a===d("MAWMsgType").MSG_TYPE.PTT){n={ack:c===d("WAJids").AUTHOR_ME?d("WAAckLevel").ACK.SENT:d("WAAckLevel").ACK.RECEIVED,forwardingScore:g,id:e,isForwarded:f,mediaId:void 0,ts:b,type:d("MAWMsgType").MSG_TYPE.PTT};return n}else if(a===d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE){h={ack:c===d("WAJids").AUTHOR_ME?d("WAAckLevel").ACK.SENT:d("WAAckLevel").ACK.RECEIVED,forwardingScore:g,id:e,isForwarded:f,mediaId:void 0,ts:b,type:d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE};return h}else if(a===d("MAWMsgType").MSG_TYPE.XMA){n={ack:c===d("WAJids").AUTHOR_ME?d("WAAckLevel").ACK.SENT:d("WAAckLevel").ACK.RECEIVED,forwardingScore:g,id:e,isForwarded:f,ts:b,type:d("MAWMsgType").MSG_TYPE.XMA};return n}else if(a===d("MAWMsgType").MSG_TYPE.REVOKED){if(o==null){D.MUSTFIX(j||(j=babelHelpers.taggedTemplateLiteralLoose(["No revoked msg external id found for revoked msg"])));return}h={ack:c===d("WAJids").AUTHOR_ME?d("WAAckLevel").ACK.SENT:d("WAAckLevel").ACK.RECEIVED,ebTimestampMs:null,id:e,msgContent:void 0,revokedExternalId:o,ts:b,type:d("MAWMsgType").MSG_TYPE.REVOKED,unsendMsgContentDeleteTs:b};return h}else if(a===d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE){n={ack:d("WAAckLevel").ACK.SENT,id:e,ts:b,type:d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE};return n}else if(a===d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH){o={ack:c===d("WAJids").AUTHOR_ME?d("WAAckLevel").ACK.SENT:d("WAAckLevel").ACK.RECEIVED,forwardingScore:g,id:e,isForwarded:f,ts:b,type:d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH};return o}else if(a===d("MAWMsgType").MSG_TYPE.RAVEN){if(p==null){D.MUSTFIX(k||(k=babelHelpers.taggedTemplateLiteralLoose(["No raven msg ephemeral type found for raven msg"])));return}if(q==null){D.MUSTFIX(l||(l=babelHelpers.taggedTemplateLiteralLoose(["No raven msg media type found for raven msg"])));return}h={ack:c===d("WAJids").AUTHOR_ME?d("WAAckLevel").ACK.SENT:d("WAAckLevel").ACK.RECEIVED,id:e,mediaId:r,ravenEphemeralMediaState:d("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN,ravenEphemeralType:p,ravenMediaType:q,ts:b,type:d("MAWMsgType").MSG_TYPE.RAVEN};return h}else if(a===d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE){if(s==null||t==null||u==null||v==null){D.MUSTFIX(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] One of the mandatory fields is missing for the group poll creation msg"])));return}n={ack:c===d("WAJids").AUTHOR_ME?d("WAAckLevel").ACK.SENT:d("WAAckLevel").ACK.RECEIVED,id:e,ts:b,type:d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE};return n}}function b(a,b,c,e,f){var g,h,i=a.metadata,j=a.msgType;if(i==null){D.MUSTFIX(n||(n=babelHelpers.taggedTemplateLiteralLoose(["Missing required metadata, unable to create db msg from protobuf"])));return}if(j==null){D.MUSTFIX(o||(o=babelHelpers.taggedTemplateLiteralLoose(["Missing required msg type, unable to create db msg from protobuf"])));return}var k=i.messageId;i=i.senderId;g=(g=a.decodedPayload)==null?void 0:g.text;h=(h=a.decodedPayload)==null?void 0:h.mentionedJid;if(k==null){D.MUSTFIX(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Missing required message id, unable to create db msg from protobuf"])));return}if(i==null){D.MUSTFIX(q||(q=babelHelpers.taggedTemplateLiteralLoose(["Missing required author, unable to create db msg from protobuf"])));return}var l=d("WATimeUtils").castMilliSecondsToUnixTime(a.sortOrderMs);i=d("MAWJids").toUserJid(i);var m=d("WAStanzaUtils").toStanzaId(k),t=i===c?d("WAJids").AUTHOR_ME:i,u=E(m,b,i);if(a.editMsgData.length>0){var v=l;a.editMsgData.forEach(function(a){var b;if(a.ts>v&&((b=a.editMsgContent.message)==null?void 0:b.text)!=null){v=a.ts;g=(b=a.editMsgContent.message)==null?void 0:b.text;h=(b=a.editMsgContent.message)==null?void 0:b.mentionedJid}})}u=F(j,l,t,u,a.isForwarded,a.forwardingScore,g,h,a.revokedMsgExternalId,a.ravenMsgEphemeralType,a.ravenMsgMediaType,(l=a.ravenUnstoredMedia)==null?void 0:l.plaintextHash,(t=a.groupPollInfo)==null?void 0:t.encKey,(u=a.groupPollInfo)==null?void 0:u.name,(l=a.groupPollInfo)==null?void 0:l.options,(t=a.groupPollInfo)==null?void 0:t.selectableOptionsCount);if(u==null){D.MUSTFIX(r||(r=babelHelpers.taggedTemplateLiteralLoose(["Missing required fields, unable to create db msg from protobuf for thread jid "," and otid ",""])),b,m);return}var w;if(a.xmaData!=null&&((l=a.xmaData)==null?void 0:l.targetType)!=null){l={author:i,externalId:m,targetType:(t=a.xmaData)==null?void 0:t.targetType,threadJid:b};w={unstoredAssociatedMedia:void 0,unstoredAssociatedMsg:void 0,unstoredFavicon:void 0,unstoredHeaderMedia:void 0,unstoredPreviews:void 0,xma:l}}i={unstoredGroupPollCreateInfo:a.groupPollInfo,unstoredMedia:void 0,unstoredMsg:u,unstoredQuotedMedia:void 0,unstoredReceiverFetchInfo:a.receiverFetchInfo,unstoredXMA:w};u.type===d("MAWMsgType").MSG_TYPE.RAVEN&&a.ravenUnstoredMedia!=null&&(i.unstoredMedia=a.ravenUnstoredMedia);t=d("MAWUnstoredContentToUnstoredDbContentUtils").unstoredContentToUnstoredDbContent(i);if(t.unstoredDbMsg!=null){b=t.unstoredDbMsg;b.sortOrderMs=a.sortOrderMs;b.serverTs=d("WATimeUtils").castToUnixTime(a.sortOrderMs/1e3);a.noteReply!=null&&(b.quote={content:a.noteReply,remoteJid:void 0});l=e.get(k);b.author!=null&&c===b.author&&b.author!==d("WAJids").AUTHOR_SYSTEM&&(b.author=d("WAJids").AUTHOR_ME);l!=null&&(b.quoteExternalId=d("WAStanzaUtils").toStanzaId(l));j===d("MAWMsgType").MSG_TYPE.TEXT&&(b.editCount=a.editMsgData.length);u={author:b.author,stanzaId:m,unstoredDbContent:t};t.unstoredDbMedia!=null&&f!=null&&f.set(m,t.unstoredDbMedia);return u}D.MUSTFIX(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Failed to create db msg from protobuf"])))}function G(a){switch(a){case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE:return d("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.IMAGE_JPEG;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF:return d("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.GIF;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER:return d("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.STICKER;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO:return d("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.AUDIO_MP4;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.AUDIO:return d("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.AUDIO_WAV;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.XMA_IMAGE:return d("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.IMAGE_JPEG;default:return null}}function H(a){switch(a){case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE:return d("EchoMessageMediaFieldUtils").AttachmentType.IMAGE;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF:return d("EchoMessageMediaFieldUtils").AttachmentType.GIF;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER:return d("EchoMessageMediaFieldUtils").AttachmentType.STICKER;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO:return d("EchoMessageMediaFieldUtils").AttachmentType.VIDEO;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.AUDIO:return d("EchoMessageMediaFieldUtils").AttachmentType.PTT;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.XMA_IMAGE:return d("EchoMessageMediaFieldUtils").AttachmentType.XMA;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.DOCUMENT:return d("EchoMessageMediaFieldUtils").AttachmentType.DOCUMENT;default:return null}}function I(){try{return WorkerGlobalScope!==void 0&&self instanceof WorkerGlobalScope}catch(a){return!1}}function J(a){var b,e=I()?d("WAGlobals").getConfig().isOctetStreamAttachmentMimeTypeEnabled():c("gkx")("4644");switch(a){case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE:b="image/jpeg";break;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.AUDIO:b="audio/wav";break;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO:b="video/mp4";break;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF:b="image/gif";break;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER:b="image/webp";break;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.XMA_IMAGE:b="image/jpeg";break;case d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.DOCUMENT:b=e?"application/octet-stream":"application/pdf";break;default:D.MUSTFIX(t||(t=babelHelpers.taggedTemplateLiteralLoose(["Unsupported media type, cannot get mimetype for attachment"])))}return b}function K(a,b,c){var e,f,g,h,i,j,k,l,m,n;b=b;var o=a.ancillary,p=a.integral,q=p==null||(e=p.transport)==null||(e=e.integral)==null?void 0:e.fileSha256,r=p==null||(f=p.transport)==null||(f=f.integral)==null?void 0:f.fileEncSha256,s=p==null||(g=p.transport)==null||(g=g.integral)==null?void 0:g.mediaKey,t=(p==null||(h=p.transport)==null||(h=h.integral)==null?void 0:h.mediaKeyTimestamp)!=null?typeof (p==null||(i=p.transport)==null?void 0:i.integral.mediaKeyTimestamp)==="number"?p==null||(j=p.transport)==null?void 0:j.integral.mediaKeyTimestamp:void 0:void 0,w=o==null?void 0:o.gifPlayback;w!=null&&w&&(b=d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF);w=p==null||(k=p.transport)==null||(k=k.ancillary)==null||(k=k.thumbnail)==null?void 0:k.thumbnailHeight;var x=p==null||(l=p.transport)==null||(l=l.ancillary)==null||(l=l.thumbnail)==null?void 0:l.thumbnailWidth,y=G(b),z=H(b);if(z===null){D.MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Invalid attachment type, cannot restore attachment"])));return}a=d("EncryptedBackupsDYIMessageProcessingUtils").decodeMediaEntryFromAttachmentPayload(a,z===d("EchoMessageMediaFieldUtils").AttachmentType.XMA,c);a.success||D.WARN(v||(v=babelHelpers.taggedTemplateLiteralLoose(["Cannot generate media entry data, ",""])),a.error);z={attachmentObjectId:p==null||(m=p.transport)==null||(m=m.ancillary)==null?void 0:m.objectId,attachmentType:z,directPath:p==null||(n=p.transport)==null||(n=n.integral)==null?void 0:n.directPath,encryptedHash:r!=null?d("WAHashUtils").toPlaintextHash(r):void 0,filename:c,height:o==null?void 0:o.height,mediaEntryData:a.value,mediaKey:s!=null?d("WABase64").encodeB64UrlSafe(s):void 0,mediaKeyTimestamp:t,mediaPlayableDuration:o==null?void 0:o.seconds,plaintextHash:q!=null?d("WAHashUtils").toPlaintextHash(q):void 0,width:o==null?void 0:o.width,xAttachmentType:b,xContentType:"full"};p=J(b);p!=null&&(z.mediaContentType=p);y!=null&&(z.previewContentType=y,z.previewContentHeight=w,z.previewContentWidth=x);return d("EchoMessageMediaFieldUtils").convertMediaMetadataDetailsToMediaMetadata(z,"protobuf")}function L(a,b,c){var e;b=K(a,b,c);if(b==null)return{mediaMetadata:void 0,previewMetadata:null};c=a.integral;a=null;c=c==null||(e=c.transport)==null||(e=e.ancillary)==null||(e=e.thumbnail)==null?void 0:e.downloadableThumbnail;if(c!=null){var f=c.fileSha256,g=c.fileEncSha256,h=c.mediaKey,i=typeof c.mediaKeyTimestamp==="number"?c.mediaKeyTimestamp:void 0;a={attachmentObjectId:c.objectId,attachmentType:d("EchoMessageMediaFieldUtils").AttachmentType.IMAGE,directPath:c.directPath,encryptedHash:g!=null?d("WAHashUtils").toPlaintextHash(g):void 0,filename:void 0,height:void 0,mediaKey:h!=null?d("WABase64").encodeB64UrlSafe(h):void 0,mediaKeyTimestamp:i,mediaPlayableDuration:void 0,plaintextHash:f!=null?d("WAHashUtils").toPlaintextHash(f):void 0,width:void 0,xAttachmentType:d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.MESSENGER_PREVIEW,xContentType:"preview"};return{mediaMetadata:b,previewMetadata:d("EchoMessageMediaFieldUtils").convertMediaMetadataDetailsToMediaMetadata(a,"protobuf")}}return{mediaMetadata:b,previewMetadata:null}}function M(a,b,c,e,f,g){g===void 0&&(g=null),b!=null&&a!=null&&(c.push({mediaMetadata:b,mediaRestoreType:e,previewMetadata:g}),f.set(d("WAStanzaUtils").toStanzaId(a),c))}function N(a){switch(a){case 0:return d("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE;case 1:return d("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY;case 2:return d("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT;default:return void 0}}function O(a,b,c,e,f,g,h,i,j,k,l){var m,n,o,p,q,r,s,t,u,v=Q(a,g,h,i),B=v==null||(m=v.obj.payload)==null?void 0:m.content,C={editMsgData:[],externalId:e,forwardingScore:(n=v==null||(o=v.metadata)==null?void 0:o.forwardingScore)!=null?n:0,isForwarded:(n=v==null||(p=v.metadata)==null?void 0:p.isForwarded)!=null?n:!1,metadata:a.metadata,reactionData:[],sortOrderMs:b,unknownFieldCount:a.$$unknownFieldCount},E=[];if(B!=null){if(B.messageText!=null){C.msgType=d("MAWMsgType").MSG_TYPE.TEXT;C.decodedPayload=B.messageText;return C}else if(B.extendedContentMessage!=null){C.msgType=d("MAWMsgType").MSG_TYPE.XMA;C.xmaData=B.extendedContentMessage;if(((n=B.extendedContentMessage)==null?void 0:n.headerImage)!=null){n=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAMediaTransport.pb").ImageTransportSpec,(b=B.extendedContentMessage)==null?void 0:b.headerImage.payload);b=K(n,d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE);M(e,b,E,"xma_header",j)}if(((n=B.extendedContentMessage)==null?void 0:n.favicon)!=null){n=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAMediaTransport.pb").ImageTransportSpec,(b=B.extendedContentMessage)==null?void 0:b.favicon.payload);b=K(n,d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE);M(e,b,E,"xma_favicon",j)}if(((n=B.extendedContentMessage)==null?void 0:n.previews)!=null){(b=B.extendedContentMessage)==null||b.previews.forEach(function(a){a=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAMediaTransport.pb").ImageTransportSpec,a.payload);a=K(a,d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE);C.mediaMetadata=a;M(e,a,E,"xma_preview",j)})}return C}else if(B.audioMessage!=null){b=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").AudioTransportSpec,(n=B.audioMessage)==null||(n=n.audio)==null?void 0:n.payload);n=K(b,d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.AUDIO);C.msgType=d("MAWMsgType").MSG_TYPE.PTT;C.mediaMetadata=n;M(e,n,E,"attachment",j);return C}else if(B.videoMessage!=null){b=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").VideoTransportSpec,(b=B.videoMessage)==null||(b=b.video)==null?void 0:b.payload);b=L(b,d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO);var F=b.mediaMetadata;b=b.previewMetadata;n=F;n!=null&&n.xAttachmentType===d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF?C.msgType=d("MAWMsgType").MSG_TYPE.GIF:C.msgType=d("MAWMsgType").MSG_TYPE.VIDEO;C.mediaMetadata=n;M(e,n,E,"attachment",j,b);return C}else if(B.imageMessage!=null){b=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").ImageTransportSpec,(F=B.imageMessage)==null||(F=F.image)==null?void 0:F.payload);F=L(b,d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE);b=F.mediaMetadata;F=F.previewMetadata;n=b;C.msgType=d("MAWMsgType").MSG_TYPE.IMAGE;C.mediaMetadata=n;M(e,n,E,"attachment",j,F);return C}else if(B.stickerMessage!=null){F=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").StickerTransportSpec,(b=B.stickerMessage)==null||(b=b.sticker)==null?void 0:b.payload);if(((b=F.integral)==null?void 0:b.receiverFetchId)!=null){b=d("WAParseMediaTransportProtocol").parseStickerReceiverFetchInfo(F);if(b==null){D.MUSTFIX(w||(w=babelHelpers.taggedTemplateLiteralLoose(["[MAWHandleEchoProtobufsRestoreApi] consumerMessage has no sticker receiver fetch info"])));return C}C.msgType=d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH;C.receiverFetchInfo=b;return C}n=K(F,d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER);C.msgType=d("MAWMsgType").MSG_TYPE.STICKER;C.mediaMetadata=n;M(e,n,E,"attachment",j);return C}else if(B.documentMessage!=null){F=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").DocumentTransportSpec,(b=B.documentMessage)==null||(b=b.document)==null?void 0:b.payload);n=K(F,d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.DOCUMENT,(b=B.documentMessage)==null?void 0:b.fileName);C.msgType=d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE;C.mediaMetadata=n;M(e,n,E,"attachment",j);return C}}else if((v==null||(q=v.obj.payload)==null||(q=q.applicationData)==null?void 0:q.revoke)!=null){var G;F=v==null||(G=v.obj.payload)==null||(G=G.applicationData)==null||(G=G.revoke)==null||(G=G.key)==null?void 0:G.id;if(F==null)D.MUSTFIX(x||(x=babelHelpers.taggedTemplateLiteralLoose(["Unable to retrieve revoked message external id"])));else{C.revokedMsgExternalId=d("WAStanzaUtils").toStanzaId(F);C.msgType=d("MAWMsgType").MSG_TYPE.REVOKED;return C}}if((v==null||(r=v.obj.payload)==null||(r=r.content)==null?void 0:r.bumpExistingMessage)!=null){var H;B=v==null||(H=v.obj.payload)==null||(H=H.content)==null?void 0:H.bumpExistingMessage;F=(b=B.key)==null?void 0:b.id;F!=null&&(h.has(F)||g.add(F),i.set(e,F));h=(b=B.key)==null?void 0:b.participant;if(h==null){h=(g=B.key)==null?void 0:g.remoteJid}if(h==null)D.MUSTFIX(y||(y=babelHelpers.taggedTemplateLiteralLoose(["No author found for original message that was bumped - unable to restore"])));else{i=d("WAJids").unsafeCoerceToUserJid(h);F=i===c?d("WAJids").AUTHOR_ME:i;k.set(d("WAStanzaUtils").toStanzaId(e),F);C.msgType=d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE;return C}}if((v==null||(s=v.obj)==null||(s=s.payload)==null||(s=s.content)==null?void 0:s.noteReplyMessage)!=null){var I;b=v==null||(I=v.obj)==null||(I=I.payload)==null||(I=I.content)==null?void 0:I.noteReplyMessage;B=b.noteTimestampMs;g=b.noteText;i=(h=a.metadata)==null?void 0:h.senderId;if(B!=null&&typeof B==="number"&&i!=null&&f!=null){k=d("MAWJids").toUserJid(i);F=d("MAWJids").toUserJid(f);a=F===k?c:F;h={author:a===c?d("WAJids").AUTHOR_ME:a,externalId:d("WAStanzaUtils").toStanzaId(e),ts:d("WATimeUtils").castMilliSecondsToUnixTime(B),type:d("WAMsgType").NOTE_REPLY};if((g==null?void 0:g.text)!=null){i={content:g==null?void 0:g.text,mentionedJids:g==null?void 0:g.mentionedJid.map(function(a){return d("MAWJids").toUserJid(a)})};h.msgContent=i}C.noteReply=h}if(b.textContent!=null){C.msgType=d("MAWMsgType").MSG_TYPE.TEXT;C.decodedPayload=b.textContent;return C}else if(b.stickerContent!=null){f=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").StickerTransportSpec,b.stickerContent.payload);n=K(f,d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER);C.msgType=d("MAWMsgType").MSG_TYPE.STICKER;C.mediaMetadata=n;M(e,n,E,"attachment",j);return C}else if(b.videoContent!=null){k=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").VideoTransportSpec,b.videoContent.payload);n=K(k,d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO);n!=null&&n.xAttachmentType===d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF?C.msgType=d("MAWMsgType").MSG_TYPE.GIF:C.msgType=d("MAWMsgType").MSG_TYPE.VIDEO;C.mediaMetadata=n;M(e,n,E,"attachment",j);return C}}if((v==null||(t=v.obj)==null||(t=t.payload)==null||(t=t.content)==null?void 0:t.ravenMessageMsgr)!=null){var J,O,R;C.ravenMsgEphemeralType=N(v==null||(J=v.obj)==null||(J=J.payload)==null||(J=J.content)==null||(J=J.ravenMessageMsgr)==null?void 0:J.ephemeralType);if((v==null||(O=v.obj)==null||(O=O.payload)==null||(O=O.content)==null||(O=O.ravenMessageMsgr)==null?void 0:O.imageMessage)!=null){if(l==null||!l){var S;C.ravenUnstoredMedia=d("WAParseMediaTransportProtocol").decodeImageTransport(v==null||(S=v.obj)==null||(S=S.payload)==null||(S=S.content)==null||(S=S.ravenMessageMsgr)==null||(S=S.imageMessage)==null?void 0:S.payload,d("WATimeUtils").castMilliSecondsToUnixTime(C.sortOrderMs),"image")}C.ravenMsgMediaType=d("MAWMsg").MAWRavenMsgMediaType.IMAGE}else if((v==null||(R=v.obj)==null||(R=R.payload)==null||(R=R.content)==null||(R=R.ravenMessageMsgr)==null?void 0:R.videoMessage)!=null){if(l==null||!l){var T;F=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAMediaTransport.pb").VideoTransportSpec,v==null||(T=v.obj)==null||(T=T.payload)==null||(T=T.content)==null||(T=T.ravenMessageMsgr)==null||(T=T.videoMessage)==null?void 0:T.payload);c=d("WAParseMediaTransportProtocol").parseVideoMsg(F,d("WATimeUtils").castMilliSecondsToUnixTime(C.sortOrderMs),!1);c!=null?C.ravenUnstoredMedia=c:D.MUSTFIX(z||(z=babelHelpers.taggedTemplateLiteralLoose(["Decoded raven video unstored message is null - unable to restore"])))}C.ravenMsgMediaType=d("MAWMsg").MAWRavenMsgMediaType.VIDEO}C.msgType=d("MAWMsgType").MSG_TYPE.RAVEN;return C}else if((v==null||(u=v.obj)==null||(u=u.payload)==null||(u=u.content)==null?void 0:u.pollCreationMessage)!=null){C.msgType=d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE;a=v.obj.payload.content.pollCreationMessage;B=a.encKey;g=a.name;i=a.options;h=a.selectableOptionsCount;B!=null&&g!=null&&i!=null&&(C.groupPollInfo={encKey:B,name:g,options:i.map(function(a){a=a.optionName;return a}).filter(Boolean),selectableOptionsCount:h||0});return C}v!=null&&P(C,v.obj);D.MUSTFIX(A||(A=babelHelpers.taggedTemplateLiteralLoose(["Unable to retrieve decoded protobuf from backup message - unsupported message type"])));return C}function P(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;(b==null||(c=b.payload)==null||(c=c.content)==null?void 0:c.locationMessage)!=null&&(a.futureProofMessageType="locationMessage");(b==null||(d=b.payload)==null||(d=d.content)==null?void 0:d.liveLocationMessage)!=null&&(a.futureProofMessageType="liveLocationMessage");(b==null||(e=b.payload)==null||(e=e.content)==null?void 0:e.pollUpdateMessage)!=null&&(a.futureProofMessageType="pollUpdateMessage");(b==null||(f=b.payload)==null||(f=f.content)==null?void 0:f.viewOnceMessage)!=null&&(a.futureProofMessageType="viewOnceMessage");(b==null||(g=b.payload)==null||(g=g.content)==null?void 0:g.contactMessage)!=null&&(a.futureProofMessageType="contactMessage");(b==null||(h=b.payload)==null||(h=h.content)==null?void 0:h.extendedTextMessage)!=null&&(a.futureProofMessageType="extendedTextMessage");(b==null||(i=b.payload)==null||(i=i.content)==null?void 0:i.groupInviteMessage)!=null&&(a.futureProofMessageType="groupInviteMessage");(b==null||(j=b.payload)==null||(j=j.content)==null?void 0:j.commonSticker)!=null&&(a.futureProofMessageType="commonSticker");(b==null||(k=b.payload)==null||(k=k.content)==null?void 0:k.screenshotAction)!=null&&(a.futureProofMessageType="screenshotAction");(b==null||(l=b.payload)==null||(l=l.content)==null?void 0:l.extendedMessageContentWithSear)!=null&&(a.futureProofMessageType="extendedMessageContentWithSear");(b==null||(m=b.payload)==null||(m=m.content)==null?void 0:m.imageGalleryMessage)!=null&&(a.futureProofMessageType="imageGalleryMessage");(b==null||(n=b.payload)==null||(n=n.content)==null?void 0:n.paymentsTransactionMessage)!=null&&(a.futureProofMessageType="paymentsTransactionMessage");(b==null||(o=b.payload)==null||(o=o.applicationData)==null?void 0:o.metadataSync)!=null&&(a.futureProofMessageType="metadataSync");(b==null||(p=b.payload)==null||(p=p.applicationData)==null?void 0:p.aiBotResponse)!=null&&(a.futureProofMessageType="aiBotResponse")}function Q(a,b,c,e){var f;f=(f=a.metadata)==null?void 0:f.messageId;a=d("decodeProtobuf").decodeProtobuf(d("WAMsgApplication.pb").MessageApplicationSpec,a.encryptedTransportMessage);var g=d("WAParseMessageApplication").parseMessageApplication(a);if(g.type==="error"){D.MUSTFIX(B||(B=babelHelpers.taggedTemplateLiteralLoose(["Message contains unparseable message application - unable to restore message"])));return}a=a.metadata;var h=a==null?void 0:a.quotedMessage;h=h==null?void 0:h.stanzaId;f!=null&&h!=null&&(c.has(h)||b.add(h),e.set(f,h));if(g.subprotocolType==="armadillo"){c=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAArmadilloApplication.pb").ArmadilloSpec,g.payload);return{metadata:a,obj:c}}else if(g.subprotocolType==="consumerMessage")return{metadata:a,obj:d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAConsumerApplication.pb").ConsumerApplicationSpec,g.payload)}}function e(a,b,c,d,e,f,g,h,i){return a.map(function(a){return R(a,b,c,d,e,f,g,h,i)})}function R(a,b,c,e,f,g,h,i,j){g===void 0&&(g=new Map());var k=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloBackupMessage.pb").BackupMessageSpec,a.toplevelProtobuf.decryptedProtobuf);k=O(k,a.toplevelProtobuf.protobufTimestampMS,b,a.otid,c,e,f,g,h,i,j);c=a.supplementalProtobufs;for(h of c){i=h[0];j=h[1];c=d("MessageBackupSupplementalKeyGenerator").parseIdentifierString(i);d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_EB_DECODE_MESSAGE_PROTOBUF_SUPPLEMENTAL,key:c.type});var l=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloBackupMessage.pb").BackupMessageSpec,j.decryptedProtobuf);if(l.encryptedTransportMessage==null)continue;switch(c.type){case"raven_action_message":var m=Q(l,e,f,g),n=c.senderJid;n=n===b?d("WAJids").AUTHOR_ME:n;if(m!=null){var o,p,q;m=m.obj;o=(o=m.payload)==null||(o=o.content)==null||(o=o.ravenActionNotifMessage)==null?void 0:o.actionTimestamp;p=(p=m.payload)==null||(p=p.content)==null||(p=p.ravenActionNotifMessage)==null?void 0:p.actionType;if(o!=null&&p!=null&&typeof o==="number"&&((q=m.payload)==null||(q=q.content)==null||(q=q.ravenActionNotifMessage)==null||(q=q.key)==null?void 0:q.id)!=null){m=d("WAStanzaUtils").toStanzaId((q=m.payload)==null||(q=q.content)==null||(q=q.ravenActionNotifMessage)==null||(q=q.key)==null?void 0:q.id);if(((q=l.metadata)==null?void 0:q.timestampMs)!=null&&typeof ((q=l.metadata)==null?void 0:q.timestampMs)==="number"&&((q=l.metadata)==null?void 0:q.messageId)!=null){var r;q=(q=l.metadata)==null?void 0:q.messageId;r=d("WATimeUtils").castMilliSecondsToUnixTime((r=l.metadata)==null?void 0:r.timestampMs);q=d("WAStanzaUtils").toStanzaId(q);p=p===0?d("MAWMsg").MAWRavenActionNotifType.PLAYED:p===1?d("MAWMsg").MAWRavenActionNotifType.SCREENSHOTTED:d("MAWMsg").MAWRavenActionNotifType.FORCE_DISABLED;o={ack:d("WAAckLevel").ACK.RECEIVED,actionTimestamp:d("WATimeUtils").castMilliSecondsToUnixTime(o),actionType:p,author:n,externalId:q,ravenActionToMsgExternalId:m,ts:r,type:d("MAWMsgType").MSG_TYPE.RAVEN_ACTION};k.ravenActionUnstoredMsg=o}}}break;case"reaction":n=(p=l.metadata)==null?void 0:p.messageId;m=(q=Q(l,e,f,g))==null||(q=q.obj.payload)==null||(q=q.content)==null?void 0:q.reactionMessage;r=d("WAJids").extractUserId(c.senderJid);m!=null&&r!=null&&k.reactionData.push({reaction:m,reactionExternalId:n,senderId:r,ts:d("WATimeUtils").castMilliSecondsToUnixTime(j.protobufTimestampMS)});break;case"edit":p=(o=Q(l,e,f,g))==null||(o=o.obj.payload)==null||(o=o.content)==null?void 0:o.editMessage;m=(q=l.metadata)==null?void 0:q.senderId;if(p!=null){r=(n=p.key)==null?void 0:n.id;j=p.timestampMs;if(r!=null&&j!=null&&m!=null&&typeof j==="number"){o=d("MAWJids").toUserJid(m);q=o===b?d("WAJids").AUTHOR_ME:o;k.editMsgData.push({author:q,editMsgContent:p,externalId:d("WAStanzaUtils").toStanzaId(k.externalId),originalMsgExternalId:d("WAStanzaUtils").toStanzaId(r),ts:d("WATimeUtils").castMilliSecondsToUnixTime(j)})}}break;case"poll_update":n=Q(l,e,f,g);if(n==null)continue;o=(m=n.obj.payload)==null||(m=m.content)==null?void 0:m.pollUpdateMessage;if(o!=null){q={externalId:d("WAStanzaUtils").toStanzaId(c.rawIdentifierString)};o.addOption!=null&&(q.addOption=o.addOption);o.vote!=null&&(q.vote=o.vote);o.pollCreationMessageKey!=null&&(q.pollCreationMessageKey=o.pollCreationMessageKey);k.groupPollUpdateData!=null?k.groupPollUpdateData.push(q):k.groupPollUpdateData=[q]}break;case"unknown":p=i.split(":");r=p[0];D.MUSTFIX(C||(C=babelHelpers.taggedTemplateLiteralLoose(["Unknown supplemental identifier. Identifier prefix: ",". Parts: ",""])),r||"null",p.length);break;default:c.type}}f.add(a.otid);return k}g.removeDeprecatedProtobufRestoreArgs=a;g.createUnstoredDbContentFromProtobufObject=b;g.decodeProtobufArray=e;g.decodeDecryptedMessageProtobuf=R}),98);
__d("MAWEBUnstoredDbMsgUtils",["EBLogger","MAWHandleEBRestoreWithHIM","MAWHandleEchoProtobufsRestoreApi","MAWMessageSortOrderUtils","WAJids"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("EBLogger").EBLogger().tags(["restore","MAWEBUnstoredDbMsgUtils"]);function a(a,b,c,e){var f=c!=null?c:b!=null?d("WAJids").unsafeCoerceToChatJid(b):void 0;if(f==null){j.mustfix("threadId and chatJid are both null - cannot convert protobuf to unstoredDbMsg");return[]}return d("MAWHandleEchoProtobufsRestoreApi").decodeProtobufArray(a,e,void 0,new Set(),new Set(),new Map(),new Map(),new Map(),!0).map(function(a){var b;if((a==null||(b=a.metadata)==null?void 0:b.messageId)!=null)try{var c=d("MAWHandleEchoProtobufsRestoreApi").createUnstoredDbContentFromProtobufObject(a,f,e,new Map(),void 0);if(c!=null&&c.unstoredDbContent.unstoredDbMsg!=null){c=c.unstoredDbContent.unstoredDbMsg;var g=d("MAWMessageSortOrderUtils").generateAuthoritativeMessageSortOrder(c);c.sortOrderMs=g;return c}}catch(b){j.MUSTFIX(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Failed to convert protobuf to unstored db message: type: "," error: ",""])),a.msgType,b.message)}return null}).filter(Boolean)}function b(a,b){return d("MAWHandleEBRestoreWithHIM").convertEchoMessages(a,b).map(function(a){var b;if(a==null||a.length===0||((b=a[0].decodedMsg)==null?void 0:b.unstoredDbMsg)==null){j!=null&&j.MUSTFIX(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Failed to convert echo message to unstored db message"])));return null}return(b=a[0].decodedMsg)==null?void 0:b.unstoredDbMsg}).filter(Boolean)}g.getUnstoredDbMsgFromProtobuf=a;g.getUnstoredDbMsgFromEcho=b}),98);
__d("MAWFTSIsMessageValidForSearch",["MAWMsgType"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a.ephemeralSetting!=null&&a.ephemeralSetting.ephemeralExpirationInSec>0}function a(a){var b=a.msgContent,c=a.sortOrderMs,e=a.type;b=b==null?void 0:b.content;if(b==null||c==null)return null;if(e!==d("MAWMsgType").MSG_TYPE.TEXT&&e!==d("MAWMsgType").MSG_TYPE.XMA)return null;return h(a)?null:{content:b,sortOrderMs:c}}g.verifyMessageValidity=a}),98);
__d("WACryptoAesGcm",["WABinary","WACryptoDependencies"],(function(a,b,c,d,e,f,g){"use strict";async function a(a,b,c,e,f){f===void 0&&(f=16);b={name:"AES-GCM",iv:i(b),tagLength:f*8};e!=null&&(b.additionalData=i(e));return d("WACryptoDependencies").getCrypto().subtle.encrypt(b,await h(a),c)}async function b(a,b,c,e,f){f===void 0&&(f=16);b={name:"AES-GCM",iv:i(b),tagLength:f*8};e!=null&&(b.additionalData=i(e));return d("WACryptoDependencies").getCrypto().subtle.decrypt(b,await h(a),c)}function h(a){return d("WACryptoDependencies").getCrypto().subtle.importKey("raw",a,"AES-GCM",!1,["encrypt","decrypt"])}function i(a){if(a instanceof Uint8Array)return a;if(typeof a==="string"){var b=new(d("WABinary").Binary)();b.writeString(a);return b.readByteArrayView()}return new Uint8Array(a)}g.gcmEncrypt=a;g.gcmDecrypt=b}),98);
__d("WAUseCaseSecret",["$InternalEnum","WABinary","WACryptoHkdf"],(function(a,b,c,d,e,f,g){"use strict";c=b("$InternalEnum")({POLL_VOTE:"Poll Vote",ENC_REACTION:"Enc Reaction",ENC_COMMENT:"Enc Comment",REPORT_TOKEN:"Report Token",EVENT_RESPONSE:"Event Response",EVENT_EDIT_ENCRYPTED:"Event Edit"});var h=32;function a(a){var b=a.messageSecret,c=a.stanzaId,e=a.parentMsgOriginalSender,f=a.modificationSender;a=a.modificationType;c=d("WABinary").Binary.build(c,e,f,a).readBuffer();return d("WACryptoHkdf").extractAndExpand(b instanceof ArrayBuffer?new Uint8Array(b):b,c,h)}g.UseCaseSecretModificationType=c;g.createUseCaseSecret=a}),98);
__d("MAWGroupPollsDualEncryptionUtils",["MAWDbPoll","WABase64","WAConsumerApplication.pb","WACryptoAesGcm","WACryptoSha256","WAResultOrError","WAUseCaseSecret","decodeProtobuf","encodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";async function h(a,b,c){if(a.encIv==null||a.encPayload==null)return d("WAResultOrError").makeError("invalid_poll_enc_value");var e=a.encIv;a=a.encPayload;try{b=await d("WACryptoAesGcm").gcmDecrypt(b,e,a,c);return d("WAResultOrError").makeResult(b)}catch(a){return d("WAResultOrError").DEPRECATED_makeError("decryption_error",a)}}async function i(a,b,c){try{var e=self.crypto.getRandomValues(new Uint8Array(12));b=await d("WACryptoAesGcm").gcmEncrypt(b,e,a,c);return d("WAResultOrError").makeResult({encIv:e.buffer,encPayload:b})}catch(a){return d("WAResultOrError").DEPRECATED_makeError("encryption_error",a)}}function j(a,b){a=a+"\0"+b;return new TextEncoder().encode(a).buffer}async function a(a,b){var c=b.pollCreationMessageKey,e=b.pollCreationSenderJid,f=b.pollCreationStanzaId,g=b.pollUpdateSenderJid;b=b.pollUpdateStanzaId;c=await d("WAUseCaseSecret").createUseCaseSecret({messageSecret:c,modificationSender:g,modificationType:d("WAUseCaseSecret").UseCaseSecretModificationType.POLL_VOTE,parentMsgOriginalSender:e,stanzaId:f});e=j(b,g);f=d("encodeProtobuf").encodeProtobuf(d("WAConsumerApplication.pb").ConsumerApplication$PollVoteMessageSpec,a).readBuffer();return i(f,c,e)}async function b(a,b){var c=b.pollCreationMessageKey,e=b.pollCreationSenderJid,f=b.pollCreationStanzaId,g=b.pollUpdateSenderJid;b=b.pollUpdateStanzaId;c=await d("WAUseCaseSecret").createUseCaseSecret({messageSecret:c,modificationSender:g,modificationType:d("WAUseCaseSecret").UseCaseSecretModificationType.POLL_VOTE,parentMsgOriginalSender:e,stanzaId:f});e=j(b,g);f=await h(a,c,e);if(!f.success)return f;try{return d("WAResultOrError").makeResult(d("decodeProtobuf").decodeProtobuf(d("WAConsumerApplication.pb").ConsumerApplication$PollVoteMessageSpec,f.value))}catch(a){return d("WAResultOrError").DEPRECATED_makeError("protobuf_decode_error",a)}}async function c(a,b){var c=b.pollCreationMessageKey,e=b.pollCreationSenderJid,f=b.pollCreationStanzaId,g=b.pollUpdateSenderJid;b=b.pollUpdateStanzaId;c=await d("WAUseCaseSecret").createUseCaseSecret({messageSecret:c,modificationSender:g,modificationType:d("WAUseCaseSecret").UseCaseSecretModificationType.POLL_VOTE,parentMsgOriginalSender:e,stanzaId:f});e=j(b,g);f=d("encodeProtobuf").encodeProtobuf(d("WAConsumerApplication.pb").ConsumerApplication$PollAddOptionMessageSpec,a).readBuffer();return i(f,c,e)}async function e(a,b){var c=b.pollCreationMessageKey,e=b.pollCreationSenderJid,f=b.pollCreationStanzaId,g=b.pollUpdateSenderJid;b=b.pollUpdateStanzaId;c=await d("WAUseCaseSecret").createUseCaseSecret({messageSecret:c,modificationSender:g,modificationType:d("WAUseCaseSecret").UseCaseSecretModificationType.POLL_VOTE,parentMsgOriginalSender:e,stanzaId:f});e=j(b,g);f=await h(a,c,e);if(!f.success)return f;try{return d("WAResultOrError").makeResult(d("decodeProtobuf").decodeProtobuf(d("WAConsumerApplication.pb").ConsumerApplication$PollAddOptionMessageSpec,f.value))}catch(a){return d("WAResultOrError").DEPRECATED_makeError("protobuf_decode_error",a)}}async function f(a){a=await d("WACryptoSha256").sha256(new TextEncoder("utf8").encode(a));return k(a)}function k(a){return d("MAWDbPoll").convertStringToOptionHash(d("WABase64").encodeB64(a))}g.encryptGroupPollVote=a;g.decryptGroupPollVote=b;g.encryptGroupPollAddOption=c;g.decryptGroupPollAddOption=e;g.getHashForOptionName=f;g.getBase64EncodedHash=k}),98);
__d("MAWMediaGalleryEBTaggingUtils",["LSThreadMediaGalleryGroup","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("13725")}function b(a){return a===c("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS}g.isMediaGalleryEBTaggingRestoreEnabled=a;g.isMediaGalleryGroupSupportedForTaggedRestore=b}),98);
__d("MAWRestoreMessagesFromEncryptedBackupsDeferred",["ExecutionEnvironment","LSDatabaseSingleton","LSVec","WAJobOrchestratorTypes","cr:10036","cr:9465","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("MAWRestoreMessagesFromEncryptedBackupsNOP").__setRef("MAWRestoreMessagesFromEncryptedBackupsDeferred");function a(a,e,g,k,l,m,n,o,p,q,r,s){s===void 0&&(s=d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION);return j.load().then(async function(j){var t=q!=null?Number(q):void 0;t=b("cr:9465")!=null?b("cr:9465").getMessageMetadataFromDeanonAPI(e,g.length,t):Promise.resolve();var u,v;(i||(i=c("ExecutionEnvironment"))).isInWorker&&b("cr:10036")!=null?(await b("cr:10036").init(),u=await b("cr:10036").getLSStorage()):(u=await (h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton,v=await t);return u.runInTransaction(function(b){return j.call(b,a,e,g,k,l,m,n,o,p,q,r,v,s,void 0)},"readwrite",void 0,void 0,f.id+":71").then(function(){return[c("LSVec").ofArray([]),c("LSVec").ofArray([]),!1]})})}g.call=a}),98);
__d("MWSimpleWorkQueue",["FBLogger","Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i={first:null,last:null};function a(a){return new(h||(h=b("Promise")))(function(d,e){var f=function(){var f=new(h||(h=b("Promise")))(function(a,b){window.setTimeout(function(){b(c("err")("Work item timed out after 30 seconds"))},3e4)});return h.race([a(),f]).then(d,e)};if(i.first===null||i.last==null)i.first=i.last={next:null,value:f},j();else{var g=i.last;g.next={next:null,value:f};i.last=g.next}})}function j(){if(i.first===null)return;var a=i.first;if(a==null)return;var b=function(){i.first=a.next;if(i.first==null){i.last=null;return}j()};a.value().then(function(){b()})["catch"](function(a){c("FBLogger")("messenger_web").catching(a).mustfix("Error in MWSimpleWorkQueue"),b()})}g.queueWork=a}),98);
__d("MAWRestoreProtobufsFromEncryptedBackupsDeferred",["ExecutionEnvironment","I64","MWSimpleWorkQueue","WAJobOrchestratorTypes","cr:10036","justknobx","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("MAWRestoreProtobufsFromEncryptedBackupsNOP").__setRef("MAWRestoreProtobufsFromEncryptedBackupsDeferred");function a(a,e,f,g,k,l,m,n,o,p,q,r,s,t,u){t===void 0&&(t=d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION);return j.load().then(async function(j){(i||(i=c("ExecutionEnvironment"))).isInWorker&&b("cr:10036")!=null&&await b("cr:10036").init();var v=function(b){return j.call(b,a,e,f,g,k!=null?(h||(h=d("I64"))).to_float(k):0,l,m!=null?(h||(h=d("I64"))).to_float(m):(h||(h=d("I64"))).to_float((h||(h=d("I64"))).max_int),n,o,p,q,r,s,t,u)};return c("justknobx")._("4404")?d("MWSimpleWorkQueue").queueWork(function(){return v(null)}):v(null)})}g.call=a}),98);/*FB_PKG_DELIM*/
/**
 * License: https://www.facebook.com/legal/license/yKsQCAUqcFZ/
 */
__d("dexie-4.0.1",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){(function(b,c){typeof g==="object"&&typeof h!=="undefined"?h.exports=c():(b=typeof globalThis!=="undefined"?globalThis:b||self,b.Dexie=c())})(this,function(){var b=function(a,c){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return b(a,c)};function c(a,c){if(typeof c!=="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");b(a,c);function d(){this.constructor=a}a.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d())}var d=function(){d=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};return d.apply(this,arguments)};function e(a,b,c){if(c||arguments.length===2)for(var d=0,e=b.length,f;d<e;d++)(f||!(d in b))&&(f||(f=Array.prototype.slice.call(b,0,d)),f[d]=b[d]);return a.concat(f||Array.prototype.slice.call(b))}var f=typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:typeof window!=="undefined"?window:a,g=Object.keys,h=Array.isArray;typeof Promise!=="undefined"&&!f.Promise&&(f.Promise=Promise);function i(a,b){if(typeof b!=="object")return a;g(b).forEach(function(c){a[c]=b[c]});return a}var j=Object.getPrototypeOf,k={}.hasOwnProperty;function l(a,b){return k.call(a,b)}function m(a,b){typeof b==="function"&&(b=b(j(a))),(typeof Reflect==="undefined"?g:Reflect.ownKeys)(b).forEach(function(c){o(a,c,b[c])})}var n=Object.defineProperty;function o(a,b,c,d){n(a,b,i(c&&l(c,"get")&&typeof c.get==="function"?{get:c.get,set:c.set,configurable:!0}:{value:c,configurable:!0,writable:!0},d))}function p(a){return{from:function(b){a.prototype=Object.create(b.prototype);o(a.prototype,"constructor",a);return{extend:m.bind(null,a.prototype)}}}}var q=Object.getOwnPropertyDescriptor;function r(a,b){var c=q(a,b);return c||(c=j(a))&&r(c,b)}var s=[].slice;function t(a,b,c){return s.call(a,b,c)}function u(a,b){return b(a)}function v(a){if(!a)throw new Error("Assertion Failed")}function aa(a){f.setImmediate?setImmediate(a):setTimeout(a,0)}function ba(a,b){return a.reduce(function(a,c,d){c=b(c,d);c&&(a[c[0]]=c[1]);return a},{})}function w(a,b){if(typeof b==="string"&&l(a,b))return a[b];if(!b)return a;if(typeof b!=="string"){var c=[];for(var d=0,e=b.length;d<e;++d){var f=w(a,b[d]);c.push(f)}return c}f=b.indexOf(".");if(f!==-1){d=a[b.substr(0,f)];return d==null?void 0:w(d,b.substr(f+1))}return void 0}function x(a,b,c){if(!a||b===void 0)return;if("isFrozen"in Object&&Object.isFrozen(a))return;if(typeof b!=="string"&&"length"in b){v(typeof c!=="string"&&"length"in c);for(var d=0,e=b.length;d<e;++d)x(a,b[d],c[d])}else{d=b.indexOf(".");if(d!==-1){e=b.substr(0,d);d=b.substr(d+1);if(d==="")c===void 0?h(a)&&!isNaN(parseInt(e))?a.splice(e,1):delete a[e]:a[e]=c;else{var f=a[e];(!f||!l(a,e))&&(f=a[e]={});x(f,d,c)}}else c===void 0?h(a)&&!isNaN(parseInt(b))?a.splice(b,1):delete a[b]:a[b]=c}}function ca(a,b){typeof b==="string"?x(a,b,void 0):"length"in b&&[].map.call(b,function(b){x(a,b,void 0)})}function da(a){var b={};for(var c in a)l(a,c)&&(b[c]=a[c]);return b}var ea=[].concat;function fa(a){return ea.apply([],a)}var y="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(fa([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(b){return b+a+"Array"})}))).filter(function(a){return f[a]}),ga=new Set(y.map(function(a){return f[a]}));function ha(a){var b={};for(var c in a)if(l(a,c)){var d=a[c];b[c]=!d||typeof d!=="object"||ga.has(d.constructor)?d:ha(d)}return b}function ia(a){for(var b in a)if(l(a,b))return!1;return!0}var ja=null;function z(a){ja=new WeakMap();a=ka(a);ja=null;return a}function ka(a){if(!a||typeof a!=="object")return a;var b=ja.get(a);if(b)return b;if(h(a)){b=[];ja.set(a,b);for(var c=0,d=a.length;c<d;++c)b.push(ka(a[c]))}else if(ga.has(a.constructor))b=a;else{c=j(a);b=c===Object.prototype?{}:Object.create(c);ja.set(a,b);for(d in a)l(a,d)&&(b[d]=ka(a[d]))}return b}var la={}.toString;function ma(a){return la.call(a).slice(8,-1)}var na=typeof Symbol!=="undefined"?Symbol.iterator:"@@iterator",oa=typeof na==="symbol"?function(a){var b;return a!=null&&(b=a[na])&&b.apply(a)}:function(){return null};function A(a,b){b=a.indexOf(b);b>=0&&a.splice(b,1);return b>=0}var pa={};function B(a){var b,c,d,e;if(arguments.length===1){if(h(a))return a.slice();if(this===pa&&typeof a==="string")return[a];if(e=oa(a)){c=[];while(d=e.next(),!d.done)c.push(d.value);return c}if(a==null)return[a];b=a.length;if(typeof b==="number"){c=new Array(b);while(b--)c[b]=a[b];return c}return[a]}b=arguments.length;c=new Array(b);while(b--)c[b]=arguments[b];return c}var qa=typeof Symbol!=="undefined"?function(a){return a[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1};y=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"];var C=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"];y=y.concat(C);var ra={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function sa(a,b){this.name=a,this.message=b}p(sa).from(Error).extend({toString:function(){return this.name+": "+this.message}});function ta(a,b){return a+". Errors: "+Object.keys(b).map(function(a){return b[a].toString()}).filter(function(a,b,c){return c.indexOf(a)===b}).join("\n")}function ua(a,b,c,d){this.failures=b,this.failedKeys=d,this.successCount=c,this.message=ta(a,b)}p(ua).from(sa);function va(a,b){this.name="BulkError",this.failures=Object.keys(b).map(function(a){return b[a]}),this.failuresByPos=b,this.message=ta(a,this.failures)}p(va).from(sa);var wa=y.reduce(function(a,b){return a[b]=b+"Error",a},{}),xa=sa,D=y.reduce(function(b,c){var d=c+"Error";function a(a,b){this.name=d,!a?(this.message=ra[c]||d,this.inner=null):typeof a==="string"?(this.message="".concat(a).concat(b?"\n "+b:""),this.inner=b||null):typeof a==="object"&&(this.message="".concat(a.name," ").concat(a.message),this.inner=a)}p(a).from(xa);b[c]=a;return b},{});D.Syntax=SyntaxError;D.Type=TypeError;D.Range=RangeError;var ya=C.reduce(function(a,b){a[b+"Error"]=D[b];return a},{});function za(a,b){if(!a||a instanceof sa||a instanceof TypeError||a instanceof SyntaxError||!a.name||!ya[a.name])return a;b=new ya[a.name](b||a.message,a);"stack"in a&&o(b,"stack",{get:function(){return this.inner.stack}});return b}C=y.reduce(function(a,b){["Syntax","Type","Range"].indexOf(b)===-1&&(a[b+"Error"]=D[b]);return a},{});C.ModifyError=ua;C.DexieError=sa;C.BulkError=va;function E(){}function Aa(a){return a}function Ba(a,b){return a==null||a===Aa?b:function(c){return b(a(c))}}function F(a,b){return function(){a.apply(this,arguments),b.apply(this,arguments)}}function Ca(a,b){return a===E?b:function(){var c=a.apply(this,arguments);c!==void 0&&(arguments[0]=c);var d=this.onsuccess,e=this.onerror;this.onsuccess=null;this.onerror=null;var f=b.apply(this,arguments);d&&(this.onsuccess=this.onsuccess?F(d,this.onsuccess):d);e&&(this.onerror=this.onerror?F(e,this.onerror):e);return f!==void 0?f:c}}function Da(a,b){return a===E?b:function(){a.apply(this,arguments);var c=this.onsuccess,d=this.onerror;this.onsuccess=this.onerror=null;b.apply(this,arguments);c&&(this.onsuccess=this.onsuccess?F(c,this.onsuccess):c);d&&(this.onerror=this.onerror?F(d,this.onerror):d)}}function Ea(a,b){return a===E?b:function(c){var d=a.apply(this,arguments);i(c,d);var e=this.onsuccess,f=this.onerror;this.onsuccess=null;this.onerror=null;var g=b.apply(this,arguments);e&&(this.onsuccess=this.onsuccess?F(e,this.onsuccess):e);f&&(this.onerror=this.onerror?F(f,this.onerror):f);return d===void 0?g===void 0?void 0:g:i(d,g)}}function Fa(a,b){return a===E?b:function(){return b.apply(this,arguments)===!1?!1:a.apply(this,arguments)}}function Ga(a,b){return a===E?b:function(){var c=a.apply(this,arguments);if(c&&typeof c.then==="function"){var d=this,e=arguments.length,f=new Array(e);while(e--)f[e]=arguments[e];return c.then(function(){return b.apply(d,f)})}return b.apply(this,arguments)}}var G=typeof location!=="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ha(a,b){G=a}var Ia={},Ja=100;y=typeof Promise==="undefined"?[]:function(){var a=Promise.resolve();if(typeof crypto==="undefined"||!crypto.subtle)return[a,j(a),a];var b=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[b,j(b),a]}();var Ka=y[0],H=y[1];y=y[2];H=H&&H.then;var La=Ka&&Ka.constructor,Ma=!!y;function Na(){queueMicrotask(db)}var Oa=function(a,b){Ua.push([a,b]),Qa&&(Na(),Qa=!1)},Pa=!0,Qa=!0,Ra=[],Sa=[],Ta=Aa,I={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:E,pgp:!1,env:{},finalize:E},J=I,Ua=[],Va=0,Wa=[];function K(a){if(typeof this!=="object")throw new TypeError("Promises must be constructed via new");this._listeners=[];this._lib=!1;var b=this._PSD=J;if(typeof a!=="function"){if(a!==Ia)throw new TypeError("Not a function");this._state=arguments[1];this._value=arguments[2];this._state===!1&&$a(this,this._value);return}this._state=null;this._value=null;++b.ref;Za(this,a)}var Xa={get:function(){var a=J,b=ob;function c(c,d){var e=this,f=!a.global&&(a!==J||b!==ob),g=f&&!O(),h=new K(function(b,h){bb(e,new Ya(wb(c,a,f,g),wb(d,a,f,g),b,h,a))});this._consoleTask&&(h._consoleTask=this._consoleTask);return h}c.prototype=Ia;return c},set:function(a){o(this,"then",a&&a.prototype===Ia?Xa:{get:function(){return a},set:Xa.set})}};m(K.prototype,{then:Xa,_then:function(a,b){bb(this,new Ya(null,null,a,b,J))},"catch":function(b){if(arguments.length===1)return this.then(null,b);var a=arguments[0],c=arguments[1];return typeof a==="function"?this.then(null,function(b){return b instanceof a?c(b):kb(b)}):this.then(null,function(b){return b&&b.name===a?c(b):kb(b)})},"finally":function(a){return this.then(function(b){return K.resolve(a()).then(function(){return b})},function(b){return K.resolve(a()).then(function(){return kb(b)})})},timeout:function(a,b){var c=this;return a<Infinity?new K(function(d,e){var f=setTimeout(function(){return e(new D.Timeout(b))},a);c.then(d,e)["finally"](clearTimeout.bind(null,f))}):this}});typeof Symbol!=="undefined"&&Symbol.toStringTag&&o(K.prototype,Symbol.toStringTag,"Dexie.Promise");I.env=ub();function Ya(a,b,c,d,e){this.onFulfilled=typeof a==="function"?a:null,this.onRejected=typeof b==="function"?b:null,this.resolve=c,this.reject=d,this.psd=e}m(K,{all:function(){var a=B.apply(null,arguments).map(rb);return new K(function(b,c){a.length===0&&b([]);var d=a.length;a.forEach(function(e,f){return K.resolve(e).then(function(c){a[f]=c,--d||b(a)},c)})})},resolve:function(a){if(a instanceof K)return a;if(a&&typeof a.then==="function")return new K(function(b,c){a.then(b,c)});var b=new K(Ia,!0,a);return b},reject:kb,race:function(){var a=B.apply(null,arguments).map(rb);return new K(function(b,c){a.map(function(a){return K.resolve(a).then(b,c)})})},PSD:{get:function(){return J},set:function(a){return J=a}},totalEchoes:{get:function(){return ob}},newPSD:N,usePSD:vb,scheduler:{get:function(){return Oa},set:function(a){Oa=a}},rejectionMapper:{get:function(){return Ta},set:function(a){Ta=a}},follow:function(a,b){return new K(function(c,d){return N(function(b,c){var d=J;d.unhandleds=[];d.onunhandled=c;d.finalize=F(function(){var a=this;hb(function(){a.unhandleds.length===0?b():c(a.unhandleds[0])})},d.finalize);a()},b,c,d)})}});La&&(La.allSettled&&o(K,"allSettled",function(){var a=B.apply(null,arguments).map(rb);return new K(function(b){a.length===0&&b([]);var c=a.length,d=new Array(c);a.forEach(function(a,e){return K.resolve(a).then(function(a){return d[e]={status:"fulfilled",value:a}},function(a){return d[e]={status:"rejected",reason:a}}).then(function(){return--c||b(d)})})})}),La.any&&typeof AggregateError!=="undefined"&&o(K,"any",function(){var a=B.apply(null,arguments).map(rb);return new K(function(b,c){a.length===0&&c(new AggregateError([]));var d=a.length,e=new Array(d);a.forEach(function(a,f){return K.resolve(a).then(function(a){return b(a)},function(a){e[f]=a,--d||c(new AggregateError(e))})})})}));function Za(a,b){try{b(function(b){if(a._state!==null)return;if(b===a)throw new TypeError("A promise cannot be resolved with itself.");var c=a._lib&&eb();b&&typeof b.then==="function"?Za(a,function(a,c){b instanceof K?b._then(a,c):b.then(a,c)}):(a._state=!0,a._value=b,ab(a));c&&fb()},$a.bind(null,a))}catch(b){$a(a,b)}}function $a(a,b){Sa.push(b);if(a._state!==null)return;var c=a._lib&&eb();b=Ta(b);a._state=!1;a._value=b;ib(a);ab(a);c&&fb()}function ab(a){var b=a._listeners;a._listeners=[];for(var c=0,d=b.length;c<d;++c)bb(a,b[c]);c=a._PSD;--c.ref||c.finalize();Va===0&&(++Va,Oa(function(){--Va===0&&gb()},[]))}function bb(a,b){if(a._state===null){a._listeners.push(b);return}var c=a._state?b.onFulfilled:b.onRejected;if(c===null)return(a._state?b.resolve:b.reject)(a._value);++b.psd.ref;++Va;Oa(cb,[c,a,b])}function cb(a,b,c){try{var d,e=b._value;!b._state&&Sa.length&&(Sa=[]);d=G&&b._consoleTask?b._consoleTask.run(function(){return a(e)}):a(e);!b._state&&Sa.indexOf(e)===-1&&jb(b);c.resolve(d)}catch(a){c.reject(a)}finally{--Va===0&&gb(),--c.psd.ref||c.psd.finalize()}}function db(){vb(I,function(){eb()&&fb()})}function eb(){var a=Pa;Pa=!1;Qa=!1;return a}function fb(){var a,b,c;do while(Ua.length>0){a=Ua;Ua=[];c=a.length;for(b=0;b<c;++b){var d=a[b];d[0].apply(null,d[1])}}while(Ua.length>0);Pa=!0;Qa=!0}function gb(){var a=Ra;Ra=[];a.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});a=Wa.slice(0);var b=a.length;while(b)a[--b]()}function hb(a){function b(){a(),Wa.splice(Wa.indexOf(b),1)}Wa.push(b);++Va;Oa(function(){--Va===0&&gb()},[])}function ib(a){Ra.some(function(b){return b._value===a._value})||Ra.push(a)}function jb(a){var b=Ra.length;while(b)if(Ra[--b]._value===a._value){Ra.splice(b,1);return}}function kb(a){return new K(Ia,!1,a)}function L(a,b){var c=J;return function(){var d=eb(),e=J;try{P(c,!0);return a.apply(this,arguments)}catch(a){b&&b(a)}finally{P(e,!1),d&&fb()}}}var M={awaits:0,echoes:0,id:0},lb=0,mb=[],nb=0,ob=0,pb=0;function N(b,a,c,d){var e=J,f=Object.create(e);f.parent=e;f.ref=0;f.global=!1;f.id=++pb;I.env;f.env=Ma?{Promise:K,PromiseProp:{value:K,configurable:!0,writable:!0},all:K.all,race:K.race,allSettled:K.allSettled,any:K.any,resolve:K.resolve,reject:K.reject}:{};a&&i(f,a);++e.ref;f.finalize=function(){--this.parent.ref||this.parent.finalize()};a=vb(f,b,c,d);f.ref===0&&f.finalize();return a}function qb(){M.id||(M.id=++lb);++M.awaits;M.echoes+=Ja;return M.id}function O(){if(!M.awaits)return!1;--M.awaits===0&&(M.id=0);M.echoes=M.awaits*Ja;return!0}(""+H).indexOf("[native code]")===-1&&(qb=O=E);function rb(a){if(M.echoes&&a&&a.constructor===La){qb();return a.then(function(a){O();return a},function(a){O();return Q(a)})}return a}function sb(a){++ob,(!M.echoes||--M.echoes===0)&&(M.echoes=M.awaits=M.id=0),mb.push(J),P(a,!0)}function tb(){var a=mb[mb.length-1];mb.pop();P(a,!1)}function P(a,b){var c=J;(b?M.echoes&&(!nb++||a!==J):nb&&(!--nb||a!==J))&&queueMicrotask(b?sb.bind(null,a):tb);if(a===J)return;J=a;c===I&&(I.env=ub());if(Ma){b=I.env.Promise;var d=a.env;(c.global||a.global)&&(Object.defineProperty(f,"Promise",d.PromiseProp),b.all=d.all,b.race=d.race,b.resolve=d.resolve,b.reject=d.reject,d.allSettled&&(b.allSettled=d.allSettled),d.any&&(b.any=d.any))}}function ub(){var a=f.Promise;return Ma?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(f,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject}:{}}function vb(a,b,c,d,e){var f=J;try{P(a,!0);return b(c,d,e)}finally{P(f,!1)}}function wb(a,b,c,d){return typeof a!=="function"?a:function(){var e=J;c&&qb();P(b,!0);try{return a.apply(this,arguments)}finally{P(e,!1),d&&queueMicrotask(O)}}}function xb(a){Promise===La&&M.echoes===0?nb===0?a():enqueueNativeMicroTask(a):setTimeout(a,0)}var Q=K.reject;function yb(a,b,c,d){if(!a.idbdb||!a._state.openComplete&&!J.letThrough&&!a._vip){if(a._state.openComplete)return Q(new D.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._state.autoOpen)return Q(new D.DatabaseClosed());a.open()["catch"](E)}return a._state.dbReadyPromise.then(function(){return yb(a,b,c,d)})}else{var e=a._createTransaction(b,c,a._dbSchema);try{e.create(),a._state.PR1398_maxLoop=3}catch(e){if(e.name===wa.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0){a.close({disableAutoOpen:!1});return a.open().then(function(){return yb(a,b,c,d)})}return Q(e)}return e._promise(b,function(a,b){return N(function(){J.trans=e;return d(a,b,e)})}).then(function(a){if(b==="readwrite")try{e.idbtrans.commit()}catch(a){}return b==="readonly"?a:e._completion.then(function(){return a})})}}Ka="4.0.1";var zb=String.fromCharCode(65535),Ab=-Infinity,R="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Bb="String expected.",Cb=[],Db="__dbnames",Eb="readonly",Fb="readwrite";function Gb(a,b){return a?b?function(){return a.apply(this,arguments)&&b.apply(this,arguments)}:a:b}var Hb={type:3,lower:-Infinity,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ib(a){return typeof a==="string"&&!/\./.test(a)?function(b){b[a]===void 0&&a in b&&(b=z(b),delete b[a]);return b}:function(a){return a}}function Jb(){throw D.Type()}function S(a,b){try{var c=Mb(a),d=Mb(b);if(c!==d){if(c==="Array")return 1;if(d==="Array")return-1;if(c==="binary")return 1;if(d==="binary")return-1;if(c==="string")return 1;if(d==="string")return-1;if(c==="Date")return 1;return d!=="Date"?NaN:-1}switch(c){case"number":case"Date":case"string":return a>b?1:a<b?-1:0;case"binary":return Lb(Nb(a),Nb(b));case"Array":return Kb(a,b)}}catch(a){}return NaN}function Kb(a,b){var c=a.length,d=b.length,e=c<d?c:d;for(var f=0;f<e;++f){var g=S(a[f],b[f]);if(g!==0)return g}return c===d?0:c<d?-1:1}function Lb(a,b){var c=a.length,d=b.length,e=c<d?c:d;for(var f=0;f<e;++f)if(a[f]!==b[f])return a[f]<b[f]?-1:1;return c===d?0:c<d?-1:1}function Mb(a){var b=typeof a;if(b!=="object")return b;if(ArrayBuffer.isView(a))return"binary";b=ma(a);return b==="ArrayBuffer"?"binary":b}function Nb(a){if(a instanceof Uint8Array)return a;return ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}var Ob=function(){function a(){}a.prototype._trans=function(b,c,d){var e=this._tx||J.trans,f=this.name,a=G&&typeof console!=="undefined"&&console.createTask&&console.createTask("Dexie: ".concat(b==="readonly"?"read":"write"," ").concat(this.name));function g(b,d,a){if(!a.schema[f])throw new D.NotFound("Table "+f+" not part of transaction");return c(a.idbtrans,a)}var h=eb();try{var i=e&&e.db._novip===this.db._novip?e===J.trans?e._promise(b,g,d):N(function(){return e._promise(b,g,d)},{trans:e,transless:J.transless||J}):yb(this.db,b,[this.name],g);a&&(i._consoleTask=a,i=i["catch"](function(a){console.trace(a);return Q(a)}));return i}finally{h&&fb()}};a.prototype.get=function(a,b){var c=this;if(a&&a.constructor===Object)return this.where(a).first(b);return a==null?Q(new D.Type("Invalid argument to Table.get()")):this._trans("readonly",function(b){return c.core.get({trans:b,key:a}).then(function(a){return c.hook.reading.fire(a)})}).then(b)};a.prototype.where=function(a){if(typeof a==="string")return new this.db.WhereClause(this,a);if(h(a))return new this.db.WhereClause(this,"[".concat(a.join("+"),"]"));var b=g(a);if(b.length===1)return this.where(b[0]).equals(a[b[0]]);var c=this.schema.indexes.concat(this.schema.primKey).filter(function(a){if(a.compound&&b.every(function(b){return a.keyPath.indexOf(b)>=0})){for(var c=0;c<b.length;++c)if(b.indexOf(a.keyPath[c])===-1)return!1;return!0}return!1}).sort(function(a,b){return a.keyPath.length-b.keyPath.length})[0];if(c&&this.db._maxKey!==zb){var d=c.keyPath.slice(0,b.length);return this.where(d).equals(d.map(function(b){return a[b]}))}!c&&G&&!1;var e=this.schema.idxByName,f=this.db._deps.indexedDB;function i(a,b){return f.cmp(a,b)===0}d=b.reduce(function(b,c){var d=b[0];b=b[1];var f=e[c],g=a[c];return[d||f,d||!f?Gb(b,f&&f.multi?function(a){a=w(a,c);return h(a)&&a.some(function(a){return i(g,a)})}:function(a){return i(g,w(a,c))}):b]},[null,null]);var j=d[0];d=d[1];return j?this.where(j.name).equals(a[j.keyPath]).filter(d):c?this.filter(d):this.where(b).equals("")};a.prototype.filter=function(a){return this.toCollection().and(a)};a.prototype.count=function(a){return this.toCollection().count(a)};a.prototype.offset=function(a){return this.toCollection().offset(a)};a.prototype.limit=function(a){return this.toCollection().limit(a)};a.prototype.each=function(a){return this.toCollection().each(a)};a.prototype.toArray=function(a){return this.toCollection().toArray(a)};a.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))};a.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,h(a)?"[".concat(a.join("+"),"]"):a))};a.prototype.reverse=function(){return this.toCollection().reverse()};a.prototype.mapToClass=function(a){var b=this,d=b.db,e=b.name;this.schema.mappedClass=a;a.prototype instanceof Jb&&(a=function(a){c(b,a);function b(){return a!==null&&a.apply(this,arguments)||this}Object.defineProperty(b.prototype,"db",{get:function(){return d},enumerable:!1,configurable:!0});b.prototype.table=function(){return e};return b}(a));var f=new Set();for(b=a.prototype;b;b=j(b))Object.getOwnPropertyNames(b).forEach(function(a){return f.add(a)});b=function(b){if(!b)return b;var c=Object.create(a.prototype);for(var d in b)if(!f.has(d))try{c[d]=b[d]}catch(a){}return c};this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook);this.schema.readHook=b;this.hook("reading",b);return a};a.prototype.defineClass=function(){function a(a){i(this,a)}return this.mapToClass(a)};a.prototype.add=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;f&&e&&(g=Ib(f)(a));return this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"add",keys:b!=null?[b]:null,values:[g]})}).then(function(a){return a.numFailures?K.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{x(a,f,b)}catch(a){}return b})};a.prototype.update=function(a,b){if(typeof a==="object"&&!h(a)){var c=w(a,this.schema.primKey.keyPath);return c===void 0?Q(new D.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(c).modify(b)}else return this.where(":id").equals(a).modify(b)};a.prototype.put=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;f&&e&&(g=Ib(f)(a));return this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"put",values:[g],keys:b!=null?[b]:null})}).then(function(a){return a.numFailures?K.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{x(a,f,b)}catch(a){}return b})};a.prototype["delete"]=function(a){var b=this;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:[a]})}).then(function(a){return a.numFailures?K.reject(a.failures[0]):void 0})};a.prototype.clear=function(){var a=this;return this._trans("readwrite",function(b){return a.core.mutate({trans:b,type:"deleteRange",range:Hb})}).then(function(a){return a.numFailures?K.reject(a.failures[0]):void 0})};a.prototype.bulkGet=function(a){var b=this;return this._trans("readonly",function(c){return b.core.getMany({keys:a,trans:c}).then(function(a){return a.map(function(a){return b.hook.reading.fire(a)})})})};a.prototype.bulkAdd=function(b,c,d){var e=this,a=Array.isArray(c)?c:void 0;d=d||(a?void 0:c);var f=d?d.allKeys:void 0;return this._trans("readwrite",function(c){var d=e.schema.primKey,g=d.auto;d=d.keyPath;if(d&&a)throw new D.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==b.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var h=b.length;g=d&&g?b.map(Ib(d)):b;return e.core.mutate({trans:c,type:"add",keys:a,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.results,d=a.lastResult;a=a.failures;c=f?c:d;if(b===0)return c;throw new va("".concat(e.name,".bulkAdd(): ").concat(b," of ").concat(h," operations failed"),a)})})};a.prototype.bulkPut=function(b,c,d){var e=this,a=Array.isArray(c)?c:void 0;d=d||(a?void 0:c);var f=d?d.allKeys:void 0;return this._trans("readwrite",function(c){var d=e.schema.primKey,g=d.auto;d=d.keyPath;if(d&&a)throw new D.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==b.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var h=b.length;g=d&&g?b.map(Ib(d)):b;return e.core.mutate({trans:c,type:"put",keys:a,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.results,d=a.lastResult;a=a.failures;c=f?c:d;if(b===0)return c;throw new va("".concat(e.name,".bulkPut(): ").concat(b," of ").concat(h," operations failed"),a)})})};a.prototype.bulkUpdate=function(b){var c=this,d=this.core,a=b.map(function(a){return a.key}),e=b.map(function(a){return a.changes}),f=[];return this._trans("readwrite",function(g){return d.getMany({trans:g,keys:a,cache:"clone"}).then(function(h){var i=[],j=[];b.forEach(function(a,b){var d=a.key;a=a.changes;var e=h[b];if(e){for(var g=0,k=Object.keys(a);g<k.length;g++){var l=k[g],m=a[l];if(l===c.schema.primKey.keyPath){if(S(m,d)!==0)throw new D.Constraint("Cannot update primary key in bulkUpdate()")}else x(e,l,m)}f.push(b);i.push(d);j.push(e)}});var k=i.length;return d.mutate({trans:g,type:"put",keys:i,values:j,updates:{keys:a,changeSpecs:e}}).then(function(a){var b=a.numFailures;a=a.failures;if(b===0)return k;for(var d=0,e=Object.keys(a);d<e.length;d++){var g=e[d],h=f[Number(g)];if(h!=null){var i=a[g];delete a[g];a[h]=i}}throw new va("".concat(c.name,".bulkUpdate(): ").concat(b," of ").concat(k," operations failed"),a)})})})};a.prototype.bulkDelete=function(a){var b=this,c=a.length;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:a})}).then(function(a){var d=a.numFailures,e=a.lastResult;a=a.failures;if(d===0)return e;throw new va("".concat(b.name,".bulkDelete(): ").concat(d," of ").concat(c," operations failed"),a)})};return a}();function Pb(a){var b={},c=function(d,e){if(e){var c=arguments.length,f=new Array(c-1);while(--c)f[c-1]=arguments[c];b[d].subscribe.apply(null,f);return a}else if(typeof d==="string")return b[d]};c.addEventType=f;for(var d=1,e=arguments.length;d<e;++d)f(arguments[d]);return c;function f(a,d,e){if(typeof a==="object")return i(a);d||(d=Fa);e||(e=E);var f={subscribers:[],fire:e,subscribe:function(a){f.subscribers.indexOf(a)===-1&&(f.subscribers.push(a),f.fire=d(f.fire,a))},unsubscribe:function(a){f.subscribers=f.subscribers.filter(function(b){return b!==a}),f.fire=f.subscribers.reduce(d,e)}};b[a]=c[a]=f;return f}function i(a){g(a).forEach(function(b){var c=a[b];if(h(c))f(b,a[b][0],a[b][1]);else if(c==="asap")var d=f(b,Aa,function(){var a=arguments.length,b=new Array(a);while(a--)b[a]=arguments[a];d.subscribers.forEach(function(a){aa(function(){a.apply(null,b)})})});else throw new D.InvalidArgument("Invalid event config")})}}function Qb(a,b){p(b).from({prototype:a});return b}function Rb(a){return Qb(Ob.prototype,function(b,c,d){this.db=a,this._tx=d,this.name=b,this.schema=c,this.hook=a._allTables[b]?a._allTables[b].hook:Pb(null,{creating:[Ca,E],reading:[Ba,Aa],updating:[Ea,E],deleting:[Da,E]})})}function Sb(a,b){return!(a.filter||a.algorithm||a.or)&&(b?a.justLimit:!a.replayFilter)}function Tb(a,b){a.filter=Gb(a.filter,b)}function Ub(a,b,c){var d=a.replayFilter;a.replayFilter=d?function(){return Gb(d(),b())}:b;a.justLimit=c&&!d}function Vb(a,b){a.isMatch=Gb(a.isMatch,b)}function Wb(a,b){if(a.isPrimKey)return b.primaryKey;var c=b.getIndexByKeyPath(a.index);if(!c)throw new D.Schema("KeyPath "+a.index+" on object store "+b.name+" is not indexed");return c}function Xb(a,b,c){var d=Wb(a,b.schema);return b.openCursor({trans:c,values:!a.keysOnly,reverse:a.dir==="prev",unique:!!a.unique,query:{index:d,range:a.range}})}function Yb(a,b,c,d){var e=a.replayFilter?Gb(a.filter,a.replayFilter()):a.filter;if(!a.or)return Zb(Xb(a,d,c),Gb(a.algorithm,e),b,!a.keysOnly&&a.valueMapper);else{var f={},g=function(a,c,d){if(!e||e(c,d,function(a){return c.stop(a)},function(a){return c.fail(a)})){var g=c.primaryKey,h=""+g;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(g));l(f,h)||(f[h]=!0,b(a,c,d))}};return Promise.all([a.or._iterate(g,c),Zb(Xb(a,d,c),a.algorithm,g,!a.keysOnly&&a.valueMapper)])}}function Zb(a,b,c,d){var e=d?function(a,b,e){return c(d(a),b,e)}:c,f=L(e);return a.then(function(a){if(a)return a.start(function(){var c=function(){return a["continue"]()};(!b||b(a,function(a){return c=a},function(b){a.stop(b),c=E},function(b){a.fail(b),c=E}))&&f(a.value,a,function(a){return c=a});c()})})}y=Symbol();var $b=function(){function a(a){Object.assign(this,a)}a.prototype.execute=function(a){var b;b=(b=this.replacePrefix)===null||b===void 0?void 0:b[0];return b&&typeof a==="string"&&a.startsWith(b)?this.replacePrefix[1]+a.substring(b.length):a};return a}(),ac=function(){function a(){}a.prototype._read=function(a,b){var c=this._ctx;return c.error?c.table._trans(null,Q.bind(null,c.error)):c.table._trans("readonly",a).then(b)};a.prototype._write=function(a){var b=this._ctx;return b.error?b.table._trans(null,Q.bind(null,b.error)):b.table._trans("readwrite",a,"locked")};a.prototype._addAlgorithm=function(a){var b=this._ctx;b.algorithm=Gb(b.algorithm,a)};a.prototype._iterate=function(a,b){return Yb(this._ctx,a,b,this._ctx.table.core)};a.prototype.clone=function(a){var b=Object.create(this.constructor.prototype),c=Object.create(this._ctx);a&&i(c,a);b._ctx=c;return b};a.prototype.raw=function(){this._ctx.valueMapper=null;return this};a.prototype.each=function(a){var b=this._ctx;return this._read(function(c){return Yb(b,a,c,b.table.core)})};a.prototype.count=function(a){var b=this;return this._read(function(a){var c=b._ctx,d=c.table.core;if(Sb(c,!0))return d.count({trans:a,query:{index:Wb(c,d.schema),range:c.range}}).then(function(a){return Math.min(a,c.limit)});else{var e=0;return Yb(c,function(){++e;return!1},a,d).then(function(){return e})}}).then(a)};a.prototype.sortBy=function(a,b){var c=a.split(".").reverse(),d=c[0],e=c.length-1;function f(a,b){return b?f(a[c[b]],b-1):a[d]}var g=this._ctx.dir==="next"?1:-1;function h(a,b){a=f(a,e);b=f(b,e);return a<b?-g:a>b?g:0}return this.toArray(function(a){return a.sort(h)}).then(b)};a.prototype.toArray=function(a){var b=this;return this._read(function(a){var c=b._ctx;if(c.dir==="next"&&Sb(c,!0)&&c.limit>0){var d=c.valueMapper,e=Wb(c,c.table.core.schema);return c.table.core.query({trans:a,limit:c.limit,values:!0,query:{index:e,range:c.range}}).then(function(a){a=a.result;return d?a.map(d):a})}else{var f=[];return Yb(c,function(a){return f.push(a)},a,c.table.core).then(function(){return f})}},a)};a.prototype.offset=function(a){var b=this._ctx;if(a<=0)return this;b.offset+=a;Sb(b)?Ub(b,function(){var b=a;return function(a,c){if(b===0)return!0;if(b===1){--b;return!1}c(function(){a.advance(b),b=0});return!1}}):Ub(b,function(){var b=a;return function(){return--b<0}});return this};a.prototype.limit=function(a){this._ctx.limit=Math.min(this._ctx.limit,a);Ub(this._ctx,function(){var b=a;return function(a,c,d){--b<=0&&c(d);return b>=0}},!0);return this};a.prototype.until=function(a,b){Tb(this._ctx,function(c,d,e){if(a(c.value)){d(e);return b}else return!0});return this};a.prototype.first=function(a){return this.limit(1).toArray(function(a){return a[0]}).then(a)};a.prototype.last=function(a){return this.reverse().first(a)};a.prototype.filter=function(a){Tb(this._ctx,function(b){return a(b.value)});Vb(this._ctx,a);return this};a.prototype.and=function(a){return this.filter(a)};a.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)};a.prototype.reverse=function(){this._ctx.dir=this._ctx.dir==="prev"?"next":"prev";this._ondirectionchange&&this._ondirectionchange(this._ctx.dir);return this};a.prototype.desc=function(){return this.reverse()};a.prototype.eachKey=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;return this.each(function(b,c){a(c.key,c)})};a.prototype.eachUniqueKey=function(a){this._ctx.unique="unique";return this.eachKey(a)};a.prototype.eachPrimaryKey=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;return this.each(function(b,c){a(c.primaryKey,c)})};a.prototype.keys=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.key)}).then(function(){return c}).then(a)};a.prototype.primaryKeys=function(a){var b=this._ctx;if(b.dir==="next"&&Sb(b,!0)&&b.limit>0)return this._read(function(a){var c=Wb(b,b.table.core.schema);return b.table.core.query({trans:a,values:!1,limit:b.limit,query:{index:c,range:b.range}})}).then(function(a){a=a.result;return a}).then(a);b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.primaryKey)}).then(function(){return c}).then(a)};a.prototype.uniqueKeys=function(a){this._ctx.unique="unique";return this.keys(a)};a.prototype.firstKey=function(a){return this.limit(1).keys(function(a){return a[0]}).then(a)};a.prototype.lastKey=function(a){return this.reverse().firstKey(a)};a.prototype.distinct=function(){var a=this._ctx;a=a.index&&a.table.schema.idxByName[a.index];if(!a||!a.multi)return this;var b={};Tb(this._ctx,function(a){a=a.primaryKey.toString();var c=l(b,a);b[a]=!0;return!c});return this};a.prototype.modify=function(a){var b=this,c=this._ctx;return this._write(function(d){var e;if(typeof a==="function")e=a;else{var f=g(a),h=f.length;e=function(b){var c=!1;for(var d=0;d<h;++d){var e=f[d],g=a[e],i=w(b,e);g instanceof $b?(x(b,e,g.execute(i)),c=!0):i!==g&&(x(b,e,g),c=!0)}return c}}var i=c.table.core,j=i.schema.primaryKey,k=j.outbound,l=j.extractKey,m=b.db._options.modifyChunkSize||200,n=[],o=0,p=[],q=function(a,b){var c=b.failures;b=b.numFailures;o+=a-b;for(a=0,b=g(c);a<b.length;a++){var d=b[a];n.push(c[d])}};return b.clone().primaryKeys().then(function(b){var f=function(g){var h=Math.min(m,b.length-g);return i.getMany({trans:d,keys:b.slice(g,g+h),cache:"immutable"}).then(function(j){var n=[],o=[],p=k?[]:null,r=[];for(var s=0;s<h;++s){var t=j[s],u={value:z(t),primKey:b[g+s]};e.call(u,u.value,u)!==!1&&(u.value==null?r.push(b[g+s]):!k&&S(l(t),l(u.value))!==0?(r.push(b[g+s]),n.push(u.value)):(o.push(u.value),k&&p.push(b[g+s])))}var v=Sb(c)&&c.limit===Infinity&&(typeof a!=="function"||a===bc)&&{index:c.index,range:c.range};return Promise.resolve(n.length>0&&i.mutate({trans:d,type:"add",values:n}).then(function(a){for(var b in a.failures)r.splice(parseInt(b),1);q(n.length,a)})).then(function(){return(o.length>0||v&&typeof a==="object")&&i.mutate({trans:d,type:"put",keys:p,values:o,criteria:v,changeSpec:typeof a!=="function"&&a}).then(function(a){return q(o.length,a)})}).then(function(){return(r.length>0||v&&a===bc)&&i.mutate({trans:d,type:"delete",keys:r,criteria:v}).then(function(a){return q(r.length,a)})}).then(function(){return b.length>g+h&&f(g+m)})})};return f(0).then(function(){if(n.length>0)throw new ua("Error modifying one or more objects",n,o,p);return b.length})})})};a.prototype["delete"]=function(){var a=this._ctx,b=a.range;return Sb(a)&&(a.isPrimKey||b.type===3)?this._write(function(c){var d=a.table.core.schema.primaryKey,e=b;return a.table.core.count({trans:c,query:{index:d,range:e}}).then(function(b){return a.table.core.mutate({trans:c,type:"deleteRange",range:e}).then(function(a){var c=a.failures;a.lastResult;a.results;a=a.numFailures;if(a)throw new ua("Could not delete some values",Object.keys(c).map(function(a){return c[a]}),b-a);return b-a})})}):this.modify(bc)};return a}(),bc=function(a,b){return b.value=null};function cc(a){return Qb(ac.prototype,function(b,c){this.db=a;var d=Hb,e=null;if(c)try{d=c()}catch(a){e=a}c=b._ctx;b=c.table;var f=b.hook.reading.fire;this._ctx={table:b,index:c.index,isPrimKey:!c.index||b.schema.primKey.keyPath&&c.index===b.schema.primKey.name,range:d,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:Infinity,error:e,or:c.or,valueMapper:f!==Aa?f:null}})}function dc(a,b){return a<b?-1:a===b?0:1}function ec(a,b){return a>b?-1:a===b?0:1}function T(a,b,c){a=a instanceof lc?new a.Collection(a):a;a._ctx.error=c?new c(b):new TypeError(b);return a}function fc(a){return new a.Collection(a,function(){return kc("")}).limit(0)}function gc(a){return a==="next"?function(a){return a.toUpperCase()}:function(a){return a.toLowerCase()}}function hc(a){return a==="next"?function(a){return a.toLowerCase()}:function(a){return a.toUpperCase()}}function ic(b,c,d,e,a,f){var g=Math.min(b.length,e.length),h=-1;for(var i=0;i<g;++i){var j=c[i];if(j!==e[i]){if(a(b[i],d[i])<0)return b.substr(0,i)+d[i]+d.substr(i+1);if(a(b[i],e[i])<0)return b.substr(0,i)+e[i]+d.substr(i+1);return h>=0?b.substr(0,h)+c[h]+d.substr(h+1):null}a(b[i],j)<0&&(h=i)}if(g<e.length&&f==="next")return b+d.substr(b.length);return g<b.length&&f==="prev"?b.substr(0,d.length):h<0?null:b.substr(0,h)+e[h]+d.substr(h+1)}function jc(a,b,c,d){var e,f,g,h,i,j,k,l=c.length;if(!c.every(function(a){return typeof a==="string"}))return T(a,Bb);function m(a){e=gc(a);f=hc(a);g=a==="next"?dc:ec;var b=c.map(function(a){return{lower:f(a),upper:e(a)}}).sort(function(a,b){return g(a.lower,b.lower)});h=b.map(function(a){return a.upper});i=b.map(function(a){return a.lower});j=a;k=a==="next"?"":d}m("next");a=new a.Collection(a,function(){return U(h[0],i[l-1]+d)});a._ondirectionchange=function(a){m(a)};var n=0;a._addAlgorithm(function(a,c,d){var e=a.key;if(typeof e!=="string")return!1;var m=f(e);if(b(m,i,n))return!0;else{var o=null;for(var p=n;p<l;++p){var q=ic(e,m,h[p],i[p],g,j);q===null&&o===null?n=p+1:(o===null||g(o,q)>0)&&(o=q)}o!==null?c(function(){a["continue"](o+k)}):c(d);return!1}});return a}function U(a,b,c,d){return{type:2,lower:a,upper:b,lowerOpen:c,upperOpen:d}}function kc(a){return{type:1,lower:a,upper:a}}var lc=function(){function a(){}Object.defineProperty(a.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0});a.prototype.between=function(a,b,c,d){c=c!==!1;d=d===!0;try{return this._cmp(a,b)>0||this._cmp(a,b)===0&&(c||d)&&!(c&&d)?fc(this):new this.Collection(this,function(){return U(a,b,!c,!d)})}catch(a){return T(this,R)}};a.prototype.equals=function(a){return a==null?T(this,R):new this.Collection(this,function(){return kc(a)})};a.prototype.above=function(a){return a==null?T(this,R):new this.Collection(this,function(){return U(a,void 0,!0)})};a.prototype.aboveOrEqual=function(a){return a==null?T(this,R):new this.Collection(this,function(){return U(a,void 0,!1)})};a.prototype.below=function(a){return a==null?T(this,R):new this.Collection(this,function(){return U(void 0,a,!1,!0)})};a.prototype.belowOrEqual=function(a){return a==null?T(this,R):new this.Collection(this,function(){return U(void 0,a)})};a.prototype.startsWith=function(a){return typeof a!=="string"?T(this,Bb):this.between(a,a+zb,!0,!0)};a.prototype.startsWithIgnoreCase=function(a){return a===""?this.startsWith(a):jc(this,function(a,b){return a.indexOf(b[0])===0},[a],zb)};a.prototype.equalsIgnoreCase=function(a){return jc(this,function(a,b){return a===b[0]},[a],"")};a.prototype.anyOfIgnoreCase=function(){var a=B.apply(pa,arguments);return a.length===0?fc(this):jc(this,function(a,b){return b.indexOf(a)!==-1},a,"")};a.prototype.startsWithAnyOfIgnoreCase=function(){var a=B.apply(pa,arguments);return a.length===0?fc(this):jc(this,function(a,b){return b.some(function(b){return a.indexOf(b)===0})},a,zb)};a.prototype.anyOf=function(){var a=this,b=B.apply(pa,arguments),c=this._cmp;try{b.sort(c)}catch(a){return T(this,R)}if(b.length===0)return fc(this);var d=new this.Collection(this,function(){return U(b[0],b[b.length-1])});d._ondirectionchange=function(d){c=d==="next"?a._ascending:a._descending,b.sort(c)};var e=0;d._addAlgorithm(function(a,d,f){var g=a.key;while(c(g,b[e])>0){++e;if(e===b.length){d(f);return!1}}if(c(g,b[e])===0)return!0;else{d(function(){a["continue"](b[e])});return!1}});return d};a.prototype.notEqual=function(a){return this.inAnyRange([[Ab,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})};a.prototype.noneOf=function(){var a=B.apply(pa,arguments);if(a.length===0)return new this.Collection(this);try{a.sort(this._ascending)}catch(a){return T(this,R)}var b=a.reduce(function(a,b){return a?a.concat([[a[a.length-1][1],b]]):[[Ab,b]]},null);b.push([a[a.length-1],this.db._maxKey]);return this.inAnyRange(b,{includeLowers:!1,includeUppers:!1})};a.prototype.inAnyRange=function(c,d){var e=this,a=this._cmp,f=this._ascending,g=this._descending,h=this._min,i=this._max;if(c.length===0)return fc(this);if(!c.every(function(a){return a[0]!==void 0&&a[1]!==void 0&&f(a[0],a[1])<=0}))return T(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",D.InvalidArgument);var j=!d||d.includeLowers!==!1,k=d&&d.includeUppers===!0;function b(b,c){var d=0,e=b.length;for(;d<e;++d){var f=b[d];if(a(c[0],f[1])<0&&a(c[1],f[0])>0){f[0]=h(f[0],c[0]);f[1]=i(f[1],c[1]);break}}d===e&&b.push(c);return b}var l=f;function m(a,b){return l(a[0],b[0])}var n;try{n=c.reduce(b,[]),n.sort(m)}catch(a){return T(this,R)}var o=0,p=k?function(a){return f(a,n[o][1])>0}:function(a){return f(a,n[o][1])>=0},q=j?function(a){return g(a,n[o][0])>0}:function(a){return g(a,n[o][0])>=0};function r(a){return!p(a)&&!q(a)}var s=p;d=new this.Collection(this,function(){return U(n[0][0],n[n.length-1][1],!j,!k)});d._ondirectionchange=function(a){a==="next"?(s=p,l=f):(s=q,l=g),n.sort(m)};d._addAlgorithm(function(a,b,c){var d=a.key;while(s(d)){++o;if(o===n.length){b(c);return!1}}if(r(d))return!0;else if(e._cmp(d,n[o][1])===0||e._cmp(d,n[o][0])===0)return!1;else{b(function(){l===f?a["continue"](n[o][0]):a["continue"](n[o][1])});return!1}});return d};a.prototype.startsWithAnyOf=function(){var a=B.apply(pa,arguments);if(!a.every(function(a){return typeof a==="string"}))return T(this,"startsWithAnyOf() only works with strings");return a.length===0?fc(this):this.inAnyRange(a.map(function(a){return[a,a+zb]}))};return a}();function mc(a){return Qb(lc.prototype,function(b,c,d){this.db=a;this._ctx={table:b,index:c===":id"?null:c,or:d};this._cmp=this._ascending=S;this._descending=function(a,b){return S(b,a)};this._max=function(a,b){return S(a,b)>0?a:b};this._min=function(a,b){return S(a,b)<0?a:b};this._IDBKeyRange=a._deps.IDBKeyRange;if(!this._IDBKeyRange)throw new D.MissingAPI()})}function V(a){return L(function(b){nc(b);a(b.target.error);return!1})}function nc(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var oc="storagemutated",pc="x-storagemutated-1",W=Pb(null,oc),qc=function(){function a(){}a.prototype._lock=function(){v(!J.global);++this._reculock;this._reculock===1&&!J.global&&(J.lockOwnerFor=this);return this};a.prototype._unlock=function(){v(!J.global);if(--this._reculock===0){J.global||(J.lockOwnerFor=null);while(this._blockedFuncs.length>0&&!this._locked()){var a=this._blockedFuncs.shift();try{vb(a[1],a[0])}catch(a){}}}return this};a.prototype._locked=function(){return this._reculock&&J.lockOwnerFor!==this};a.prototype.create=function(a){var b=this;if(!this.mode)return this;var c=this.db.idbdb,d=this.db._state.dbOpenError;v(!this.idbtrans);if(!a&&!c)switch(d&&d.name){case"DatabaseClosedError":throw new D.DatabaseClosed(d);case"MissingAPIError":throw new D.MissingAPI(d.message,d);default:throw new D.OpenFailed(d)}if(!this.active)throw new D.TransactionInactive();v(this._completion._state===null);a=this.idbtrans=a||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):c.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}));a.onerror=L(function(c){nc(c),b._reject(a.error)});a.onabort=L(function(c){nc(c),b.active&&b._reject(new D.Abort(a.error)),b.active=!1,b.on("abort").fire(c)});a.oncomplete=L(function(){b.active=!1,b._resolve(),"mutatedParts"in a&&W.storagemutated.fire(a.mutatedParts)});return this};a.prototype._promise=function(a,b,c){var d=this;if(a==="readwrite"&&this.mode!=="readwrite")return Q(new D.ReadOnly("Transaction is readonly"));if(!this.active)return Q(new D.TransactionInactive());if(this._locked())return new K(function(e,f){d._blockedFuncs.push([function(){d._promise(a,b,c).then(e,f)},J])});else if(c)return N(function(){var a=new K(function(a,c){d._lock();var e=b(a,c,d);e&&e.then&&e.then(a,c)});a["finally"](function(){return d._unlock()});a._lib=!0;return a});else{var e=new K(function(a,c){var e=b(a,c,d);e&&e.then&&e.then(a,c)});e._lib=!0;return e}};a.prototype._root=function(){return this.parent?this.parent._root():this};a.prototype.waitFor=function(a){var b=this._root(),c=K.resolve(a);if(b._waitingFor)b._waitingFor=b._waitingFor.then(function(){return c});else{b._waitingFor=c;b._waitingQueue=[];var d=b.idbtrans.objectStore(b.storeNames[0]);(function a(){++b._spinCount;while(b._waitingQueue.length)b._waitingQueue.shift()();b._waitingFor&&(d.get(-Infinity).onsuccess=a)})()}var e=b._waitingFor;return new K(function(a,d){c.then(function(c){return b._waitingQueue.push(L(a.bind(null,c)))},function(a){return b._waitingQueue.push(L(d.bind(null,a)))})["finally"](function(){b._waitingFor===e&&(b._waitingFor=null)})})};a.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new D.Abort()))};a.prototype.table=function(a){var b=this._memoizedTables||(this._memoizedTables={});if(l(b,a))return b[a];var c=this.schema[a];if(!c)throw new D.NotFound("Table "+a+" not part of transaction");c=new this.db.Table(a,c,this);c.core=this.db.core.table(a);b[a]=c;return c};return a}();function rc(a){return Qb(qc.prototype,function(b,c,d,e,f){var g=this;this.db=a;this.mode=b;this.storeNames=c;this.schema=d;this.chromeTransactionDurability=e;this.idbtrans=null;this.on=Pb(this,"complete","error","abort");this.parent=f||null;this.active=!0;this._reculock=0;this._blockedFuncs=[];this._resolve=null;this._reject=null;this._waitingFor=null;this._waitingQueue=null;this._spinCount=0;this._completion=new K(function(a,b){g._resolve=a,g._reject=b});this._completion.then(function(){g.active=!1,g.on.complete.fire()},function(a){var b=g.active;g.active=!1;g.on.error.fire(a);g.parent?g.parent._reject(a):b&&g.idbtrans&&g.idbtrans.abort();return Q(a)})})}function sc(a,b,c,d,e,f,g){return{name:a,keyPath:b,unique:c,multi:d,auto:e,compound:f,src:(c&&!g?"&":"")+(d?"*":"")+(e?"++":"")+tc(b)}}function tc(a){return typeof a==="string"?a:a?"["+[].join.call(a,"+")+"]":""}function uc(a,b,c){return{name:a,primKey:b,indexes:c,mappedClass:null,idxByName:ba(c,function(a){return[a.name,a]})}}function vc(a){return a.length===1?a[0]:a}var wc=function(a){try{a.only([[]]);wc=function(){return[[]]};return[[]]}catch(a){wc=function(){return zb};return zb}};function xc(a){if(a==null)return function(){return void 0};else if(typeof a==="string")return yc(a);else return function(b){return w(b,a)}}function yc(a){var b=a.split(".");if(b.length===1)return function(b){return b[a]};else return function(b){return w(b,a)}}function zc(a){return[].slice.call(a)}var Ac=0;function Bc(a){return a==null?":id":typeof a==="string"?a:"[".concat(a.join("+"),"]")}function Cc(a,b,c){function d(a,b){var c=zc(a.objectStoreNames);return{schema:{name:a.name,tables:c.map(function(a){return b.objectStore(a)}).map(function(a){var b=a.keyPath,c=a.autoIncrement,d=h(b),e=b==null,f={};e={name:a.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:e,compound:d,keyPath:b,autoIncrement:c,unique:!0,extractKey:xc(b)},indexes:zc(a.indexNames).map(function(b){return a.index(b)}).map(function(b){var c=b.name,d=b.unique,e=b.multiEntry;b=b.keyPath;var a=h(b);c={name:c,compound:a,keyPath:b,unique:d,multiEntry:e,extractKey:xc(b)};f[Bc(b)]=c;return c}),getIndexByKeyPath:function(a){return f[Bc(a)]}};f[":id"]=e.primaryKey;b!=null&&(f[Bc(b)]=e.primaryKey);return e})},hasGetAll:c.length>0&&"getAll"in b.objectStore(c[0])&&!(typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function e(a){if(a.type===3)return null;if(a.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var c=a.lower,d=a.upper,e=a.lowerOpen;a=a.upperOpen;c=c===void 0?d===void 0?null:b.upperBound(d,!!a):d===void 0?b.lowerBound(c,!!e):b.bound(c,d,!!e,!!a);return c}function f(b){var c=b.name;function d(d){var f=d.trans,b=d.type,a=d.keys,g=d.values,h=d.range;return new Promise(function(d,i){d=L(d);i=f.objectStore(c);var j=i.keyPath==null,k=b==="put"||b==="add";if(!k&&b!=="delete"&&b!=="deleteRange")throw new Error("Invalid operation type: "+b);var l=(a||g||{length:1}).length;if(a&&g&&a.length!==g.length)throw new Error("Given keys array must have same length as given values array.");if(l===0)return d({numFailures:0,failures:{},results:[],lastResult:void 0});var m,n=[],o=[],p=0,q=function(a){++p,nc(a)};if(b==="deleteRange"){if(h.type===4)return d({numFailures:p,failures:o,results:[],lastResult:void 0});h.type===3?n.push(m=i.clear()):n.push(m=i["delete"](e(h)))}else{j=k?j?[g,a]:[g,null]:[a,null];var r=j[0];j=j[1];if(k)for(k=0;k<l;++k)n.push(m=j&&j[k]!==void 0?i[b](r[k],j[k]):i[b](r[k])),m.onerror=q;else for(k=0;k<l;++k)n.push(m=i[b](r[k])),m.onerror=q}var s=function(c){c=c.target.result;n.forEach(function(a,b){return a.error!=null&&(o[b]=a.error)});d({numFailures:p,failures:o,results:b==="delete"?a:n.map(function(a){return a.result}),lastResult:c})};m.onerror=function(a){q(a),s(a)};m.onsuccess=s})}function a(b){var d=b.trans,f=b.values,a=b.query,g=b.reverse,h=b.unique;return new Promise(function(b,i){b=L(b);var j=a.index,k=a.range,l=d.objectStore(c);l=j.isPrimaryKey?l:l.index(j.name);j=g?h?"prevunique":"prev":h?"nextunique":"next";var m=f||!("openKeyCursor"in l)?l.openCursor(e(k),j):l.openKeyCursor(e(k),j);m.onerror=V(i);m.onsuccess=L(function(a){var c=m.result;if(!c){b(null);return}c.___id=++Ac;c.done=!1;var e=c["continue"].bind(c),f=c.continuePrimaryKey;f&&(f=f.bind(c));var g=c.advance.bind(c);a=function(){throw new Error("Cursor not started")};var h=function(){throw new Error("Cursor not stopped")};c.trans=d;c.stop=c["continue"]=c.continuePrimaryKey=c.advance=a;c.fail=L(i);c.next=function(){var a=this,b=1;return this.start(function(){return b--?a["continue"]():a.stop()}).then(function(){return a})};c.start=function(a){var b=new Promise(function(a,b){a=L(a),m.onerror=V(b),c.fail=b,c.stop=function(b){c.stop=c["continue"]=c.continuePrimaryKey=c.advance=h,a(b)}}),d=function(){if(m.result)try{a()}catch(a){c.fail(a)}else c.done=!0,c.start=function(){throw new Error("Cursor behind last entry")},c.stop()};m.onsuccess=L(function(a){m.onsuccess=d,d()});c["continue"]=e;c.continuePrimaryKey=f;c.advance=g;d();return b};b(c)},i)})}function f(a){return function(b){return new Promise(function(f,g){f=L(f);var h=b.trans,i=b.values,j=b.limit,d=b.query,k=j===Infinity?void 0:j,l=d.index;d=d.range;h=h.objectStore(c);h=l.isPrimaryKey?h:h.index(l.name);l=e(d);if(j===0)return f({result:[]});if(a){d=i?h.getAll(l,k):h.getAllKeys(l,k);d.onsuccess=function(a){return f({result:a.target.result})};d.onerror=V(g)}else{var m=0,n=i||!("openKeyCursor"in h)?h.openCursor(l):h.openKeyCursor(l),o=[];n.onsuccess=function(a){a=n.result;if(!a)return f({result:o});o.push(i?a.value:a.primaryKey);if(++m===j)return f({result:o});a["continue"]()};n.onerror=V(g)}})}}return{name:c,schema:b,mutate:d,getMany:function(b){var d=b.trans,a=b.keys;return new Promise(function(b,e){b=L(b);var f=d.objectStore(c),g=a.length,h=new Array(g),i=0,j=0,k=function(a){a=a.target;(h[a._pos]=a.result)!=null;++j===i&&b(h)};e=V(e);for(var l=0;l<g;++l){var m=a[l];m!=null&&(m=f.get(a[l]),m._pos=l,m.onsuccess=k,m.onerror=e,++i)}i===0&&b(h)})},get:function(a){var b=a.trans,d=a.key;return new Promise(function(a,e){a=L(a);var f=b.objectStore(c);f=f.get(d);f.onsuccess=function(b){return a(b.target.result)};f.onerror=V(e)})},query:f(g),openCursor:a,count:function(b){var a=b.query,d=b.trans,f=a.index,g=a.range;return new Promise(function(a,b){var h=d.objectStore(c);h=f.isPrimaryKey?h:h.index(f.name);var i=e(g);i=i?h.count(i):h.count();i.onsuccess=L(function(b){return a(b.target.result)});i.onerror=V(b)})}}}d=d(a,c);c=d.schema;var g=d.hasGetAll;d=c.tables.map(function(a){return f(a)});var i={};d.forEach(function(a){return i[a.name]=a});return{stack:"dbcore",transaction:a.transaction.bind(a),table:function(a){var b=i[a];if(!b)throw new Error("Table '".concat(a,"' not found"));return i[a]},MIN_KEY:-Infinity,MAX_KEY:wc(b),schema:c}}function Dc(a,b){return b.reduce(function(a,b){b=b.create;return d(d({},a),b(a))},a)}function Ec(a,b,c,d){var e=c.IDBKeyRange;c.indexedDB;c=Dc(Cc(b,e,d),a.dbcore);return{dbcore:c}}function Fc(a,b){var c=b.db;c=Ec(a._middlewares,c,a._deps,b);a.core=c.dbcore;a.tables.forEach(function(b){var c=b.name;a.core.schema.tables.some(function(a){return a.name===c})&&(b.core=a.core.table(c),a[c]instanceof a.Table&&(a[c].core=b.core))})}function Gc(a,b,c,d){c.forEach(function(c){var e=d[c];b.forEach(function(b){var d=r(b,c);(!d||"value"in d&&d.value===void 0)&&(b===a.Transaction.prototype||b instanceof a.Transaction?o(b,c,{get:function(){return this.table(c)},set:function(a){n(this,c,{value:a,writable:!0,configurable:!0,enumerable:!0})}}):b[c]=new a.Table(c,e))})})}function Hc(a,b){b.forEach(function(b){for(var c in b)b[c]instanceof a.Table&&delete b[c]})}function Ic(a,b){return a._cfg.version-b._cfg.version}function Jc(a,b,c,d){var e=a._dbSchema;c.objectStoreNames.contains("$meta")&&!e.$meta&&(e.$meta=uc("$meta",Wc("")[0],[]),a._storeNames.push("$meta"));var f=a._createTransaction("readwrite",a._storeNames,e);f.create(c);f._completion["catch"](d);var h=f._reject.bind(f),i=J.transless||J;N(function(){J.trans=f;J.transless=i;if(b===0)g(e).forEach(function(a){Oc(c,a,e[a].primKey,e[a].indexes)}),Fc(a,c),K.follow(function(){return a.on.populate.fire(f)})["catch"](h);else{Fc(a,c);return Lc(a,f,b).then(function(b){return Mc(a,b,f,c)})["catch"](h)}})}function Kc(a,b){Pc(a._dbSchema,b);b.db.version%10===0&&!b.objectStoreNames.contains("$meta")&&b.db.createObjectStore("$meta").add(Math.ceil(b.db.version/10-1),"version");var c=Sc(a,a.idbdb,b);Vc(a,a._dbSchema,b);c=Nc(c,a._dbSchema);a=function(a){if(a.change.length||a.recreate)return{value:void 0};var c=b.objectStore(a.name);a.add.forEach(function(a){G&&!1,Rc(c,a)})};for(var d=0,c=c.change;d<c.length;d++){var e=c[d];e=a(e);if(typeof e==="object")return e.value}}function Lc(a,b,c){if(b.storeNames.includes("$meta"))return b.table("$meta").get("version").then(function(a){return a!=null?a:c});else return K.resolve(c)}function Mc(a,b,c,d){var e=[],f=a._versions,h=a._dbSchema=Sc(a,a.idbdb,d);f=f.filter(function(a){return a._cfg.version>=b});if(f.length===0)return K.resolve();f.forEach(function(f){e.push(function(){var e=h,i=f._cfg.dbschema;Vc(a,e,d);Vc(a,i,d);h=a._dbSchema=i;var j=Nc(e,i);j.add.forEach(function(a){Oc(d,a[0],a[1].primKey,a[1].indexes)});j.change.forEach(function(a){if(a.recreate)throw new D.Upgrade("Not yet support for changing primary key");else{var b=d.objectStore(a.name);a.add.forEach(function(a){return Rc(b,a)});a.change.forEach(function(a){b.deleteIndex(a.name),Rc(b,a)});a.del.forEach(function(a){return b.deleteIndex(a)})}});var k=f._cfg.contentUpgrade;if(k&&f._cfg.version>b){Fc(a,d);c._memoizedTables={};var l=da(i);j.del.forEach(function(a){l[a]=e[a]});Hc(a,[a.Transaction.prototype]);Gc(a,[a.Transaction.prototype],g(l),l);c.schema=l;var m=qa(k);m&&qb();var n;i=K.follow(function(){n=k(c);if(n&&m){var a=O.bind(null,null);n.then(a,a)}});return n&&typeof n.then==="function"?K.resolve(n):i.then(function(){return n})}}),e.push(function(b){var d=f._cfg.dbschema;Qc(d,b);Hc(a,[a.Transaction.prototype]);Gc(a,[a.Transaction.prototype],a._storeNames,a._dbSchema);c.schema=a._dbSchema}),e.push(function(b){a.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(a.idbdb.version/10)===f._cfg.version?(a.idbdb.deleteObjectStore("$meta"),delete a._dbSchema.$meta,a._storeNames=a._storeNames.filter(function(a){return a!=="$meta"})):b.objectStore("$meta").put(f._cfg.version,"version"))})});function i(){return e.length?K.resolve(e.shift()(c.idbtrans)).then(i):K.resolve()}return i().then(function(){Pc(h,d)})}function Nc(a,b){var c={del:[],add:[],change:[]},d;for(d in a)b[d]||c.del.push(d);for(d in b){var e=a[d],f=b[d];if(!e)c.add.push([d,f]);else{var g={name:d,def:f,recreate:!1,del:[],add:[],change:[]};if(""+(e.primKey.keyPath||"")!==""+(f.primKey.keyPath||"")||e.primKey.auto!==f.primKey.auto)g.recreate=!0,c.change.push(g);else{e=e.idxByName;f=f.idxByName;var h;for(h in e)f[h]||g.del.push(h);for(h in f){var i=e[h],j=f[h];!i?g.add.push(j):i.src!==j.src&&g.change.push(j)}(g.del.length>0||g.add.length>0||g.change.length>0)&&c.change.push(g)}}}return c}function Oc(a,b,c,d){var e=a.db.createObjectStore(b,c.keyPath?{keyPath:c.keyPath,autoIncrement:c.auto}:{autoIncrement:c.auto});d.forEach(function(a){return Rc(e,a)});return e}function Pc(a,b){g(a).forEach(function(c){b.db.objectStoreNames.contains(c)||(G&&!1,Oc(b,c,a[c].primKey,a[c].indexes))})}function Qc(a,b){[].slice.call(b.db.objectStoreNames).forEach(function(c){return a[c]==null&&b.db.deleteObjectStore(c)})}function Rc(a,b){a.createIndex(b.name,b.keyPath,{unique:b.unique,multiEntry:b.multi})}function Sc(a,b,c){var d={};a=t(b.objectStoreNames,0);a.forEach(function(a){var b=c.objectStore(a),e=b.keyPath,f=sc(tc(e),e||"",!0,!1,!!b.autoIncrement,e&&typeof e!=="string",!0),g=[];for(var h=0;h<b.indexNames.length;++h){var i=b.index(b.indexNames[h]);e=i.keyPath;i=sc(i.name,e,!!i.unique,!!i.multiEntry,!1,e&&typeof e!=="string",!1);g.push(i)}d[a]=uc(a,f,g)});return d}function Tc(a,b,c){a.verno=b.version/10;c=a._dbSchema=Sc(a,b,c);a._storeNames=t(b.objectStoreNames,0);Gc(a,[a._allTables],g(c),c)}function Uc(a,b){b=Sc(a,a.idbdb,b);b=Nc(b,a._dbSchema);return!(b.add.length||b.change.some(function(a){return a.add.length||a.change.length}))}function Vc(a,b,c){var d=c.db.objectStoreNames;for(var e=0;e<d.length;++e){var g=d[e],h=c.objectStore(g);a._hasGetAll="getAll"in h;for(var i=0;i<h.indexNames.length;++i){var j=h.indexNames[i],k=h.index(j).keyPath;k=typeof k==="string"?k:"["+t(k).join("+")+"]";if(b[g]){var l=b[g].idxByName[k];l&&(l.name=j,delete b[g].idxByName[k],b[g].idxByName[j]=l)}}}typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&f.WorkerGlobalScope&&f instanceof f.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function Wc(a){return a.split(",").map(function(a,b){a=a.trim();var c=a.replace(/([&*]|\+\+)/g,""),d=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return sc(c,d||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),h(d),b===0)})}var Xc=function(){function a(){}a.prototype._parseStoresSpec=function(a,b){g(a).forEach(function(c){if(a[c]!==null){var d=Wc(a[c]),e=d.shift();e.unique=!0;if(e.multi)throw new D.Schema("Primary key cannot be multi-valued");d.forEach(function(a){if(a.auto)throw new D.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new D.Schema("Index must have a name and cannot be an empty string")});b[c]=uc(c,e,d)}})};a.prototype.stores=function(a){var b=this.db;this._cfg.storesSource=this._cfg.storesSource?i(this._cfg.storesSource,a):a;a=b._versions;var c={},d={};a.forEach(function(a){i(c,a._cfg.storesSource),d=a._cfg.dbschema={},a._parseStoresSpec(c,d)});b._dbSchema=d;Hc(b,[b._allTables,b,b.Transaction.prototype]);Gc(b,[b._allTables,b,b.Transaction.prototype,this._cfg.tables],g(d),d);b._storeNames=g(d);return this};a.prototype.upgrade=function(a){this._cfg.contentUpgrade=Ga(this._cfg.contentUpgrade||E,a);return this};return a}();function Yc(a){return Qb(Xc.prototype,function(b){this.db=a,this._cfg={version:b,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Zc(a,b){var c=a._dbNamesDB;c||(c=a._dbNamesDB=new Y(Db,{addons:[],indexedDB:a,IDBKeyRange:b}),c.version(1).stores({dbnames:"name"}));return c.table("dbnames")}function $c(a){return a&&typeof a.databases==="function"}function ad(a){var b=a.indexedDB;a=a.IDBKeyRange;return $c(b)?Promise.resolve(b.databases()).then(function(a){return a.map(function(a){return a.name}).filter(function(a){return a!==Db})}):Zc(b,a).toCollection().primaryKeys()}function bd(a,b){var c=a.indexedDB;a=a.IDBKeyRange;!$c(c)&&b!==Db&&Zc(c,a).put({name:b})["catch"](E)}function cd(a,b){var c=a.indexedDB;a=a.IDBKeyRange;!$c(c)&&b!==Db&&Zc(c,a)["delete"](b)["catch"](E)}function dd(a){return N(function(){J.letThrough=!0;return a()})}function ed(){var a=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!a||!indexedDB.databases)return Promise.resolve();var b;return new Promise(function(a){var c=function(){return indexedDB.databases()["finally"](a)};b=setInterval(c,100);c()})["finally"](function(){return clearInterval(b)})}function fd(a){return!("from"in a)}var X=function(a,b){if(this)i(this,arguments.length?{d:1,from:a,to:arguments.length>1?b:a}:{d:0});else{var c=new X();a&&"d"in a&&i(c,a);return c}};m(X.prototype,(H={add:function(a){hd(this,a);return this},addKey:function(a){gd(this,a,a);return this},addKeys:function(a){var b=this;a.forEach(function(a){return gd(b,a,a)});return this}},H[na]=function(){return jd(this)},H));function gd(a,b,c){var d=S(b,c);if(isNaN(d))return;if(d>0)throw RangeError();if(fd(a))return i(a,{from:b,to:c,d:1});d=a.l;var e=a.r;if(S(c,a.from)<0){d?gd(d,b,c):a.l={from:b,to:c,d:1,l:null,r:null};return kd(a)}if(S(b,a.to)>0){e?gd(e,b,c):a.r={from:b,to:c,d:1,l:null,r:null};return kd(a)}S(b,a.from)<0&&(a.from=b,a.l=null,a.d=e?e.d+1:1);S(c,a.to)>0&&(a.to=c,a.r=null,a.d=a.l?a.l.d+1:1);b=!a.r;d&&!a.l&&hd(a,d);e&&b&&hd(a,e)}function hd(a,b){function c(a,b){var d=b.from,e=b.to,f=b.l;b=b.r;gd(a,d,e);f&&c(a,f);b&&c(a,b)}fd(b)||c(a,b)}function id(a,b){b=jd(b);var c=b.next();if(c.done)return!1;var d=c.value;a=jd(a);var e=a.next(d.from),f=e.value;while(!c.done&&!e.done){if(S(f.from,d.to)<=0&&S(f.to,d.from)>=0)return!0;S(d.from,f.from)<0?d=(c=b.next(f.from)).value:f=(e=a.next(d.from)).value}return!1}function jd(a){var b=fd(a)?null:{s:0,n:a};return{next:function(a){var c=arguments.length>0;while(b)switch(b.s){case 0:b.s=1;if(c)while(b.n.l&&S(a,b.n.from)<0)b={up:b,n:b.n.l,s:1};else while(b.n.l)b={up:b,n:b.n.l,s:1};case 1:b.s=2;if(!c||S(a,b.n.to)<=0)return{value:b.n,done:!1};case 2:if(b.n.r){b.s=3;b={up:b,n:b.n.r,s:0};continue}case 3:b=b.up}return{done:!0}}}}function kd(a){var b;b=(((b=a.r)===null||b===void 0?void 0:b.d)||0)-(((b=a.l)===null||b===void 0?void 0:b.d)||0);b=b>1?"r":b<-1?"l":"";if(b){var c=b==="r"?"l":"r",e=d({},a),f=a[b];a.from=f.from;a.to=f.to;a[b]=f[b];e[b]=f[c];a[c]=e;e.d=ld(e)}a.d=ld(a)}function ld(a){var b=a.r;a=a.l;return(b?a?Math.max(b.d,a.d):b.d:a?a.d:0)+1}function md(a,b){g(b).forEach(function(c){a[c]?hd(a[c],b[c]):a[c]=ha(b[c])});return a}function nd(a,b){return a.all||b.all||Object.keys(a).some(function(c){return b[c]&&id(b[c],a[c])})}var od={},pd={},qd=!1;function rd(a,b){md(pd,a),qd||(qd=!0,setTimeout(function(){qd=!1;var a=pd;pd={};sd(a,!1)},0))}function sd(a,b){b===void 0&&(b=!1);var c=new Set();if(a.all)for(var d=0,e=Object.values(od);d<e.length;d++){var f=e[d];td(f,a,c,b)}else for(e in a){d=/^idb\:\/\/(.*)\/(.*)\//.exec(e);if(d){var g=d[1];d=d[2];var f=od["idb://".concat(g,"/").concat(d)];f&&td(f,a,c,b)}}c.forEach(function(a){return a()})}function td(a,b,c,d){var e=[];for(var f=0,g=Object.entries(a.queries.query);f<g.length;f++){var h=g[f],i=h[0];h=h[1];var j=[];for(var k=0,h=h;k<h.length;k++){var l=h[k];nd(b,l.obsSet)?l.subscribers.forEach(function(a){return c.add(a)}):d&&j.push(l)}d&&e.push([i,j])}if(d)for(l=0,k=e;l<k.length;l++){h=k[l];var i=h[0],j=h[1];a.queries.query[i]=j}}function ud(a){var b=a._state,c=a._deps.indexedDB;if(b.isBeingOpened||a.idbdb)return b.dbReadyPromise.then(function(){return b.dbOpenError?Q(b.dbOpenError):a});b.isBeingOpened=!0;b.dbOpenError=null;b.openComplete=!1;var d=b.openCanceller,e=Math.round(a.verno*10),f=!1;function g(){if(b.openCanceller!==d)throw new D.DatabaseClosed("db.open() was cancelled")}var h=b.dbReadyResolve,i=null,j=!1,k=function(){return new K(function(d,h){g();if(!c)throw new D.MissingAPI();var l=a.name,m=b.autoSchema||!e?c.open(l):c.open(l,e);if(!m)throw new D.MissingAPI();m.onerror=V(h);m.onblocked=L(a._fireOnBlocked);m.onupgradeneeded=L(function(d){i=m.transaction;if(b.autoSchema&&!a._options.allowEmptyDB){m.onerror=nc;i.abort();m.result.close();var e=c.deleteDatabase(l);e.onsuccess=e.onerror=L(function(){h(new D.NoSuchDatabase("Database ".concat(l," doesnt exist")))})}else{i.onerror=V(h);e=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;j=e<1;a.idbdb=m.result;f&&Kc(a,i);Jc(a,e/10,i,h)}},h);m.onsuccess=L(function(){i=null;var c=a.idbdb=m.result,g=t(c.objectStoreNames);if(g.length>0)try{g=c.transaction(vc(g),"readonly");if(b.autoSchema)Tc(a,c,g);else{Vc(a,a._dbSchema,g);if(!Uc(a,g)&&!f){c.close();e=c.version+1;f=!0;return d(k())}}Fc(a,g)}catch(a){}Cb.push(a);c.onversionchange=L(function(c){b.vcFired=!0,a.on("versionchange").fire(c)});c.onclose=L(function(b){a.on("close").fire(b)});j&&bd(a._deps,l);d()},h)})["catch"](function(a){switch(a===null||a===void 0?void 0:a.name){case"UnknownError":if(b.PR1398_maxLoop>0){b.PR1398_maxLoop--;return k()}break;case"VersionError":if(e>0){e=0;return k()}break}return K.reject(a)})};return K.race([d,(typeof navigator==="undefined"?K.resolve():ed()).then(k)]).then(function(){g();b.onReadyBeingFired=[];return K.resolve(dd(function(){return a.on.ready.fire(a.vip)})).then(function c(){if(b.onReadyBeingFired.length>0){var d=b.onReadyBeingFired.reduce(Ga,E);b.onReadyBeingFired=[];return K.resolve(dd(function(){return d(a.vip)})).then(c)}})})["finally"](function(){b.openCanceller===d&&(b.onReadyBeingFired=null,b.isBeingOpened=!1)})["catch"](function(c){b.dbOpenError=c;try{i&&i.abort()}catch(a){}d===b.openCanceller&&a._close();return Q(c)})["finally"](function(){b.openComplete=!0,h()}).then(function(){if(j){var b={};a.tables.forEach(function(c){c.schema.indexes.forEach(function(d){d.name&&(b["idb://".concat(a.name,"/").concat(c.name,"/").concat(d.name)]=new X(-Infinity,[[[]]]))}),b["idb://".concat(a.name,"/").concat(c.name,"/")]=b["idb://".concat(a.name,"/").concat(c.name,"/:dels")]=new X(-Infinity,[[[]]])});W(oc).fire(b);sd(b,!0)}return a})}function vd(a){var b=function(b){return a.next(b)},c=function(b){return a["throw"](b)},d=f(b),e=f(c);function f(a){return function(b){b=a(b);var c=b.value;return b.done?c:!c||typeof c.then!=="function"?h(c)?Promise.all(c).then(d,e):d(c):c.then(d,e)}}return f(b)()}function wd(a,b,c){var d=arguments.length;if(d<2)throw new D.InvalidArgument("Too few arguments");var e=new Array(d-1);while(--d)e[d-1]=arguments[d];c=e.pop();var f=fa(e);return[a,f,c]}function xd(a,b,c,d,e){return K.resolve().then(function(){var f=J.transless||J,g=a._createTransaction(b,c,a._dbSchema,d);g.explicit=!0;f={trans:g,transless:f};if(d)g.idbtrans=d.idbtrans;else try{g.create(),g.idbtrans._explicit=!0,a._state.PR1398_maxLoop=3}catch(d){if(d.name===wa.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0){a.close({disableAutoOpen:!1});return a.open().then(function(){return xd(a,b,c,null,e)})}return Q(d)}var h=qa(e);h&&qb();var i;f=K.follow(function(){i=e.call(g,g);if(i)if(h){var a=O.bind(null,null);i.then(a,a)}else typeof i.next==="function"&&typeof i["throw"]==="function"&&(i=vd(i))},f);return(i&&typeof i.then==="function"?K.resolve(i).then(function(a){return g.active?a:Q(new D.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):f.then(function(){return i})).then(function(a){d&&g._resolve();return g._completion.then(function(){return a})})["catch"](function(a){g._reject(a);return Q(a)})})}function yd(a,b,c){a=h(a)?a.slice():[a];for(var d=0;d<c;++d)a.push(b);return a}function zd(a){return d(d({},a),{table:function(b){var c=a.table(b);b=c.schema;var e={},f=[];function g(a,b,c){var h=Bc(a),i=e[h]=e[h]||[],j=a==null?0:typeof a==="string"?1:a.length,k=b>0;h=d(d({},c),{name:k?"".concat(h,"(virtual-from:").concat(c.name,")"):c.name,lowLevelIndex:c,isVirtual:k,keyTail:b,keyLength:j,extractKey:xc(a),unique:!k&&c.unique});i.push(h);h.isPrimaryKey||f.push(h);if(j>1){k=j===2?a[0]:a.slice(0,j-1);g(k,b+1,c)}i.sort(function(a,b){return a.keyTail-b.keyTail});return h}var h=g(b.primaryKey.keyPath,0,b.primaryKey);e[":id"]=[h];for(var i=0,j=b.indexes;i<j.length;i++){var k=j[i];g(k.keyPath,0,k)}function l(a){a=e[Bc(a)];return a&&a[0]}function m(b,c){return{type:b.type===1?2:b.type,lower:yd(b.lower,b.lowerOpen?a.MAX_KEY:a.MIN_KEY,c),lowerOpen:!0,upper:yd(b.upper,b.upperOpen?a.MIN_KEY:a.MAX_KEY,c),upperOpen:!0}}function n(b){var a=b.query.index;return a.isVirtual?d(d({},b),{query:{index:a.lowLevelIndex,range:m(b.query.range,a.keyTail)}}):b}k=d(d({},c),{schema:d(d({},b),{primaryKey:h,indexes:f,getIndexByKeyPath:l}),count:function(a){return c.count(n(a))},query:function(a){return c.query(n(a))},openCursor:function(d){var b=d.query.index,e=b.keyTail,f=b.isVirtual,g=b.keyLength;if(!f)return c.openCursor(d);function h(b){function c(c){c!=null?b["continue"](yd(c,d.reverse?a.MAX_KEY:a.MIN_KEY,e)):d.unique?b["continue"](b.key.slice(0,g).concat(d.reverse?a.MIN_KEY:a.MAX_KEY,e)):b["continue"]()}c=Object.create(b,{"continue":{value:c},continuePrimaryKey:{value:function(d,c){b.continuePrimaryKey(yd(d,a.MAX_KEY,e),c)}},primaryKey:{get:function(){return b.primaryKey}},key:{get:function(){var a=b.key;return g===1?a[0]:a.slice(0,g)}},value:{get:function(){return b.value}}});return c}return c.openCursor(n(d)).then(function(a){return a&&h(a)})}});return k}})}var Ad={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:zd};function Bd(a,b,c,d){c=c||{};d=d||"";g(a).forEach(function(e){if(!l(b,e))c[d+e]=void 0;else{var f=a[e],g=b[e];if(typeof f==="object"&&typeof g==="object"&&f&&g){var h=ma(f),i=ma(g);h!==i?c[d+e]=b[e]:h==="Object"?Bd(f,g,c,d+e+"."):f!==g&&(c[d+e]=b[e])}else f!==g&&(c[d+e]=b[e])}});g(b).forEach(function(e){l(a,e)||(c[d+e]=b[e])});return c}function Cd(a,b){return b.type==="delete"?b.keys:b.keys||b.values.map(a.extractKey)}var Dd={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return d(d({},a),{table:function(b){var c=a.table(b),f=c.schema.primaryKey,g=d(d({},c),{mutate:function(a){var g=J.trans,h=g.table(b).hook,i=h.deleting,j=h.creating,k=h.updating;switch(a.type){case"add":if(j.fire===E)break;return g._promise("readwrite",function(){return m(a)},!0);case"put":if(j.fire===E&&k.fire===E)break;return g._promise("readwrite",function(){return m(a)},!0);case"delete":if(i.fire===E)break;return g._promise("readwrite",function(){return m(a)},!0);case"deleteRange":if(i.fire===E)break;return g._promise("readwrite",function(){return n(a)},!0)}return c.mutate(a);function m(b){var g=J.trans,a=b.keys||Cd(f,b);if(!a)throw new Error("Keys missing");b=b.type==="add"||b.type==="put"?d(d({},b),{keys:a}):d({},b);b.type!=="delete"&&(b.values=e([],b.values,!0));b.keys&&(b.keys=e([],b.keys,!0));return Ed(c,b,a).then(function(d){var e=a.map(function(a,c){var e=d[c],h={onerror:null,onsuccess:null};if(b.type==="delete")i.fire.call(h,a,e,g);else if(b.type==="add"||e===void 0){var m=j.fire.call(h,a,b.values[c],g);a==null&&m!=null&&(a=m,b.keys[c]=a,f.outbound||x(b.values[c],f.keyPath,a))}else{m=Bd(e,b.values[c]);var n=k.fire.call(h,m,a,e,g);if(n){var o=b.values[c];Object.keys(n).forEach(function(a){l(o,a)?o[a]=n[a]:x(o,a,n[a])})}}return h});return c.mutate(b).then(function(c){var f=c.failures,g=c.results,h=c.numFailures;c=c.lastResult;for(var i=0;i<a.length;++i){var j=g?g[i]:a[i],k=e[i];j==null?k.onerror&&k.onerror(f[i]):k.onsuccess&&k.onsuccess(b.type==="put"&&d[i]?b.values[i]:j)}return{failures:f,results:g,numFailures:h,lastResult:c}})["catch"](function(a){e.forEach(function(b){return b.onerror&&b.onerror(a)});return Promise.reject(a)})})}function n(a){return o(a.trans,a.range,1e4)}function o(a,b,e){return c.query({trans:a,values:!1,query:{index:f,range:b},limit:e}).then(function(c){var f=c.result;return m({type:"delete",keys:f,trans:a}).then(function(c){if(c.numFailures>0)return Promise.reject(c.failures[0]);if(f.length<e)return{failures:[],numFailures:0,lastResult:void 0};else return o(a,d(d({},b),{lower:f[f.length-1],lowerOpen:!0}),e)})})}}});return g}})}};function Ed(a,b,c){return b.type==="add"?Promise.resolve([]):a.getMany({trans:b.trans,keys:c,cache:"immutable"})}function Fd(a,b,c){try{if(!b)return null;if(b.keys.length<a.length)return null;var d=[];for(var e=0,f=0;e<b.keys.length&&f<a.length;++e){if(S(b.keys[e],a[f])!==0)continue;d.push(c?z(b.values[e]):b.values[e]);++f}return d.length===a.length?d:null}catch(a){return null}}var Gd={stack:"dbcore",level:-1,create:function(a){return{table:function(b){var c=a.table(b);return d(d({},c),{getMany:function(a){if(!a.cache)return c.getMany(a);var b=Fd(a.keys,a.trans._cache,a.cache==="clone");return b?K.resolve(b):c.getMany(a).then(function(b){a.trans._cache={keys:a.keys,values:a.cache==="clone"?z(b):b};return b})},mutate:function(a){a.type!=="add"&&(a.trans._cache=null);return c.mutate(a)}})}}}};function Hd(a,b){return a.trans.mode==="readonly"&&!!a.subscr&&!a.trans.explicit&&a.trans.db._options.cache!=="disabled"&&!b.schema.primaryKey.outbound}function Id(a,b){switch(a){case"query":return b.values&&!b.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Jd={stack:"dbcore",level:0,name:"Observability",create:function(a){var b=a.schema.name,c=new X(a.MIN_KEY,a.MAX_KEY);return d(d({},a),{transaction:function(b,c,d){if(J.subscr&&c!=="readonly")throw new D.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(J.querier));return a.transaction(b,c,d)},table:function(e){var f=a.table(e),i=f.schema,j=i.primaryKey,k=j.extractKey,l=j.outbound,m=d(d({},f),{mutate:function(g){var k=g.trans,l=g.mutatedParts||(g.mutatedParts={}),m=function(a){a="idb://".concat(b,"/").concat(e,"/").concat(a);return l[a]||(l[a]=new X())},n=m(""),o=m(":dels"),d=g.type,p=g.type==="deleteRange"?[g.range]:g.type==="delete"?[g.keys]:g.values.length<50?[Cd(j,g).filter(function(a){return a}),g.values]:[],a=p[0];p=p[1];var q=g.trans._cache;if(h(a)){n.addKeys(a);d=d==="delete"||a.length===p.length?Fd(a,q):null;d||o.addKeys(a);(d||p)&&Kd(m,i,d,p)}else if(a){q={from:a.lower,to:a.upper};o.add(q);n.add(q)}else n.add(c),o.add(c),i.indexes.forEach(function(a){return m(a.name).add(c)});return f.mutate(g).then(function(b){a&&(g.type==="add"||g.type==="put")&&n.addKeys(b.results);k.mutatedParts=md(k.mutatedParts||{},l);return b})}}),n=function(b){b=b.query;var c=b.index;b=b.range;return[c,new X((c=b.lower)!==null&&c!==void 0?c:a.MIN_KEY,(c=b.upper)!==null&&c!==void 0?c:a.MAX_KEY)]},o={get:function(a){return[j,new X(a.key)]},getMany:function(a){return[j,new X().addKeys(a.keys)]},count:n,query:n,openCursor:n};g(o).forEach(function(a){m[a]=function(g){var h=J.subscr,i=!!h,j=Hd(J,f)&&Id(a,g),m=j?g.obsSet={}:h;if(i){var n=function(a){a="idb://".concat(b,"/").concat(e,"/").concat(a);return m[a]||(m[a]=new X())},p=n(""),q=n(":dels"),r=o[a](g),s=r[0],t=r[1];a==="query"&&s.isPrimaryKey&&!g.values?q.add(t):n(s.name||"").add(t);if(!s.isPrimaryKey)if(a==="count")q.add(c);else{var u=a==="query"&&l&&g.values&&f.query(d(d({},g),{values:!1}));return f[a].apply(this,arguments).then(function(b){if(a==="query"){if(l&&g.values)return u.then(function(a){a=a.result;p.addKeys(a);return b});var c=g.values?b.result.map(k):b.result;g.values?p.addKeys(c):q.addKeys(c)}else if(a==="openCursor"){var d=b,e=g.values;return d&&Object.create(d,{key:{get:function(){q.addKey(d.primaryKey);return d.key}},primaryKey:{get:function(){var a=d.primaryKey;q.addKey(a);return a}},value:{get:function(){e&&p.addKey(d.primaryKey);return d.value}}})}return b})}}return f[a].apply(this,arguments)}});return m}})}};function Kd(a,b,c,d){function e(b){var e=a(b.name||"");function f(a){return a!=null?b.extractKey(a):null}var g=function(a){return b.multiEntry&&h(a)?a.forEach(function(a){return e.addKey(a)}):e.addKey(a)};(c||d).forEach(function(a,b){a=c&&f(c[b]);b=d&&f(d[b]);S(a,b)!==0&&(a!=null&&g(a),b!=null&&g(b))})}b.indexes.forEach(e)}function Ld(a,b,c){if(c.numFailures===0)return b;if(b.type==="deleteRange")return null;a=b.keys?b.keys.length:"values"in b&&b.values?b.values.length:1;if(c.numFailures===a)return null;a=d({},b);h(a.keys)&&(a.keys=a.keys.filter(function(a,b){return!(b in c.failures)}));"values"in a&&h(a.values)&&(a.values=a.values.filter(function(a,b){return!(b in c.failures)}));return a}function Md(a,b){return b.lower===void 0?!0:b.lowerOpen?S(a,b.lower)>0:S(a,b.lower)>=0}function Nd(a,b){return b.upper===void 0?!0:b.upperOpen?S(a,b.upper)<0:S(a,b.upper)<=0}function Od(a,b){return Md(a,b)&&Nd(a,b)}function Pd(a,b,c,d,e,f){if(!c||c.length===0)return a;var g=b.query.index,i=g.multiEntry,j=b.query.range;d=d.schema.primaryKey;var k=d.extractKey,l=g.extractKey,m=(g.lowLevelIndex||g).extractKey;d=c.reduce(function(a,c){var d=a,e=c.type==="add"||c.type==="put"?c.values.filter(function(a){a=l(a);return i&&h(a)?a.some(function(a){return Od(a,j)}):Od(a,j)}).map(function(a){a=z(a);f&&Object.freeze(a);return a}):[];switch(c.type){case"add":d=a.concat(b.values?e:e.map(function(a){return k(a)}));break;case"put":var g=new X().addKeys(c.values.map(function(a){return k(a)}));d=a.filter(function(a){a=b.values?k(a):a;return!id(new X(a),g)}).concat(b.values?e:e.map(function(a){return k(a)}));break;case"delete":var m=new X().addKeys(c.keys);d=a.filter(function(a){a=b.values?k(a):a;return!id(new X(a),m)});break;case"deleteRange":var n=c.range;d=a.filter(function(a){return!Od(k(a),n)});break}return d},a);if(d===a)return a;d.sort(function(a,b){return S(m(a),m(b))||S(k(a),k(b))});b.limit&&b.limit<Infinity&&(d.length>b.limit?d.length=b.limit:a.length===b.limit&&d.length<b.limit&&(e.dirty=!0));return f?Object.freeze(d):d}function Qd(a,b){return S(a.lower,b.lower)===0&&S(a.upper,b.upper)===0&&!!a.lowerOpen===!!b.lowerOpen&&!!a.upperOpen===!!b.upperOpen}function Rd(a,b,c,d){if(a===void 0)return b!==void 0?-1:0;if(b===void 0)return 1;a=S(a,b);if(a===0){if(c&&d)return 0;if(c)return 1;if(d)return-1}return a}function Sd(a,b,c,d){if(a===void 0)return b!==void 0?1:0;if(b===void 0)return-1;a=S(a,b);if(a===0){if(c&&d)return 0;if(c)return-1;if(d)return 1}return a}function Td(a,b){return Rd(a.lower,b.lower,a.lowerOpen,b.lowerOpen)<=0&&Sd(a.upper,b.upper,a.upperOpen,b.upperOpen)>=0}function Ud(b,c,a,d){b=od["idb://".concat(b,"/").concat(c)];if(!b)return[];c=b.queries[a];if(!c)return[null,!1,b,null];var e=d.query?d.query.index.name:null;c=c[e||""];if(!c)return[null,!1,b,null];switch(a){case"query":e=c.find(function(a){return a.req.limit===d.limit&&a.req.values===d.values&&Qd(a.req.query.range,d.query.range)});if(e)return[e,!0,b,c];a=c.find(function(a){var b="limit"in a.req?a.req.limit:Infinity;return b>=d.limit&&(d.values?a.req.values:!0)&&Td(a.req.query.range,d.query.range)});return[a,!1,b,c];case"count":e=c.find(function(a){return Qd(a.req.query.range,d.query.range)});return[e,!!e,b,c]}}function Vd(a,b,c,d){a.subscribers.add(c),d.addEventListener("abort",function(){a.subscribers["delete"](c),a.subscribers.size===0&&Wd(a,b)})}function Wd(a,b){setTimeout(function(){a.subscribers.size===0&&A(b,a)},3e3)}var Xd={stack:"dbcore",level:0,name:"Cache",create:function(a){var b=a.schema.name,c=d(d({},a),{transaction:function(c,d,e){var f=a.transaction(c,d,e);if(d==="readwrite"){var g=new AbortController();e=g.signal;var h=function(e){return function(){g.abort();if(d==="readwrite"){var h=new Set();for(var i=0,j=c;i<j.length;i++){var k=j[i],l=od["idb://".concat(b,"/").concat(k)];if(l){k=a.table(k);var m=l.optimisticOps.filter(function(a){return a.trans===f});if(f._explicit&&e&&f.mutatedParts)for(var n=0,o=Object.values(l.queries.query);n<o.length;n++){var p=o[n];for(var q=0,r=p.slice();q<r.length;q++){var s=r[q];nd(s.obsSet,f.mutatedParts)&&(A(p,s),s.subscribers.forEach(function(a){return h.add(a)}))}}else if(m.length>0){l.optimisticOps=l.optimisticOps.filter(function(a){return a.trans!==f});for(q=0,r=Object.values(l.queries.query);q<r.length;q++){var p=r[q];for(n=0,o=p.slice();n<o.length;n++){var s=o[n];if(s.res!=null&&f.mutatedParts)if(e&&!s.dirty){l=Object.isFrozen(s.res);l=Pd(s.res,s.req,m,k,s,l);s.dirty?(A(p,s),s.subscribers.forEach(function(a){return h.add(a)})):l!==s.res&&(s.res=l,s.promise=K.resolve({result:l}))}else s.dirty&&A(p,s),s.subscribers.forEach(function(a){return h.add(a)})}}}}}h.forEach(function(a){return a()})}}};f.addEventListener("abort",h(!1),{signal:e});f.addEventListener("error",h(!1),{signal:e});f.addEventListener("complete",h(!0),{signal:e})}return f},table:function(c){var e=a.table(c),f=e.schema.primaryKey,g=d(d({},e),{mutate:function(a){var g=J.trans;if(f.outbound||g.db._options.cache==="disabled"||g.explicit)return e.mutate(a);var h=od["idb://".concat(b,"/").concat(c)];if(!h)return e.mutate(a);g=e.mutate(a);(a.type==="add"||a.type==="put")&&(a.values.length>=50||Cd(f,a).some(function(a){return a==null}))?g.then(function(b){var c=d(d({},a),{values:a.values.map(function(a,c){var e;e=((e=f.keyPath)===null||e===void 0?void 0:e.includes("."))?z(a):d({},a);x(e,f.keyPath,b.results[c]);return e})});c=Ld(h,c,b);h.optimisticOps.push(c);queueMicrotask(function(){return a.mutatedParts&&rd(a.mutatedParts)})}):(h.optimisticOps.push(a),a.mutatedParts&&rd(a.mutatedParts),g.then(function(b){if(b.numFailures>0){A(h.optimisticOps,a);b=Ld(h,a,b);b&&h.optimisticOps.push(b);a.mutatedParts&&rd(a.mutatedParts)}}),g["catch"](function(){A(h.optimisticOps,a),a.mutatedParts&&rd(a.mutatedParts)}));return g},query:function(a){var d;if(!Hd(J,e)||!Id("query",a))return e.query(a);var f=((d=J.trans)===null||d===void 0?void 0:d.db._options.cache)==="immutable";d=J;var g=d.requery;d=d.signal;var h=Ud(b,c,"query",a),i=h[0],j=h[1],k=h[2],l=h[3];if(i&&j)i.obsSet=a.obsSet;else{h=e.query(a).then(function(a){var b=a.result;i&&(i.res=b);if(f){for(var c=0,d=b.length;c<d;++c)Object.freeze(b[c]);Object.freeze(b)}else a.result=z(b);return a})["catch"](function(a){l&&i&&A(l,i);return Promise.reject(a)});i={obsSet:a.obsSet,promise:h,subscribers:new Set(),type:"query",req:a,dirty:!1};l?l.push(i):(l=[i],k||(k=od["idb://".concat(b,"/").concat(c)]={queries:{query:{},count:{}},objs:new Map(),optimisticOps:[],unsignaledParts:{}}),k.queries.query[a.query.index.name||""]=l)}Vd(i,l,g,d);return i.promise.then(function(b){return{result:Pd(b.result,a,k===null||k===void 0?void 0:k.optimisticOps,e,i,f)}})}});return g}});return c}};function Yd(a,b){return new Proxy(a,{get:function(a,c,d){return c==="db"?b:Reflect.get(a,c,d)}})}var Y=function(){function a(b,c){var e=this;this._middlewares={};this.verno=0;var f=a.dependencies;this._options=c=d({addons:a.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange,cache:"cloned"},c);this._deps={indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange};f=c.addons;this._dbSchema={};this._versions=[];this._storeNames=[];this._allTables={};this.idbdb=null;this._novip=this;var g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:E,dbReadyPromise:null,cancelOpen:E,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:c.autoOpen};g.dbReadyPromise=new K(function(a){g.dbReadyResolve=a});g.openCanceller=new K(function(a,b){g.cancelOpen=b});this._state=g;this.name=b;this.on=Pb(this,"populate","blocked","versionchange","close",{ready:[Ga,E]});this.on.ready.subscribe=u(this.on.ready.subscribe,function(b){return function(c,d){a.vip(function(){var a=e._state;if(a.openComplete)a.dbOpenError||K.resolve().then(c),d&&b(c);else if(a.onReadyBeingFired)a.onReadyBeingFired.push(c),d&&b(c);else{b(c);var f=e;d||b(function a(){f.on.ready.unsubscribe(c),f.on.ready.unsubscribe(a)})}})}});this.Collection=cc(this);this.Table=Rb(this);this.Transaction=rc(this);this.Version=Yc(this);this.WhereClause=mc(this);this.on("versionchange",function(a){a.newVersion>0?!1:!1,e.close({disableAutoOpen:!1})});this.on("blocked",function(a){!a.newVersion||a.newVersion<a.oldVersion?!1:!1});this._maxKey=wc(c.IDBKeyRange);this._createTransaction=function(a,b,c,d){return new e.Transaction(a,b,c,e._options.chromeTransactionDurability,d)};this._fireOnBlocked=function(a){e.on("blocked").fire(a),Cb.filter(function(a){return a.name===e.name&&a!==e&&!a._state.vcFired}).map(function(b){return b.on("versionchange").fire(a)})};this.use(Gd);this.use(Xd);this.use(Jd);this.use(Ad);this.use(Dd);var h=new Proxy(this,{get:function(a,b,c){if(b==="_vip")return!0;if(b==="table")return function(a){return Yd(e.table(a),h)};var d=Reflect.get(a,b,c);if(d instanceof Ob)return Yd(d,h);if(b==="tables")return d.map(function(a){return Yd(a,h)});return b==="_createTransaction"?function(){var a=d.apply(this,arguments);return Yd(a,h)}:d}});this.vip=h;f.forEach(function(a){return a(e)})}a.prototype.version=function(a){if(isNaN(a)||a<.1)throw new D.Type("Given version is not a positive number");a=Math.round(a*10)/10;if(this.idbdb||this._state.isBeingOpened)throw new D.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var b=this._versions,c=b.filter(function(b){return b._cfg.version===a})[0];if(c)return c;c=new this.Version(a);b.push(c);b.sort(Ic);c.stores({});this._state.autoSchema=!1;return c};a.prototype._whenReady=function(a){var b=this;return this.idbdb&&(this._state.openComplete||J.letThrough||this._vip)?a():new K(function(a,c){if(b._state.openComplete)return c(new D.DatabaseClosed(b._state.dbOpenError));if(!b._state.isBeingOpened){if(!b._state.autoOpen){c(new D.DatabaseClosed());return}b.open()["catch"](E)}b._state.dbReadyPromise.then(a,c)}).then(a)};a.prototype.use=function(a){var b=a.stack,c=a.create,d=a.level;a=a.name;a&&this.unuse({stack:b,name:a});var e=this._middlewares[b]||(this._middlewares[b]=[]);e.push({stack:b,create:c,level:d==null?10:d,name:a});e.sort(function(a,b){return a.level-b.level});return this};a.prototype.unuse=function(a){var b=a.stack,c=a.name,d=a.create;b&&this._middlewares[b]&&(this._middlewares[b]=this._middlewares[b].filter(function(a){return d?a.create!==d:c?a.name!==c:!1}));return this};a.prototype.open=function(){var a=this;return vb(I,function(){return ud(a)})};a.prototype._close=function(){var a=this._state,b=Cb.indexOf(this);b>=0&&Cb.splice(b,1);if(this.idbdb){try{this.idbdb.close()}catch(a){}this.idbdb=null}a.isBeingOpened||(a.dbReadyPromise=new K(function(b){a.dbReadyResolve=b}),a.openCanceller=new K(function(b,c){a.cancelOpen=c}))};a.prototype.close=function(a){a=a===void 0?{disableAutoOpen:!0}:a;a=a.disableAutoOpen;var b=this._state;a?(b.isBeingOpened&&b.cancelOpen(new D.DatabaseClosed()),this._close(),b.autoOpen=!1,b.dbOpenError=new D.DatabaseClosed()):(this._close(),b.autoOpen=this._options.autoOpen||b.isBeingOpened,b.openComplete=!1,b.dbOpenError=null)};a.prototype["delete"]=function(a){var b=this;a===void 0&&(a={disableAutoOpen:!0});var c=arguments.length>0&&typeof arguments[0]!=="object",d=this._state;return new K(function(e,f){var g=function(){b.close(a);var c=b._deps.indexedDB.deleteDatabase(b.name);c.onsuccess=L(function(){cd(b._deps,b.name),e()});c.onerror=V(f);c.onblocked=b._fireOnBlocked};if(c)throw new D.InvalidArgument("Invalid closeOptions argument to db.delete()");d.isBeingOpened?d.dbReadyPromise.then(g):g()})};a.prototype.backendDB=function(){return this.idbdb};a.prototype.isOpen=function(){return this.idbdb!==null};a.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&a.name==="DatabaseClosed"};a.prototype.hasFailed=function(){return this._state.dbOpenError!==null};a.prototype.dynamicallyOpened=function(){return this._state.autoSchema};Object.defineProperty(a.prototype,"tables",{get:function(){var a=this;return g(this._allTables).map(function(b){return a._allTables[b]})},enumerable:!1,configurable:!0});a.prototype.transaction=function(){var a=wd.apply(this,arguments);return this._transaction.apply(this,a)};a.prototype._transaction=function(a,b,c){var d=this,e=J.trans;(!e||e.db!==this||a.indexOf("!")!==-1)&&(e=null);var f=a.indexOf("?")!==-1;a=a.replace("!","").replace("?","");var g,h;try{h=b.map(function(a){a=a instanceof d.Table?a.name:a;if(typeof a!=="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return a});if(a=="r"||a===Eb)g=Eb;else if(a=="rw"||a==Fb)g=Fb;else throw new D.InvalidArgument("Invalid transaction mode: "+a);if(e){if(e.mode===Eb&&g===Fb)if(f)e=null;else throw new D.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");e&&h.forEach(function(a){if(e&&e.storeNames.indexOf(a)===-1)if(f)e=null;else throw new D.SubTransaction("Table "+a+" not included in parent transaction.")});f&&e&&!e.active&&(e=null)}}catch(a){return e?e._promise(null,function(b,c){c(a)}):Q(a)}var i=xd.bind(null,this,g,h,e,c);return e?e._promise(g,i,"lock"):J.trans?vb(J.transless,function(){return d._whenReady(i)}):this._whenReady(i)};a.prototype.table=function(a){if(!l(this._allTables,a))throw new D.InvalidTable("Table ".concat(a," does not exist"));return this._allTables[a]};return a}(),Zd=typeof Symbol!=="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",$d=function(){function a(a){this._subscribe=a}a.prototype.subscribe=function(a,b,c){return this._subscribe(!a||typeof a==="function"?{next:a,error:b,complete:c}:a)};a.prototype[Zd]=function(){return this};return a}(),ae;try{ae={indexedDB:f.indexedDB||f.mozIndexedDB||f.webkitIndexedDB||f.msIndexedDB,IDBKeyRange:f.IDBKeyRange||f.webkitIDBKeyRange}}catch(a){ae={indexedDB:null,IDBKeyRange:null}}function be(a){var b=!1,c,d=new $d(function(d){var e=qa(a);function f(b){var c=eb();try{e&&qb();b=N(a,b);e&&(b=b["finally"](O));return b}finally{c&&fb()}}var g=!1,h,i={},j={},k={get closed(){return g},unsubscribe:function(){if(g)return;g=!0;h&&h.abort();l&&W.storagemutated.unsubscribe(o)}};d.start&&d.start(k);var l=!1,m=function(){return xb(p)};function n(){return nd(j,i)}var o=function(a){md(i,a),n()&&m()},p=function(){if(g||!ae.indexedDB)return;i={};var e={};h&&h.abort();h=new AbortController();var k={subscr:e,signal:h.signal,requery:m,querier:a,trans:null},n=f(k);Promise.resolve(n).then(function(a){b=!0;c=a;if(g||k.signal.aborted)return;i={};j=e;!ia(j)&&!l&&(W(oc,o),l=!0);xb(function(){return!g&&d.next&&d.next(a)})},function(a){b=!1,["DatabaseClosedError","AbortError"].includes(a===null||a===void 0?void 0:a.name)||(g||xb(function(){if(g)return;d.error&&d.error(a)}))})};setTimeout(m,0);return k});d.hasValue=function(){return b};d.getValue=function(){return c};return d}var ce=Y;m(ce,d(d({},C),{"delete":function(a){a=new ce(a,{addons:[]});return a["delete"]()},exists:function(a){return new ce(a,{addons:[]}).open().then(function(a){a.close();return!0})["catch"]("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){try{return ad(ce.dependencies).then(a)}catch(a){return Q(new D.MissingAPI())}},defineClass:function(){function a(a){i(this,a)}return a},ignoreTransaction:function(a){return J.trans?vb(J.transless,a):a()},vip:dd,async:function(a){return function(){try{var b=vd(a.apply(this,arguments));return!b||typeof b.then!=="function"?K.resolve(b):b}catch(a){return Q(a)}}},spawn:function(a,b,c){try{a=vd(a.apply(c,b||[]));return!a||typeof a.then!=="function"?K.resolve(a):a}catch(a){return Q(a)}},currentTransaction:{get:function(){return J.trans||null}},waitFor:function(a,b){a=K.resolve(typeof a==="function"?ce.ignoreTransaction(a):a).timeout(b||6e4);return J.trans?J.trans.waitFor(a):a},Promise:K,debug:{get:function(){return G},set:function(a){Ha(a)}},derive:p,extend:i,props:m,override:u,Events:Pb,on:W,liveQuery:be,extendObservabilitySet:md,getByKeyPath:w,setByKeyPath:x,delByKeyPath:ca,shallowClone:da,deepClone:z,getObjectDiff:Bd,cmp:S,asap:aa,minKey:Ab,addons:[],connections:Cb,errnames:wa,dependencies:ae,cache:od,semVer:Ka,version:Ka.split(".").map(function(a){return parseInt(a)}).reduce(function(a,b,c){return a+b/Math.pow(10,c*2)})}));ce.maxKey=wc(ce.dependencies.IDBKeyRange);typeof dispatchEvent!=="undefined"&&typeof addEventListener!=="undefined"&&(W(oc,function(a){if(!Z){a=new CustomEvent(pc,{detail:a});Z=!0;dispatchEvent(a);Z=!1}}),addEventListener(pc,function(a){a=a.detail;Z||de(a)}));function de(a){var b=Z;try{Z=!0,W.storagemutated.fire(a),sd(a,!0)}finally{Z=b}}var Z=!1,$,ee=function(){};typeof BroadcastChannel!=="undefined"&&(ee=function(){$=new BroadcastChannel(pc),$.onmessage=function(a){return a.data&&de(a.data)}},ee(),typeof $.unref==="function"&&$.unref(),W(oc,function(a){Z||$.postMessage(a)}));typeof addEventListener!=="undefined"&&(addEventListener("pagehide",function(a){if(!Y.disableBfCache&&a.persisted){G&&!1;$===null||$===void 0?void 0:$.close();for(var a=0,b=Cb;a<b.length;a++){var c=b[a];c.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(a){!Y.disableBfCache&&a.persisted&&(G&&!1,ee(),de({all:new X(-Infinity,[[]])}))}));function fe(a,b){return new $b({replacePrefix:[a,b]})}K.rejectionMapper=za;Ha(G);H=Object.freeze({__proto__:null,Dexie:Y,liveQuery:be,Entity:Jb,cmp:S,PropModSymbol:y,PropModification:$b,replacePrefix:fe,"default":Y,RangeSet:X,mergeRanges:hd,rangesOverlap:id});d(Y,H,{"default":Y});return Y})}var j=!1;function k(){j||(j=!0,i());return h.exports}function b(a){switch(a){case void 0:return k()}}e.exports=b}),null);
__d("dexie_maw-next",["dexie-4.0.1"],(function(a,b,c,d,e,f){e.exports=b("dexie-4.0.1")()}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("file-saver-2.0.2",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){(function(a,b){"undefined"!=typeof g?b():(b(),a.FileSaver={exports:{}}.exports)})(this,function(){function b(b,a){return"undefined"==typeof a?a={autoBom:!1}:"object"!=typeof a&&(!1,a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(b.type)?new Blob(["\ufeff",b],{type:b.type}):b}function c(a,b,c){var d=new XMLHttpRequest;d.open("GET",a),d.responseType="blob",d.onload=function(){g(d.response,b,c)},d.onerror=function(){},d.send()}function d(b){var a=new XMLHttpRequest;a.open("HEAD",b,!1);try{a.send()}catch(a){}return 200<=a.status&&299>=a.status}function e(b){try{b.dispatchEvent(new MouseEvent("click"))}catch(c){var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),b.dispatchEvent(a)}}var f="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof a&&a.global===a?a:void 0,g=f.saveAs||("object"!=typeof window||window!==f?function(){}:"download"in HTMLAnchorElement.prototype?function(a,b,g){var h=f.URL||f.webkitURL,i=document.createElement("a");b=b||a.name||"download",i.download=b,i.rel="noopener","string"==typeof a?(i.href=a,i.origin===location.origin?e(i):d(i.href)?c(a,b,g):e(i,i.target="_blank")):(i.href=h.createObjectURL(a),setTimeout(function(){h.revokeObjectURL(i.href)},4e4),setTimeout(function(){e(i)},0))}:"msSaveOrOpenBlob"in navigator?function(a,f,g){if(f=f||a.name||"download","string"!=typeof a)navigator.msSaveOrOpenBlob(b(a,g),f);else if(d(a))c(a,f,g);else{var h=document.createElement("a");h.href=a,h.target="_blank",setTimeout(function(){e(h)})}}:function(e,a,b,d){if(d=d||open("","_blank"),d&&(d.document.title=d.document.body.innerText="downloading..."),"string"==typeof e)return c(e,a,b);a="application/octet-stream"===e.type;b=/constructor/i.test(f.HTMLElement)||f.safari;var g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||a&&b)&&"object"==typeof FileReader){var h=new FileReader;h.onloadend=function(){var a=h.result;a=g?a:a.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=a:location=a,d=null},h.readAsDataURL(e)}else{var i=f.URL||f.webkitURL,j=i.createObjectURL(e);d?d.location=j:location.href=j,d=null,setTimeout(function(){i.revokeObjectURL(j)},4e4)}});f.saveAs=g.saveAs=g,"undefined"!=typeof h&&(h.exports=g)})}var j=!1;function k(){j||(j=!0,i());return h.exports}function b(a){switch(a){case void 0:return k()}}e.exports=b}),null);
__d("file-saver",["file-saver-2.0.2"],(function(a,b,c,d,e,f){e.exports=b("file-saver-2.0.2")()}),null);/*FB_PKG_DELIM*/
__d("FDSBlurredBackgroundImage.react",["CometBackgroundImage.react","XPlatReactEnvironment","react","react-compiler-runtime","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h=["xstyle"],i,j=i||d("react"),k={imageContainer:{filter:"xtea3wc",height:"xu1mrb",$$css:!0},imageContainerVR:{transform:"x15f76sd",$$css:!0},imageContainerWeb:{transform:"x1yyh9jt",width:"x1jx8tsq",$$css:!0},root:{alignItems:"x6s0dn4",display:"x78zum5",height:"x5yr21d",justifyContent:"xl56j7k",overflowX:"x6ikm8r",overflowY:"x10wlt62",width:"xh8yej3",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(11),e,f;b[0]!==a?(f=a.xstyle,e=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f):(e=b[1],f=b[2]);b[3]!==f?(a=[k.root,f],b[3]=f,b[4]=a):a=b[4];b[5]===Symbol["for"]("react.memo_cache_sentinel")?(f=[k.imageContainer,d("XPlatReactEnvironment").isWeb()?k.imageContainerWeb:k.imageContainerVR],b[5]=f):f=b[5];b[6]!==e?(f=j.jsx(d("react-strict-dom").html.div,{style:f,children:j.jsx(c("CometBackgroundImage.react"),babelHelpers["extends"]({},e))}),b[6]=e,b[7]=f):f=b[7];b[8]!==a||b[9]!==f?(e=j.jsx(d("react-strict-dom").html.div,{style:a,children:f}),b[8]=a,b[9]=f,b[10]=e):e=b[10];return e}g["default"]=a}),98);
__d("FDSImageCover.react",["BaseImage_DEPRECATED.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["alt","loading","onError","onLoad","src","style"],i,j=i||(i=d("react"));e=i;e.useCallback;var k=e.useRef,l=e.useState;f=function(){var a=document.documentElement;return a==null?!0:Boolean("objectFit"in a.style)}();function a(a){var b=d("react-compiler-runtime").c(21),e;if(b[0]!==a){a.alt;var f=a.loading,g=a.onError,i=a.onLoad,m=a.src,n=a.style,o=babelHelpers.objectWithoutPropertiesLoose(a,h);f=f;g=g;e=i;i=m;m=n;n=o;b[0]=a;b[1]=f;b[2]=g;b[3]=e;b[4]=i;b[5]=m;b[6]=n}else f=b[1],g=b[2],e=b[3],i=b[4],m=b[5],n=b[6];o=l(null);a=o[0];var p=o[1],q=k();b[7]!==e?(o=function(){var a=q.current;if(a==null||!(a instanceof HTMLImageElement)||typeof a.src!=="string")return;p(a.src);e!=null&&e()},b[7]=e,b[8]=o):o=b[8];o=o;if(a!=null){var r;b[9]===Symbol["for"]("react.memo_cache_sentinel")?(r="x1rg5ohu x5yr21d xl1xv1r xh8yej3",b[9]=r):r=b[9];a="url("+a+")";var s=m;b[10]!==a||b[11]!==s?(r=j.jsx("div",{className:r,style:babelHelpers["extends"]({backgroundImage:a,backgroundPosition:"center center",backgroundSize:"cover"},s)}),b[10]=a,b[11]=s,b[12]=r):r=b[12];return r}b[13]===Symbol["for"]("react.memo_cache_sentinel")?(a="xqtp20y xnalus7",b[13]=a):a=b[13];s=f||void 0;b[14]!==o||b[15]!==g||b[16]!==i||b[17]!==m||b[18]!==s||b[19]!==n?(r=j.jsx(c("BaseImage_DEPRECATED.react"),babelHelpers["extends"]({},n,{className:a,loading:s,onError:g,onLoad:o,ref:q,src:i,style:m})),b[14]=o,b[15]=g,b[16]=i,b[17]=m,b[18]=s,b[19]=n,b[20]=r):r=b[20];return r}function b(a){var b=d("react-compiler-runtime").c(3),e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e="x1rg5ohu x5yr21d xl1xv1r xh8yej3",b[0]=e):e=b[0];b[1]!==a?(e=j.jsx(c("BaseImage_DEPRECATED.react"),babelHelpers["extends"]({className:e},a)),b[1]=a,b[2]=e):e=b[2];return e}e=f?b:a;g["default"]=e}),98);
__d("InformTreatmentTitle",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({MISINFORMATION:"misinformation",FALSE_NEWS:"false_news",MISLEADING_NEWS:"misleading_news",MISSING_CONTEXT:"missing_context",ALTERED_MEDIA:"altered_media",AI_GENERATED_CONTENT:"ai_generated_content"});c=a;f["default"]=c}),66);
__d("LSAddMessengerContact",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("contact_id",a[0]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"add_messenger_contact",c.i64.cast([0,308]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSContactAddMessengerContactStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSAddMessengerContactStoredProcedure",["LSAddMessengerContact","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSAddMessengerContact"),e.contactId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSInsertNewMediaSend",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(51).add({offlineAttachmentId:a[0],offlineThreadingId:a[1],inMessageIndex:a[2],attachmentType:a[3],shouldTranscode:a[4],useDoublePhase:a[5],sendByServer:a[6],isSecure:a[7],state:a[4]?b.i64.cast([0,1]):b.i64.cast([0,3])})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMediaSendInsertNewMediaSendStoredProcedure";a.__tables__=["media_send_jobs"];e.exports=a}),null);
__d("LSInsertNewMediaSendStoredProcedure",["LSInsertNewMediaSend","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSInsertNewMediaSend"),e.offlineAttachmentId,e.offlineThreadingId,e.inMessageIndex,e.attachmentType,e.shouldTranscode,e.useDoublePhase,e.sendByServer,e.isSecure);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSLocalApplyOptimisticMessageWithAttachments",["LSArrayGetObjectAt","LSLocalApplyOptimisticMessage","LSSetMessageDisplayedContentTypes"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.storedProcedure(b("LSLocalApplyOptimisticMessage"),a[0],a[1],a[2],a[3],a[4],a[5],a[6],void 0,a[7],a[8],a[9],a[10],void 0,a[12],!0).then(function(a){return a=a,d[0]=a[0],d[1]=a[1],a})},function(e){return d[2]=c.i64.of_int32(a[11].length),c.i64.gt(d[2],c.i64.cast([0,0]))?c.loopAsync(d[2],function(e){return d[3]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[11],d[3]).then(function(a){return a=a,d[4]=a[0],d[5]=a[1],a})},function(b){return d[6]=d[4].get("attachment_fbid"),d[7]=d[4].get("offline_attachment_id"),d[8]=d[4].get("attachment_type"),d[9]=d[4].get("filename"),d[10]=d[4].get("filesize"),d[11]=d[4].get("attachment_index"),d[12]=d[4].get("has_media"),d[13]=d[4].get("has_xma"),d[14]=d[4].get("playable_url"),d[15]=d[4].get("playable_url_mime_type"),d[16]=d[4].get("playable_duration_ms"),d[17]=d[4].get("preview_url"),d[18]=d[4].get("preview_url_mime_type"),d[19]=d[4].get("mini_preview"),d[20]=d[4].get("preview_width"),d[21]=d[4].get("preview_height"),d[22]=d[4].get("xma_layout_type"),d[23]=d[4].get("xmas_template_type"),d[24]=d[4].get("cta1_title"),d[25]=d[4].get("cta2_title"),d[26]=d[4].get("cta3_title"),d[27]=d[4].get("image_url"),d[28]=d[4].get("action_url"),d[29]=d[4].get("title_text"),d[30]=d[4].get("subtitle_text"),d[31]=d[4].get("description_text"),d[32]=d[4].get("source_text"),d[33]=d[4].get("original_file_hash"),d[34]=d[4].get("sound_bite_client_sound_key"),d[35]=d[4].get("sound_bite_visual"),d[36]=d[4].get("ephemeral_media_state"),d[37]=d[4].get("waveform_data"),d[38]=d[4].get("sampling_frequency_hz"),d[17]!==void 0?d[39]=d[17]:d[39]=d[14],c.filter(c.db.table(16).fetch([[[a[1],d[0],d[6]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&b.messageId===d[0]&&b.attachmentFbid===d[6]&&c.i64.gt(b.authorityLevel,c.i64.cast([0,20]))}).next().then(function(b){var e=b.done;b.value;return e?c.db.table(16).put({threadKey:a[1],messageId:d[0],attachmentFbid:d[6],timestampMs:d[1],offlineAttachmentId:d[7],attachmentType:d[8],filename:d[9],filesize:d[10],attachmentIndex:d[11],hasMedia:d[12],hasXma:d[13],isSharable:!1,playableUrl:d[14],playableUrlMimeType:d[15],playableDurationMs:d[16],previewUrl:d[39],previewUrlMimeType:d[18],miniPreview:d[19],previewWidth:d[20],previewHeight:d[21],xmaLayoutType:d[22],xmasTemplateType:d[23],cta1Title:d[24],cta2Title:d[25],cta3Title:d[26],imageUrl:d[27],actionUrl:d[28],titleText:d[29],subtitleText:d[30],descriptionText:d[31],sourceText:d[32],ephemeralMediaState:d[36],originalFileHash:d[33],authorityLevel:c.i64.cast([0,20]),samplingFrequencyHz:d[38],waveformData:d[37]}):0})}])}):c.resolve()},function(e){return d[2]=c.i64.of_int32(a[11].length),c.i64.gt(d[2],c.i64.cast([0,0]))?c.storedProcedure(b("LSSetMessageDisplayedContentTypes"),a[1],d[0],d[1],a[3],!1,c.i64.neq(a[6],void 0)):c.resolve()},function(a){return a=[d[0],d[1]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxLocalApplyOptimisticMessageWithAttachmentsStoredProcedure";a.__tables__=["attachments"];e.exports=a}),null);
__d("LSLocalApplyOptimisticMessageWithAttachmentsStoredProcedure",["LSLocalApplyOptimisticMessageWithAttachments","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSLocalApplyOptimisticMessageWithAttachments"),e.senderId,e.threadKey,e.threadType,e.text,e.snippet,e.snippetHasEmoji,e.stickerId,e.replySourceId,e.replySourceType,e.replySourceTypeV2,e.isForwarded,e.attachments,e.mentionData);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSOptimisticAcceptMessageRequest",["LSIssueNewTaskWithExtraOperations"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(e,f){var g=e.done;e=e.value;return g?0:(f=e.item,c.sequence([function(b){return d[1]=f.threadSubtype,c.i64.eq(d[1],c.i64.cast([0,75]))?d[0]="interop":d[0]="inbox",c.i64.eq(d[1],c.i64.cast([0,75]))?d[2]=c.i64.cast([-1,4294967277]):d[2]=c.i64.cast([0,0]),c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(b){var e=b.update;b.item;return e({folderName:d[0],parentThreadKey:d[2],igFolder:a[1],capabilities:c.i64.and_(f.capabilities,c.i64.cast([-1,4292870143]))})})},function(b){return c.db.table(173).fetch([[[a[0]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?0:(e=b.item,d[7]=e.clientThreadPk,c.db.table(276).fetch([[[d[7]]]]).next().then(function(a,b){b=a.done;a=a.value;return b?0:(a.item,c.forEach(c.db.table(276).fetch([[[d[7]]]]),function(a){var b=a.update;a.item;return b({folderType:c.i64.cast([0,0])})}))}))})},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[3]=c.i64.cast([0,1]):(e=b.item,d[8]=e.syncGroup,c.i64.neq(d[8],void 0)?d[7]=d[8]:d[7]=c.i64.cast([0,1]),d[3]=d[7])})},function(e){return d[5]=new c.Map(),d[5].set("thread_key",a[0]),d[5].set("sync_group",d[3]),d[5].set("ig_folder",a[1]),d[6]=c.toJSON(d[5]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),"message_request",c.i64.cast([0,66]),d[6],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))}]))})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticAcceptMessageRequestStoredProcedure";a.__tables__=["threads","mi_act_mapping_table","client_threads"];e.exports=a}),null);
__d("LSOptimisticAcceptMessageRequestStoredProcedure",["LSOptimisticAcceptMessageRequest","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticAcceptMessageRequest"),e.threadKey,e.igFolder);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWAttachmentBlob.react",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","MAWBridgeSendAndReceive","MAWDbMedia","Promise","PromiseAnnotate","WAHashUtils","WAMediaQplHelper","cr:332","interaction-tracing","performanceNow"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=new Map(),n=new Map();function a(a,b){m.set(a,{TAG:1,value:b})}function e(a){a=m.get(a);return a!=null&&a.TAG===1}function o(a,e,f,g){var i=g!=null?g:a;g=m.get(i);if(g!=null){if(g.TAG===0)throw g.value;return g.value}f==null||f.addPoint("fetch_data_blob_from_backend_start",{string:{fetch_by:isFinite(a)?"mediaId":"hashedPlaintextHash"}});var j=c("interaction-tracing").InteractionTracingCore.getPendingInteractions(),n=(l||(l=c("performanceNow")))();g=isFinite(a)?d("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByMediaId",{description:e,mediaId:d("MAWDbMedia").convertNumberToMediaId(Number.parseInt(a,10)),qplInstanceKey:f==null?void 0:f.getInstanceKey()}).then(function(a){f==null||f.addPoint("fetch_data_blob_from_backend_success",{string:{blob_size_bucket:a!=null?d("WAMediaQplHelper").convertIntegerSizeToStringBucket(a.size):void 0,description:e,fetch_by:"mediaId"}});r(j,n,a!=null?"SUCCESS":"FAIL");m.set(i,{TAG:1,value:a!=null?URL.createObjectURL(a):""});f==null||f.addPoint("fetch_data_blob_url_set_in_cache");return(k||(k=b("Promise"))).resolve()})["catch"](function(a){f==null||f.endFail("fetch_data_blob_from_backend_fail",{string:{description:e,error:a.message,fetch_by:"mediaId"}});r(j,n,"FAIL");m.set(i,{TAG:1,value:""});c("FBLogger")("messenger_web_media").catching(a).mustfix("Unable to getBlobUrlByMediaId");return(k||(k=b("Promise"))).resolve()}):d("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByHashedPlaintextHash",{description:e,plaintextHash:d("WAHashUtils").stringToPlaintextHash(a),qplInstanceKey:f==null?void 0:f.getInstanceKey()}).then(function(c){f==null||f.addPoint("fetch_data_blob_from_backend_success",{string:{blob_size_bucket:c!=null?d("WAMediaQplHelper").convertIntegerSizeToStringBucket(c.size):void 0,description:e,fetch_by:"hashedPlaintextHash"}});r(j,n,c!=null?"SUCCESS":"FAIL");m.set(i,{TAG:1,value:c!=null?URL.createObjectURL(c):""});f==null||f.addPoint("fetch_data_blob_url_set_in_cache");b("cr:332")!=null&&void b("cr:332").runBlobReadAndCompareResult({fileName:a,idbBlob:c});return(k||(k=b("Promise"))).resolve()})["catch"](function(a){f==null||f.endFail("fetch_data_blob_from_backend_fail",{string:{description:e,error:a.message,fetch_by:"hashedPlaintextHash"}});r(j,n,"FAIL");m.set(i,{TAG:1,value:""});c("FBLogger")("messenger_web_media").catching(a).mustfix("Unable to getBlobDataUrlByHashedPlaintextHash");return(k||(k=b("Promise"))).resolve()});void (h||(h=d("PromiseAnnotate"))).setDisplayName(g,"MAWAttachmentBlob.getBlobDataUrl");m.set(i,{TAG:0,value:g});throw g}function f(a,b,e){if(a==null){c("FBLogger")("messenger_web_media").warn("Unable to getAttachmentBlob because attachment is null, from %s",b);e==null||e.endFail("attachment_is_null",{string:{description:b}});return""}if((i||(i=d("I64"))).equal(a.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC))){var f;f=(f=q(a))!=null?f:"";if(f==null||f.length===0){c("FBLogger")("messenger_web_media").warn("Unable to getAttachmentBlob because optimistic attachment url is null or empty, from %s",b);e==null||e.endFail("no_optimistic_attachment_url",{string:{description:b}});return""}e==null||e.addPoint("return_optimistic",{string:{description:b}});return f}return o(a.attachmentFbid,b,e)}function p(a,b,e,f,g){var h="fetch_"+b+"_xma_blob",k={string:{description:e}};if(a==null){f==null||f.endFail(h+"_attachment_is_null",k);return""}if((i||(i=d("I64"))).equal(a.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC))&&b==="preview"){var l=q(a);if(l==null||l.length===0){c("FBLogger")("messenger_web_media").mustfix("Unable to getInfoUrlXMA because optimistic attachment url is null or empty, from %s",e);f==null||f.endFail(h+"_no_optimistic_attachment_url",k);return""}f==null||f.addPoint(h+"_return_optimistic",k);return l}h=g!=null?g:a.attachmentFbid+b;k=n.get(h);if(k!=null){if(k.TAG===0)throw k.value;return k.value}var m;switch(b){case"preview":m=a.xmaPreviewFbid;break;case"header":m=a.xmaHeaderImageFbid;break;case"favicon":m=a.xmaFaviconFbid;break}if(m==null)throw c("FBLogger")("messenger_web_media").mustfixThrow("Failed to getInfoUrlXMA because xma does not have required data. xmaId is %s, info type is %s, from %s",a.attachmentFbid,b,e);return o(m,e,f)}function q(a){return a==null?void 0:a.previewUrl}function r(a,b,d){var e=(l||(l=c("performanceNow")))();a.forEach(function(a){a.addSubspan("MAWFetchAttachmentBlob","AppTiming",b,e,{action:d,full_duration:(e-b)/1e3})})}g.setEagerAttachmentUrl=a;g.isEagerAttachmentUrlDone=e;g.getAttachmentBlobNonOptional_CausesSuspense=o;g.getAttachmentBlob_CausesSuspense=f;g.getInfoUrlXMA_CausesSuspense=p}),98);
__d("MAWConvertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType",["WAArmadilloXMA.pb","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.MEDIA_LABEL:return"media_label";case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.POST_LABEL:return"post_label";case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.NONE:return null;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.WARNING:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.PRIVATE:default:d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Not a valid ExtendedContentOverlayIconGlyph: ",""])),a);return"warning_screens"}}g.convertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType=a}),98);
__d("MAWGetAttachmentThumbnailBlob",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","MAWBridgeSendAndReceive","MAWDbMedia","MAWMediaManagerUiIntegrationCheck","Promise","PromiseAnnotate","WAHashUtils","interaction-tracing","isStringNullOrEmpty","nullthrows","performanceNow"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=new Map(),n=new Map();function a(a,b){m.set(a,{TAG:"done",url:b})}function e(a,b,e,f){if(a==null){c("FBLogger")("messenger_web_media").warn("Unable to getThumbnailBlobDataUrlByMediaId because attachment is null, from %s",b);e==null||e.endFail("attachment_is_null",{string:{description:b}});return""}if((j||(j=d("I64"))).equal(a.authorityLevel,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC))){var g,h=o(a);if(h==null||h.length===0){c("FBLogger")("messenger_web_media").warn("Unable to getThumbnailBlobDataUrlByMediaId because optimistic attachment url is null or empty, from %s",b);e==null||e.endFail("no_optimistic_attachment_url",{string:{description:b}});return""}e==null||e.addPoint("return_optimistic",{string:{description:b}});n.set((g=a.offlineAttachmentId)!=null?g:a.attachmentFbid,h);return h}g=f!=null?f:a.attachmentFbid;h=m.get(g);f=n.get((f=a.offlineAttachmentId)!=null?f:a.attachmentFbid);if(h!=null){if(h.TAG==="loading"){if(f!=null)return f;throw h.urlPromise}var i=c("isStringNullOrEmpty")(h.url);i&&(e==null||e.addPoint("attachment_state_preview_url_is_null_or_empty",{string:{description:b}}));if(!d("MAWMediaManagerUiIntegrationCheck").getIsMediaManagerUiIntegrationEnabled())return h.url;else if(!i)return h.url}i=isFinite(a.attachmentFbid)?q(a.attachmentFbid,b,e,g):p(a.attachmentFbid,b,e,g);m.set(g,{TAG:"loading",urlPromise:i});if(f!=null)return f;void (l||(l=d("PromiseAnnotate"))).setDisplayName(i,"MAWGetAttachmentThumbnailBlob.getThumbnailBlobDataUrl");throw i}function f(a,b,c,e){e=e!=null?e:a;var f=m.get(e);if(f!=null){if(f.TAG==="loading")throw f.urlPromise;return f.url}f=isFinite(a)?q(a,b,c,e):p(a,b,c,e);m.set(e,{TAG:"loading",urlPromise:f});void (l||(l=d("PromiseAnnotate"))).setDisplayName(f,"MAWGetAttachmentThumbnailBlob.getThumbnailBlobByAttachmentId");throw f}function o(a){return a==null?void 0:a.previewUrl}function p(a,e,f,g){f==null||f.addPoint("fetch_thumbnail_blob_from_backend_start",{string:{description:e}});var j=c("interaction-tracing").InteractionTracingCore.getPendingInteractions(),k=(i||(i=c("performanceNow")))();a=d("MAWBridgeSendAndReceive").sendAndReceive("backend","getThumbnailBlobDataUrlByHashedPlaintextHash",{description:e,plaintextHash:d("WAHashUtils").stringToPlaintextHash(a),qplInstanceKey:f==null?void 0:f.getInstanceKey()}).then(function(a){r(j,k,Boolean(a)?"SUCCESS":"FAIL");!Boolean(a)?(f==null||f.endFail("fetch_thumbnail_blob_from_backend_fail",{string:{description:e,error:"empty-url"}}),c("FBLogger")("messenger_web_media").warn("Unable to getThumbnailBlobDataUrlByMediaId, backend returned empty url, from %s",e)):f==null||f.addPoint("fetch_thumbnail_blob_from_backend_success",{string:{description:e}});m.set(g,{TAG:"done",url:c("nullthrows")(a)});f==null||f.addPoint("fetch_thumbnail_blob_url_set_in_cache");return(h||(h=b("Promise"))).resolve()})["catch"](function(a){f==null||f.endFail("fetch_thumbnail_blob_from_backend_fail",{string:{description:e,error:a.message}});r(j,k,"FAIL");m.set(g,{TAG:"done",url:""});c("FBLogger")("messenger_web_media").catching(a).warn("Unable to getThumbnailBlobDataUrlByHashedPlaintextHash, from %s",e);return(h||(h=b("Promise"))).resolve()});return a}function q(a,e,f,g){f==null||f.addPoint("fetch_thumbnail_blob_from_backend_start",{string:{description:e}});var j=c("interaction-tracing").InteractionTracingCore.getPendingInteractions(),k=(i||(i=c("performanceNow")))();a=d("MAWBridgeSendAndReceive").sendAndReceive("backend","getThumbnailBlobDataUrlByMediaId",{description:e,mediaId:d("MAWDbMedia").convertNumberToMediaId(Number.parseInt(a,10)),qplInstanceKey:f==null?void 0:f.getInstanceKey()}).then(function(a){r(j,k,Boolean(a)?"SUCCESS":"FAIL");!Boolean(a)?(f==null||f.endFail("fetch_thumbnail_blob_from_backend_fail",{string:{description:e,error:"empty-url"}}),c("FBLogger")("messenger_web_media").warn("Unable to getThumbnailBlobDataUrlByMediaId, backend returned empty url, from %s",e)):f==null||f.addPoint("fetch_thumbnail_blob_from_backend_success",{string:{description:e}});m.set(g,{TAG:"done",url:c("nullthrows")(a)});f==null||f.addPoint("fetch_thumbnail_blob_url_set_in_cache");return(h||(h=b("Promise"))).resolve()})["catch"](function(a){f==null||f.endFail("fetch_thumbnail_blob_from_backend_fail",{string:{description:e,error:a.message}});r(j,k,"FAIL");m.set(g,{TAG:"done",url:""});c("FBLogger")("messenger_web_media").catching(a).warn("Unable to getThumbnailBlobDataUrlByMediaId, from %s",e);return(h||(h=b("Promise"))).resolve()});return a}function r(a,b,d){var e=(i||(i=c("performanceNow")))();a.forEach(function(a){a.addSubspan("MAWFetchAttachmentThumbnailBlob","AppTiming",b,e,{action:d,full_duration:(e-b)/1e3})})}g.setEagerThumbnailUrl=a;g.getThumbnailBlob_CausesSuspense=e;g.getThumbnailBlobByAttachmentId_CausesSuspense=f}),98);
__d("MAWMediaSetMediaValidatedResult",["LSIntEnum","MAWClientMediaStatusUtils","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e){c("promiseDone")(a,function(a){return a.runInTransaction(async function(a){var c=await a.client_media_status.get(b);return c==null?a.client_media_status.add(babelHelpers.extends({id:b,mainMediaStatus:(h||(h=d("LSIntEnum"))).ofNumber(1),mainMediaStatusDetails:"optimistic_with_validation_result",previewMediaStatus:h.ofNumber(1),previewMediaStatusDetails:"optimistic_with_validation_result"},d("MAWClientMediaStatusUtils").getValidationResults(e))):a.client_media_status.put(babelHelpers.extends({},c,{id:b},d("MAWClientMediaStatusUtils").getValidationResults(e)))},"readwrite",void 0,void 0,f.id+":26")})}g.call=a}),98);
__d("useMAWMediaDownloadUIStateDebounced",["react","react-compiler-runtime","useMAWMediaDebouncedState"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;function a(a){var b=d("react-compiler-runtime").c(4),e=c("useMAWMediaDebouncedState")(a),f=e[0],g=e[1],h;b[0]!==g||b[1]!==a?(e=function(){g(a,!(a==="loading"||a==="downloaded"))},h=[a,g],b[0]=g,b[1]=a,b[2]=e,b[3]=h):(e=b[2],h=b[3]);i(e,h);return f}g["default"]=a}),98);
__d("useMAWMediaValidationResult",["I64","LSIntEnum","MAWBridgeSendAndReceive","MAWDbMedia","MAWMediaSetMediaValidatedResult","MessagingAttachmentType","WAHashUtils","promiseDone","react","react-compiler-runtime","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=h||d("react");var k=b.useEffect;b.useMemo;var l=new Set();function m(a,b){var e=d("react-compiler-runtime").c(5),f=c("useAsyncReStore")(),g,h;e[0]!==a||e[1]!==f||e[2]!==b?(g=function(){if(a==null)return;var e=(i||(i=d("I64"))).equal(a.attachmentType,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)),g=i.equal(a.attachmentType,j.ofNumber(c("MessagingAttachmentType").AUDIO)),h=a.attachmentFbid;if(!l.has(h)&&(e||g)){l.add(h);var k=isNaN(h);e=k?d("MAWBridgeSendAndReceive").sendAndReceive("backend","getMediaValidationResultByPlainTextHash",{plaintextHash:d("WAHashUtils").stringToPlaintextHash(h),qplInstanceKey:b==null?void 0:b.getInstanceKey()}):d("MAWBridgeSendAndReceive").sendAndReceive("backend","getMediaValidationResultByMediaId",{mediaId:d("MAWDbMedia").convertNumberToMediaId(parseInt(h,10)),qplInstanceKey:b==null?void 0:b.getInstanceKey()});c("promiseDone")(e.then(function(a){if(a!=null){var b=k?d("WAHashUtils").stringToPlaintextHash(h):d("MAWDbMedia").convertNumberToMediaId(parseInt(h,10));d("MAWMediaSetMediaValidatedResult").call(f,b.toString(),a)}}),n)}},h=[a,f,b],e[0]=a,e[1]=f,e[2]=b,e[3]=g,e[4]=h):(g=e[3],h=e[4]);k(g,h)}function n(){}function a(a,b,e){var f=d("react-compiler-runtime").c(5);m(a);var g,h;f[0]!==a||f[1]!==e||f[2]!==b?(g=function(){if(a==null)return;var f=(i||(i=d("I64"))).equal(a.attachmentType,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO));if(!f)return;f=e!=null;if(!f)return;f=e==null?void 0:e.validationResult;if(f==null)return;b==null||b.addAnnotations({"int":{audio_avg_bits_per_second:f.audioAvgBitsPerSecond,audio_number_of_channels:f.audioNumberOfChannels,audio_sampling_rate:f.audioSamplingRate,video_avg_bits_per_second:f.videoAvgBitsPerSecond,video_calculated_fps:f.videoCalculatedFps,video_duration:f.videoDuration,video_height:f.videoHeight,video_nominal_fps:f.videoNominalFps,video_width:f.videoWidth},string:{audio_stream_type:f.audioStreamType,validated_mime_type:f.validatedMimeType,video_stream_type:f.videoStreamType}})},h=[a,e,b],f[0]=a,f[1]=e,f[2]=b,f[3]=g,f[4]=h):(g=f[3],h=f[4]);k(g,h);bb0:{if(a==null){f=null;break bb0}g=(i||(i=d("I64"))).equal(a.attachmentType,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO));if(!g){f=null;break bb0}h=e!=null;if(!h){f=void 0;break bb0}g=e==null?void 0:e.validationResult;if(g==null){f=void 0;break bb0}f=g}return f}g["default"]=a}),98);
__d("useMAWMediaDownloadStatus",["MAWMediaDownloadStatusBackendFetcher","MAWMediaDownloadStatusUIState","ReQL","ReQLSuspense","react-compiler-runtime","useMAWMediaDownloadUIStateDebounced","useMAWMediaValidationResult","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e){var g=d("react-compiler-runtime").c(17),i=(h||(h=c("useReStore")))(),j=e!=null?e:a==null?void 0:a.attachmentFbid,k;g[0]!==i||g[1]!==j?(e=function(){return j!=null?d("ReQL").fromTableAscending(i.tables.client_media_status).getKeyRange(j):d("ReQL").empty()},k=[i,j],g[0]=i,g[1]=j,g[2]=e,g[3]=k):(e=g[2],k=g[3]);e=d("ReQLSuspense").useFirst(e,k,f.id+":43");g[4]!==a||g[5]!==e||g[6]!==j?(k=d("MAWMediaDownloadStatusUIState").getNonDebouncedUIStateAndStatus(e,j,a),g[4]=a,g[5]=e,g[6]=j,g[7]=k):k=g[7];e=k;k=e.mawMediaStatus;var l=e.nonDebouncedUIState;e=e.status;l=c("useMAWMediaDownloadUIStateDebounced")(l);k=c("useMAWMediaValidationResult")(a,b,k);var m;g[8]!==a||g[9]!==b||g[10]!==e||g[11]!==j?(m={attachment:a,mediaRenderQpl:b,mediaStatus:e,statusKey:j},g[8]=a,g[9]=b,g[10]=e,g[11]=j,g[12]=m):m=g[12];d("MAWMediaDownloadStatusBackendFetcher").useFetchInitialDownloadStatus(m);g[13]!==l||g[14]!==e||g[15]!==k?(a={status:e,uiState:l,validationResult:k},g[13]=l,g[14]=e,g[15]=k,g[16]=a):a=g[16];return a}g["default"]=a}),98);
__d("useShouldShowPlaybackErrorFallback",["MAWVideoAudioPlaybackErrorHandlerUtils","react-compiler-runtime","useMAWMediaDownloadStatus"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var e=d("react-compiler-runtime").c(3);b=c("useMAWMediaDownloadStatus")(a,b);b=b.validationResult;if(a==null)return!1;var f;e[0]!==a||e[1]!==b?(f=d("MAWVideoAudioPlaybackErrorHandlerUtils").isInvalidVideo(a,b),e[0]=a,e[1]=b,e[2]=f):f=e[2];return f}g["default"]=a}),98);
__d("useShouldShowUnsupportedCodecFallback",["MAWVideoAudioPlaybackErrorHandlerUtils","react-compiler-runtime","useMAWMediaDownloadStatus"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var e=d("react-compiler-runtime").c(3);b=c("useMAWMediaDownloadStatus")(a,b);b=b.validationResult;if(a==null)return!1;var f;e[0]!==a||e[1]!==b?(f=d("MAWVideoAudioPlaybackErrorHandlerUtils").isUnsupportedVideo(a,b),e[0]=a,e[1]=b,e[2]=f):f=e[2];return f}g["default"]=a}),98);
__d("useMWV2MediaViewerSecurePlayableUrl_CausesSuspense",["cr:5970","react"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(){return i}function i(a,c,d){return(a=b("cr:5970")==null?void 0:b("cr:5970").getAttachmentBlob_CausesSuspense(a,c,d))!=null?a:""}g["default"]=a}),98);
__d("MAWVideoAudioPlaybackErrorHandlerUtils",["fbt","BaseMiddot.react","I64","LSIntEnum","MWXLink.react","MessagingAttachmentType","MessengerWebUXLoggerImpl","ReQL","ReQLSuspense","UserAgent","justknobx","react","react-compiler-runtime","useMAWMediaDownloadStatus","useMWV2MediaViewerSecurePlayableUrl_CausesSuspense","useReStore","useShouldShowPlaybackErrorFallback","useShouldShowUnsupportedCodecFallback"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||c("react");function a(a,b,e){var f,g,j=d("react-compiler-runtime").c(22);f=(f=c("useShouldShowPlaybackErrorFallback")(a,null))!=null?f:!1;g=(g=c("useShouldShowUnsupportedCodecFallback")(a,null))!=null?g:!1;var l=d("MessengerWebUXLoggerImpl").useInteractionLogger(),n=c("useMWV2MediaViewerSecurePlayableUrl_CausesSuspense")();if(f){j[0]===Symbol["for"]("react.memo_cache_sentinel")?(f={downloadButton:null,mediaStatusText:h._(/*BTDS*/"_j[\"Invalid file format\",\"f90fb65f92ad8ac33f140b8be3c9eed1\",1]"),retryButton:null},j[0]=f):f=j[0];return f}if(g){f=(i||(i=d("I64"))).equal(a.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO));g=i.equal(a.attachmentType,k.ofNumber(c("MessagingAttachmentType").AUDIO));if(f){j[1]!==a||j[2]!==n?(f=n(a,"MAWVideoAudioPlaybackErrorHandlerUtils"),j[1]=a,j[2]=n,j[3]=f):f=j[3];a=f;if(!Boolean(a)&&c("justknobx")._("4203")){j[4]===Symbol["for"]("react.memo_cache_sentinel")?(n={downloadButton:null,mediaStatusText:h._(/*BTDS*/"Error while loading file"),retryButton:null},j[4]=n):n=j[4];return n}j[5]===Symbol["for"]("react.memo_cache_sentinel")?(f=m.jsx(c("BaseMiddot.react"),{}),j[5]=f):f=j[5];j[6]!==l?(n=function(){l==null||l({eventName:"click_unsupported_video_download_from_mustache"})},j[6]=l,j[7]=n):n=j[7];var o;j[8]===Symbol["for"]("react.memo_cache_sentinel")?(o=h._(/*BTDS*/"Download to play"),j[8]=o):o=j[8];j[9]!==a||j[10]!==n?(f=m.jsxs(m.Fragment,{children:[f,m.jsx(c("MWXLink.react"),{download:!0,href:a,onClick:n,children:o})]}),j[9]=a,j[10]=n,j[11]=f):f=j[11];o=f;j[12]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._(/*BTDS*/"Browser doesn't support this video"),j[12]=a):a=j[12];j[13]!==o?(n={downloadButton:o,mediaStatusText:a,retryButton:null},j[13]=o,j[14]=n):n=j[14];return n}if(g){j[15]===Symbol["for"]("react.memo_cache_sentinel")?(f={downloadButton:null,mediaStatusText:h._(/*BTDS*/"Browser doesn't support this audio"),retryButton:null},j[15]=f):f=j[15];return f}}j[16]!==b||j[17]!==e?(a=b?m.jsxs(m.Fragment,{children:[m.jsx(c("BaseMiddot.react"),{}),m.jsx(c("MWXLink.react"),{onClick:e,children:h._(/*BTDS*/"Retry")})]}):null,j[16]=b,j[17]=e,j[18]=a):a=j[18];o=a;j[19]===Symbol["for"]("react.memo_cache_sentinel")?(n=h._(/*BTDS*/"Couldn't download"),j[19]=n):n=j[19];j[20]!==o?(g={downloadButton:null,mediaStatusText:n,retryButton:o},j[20]=o,j[21]=g):g=j[21];return g}function b(a){var b=d("react-compiler-runtime").c(7),e=(j||(j=c("useReStore")))(),g;b[0]!==e.tables.attachments||b[1]!==a.messageId||b[2]!==a.threadKey?(g=function(){return d("ReQL").fromTableAscending(e.tables.attachments).getKeyRange(a.threadKey,a.messageId)},b[0]=e.tables.attachments,b[1]=a.messageId,b[2]=a.threadKey,b[3]=g):g=b[3];var h;b[4]!==e||b[5]!==a?(h=[e,a],b[4]=e,b[5]=a,b[6]=h):h=b[6];b=d("ReQLSuspense").useFirst(g,h,f.id+":167");g=c("useMAWMediaDownloadStatus")(b);h=g.validationResult;if(b==null)return!1;g=(i||(i=d("I64"))).equal(b.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))||(i||(i=d("I64"))).equal(b.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO));if(!g)return!1;b=h!=null?h:{};g=b.validatedMimeType;return g==="invalid-mp4"?!0:!1}var n=Object.freeze({Chrome:["H263","Vvc","Av1"],Edge:["H263","Vvc","Av1"],Firefox:["H263","Vvc","Hevc","Av1"],Safari:["H263","Vvc","Vp9","Av1"]});function o(a){if(a==null)return!0;if(c("UserAgent").isBrowser("Chrome"))return n.Chrome.includes(a)===!1;else if(c("UserAgent").isBrowser("Firefox"))return n.Firefox.includes(a)===!1;else if(c("UserAgent").isBrowser("Edge"))return n.Edge.includes(a)===!1;else if(c("UserAgent").isBrowser("Safari"))return n.Safari.includes(a)===!1;return!0}function e(a,b){a=a.attachmentType;a=(i||(i=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))||(i||(i=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO));if(!a)return!1;a=b!=null?b:{};b=a.validatedMimeType;a=a.videoStreamType;return o(a)===!1||b==="unsupported-video"}function p(a,b){a=a.attachmentType;a=(i||(i=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))||(i||(i=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO));if(!a)return!1;a=b!=null?b:{};b=a.validatedMimeType;return b==="invalid-mp4"}g.useGetMetadataForMediaNotRendered=a;g.useIsInvalidVideoMessage=b;g.isUnsupportedVideo=e;g.isInvalidVideo=p}),226);
__d("MWAnimatedImageControlsUtilCometSettingsQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9834610223284602"}),null);
__d("MWAnimatedImageControlsUtilCometSettingsQuery.graphql",["MWAnimatedImageControlsUtilCometSettingsQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoSettings",kind:"LinkedField",name:"video_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"autoplay_setting_www",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWAnimatedImageControlsUtilCometSettingsQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWAnimatedImageControlsUtilCometSettingsQuery",selections:a},params:{id:b("MWAnimatedImageControlsUtilCometSettingsQuery_facebookRelayOperation"),metadata:{},name:"MWAnimatedImageControlsUtilCometSettingsQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("MWAnimatedImageControlsUtilMWSettingsQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9439828062807168"}),null);
__d("MWAnimatedImageControlsUtilMWSettingsQuery.graphql",["MWAnimatedImageControlsUtilMWSettingsQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"msgr_gif_autoplay",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWAnimatedImageControlsUtilMWSettingsQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWAnimatedImageControlsUtilMWSettingsQuery",selections:a},params:{id:b("MWAnimatedImageControlsUtilMWSettingsQuery_facebookRelayOperation"),metadata:{},name:"MWAnimatedImageControlsUtilMWSettingsQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("MWAnimatedImageControlsUtil",["$InternalEnum","CometRelay","MWAnimatedImageControlsUtilCometSettingsQuery.graphql","MWAnimatedImageControlsUtilMWSettingsQuery.graphql","MetaConfig","gkx","promiseDone","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;e=j||d("react");var k=e.useEffect,l=e.useState,m=b("$InternalEnum").Mirrored(["NOT_FETCHED_YET","OFF","ON"]);function a(){var a=d("react-compiler-runtime").c(3),b=d("CometRelay").useRelayEnvironment(),e=l(null),f=e[0],g=e[1],h=c("gkx")("20836"),i;a[0]!==b?(e=function(){h||c("promiseDone")(n(b).then(g))},i=[b,h],a[0]=b,a[1]=e,a[2]=i):(e=a[1],i=a[2]);k(e,i);if(h)return m.ON;switch(f){case null:return m.NOT_FETCHED_YET;case!0:return m.ON;case!1:return m.OFF;default:return m.NOT_FETCHED_YET}}async function n(a){var e=c("MetaConfig")._("37");if(e){var f;e=await d("CometRelay").fetchQuery(a,h!==void 0?h:h=b("MWAnimatedImageControlsUtilMWSettingsQuery.graphql"),{}).toPromise();return(e==null||(f=e.viewer)==null?void 0:f.msgr_gif_autoplay)==="ON"}else{var g;e=await d("CometRelay").fetchQuery(a,i!==void 0?i:i=b("MWAnimatedImageControlsUtilCometSettingsQuery.graphql"),{}).toPromise();a=e==null||(g=e.viewer)==null||(g=g.video_settings)==null?void 0:g.autoplay_setting_www;if(a==="on")return!0;else return!1}}g.MWAutoplayAnimationsSetting=m;g.useGetMessengerAutoplaySetting=a}),98);
__d("useGetMediaGroupStyles",["MWLSThreadDisplayContext","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useMemo;var i=180,j=120;function a(a,b){var c=d("react-compiler-runtime").c(40),e=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext()==="ChatTab",f=null;if(b===2&&e){var g;c[0]===Symbol["for"]("react.memo_cache_sentinel")?(g="x78zum5 xdt5ytf x6ikm8r x10wlt62 x1isuwpm xq1dxzn",c[0]=g):g=c[0];f=g}else if(b===2&&!e){c[1]===Symbol["for"]("react.memo_cache_sentinel")?(g="x78zum5 xdt5ytf x6ikm8r x10wlt62 x1en3kgc xafpxmx",c[1]=g):g=c[1];f=g}else if(b===3&&e){c[2]===Symbol["for"]("react.memo_cache_sentinel")?(g="x78zum5 xdt5ytf x6ikm8r x10wlt62 xu3xrit xq1dxzn",c[2]=g):g=c[2];f=g}else if(b===3&&!e){c[3]===Symbol["for"]("react.memo_cache_sentinel")?(g="x78zum5 xdt5ytf x6ikm8r x10wlt62 x1egiwwb xafpxmx",c[3]=g):g=c[3];f=g}else if(b===4&&e){c[4]===Symbol["for"]("react.memo_cache_sentinel")?(g="x78zum5 xdt5ytf x6ikm8r x10wlt62 x89wwaf xh6lk7j xdj266r",c[4]=g):g=c[4];f=g}else if(b===4&&!e){c[5]===Symbol["for"]("react.memo_cache_sentinel")?(g="x78zum5 xdt5ytf x6ikm8r x10wlt62 x1gyaxfs xt4sqew xdj266r",c[5]=g):g=c[5];f=g}if(e){c[6]===Symbol["for"]("react.memo_cache_sentinel")?(g="x6s0dn4 x1exxf4d xpv9jar x1nb4dca x1nmn18 xpilrb4 x1lun4ml x1xn7y0n x1uxb8k9 x1vmbcc8 x16xm01d x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x78zum5 xl56j7k x6ikm8r x10wlt62 x10l6tqk x1wkxgih x1mu601j x2aouup xi3av73 x1i9suas xygnafs",c[6]=g):g=c[6];g=g}else{var h;c[7]===Symbol["for"]("react.memo_cache_sentinel")?(h="x6s0dn4 x1exxf4d xpv9jar x1nb4dca x1nmn18 xpilrb4 x1lun4ml x1xn7y0n x1uxb8k9 x1vmbcc8 x16xm01d x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x78zum5 x1b51vyi xl56j7k x19aweqf x1e4dklr x1shn012 xfb3i0g x6ikm8r x10wlt62 x10l6tqk xzjbwwf",c[7]=h):h=c[7];g=h}c[8]===Symbol["for"]("react.memo_cache_sentinel")?(h=[{bottom:0,left:17},{bottom:6,left:8,transform:"rotate(-4deg)"},{bottom:12,right:8,transform:"rotate(4deg)"},{bottom:18,left:8,transform:"rotate(-4deg)"}],c[8]=h):h=c[8];var k=a?null:0,l=a?0:null,m;c[9]!==k||c[10]!==l?(m={left:k,right:l,top:0},c[9]=k,c[10]=l,c[11]=m):m=c[11];k=a?0:null;l=a?null:0;var n=e?100:160,o;c[12]!==k||c[13]!==l||c[14]!==n?(o={left:k,right:l,top:n},c[12]=k,c[13]=l,c[14]=n,c[15]=o):o=c[15];k=a?null:0;l=a?0:null;c[16]!==l||c[17]!==k?(n={bottom:0,left:k,right:l},c[16]=l,c[17]=k,c[18]=n):n=c[18];c[19]!==n||c[20]!==m||c[21]!==o?(l=[m,o,n],c[19]=n,c[20]=m,c[21]=o,c[22]=l):l=c[22];k=a?0:null;n=a?null:0;c[23]!==k||c[24]!==n?(m={left:k,right:n,top:0},c[23]=k,c[24]=n,c[25]=m):m=c[25];o=a?null:0;k=a?0:null;c[26]!==o||c[27]!==k?(n={bottom:0,left:o,right:k},c[26]=o,c[27]=k,c[28]=n):n=c[28];c[29]!==m||c[30]!==n?(a=[m,n],c[29]=m,c[30]=n,c[31]=a):a=c[31];c[32]!==l||c[33]!==a?(o={fourImageTile:h,threeImageTile:l,twoImageTile:a},c[32]=l,c[33]=a,c[34]=o):o=c[34];k=o;m=k;n=b===2?m.twoImageTile:b===3?m.threeImageTile:m.fourImageTile;h=e?j:i;c[35]!==f||c[36]!==n||c[37]!==h||c[38]!==g?(l={containerStyles:f,coordinations:n,imageSize:h,wrapperStyles:g},c[35]=f,c[36]=n,c[37]=h,c[38]=g,c[39]=l):l=c[39];return l}function b(a,b,c){var e=d("react-compiler-runtime").c(4),f=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext()==="ChatTab",g=1,h=1;if(a!==!0||b===0||c===0){var k;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(k={resizeRatio:1,scaleRatio:1},e[0]=k):k=e[0];return k}a===!0&&b!=null&&c!=null&&(b>=c?g=Math.ceil((f?j:i)/c):g=Math.ceil((f?j:i)/b));a===!0&&g===1&&b!=null&&c!=null&&(h=b>c?b/c:c/b);e[1]!==g||e[2]!==h?(k={resizeRatio:g,scaleRatio:h},e[1]=g,e[2]=h,e[3]=k):k=e[3];return k}g.IMAGE_SIZE=i;g.IMAGE_SIZE_CHAT_TAB=j;g.useGetMediaGroupStyles=a;g.useGetMediaGroupTileImageRatios=b}),98);
__d("MWMessageListImageSizingUtils",["justknobx","useGetMediaGroupStyles"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e){if(e===!0)return{maxHeight:b==="Inbox"?d("useGetMediaGroupStyles").IMAGE_SIZE:d("useGetMediaGroupStyles").IMAGE_SIZE_CHAT_TAB,maxWidth:b==="Inbox"?d("useGetMediaGroupStyles").IMAGE_SIZE:d("useGetMediaGroupStyles").IMAGE_SIZE_CHAT_TAB};return b!=="Inbox"&&b!=="ChatTab"||a&&!c("justknobx")._("5036")?{maxHeight:200,maxWidth:480}:{maxHeight:b==="Inbox"?c("justknobx")._("2546"):c("justknobx")._("2547"),maxWidth:b==="Inbox"?c("justknobx")._("2548"):c("justknobx")._("2549")}}g.getMaxPreviewHeightAndWidth=a}),98);
__d("MWXIconEyeCross",["MWXSvgIcon","SVGIcon","cr:22310","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22310")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconInfoCircle",["MWXSvgIcon","SVGIcon","cr:22371","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22371")),c("gkx")("23219"));g["default"]=a}),98);
__d("MessengerWellbeingInformTreatmentFalcoEventLogger",["$InternalEnum","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(null==a)throw new TypeError("Cannot destructure "+a)}var i=c("requireDeferred")("MwbCmInformTreatmentEventFalcoEvent").__setRef("MessengerWellbeingInformTreatmentFalcoEventLogger"),j=c("requireDeferred")("MwbInformTreatmentShownImpressionFalcoEvent").__setRef("MessengerWellbeingInformTreatmentFalcoEventLogger");e=b("$InternalEnum")({AI_GENERATED_CONTENT:"ai_generated_content",MISINFORMATION:"misinformation"});function a(a){var b=babelHelpers["extends"]({},(h(a),a));i.onReady(function(a){return a.log(function(){return babelHelpers["extends"]({},b)})})}function d(a){var b=babelHelpers["extends"]({},(h(a),a));j.onReady(function(a){return a.log(function(){return babelHelpers["extends"]({},b)})})}g.MWInformTreatmentEventName=e;g.logForCM=a;g.logForPrivateChats=d}),98);
__d("useMWInformTreatmentFalcoEventLogger",["I64","Int64Hooks","LSIntEnum","LSMessagingThreadTypeUtil","MWLSThread","MessengerWellbeingInformTreatmentFalcoEventLogger","ReQL","ReQLSuspense","react-compiler-runtime","useCommunityFolder","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a){var b=d("react-compiler-runtime").c(30),e=a.message,g=(j||(j=c("useReStore")))(),k=d("MWLSThread").useThreadExn(e.threadKey);a=c("useCommunityFolder")(k);var l=(a=a==null?void 0:a.fbGroupId)!=null?a:(h||(h=d("I64"))).zero;b[0]!==k.threadType?(a=d("LSMessagingThreadTypeUtil").isPublicCMThread(k.threadType),b[0]=k.threadType,b[1]=a):a=b[1];var m=a;b[2]!==k?(a=d("LSMessagingThreadTypeUtil").isOpenFnFThread(k),b[2]=k,b[3]=a):a=b[3];var n=a,o=!(h||(h=d("I64"))).equal(e.displayedContentTypes,(i||(i=d("LSIntEnum"))).ofNumber(1)),p;b[4]!==g.tables.attachments||b[5]!==o||b[6]!==e.messageId||b[7]!==e.threadKey?(a=function(){return o?d("ReQL").fromTableAscending(g.tables.attachments).getKeyRange(e.threadKey,e.messageId):d("ReQL").empty()},p=[o,g.tables.attachments,e.threadKey,e.messageId],b[4]=g.tables.attachments,b[5]=o,b[6]=e.messageId,b[7]=e.threadKey,b[8]=a,b[9]=p):(a=b[8],p=b[9]);var q=d("ReQLSuspense").useFirst(a,p,f.id+":63");b[10]!==(q==null?void 0:q.attachmentFbid)||b[11]!==l||b[12]!==n||b[13]!==m||b[14]!==e.isForwarded||b[15]!==e.messageId||b[16]!==e.threadKey||b[17]!==k.threadSubtype||b[18]!==k.threadType?(a=function(a,b){if(m)d("MessengerWellbeingInformTreatmentFalcoEventLogger").logForCM({attachment_id:q==null?void 0:q.attachmentFbid,event_name:a,group_id:(h||(h=d("I64"))).to_string(l),inform_treatment:b!=null?{name:b.name,type:b.type}:void 0,is_forward:e.isForwarded,message_id:e.messageId,thread_id:h.to_string(e.threadKey),thread_subtype:k.threadSubtype!=null?(i||(i=d("LSIntEnum"))).unwrapIntEnum(k.threadSubtype):void 0});else if(n&&a==="impression"){d("MessengerWellbeingInformTreatmentFalcoEventLogger").logForPrivateChats({inform_treatment_name:b!=null?b==null?void 0:b.name:void 0,inform_treatment_type:(a=b==null?void 0:b.type)!=null?a:void 0,thread_type:(i||(i=d("LSIntEnum"))).unwrapIntEnum(k.threadType)})}},b[10]=q==null?void 0:q.attachmentFbid,b[11]=l,b[12]=n,b[13]=m,b[14]=e.isForwarded,b[15]=e.messageId,b[16]=e.threadKey,b[17]=k.threadSubtype,b[18]=k.threadType,b[19]=a):a=b[19];p=q==null?void 0:q.attachmentFbid;var r;b[20]!==l||b[21]!==n||b[22]!==m||b[23]!==e.isForwarded||b[24]!==e.messageId||b[25]!==e.threadKey||b[26]!==p||b[27]!==k.threadSubtype||b[28]!==k.threadType?(r=[p,l,n,m,e.isForwarded,e.messageId,e.threadKey,k.threadSubtype,k.threadType],b[20]=l,b[21]=n,b[22]=m,b[23]=e.isForwarded,b[24]=e.messageId,b[25]=e.threadKey,b[26]=p,b[27]=k.threadSubtype,b[28]=k.threadType,b[29]=r):r=b[29];return d("Int64Hooks").useCallbackInt64(a,r)}g["default"]=a}),98);
__d("MWInformedTreatment.react",["fbt","FDSBlurredBackgroundImage.react","LSMessagingThreadTypeUtil","MWXColumn.react","MWXColumnItem.react","MWXIconEyeCross","MWXIconInfoCircle","MWXIconStrict.react","MWXImage.react","MWXText.react","MessengerWebUXLogger","ReQL","ReQLSuspense","gkx","qex","react","react-compiler-runtime","useMWInformTreatmentFalcoEventLogger","useMergeRefs","useReStore","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react"),l={overlay:{paddingTop:"xexx8yu",paddingInlineEnd:"x2vl965",paddingBottom:"x18d9i69",paddingInlineStart:"xe2zdcy",width:"xh8yej3",$$css:!0},post:{flexGrow:"x1iyjqo2",height:"x5yr21d",objectFit:"xl1xv1r",width:"xh8yej3",$$css:!0}},m={AI_GENERATED_CONTENT:{icon:c("MWXIconInfoCircle"),text:h._(/*BTDS*/"AI info")},ALTERED_MEDIA:{icon:c("MWXIconEyeCross"),text:h._(/*BTDS*/"Altered media")},ALTERED_PHOTO:{icon:c("MWXIconEyeCross"),text:h._(/*BTDS*/"Altered photo")},CRUEL:{icon:c("MWXIconEyeCross"),text:h._(/*BTDS*/"Cruel content")},FALSE_NEWS:{icon:c("MWXIconInfoCircle"),text:h._(/*BTDS*/"False information")},MISLEADING_NEWS:{icon:c("MWXIconInfoCircle"),text:h._(/*BTDS*/"Partly false")},MISSING_CONTEXT:{icon:c("MWXIconInfoCircle"),text:h._(/*BTDS*/"Missing context")},SENSITIVE:{icon:c("MWXIconEyeCross"),text:h._(/*BTDS*/"Sensitive content")},VIOLENCE:{icon:c("MWXIconEyeCross"),text:h._(/*BTDS*/"Sensitive content")}},n=h._(/*BTDS*/"View post for more info");function a(a,b,e,f){if(f==null||a==null||b==null||e==null)return!1;b=a==="ai_generated_content";e=f!=null&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(f);a=f!=null&&d("LSMessagingThreadTypeUtil").isPublicCMThread(f);if(b)return c("qex")._("1581")===!0;else return e||a}function o(a){switch(a){case"ai_generated_content":return"ai_generated_content";case"misinformation":return"misleading_news";case"misleading_news":return"missing_context";case"missing_context":return"altered_media";case"altered_media":return"altered_media";case"false_news":return"false_news";default:return null}}function b(a){var b=d("react-compiler-runtime").c(34),e=a.dimension,g=a.gatingTitle,h=a.gatingType,j=a.isXMA,r=a.mediaRenderQpl,s=a.messageId,t=a.previewUrl,u=a.xstyle,v=j===void 0?!1:j,w=t===void 0?"":t,x=(i||(i=c("useReStore")))();b[0]!==x.tables.messages||b[1]!==s?(a=function(){return d("ReQL").fromTableAscending(x.tables.messages.index("messageId")).getKeyRange(s)},b[0]=x.tables.messages,b[1]=s,b[2]=a):a=b[2];b[3]!==x||b[4]!==s?(j=[x,s],b[3]=x,b[4]=s,b[5]=j):j=b[5];t=d("ReQLSuspense").useFirstExn(a,j,f.id+":252");var y=c("gkx")("23219"),z=q;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(a){var b;a=z(a);return a==null||((b=m[a])==null?void 0:b.icon)==null?c("MWXIconEyeCross"):m[a].icon},b[6]=a):a=b[6];var A=a;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(j=function(a){var b;a=z(a);return a==null||((b=m[a])==null?void 0:b.text)==null?null:m[a].text},b[7]=j):j=b[7];var B=j;b[8]!==g||b[9]!==v?(a=function(a){switch(a){case"warning_screens":return k.jsx("div",{className:"xbudbmw x10l6tqk xwa60dl x11lhmoz xh8yej3",children:k.jsxs(c("MWXColumn.react"),{spacing:12,verticalAlign:"center",children:[k.jsx(c("MWXColumnItem.react"),{align:"center",children:k.jsx(c("MWXIconStrict.react"),{color:"white",icon:A(g),size:32})}),k.jsx(c("MWXColumnItem.react"),{children:k.jsx(c("MWXText.react"),{align:"center",color:"white",numberOfLines:1,type:y?"bodyLink3":"bodyLink4",children:B(g)})}),v?k.jsx(c("MWXColumnItem.react"),{children:k.jsx(c("MWXText.react"),{align:"center",color:"white",type:y?"meta3":"meta4",children:n})}):null]})});case"media_label":case"post_label":return k.jsxs("div",{className:"x6s0dn4 x1gevrdp x1fk37vd x1bmkqan xqb0rpr xsdp72b x12ol6y4 x180vkcf x1khw62d x709u02 x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x178xt8z x1lun4ml xso031l xpilrb4 xe80o0v x1ihrfj4 x78zum5 x10w6t97 x9q68il xyqdw3p x2vl965 xg8j3zb x25sj25 x10l6tqk xpse7mg x1tk7jg1 xuxw1ft x1vvkbs",children:[k.jsx(c("MWXIconStrict.react"),{color:"white",icon:A(g),size:24}),k.jsx(c("MWXText.react"),{align:"center",color:"white",type:y?"bodyLink3":"bodyLink4",children:B(g)})]});default:return null}},b[8]=g,b[9]=v,b[10]=a):a=b[10];j=a;var C=p;b[11]!==e||b[12]!==r||b[13]!==w||b[14]!==u?(a=function(a){switch(a){case"media_label":case"post_label":return k.jsx("div",{style:e,children:k.jsx(c("MWXImage.react"),{alt:"",onError:function(){return r==null?void 0:r.endFail("load-image-error")},onLoad:function(){return r==null?void 0:r.endSuccess()},src:w,xstyle:l.post})});case"warning_screens":default:return k.jsxs("div",{style:e,children:[k.jsx(c("FDSBlurredBackgroundImage.react"),{alt:"",onError:function(){return r==null?void 0:r.endFail("load-image-error")},onLoad:function(){return r==null?void 0:r.endSuccess()},src:w,xstyle:[l.post,u,l.overlay]}),k.jsx("div",{className:"x18l40ae x1ey2m1c xtea3wc xtijo5x x1o0tod x47corl x10l6tqk x13vifvy"})]})}},b[11]=e,b[12]=r,b[13]=w,b[14]=u,b[15]=a):a=b[15];a=a;var D;b[16]===Symbol["for"]("react.memo_cache_sentinel")?(D={eventName:"inform_treatment_chat_impression"},b[16]=D):D=b[16];D=c("MessengerWebUXLogger").useImpressionLoggerRef(D);var E;b[17]!==t?(E={message:t},b[17]=t,b[18]=E):E=b[18];var F=c("useMWInformTreatmentFalcoEventLogger")(E);b[19]!==g||b[20]!==h||b[21]!==F?(t={onImpressionStart:function(){var a=o(g),b=C(h.toLocaleLowerCase());a!=null&&b!=null&&F("impression",{name:a,type:b})}},b[19]=g,b[20]=h,b[21]=F,b[22]=t):t=b[22];E=c("useSinglePartialViewImpression")(t);t=c("useMergeRefs")(D,E);b[23]===Symbol["for"]("react.memo_cache_sentinel")?(D={className:"x78zum5 x5yr21d x1n2onr6 xh8yej3"},b[23]=D):D=b[23];b[24]!==h||b[25]!==a?(E=a(h.toLocaleLowerCase()),b[24]=h,b[25]=a,b[26]=E):E=b[26];b[27]!==h||b[28]!==j?(a=j(h.toLocaleLowerCase()),b[27]=h,b[28]=j,b[29]=a):a=b[29];b[30]!==t||b[31]!==E||b[32]!==a?(j=k.jsxs("div",babelHelpers["extends"]({},D,{ref:t,children:[E,a]})),b[30]=t,b[31]=E,b[32]=a,b[33]=j):j=b[33];return j}function p(a){switch(a){case"warning_screens":case"media_label":case"post_label":return a;default:return null}}function q(a){var b=Object.keys(m).find(function(b){return b===a.toUpperCase()});return b}g.checkIsInformedTreatmentVisible=a;g.getEventTitle=o;g.MWInformedTreatment=b}),226);
__d("MWXIconHd",["MWXSvgIcon","SVGIcon","cr:22362","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22362")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXMessageBubbleCornerStyles.react",[],(function(a,b,c,d,e,f,g){"use strict";var h={flatBottom:{borderEndEndRadius:"x16uus16",borderEndStartRadius:"xbiv7yw",$$css:!0},flatTop:{borderStartEndRadius:"x1ga7v0g",borderStartStartRadius:"x15mokao",$$css:!0},rounded:{borderStartStartRadius:"xaymx6s",borderStartEndRadius:"x1lu5o8o",borderEndEndRadius:"x1ou5ly4",borderEndStartRadius:"xofb2d2",$$css:!0}},i={connectBottom:{borderEndStartRadius:"x1pczhz8",$$css:!0},connectTop:{borderStartStartRadius:"xjwep3j",$$css:!0}},j={connectBottom:{borderEndEndRadius:"x1wcsgtt",$$css:!0},connectTop:{borderStartEndRadius:"x1t39747",$$css:!0}};function a(a){var b,c,d,e;b=(b=a==null?void 0:a.align)!=null?b:"left";c=(c=a==null?void 0:a.connectBottom)!=null?c:!1;d=(d=a==null?void 0:a.connectTop)!=null?d:!1;e=(e=a==null?void 0:a.flatten)!=null?e:"none";a=(a=a==null?void 0:a.corners)!=null?a:"round";b=b==="right"?j:i;return[a==="round"&&h.rounded,d&&b.connectTop,c&&b.connectBottom,(e==="all"||e==="bottom")&&h.flatBottom,(e==="all"||e==="top")&&h.flatTop]}g.getMWXBubbleCornerStyles=a}),98);
__d("MWXAspectRatioContainer.react",["react","react-compiler-runtime","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={position:"x1n2onr6",width:"xh8yej3",$$css:!0},k={child:{height:"x5yr21d",insetInlineStart:"x1o0tod",left:null,right:null,position:"x10l6tqk",top:"x13vifvy",width:"xh8yej3",$$css:!0},childInner:{maxHeight:"xmz0i5r",maxWidth:"x193iq5w",$$css:!0},flex:{display:"x78zum5",maxWidth:"x193iq5w",$$css:!0},inner:function(a){return[j,{paddingBottom:a!=null?"xjqpyvm":a,$$css:!0},{"--x-paddingBottom":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(a)}]},outer:function(a,b,c){return[{maxHeight:c!=null?"x1jols5v":c,maxWidth:b!=null?"xf68679":b,width:a!=null?"x5lhr3w":a,$$css:!0},{"--x-maxHeight":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(c),"--x-maxWidth":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(b),"--x-width":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(a)}]}};function a(a){var b=d("react-compiler-runtime").c(22),c=a.children,e=a.height,f=a.maxHeight,g=a.maxWidth;a=a.width;e=a/e;g=g!=null&&f!=null?"min("+g+"px, "+f*e+"px)":f!=null?f*e+"px":g;var h;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(h=[k.flex],b[0]=h):h=b[0];var j;b[1]!==f||b[2]!==g||b[3]!==a?(j=k.outer(a,g!=null?g:"initial",f!=null?f:"initial"),b[1]=f,b[2]=g,b[3]=a,b[4]=j):j=b[4];b[5]!==j?(f=[j],b[5]=j,b[6]=f):f=b[6];b[7]!==e?(g=k.inner(100/e+"%"),b[7]=e,b[8]=g):g=b[8];b[9]!==g?(a=[g],b[9]=g,b[10]=a):a=b[10];b[11]===Symbol["for"]("react.memo_cache_sentinel")?(j=[k.child],b[11]=j):j=b[11];b[12]!==c?(e=c==null?void 0:c(k.childInner),b[12]=c,b[13]=e):e=b[13];b[14]!==e?(g=i.jsx(d("react-strict-dom").html.div,{style:j,children:e}),b[14]=e,b[15]=g):g=b[15];b[16]!==a||b[17]!==g?(c=i.jsx(d("react-strict-dom").html.div,{style:a,children:g}),b[16]=a,b[17]=g,b[18]=c):c=b[18];b[19]!==f||b[20]!==c?(j=i.jsx(d("react-strict-dom").html.div,{style:h,children:i.jsx(d("react-strict-dom").html.div,{style:f,children:c})}),b[19]=f,b[20]=c,b[21]=j):j=b[21];return j}g["default"]=a}),98);
__d("MWXMessageImage.react",["BaseImage.react","FDSBlurredBackgroundImage.react","MWXAspectRatioContainer.react","react","react-compiler-runtime","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=["children","height","maxHeight","maxWidth","renderImagePlaceholder","shouldBlur","width","xstyle"],i,j,k=j||d("react"),l={container:function(a){return[{maxWidth:a!=null?"xf68679":a,$$css:!0},{"--x-maxWidth":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(a)}]},image:{display:"x1lliihq",maxWidth:"x193iq5w",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(24),e,f,g,j,m,n,o,p,q;b[0]!==a?(e=a.children,f=a.height,j=a.maxHeight,m=a.maxWidth,n=a.renderImagePlaceholder,o=a.shouldBlur,p=a.width,q=a.xstyle,g=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=j,b[5]=m,b[6]=n,b[7]=o,b[8]=p,b[9]=q):(e=b[1],f=b[2],g=b[3],j=b[4],m=b[5],n=b[6],o=b[7],p=b[8],q=b[9]);if(b[10]!==f||b[11]!==g||b[12]!==j||b[13]!==m||b[14]!==n||b[15]!==o||b[16]!==p){a=p==null||f==null?k.jsx("div",babelHelpers["extends"]({},(i||(i=c("stylex"))).props(l.container(m)),{children:(a=n==null?void 0:n())!=null?a:k.jsx(c("BaseImage.react"),babelHelpers["extends"]({},g,{objectFit:"contain",style:{maxHeight:j+"px"},xstyle:l.image}))})):k.jsx(c("MWXAspectRatioContainer.react"),{height:f,maxHeight:j,maxWidth:m,width:p,children:function(a){var b;return(b=n==null?void 0:n())!=null?b:o!==!0?k.jsx(c("BaseImage.react"),babelHelpers["extends"]({height:f,width:p,xstyle:a},g)):k.jsx(c("FDSBlurredBackgroundImage.react"),babelHelpers["extends"]({xstyle:a},g))}});b[10]=f;b[11]=g;b[12]=j;b[13]=m;b[14]=n;b[15]=o;b[16]=p;b[17]=a}else a=b[17];j=a;b[18]!==q?(m=(i||(i=c("stylex"))).props(q),b[18]=q,b[19]=m):m=b[19];b[20]!==e||b[21]!==j||b[22]!==m?(a=k.jsxs("div",babelHelpers["extends"]({},m,{children:[j,e]})),b[20]=e,b[21]=j,b[22]=m,b[23]=a):a=b[23];return a}g["default"]=a}),98);
__d("MWPMessageListImage.react",["LSMessagingThreadTypeUtil","MAWConvertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType","MWInformedTreatment.react","MWLSThread","MWXIconHd","MWXIconStrict.react","MWXImage.react","MWXMessageBubbleCornerStyles.react","MWXMessageImage.react","MWXPressable.react","MWXThreadThemeColor","ReQL","ReQLSuspense","gkx","react","react-compiler-runtime","stylex","useMWInformTreatmentFalcoEventLogger","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=["attachment","connectBottom","connectTop","outgoing","overlayAlign","overlayHeight","overlayWidth","xstyle"],i,j,k,l=k||(k=d("react"));b=k;b.useCallback;var m=b.useState,n={left:"",right:"",position:"x10l6tqk",top:"xuivejd",$$css:!0},o={height:"x16ye13r",insetInlineStart:"xbudbmw",left:"",right:"",position:"x10l6tqk",top:"xwa60dl",transform:"x11lhmoz",width:"x5lhr3w",$$css:!0},p={appAttr:{alignItems:"x6s0dn4",borderBottomWidth:"xso031l",borderTopColor:"x1pdss0j",borderInlineEndColor:"x1593r2a",borderBottomColor:"x81c4ja",borderInlineStartColor:"xewde0t",borderInlineEndWidth:"x1lun4ml",borderInlineStartWidth:"xpilrb4",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x972fbf",boxSizing:"x9f619",display:"x78zum5",lineHeight:"x1rfph6h",paddingTop:"x1iorvi4",paddingInlineEnd:"x1icxu4v",paddingBottom:"xjkvuk6",paddingInlineStart:"x25sj25",$$css:!0},appIcon:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",height:"xlup9mm",marginInlineEnd:"xbelrpt",objectFit:"x19kjcj4",width:"x1kky2od",$$css:!0},hdOverlay:function(a){return[n,{insetInlineEnd:(a==="end"?"10px":void 0)!=null?"xqxgn94":a==="end"?"10px":void 0,insetInlineStart:(a==="start"?"10px":void 0)!=null?"x1lxsm33":a==="start"?"10px":void 0,$$css:!0},{"--x-insetInlineEnd":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(a==="end"?"10px":void 0),"--x-insetInlineStart":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(a==="start"?"10px":void 0)}]},hdOverlayContainer:function(a,b){return[o,{"--x-height":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(a!=null?a+"px":"100%"),"--x-width":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(b!=null?b+"px":"100%")}]},pressable:{alignItems:"x6s0dn4",display:"x78zum5",flexShrink:"xs83m0k",justifyContent:"xl56j7k",maxHeight:"xmz0i5r",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",$$css:!0}};function q(a){var b=d("react-compiler-runtime").c(18),e=a.attachment,f=a.connectBottom,g=a.connectTop,h=a.outgoing;a=a.xstyle;h=h===!0?"right":"left";var j,k,m,n;if(b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==h||b[4]!==a){m=Symbol["for"]("react.early_return_sentinel");bb0:{var o=d("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:h,connectBottom:f,connectTop:g,flatten:"top"}),q=e;j=q.attributionAppName;if(j==null){m=null;break bb0}n=q.attributionAppIcon;k=(i||(i=c("stylex"))).props(p.appAttr,a,o)}b[0]=e;b[1]=f;b[2]=g;b[3]=h;b[4]=a;b[5]=j;b[6]=k;b[7]=m;b[8]=n}else j=b[5],k=b[6],m=b[7],n=b[8];if(m!==Symbol["for"]("react.early_return_sentinel"))return m;b[9]!==n?(q=n!=null?l.jsx(c("MWXImage.react"),{alt:"",src:n,xstyle:p.appIcon}):null,b[9]=n,b[10]=q):q=b[10];b[11]===Symbol["for"]("react.memo_cache_sentinel")?(o={className:"xzsf02u x1nxh6w3 x13faqbe"},b[11]=o):o=b[11];b[12]!==j?(e=l.jsx("span",babelHelpers["extends"]({},o,{children:j})),b[12]=j,b[13]=e):e=b[13];b[14]!==k||b[15]!==q||b[16]!==e?(f=l.jsxs("div",babelHelpers["extends"]({},k,{children:[q,e]})),b[14]=k,b[15]=q,b[16]=e,b[17]=f):f=b[17];return f}function r(a){var b=d("react-compiler-runtime").c(11),e=a.attachment,f=a.overlayAlign,g=a.overlayHeight;a=a.overlayWidth;f=f===void 0?"end":f;e=e;e=e.isHd===!0;if(!e)return null;b[0]!==g||b[1]!==a?(e=(i||(i=c("stylex"))).props(p.hdOverlayContainer(g,a)),b[0]=g,b[1]=a,b[2]=e):e=b[2];b[3]!==f?(g=(i||(i=c("stylex"))).props(p.hdOverlay(f)),b[3]=f,b[4]=g):g=b[4];b[5]===Symbol["for"]("react.memo_cache_sentinel")?(a=l.jsx(c("MWXIconStrict.react"),{color:d("MWXThreadThemeColor").mwxThreadThemeColor("rgba(255,255,255,0.7)"),icon:c("MWXIconHd"),size:18}),b[5]=a):a=b[5];b[6]!==g?(f=l.jsx("div",babelHelpers["extends"]({},g,{"data-testid":void 0,children:a})),b[6]=g,b[7]=f):f=b[7];b[8]!==e||b[9]!==f?(a=l.jsx("div",babelHelpers["extends"]({},e,{children:f})),b[8]=e,b[9]=f,b[10]=a):a=b[10];return a}function s(a){var b=d("react-compiler-runtime").c(26),e=a.attachment,g=a.height,h=a.setIsBlurredImageVisible;a=a.width;var i=(j||(j=c("useReStore")))(),k;b[0]!==e.messageId||b[1]!==i.tables.messages?(k=function(){return d("ReQL").fromTableAscending(i.tables.messages.index("messageId")).getKeyRange(e.messageId)},b[0]=e.messageId,b[1]=i.tables.messages,b[2]=k):k=b[2];var m;b[3]!==e.messageId||b[4]!==i?(m=[e.messageId,i],b[3]=e.messageId,b[4]=i,b[5]=m):m=b[5];k=d("ReQLSuspense").useFirstExn(k,m,f.id+":170");b[6]!==k?(m={message:k},b[6]=k,b[7]=m):m=b[7];var n=c("useMWInformTreatmentFalcoEventLogger")(m);m=(k=d("MWLSThread").useThread(e.threadKey,t))!=null?k:{isSecureThread:!1,threadType:null};k=m.isSecureThread;m=m.threadType;var o=e.gatingTitle,q=e.gatingType,r=e.previewUrl,s;b[8]!==q||b[9]!==k?(s=k?d("MAWConvertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType").convertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType(parseInt(q,10)):q,b[8]=q,b[9]=k,b[10]=s):s=b[10];q=s;k=d("MWInformedTreatment.react").checkIsInformedTreatmentVisible(o,q,r,m);if(q==null||o==null||!k)return null;s=q==="warning_screens";m=g+"px";k=a!=null?a+"px":"100%";b[11]!==m||b[12]!==k?(g={height:m,width:k},b[11]=m,b[12]=k,b[13]=g):g=b[13];b[14]!==e.messageId||b[15]!==o||b[16]!==q||b[17]!==r||b[18]!==g?(a=l.jsx(d("MWInformedTreatment.react").MWInformedTreatment,{dimension:g,gatingTitle:o,gatingType:q,mediaRenderQpl:null,messageId:e.messageId,previewUrl:r}),b[14]=e.messageId,b[15]=o,b[16]=q,b[17]=r,b[18]=g,b[19]=a):a=b[19];m=a;b[20]!==o||b[21]!==s||b[22]!==m||b[23]!==n||b[24]!==h?(k=s?l.jsx(c("MWXPressable.react"),{onPress:function(){var a=d("MWInformedTreatment.react").getEventTitle(o);h(!0);a!=null&&n("tap_to_reveal",{name:a,type:"warning_screens"})},overlayRadius:"normal",xstyle:p.pressable,children:m}):m,b[20]=o,b[21]=s,b[22]=m,b[23]=n,b[24]=h,b[25]=k):k=b[25];return k}function t(a){return{isSecureThread:d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType),threadType:a.threadType}}function a(a){var b=d("react-compiler-runtime").c(38),e,f,g,i,j,k,n,o,t;b[0]!==a?(e=a.attachment,f=a.connectBottom,g=a.connectTop,j=a.outgoing,k=a.overlayAlign,n=a.overlayHeight,o=a.overlayWidth,t=a.xstyle,i=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=i,b[5]=j,b[6]=k,b[7]=n,b[8]=o,b[9]=t):(e=b[1],f=b[2],g=b[3],i=b[4],j=b[5],k=b[6],n=b[7],o=b[8],t=b[9]);a=e.attributionAppName!=null;var v=j===!0?"right":"left";a=a===!0?"bottom":"none";var w;b[10]!==f||b[11]!==g||b[12]!==v||b[13]!==a?(w=d("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:v,connectBottom:f,connectTop:g,flatten:a}),b[10]=f,b[11]=g,b[12]=v,b[13]=a,b[14]=w):w=b[14];v=w;a=m(!1);w=a[0];var x=a[1];a=(a=d("MWLSThread").useThread(e.threadKey,u))!=null?a:!1;var y=c("gkx")("179"),z=e.gatingTitle==="misinformation"||e.gatingTitle==="misleading_news"||e.gatingTitle==="missing_context"||e.gatingTitle==="missing_context"||e.gatingTitle==="altered_media"||e.gatingTitle==="false_news";z=z&&y;y=!w&&e.gatingTitle!=null&&e.gatingType!=null&&a&&!z;b[15]!==e||b[16]!==i?(w=function(){var a=i,b=a.height,c=a.maxHeight,d=a.maxWidth;a=a.width;return l.jsx(s,{attachment:e,height:b!=null?Math.min(b,c):c,setIsBlurredImageVisible:x,width:a!=null&&d!=null?Math.min(a,d):a!=null?a:d})},b[15]=e,b[16]=i,b[17]=w):w=b[17];a=w;z=y?a:void 0;b[18]!==v||b[19]!==t?(w=[p.root,t,v],b[18]=v,b[19]=t,b[20]=w):w=b[20];b[21]!==e||b[22]!==f||b[23]!==g||b[24]!==j||b[25]!==t?(y=l.jsx(q,{attachment:e,connectBottom:f,connectTop:g,outgoing:j,xstyle:t}),b[21]=e,b[22]=f,b[23]=g,b[24]=j,b[25]=t,b[26]=y):y=b[26];b[27]!==e||b[28]!==k||b[29]!==n||b[30]!==o?(a=l.jsx(r,{attachment:e,overlayAlign:k,overlayHeight:n,overlayWidth:o}),b[27]=e,b[28]=k,b[29]=n,b[30]=o,b[31]=a):a=b[31];b[32]!==i||b[33]!==z||b[34]!==w||b[35]!==y||b[36]!==a?(v=l.jsxs(c("MWXMessageImage.react"),babelHelpers["extends"]({renderImagePlaceholder:z,xstyle:w},i,{children:[y,a]})),b[32]=i,b[33]=z,b[34]=w,b[35]=y,b[36]=a,b[37]=v):v=b[37];return v}function u(a){return d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType)||d("LSMessagingThreadTypeUtil").isPublicCMThread(a.threadType)}g.MWPMessageListImageAppAttribution=q;g.MWPMessageListImageHdWatermark=r;g.InformedTreatment=s;g.MWPMessageListImage=a}),98);
__d("MWV2AttachmentLoadingPlaceholder.react",["InteractionTracingMetrics","MWXAspectRatioContainer.react","MWXGlimmer.react","MWXMessageBubbleCornerStyles.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useEffect,k={glimmer:{display:"x1lliihq",height:"x5yr21d",width:"xh8yej3",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(21),e=a.connectBottom,f=a.connectTop,g=a.descriptionForLogging,h=a.hasAppAttribution,l=a.hasCornerStyles,m=a.height,n=a.maxHeight,o=a.maxWidth,p=a.mediaRenderQpl,q=a.outgoing,r=a.width,s=a.xstyle,t=l===void 0?!0:l;a=n===void 0?200:n;l=o===void 0?480:o;b[0]!==g||b[1]!==m||b[2]!==p||b[3]!==r?(n=function(){var a={string:{call_site:g}};r!=null&&m!=null?p==null||p.addPoint("render-loading-placeholder",a):p==null||p.addPoint("render-loading-placeholder-null-dimensions",a);c("InteractionTracingMetrics").currentInteractionLogger().forEach(function(a){c("InteractionTracingMetrics").addMarkerPoint(a.traceId,"render-attachment-loading-placeholder","AppTiming",void 0,{call_site:g})});return function(){p==null||p.addPoint("unmount-loading-placeholder",a),c("InteractionTracingMetrics").currentInteractionLogger().forEach(function(a){c("InteractionTracingMetrics").addMarkerPoint(a.traceId,"unmount-attachment-loading-placeholder","AppTiming",void 0,{call_site:g})})}},o=[m,p,r,g],b[0]=g,b[1]=m,b[2]=p,b[3]=r,b[4]=n,b[5]=o):(n=b[4],o=b[5]);j(n,o);if(r==null)return null;if(m==null)return null;n=q===!0?"right":"left";o=h===!0?"bottom":"none";b[6]!==e||b[7]!==f||b[8]!==n||b[9]!==o?(q=d("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:n,connectBottom:e,connectTop:f,flatten:o}),b[6]=e,b[7]=f,b[8]=n,b[9]=o,b[10]=q):q=b[10];var u=q;b[11]!==u||b[12]!==t||b[13]!==s?(h=function(a){return i.jsx(c("MWXGlimmer.react"),{index:1,xstyle:[a,k.glimmer,t===!0&&u,s]})},b[11]=u,b[12]=t,b[13]=s,b[14]=h):h=b[14];b[15]!==m||b[16]!==a||b[17]!==l||b[18]!==h||b[19]!==r?(e=i.jsx("div",{"data-testid":void 0,children:i.jsx(c("MWXAspectRatioContainer.react"),{height:m,maxHeight:a,maxWidth:l,width:r,children:h})}),b[15]=m,b[16]=a,b[17]=l,b[18]=h,b[19]=r,b[20]=e):e=b[20];return e}g["default"]=a}),98);
__d("MWXIconPause",["MWXSvgIcon","SVGIcon","cr:22421","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22421")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconPlay",["MWXSvgIcon","SVGIcon","cr:22437","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22437")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconReplay",["MWXSvgIcon","SVGIcon","cr:22459","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22459")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWVideoPlayerPlayButton.react",["fbt","MWXIconPause","MWXIconPlay","MWXIconReplay","MWXIconStrict.react","MWXPressable.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={buttonLarge:{height:"xdd8jsf",marginTop:"xuqeo79",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1vvjuq3",width:"xvni27",$$css:!0},buttonSmall:{height:"xxk0z11",marginTop:"x7wgvq7",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x18xomjl",width:"xvy4d1p",$$css:!0},circleButton:{backgroundColor:"x18l40ae",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",opacity:"x1hc1fzr",$$css:!0},clickable:{cursor:"x1ypdohk",$$css:!0},container:{alignItems:"x6s0dn4",display:"x78zum5",insetInlineStart:"xbudbmw",left:null,right:null,justifyContent:"xl56j7k",position:"x10l6tqk",top:"xwa60dl",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(9),e=a.alt,f=a.isVisible,g=a.onClick,i=a.size;a=a.type;i=i===void 0?"LARGE":i;a=a===void 0?"PLAY":a;var l;bb0:switch(a){case"PAUSE":l=c("MWXIconPause");break bb0;case"REPLAY":l=c("MWXIconReplay");break bb0;case"PLAY":default:l=c("MWXIconPlay")}a=i==="LARGE"?24:12;var m;b[0]!==l||b[1]!==a?(m=j.jsx(c("MWXIconStrict.react"),{color:"white",icon:l,size:a}),b[0]=l,b[1]=a,b[2]=m):m=b[2];a=m;b[3]!==e||b[4]!==a||b[5]!==f||b[6]!==g||b[7]!==i?(m=f?g!=null?j.jsx(c("MWXPressable.react"),{display:"inline",label:e!=null?e:h._(/*BTDS*/"Play Video"),onPress:g,overlayDisabled:!0,xstyle:[k.circleButton,k.container,k.clickable,i==="LARGE"&&k.buttonLarge,i==="SMALL"&&k.buttonSmall],children:a}):j.jsx("div",babelHelpers["extends"]({},{0:{className:"x18l40ae x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1hc1fzr x6s0dn4 x78zum5 xbudbmw xl56j7k x10l6tqk xwa60dl"},2:{className:"x18l40ae x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1hc1fzr x6s0dn4 x78zum5 xbudbmw xl56j7k x10l6tqk xwa60dl xdd8jsf xuqeo79 x14z9mp xat24cr x1vvjuq3 xvni27"},1:{className:"x18l40ae x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1hc1fzr x6s0dn4 x78zum5 xbudbmw xl56j7k x10l6tqk xwa60dl xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p"},3:{className:"x18l40ae x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1hc1fzr x6s0dn4 x78zum5 xbudbmw xl56j7k x10l6tqk xwa60dl xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p"}}[!!(i==="LARGE")<<1|!!(i==="SMALL")<<0],{children:a})):null,b[3]=e,b[4]=a,b[5]=f,b[6]=g,b[7]=i,b[8]=m):m=b[8];e=m;return e}g["default"]=a}),226);
__d("useMWMediaViewerOpenQPLLogger",["qpl","react","react-compiler-runtime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;var i=c("requireDeferred")("QPLUserFlow").__setRef("useMWMediaViewerOpenQPLLogger"),j=c("qpl")._(25298743,"1403"),k=6e3*10;function a(){var a=d("react-compiler-runtime").c(1),b=n,c=m,e=l;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e={endCancel:e,endSuccess:c,startFlow:b},a[0]=e):e=a[0];return e}function l(a){i.onReadyImmediately(function(b){b.endCancel(j,{cancelReason:a})})}function m(a){i.onReadyImmediately(function(b){b.endSuccess(j,{annotations:a})})}function n(a){var b=a.attachmentType,c=a.entryPoint;a=a.isSecure;var d={attachmentType:b,entryPoint:c,isSecure:(a!=null?a:!1).toString()};i.onReadyImmediately(function(a){a.start(j,{annotations:{string:babelHelpers["extends"]({},d)},cancelOnUnload:!0,timeoutInMs:k})})}g.useMWMediaViewerOpenQPLLogger=a}),98);
__d("useMWV2FocusRowAfterClosingPushView",["MWV2MessageRowIsRowFocusedContext.react","react","react-compiler-runtime","useCometRouterState","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useLayoutEffect;function a(){var a=d("react-compiler-runtime").c(12),b=i(d("MWV2MessageRowIsRowFocusedContext.react").context),e=b.isDialogOpened,f=b.setIsDialogOpened,g=b.setFocused;b=c("useCometRouterState")();var h;if(a[0]!==b){if(b==null)h=0;else{var m=b.pushViewStack;h=m==null?0:m.length}a[0]=b;a[1]=h}else h=a[1];var n=c("usePrevious")(h);a[2]!==e||a[3]!==h||a[4]!==n||a[5]!==g||a[6]!==f?(m=function(){if(n!=null){e===!0&&n>0&&h===0&&(f(l),g(k));return}},a[2]=e,a[3]=h,a[4]=n,a[5]=g,a[6]=f,a[7]=m):m=a[7];a[8]!==e||a[9]!==h||a[10]!==n?(b=[e,n,h],a[8]=e,a[9]=h,a[10]=n,a[11]=b):b=a[11];j(m,b);return f}function k(){return!0}function l(){return!1}g["default"]=a}),98);
__d("MWV2MediaViewerContainer.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(12),c=a.actions,e=a.children,f=a.fallbackHeader;a=a.hideActions;a=a===void 0?!1:a;var g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g={className:"x1qjc9v5 xal61yo x9f619 x78zum5 xdt5ytf x1iyjqo2 x5yr21d x6ikm8r x10wlt62 x1n2onr6 x87ps6o xh8yej3 x1uvtmcs"},b[0]=g):g=b[0];var h;b[1]!==a?(h={0:{className:"xdg88n9 x10l6tqk x1tk7jg1"},1:{className:"xdg88n9 x10l6tqk x1tk7jg1 x1s85apg"}}[!!a<<0],b[1]=a,b[2]=h):h=b[2];b[3]!==c||b[4]!==h?(a=i.jsx("div",babelHelpers["extends"]({},h,{children:c})),b[3]=c,b[4]=h,b[5]=a):a=b[5];b[6]!==f?(c=f!=null&&i.jsx("div",{className:"xdg88n9 x10l6tqk xfr5jun",children:f}),b[6]=f,b[7]=c):c=b[7];b[8]!==e||b[9]!==a||b[10]!==c?(h=i.jsxs("div",babelHelpers["extends"]({},g,{"data-testid":void 0,children:[e,a,c]})),b[8]=e,b[9]=a,b[10]=c,b[11]=h):h=b[11];return h}g["default"]=a}),98);
__d("MWV2MediaViewerActionButton.react",["MWXCircleButton.react","MWXTooltip.react","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["ref"],i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(9),e,f;b[0]!==a?(f=a.ref,e=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f):(e=b[1],f=b[2]);a=c("gkx")("17009");b[3]!==e||b[4]!==f?(a=j.jsx(c("MWXCircleButton.react"),babelHelpers["extends"]({size:a?40:36,type:a?"overlay":"dark-overlay"},e,{ref:f})),b[3]=e,b[4]=f,b[5]=a):a=b[5];b[6]!==e.label||b[7]!==a?(f=j.jsx(c("MWXTooltip.react"),{tooltip:e.label,children:a}),b[6]=e.label,b[7]=a,b[8]=f):f=b[8];return f}g["default"]=a}),98);
__d("MWV2MediaViewerCloseControl.react",["fbt","MWV2MediaViewerActionButton.react","MWXIconCross","MWXRowItem.react","emptyFunction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=h._(/*BTDS*/"Close");function a(a){var b=d("react-compiler-runtime").c(7);a=a.onClose;var e;b[0]!==a?(e={0:{},1:{className:"xlshs6z"}}[!!(a==null)<<0],b[0]=a,b[1]=e):e=b[1];a=a!=null?a:c("emptyFunction");var f;b[2]!==a?(f=j.jsx(c("MWV2MediaViewerActionButton.react"),{icon:c("MWXIconCross"),label:k,onPress:a}),b[2]=a,b[3]=f):f=b[3];b[4]!==e||b[5]!==f?(a=j.jsx(c("MWXRowItem.react"),{children:j.jsx("div",babelHelpers["extends"]({},e,{children:f}))}),b[4]=e,b[5]=f,b[6]=a):a=b[6];return a}g["default"]=a}),226);
__d("MWV2MediaViewerControlsFallback.react",["MWV2MediaViewerCloseControl.react","MWXRow.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(2);a=a.onClose;var e;b[0]!==a?(e=i.jsx(c("MWXRow.react"),{paddingTop:0,spacing:8,children:i.jsx(c("MWV2MediaViewerCloseControl.react"),{onClose:a})}),b[0]=a,b[1]=e):e=b[1];return e}g["default"]=a}),98);
__d("MWV2MediaViewerFallback.react",["MWV2MediaViewerContainer.react","MWV2MediaViewerControlsFallback.react","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(7);a=a.onClose;var e=c("gkx")("17009"),f;b[0]!==a?(f=!e&&i.jsx(c("MWV2MediaViewerControlsFallback.react"),{onClose:a}),b[0]=a,b[1]=f):f=b[1];b[2]!==a?(e=e&&i.jsx(c("MWV2MediaViewerControlsFallback.react"),{onClose:a}),b[2]=a,b[3]=e):e=b[3];b[4]!==f||b[5]!==e?(a=i.jsx(c("MWV2MediaViewerContainer.react"),{actions:f,fallbackHeader:e,children:null}),b[4]=f,b[5]=e,b[6]=a):a=b[6];return a}g["default"]=a}),98);
__d("useMWV2MediaViewerShowDialog",["JSResourceForInteraction","MWV2MediaViewerFallback.react","react","react-compiler-runtime","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useEffect;function k(a){return i.jsx(c("MWV2MediaViewerFallback.react"),{onClose:a})}k.displayName=k.name+" [from "+f.id+"]";function a(a){var b=d("react-compiler-runtime").c(8),e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=c("JSResourceForInteraction")("MWV2MediaViewer.react").__setRef("useMWV2MediaViewerShowDialog"),b[0]=e):e=b[0];e=c("useMWXLazyDialog")(e,k);var f=e[0],g=e[1],h;b[1]!==a||b[2]!==g?(e=function(){a||g()},h=[g,a],b[1]=a,b[2]=g,b[3]=e,b[4]=h):(e=b[3],h=b[4]);j(e,h);b[5]!==g||b[6]!==f?(e=[f,g],b[5]=g,b[6]=f,b[7]=e):e=b[7];return e}g["default"]=a}),98);
__d("XCometMessengerMediaControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/messenger_media/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("XCometMessengerPhotoControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/messenger_photo/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("useMWV2MediaViewerURL",["I64","Int64Hooks","LSIntEnum","MessagingAttachmentType","XCometMessengerMediaControllerRouteBuilder","XCometMessengerPhotoControllerRouteBuilder","justknobx","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=d("react-compiler-runtime").c(3),e,f;b[0]!==a?(e=function(){if(a==null)return null;var b=(h||(h=d("I64"))).equal(a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE));return b&&c("justknobx")._("1284")===!1?c("XCometMessengerPhotoControllerRouteBuilder").buildURL({fbid:a.attachmentFbid,message_id:a.messageId,photo_ids:void 0}):c("XCometMessengerMediaControllerRouteBuilder").buildURL({attachment_id:a.attachmentFbid,message_id:a.messageId,thread_id:h.to_string(a.threadKey)})},f=[a],b[0]=a,b[1]=e,b[2]=f):(e=b[1],f=b[2]);return d("Int64Hooks").useMemoInt64(e,f)}g["default"]=a}),98);
__d("MWAnimatedImageThumbnailWithPlayButton.react",["fbt","$InternalEnum","CometHeroHoldTrigger.react","CometPlaceholder.react","I64","LSAuthorityLevel","LSIntEnum","MAWAttachmentBlob.react","MAWImageUtils","MWAnimatedImageControlsUtil","MWLSThreadDisplayContext","MWMessageListImageSizingUtils","MWPMessageListImage.react","MWV2AttachmentLoadingPlaceholder.react","MWV2LogMessageClick","MWVideoPlayerPlayButton.react","MWXAspectRatioContainer.react","MWXImage.react","MWXMessageBubbleCornerStyles.react","MWXPressable.react","promiseDone","react","react-compiler-runtime","useAsyncReStore","useMWMediaViewerOpenQPLLogger","useMWV2FocusRowAfterClosingPushView","useMWV2MediaViewerShowDialog","useMWV2MediaViewerURL"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||(i=d("react"));e=i;var m=e.useCallback,n=e.useEffect,o=e.useState,p={imageWithAppAttribution:{borderEndEndRadius:"x16uus16",borderEndStartRadius:"xbiv7yw",bottom:"x1ey2m1c",position:"x1n2onr6",$$css:!0},wrapper:{display:"x1lliihq",$$css:!0},wrapperForAppAttribution:{marginBottom:"x1ibc7va",$$css:!0},wrapperReplyImage:{cursor:"x1ypdohk",$$css:!0}},q=b("$InternalEnum").Mirrored(["Composer","GIFPicker","MediaViewer","Thread"]);function a(a){var b=d("react-compiler-runtime").c(2),e;b[0]!==a?(e=l.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWAnimatedImageThumbnailWithPlayButton",children:l.jsx(r,babelHelpers.extends({},a))}),b[0]=a,b[1]=e):e=b[1];return e}function r(a){var b,e,f=a.altText,g=a.connectBottom,i=a.connectTop,r=a.dbAttachment,s=a.entryPoint,t=a.gifPreviewUrl,u=a.isReplyImage,v=u===void 0?!1:u,w=a.isSecure,x=a.mediaRenderQpl,y=a.message,z=a.onPlay;u=a.onPress;var A=a.outgoing,B=a.previewHeight,C=a.previewWidth,D=a.sourceURL;a=a.testid;var E=c("useAsyncReStore")(),F=d("MWAnimatedImageControlsUtil").useGetMessengerAutoplaySetting();a=o(null);var G=a[0],H=a[1];a=c("useMWV2MediaViewerURL")(r);var I=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();I=d("MWMessageListImageSizingUtils").getMaxPreviewHeightAndWidth(w!=null?w:!0,I!=null?I:void 0,!1);var J=I.maxHeight,K=I.maxWidth,L=m(function(){x==null||x.endSuccess({bool:{thumbnail_generated_for_gif:!0}})},[x]),M=m(function(){x==null||x.endFail("gif-thumbnail-render-failed")},[x]),N=r!=null&&r.previewUrl==null&&w!==!1?d("MAWAttachmentBlob.react").getAttachmentBlob_CausesSuspense(r,"gifToBlob",x):void 0,O=c("useMWV2FocusRowAfterClosingPushView")();I=c("useMWV2MediaViewerShowDialog")(!1);var P=I[0];I=d("useMWMediaViewerOpenQPLLogger").useMWMediaViewerOpenQPLLogger();var Q=I.startFlow,R=s===q.Thread,S=s===q.Composer;I=s===q.MediaViewer;s=s===q.GIFPicker;n(function(){var a=null;async function b(){x==null||x.addPoint("gif-thumbnail-generation-started");var b=t;if(b==null)if(r==null&&D!=null)b=D;else try{(r==null?void 0:r.previewUrl)!=null?b=r==null?void 0:r.previewUrl:N!=null&&(b=N)}catch(a){return null}if(b==null)return null;b=await d("MAWImageUtils").generateGIFThumbnail(b,B,C);x==null||x.addPoint("gif-thumbnail-generation-completed");if(b!=null){x==null||x.addPoint("gif-thumbnail-generation-completed-successfully");b=new Blob([b.jpegThumbnail]);a=URL.createObjectURL(b);H(a)}}b().catch(function(){x==null||x.endFail("gif-thumbnail-generation-failed"),H(null)});return function(){a!=null&&URL.revokeObjectURL(a)}},[r,t,x,B,C,D,N]);a=w===!1&&R&&y!=null&&(j||(j=d("I64"))).gt(y.authorityLevel,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").CLIENT_PARTIAL))?{passthroughProps:{origSrc:r==null?void 0:r.previewUrl},url:a}:void 0;var T=function(){y!=null&&c("promiseDone")(E,function(a){d("MWV2LogMessageClick").log(a,y,28)});Q({attachmentType:"IMAGE",entryPoint:"thread_view",isSecure:w});O(function(){return!0});if(r!=null&&w===!0)return P({attachment:r},function(){})},U=(r==null?void 0:r.attributionAppName)!=null,V=d("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:A===!0?"right":"left",connectBottom:g,connectTop:i});if(B==null||C==null)return null;b=(b=r==null?void 0:r.accessibilitySummaryText)!=null?b:f;var W=h._(/*BTDS*/"Tap to play GIF {gif_alt_text}",[h._param("gif_alt_text",(e=r==null?void 0:r.accessibilitySummaryText)!=null?e:f)]);if(R){b=h._(/*BTDS*/"Open GIF {gif_alt_text}",[h._param("gif_alt_text",(e=r==null?void 0:r.accessibilitySummaryText)!=null?e:f)])}else if(s){b=h._(/*BTDS*/"Send GIF {gif_alt_text}",[h._param("gif_alt_text",(e=r==null?void 0:r.accessibilitySummaryText)!=null?e:f)])}else if(I){b=(e=(s=r==null?void 0:r.accessibilitySummaryText)!=null?s:f)!=null?e:h._(/*BTDS*/"GIF")}s=v||I;return l.jsx(c("MWXPressable.react"),{"aria-label":b,cursorDisabled:s,disabled:s,display:"block",linkProps:a,onPress:s?void 0:R?T:u,testid:void 0,xstyle:[p.wrapper,U&&p.wrapperForAppAttribution,v&&p.wrapperReplyImage],children:l.jsx(c("MWXAspectRatioContainer.react"),{height:B,maxHeight:R?J:B,maxWidth:R?K:C,width:C,children:function(a){var b;return l.jsxs(l.Fragment,{children:[G==null?l.jsxs(l.Fragment,{children:[l.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{connectBottom:g,connectTop:i,descriptionForLogging:"MAWSecureGIFAttachment.NoGIFThumbnail",hasAppAttribution:U,hasCornerStyles:R,height:B,maxHeight:R?J:B,maxWidth:R?K:C,mediaRenderQpl:x,outgoing:A,width:C,xstyle:[a,R&&V,U&&p.imageWithAppAttribution]}),l.jsx(c("CometHeroHoldTrigger.react"),{description:"MAWSecureGIFAttachment.NoGIFThumbnail",hold:!0})]}):l.jsx(c("MWXImage.react"),{alt:(b=r==null?void 0:r.accessibilitySummaryText)!=null?b:f,height:B,onError:M,onLoad:L,src:G,width:C,xstyle:[a,R&&V,U&&p.imageWithAppAttribution]}),r!=null&&U&&R&&l.jsx("div",{className:"x1f1lzrh x10l6tqk xh8yej3",children:l.jsx(d("MWPMessageListImage.react").MWPMessageListImageAppAttribution,{attachment:r,connectBottom:g,connectTop:i,outgoing:A})}),F===d("MWAnimatedImageControlsUtil").MWAutoplayAnimationsSetting.OFF&&l.jsx(c("MWVideoPlayerPlayButton.react"),{alt:W,isVisible:!0,onClick:v?void 0:z,size:v||S?"SMALL":"LARGE"})]})}})})}r.displayName=r.name+" [from "+f.id+"]";g.AnimatedImageEntryPoint=q;g.MWAnimatedImageThumbnailWithPlayButton=a}),226);
__d("MWCMIsSubthreadContext.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext;c.useMemo;var k=e({isSubthread:!1});function a(){return j(k)}function b(a){var b=d("react-compiler-runtime").c(5),c=a.children;a=a.isSubthread;var e;b[0]!==a?(e={isSubthread:a},b[0]=a,b[1]=e):e=b[1];a=e;e=a;b[2]!==c||b[3]!==e?(a=i.jsx(k.Provider,{value:e,children:c}),b[2]=c,b[3]=e,b[4]=a):a=b[4];return a}g.useIsSubthreadContext=a;g.MWCMIsSubthreadContextProvider=b}),98);
__d("MWV2OneToOneThreadBlockedContext.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext,k=e(!1);function a(){return j(k)}function b(a){var b=d("react-compiler-runtime").c(3),c=a.blocked;a=a.children;var e=k.Provider;b[0]!==c||b[1]!==a?(e=i.jsx(e,{value:c,children:a}),b[0]=c,b[1]=a,b[2]=e):e=b[2];return e}g.useIsBlocked=a;g.MWV2OneToOneThreadBlockedContext=b}),98);
__d("MWVideoPlayerControllerContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({ref:{current:null}});g["default"]=b}),98);
__d("MWXDeferredPopoverTrigger.react",["cr:4346","cr:7154","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var c=d("react-compiler-runtime").c(4);if(b("cr:4346")!=null){var e;c[0]!==a?(e=i.jsx(b("cr:4346"),babelHelpers["extends"]({},a)),c[0]=a,c[1]=e):e=c[1];return e}if(b("cr:7154")!=null){c[2]!==a?(e=i.jsx(b("cr:7154"),babelHelpers["extends"]({},a)),c[2]=a,c[3]=e):e=c[3];return e}return null}g["default"]=a}),98);
__d("MWXIconChevronLeft",["MWXSvgIcon","SVGIcon","cr:22266","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22266")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconChevronRight",["MWXSvgIcon","SVGIcon","cr:22268","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22268")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconDownload",["MWXSvgIcon","SVGIcon","cr:22301","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22301")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXMAUtils",["I64","LSXmaContentType"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Set(["xma_rtc_video","xma_rtc_missed_video","xma_rtc_missed_group_video","xma_rtc_ended_video","xma_rtc_new_video_default","xma_rtc_new_video_from_fb_share","xma_rtc_new_video_from_fb_video_share","xma_rtc_new_video_from_cowatch_share","xma_rtc_cowatch_start_video","xma_rtc_audio","xma_rtc_missed_audio","xma_rtc_missed_group_audio","xma_rtc_ended_audio","xma_rtc_new_audio_default","xma_rtc_new_audio_from_fb_share","xma_rtc_new_audio_from_fb_video_share","xma_rtc_new_audio_from_cowatch_share"]);function a(a){return i.has(a)}function b(a){return(h||(h=d("I64"))).to_int32(a!=null?a:(h||(h=d("I64"))).zero)===c("LSXmaContentType").MSG_LOCATION_SHARING||(h||(h=d("I64"))).to_int32(a!=null?a:(h||(h=d("I64"))).zero)===c("LSXmaContentType").MSG_LOCATION_SHARING_V2}function e(a){return(h||(h=d("I64"))).to_int32(a!=null?a:(h||(h=d("I64"))).zero)===c("LSXmaContentType").MSG_CONTACT||(h||(h=d("I64"))).to_int32(a!=null?a:(h||(h=d("I64"))).zero)===c("LSXmaContentType").MSG_AI_CONTACT}function f(a){return(h||(h=d("I64"))).to_int32(a!=null?a:(h||(h=d("I64"))).zero)===c("LSXmaContentType").FB_POST_MENTION}function j(a){return(h||(h=d("I64"))).to_int32(a!=null?a:(h||(h=d("I64"))).zero)===c("LSXmaContentType").MSG_MEMORIES_SHARE}function k(a){a=(h||(h=d("I64"))).to_int32(a!=null?a:(h||(h=d("I64"))).zero);return a===c("LSXmaContentType").RTC_AUDIO_CALL||a===c("LSXmaContentType").RTC_VIDEO_CALL||a===c("LSXmaContentType").RTC_MISSED_AUDIO_CALL||a===c("LSXmaContentType").RTC_MISSED_VIDEO_CALL||a===c("LSXmaContentType").RTC_GROUP_AUDIO_CALL||a===c("LSXmaContentType").RTC_GROUP_VIDEO_CALL||a===c("LSXmaContentType").RTC_MISSED_GROUP_AUDIO_CALL||a===c("LSXmaContentType").RTC_MISSED_GROUP_VIDEO_CALL||a===c("LSXmaContentType").RTC_ONGOING_AUDIO_CALL||a===c("LSXmaContentType").RTC_ONGOING_VIDEO_CALL}function l(a){return(h||(h=d("I64"))).to_int32(a!=null?a:(h||(h=d("I64"))).zero)===c("LSXmaContentType").FB_STORY_MENTION}g.isRTCXMA=a;g.isLocationShareXMA=b;g.isContactShareXMA=e;g.isXMAContentTypeFbPostMention=f;g.isXMAContentTypeMemoriesShare=j;g.isXMAContentTypeRTC=k;g.isStoryMentionXMA=l}),98);
__d("MWXVideoStatusListener.react",["getErrorNameFromMediaErrorCode","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;function a(a){var b=d("react-compiler-runtime").c(8),e=a.onError,f=a.onLoad,g=a.videoRef;b[0]!==e||b[1]!==f||b[2]!==(g==null?void 0:g.current)?(a=function(){var a=g==null?void 0:g.current,b=function(){f==null||f()},d=function(a){a=a.currentTarget;a=a.error;a=c("getErrorNameFromMediaErrorCode")(a==null?void 0:a.code);e==null||e(a)};if((a==null?void 0:a.readyState)!=null&&a.readyState>=2){b();return}a==null||a.addEventListener("canplay",b);a==null||a.addEventListener("error",d);return function(){a==null||a.removeEventListener("canplay",b),a==null||a.removeEventListener("error",d)}},b[0]=e,b[1]=f,b[2]=g==null?void 0:g.current,b[3]=a):a=b[3];var h;b[4]!==e||b[5]!==f||b[6]!==g?(h=[e,f,g],b[4]=e,b[5]=f,b[6]=g,b[7]=h):h=b[7];i(a,h);return null}g["default"]=a}),98);
__d("MessengerChevronRightFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M14.116 27.134a1.25 1.25 0 0 1 0-1.768l7.19-7.19a.25.25 0 0 0 0-.353l-7.19-7.19a1.25 1.25 0 0 1 1.768-1.767l8.25 8.25a1.25 1.25 0 0 1 0 1.768l-8.25 8.25a1.25 1.25 0 0 1-1.768 0z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerEyeCrossFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{d:"M20.292 10.405c.399-.4.23-1.075-.322-1.19A9.722 9.722 0 0 0 18 9c-4.057 0-9.486 3.07-12.577 7.62a2.451 2.451 0 0 0 0 2.76c.605.889 1.298 1.722 2.054 2.487a.962.962 0 0 0 1.366-.013L11.697 19c.214-.215.315-.515.306-.818a6 6 0 0 1 6.18-6.18c.302.01.602-.09.817-.305l1.292-1.292z"}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"m19.803 14.429 1.464-1.463 2.404-2.404 3.196-3.196a1.25 1.25 0 1 1 1.768 1.768l-2.13 2.13a.777.777 0 0 0 .087 1.16c1.51 1.168 2.893 2.59 3.985 4.197a2.451 2.451 0 0 1 0 2.758C27.487 23.93 22.057 27 18 27c-1.541 0-3.28-.443-5.014-1.242a1.039 1.039 0 0 0-1.171.196l-2.681 2.681a1.25 1.25 0 1 1-1.768-1.768l2.762-2.761 2.838-2.84 1.463-1.462 5.374-5.375zm3.54.84c-.144-.284-.52-.323-.745-.098l-.77.77a.544.544 0 0 0-.108.586 4 4 0 0 1-5.193 5.193.543.543 0 0 0-.586.108l-.77.77c-.225.225-.185.6.097.746a6 6 0 0 0 8.075-8.075z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerHdFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{d:"M21 19.75c0 .138.112.25.25.25h1.25a2 2 0 1 0 0-4h-1.25a.25.25 0 0 0-.25.25v3.5z"}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M10 9a4 4 0 0 0-4 4v10a4 4 0 0 0 4 4h16a4 4 0 0 0 4-4V13a4 4 0 0 0-4-4H10zm0 5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v2.25c0 .138.112.25.25.25h2.5a.25.25 0 0 0 .25-.25V14.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-2.25a.25.25 0 0 0-.25-.25h-2.5a.25.25 0 0 0-.25.25v2.25a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-7zm9.5-.5a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .5.5h3a4 4 0 0 0 0-8h-3z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerInfoCircleFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 29c6.075 0 11-4.925 11-11S24.075 7 18 7 7 11.925 7 18s4.925 11 11 11zm1.75-16.25a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0zM16.5 17.5a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1V24a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1v-6.5z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerPauseFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{d:"M11 8.5A1.5 1.5 0 0 0 9.5 10v16a1.5 1.5 0 0 0 1.5 1.5h4a1.5 1.5 0 0 0 1.5-1.5V10A1.5 1.5 0 0 0 15 8.5h-4zM21 8.5a1.5 1.5 0 0 0-1.5 1.5v16a1.5 1.5 0 0 0 1.5 1.5h4a1.5 1.5 0 0 0 1.5-1.5V10A1.5 1.5 0 0 0 25 8.5h-4z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerPlayFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{d:"M10 25.498V10.502a1.5 1.5 0 0 1 2.17-1.342l14.997 7.498c1.105.553 1.105 2.13 0 2.684L12.17 26.84A1.5 1.5 0 0 1 10 25.498z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerReplayFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{d:"M11.192 12.314c.532.339.618 1.08.255 1.596a8 8 0 1 0 6.803-3.406.245.245 0 0 0-.25.246v1.415a.833.833 0 0 1-1.28.703l-4.582-2.915a.833.833 0 0 1 0-1.406l4.581-2.915A.833.833 0 0 1 18 6.335V7.75c0 .138.113.25.25.253 5.684.133 10.25 4.782 10.25 10.497 0 2.33-.758 4.481-2.042 6.223a10.534 10.534 0 0 1-4.453 3.486l-.005.002a10.468 10.468 0 0 1-5.074.735C11.632 28.408 7.5 23.936 7.5 18.5c0-2.33.758-4.481 2.042-6.223.293-.398.846-.474 1.264-.209l.386.246z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("getVideoPlayerUserFacingErrorMessageFromError",["fbt","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";function i(a){return c("gkx")("24345")&&a.message.toLowerCase().indexOf("audio_renderer_error")>=0}function j(a){return a.message.indexOf("DEVICE_CERTIFICATE_REVOKED")>=0}function k(a){return a.name.indexOf("VideoImplementationsDashManifestUnsupportedCodecs")>=0||a.name.indexOf("VideoImplementationsMediaSourceUnsupported")>=0}function l(a){return a.name==="OZ_NETWORK"&&a.message.includes("CDN URL expired")}function a(a){var b=null;i(a)?b=h._(/*BTDS*/"Audio renderer error: please restart your computer."):j(a)?b=h._(/*BTDS*/"This video is DRM-protected, but your device certificate appears to be revoked. Please make sure that your browser is up to date, and try again."):k(a)?b=h._(/*BTDS*/"This video cannot be played in the browser, operating system or hardware that you're using."):l(a)&&(b=h._(/*BTDS*/"This video content isn't available at the moment."));return b}g["default"]=a}),226);
__d("shouldHideMessagingActions",["I64","LSIntEnum","isDeliveryStatusErrorState"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){return(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(256))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(65536))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(131072))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(262144))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(524288))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4294967296))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(1048576))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(2097152))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4194304))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(8388608))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(16777216))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(67108864))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(1073741824))}function a(a,b){return c("isDeliveryStatusErrorState")(b)||j(a)?!0:!1}g["default"]=a}),98);
__d("useMWHasForwardAction",["I64","LSAuthorityLevel","LSBitFlag","LSContactBitOffset","LSIntEnum","LSMessagingThreadTypeUtil","MAWMsg","MWCMIsSubthreadContext.react","MWGenAIUtils","MWMessageDeliveryStatus","MWPThreadCapabilitiesContext","MWV2OneToOneThreadBlockedContext.react","MWXMAUtils","MessagingAttachmentType","gkx","isFeatureLimitEnabled","isMWBumpMessage","mwCMIsAnyCMThread","react-compiler-runtime","shouldHideMessagingActions","useIsReadOnlyFeatureLimitedWithThreadType","useMAWMediaDownloadStatus","useMWFamilyCenterContext","useMWGetOtherUserContact","useMWIsContactRestricted"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,e,f,g,j){var k=d("react-compiler-runtime").c(76);f=f===void 0?!1:f;j=j===void 0?!1:j;var l=d("MWCMIsSubthreadContext.react").useIsSubthreadContext();l=l.isSubthread;var m;k[0]!==l||k[1]!==a?(m=l&&!d("LSMessagingThreadTypeUtil").isCMSubthread(a),k[0]=l,k[1]=a,k[2]=m):m=k[2];l=m;k[3]!==a?(m=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a),k[3]=a,k[4]=m):m=k[4];m=m;var n;k[5]!==b.threadKey?(n=d("MWGenAIUtils").isMetaAIThread(b.threadKey),k[5]=b.threadKey,k[6]=n):n=k[6];n=n;var o;k[7]!==a?(o=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a),k[7]=a,k[8]=o):o=k[8];o=o;var p=b.ephemeralDurationInSec,q;k[9]!==p?(q=p!=null?(h||(h=d("I64"))).gt(p,(h||(h=d("I64"))).zero):!1,k[9]=p,k[10]=q):q=k[10];p=q;q=c("useIsReadOnlyFeatureLimitedWithThreadType")(a)&&(!o||c("isFeatureLimitEnabled")());var r;k[11]!==b.displayedContentTypes?(r=(h||(h=d("I64"))).equal(b.displayedContentTypes,(i||(i=d("LSIntEnum"))).ofNumber(4096)),k[11]=b.displayedContentTypes,k[12]=r):r=k[12];r=r;var s;k[13]!==b.displayedContentTypes?(s=(h||(h=d("I64"))).equal(b.displayedContentTypes,(i||(i=d("LSIntEnum"))).ofNumber(134217728)),k[13]=b.displayedContentTypes,k[14]=s):s=k[14];s=s;var t=d("MWV2OneToOneThreadBlockedContext.react").useIsBlocked(),u;k[15]!==b.displayedContentTypes||k[16]!==b.sendStatusV2?(u=c("shouldHideMessagingActions")(b.displayedContentTypes,d("MWMessageDeliveryStatus").getFromSendStatus(b.sendStatusV2)),k[15]=b.displayedContentTypes,k[16]=b.sendStatusV2,k[17]=u):u=k[17];u=u;var v=c("useMWGetOtherUserContact")(b.threadKey,a,d("LSContactBitOffset").contactCapabilityFields);v=c("useMWIsContactRestricted")(v);var w;k[18]!==b.sendStatusV2||k[19]!==a?(w=c("mwCMIsAnyCMThread")(a)&&(h||(h=d("I64"))).equal(b.sendStatusV2,(i||(i=d("LSIntEnum"))).ofNumber(4)),k[18]=b.sendStatusV2,k[19]=a,k[20]=w):w=k[20];a=w;k[21]!==m||k[22]!==b.displayedContentTypes?(w=d("LSBitFlag").has((i||(i=d("LSIntEnum"))).ofNumber(2),b.displayedContentTypes)||m&&d("LSBitFlag").has((i||(i=d("LSIntEnum"))).ofNumber(1024),b.displayedContentTypes)&&c("gkx")("15802"),k[21]=m,k[22]=b.displayedContentTypes,k[23]=w):w=k[23];w=w;var x;k[24]!==b.replyType?(x=c("isMWBumpMessage")(b.replyType),k[24]=b.replyType,k[25]=x):x=k[25];x=x;var y=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();y=y.messageForwardEnabled;var z=d("useMWFamilyCenterContext").useMWFamilyCenterEnforcementsContext();z=z.familyCenterData;var A;k[26]!==e?(A=(e==null?void 0:e.attachmentType)!=null&&((h||(h=d("I64"))).equal(e.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_IMAGE))||(h||(h=d("I64"))).equal(e.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_VIDEO))),k[26]=e,k[27]=A):A=k[27];A=A;var B;k[28]!==e||k[29]!==o?(B=o&&(e==null?void 0:e.xmaContentType)!=null&&d("MWXMAUtils").isLocationShareXMA(e.xmaContentType),k[28]=e,k[29]=o,k[30]=B):B=k[30];B=B;var C;k[31]!==e||k[32]!==o?(C=o&&(e==null?void 0:e.xmaContentType)!=null&&d("MWXMAUtils").isContactShareXMA(e.xmaContentType),k[31]=e,k[32]=o,k[33]=C):C=k[33];C=C;var D;k[34]!==e||k[35]!==o?(D=o&&(e==null?void 0:e.xmaContentType)!=null&&d("MWXMAUtils").isXMAContentTypeFbPostMention(e.xmaContentType),k[34]=e,k[35]=o,k[36]=D):D=k[36];D=D;var E;k[37]!==e||k[38]!==o?(E=o&&(e==null?void 0:e.xmaContentType)!=null&&d("MWXMAUtils").isXMAContentTypeMemoriesShare(e.xmaContentType),k[37]=e,k[38]=o,k[39]=E):E=k[39];E=E;var F;k[40]!==e?(F=(e==null?void 0:e.xmaContentType)!=null&&d("MWXMAUtils").isStoryMentionXMA(e.xmaContentType),k[40]=e,k[41]=F):F=k[41];F=F;var G=c("useMAWMediaDownloadStatus")(e);G=G.uiState;var H;k[42]!==e||k[43]!==o||k[44]!==G?(H=e!=null&&o&&!(h||(h=d("I64"))).equal(e.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA))&&G!=="downloaded",k[42]=e,k[43]=o,k[44]=G,k[45]=H):H=k[45];G=H;k[46]!==e||k[47]!==z||k[48]!==a||k[49]!==t||k[50]!==m||k[51]!==x||k[52]!==p||k[53]!==n||k[54]!==G||k[55]!==q||k[56]!==s||k[57]!==v||k[58]!==C||k[59]!==D||k[60]!==B||k[61]!==E||k[62]!==o||k[63]!==r||k[64]!==l||k[65]!==A||k[66]!==F||k[67]!==g||k[68]!==b||k[69]!==y||k[70]!==u||k[71]!==f?(H=(o?!p&&!r&&!s:!0)&&!l&&!t&&!v&&!q&&!b.isUnsent&&!a&&!d("MAWMsg").isPlaceholder(b)&&!x&&y&&(!m||m&&c("gkx")("15802"))&&!f&&(h||(h=d("I64"))).gt(b.authorityLevel,(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC))&&(e!=null&&(h||(h=d("I64"))).equal(e.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA))&&(e.attachmentCta1Id!=null||e.attachmentCta2Id!=null||e.attachmentCta3Id!=null||e.defaultCtaId!=null)?e.isSharable:!0)&&(g==null||!g.hasMissingMessages&&!g.hasMissingMedia)&&!z.hasActiveMsgrFamilyCenterEnforcement&&!A&&!u&&!G&&!B&&!C&&!D&&!E&&!F&&!n,k[46]=e,k[47]=z,k[48]=a,k[49]=t,k[50]=m,k[51]=x,k[52]=p,k[53]=n,k[54]=G,k[55]=q,k[56]=s,k[57]=v,k[58]=C,k[59]=D,k[60]=B,k[61]=E,k[62]=o,k[63]=r,k[64]=l,k[65]=A,k[66]=F,k[67]=g,k[68]=b,k[69]=y,k[70]=u,k[71]=f,k[72]=H):H=k[72];e=H;z=w&&e&&!j;k[73]!==e||k[74]!==z?(a={hasForwardAction:e,shouldShowForwardAction:z},k[73]=e,k[74]=z,k[75]=a):a=k[75];return a}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("BaseCheckbox.react",["BaseFocusRing.react","BaseInput.react","BaseView.react","Locale","react","react-compiler-runtime","stylex","useMergeRefs"],(function(a,b,c,d,e,f,g){"use strict";var h=["children","ref","variant","xstyle","indeterminate","suppressFocusRing","testid"],i,j,k=j||(j=d("react"));b=j;var l=b.useLayoutEffect,m=b.useRef,n=b.useState,o=d("Locale").isRTL(),p={checkbox:{cursor:"x1ypdohk",height:"x5yr21d",insetInlineStart:"x1o0tod",left:null,right:null,marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",opacity:"x1w3u9th",outline:"x1a2a7pz",paddingTop:"xexx8yu",paddingInlineEnd:"xyri2b",paddingBottom:"x18d9i69",paddingInlineStart:"x1c1uobl",position:"x10l6tqk",top:"x13vifvy",width:"xh8yej3",$$css:!0},icon:{paddingTop:"x1nn3v0j",paddingInlineEnd:"x14vy60q",paddingBottom:"x1120s5i",paddingInlineStart:"xyiysdx",$$css:!0},inlineFlex:{display:"x3nfvp2",$$css:!0},labelRTL:{transformOrigin:"x1h1bmdg",$$css:!0},wrapper:{position:"x1n2onr6",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(35),e,f,g,j;if(b[0]!==a){var q=a.children,r=a.ref,s=a.variant,t=a.xstyle,u=a.indeterminate;a.suppressFocusRing;var v=a.testid,w=babelHelpers.objectWithoutPropertiesLoose(a,h);e=q;q=r;g=s;j=t;r=u;s=v;f=w;b[0]=a;b[1]=e;b[2]=f;b[3]=q;b[4]=r;b[5]=s;b[6]=g;b[7]=j}else e=b[1],f=b[2],q=b[3],r=b[4],s=b[5],g=b[6],j=b[7];var x=r===void 0?!1:r,y=m(null);t=n(!1);var z=t[0];u=t[1];var A=(v=f.checked)!=null?v:!1,B=(w=f.disabled)!=null?w:!1;b[8]!==x?(a=function(){y.current!=null&&(y.current.indeterminate=x)},r=[x],b[8]=x,b[9]=a,b[10]=r):(a=b[9],r=b[10]);l(a,r);var C=c("useMergeRefs")(q,y);b[11]!==A||b[12]!==B||b[13]!==z||b[14]!==g?(t=function(a){var b;if(g==null)return null;var d=A?g.iconChecked:g.iconUnchecked;return k.jsx("div",babelHelpers["extends"]({},(i||(i=c("stylex"))).props([p.inlineFlex,(b=g)==null?void 0:b.xstyleConfig.iconWrapper,A&&((b=g)==null?void 0:b.xstyleConfig.iconCheckedWrapper),z&&((b=g)==null?void 0:b.xstyleConfig.iconFocusedWrapper),B&&((b=g)==null?void 0:b.xstyleConfig.iconDisabledWrapper),B&&A&&((b=g)==null?void 0:b.xstyleConfig.iconDisabledCheckedWrapper)]),{suppressHydrationWarning:!0,children:k.jsx("div",babelHelpers["extends"]({},i.props([a,p.icon,g.xstyleConfig.icon]),{suppressHydrationWarning:!0,children:k.jsx(d,{height:"100%",width:"100%"})}))}))},b[11]=A,b[12]=B,b[13]=z,b[14]=g,b[15]=t):t=b[15];var D=t;b[16]!==A||b[17]!==e||b[18]!==B||b[19]!==D||b[20]!==x||b[21]!==C||b[22]!==f||b[23]!==s||b[24]!==g||b[25]!==j?(v=function(a){var b;return k.jsxs(c("BaseView.react"),{role:"none",testid:void 0,xstyle:[p.wrapper,g!=null?(b=g)==null?void 0:b.xstyleConfig.checkboxWrapper:a,j],children:[D(a),g!=null?k.jsx("div",babelHelpers["extends"]({},(i||(i=c("stylex"))).props([p.inlineFlex,(b=g)==null?void 0:b.xstyleConfig.labelWrapper]),{children:e})):e,k.jsx(c("BaseInput.react"),babelHelpers["extends"]({},f,{"aria-checked":x?"mixed":A!=null?A:!1,ref:C,type:"checkbox",xstyle:[p.checkbox,(a=g)==null?void 0:a.xstyleConfig.checkbox,B&&((b=g)==null?void 0:b.xstyleConfig.checkboxDisabled)]}))]})},b[16]=A,b[17]=e,b[18]=B,b[19]=D,b[20]=x,b[21]=C,b[22]=f,b[23]=s,b[24]=g,b[25]=j,b[26]=v):v=b[26];var E=v;w=g!=null?"inset":void 0;b[27]!==E||b[28]!==B||b[29]!==f.id||b[30]!==g?(a=function(a){var b;return k.jsx(k.Fragment,{children:g!=null?k.jsx("label",babelHelpers["extends"]({},(i||(i=c("stylex"))).props([o&&p.labelRTL,(b=g)==null?void 0:b.xstyleConfig.label,B===!0&&((b=g)==null?void 0:b.xstyleConfig.labelDisabled)]),{htmlFor:f.id,suppressHydrationWarning:!0,children:E(a)})):E(a)})},b[27]=E,b[28]=B,b[29]=f.id,b[30]=g,b[31]=a):a=b[31];b[32]!==w||b[33]!==a?(r=k.jsx(c("BaseFocusRing.react"),{focusRingPosition:w,onFocusVisibleChange:u,children:a}),b[32]=w,b[33]=a,b[34]=r):r=b[34];return r}g["default"]=a}),98);
__d("BaseStyledCheckbox.react",["BaseCheckbox.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;var j={checkbox:{display:"x78zum5",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(17),e=a["aria-label"],f=a["aria-labelledby"],g=a.checked,h=a.checkedIcon,k=a.children,l=a.disabled,m=a.id,n=a.name,o=a.onChange,p=a.ref,q=a.suppressFocusRing,r=a.tabIndex,s=a.testid,t=a.uncheckedIcon,u=a.value;a=l===void 0?!1:l;b[0]!==o||b[1]!==u?(l=function(a,b){o(u)},b[0]=o,b[1]=u,b[2]=l):l=b[2];l=l;h=g?h:t;b[3]!==e||b[4]!==f||b[5]!==g||b[6]!==k||b[7]!==a||b[8]!==m||b[9]!==n||b[10]!==l||b[11]!==p||b[12]!==q||b[13]!==h||b[14]!==r||b[15]!==s?(t=i.jsxs(c("BaseCheckbox.react"),{"aria-label":e,"aria-labelledby":f,checked:g,disabled:a,id:m,name:n,onValueChange:l,ref:p,suppressFocusRing:q,tabIndex:r,testid:void 0,xstyle:j.checkbox,children:[h,k]}),b[3]=e,b[4]=f,b[5]=g,b[6]=k,b[7]=a,b[8]=m,b[9]=n,b[10]=l,b[11]=p,b[12]=q,b[13]=h,b[14]=r,b[15]=s,b[16]=t):t=b[16];return t}g["default"]=a}),98);
__d("FDSCheckbox.react",["ix","BaseStyledCheckbox.react","CometPressableOverlay.react","FDSIcon.react","FDSText.react","fbicon","react","react-compiler-runtime","useCometPressableEventHandlers"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(43),e=a["aria-labelledby"],f=a.checked,g=a.disabled,i=a.iconSize,k=a.id,l=a.label,m=a.labelIsHidden,n=a.name,o=a.onChange,p=a.reduceEmphasis,q=a.ref,r=a.smallerLabel,s=a.tabIndex,t=a.testid;a=a.value;g=g===void 0?!1:g;i=i===void 0?24:i;m=m===void 0?!1:m;p=p===void 0?!1:p;r=r===void 0?!1:r;var u;b[0]!==g?(u={disabled:g},b[0]=g,b[1]=u):u=b[1];u=c("useCometPressableEventHandlers")(u);var v=u[0],w=u[2];u=u[3];var x=w.focusVisible,y=w.hovered;w=w.pressed;var z;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(z="x1i10hfl x6s0dn4 x78zum5 xwib8y2 x1y1aw1k x1n2onr6 xggy1nq",b[2]=z):z=b[2];var A=m?l:void 0,B=g?"disabled":"highlight",C;b[3]!==i?(C=i===16?d("fbicon")._(h("492790"),16):d("fbicon")._(h("531032"),24),b[3]=i,b[4]=C):C=b[4];var D;b[5]!==B||b[6]!==C?(D=j.jsx(c("FDSIcon.react"),{color:B,icon:C}),b[5]=B,b[6]=C,b[7]=D):D=b[7];B=g?"disabled":"secondary";b[8]!==i?(C=i===16?d("fbicon")._(h("659287"),16):d("fbicon")._(h("659289"),24),b[8]=i,b[9]=C):C=b[9];b[10]!==B||b[11]!==C?(i=j.jsx(c("FDSIcon.react"),{color:B,icon:C}),b[10]=B,b[11]=C,b[12]=i):i=b[12];b[13]!==x||b[14]!==y||b[15]!==w?(B=j.jsx(c("CometPressableOverlay.react"),{focusVisible:x,hovered:y,offset:8,pressed:w,radius:"50%"}),b[13]=x,b[14]=y,b[15]=w,b[16]=B):B=b[16];b[17]!==e||b[18]!==f||b[19]!==g||b[20]!==k||b[21]!==n||b[22]!==o||b[23]!==q||b[24]!==D||b[25]!==i||b[26]!==B||b[27]!==A||b[28]!==s||b[29]!==t||b[30]!==a?(C=j.jsx(c("BaseStyledCheckbox.react"),{"aria-label":A,"aria-labelledby":e,checked:f,checkedIcon:D,disabled:g,id:k,name:n,onChange:o,ref:q,tabIndex:s,testid:void 0,uncheckedIcon:i,value:a,children:B}),b[17]=e,b[18]=f,b[19]=g,b[20]=k,b[21]=n,b[22]=o,b[23]=q,b[24]=D,b[25]=i,b[26]=B,b[27]=A,b[28]=s,b[29]=t,b[30]=a,b[31]=C):C=b[31];b[32]!==g||b[33]!==l||b[34]!==m||b[35]!==p||b[36]!==r?(x=m?null:j.jsx("div",{className:"x1r8uery x1iyjqo2 x13fj5qh xeuugli",children:j.jsx(c("FDSText.react"),{color:g?"disabled":"primary",type:p?r===!0?"body4":"body3":"button2",children:l})}),b[32]=g,b[33]=l,b[34]=m,b[35]=p,b[36]=r,b[37]=x):x=b[37];b[38]!==u||b[39]!==v||b[40]!==C||b[41]!==x?(y=j.jsxs("label",babelHelpers["extends"]({className:z},u,{ref:v,children:[C,x]})),b[38]=u,b[39]=v,b[40]=C,b[41]=x,b[42]=y):y=b[42];return y}g["default"]=a}),98);
__d("FDSUndoFilled16PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("685851"),16);b=a;g["default"]=b}),98);
__d("GroupsCometChatsThreadNotificationSettingsDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{}}},root:c("JSResourceForInteraction")("GroupsCometChatsThreadNotificationSettingsDialog.react").__setRef("GroupsCometChatsThreadNotificationSettingsDialog.entrypoint")};b=a;g["default"]=b}),98);
__d("LSClearDiscoverableChatsParticipantsAndRanges",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.sequence([function(a){return b.forEach(b.db.table(248).fetch(),function(a){return a["delete"]()})},function(a){return b.forEach(b.db.table(249).fetch(),function(a){return a["delete"]()})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxClearDiscoverableChatsParticipantsAndRangesStoredProcedure";a.__tables__=["discoverable_chat_participants","discoverable_chat_participants_ranges_v2__generated"];e.exports=a}),null);
__d("LSClearDiscoverableChatsParticipantsAndRangesStoredProcedure",["LSClearDiscoverableChatsParticipantsAndRanges","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a){a=a.storedProcedure(c("LSClearDiscoverableChatsParticipantsAndRanges"));return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSContactMessengerRestrictAction",[],(function(a,b,c,d,e,f){a=Object.freeze({RESTRICT:0,UNRESTRICT:1});f["default"]=a}),66);
__d("LSUpsertDiscoverableChatsParticipantsRanges",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(249).put({threadId:a[0],minName:"",source:a[4],maxName:a[5],isLoadingBefore:!1,isLoadingAfter:a[2],hasMoreBefore:!1,hasMoreAfter:a[1],nextPageCursor:a[3]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpsertDiscoverableChatsParticipantsRangesStoredProcedure";a.__tables__=["discoverable_chat_participants_ranges_v2__generated"];e.exports=a}),null);
__d("LSFetchDiscoverableChatParticipants",["LSIssueNewTask","LSUpsertDiscoverableChatsParticipantsRanges"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[7]=b.syncGroup,c.i64.neq(d[7],void 0)?d[6]=d[7]:d[6]=c.i64.cast([0,1]),d[0]=d[6])})},function(d){return c.storedProcedure(b("LSUpsertDiscoverableChatsParticipantsRanges"),a[0],!1,!0,"",a[2],a[3])},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[2]=c.i64.cast([0,1]):(b=a.item,d[7]=b.syncGroup,c.i64.neq(d[7],void 0)?d[6]=d[7]:d[6]=c.i64.cast([0,1]),d[2]=d[6])})},function(e){return d[4]=new c.Map(),d[4].set("thread_key",a[0]),d[4].set("cursor",a[1]),d[4].set("source",a[2]),d[4].set("sync_group",d[2]),d[5]=c.toJSON(d[4]),c.storedProcedure(b("LSIssueNewTask"),"fetch_discoverable_chat_participant_list",c.i64.cast([0,110006]),d[5],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxFetchDiscoverableChatParticipantsStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSFetchDiscoverableChatParticipantsStoredProcedure",["LSFetchDiscoverableChatParticipants","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSFetchDiscoverableChatParticipants"),e.threadKey,e.cursor,e.source,e.maxName);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSSetNeedsAdminApprovalForNewParticipant",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({needsAdminApprovalForNewParticipant:a[1]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxSetNeedsAdminApprovalForNewParticipantStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSOptimisticSetNeedsAdminApprovalForNewParticipant",["LSIssueNewTask","LSSetNeedsAdminApprovalForNewParticipant"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(d){return c.storedProcedure(b("LSSetNeedsAdminApprovalForNewParticipant"),a[0],a[1])},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[5]=b.syncGroup,c.i64.neq(d[5],void 0)?d[4]=d[5]:d[4]=c.i64.cast([0,1]),d[0]=d[4])})},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("enabled",a[1]),d[2].set("sync_group",d[0]),d[3]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),"set_needs_admin_approval_for_new_participant",c.i64.cast([0,28]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticSetNeedsAdminApprovalForNewParticipantStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSOptimisticSetNeedsAdminApprovalForNewParticipantStoredProcedure",["LSOptimisticSetNeedsAdminApprovalForNewParticipant","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticSetNeedsAdminApprovalForNewParticipant"),e.threadKey,e.needsAdminApprovalForNewParticipant);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSSetReadReceiptSettingForThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(c){var d=c.update;c.item;return d({isReadReceiptsDisabled:b.i64.eq(a[1],b.i64.cast([0,1])),readReceiptsDisabledV2:a[1]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxSetReadReceiptSettingForThreadStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSOptimisticToggleReadReceipts",["LSIssueNewTask","LSSetReadReceiptSettingForThread"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(d){return c.storedProcedure(b("LSSetReadReceiptSettingForThread"),a[0],a[1]?c.i64.cast([0,1]):c.i64.cast([0,2]))},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[6]=b.syncGroup,c.i64.neq(d[6],void 0)?d[5]=d[6]:d[5]=c.i64.cast([0,1]),d[0]=d[5])})},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("is_read_receipts_disabled",a[1]),d[2].set("sync_group",d[0]),d[3]=d[2].get("thread_key"),d[4]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[3]),c.i64.cast([0,60003]),d[4],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticToggleReadReceiptsStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSOptimisticToggleReadReceiptsStoredProcedure",["LSOptimisticToggleReadReceipts","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticToggleReadReceipts"),e.threadKey,e.isReadReceiptsDisabled);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSUpdateThreadJoinRequestApprovalSetting",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({joinRequestApprovalSetting:a[1]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpdateThreadJoinRequestApprovalSettingStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSOptimisticUpdateThreadJoinRequestApprovalSetting",["LSIssueNewTask","LSUpdateThreadJoinRequestApprovalSetting"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(d){return c.storedProcedure(b("LSUpdateThreadJoinRequestApprovalSetting"),a[0],a[1])},function(e){return d[0]=new c.Map(),d[0].set("thread_id",a[0]),d[0].set("join_request_approval_setting",a[1]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"update_thread_join_request_approval_setting",c.i64.cast([0,661]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticUpdateThreadJoinRequestApprovalSettingStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSOptimisticUpdateThreadJoinRequestApprovalSettingStoredProcedure",["LSOptimisticUpdateThreadJoinRequestApprovalSetting","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticUpdateThreadJoinRequestApprovalSetting"),e.threadKey,e.joinRequestApprovalSetting);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSUpdateThreadAvatarSticker",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({avatarStickerInstructionKeyId:a[1],avatarStickerId:a[2],avatarStickerThumbnailImageUrl:a[3],avatarStickerThumbnailImageMimeType:a[4],avatarStickerOriginalImageUrl:a[5],avatarStickerOriginalImageMimeType:a[6]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpdateThreadAvatarStickerStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSOptimisticUpdateThreadTheme",["LSArrayGetObjectAt","LSDeserializeFromJsonIntoDictionaryV2.nop","LSIssueNewError","LSIssueNewTask","LSLocalize","LSUpdateThreadAvatarSticker"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[28]=b.syncGroup,c.i64.neq(d[28],void 0)?d[27]=d[28]:d[27]=c.i64.cast([0,1]),d[0]=d[27])})},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("theme_fbid",a[1]),d[2].set("sync_group",d[0]),d[3]=c.i64.random(),d[4]=c.createArray(),d[27]=(d[4].push("ai_generated_theme"),d[4]),d[27]=(d[4].push(c.i64.to_string(d[3])),d[4]),d[5]=c.toJSON(d[4]),d[6]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),d[5],c.i64.cast([0,1013]),d[6],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[7]=c.i64.cast([0,1]):(b=a.item,d[28]=b.syncGroup,c.i64.neq(d[28],void 0)?d[27]=d[28]:d[27]=c.i64.cast([0,1]),d[7]=d[27])})},function(e){return d[9]=new c.Map(),d[9].set("thread_key",a[0]),d[9].set("theme_fbid",a[1]),d[9].set("sync_group",d[7]),d[10]=c.i64.random(),d[11]=c.createArray(),d[27]=(d[11].push("msgr_custom_thread_theme"),d[11]),d[27]=(d[11].push(c.i64.to_string(d[10])),d[11]),d[12]=c.toJSON(d[11]),d[13]=c.toJSON(d[9]),c.storedProcedure(b("LSIssueNewTask"),d[12],c.i64.cast([0,1037]),d[13],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[14]=c.i64.cast([0,1]):(b=a.item,d[28]=b.syncGroup,c.i64.neq(d[28],void 0)?d[27]=d[28]:d[27]=c.i64.cast([0,1]),d[14]=d[27])})},function(e){return d[16]=new c.Map(),d[16].set("thread_key",a[0]),d[16].set("theme_fbid",a[1]),d[16].set("sync_group",d[14]),d[17]=c.i64.random(),d[18]=c.createArray(),d[27]=(d[18].push("thread_theme_writer"),d[18]),d[27]=(d[18].push(c.i64.to_string(d[17])),d[18]),d[19]=c.toJSON(d[18]),d[20]=c.toJSON(d[16]),c.storedProcedure(b("LSIssueNewTask"),d[19],c.i64.cast([0,1028]),d[20],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(b){return c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({themeFbid:a[1]})})},function(d){return c.storedProcedure(b("LSUpdateThreadAvatarSticker"),a[0],void 0,void 0,void 0,void 0,void 0,void 0)},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[21]=c.i64.cast([0,1]):(b=a.item,d[28]=b.syncGroup,c.i64.neq(d[28],void 0)?d[27]=d[28]:d[27]=c.i64.cast([0,1]),d[21]=d[27])})},function(a){return c.sortBy(c.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[23]=!1:(b=a.item,d[23]=b.errorShouldBeShown)})},function(a){return d[23]===!0?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2285622730]),void 0).then(function(a){return d[27]=a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1919524925]),void 0).then(function(a){return d[28]=a})},function(a){return c.storedProcedure(b("LSIssueNewError"),void 0,c.i64.cast([0,1545093]),d[27],d[28],void 0,void 0)}]):c.resolve()},function(e){return d[25]=new c.Map(),d[25].set("thread_key",a[0]),d[25].set("theme_fbid",a[1]),d[25].set("source",void 0),d[25].set("sync_group",d[21]),d[25].set("payload",void 0),d[26]=c.toJSON(d[25]),c.storedProcedure(b("LSIssueNewTask"),"thread_theme",c.i64.cast([0,43]),d[26],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticUpdateThreadThemeStoredProcedure";a.__tables__=["threads","user_visible_network_connectivity_error"];e.exports=a}),null);
__d("LSOptimisticUpdateThreadThemeStoredProcedure",["LSOptimisticUpdateThreadTheme","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticUpdateThreadTheme"),e.threadKey,e.themeFbid);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSSetMessengerRestrict",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.forEach(c.filter(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}),function(b){var c=b.update;b.item;return c({pendingMessengerRestrictAction:a[1]})})},function(e){return d[0]=new c.Map(),d[0].set("restrictee_id",a[0]),d[0].set("request_id",a[2]),d[0].set("messenger_restrict_action",a[1]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"messenger_restrict",c.i64.cast([0,367]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSContactSetMessengerRestrictStoredProcedure";a.__tables__=["contacts"];e.exports=a}),null);
__d("LSSetMessengerRestrictStoredProcedure",["LSSetMessengerRestrict","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSSetMessengerRestrict"),e.restricteeId,e.messengerRestrictAction,e.requestId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSUpdateThreadImage",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.forEach(c.filter(c.db.table(9).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(b.threadType,c.i64.cast([0,2]))}),function(b){var d=b.update;b.item;return d({authorityLevel:c.i64.cast([0,60]),threadPictureUrl:a[2]===""?void 0:a[2],threadPictureUrlFallback:a[3],threadPictureUrlExpirationTimestampMs:a[4]})})},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[5]=b.syncGroup,c.i64.neq(d[5],void 0)?d[4]=d[5]:d[4]=c.i64.cast([0,1]),d[0]=d[4])})},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("image_id",a[1]),d[2].set("sync_group",d[0]),d[3]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),"thread_image",c.i64.cast([0,37]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxUpdateThreadImageStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSUpdateThreadImageStoredProcedure",["LSSynchronousPromise","LSUpdateThreadImage","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSUpdateThreadImage"),e.threadKey,e.imageId,e.threadImageUrl,e.threadImageUrlFallback,e.threadImageUrlExpirationTimestampMs);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LsIgnoreTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("707");b=d("FalcoLoggerInternal").create("ls_ignore_tapped",a);e=b;g["default"]=e}),98);
__d("MWXProgressRing.react",["cr:4145","cr:6783","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var c=d("react-compiler-runtime").c(8),e=a.color,f=a.percentage;a=a.size;if(b("cr:4145")!=null){var g=e!=null?e:"light",h=f!=null?f:0,j=a!=null?a:16,k;c[0]!==g||c[1]!==h||c[2]!==j?(k=i.jsx(b("cr:4145"),{color:g,percentage:h,size:j}),c[0]=g,c[1]=h,c[2]=j,c[3]=k):k=c[3];return k}if(b("cr:6783")!=null){c[4]!==e||c[5]!==f||c[6]!==a?(g=i.jsx(b("cr:6783"),{color:e,percentage:f,size:a}),c[4]=e,c[5]=f,c[6]=a,c[7]=g):g=c[7];return g}return null}g["default"]=a}),98);
__d("mwReplaceToast",["BaseToasterStateManager","MWXToast.react","err","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("BaseToasterStateManager").getInstance();function a(a){var b=a.body,d=a.icon,e=a.startAddOn;e=e===void 0?null:e;var f=a.supressCloseButton;f=f===void 0?!1:f;var g=a.title,h=a.toastId;if(h==null){c("err")("toastId or toasterStateManager is not provided");return}j.replace(h,i.jsx(c("MWXToast.react"),{body:b,icon:d,onDismiss:function(){return j.expire(h)},startAddOn:e,supressCloseButton:f,title:g}))}g.mwReplaceToast=a}),98);
__d("MAWLoadingSpinner.react",["BaseToasterStateManager","MWXIconCheckmarkCircle","MWXIconStrict.react","MWXProgressRing.react","MWXSpinner.react","mwPushToast","mwReplaceToast","react","react-compiler-runtime","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useLayoutEffect,l=b.useRef,m=c("BaseToasterStateManager").getInstance();function n(a,b,d,e){e===void 0&&(e=0);if(a==="spinner")return{icon:{comet:i.jsx(c("MWXSpinner.react"),{color:b?"light":"dark",size:24})},startAddOn:{type:"spinner"},title:d};else if(a==="progressRing")return{icon:{comet:i.jsx(c("MWXProgressRing.react"),{color:b?"light":"dark",size:24})},startAddOn:{source:e,type:"progressRing"},title:d};else return{icon:{comet:i.jsx(c("MWXSpinner.react"),{color:b?"light":"dark",size:24})},startAddOn:{type:"spinner"},title:d}}function o(a,b){d("mwReplaceToast").mwReplaceToast({icon:{comet:i.jsx(c("MWXIconStrict.react"),{icon:c("MWXIconCheckmarkCircle"),size:24}),mds:c("MWXIconCheckmarkCircle").component},title:b,toastId:a})}function a(a,b,e,f,g,h){var i=d("react-compiler-runtime").c(10),p=l(),q,r;i[0]!==f||i[1]!==b||i[2]!==h||i[3]!==e||i[4]!==g||i[5]!==a?(q=function(){if(g)p.current==null?p.current=d("mwPushToast").mwPushToast(n(a,b,e,h),Number.MAX_SAFE_INTEGER):d("mwReplaceToast").mwReplaceToast(babelHelpers["extends"]({},n(a,b,e,h),{toastId:p.current}));else if(p.current!=null){var i=p.current;o(i,f);c("setTimeout")(function(){m.expire(i),p.current=void 0},2750)}},r=[g,b,a,e,h,f],i[0]=f,i[1]=b,i[2]=h,i[3]=e,i[4]=g,i[5]=a,i[6]=q,i[7]=r):(q=i[6],r=i[7]);k(q,r);i[8]===Symbol["for"]("react.memo_cache_sentinel")?(q=function(){return function(){p.current!=null&&m.expire(p.current)}},r=[],i[8]=q,i[9]=r):(q=i[8],r=i[9]);j(q,r)}g.useMAWLoadingSpinner=a}),98);
__d("MAWLoadingStateSpinnerUtils",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";b=function(a){return h._(/*BTDS*/"{restoredPercentage}\u0025 of chats loaded\u2026",[h._param("restoredPercentage",a.toFixed(0).toString())])};c=h._(/*BTDS*/"All chats loaded.");function a(a,b,c){if(c===0)return 100;a=50*(a/c);b=50*(b/c);return Math.min(100,b+a)}g.getProgressMessage=b;g.completedMessage=c;g.getPercentage=a}),226);
__d("MAWLoadingStateToastSelectors",[],(function(a,b,c,d,e,f){"use strict";a=function(a){return a.offlineQueueCount};b=function(a){return a.offlineQueueProgressDownloaded};c=function(a){return a.offlineQueueProgressProcessed};f.offlineQueueCountSelector=a;f.offlineQueueProgressCountSelector=b;f.offlineQueueConsumerProgressCountSelector=c}),66);
__d("MAWLoadingStateSpinner.react",["CometDarkModeContext","MAWLoadingSpinner.react","MAWLoadingStateSpinnerUtils","MAWLoadingStateToastSelectors","MAWStateContext.react","cr:19625","react","react-compiler-runtime","useMAWOfflineQueueLoadingIndicator"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;f=e.memo;var j=e.useContext;function k(){var a=d("react-compiler-runtime").c(5),b=j(c("CometDarkModeContext")).currentSetting==="ENABLED",e=c("useMAWOfflineQueueLoadingIndicator")(!0),f=d("MAWStateContext.react").useMAWSelector(d("MAWLoadingStateToastSelectors").offlineQueueCountSelector),g=d("MAWStateContext.react").useMAWSelector(d("MAWLoadingStateToastSelectors").offlineQueueProgressCountSelector),h=d("MAWStateContext.react").useMAWSelector(d("MAWLoadingStateToastSelectors").offlineQueueConsumerProgressCountSelector),i,k;a[0]!==g||a[1]!==f||a[2]!==h?(i=d("MAWLoadingStateSpinnerUtils").getPercentage(g,h,f),k=d("MAWLoadingStateSpinnerUtils").getProgressMessage(i),a[0]=g,a[1]=f,a[2]=h,a[3]=i,a[4]=k):(i=a[3],k=a[4]);g=k;d("MAWLoadingSpinner.react").useMAWLoadingSpinner("progressRing",b,g,d("MAWLoadingStateSpinnerUtils").completedMessage,e,i);return null}function a(){var a=d("react-compiler-runtime").c(1),c;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(c=b("cr:19625")!=null?i.jsx(b("cr:19625"),{}):i.jsx(k,{}),a[0]=c):c=a[0];return c}e=f(a);g["default"]=e}),98);
__d("asyncTimeout",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a){return new(g||(g=b("Promise")))(function(b){return setTimeout(b,a)})}f["default"]=a}),66);
__d("MAWSecretConversationsLogout",["FBLogger","MAWCurrentUser","MAWIndexedDBDeletion","MAWIndexedDbMetadata","MAWODSProxy","QPLUserFlow","Random","ReQL","WAOdsEnums","asyncTimeout","getErrorSafe","ifRequired","justknobx","qpl"],(function(a,b,c,d,e,f,g){"use strict";function h(a){c("QPLUserFlow").start(c("qpl")._(25309731,"17"),{annotations:{bool:{userInitiated:a}},cancelOnUnload:!0,timeoutInMs:3e3})}function i(){c("QPLUserFlow").endSuccess(c("qpl")._(25309731,"17"))}function a(a){h(a);c("QPLUserFlow").endCancel(c("qpl")._(25310776,"6155"),{annotations:{string:{cancelReason:"logout"}}});c("QPLUserFlow").endCancel(c("qpl")._(1056839232,"112"),{annotations:{string:{cancelReason:"logout"}}});var b=async function(){try{await c("ifRequired")("MAWSetupWorker",function(a){return a.terminateWorker("logout")},function(){c("FBLogger")("messenger_web_account").mustfix("Logging out without correct messenger environment in place")})}catch(b){var a=c("getErrorSafe")(b);c("FBLogger")("messenger_web_account").catching(a).mustfix("Error in removeCurrentDevice of the Armadillo logout flow")}finally{i()}},e=function(a,b,e){if(!d("Random").coinflip(c("justknobx")._("4263")))return;a=a!=null?b!=null?"maw_db_deleted_user_eb_enrolled_and_device_restored":"maw_db_not_deleted_user_eb_enrolled_and_device_not_restored":e===!0?"maw_db_not_deleted_user_user_not_eb_enrolled_and_opted_out":"maw_db_not_deleted_user_user_not_eb_enrolled";d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_DELETE_DB_ON_LOGOUT,key:"maw_logout."+a})},f=async function(){if(indexedDB.databases==null)return;var a=await indexedDB.databases(),b=d("MAWCurrentUser").getID(),c=d("MAWIndexedDbMetadata").dbName(b);b=a.find(function(a){return a.name===c});if(b!=null)return b.name};a=async function(){await c("ifRequired")("LSDatabaseSingleton",async function(a){try{if(c("justknobx")._("4690")){var b=await f();if(b==null)return;a=await a.LSDatabaseSingleton;a=await Promise.all([d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.encrypted_backups)),d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.secure_encrypted_backups_client_state))]);var g=a[0];a=a[1];var h=(g==null?void 0:g.backupId)!=null&&(a==null?void 0:a.deviceId)!=null;h&&await d("MAWIndexedDBDeletion").deleteDB(b,"maw_v1");e(a==null?void 0:a.backupId,a==null?void 0:a.deviceId,g==null?void 0:g.isUserOptedOut)}}catch(a){h=c("getErrorSafe")(a);c("FBLogger")("messenger_e2ee_web").catching(h).mustfix("Error on logout while determining EB restore state or deleting msgr MAW db.")}})};return Promise.race([a(),c("asyncTimeout")(3e3)]).then(function(){return Promise.race([b().catch(function(a){c("FBLogger")("messenger_web_account").catching(a).mustfix("Error in the Armadillo logout flow");return Promise.resolve()}),c("asyncTimeout")(3e3)])})}g.default=a}),98);
__d("getMDSBadgeColorStyle",["FBLogger","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h={blue:{backgroundColor:"xwnonoy",$$css:!0},blueAccent:{backgroundColor:"x1sfe9e",$$css:!0},darkGray:{backgroundColor:"xhazfnh",$$css:!0},gray:{backgroundColor:"x1d2osyd",$$css:!0},green:{backgroundColor:"xv9rvxn",$$css:!0},red:{backgroundColor:"x1cdvf7c",$$css:!0}};function a(a){switch(a){case"blue":return c("gkx")("5751")?h.blueAccent:h.blue;case"gray":return h.gray;case"darkGray":return h.darkGray;case"green":return h.green;case"red":return h.red;default:a;throw c("FBLogger")("messenger_web").mustfixThrow("Invalid color in getMDSBadgeColorStyle")}}g["default"]=a}),98);
__d("MDSBadge.react",["BaseStyledBadge.react","getMDSBadgeColorStyle","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["border","color","isProfileBadge"],i,j=i||d("react"),k={borderDark:{borderTopColor:"x1o7swki",borderInlineEndColor:"xqm0i37",borderBottomColor:"x1bkzgmd",borderInlineStartColor:"x1r0oq8m",$$css:!0},borderWhite:{borderTopColor:"x6zyg47",borderInlineEndColor:"x1lu4ftm",borderBottomColor:"xpn8fn3",borderInlineStartColor:"x114g2xr",$$css:!0},isNoneProfileBadge:{marginInlineEnd:"x1xegmmw",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(16),e,f,g,i;b[0]!==a?(f=a.border,g=a.color,i=a.isProfileBadge,e=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=i):(e=b[1],f=b[2],g=b[3],i=b[4]);a=f===void 0?"none":f;f=g===void 0?"blue":g;g=i===void 0?!1:i;i=a!=="none";var l;b[5]!==f?(l=c("getMDSBadgeColorStyle")(f),b[5]=f,b[6]=l):l=b[6];f=!g&&k.isNoneProfileBadge;g=a==="white"&&k.borderWhite;a=a==="dark"&&k.borderDark;var m;b[7]!==f||b[8]!==g||b[9]!==a?(m=[f,g,a],b[7]=f,b[8]=g,b[9]=a,b[10]=m):m=b[10];b[11]!==e||b[12]!==i||b[13]!==l||b[14]!==m?(f=j.jsx(c("BaseStyledBadge.react"),babelHelpers["extends"]({},e,{border:i,colorXStyle:l,xstyle:m})),b[11]=e,b[12]=i,b[13]=l,b[14]=m,b[15]=f):f=b[15];return f}g["default"]=a}),98);
__d("MDSCheckbox.react",["FDSCheckbox.react"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("FDSCheckbox.react")}),98);
__d("MWCMGetGender",["IntlVariations","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){if(a==null)return c("IntlVariations").GENDER_UNKNOWN;switch((h||(h=d("LSIntEnum"))).toNumber(a)){case 1:return c("IntlVariations").GENDER_FEMALE;case 2:return c("IntlVariations").GENDER_MALE;case 3:case 0:default:return c("IntlVariations").GENDER_UNKNOWN}}g.getGender=a}),98);
__d("MWCMRequestToJoinUtils",["fbt","GroupsCometChatsEngagementLogger","I64","Int64Hooks","LSFactory","LSIntEnum","LSOptimisticSetNeedsAdminApprovalForNewParticipantStoredProcedure","LSOptimisticUpdateThreadJoinRequestApprovalSettingStoredProcedure","LSThreadBitOffset","promiseDone","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k;function a(a){var b,c;b=(k||(k=d("I64"))).to_int32((b=a.pendingJoinRequestsCount)!=null?b:(k||(k=d("I64"))).zero);c=d("LSThreadBitOffset").has(94,a)||(k||(k=d("I64"))).to_int32((c=a.joinRequestApprovalSetting)!=null?c:(k||(k=d("I64"))).minus_one)===1;return a.needsAdminApprovalForNewParticipant===!0?c&&b>0?h._(/*BTDS*/"_j{\"*\":\"{number} requests\",\"_1\":\"1 request\"}",[h._plural(b,"number")]):h._(/*BTDS*/"On"):h._(/*BTDS*/"Off")}function b(a){var b=d("react-compiler-runtime").c(4),e=(i||(i=c("useReStore")))(),g,h;b[0]!==e||b[1]!==a?(g=function(b){d("GroupsCometChatsEngagementLogger").log({action:"unknown",client_extras:{callsite:"MWInboxInfoGroupOptionsSection"},event:"update_admin_approval_setting",source:"unknown",surface:"unknown",thread_id:String(a)}),c("promiseDone")(e.runInTransaction(function(d){return c("LSOptimisticSetNeedsAdminApprovalForNewParticipantStoredProcedure")(c("LSFactory")(d),{needsAdminApprovalForNewParticipant:b,threadKey:a})},"readwrite",void 0,void 0,f.id+":88"))},h=[e,a],b[0]=e,b[1]=a,b[2]=g,b[3]=h):(g=b[2],h=b[3]);return d("Int64Hooks").useCallbackInt64(g,h)}function e(a){var b=d("react-compiler-runtime").c(4),e=(i||(i=c("useReStore")))(),g,h;b[0]!==e||b[1]!==a?(g=function(b){c("promiseDone")(e.runInTransaction(function(e){return c("LSOptimisticUpdateThreadJoinRequestApprovalSettingStoredProcedure")(c("LSFactory")(e),{joinRequestApprovalSetting:b?(j||(j=d("LSIntEnum"))).ofNumber(1):(j||(j=d("LSIntEnum"))).ofNumber(0),threadKey:a})},"readwrite",void 0,void 0,f.id+":113"))},h=[e,a],b[0]=e,b[1]=a,b[2]=g,b[3]=h):(g=b[2],h=b[3]);return d("Int64Hooks").useCallbackInt64(g,h)}g.memberRequestsMenuItemSubtitle=a;g.useSetNeedsAdminApprovalForNewParticipant=b;g.useSetCanMembersApproveJoinRequests=e}),226);
__d("MWGroupMembershipListItemWrapper",["MWGroupMembershipListItem"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a.tag){case"ParticipantAndContact":return{contact:a.value[1],participant:a.value[0],type:d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.ParticipantAndContact};case"CommunityMember":return{communityMember:a.value,type:d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.CommunityMember};case"ServerSearchResult":return{serverSearchResult:a.value,type:d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.ServerSearchResult};case"BroadcastChannelParticipant":return{participant:a.value,type:d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.BroadcastChannelParticipant}}}g.tToRE=a}),98);
__d("MWInboxHeaderDetailsPressable.react",["fbt","CurrentEnvironment","I64","LSContactLink.react","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWAdminForBroadcastChannelUtils","MWLSGroupMembershipDialog.entrypoint","MWPActor.react","MWXPressable.react","MWXTooltip.react","ReQLSuspense","XCometProfileControllerRouteBuilder","queryMWLSOtherParticipantContact","react","react-compiler-runtime","useCommunityFolder","useMWAriaLabelForThread","useMWXEntryPointDialog","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=j||(j=d("react")),m=j.useRef,n={title:{maxWidth:"x193iq5w",$$css:!0}};function o(a){var b=d("react-compiler-runtime").c(16),e=a.children,f=a.isContainerPressable;a=a.thread;var g=a.parentThreadKey,i=a.threadKey,j=a.threadName;a=a.threadType;var o=m(null),p;b[0]!==g?(p={parentThreadKey:g},b[0]=g,b[1]=p):p=b[1];var q=c("useCommunityFolder")(p);b[2]!==i||b[3]!==j||b[4]!==a?(g={threadKey:i,threadName:j,threadType:a},b[2]=i,b[3]=j,b[4]=a,b[5]=g):g=b[5];p=c("useMWAriaLabelForThread")(g);if(b[6]!==(q==null?void 0:q.fbGroupId)){j=(k||(k=d("I64"))).to_string((i=q==null?void 0:q.fbGroupId)!=null?i:(k||(k=d("I64"))).zero);b[6]=q==null?void 0:q.fbGroupId;b[7]=j}else j=b[7];b[8]!==j?(a={groupID:j},b[8]=j,b[9]=a):a=b[9];g=c("useMWXEntryPointDialog")(c("MWLSGroupMembershipDialog.entrypoint"),a);var r=g[0];b[10]!==p||b[11]!==e||b[12]!==q||b[13]!==f||b[14]!==r?(i=f?l.jsx(c("MWXPressable.react"),{"aria-label":p,onPress:function(){return r({folder:q})},overlayRadius:"normal",ref:o,xstyle:n.title,children:e}):l.jsx(c("MWXPressable.react"),{"aria-label":p,expanding:!0,onPress:function(){return r({folder:q})},overlayRadius:"normal",ref:o,xstyle:n.title,children:l.jsx(c("MWXTooltip.react"),{align:"middle",position:"above",tooltip:h._(/*BTDS*/"Members"),children:e})}),b[10]=p,b[11]=e,b[12]=q,b[13]=f,b[14]=r,b[15]=i):i=b[15];return i}function p(a){var b=d("react-compiler-runtime").c(13),e=a.children,g=a.isContainerPressable;a=a.thread;var h=a.threadKey,j=a.threadType,k=(i||(i=c("useReStore")))(),m=d("MWPActor.react").useActor(),n,o;b[0]!==m||b[1]!==k||b[2]!==h||b[3]!==j?(n=function(){return c("queryMWLSOtherParticipantContact")(k,h,j,m,["name","blockedByViewerStatus","contactTypeExact","id","secondaryName"])},o=[k,m,h,j],b[0]=m,b[1]=k,b[2]=h,b[3]=j,b[4]=n,b[5]=o):(n=b[4],o=b[5]);n=d("ReQLSuspense").useFirst(n,o,f.id+":125");o=d("LSThreadBitOffset").has(8,a);if(n!=null&&o){b[6]!==e||b[7]!==n||b[8]!==g?(a=g?e:l.jsx(c("MWXTooltip.react"),{align:"middle",position:"above",tooltip:n.name,children:e}),b[6]=e,b[7]=n,b[8]=g,b[9]=a):a=b[9];b[10]!==n||b[11]!==a?(o=l.jsx(c("LSContactLink.react"),{contact:n,isText:!1,testid:void 0,children:a}),b[10]=n,b[11]=a,b[12]=o):o=b[12];return o}return e}function q(a){var b=d("react-compiler-runtime").c(12),e=a.children,f=a.isContainerPressable;a=a.thread;var g=a.threadKey,h=a.threadName;a=a.threadType;var i=d("MWAdminForBroadcastChannelUtils").useFetchBroadcastChannelCreator(g),j;b[0]!==g||b[1]!==h||b[2]!==a?(j={threadKey:g,threadName:h,threadType:a},b[0]=g,b[1]=h,b[2]=a,b[3]=j):j=b[3];g=c("useMWAriaLabelForThread")(j);if(i==null)return e;if(b[4]!==i.id){a=(h=c("XCometProfileControllerRouteBuilder").buildUri({id:(k||(k=d("I64"))).to_string(i.id)}).setDomain("www.facebook.com"))==null||(h=h.setProtocol("https"))==null?void 0:h.toString();b[4]=i.id;b[5]=a}else a=b[5];j=a;h=c("CurrentEnvironment").messengerdotcom?"_blank":"_self";if(f){b[6]!==j?(i={target:h,url:j},b[6]=j,b[7]=i):i=b[7];b[8]!==g||b[9]!==e||b[10]!==i?(a=l.jsx(c("MWXPressable.react"),{"aria-label":g,linkProps:i,overlayRadius:"normal",xstyle:n.title,children:e}),b[8]=g,b[9]=e,b[10]=i,b[11]=a):a=b[11];return a}return e}function a(a){var b=d("react-compiler-runtime").c(12),c=a.children,e=a.isContainerPressable;a=a.thread;if(d("LSMessagingThreadTypeUtil").isBusinessSupportThread(a.threadSubtype))return c;if(d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)){var f;b[0]!==c||b[1]!==e||b[2]!==a?(f=l.jsx(p,{isContainerPressable:e,thread:a,children:c}),b[0]=c,b[1]=e,b[2]=a,b[3]=f):f=b[3];return f}f=d("LSThreadBitOffset").has(26,a);if(d("LSMessagingThreadTypeUtil").isGroup(a.threadType)&&f){b[4]!==c||b[5]!==e||b[6]!==a?(f=l.jsx(o,{isContainerPressable:e,thread:a,children:c}),b[4]=c,b[5]=e,b[6]=a,b[7]=f):f=b[7];return f}if(d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a.threadType)){b[8]!==c||b[9]!==e||b[10]!==a?(f=l.jsx(q,{isContainerPressable:e,thread:a,children:c}),b[8]=c,b[9]=e,b[10]=a,b[11]=f):f=b[11];return f}return c}g["default"]=a}),226);
__d("MWInboxHeaderDetailsContainer.react",["CometPlaceholder.react","Int64Hooks","LSThreadBitOffset","MWInboxHeaderDetails.react","MWInboxHeaderDetailsPressable.react","MWThreadPicture.react","MWXRow.react","MWXRowItem.react","MWXTooltip.react","ReQL","ReQLSuspense","getMWV2HeaderSettingsPopoverTooltip","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i.memo;var k={detailsContainer:{flexGrow:"x1iyjqo2",paddingInlineStart:"xyiysdx",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(25),e=a.badgeSize,g=a.isContainerPressable,i=a.photoSize,l=a.threadKey;a=a.threadNameSize;e=e===void 0?10:e;g=g===void 0?!0:g;i=i===void 0?40:i;a=a===void 0?"headlineEmphasized3":a;var m=(h||(h=c("useReStore")))(),n;b[0]!==m.tables.threads||b[1]!==l?(n=function(){return d("ReQL").fromTableAscending(m.tables.threads,["threadKey","threadType","muteCallsExpireTimeMs","muteExpireTimeMs","ongoingCallState","cannotReplyReason","parentThreadKey","threadName","threadSubtype","ongoingCallTimestampMs","nullstateDescriptionText1"].concat(d("LSThreadBitOffset").threadCapabilityFields)).getKeyRange(l)},b[0]=m.tables.threads,b[1]=l,b[2]=n):n=b[2];var o;b[3]!==m||b[4]!==l?(o=[m,l],b[3]=m,b[4]=l,b[5]=o):o=b[5];n=d("ReQLSuspense").useFirst(n,o,f.id+":52");if(n==null)return null;b[6]!==n.threadType?(o=c("getMWV2HeaderSettingsPopoverTooltip")({threadType:n.threadType}),b[6]=n.threadType,b[7]=o):o=b[7];o=o;var p;b[8]!==e||b[9]!==i||b[10]!==l?(p=j.jsx(c("MWThreadPicture.react"),{badgeSize:e,photoSize:i,threadKey:l,withAltText:!1}),b[8]=e,b[9]=i,b[10]=l,b[11]=p):p=b[11];b[12]!==g||b[13]!==p?(e=j.jsx(c("MWXRowItem.react"),{"aria-hidden":g,children:p}),b[12]=g,b[13]=p,b[14]=e):e=b[14];i=e;b[15]!==g||b[16]!==n||b[17]!==a||b[18]!==o?(p=j.jsx(c("MWXRowItem.react"),{expanding:!0,xstyle:k.detailsContainer,children:g?j.jsx(c("MWInboxHeaderDetails.react"),{thread:n,threadNameSize:a}):j.jsx(c("MWXTooltip.react"),{align:"middle",position:"above",tooltip:o,children:j.jsx(c("MWInboxHeaderDetails.react"),{thread:n,threadNameSize:a})})}),b[15]=g,b[16]=n,b[17]=a,b[18]=o,b[19]=p):p=b[19];e=p;b[20]!==g||b[21]!==n||b[22]!==i||b[23]!==e?(a=j.jsx(c("MWXRow.react"),{expanding:!0,paddingHorizontal:0,paddingVertical:0,testid:void 0,verticalAlign:"center",children:j.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWInboxHeaderDetailsContainer",children:g?j.jsx(c("MWInboxHeaderDetailsPressable.react"),{isContainerPressable:g,thread:n,children:j.jsxs(c("MWXRow.react"),{paddingHorizontal:0,paddingTop:0,paddingVertical:0,children:[i,e]})}):j.jsxs(j.Fragment,{children:[j.jsx(c("MWInboxHeaderDetailsPressable.react"),{isContainerPressable:g,thread:n,children:i}),e]})})}),b[20]=g,b[21]=n,b[22]=i,b[23]=e,b[24]=a):a=b[24];return a}e=b(a,d("Int64Hooks").mostlyShallowEqual);g["default"]=e}),98);
__d("MWInboxInfoButton.react",["MWXListCellPressable.react","MWXText.react","MWXTextPairing.react","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("gkx")("23219")&&c("gkx")("23433")?"contained":"normal";function a(a){var b=d("react-compiler-runtime").c(23),e=a.addOnEnd,f=a.addOnStart,g=a.addOnStartStyle,h=a.disabled,k=a.label,l=a.linkProps,m=a.loggingEvent,n=a.onHoverIn,o=a.onHoverOut,p=a.onPress,q=a.ref,r=a.subLabel,s=a.subLabelElement;a=a.testid;g=(g!=null?g:j)==="contained";var t;b[0]!==f||b[1]!==g?(t=f!=null&&g?i.jsx("div",{className:"x6s0dn4 x1qhmfi1 x1c9tyrk xeusxvb x1pahc9y x1ertn4p x78zum5 x1fgtraw xl56j7k x1264ykn",children:f}):f,b[0]=f,b[1]=g,b[2]=t):t=b[2];f=t;b[3]!==r||b[4]!==s?(g=r!=null?i.jsx(c("MWXText.react"),{type:"meta3",children:r}):s!=null?i.jsx(c("MWXText.react"),{type:"meta3",children:s}):void 0,b[3]=r,b[4]=s,b[5]=g):g=b[5];t=g;b[6]!==k?(r=i.jsx(c("MWXText.react"),{type:"headline4",children:k}),b[6]=k,b[7]=r):r=b[7];b[8]!==t||b[9]!==r?(s=i.jsx(c("MWXTextPairing.react"),{headline:r,level:4,meta:t}),b[8]=t,b[9]=r,b[10]=s):s=b[10];b[11]!==e||b[12]!==f||b[13]!==h||b[14]!==l||b[15]!==m||b[16]!==n||b[17]!==o||b[18]!==p||b[19]!==q||b[20]!==s||b[21]!==a?(g=i.jsx(c("MWXListCellPressable.react"),{addOnEnd:e,addOnStart:f,addOnStartVerticalAlign:"top",content:s,disabled:h,linkProps:l,loggingEvent:m,onHoverIn:n,onHoverOut:o,onPress:p,ref:q,size:"medium",testid:void 0}),b[11]=e,b[12]=f,b[13]=h,b[14]=l,b[15]=m,b[16]=n,b[17]=o,b[18]=p,b[19]=q,b[20]=s,b[21]=a,b[22]=g):g=b[22];return g}g["default"]=a}),98);
__d("MessengerRestrictFirstTimeNuxDialogContainer.react",["Int64Hooks","JSResourceForInteraction","ReQL","promiseDone","react","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;i||(i=d("react"));var j=i.useRef,k=c("JSResourceForInteraction")("MWRestrictFirstTimeNuxDialog.react").__setRef("MessengerRestrictFirstTimeNuxDialogContainer.react");function a(a){var b=a.children;a=a.dialogProps;var e=a.onPress,f=a.restrictedUserId,g=(h||(h=c("useReStore")))();a=j(null);var i=c("useMWXLazyDialog")(k),l=i[0];i=d("Int64Hooks").useCallbackInt64(function(){c("promiseDone")(async function(){var a=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(g.tables.contacts).getKeyRange(f));if(a==null)return;l({onPress:function(){e()},restrictedUser:a})}())},[g,f,l,e]);return b(i,a)}a.displayName=a.name+" [from "+f.id+"]";g.default=a}),98);
__d("MWRestrictDialogActionToggle.react",["MessengerRestrictFirstTimeNuxDialogContainer.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(8),e=a.children;a=a.dialogProps;if(!a.isRestricted){var f;b[0]!==e?(f=function(a,b){return e(a)},b[0]=e,b[1]=f):f=b[1];var g;b[2]!==a||b[3]!==f?(g=i.jsx(c("MessengerRestrictFirstTimeNuxDialogContainer.react"),{dialogProps:a,children:f}),b[2]=a,b[3]=f,b[4]=g):g=b[4];return g}else{b[5]!==e||b[6]!==a.onPress?(f=e(a.onPress),b[5]=e,b[6]=a.onPress,b[7]=f):f=b[7];return f}}g["default"]=a}),98);
__d("MWXIconMenuItemMessageCross",["MWXSvgIcon","SVGIcon","cr:22732","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgMenuItemIcon(d("SVGIcon").svgIcon(b("cr:22732")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconMessageCross",["MWXSvgIcon","SVGIcon","cr:22396","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22396")),c("gkx")("23219"));g["default"]=a}),98);
__d("useMAWOptimisticUpdateSecureRestrict",["I64","LSContactMessengerRestrictAction","LSIntEnum","LSThreadBitOffset","Promise","ReQL","ReQLSuspense","clearedMAWMnRestrictCapabilities","promiseDone","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=[35,19,56,24,25];function a(){var a=d("react-compiler-runtime").c(2),e=(k||(k=c("useReStore")))(),g;a[0]!==e?(g=function(a,g){c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.participants).filter(function(b){return(j||(j=d("I64"))).equal(b.contactId,a)}).map(function(a){return d("ReQLSuspense").first(d("ReQL").fromTableAscending(e.tables.threads).getKeyRange(a.threadKey),f.id+":49")}).filter(m)).then(function(a){if(a==null)return(h||(h=b("Promise"))).resolve();var k=(j||(j=d("I64"))).equal(g,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactMessengerRestrictAction").RESTRICT))?d("LSThreadBitOffset").clear(c("clearedMAWMnRestrictCapabilities"),a.capabilities,a.capabilities2,a.capabilities3,a.capabilities4,a.capabilities5):d("LSThreadBitOffset").set(l,a.capabilities,a.capabilities2,a.capabilities3,a.capabilities4,a.capabilities5),m=k[0],n=k[1],o=k[2],p=k[3],q=k[4];c("promiseDone")(e.runInTransaction(function(b){var c=babelHelpers["extends"]({},a,{capabilities:m,capabilities2:n,capabilities3:o,capabilities4:p,capabilities5:q});return b.threads.put(c)},"readwrite",void 0,void 0,f.id+":98"));return(h||(h=b("Promise"))).resolve()}))},a[0]=e,a[1]=g):g=a[1];return g}function m(a){if(a!=null)return(j||(j=d("I64"))).equal(a.threadType,(i||(i=d("LSIntEnum"))).ofNumber(15));else return!1}g["default"]=a}),98);
__d("useMWLSMessengerRestrict",["I64","Int64Hooks","LSContactMessengerRestrictAction","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","LSSetMessengerRestrictStoredProcedure","MWBlockUtils","MWWellbeingQPLLogEndUtils","promiseDone","react-compiler-runtime","requireDeferred","useMAWOptimisticUpdateSecureRestrict","useMWMessengerResetBlockOrRestrictWC","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(b=c("requireDeferred"))("MessengerWellbeingRestrictFailedFalcoEvent").__setRef("useMWLSMessengerRestrict"),l=b("MessengerWellbeingRestrictSucceededFalcoEvent").__setRef("useMWLSMessengerRestrict"),m=b("MessengerWellbeingUnrestrictFailedFalcoEvent").__setRef("useMWLSMessengerRestrict"),n=b("MessengerWellbeingUnrestrictSucceededFalcoEvent").__setRef("useMWLSMessengerRestrict");function o(a,b,e,f,g,h){var k=d("LSMessagingThreadTypeUtil").isArmadilloSecure(e);e=(i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(15));var m=e?17:1;(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactMessengerRestrictAction").UNRESTRICT))?n.onReady(function(a){return a.log(function(){return{data:{entry_point:h,request_id:g,source:m,source_owner:0,source_type:0},other_user:{id:(i||(i=d("I64"))).to_string(b)},thread:{id:k?"-1":(i||(i=d("I64"))).to_string(f)}}})}):l.onReady(function(a){return a.log(function(){return{data:{entry_point:h,request_id:g,source:m,source_owner:0,source_type:0},other_user:{id:(i||(i=d("I64"))).to_string(b)},thread:{id:k?"-1":(i||(i=d("I64"))).to_string(f)}}})})}function p(a,b,e,f,g,h){var l=d("LSMessagingThreadTypeUtil").isArmadilloSecure(e);e=(i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(15));var n=e?17:1;(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactMessengerRestrictAction").UNRESTRICT))?m.onReady(function(a){return a.log(function(){return{data:{entry_point:h,request_id:g,source:n,source_owner:0,source_type:0},other_user:{id:(i||(i=d("I64"))).to_string(b)},thread:{id:l?"-1":(i||(i=d("I64"))).to_string(f)}}})}):k.onReady(function(a){return a.log(function(){return{data:{entry_point:h,request_id:g,source:n,source_owner:0,source_type:0},other_user:{id:(i||(i=d("I64"))).to_string(b)},thread:{id:l?"-1":(i||(i=d("I64"))).to_string(f)}}})})}function a(a,b,e,g,i){var j=d("react-compiler-runtime").c(20),k=(h||(h=c("useReStore")))(),l=c("useMAWOptimisticUpdateSecureRestrict")(),m=c("useMWMessengerResetBlockOrRestrictWC")(),n=d("MWBlockUtils").useClearSearchTables(),q=d("MWWellbeingQPLLogEndUtils").useLogRestrictEnd(a),r;j[0]!==n||j[1]!==a||j[2]!==q||j[3]!==i||j[4]!==l||j[5]!==g||j[6]!==m||j[7]!==k||j[8]!==e||j[9]!==b?(r=function(d){c("promiseDone")(k.runInTransaction(function(b){return c("LSSetMessengerRestrictStoredProcedure")(c("LSFactory")(b),{messengerRestrictAction:d,requestId:g,restricteeId:a})},"readwrite",void 0,void 0,f.id+":190"),function(){l(a,d);m(a);n();q();return o(d,a,b,e,g,i)},function(){return p(d,a,b,e,g,i)})},j[0]=n,j[1]=a,j[2]=q,j[3]=i,j[4]=l,j[5]=g,j[6]=m,j[7]=k,j[8]=e,j[9]=b,j[10]=r):r=j[10];var s;j[11]!==a||j[12]!==i||j[13]!==l||j[14]!==g||j[15]!==m||j[16]!==k||j[17]!==e||j[18]!==b?(s=[k,a,g,l,m,b,e,i],j[11]=a,j[12]=i,j[13]=l,j[14]=g,j[15]=m,j[16]=k,j[17]=e,j[18]=b,j[19]=s):s=j[19];return d("Int64Hooks").useCallbackInt64(r,s)}g["default"]=a}),98);
__d("useMWRestrictContactOneOnOneThread",["CurrentEnvironment","I64","LSContactMessengerRestrictAction","LSIntEnum","LSMessagingThreadTypeUtil","MWChatStateActions","MWChatStateV2.react","MWLSThreadDisplayContext","MWPBumpEntityKey","react-compiler-runtime","requireDeferred","useCometRouterDispatcher","useMWLSMessengerRestrict","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("MessengerWellbeingRestrictTappedFalcoEvent").__setRef("useMWRestrictContactOneOnOneThread"),k=c("requireDeferred")("MessengerWellbeingUnrestrictTappedFalcoEvent").__setRef("useMWRestrictContactOneOnOneThread");function l(a,b,c,e,f,g){var l=d("LSMessagingThreadTypeUtil").isArmadilloSecure(e);e=(h||(h=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(15));var m=e?17:1;a?k.onReady(function(a){return a.log(function(){return{data:{entry_point:g,request_id:b,source:m,source_owner:0,source_type:0},other_user:{id:(h||(h=d("I64"))).to_string(c)},thread:{id:l?"-1":(h||(h=d("I64"))).to_string(f)}}})}):j.onReady(function(a){return a.log(function(){return{data:{entry_point:g,request_id:b,source:m,source_owner:0,source_type:0},other_user:{id:(h||(h=d("I64"))).to_string(c)},thread:{id:l?"-1":(h||(h=d("I64"))).to_string(f)}}})})}function a(a,b,e,f,g){var h=d("react-compiler-runtime").c(11),j;h[0]===Symbol["for"]("react.memo_cache_sentinel")?(j=c("uuidv4")(),h[0]=j):j=h[0];var k=j,m=c("useMWLSMessengerRestrict")(a,b,e,k,f),n=c("useCometRouterDispatcher")(),o=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),p=d("MWChatStateV2.react").useDispatch();h[1]!==n||h[2]!==a||h[3]!==p||h[4]!==o||h[5]!==g||h[6]!==f||h[7]!==m||h[8]!==e||h[9]!==b?(j=function(){l(g,k,a,b,e,f);d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_wellbeing",g?"unrestrict":"restrict");m(g?(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactMessengerRestrictAction").UNRESTRICT):(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactMessengerRestrictAction").RESTRICT));!g&&o==="Inbox"&&n!=null&&n.go(c("CurrentEnvironment").messengerdotcom?"/":"/messages",{});if(!g)return p(d("MWChatStateActions").closeTabByThreadKey(Date.now(),e))},h[1]=n,h[2]=a,h[3]=p,h[4]=o,h[5]=g,h[6]=f,h[7]=m,h[8]=e,h[9]=b,h[10]=j):j=h[10];return j}g["default"]=a}),98);
__d("MWInboxInfoMessengerRestrict.react",["fbt","I64","LSContactBitOffset","LSContactMessengerRestrictAction","LSIntEnum","MWInboxInfoButton.react","MWPBumpEntityKey","MWRestrictDialogActionToggle.react","MWWellbeingQPLLogStartAndCancelUtils","MWXIconForListCell.react","MWXIconMenuItemMessageCross","MWXIconMessageCross","MWXMenuItem.react","ReQL","ReQLSuspense","react","react-compiler-runtime","useMWRestrictContactOneOnOneThread","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||d("react");function n(a){var b=d("react-compiler-runtime").c(15),e=a.buttonSource,f=a.buttonTitle,g=a.isPendingState,h=a.isRestricted,i=a.loggingEntryPoint,j=a.onPress;b[0]!==h||b[1]!==i||b[2]!==j?(a=function(){j(),d("MWWellbeingQPLLogStartAndCancelUtils").logRestrictStart(h,i),h||d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_wellbeing","restrict_click")},b[0]=h,b[1]=i,b[2]=j,b[3]=a):a=b[3];a=a;switch(e){case"CHAT_TAB_SETTINGS":b[4]!==f||b[5]!==g||b[6]!==a?(e=m.jsx(c("MWXMenuItem.react"),{disabled:g,icon:c("MWXIconMenuItemMessageCross"),onClick:a,primaryText:f,testid:void 0}),b[4]=f,b[5]=g,b[6]=a,b[7]=e):e=b[7];return e;default:e=g?"disabled":"primary";var k;b[8]!==e?(k=m.jsx(c("MWXIconForListCell.react"),{color:e,icon:c("MWXIconMessageCross")}),b[8]=e,b[9]=k):k=b[9];b[10]!==f||b[11]!==g||b[12]!==a||b[13]!==k?(e=m.jsx(c("MWInboxInfoButton.react"),{addOnStart:k,disabled:g,label:f,onPress:a,testid:void 0}),b[10]=f,b[11]=g,b[12]=a,b[13]=k,b[14]=e):e=b[14];return e}}function a(a){var b=d("react-compiler-runtime").c(28),e=a.buttonSource,g=a.contactId,l=a.loggingEntryPoint,o=a.threadKey;a=a.threadType;var p=(i||(i=c("useReStore")))(),q;b[0]!==g||b[1]!==p.tables.contacts?(q=function(){return d("ReQL").fromTableAscending(p.tables.contacts,["id","pendingMessengerRestrictAction"].concat(d("LSContactBitOffset").contactCapabilityFields)).getKeyRange(g)},b[0]=g,b[1]=p.tables.contacts,b[2]=q):q=b[2];var r;b[3]!==g||b[4]!==p?(r=[g,p],b[3]=g,b[4]=p,b[5]=r):r=b[5];q=d("ReQLSuspense").useFirst(q,r,f.id+":91");b[6]!==q?(r=q!=null?d("LSContactBitOffset").has(66,q):!1,b[6]=q,b[7]=r):r=b[7];var s=r,t;if(b[8]!==(q==null?void 0:q.pendingMessengerRestrictAction)||b[9]!==s){r=(r=q==null?void 0:q.pendingMessengerRestrictAction)!=null?r:(j||(j=d("I64"))).of_string("10");t=(j||(j=d("I64"))).equal(r,(k||(k=d("LSIntEnum"))).ofNumber(c("LSContactMessengerRestrictAction").RESTRICT))||(j||(j=d("I64"))).equal(r,(k||(k=d("LSIntEnum"))).ofNumber(c("LSContactMessengerRestrictAction").UNRESTRICT));var u;b[13]!==s?(u=s?h._(/*BTDS*/"Unrestrict"):h._(/*BTDS*/"Restrict"),b[13]=s,b[14]=u):u=b[14];u=u;r=(j||(j=d("I64"))).equal(r,(k||(k=d("LSIntEnum"))).ofNumber(c("LSContactMessengerRestrictAction").UNRESTRICT))?h._(/*BTDS*/"Unrestricting..."):h._(/*BTDS*/"Restricting\u2026");b[8]=q==null?void 0:q.pendingMessengerRestrictAction;b[9]=s;b[10]=t;b[11]=r;b[12]=u}else t=b[10],r=b[11],u=b[12];r=r;a=c("useMWRestrictContactOneOnOneThread")(g,a,o,l,s);var v=t?r:u;if(q!=null){b[15]!==q.id||b[16]!==s||b[17]!==a?(o={isRestricted:s,onPress:a,restrictedUserId:q.id},b[15]=q.id,b[16]=s,b[17]=a,b[18]=o):o=b[18];b[19]!==e||b[20]!==v||b[21]!==t||b[22]!==s||b[23]!==l?(r=function(a){return m.jsx(n,{buttonSource:e,buttonTitle:v,isPendingState:t,isRestricted:s,loggingEntryPoint:l,onPress:a})},b[19]=e,b[20]=v,b[21]=t,b[22]=s,b[23]=l,b[24]=r):r=b[24];b[25]!==o||b[26]!==r?(u=m.jsx(c("MWRestrictDialogActionToggle.react"),{dialogProps:o,children:r}),b[25]=o,b[26]=r,b[27]=u):u=b[27];return u}else return null}g["default"]=a}),226);
__d("MWInboxInfoNotifications.react",["fbt","GroupsCometChatsThreadNotificationSettingsDialog.entrypoint","JSResourceForInteraction","LSMessagingThreadTypeUtil","MessengerMuteUtils","gkx","mwCMIsAnyCMThread","react","useMWChatUnmuteThread","useMWPIsThreadMuted","useMWXEntryPointDialog","useMWXLazyDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i;i||(i=d("react"));var j=i.useRef,k=c("JSResourceForInteraction")("LSMuteThreadDialog.react").__setRef("MWInboxInfoNotifications.react");function a(a){var b=a.children,e=a.entryPoint,f=a.folder,g=a.thread;a=d("MessengerMuteUtils").calcMuteUntilMs(g);var i=c("useMWPIsThreadMuted")(g),l=c("useMWChatUnmuteThread")(),m=j(null),n=c("mwCMIsAnyCMThread")(g.threadType)&&f!=null||d("LSMessagingThreadTypeUtil").isOpenGroupFnFThread(g.threadType)&&c("gkx")("7435"),o=n?h._(/*BTDS*/"_j[\"Chat notifications\",\"0d0b40d72cd2adc492a402e98e18896f\",1]"):i?h._(/*BTDS*/"Unmute notifications"):h._(/*BTDS*/"Mute notifications");a=i?d("MessengerMuteUtils").mutedUntilLabel(a===-1?a:a/1e3):void 0;var p=c("useMWXEntryPointDialog")(c("GroupsCometChatsThreadNotificationSettingsDialog.entrypoint"),{}),q=p[0];p=function(){return q({groupId:f==null?void 0:f.fbGroupId,threadKey:g.threadKey})};var r=c("useMWXLazyDialog")(k),s=r[0];r=function(){return s({entryPoint:e,threadKey:g.threadKey})};var t=n?p:r;return b(function(){return i&&!n?l(g):t()},m,o,a,i)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWLSGroupMembershipMemberCellProfilePhoto.react",["fbt","IntlVariations","MWXProfilePhoto.react","MWXTooltip.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(15),e=a.linkProps,f=a.name,g=a.onPress,i=a.profilePictureUrl;a=a.showTooltip;var k;b[0]!==f?(k=h._(/*BTDS*/"_j{\"*\":\"Message {name}\"}",[h._name("name",f,c("IntlVariations").GENDER_UNKNOWN)]),b[0]=f,b[1]=k):k=b[1];var l;b[2]!==i?(l={uri:i},b[2]=i,b[3]=l):l=b[3];b[4]!==e||b[5]!==f||b[6]!==g||b[7]!==k||b[8]!==l?(i=j.jsx(c("MWXProfilePhoto.react"),{alt:f,"aria-label":k,linkProps:e,onPress:g,shape:"circle",size:36,source:l}),b[4]=e,b[5]=f,b[6]=g,b[7]=k,b[8]=l,b[9]=i):i=b[9];e=i;if(a){b[10]!==f?(g=h._(/*BTDS*/"_j{\"*\":\"Message {name}\"}",[h._name("name",f,c("IntlVariations").GENDER_UNKNOWN)]),b[10]=f,b[11]=g):g=b[11];b[12]!==e||b[13]!==g?(k=j.jsx(c("MWXTooltip.react"),{position:"above",tooltip:g,children:e}),b[12]=e,b[13]=g,b[14]=k):k=b[14];return k}return e}g["default"]=a}),226);
__d("useMWLSGroupMembershipMenuQuery$Parameters",["useMWLSGroupMembershipMenuQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("useMWLSGroupMembershipMenuQuery_facebookRelayOperation"),metadata:{},name:"useMWLSGroupMembershipMenuQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWLSGroupMembershipMenu.entrypoint",["JSResourceForInteraction","useMWLSGroupMembershipMenuQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){var b=a.groupID;a=a.userID;return{queries:{groupMembershipMenuQueryRef:{parameters:c("useMWLSGroupMembershipMenuQuery$Parameters"),variables:{groupID:b,userID:a}}}}},root:c("JSResourceForInteraction")("MWLSGroupMembershipMenu.react").__setRef("MWLSGroupMembershipMenu.entrypoint")};g["default"]=a}),98);
__d("MWLSGroupMembershipMemberCell.react",["fbt","AddOnEndOverride.react","BaseMiddotSeparator.react","GenderConst","I64","Int64Hooks","LSContactBlockedByViewerStatus","LSContactGenderToGenderConst","LSFactory","LSGroupParticipantJoinState","LSIntEnum","LSIssueCommunityAdminModerationActionsFetchStoredProcedure","LSMessagingThreadTypeUtil","LSThreadBitOffset","LSWhatsAppConnectStatus","MWCMThreadTypes.react","MWGroupMembershipListItem","MWLSContactTypeExactUtils","MWLSGroupMembershipMemberCellProfilePhoto.react","MWLSGroupMembershipMenu.entrypoint","MWPActor.react","MWXCircleButton.react","MWXEntryPointPopoverTrigger.react","MWXIconDots3Horizontal","MWXListCell.react","MWXPressable.react","MWXText.react","MWXTextPairing.react","MWXTooltip.react","getFBTSafeGenderFromGenderConst","getLSMediaContactProfilePictureUrl","gkx","pageID","promiseDone","react","react-compiler-runtime","useMWNavigateToThreadFromGroupMembership","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i=["children","isDisabled"],j,k,l,m,n=k||(k=d("react"));k.useMemo;var o=h._(/*BTDS*/"Admin"),p=h._(/*BTDS*/"Moderator"),q=h._(/*BTDS*/"Host"),r="member_list_profile_sheet_source_"+c("pageID");function s(a,b){var e=d("react-compiler-runtime").c(6);bb0:{if(a.type===d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.ServerSearchResult&&a.serverSearchResult.contextLine!==""){var f;e[0]!==a.serverSearchResult.contextLine?(f=[n.jsx(n.Fragment,{children:a.serverSearchResult.contextLine})],e[0]=a.serverSearchResult.contextLine,e[1]=f):f=e[1];a=f;break bb0}e[2]!==b?(f=b.filter(t),e[2]=b,e[3]=f):f=e[3];b=f;if(b.length>0){e[4]!==b?(f=n.jsx(c("BaseMiddotSeparator.react"),{children:b}),e[4]=b,e[5]=f):f=e[5];a=f;break bb0}a=null}return a}function t(a){return a!=null}function u(a){if(a.type===d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.ParticipantAndContact){var b=a.contact,e=a.participant,f=b.blockedByViewerStatus,g=b.contactTypeExact,h=b.gender,i=b.name,j=b.secondaryName,k=b.waConnectStatus,n=e.groupParticipantJoinState,o=e.isSuperAdmin;e=e.subscribeSource;return{gender:c("LSContactGenderToGenderConst")(h),isBlocked:!(l||(l=d("I64"))).equal(f,(m||(m=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED)),isInvitedByViewer:l.equal(n,m.ofNumber(c("LSGroupParticipantJoinState").INVITED)),isSuperAdmin:o===!0,name:i,nonWaAddressable:l.equal(k,m.ofNumber(c("LSWhatsAppConnectStatus").WHATSAPP_NOT_ADDRESSABLE)),profilePictureUrl:c("getLSMediaContactProfilePictureUrl")(b),secondaryName:j!=null&&d("MWLSContactTypeExactUtils").isIgContact(g)?j:null,subscribeSource:e!=null?e:null,username:b.username}}if(a.type===d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.CommunityMember){h=a.communityMember;f=h.isBlocked;n=h.name;o=h.nickname;i=h.profilePictureUrl;k=h.subtitle;return{gender:c("GenderConst").NOT_A_PERSON,isBlocked:f!=null?f:!1,isInvitedByViewer:!1,isSuperAdmin:!1,name:o!=null?o:n,nonWaAddressable:!1,profilePictureUrl:i!=null?i:"<PLACEHOLDER>",secondaryName:o!=null?n:null,subscribeSource:null,subtitle:k}}if(a.type===d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.BroadcastChannelParticipant){g=a.participant;j=g.isBlocked;e=g.name;b=g.nickname;h=g.profilePictureUrl;f=g.profilePictureUrlFallback;return{gender:c("GenderConst").NOT_A_PERSON,isBlocked:j!=null?j:!1,isInvitedByViewer:!1,isSuperAdmin:!1,name:b!=null?b:e,nonWaAddressable:!1,profilePictureUrl:(i=h!=null?h:f)!=null?i:"<PLACEHOLDER>",secondaryName:null,subscribeSource:null}}o=a.serverSearchResult;n=o.displayName;k=o.profilePicUrl;return{gender:c("GenderConst").NOT_A_PERSON,isBlocked:!(l||(l=d("I64"))).equal(o.blockedByViewerStatus,(m||(m=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED)),isInvitedByViewer:!1,isSuperAdmin:!1,name:n,nonWaAddressable:!1,profilePictureUrl:k!=null?k:"<PLACEHOLDER>",secondaryName:null,subscribeSource:null}}function v(a,b,c,e,f,g,i){var j,k,l;j=(j=d("MWGroupMembershipListItem").isAdmin(a))!=null?j:!1;k=(k=d("MWGroupMembershipListItem").isModerator(a))!=null?k:!1;l=(l=d("MWGroupMembershipListItem").isHost(a))!=null?l:!1;a=u(a);var m=a.isInvitedByViewer,n=a.isSuperAdmin,r=a.nonWaAddressable,s=a.subscribeSource;a=a.subtitle;if(b&&r&&!m)return h._(/*BTDS*/"Pending").toString();if(b&&!r&&m)return h._(/*BTDS*/"Invited by you").toString();if(s!=null&&n)return c?o:s;if(j&&e)return o;if(k&&g)return p;if(l&&f)return q;return c&&i&&a!=null?a:null}function w(a){var b=d("react-compiler-runtime").c(7),e,f,g;b[0]!==a?(e=a.children,f=a.isDisabled,g=babelHelpers.objectWithoutPropertiesLoose(a,i),b[0]=a,b[1]=e,b[2]=f,b[3]=g):(e=b[1],f=b[2],g=b[3]);if(f)return e;b[4]!==e||b[5]!==g?(a=n.jsx(c("MWXPressable.react"),babelHelpers["extends"]({},g,{children:e})),b[4]=e,b[5]=g,b[6]=a):a=b[6];return a}function a(a){var b=d("react-compiler-runtime").c(65),e=a.canMessageUser,g=a.folder,i=a.isMAWParticipantSuperAdmin,k=a.isSecure,o=a.membershipListItem,p=a.onClose,q=a.showAdminIndicator,t=a.showHostIndicator,x=a.showInvitedByViewerOnly,y=a.showModeratorIndicator,z=a.thread;a=t===void 0?!1:t;t=x===void 0?!1:x;var A=(j||(j=c("useReStore")))();x=d("MWPActor.react").useActor();var B;b[0]!==o?(B=d("MWGroupMembershipListItem").contactId(o),b[0]=o,b[1]=B):B=b[1];var C=B;B=d("LSThreadBitOffset").has(66,z)&&d("MWCMThreadTypes.react").isStandardCMThread(z.threadType);var D=c("gkx")("23433")&&c("gkx")("772"),E=c("useMWNavigateToThreadFromGroupMembership")(),F;b[2]!==z.threadType?(F=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(z.threadType)&&d("MWPActor.react").isAPPlus(),b[2]=z.threadType,b[3]=F):F=b[3];F=F;var G;b[4]!==o?(G=u(o),b[4]=o,b[5]=G):G=b[5];G=G;var H=G.gender,I=G.isBlocked,J=G.isInvitedByViewer,K=G.isSuperAdmin,L=G.name,M=G.profilePictureUrl,N=G.secondaryName,O=G.subscribeSource;G=G.username;var P=d("MWCMThreadTypes.react").isJoinedCMThread(z.threadType),Q,R;b[6]!==C||b[7]!==A||b[8]!==g||b[9]!==z.threadKey?(Q=function(){g!=null&&c("promiseDone")(A.runInTransaction(function(a){return c("LSIssueCommunityAdminModerationActionsFetchStoredProcedure")(c("LSFactory")(a),{fbGroupId:g==null?void 0:g.folderId,requestId:r,source:(m||(m=d("LSIntEnum"))).ofNumber(14),targetUserId:C,threadId:z.threadKey})},"readwrite",void 0,void 0,f.id+":346"))},R=[C,A,g,z.threadKey],b[6]=C,b[7]=A,b[8]=g,b[9]=z.threadKey,b[10]=Q,b[11]=R):(Q=b[10],R=b[11]);var S=d("Int64Hooks").useCallbackInt64(Q,R);b[12]!==I?(Q=I?h._(/*BTDS*/"Blocked"):null,b[12]=I,b[13]=Q):Q=b[13];R=v(o,k,P,q,a,y,B);I=O!=null&&!K&&!P?O:null;q=D&&G!=null&&G.length?"@"+G:null;b[14]!==N||b[15]!==I||b[16]!==q||b[17]!==Q||b[18]!==R?(a=[Q,N,R,I,q],b[14]=N,b[15]=I,b[16]=q,b[17]=Q,b[18]=R,b[19]=a):a=b[19];y=s(o,a);B=k&&J&&!t;b[20]!==C||b[21]!==E||b[22]!==p?(K=function(){E(C),p()},b[20]=C,b[21]=E,b[22]=p,b[23]=K):K=b[23];P=K;O=F;if(b[24]!==(g==null?void 0:g.fbGroupId)){G=(l||(l=d("I64"))).to_string((D=g==null?void 0:g.fbGroupId)!=null?D:(l||(l=d("I64"))).zero);b[24]=g==null?void 0:g.fbGroupId;b[25]=G}else G=b[25];b[26]!==x?(N=(l||(l=d("I64"))).to_string(x),b[26]=x,b[27]=N):N=b[27];b[28]!==G||b[29]!==N?(I={groupID:G,userID:N},b[28]=G,b[29]=N,b[30]=I):I=b[30];b[31]!==g||b[32]!==i||b[33]!==o||b[34]!==p||b[35]!==z?(q={folder:g,isMAWParticipantSuperAdmin:i,membershipListItem:o,onCloseDialog:p,thread:z},b[31]=g,b[32]=i,b[33]=o,b[34]=p,b[35]=z,b[36]=q):q=b[36];b[37]!==C||b[38]!==S||b[39]!==H||b[40]!==L?(Q=function(a,b,d,e,f,g,i){return n.jsx(c("MWXTooltip.react"),{align:"middle",position:"above",tooltip:h._(/*BTDS*/"Member options"),children:n.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconDots3Horizontal"),label:h._(/*BTDS*/"_j{\"*\":\"Member settings for {name}\"}",[h._name("name",L,c("getFBTSafeGenderFromGenderConst")(H))]),onHoverIn:function(a){S(),e==null||e(a)},onHoverOut:function(){f==null||f()},onPress:function(){return b()},onPressIn:g,ref:a,size:36,testid:void 0,type:"deemphasized"})})},b[37]=C,b[38]=S,b[39]=H,b[40]=L,b[41]=Q):Q=b[41];b[42]!==I||b[43]!==q||b[44]!==Q?(R=n.jsx(c("AddOnEndOverride.react"),{children:n.jsx(c("MWXEntryPointPopoverTrigger.react"),{align:"end",entryPointParams:I,otherProps:q,popoverEntryPoint:c("MWLSGroupMembershipMenu.entrypoint"),popoverType:"menu",preloadTrigger:"button",children:Q})}),b[42]=I,b[43]=q,b[44]=Q,b[45]=R):R=b[45];a=O?void 0:P;b[46]!==e||b[47]!==L||b[48]!==M||b[49]!==a?(k=n.jsx(c("MWLSGroupMembershipMemberCellProfilePhoto.react"),{name:L,onPress:a,profilePictureUrl:M,showTooltip:e}),b[46]=e,b[47]=L,b[48]=M,b[49]=a,b[50]=k):k=b[50];b[51]!==y||b[52]!==O||b[53]!==L||b[54]!==P||b[55]!==B?(J=y!=null?n.jsx(c("MWXTextPairing.react"),{body:n.jsx(c("MWXText.react"),{color:B?"disabled":"secondary",type:"body4",children:y}),headline:n.jsx(w,{isDisabled:O,onPress:P,overlayDisabled:!0,children:n.jsx(c("MWXText.react"),{color:B?"disabled":"primary",type:"headline4",children:L})}),level:4}):n.jsx(c("MWXTextPairing.react"),{body:n.jsx(w,{isDisabled:O,onPress:P,overlayDisabled:!0,children:n.jsx(c("MWXText.react"),{align:"start",numberOfLines:1,type:"headline4",children:L})}),level:4}),b[51]=y,b[52]=O,b[53]=L,b[54]=P,b[55]=B,b[56]=J):J=b[56];b[57]!==C?(t=(l||(l=d("I64"))).to_string(C),b[57]=C,b[58]=t):t=b[58];K="mw_participant_cell_"+(l||(l=d("I64"))).to_string(C);b[59]!==R||b[60]!==k||b[61]!==J||b[62]!==t||b[63]!==K?(F=n.jsx(c("MWXListCell.react"),{addOnEnd:R,addOnEndVerticalAlign:"center",addOnStart:k,content:J,size:"medium",testid:void 0},t),b[59]=R,b[60]=k,b[61]=J,b[62]=t,b[63]=K,b[64]=F):F=b[64];return F}g["default"]=a}),226);
__d("useMAWGetGroupSuperAdmin",["Int64Hooks","MAWMiActOnActThreadReadyDeferred","cr:9779","promiseDone","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e,f){var g=d("react-compiler-runtime").c(6),i=(h||(h=c("useReStore")))(),j,k;g[0]!==i||g[1]!==e||g[2]!==f||g[3]!==a?(j=function(){if(b("cr:9779")!=null&&e){var d=b("cr:9779").sendAndReceive;c("promiseDone")(c("MAWMiActOnActThreadReadyDeferred")(i,a,"useMAWGetGroupSuperAdmin",function(a,b){return d("backend","getGroupSuperAdmin",{chatJid:b}).then(function(a){return f(a)})}))}},k=[i,e,f,a],g[0]=i,g[1]=e,g[2]=f,g[3]=a,g[4]=j,g[5]=k):(j=g[4],k=g[5]);d("Int64Hooks").useEffectInt64(j,k)}g["default"]=a}),98);
__d("MWLSGroupMembershipMemberList.react",["fbt","I64","LSGroupParticipantJoinState","LSIntEnum","LSMessagingThreadTypeUtil","MDSInfiniteScrollList.react","MWDialogTextPairing.react","MWGroupMembershipListItem","MWLSGroupMembershipMemberCell.react","MWMemberListGlimmer.react","MWPActor.react","emptyFunction","react","react-compiler-runtime","react-strict-dom","useMAWGetGroupSuperAdmin"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||(i=d("react"));b=i;b.useCallback;var m=b.useState,n={noHosts:{alignItems:"x6s0dn4",alignSelf:"xamitd3",display:"x78zum5",flexGrow:"x1iyjqo2",height:"x1egiwwb",justifyContent:"xl56j7k",width:"xdzyupr",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(26),e=a.disableScroll,f=a.doSortParticipants,g=a.folder,i=a.hasMore,k=a.isLoading,s=a.onClose,t=a.onLoadMore,u=a.participantsAndContacts,v=a.showAdmodIndicator,w=a.showAdmodsOnly,x=a.showHostsOnly,y=a.showInvitedByViewerOnly,z=a.thread;a=e===void 0?!1:e;e=f===void 0?!0:f;f=i===void 0?!1:i;i=k===void 0?!1:k;var A=s===void 0?c("emptyFunction"):s;k=t===void 0?c("emptyFunction"):t;s=m(c("emptyFunction"));var B=s[0];t=s[1];b[0]===Symbol["for"]("react.memo_cache_sentinel")?(s=d("MWPActor.react").isAPPlus(),b[0]=s):s=b[0];var C=s;if(b[1]!==e||b[2]!==u||b[3]!==w||b[4]!==x||b[5]!==y){s=w?u.filter(r):y?u.filter(q):x?u.filter(p):u;s=e?s.slice(0).sort(o):s;b[1]=e;b[2]=u;b[3]=w;b[4]=x;b[5]=y;b[6]=s}else s=b[6];e=s;b[7]!==z.threadType?(u=d("LSMessagingThreadTypeUtil").isArmadilloSecure(z.threadType),b[7]=z.threadType,b[8]=u):u=b[8];var D=u;c("useMAWGetGroupSuperAdmin")(z.threadKey,D,t);b[9]!==g||b[10]!==D||b[11]!==A||b[12]!==v||b[13]!==y||b[14]!==B||b[15]!==z?(w=function(a){var b=d("MWGroupMembershipListItem").contactId(a);return l.jsx(c("MWLSGroupMembershipMemberCell.react"),{canMessageUser:!C,folder:g,isMAWParticipantSuperAdmin:D&&B!=null?B===(j||(j=d("I64"))).to_string(b):!1,isSecure:D,membershipListItem:a,onClose:A,showAdminIndicator:v,showHostIndicator:v,showInvitedByViewerOnly:y,showModeratorIndicator:v,thread:z},(j||(j=d("I64"))).to_string(b))},b[9]=g,b[10]=D,b[11]=A,b[12]=v,b[13]=y,b[14]=B,b[15]=z,b[16]=w):w=b[16];s=w;if(e.length===0&&x&&i===!1&&f===!1){b[17]===Symbol["for"]("react.memo_cache_sentinel")?(u=h._(/*BTDS*/"Hosts lead conversations and help moderate the chat. They'll appear here once they've been added."),b[17]=u):u=b[17];b[18]===Symbol["for"]("react.memo_cache_sentinel")?(t=l.jsx(d("react-strict-dom").html.div,{style:n.noHosts,children:l.jsx(c("MWDialogTextPairing.react"),{body:u,bodyColor:"secondary",headline:h._(/*BTDS*/"No chat hosts"),textAlign:"center"})}),b[18]=t):t=b[18];return t}b[19]!==a||b[20]!==f||b[21]!==i||b[22]!==k||b[23]!==s||b[24]!==e?(w=a?e.map(s):l.jsx(c("MDSInfiniteScrollList.react"),{hasMore:f,isLoading:i,items:e,loadingIndicator:l.jsx(c("MWMemberListGlimmer.react"),{}),onLoadMore:k,renderItem:s}),b[19]=a,b[20]=f,b[21]=i,b[22]=k,b[23]=s,b[24]=e,b[25]=w):w=b[25];return w}function o(a,b){if(a.type===d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.ParticipantAndContact&&b.type===d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.ParticipantAndContact)return a.contact.name.localeCompare(b.contact.name);if(a.type===d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.CommunityMember&&b.type===d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.CommunityMember)return a.communityMember.name.localeCompare(b.communityMember.name);return a.type===d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.ServerSearchResult&&b.type===d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.ServerSearchResult?a.serverSearchResult.displayName.localeCompare(b.serverSearchResult.displayName):0}function p(a){return(a=d("MWGroupMembershipListItem").isHost(a))!=null?a:!1}function q(a){a=a.type===d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.ParticipantAndContact?a.participant.groupParticipantJoinState:(k||(k=d("LSIntEnum"))).ofNumber(c("LSGroupParticipantJoinState").MEMBER);return(j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("LSGroupParticipantJoinState").INVITED))}function r(a){var b;b=(b=d("MWGroupMembershipListItem").isAdmin(a))!=null?b:!1;a=(a=d("MWGroupMembershipListItem").isModerator(a))!=null?a:!1;return b||a}g["default"]=a}),226);
__d("MWParticipantsForBroadcastChannelUtils",["I64","Int64Hooks","LSClearDiscoverableChatsParticipantsAndRangesStoredProcedure","LSFactory","LSFetchDiscoverableChatParticipantsStoredProcedure","LSIntEnum","LSMessagingThreadTypeUtil","ReQL","ReQLSuspense","promiseDone","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;(k||d("react")).useCallback;function a(a,b){var e=d("react-compiler-runtime").c(6),g=(h||(h=c("useReStore")))(),j,k;e[0]!==g||e[1]!==b||e[2]!==a.threadKey||e[3]!==a.threadType?(j=function(){d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a.threadType)&&c("promiseDone")(g.runInTransaction(function(e){return c("LSFetchDiscoverableChatParticipantsStoredProcedure")(c("LSFactory")(e),{cursor:"",maxName:"",source:(i||(i=d("LSIntEnum"))).ofNumber(b),threadKey:a.threadKey})},"readwrite",void 0,void 0,f.id+":40"))},k=[g,b,a.threadKey,a.threadType],e[0]=g,e[1]=b,e[2]=a.threadKey,e[3]=a.threadType,e[4]=j,e[5]=k):(j=e[4],k=e[5]);d("Int64Hooks").useEffectInt64(j,k)}function b(){var a=d("react-compiler-runtime").c(2),b=(h||(h=c("useReStore")))(),e;a[0]!==b?(e=function(){return b.runInTransaction(l,"readwrite",void 0,void 0,f.id+":60")},a[0]=b,a[1]=e):e=a[1];return e}function l(a){return c("LSClearDiscoverableChatsParticipantsAndRangesStoredProcedure")(c("LSFactory")(a))}function e(a,b){var e=d("react-compiler-runtime").c(5),g=(h||(h=c("useReStore")))(),k,l;e[0]!==g.tables.discoverable_chat_participants_ranges_v2__generated||e[1]!==b||e[2]!==a?(k=function(){return d("ReQL").fromTableAscending(g.tables.discoverable_chat_participants_ranges_v2__generated).getKeyRange(a).filter(function(a){return(j||(j=d("I64"))).equal(a.source,(i||(i=d("LSIntEnum"))).ofNumber(b))})},l=[g.tables.discoverable_chat_participants_ranges_v2__generated,b,a],e[0]=g.tables.discoverable_chat_participants_ranges_v2__generated,e[1]=b,e[2]=a,e[3]=k,e[4]=l):(k=e[3],l=e[4]);return d("ReQLSuspense").useFirst(k,l,f.id+":77")}g.useFetchBroadcastChannelMembers=a;g.useClearBroadcastChannelParticipantsList=b;g.useMWParticipantsForBroadcastChannelRanges=e}),98);
__d("MWRecurringNotificationsOptinDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="23962325466719284"}),null);
__d("MWRecurringNotificationsOptinDialogTopicRegisteredQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="29265486336433064"}),null);
__d("MWThemeUtils",["I64","Int64Hooks","LSFactory","LSIntEnum","LSOptimisticUpdateThreadThemeStoredProcedure","MessengerThreadThemeGradientType","ReQL","ReQLSuspense","promiseDone","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a){var b=d("react-compiler-runtime").c(7),e=(j||(j=c("useReStore")))(),g,h;b[0]!==e||b[1]!==a?(g=function(){return a==null||a.fbid==null?d("ReQL").empty():d("ReQL").fromTableAscending(e.tables.gradient_colors).getKeyRange(a==null?void 0:a.fbid)},h=[e,a],b[0]=e,b[1]=a,b[2]=g,b[3]=h):(g=b[2],h=b[3]);g=d("ReQLSuspense").useArray(g,h,f.id+":30");if(a==null){b[4]===Symbol["for"]("react.memo_cache_sentinel")?(h=[],b[4]=h):h=b[4];return h}b[5]!==g?(h=g.filter(k),b[5]=g,b[6]=h):h=b[6];return h}function k(a){return(h||(h=d("I64"))).equal(a.type_,(i||(i=d("LSIntEnum"))).ofNumber(c("MessengerThreadThemeGradientType").MESSAGE_BUBBLE_OUTBOUND))}function b(a){var b=d("react-compiler-runtime").c(4),e=(j||(j=c("useReStore")))(),g,h;b[0]!==e||b[1]!==a?(g=function(b){a!=null&&b!=null&&c("promiseDone")(e.runInTransaction(function(d){return c("LSOptimisticUpdateThreadThemeStoredProcedure")(c("LSFactory")(d),{themeFbid:b,threadKey:a.threadKey})},"readwrite",void 0,void 0,f.id+":61"))},h=[e,a],b[0]=e,b[1]=a,b[2]=g,b[3]=h):(g=b[2],h=b[3]);return d("Int64Hooks").useCallbackInt64(g,h)}g.useMWOutgoingGradientColors=a;g.useUpdateThreadTheme=b}),98);
__d("MWV2EditPhotoUploader.react",["fbt","BaseFileSelector.react","DTSG","FBLogger","I64","Int64Hooks","LSFactory","LSUpdateThreadImageStoredProcedure","MAWLoggerUtils","Promise","QPLUserFlow","cometAsyncFetch","cometPushToast","promiseDone","qpl","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||d("react");h._(/*BTDS*/"Change photo");function a(a){var e=d("react-compiler-runtime").c(11),g=a.children,h=a.threadKey,l=a.threadType,o=(j||(j=c("useReStore")))(),p;e[0]!==o||e[1]!==h?(a=function(a,b){c("promiseDone")(o.runInTransaction(function(d){return c("LSUpdateThreadImageStoredProcedure")(c("LSFactory")(d),{imageId:a,threadImageUrl:b!=null?b:void 0,threadKey:h})},"readwrite",void 0,void 0,f.id+":54"))},p=[o,h],e[0]=o,e[1]=h,e[2]=a,e[3]=p):(a=e[2],p=e[3]);var q=d("Int64Hooks").useCallbackInt64(a,p),r=n;e[4]!==q||e[5]!==l?(a=function(a){var e=d("MAWLoggerUtils").getInstanceKey();c("QPLUserFlow").start(c("qpl")._(25310015,"1085"),{annotations:{string:{threadType:(k||(k=d("I64"))).to_string(l)}},instanceKey:e});a=a.item(0);if(a==null){c("QPLUserFlow").endFailure(c("qpl")._(25310015,"1085"),"no_file_selected",{instanceKey:e});c("FBLogger")("messenger_web_media").mustfix("file input onChange without any files?");return r()}var f=new FormData(),g=d("DTSG").getToken();f.set("images_only","true");g!=null&&f.set("fb_dtsg",g);f.set("attachment[]",a,a.name);c("promiseDone")(c("cometAsyncFetch")("/ajax/mercury/upload.php",{data:{},formData:f,method:"POST"}).then(function(a){if(a!=null&&typeof a==="object"&&a.metadata!=null&&typeof a.metadata==="object"&&a.metadata[0]!=null&&typeof a.metadata[0]==="object"&&"src"in a.metadata[0]&&typeof a.metadata[0].src==="string"&&"image_id"in a.metadata[0]&&typeof a.metadata[0].image_id==="number"){var f=a.metadata[0].src;a=(k||(k=d("I64"))).of_string(a.metadata[0].image_id.toString());a={image_id:a,src:f};c("QPLUserFlow").endSuccess(c("qpl")._(25310015,"1085"),{instanceKey:e});q(a.image_id,a.src)}else c("QPLUserFlow").endFailure(c("qpl")._(25310015,"1085"),"no_metadata_set",{instanceKey:e}),r();return(i||(i=b("Promise"))).resolve()})["catch"](function(a){c("QPLUserFlow").endFailure(c("qpl")._(25310015,"1085"),a.toString(),{instanceKey:e});r();c("FBLogger")("messenger_web_media").mustfix(a.toString());return(i||(i=b("Promise"))).resolve()}))},e[4]=q,e[5]=l,e[6]=a):a=e[6];p=a;e[7]===Symbol["for"]("react.memo_cache_sentinel")?(a=[".jpg",".png",".jpeg",".bmp",".tif",".tiff"],e[7]=a):a=e[7];e[8]!==g||e[9]!==p?(a=m.jsx(c("BaseFileSelector.react"),{accept:a,onFilesSelected:p,children:g}),e[8]=g,e[9]=p,e[10]=a):a=e[10];return a}function n(){d("cometPushToast").cometPushErrorToast({message:"Unable to set group picture"})}g["default"]=a}),226);
__d("MWXIconAccountSwitch",["MWXSvgIcon","SVGIcon","cr:22171","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22171")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconBlockCircle",["MWXSvgIcon","SVGIcon","cr:22226","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22226")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconEye",["MWXSvgIcon","SVGIcon","cr:22311","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22311")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconGlobeAmericas",["MWXSvgIcon","SVGIcon","cr:22353","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22353")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconLock",["MWXSvgIcon","SVGIcon","cr:22389","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22389")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconMenuItemThread",["MWXSvgIcon","SVGIcon","cr:22839","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgMenuItemIcon(d("SVGIcon").svgIcon(b("cr:22839")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconMessageDots",["MWXSvgIcon","SVGIcon","cr:22397","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22397")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXSwitch.react",["cr:1926","cr:5084","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["icon","size"],i,j=i||d("react");function a(a){var c=d("react-compiler-runtime").c(10),e,f,g;c[0]!==a?(e=a.icon,g=a.size,f=babelHelpers.objectWithoutPropertiesLoose(a,h),c[0]=a,c[1]=e,c[2]=f,c[3]=g):(e=c[1],f=c[2],g=c[3]);if(b("cr:5084")){c[4]!==e||c[5]!==f||c[6]!==g?(a=j.jsx(b("cr:5084"),babelHelpers["extends"]({},f,{icon:e,size:g})),c[4]=e,c[5]=f,c[6]=g,c[7]=a):a=c[7];return a}if(b("cr:1926")){c[8]!==f?(e=j.jsx(b("cr:1926"),babelHelpers["extends"]({},f)),c[8]=f,c[9]=e):e=c[9];return e}return null}g["default"]=a}),98);
__d("MessengerAccountSwitchFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{d:"M24 14c-1.613 0-3-1.141-3-3.624C21 8.351 22.263 7 24 7s3 1.35 3 3.376C27 12.86 25.613 14 24 14zM19 19c0-1.933 2.239-3.5 5-3.5s5 1.567 5 3.5a1 1 0 0 1-1 1h-8a1 1 0 0 1-1-1zM12 23c-1.613 0-3-1.141-3-3.624C9 17.351 10.263 16 12 16s3 1.351 3 3.376C15 21.86 13.613 23 12 23zM7 28c0-1.933 2.239-3.5 5-3.5s5 1.567 5 3.5a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1zM19.013 9.976c.022-.326.078-.775.21-1.263.093-.346-.153-.713-.51-.713H12a4 4 0 0 0-4 4v2.78c0 .45.552.665.856.335.39-.325.827-.584 1.296-.77a.536.536 0 0 0 .348-.49V12a1.5 1.5 0 0 1 1.5-1.5h6.475c.286 0 .518-.24.538-.524zM26.5 22a1 1 0 0 0-1 1v1a1.5 1.5 0 0 1-1.5 1.5h-4.832c-.395 0-.642.444-.494.81.149.373.253.77.299 1.19.03.275.25.5.527.5H24a4 4 0 0 0 4-4v-1a1 1 0 0 0-1-1h-.5z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerBlockCircleFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 29c6.075 0 11-4.925 11-11S24.075 7 18 7 7 11.925 7 18s4.925 11 11 11zm-7-12.5a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-1a1 1 0 0 0-1-1H11z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerEyeFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{d:"M22 18a4 4 0 1 1-8 0 4 4 0 0 1 8 0z"}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M30.577 19.38a2.451 2.451 0 0 0 0-2.76C27.487 12.07 22.057 9 18 9s-9.486 3.07-12.577 7.62a2.451 2.451 0 0 0 0 2.76C8.513 23.93 13.943 27 18 27s9.486-3.07 12.577-7.62zM24 18a6 6 0 1 1-12 0 6 6 0 0 1 12 0z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerFriendGenericCheckmarkFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{d:"M17.25 12.305C17.25 16.207 19.446 18 22 18s4.75-1.793 4.75-5.695C26.75 9.123 24.75 7 22 7s-4.75 2.123-4.75 5.305zM29.94 28c.69 0 1.06-.595 1.06-1.335C31 22.985 26.835 20 22 20s-9 2.985-9 6.665c0 .74.37 1.335 1.06 1.335h15.88zM13.865 12.502a1 1 0 0 0-1.73-1.004l-3.829 6.595a.25.25 0 0 1-.393.051l-2.206-2.206a1 1 0 0 0-1.414 1.414l3.355 3.355a1 1 0 0 0 1.572-.205l4.645-8z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerGlobeAmericasFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M23.505 22.125c0-.953-1.494-1.035-2.292-1.833-.798-.798-1.026-1.375-1.834-1.375-.807 0-1.375-.357-1.375-.917s-.595-.917-.916-.917c-.321 0-.917-.208-.917-.916 0-.708.565-.917 1.375-.917.986 0 1.386.917 2.292.917.304 0 .458-.224.458-.459 0-.516-.916-.787-.916-1.375 0-.804.859-1.317 1.375-1.833.515-.516.916-.94.916-1.833 0-.73-.968-1.687-2.291-1.687-.4 0-.459.413-.459 1.228 0 .816-.235.917-.458.917-.602 0-.986-2.077-1.834-2.077-1.69 0-4.583 1.171-4.583 3.91 0 3.654 2.302 3.677 3.667 5.042.956.956 1.375 1.601 1.375 3.208 0 1.154.53 1.905.916 2.292.388.387.459.802.459 2.75 0 .763.151.863.458.863.4 0 .734-.222 2.292-1.78 1.284-1.284 2.291-1.469 2.291-3.208zM18.005 29c-6.076 0-11-4.925-11-11s4.924-11 11-11c6.075 0 11 4.925 11 11s-4.925 11-11 11z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerLockFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12.25 15.5a.25.25 0 0 0 .25-.25V12a5.5 5.5 0 1 1 11 0v3.25c0 .138.112.25.25.25h.75a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-13a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h.75zm3 0h5.5a.25.25 0 0 0 .25-.25V12a3 3 0 1 0-6 0v3.25c0 .138.112.25.25.25z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerMessageCrossFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{d:"M7.705 28.41c-.19-.467.087-.97.444-1.327L27.867 7.366a1.25 1.25 0 1 1 1.768 1.768l-1.818 1.817c-.34.34-.384.87-.148 1.29C28.525 13.758 29 15.541 29 17.5v.003c-.001 6.103-4.607 10.57-11 10.57-1.066 0-2.08-.095-3.033-.327a4.26 4.26 0 0 0-2.39.09L8.91 28.962c-.36.099-.957.054-1.205-.552zM22.184 7.697C20.913 7.244 19.506 7 18 7 11.607 7 7 11.396 7 17.498v.002c0 1.689.27 3.245.884 4.615a.927.927 0 0 0 1.474.22L22.476 9.215c.481-.48.35-1.29-.292-1.52z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerMessageDotsFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 28.074c6.394 0 11-4.467 11-10.57v-.002c0-6.103-4.606-10.498-11-10.498-6.392 0-10.998 4.395-11 10.498v.002c.001 2.091.415 3.98 1.384 5.562.458.747.563 1.664.29 2.5l-.728 2.41c-.2.614.373 1.188.964.986l3.668-1.125a4.26 4.26 0 0 1 2.39-.09c.953.232 1.967.327 3.032.327zM13 19.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm6.5-1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm5 0a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerRestrictButtonSource",[],(function(a,b,c,d,e,f){"use strict";a="THREAD_DETAIL_SETTINGS";b="CHAT_TAB_SETTINGS";f.thread_detail_settings=a;f.chat_tab_settings=b}),66);
__d("ReadReceiptControlSettingChangedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3164");b=d("FalcoLoggerInternal").create("read_receipt_control_setting_changed",a);e=b;g["default"]=e}),98);
__d("RecurringNotificationsJsHelpers",[],(function(a,b,c,d,e,f){"use strict";a=function(a){var b=[".facebook.com",".messenger.com",".instagram.com",".whatsapp.com"];if(a==null)return!1;try{var c=new URL(a);return b.some(function(a){var b;return c==null||(b=c.hostname)==null?void 0:b.includes(a)})}catch(a){return!1}};f.isRnReferrerUriInternal=a}),66);
__d("XCometEventCreateControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/events/create/",Object.freeze({default_is_online:!1,dialog_entry_point:"others"}),void 0);b=a;g["default"]=b}),98);
__d("getLSMediaCommunityFolderCoverPictureUrl",["LSMediaUrlUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a==null)return;var b=a.coverPicUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?a.coverPicUrlFallback:a.coverPicUrl}g["default"]=a}),98);
__d("useDebouncedOnChange",["react","react-compiler-runtime","useDebounced"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.useEffect,j=b.useLayoutEffect,k=b.useRef,l=b.useState;function a(a,b,e){var f=d("react-compiler-runtime").c(20);e=e===void 0?100:e;var g=l(a),h=g[0],m=g[1],n=c("useDebounced")(b,e);f[0]!==n||f[1]!==a||f[2]!==h?(g=n.isPending()?h:a,f[0]=n,f[1]=a,f[2]=h,f[3]=g):g=f[3];var o=g;f[4]!==n?(e=function(a){n(a),m(a)},f[4]=n,f[5]=e):e=f[5];h=e;f[6]!==o||f[7]!==n||f[8]!==a||f[9]!==b?(g=function(){o!==a&&b(o),n.reset()},f[6]=o,f[7]=n,f[8]=a,f[9]=b,f[10]=g):g=f[10];var p=g,q=k(p);f[11]!==p?(e=function(){q.current=p},g=[p],f[11]=p,f[12]=e,f[13]=g):(e=f[12],g=f[13]);j(e,g);f[14]===Symbol["for"]("react.memo_cache_sentinel")?(e=function(){return function(){return q.current()}},g=[],f[14]=e,f[15]=g):(e=f[14],g=f[15]);i(e,g);f[16]!==o||f[17]!==h||f[18]!==p?(e=[o,h,p],f[16]=o,f[17]=h,f[18]=p,f[19]=e):e=f[19];return e}g["default"]=a}),98);
__d("useEBStateDBLogout",["MWEncryptedBackupsLocalStorageEntryEnum","Promise","WebStorage","cr:21222","cr:21326","getMWEncryptedBackupsIsLocalStorageSupported","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("gkx")("3952");function a(){var a,e=d("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported();a=(a=(i||(i=c("WebStorage"))).getLocalStorageForRead())==null?void 0:a.getItem(c("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_REMEMBER_BROWSER_CONSENT);e=e?a!=null:!1;if(b("cr:21326")==null)return(h||(h=b("Promise"))).resolve();b("cr:21222")==null||b("cr:21222").fireAndForget("backend","clearWorkerEBStateDBOnLogout",{hasUserGivenAutoRestoreConsent:j&&e});return(h||(h=b("Promise"))).resolve(b("cr:21326").clearEBIDBNonPersistedRows({hasUserGivenAutoRestoreConsent:j&&e}))}g.logoutEBStateDB=a}),98);
__d("useMAWSecurityAlertsPreferences",["MAWBridgeFireAndForget","MAWBridgeSendAndReceive","promiseDone","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.useEffect,j=b.useState;function a(){var a=d("react-compiler-runtime").c(10),b=j(),e=b[0],f=b[1],g;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=function(){c("promiseDone")(d("MAWBridgeSendAndReceive").sendAndReceive("backend","getSecurityAlertSettingForSelfAndContact").then(function(a){f(a)}))},g=[],a[0]=b,a[1]=g):(b=a[0],g=a[1]);i(b,g);a[2]!==e?(b=function(a){e!=null&&f(babelHelpers["extends"]({},e,{allowSecurityAlertForContact:a})),d("MAWBridgeFireAndForget").fireAndForget("backend","changeSecurityAlertSetting",{isEnableAlert:a})},a[2]=e,a[3]=b):b=a[3];g=b;a[4]!==e?(b=function(a){e!=null&&f(babelHelpers["extends"]({},e,{allowSecurityAlertForSelf:a})),d("MAWBridgeFireAndForget").fireAndForget("backend","changeSecurityAlertSettingForSelf",{isEnableSelfAlert:a})},a[4]=e,a[5]=b):b=a[5];b=b;var h;a[6]!==e||a[7]!==g||a[8]!==b?(h={onContactSecurityAlertsPreferencesChange:g,onSelfSecurityAlertsPreferencesChange:b,securityAlertsPreferences:e},a[6]=e,a[7]=g,a[8]=b,a[9]=h):h=a[9];return h}g["default"]=a}),98);
__d("useMWReadReceiptsCanBeDisabledForThread",["LSAuthorityLevel","LSIntEnum","LSMessagingThreadTypeUtil","MWPActor.react","MessagingFolderTag","ReQLSuspense","queryMWLSOtherParticipantContact","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){switch((i||(i=d("LSIntEnum"))).toNumber(a.threadType)){case 1:case 2:case 15:case 16:case 5:return!0}return!1}function k(a){switch(a){case c("MessagingFolderTag").SPAM:case c("MessagingFolderTag").PENDING:case c("MessagingFolderTag").OTHER:return!1}return!0}function a(a){var b=d("react-compiler-runtime").c(8),e=(h||(h=c("useReStore")))(),g=d("MWPActor.react").useActor(),l,m;b[0]!==g||b[1]!==e||b[2]!==a.threadKey||b[3]!==a.threadType?(l=function(){return c("queryMWLSOtherParticipantContact")(e,a.threadKey,a.threadType,g,[])},m=[a.threadKey,a.threadType,e,g],b[0]=g,b[1]=e,b[2]=a.threadKey,b[3]=a.threadType,b[4]=l,b[5]=m):(l=b[4],m=b[5]);l=d("ReQLSuspense").useFirst(l,m,f.id+":61");b[6]!==a?(m=j(a)&&k(a.folderName),b[6]=a,b[7]=m):m=b[7];b=m;m=d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)&&l==null;l=a.authorityLevel!=null&&(i||(i=d("LSIntEnum"))).toNumber(a.authorityLevel)!==c("LSAuthorityLevel").AUTHORITATIVE;return b&&!m&&!l}g["default"]=a}),98);
__d("useMWReadReceiptsPropsForThread",["fbt","I64","Int64Hooks","LSFactory","LSOptimisticToggleReadReceiptsStoredProcedure","MAWFolderUtils","MWCMGetGender","MWLSThread","MWPActor.react","ReQL","ReQLSuspense","ReadReceiptControlSettingChangedFalcoEvent","coerceMessagingThreadTypeToLSThreadType","promiseDone","queryMWLSOtherParticipantContact","react-compiler-runtime","useDebouncedOnChange","useMWIsReadReceiptsDisabledForThread","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=250;function l(a){return a?h._(/*BTDS*/"Chat members won't be able to see when you've read their messages and you won't be able to see when they've read yours."):h._(/*BTDS*/"Chat members will be able to see when you've read their messages.")}function m(a,b){var c=d("MWCMGetGender").getGender(b.gender);return a?h._(/*BTDS*/"_j{\"*\":\"{friend_name} won't be able to see when you've read their messages and you won't be able to see when they've read yours.\"}",[h._name("friend_name",(a=b.firstName)!=null?a:b.name,c)]):h._(/*BTDS*/"_j{\"*\":\"{friend_name} will be able to see when you've read their messages.\"}",[h._name("friend_name",(a=b.firstName)!=null?a:b.name,c)])}function n(a,b){return b==null?l(a):m(a,b)}function a(a){var b=d("react-compiler-runtime").c(29),e=(j||(j=c("useReStore")))(),g=c("useMWIsReadReceiptsDisabledForThread")(a),h=d("MWLSThread").useThread(a),l=d("MWPActor.react").useActor(),m;b[0]!==l||b[1]!==e||b[2]!==h||b[3]!==a?(m=function(){return(h==null?void 0:h.threadType)!=null?c("queryMWLSOtherParticipantContact")(e,a,h.threadType,l,["firstName","name","gender"]):d("ReQL").empty()},b[0]=l,b[1]=e,b[2]=h,b[3]=a,b[4]=m):m=b[4];var o=h==null?void 0:h.threadType,p;b[5]!==l||b[6]!==e||b[7]!==o||b[8]!==a?(p=[e,l,a,o],b[5]=l,b[6]=e,b[7]=o,b[8]=a,b[9]=p):p=b[9];o=d("ReQLSuspense").useFirst(m,p,f.id+":92");b[10]!==e||b[11]!==(h==null?void 0:h.parentThreadKey)||b[12]!==(h==null?void 0:h.threadType)||b[13]!==a?(m=function(b){c("ReadReceiptControlSettingChangedFalcoEvent").log(function(){return{is_account_level:!1,setting_enabled:!b,thread_folder:(h==null?void 0:h.parentThreadKey)!=null?d("MAWFolderUtils").parentThreadKeyToLsSystemFolder(h==null?void 0:h.parentThreadKey):void 0,thread_id:(i||(i=d("I64"))).to_string(a),thread_type:(h==null?void 0:h.threadType)!=null?c("coerceMessagingThreadTypeToLSThreadType")(h==null?void 0:h.threadType):void 0}}),c("promiseDone")(e.runInTransaction(function(d){return c("LSOptimisticToggleReadReceiptsStoredProcedure")(c("LSFactory")(d),{isReadReceiptsDisabled:b,threadKey:a})},"readwrite",void 0,void 0,f.id+":122"))},b[10]=e,b[11]=h==null?void 0:h.parentThreadKey,b[12]=h==null?void 0:h.threadType,b[13]=a,b[14]=m):m=b[14];p=h==null?void 0:h.threadType;var q=h==null?void 0:h.parentThreadKey,r;b[15]!==e||b[16]!==p||b[17]!==q||b[18]!==a?(r=[a,p,q,e],b[15]=e,b[16]=p,b[17]=q,b[18]=a,b[19]=r):r=b[19];var s=d("Int64Hooks").useCallbackInt64(m,r);b[20]!==s?(p=function(a){s(a)},b[20]=s,b[21]=p):p=b[21];q=c("useDebouncedOnChange")(g,p,k);m=q[0];r=q[1];b[22]!==o||b[23]!==m?(g=n(m,o),b[22]=o,b[23]=m,b[24]=g):g=b[24];b[25]!==r||b[26]!==m||b[27]!==g?(p={content:g,isReadReceiptsDisabled:m,onClick:r},b[25]=r,b[26]=m,b[27]=g,b[28]=p):p=b[28];return p}g["default"]=a}),226);
__d("useMWRedirectToOpenThreadOfDualThread",["LSIntEnum","MAWThreadCutover","react","react-compiler-runtime","useMWNavigation","useMWPCreateOneToOneThreadThenNavigate"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(h||d("react")).useCallback;function a(a){var b=d("react-compiler-runtime").c(6),e=d("MAWThreadCutover").useGetCutoverOpenThreadKey(a),f=d("MAWThreadCutover").useIsCutoverOpenThread(e),g=c("useMWNavigation")(),h=c("useMWPCreateOneToOneThreadThenNavigate")(g,"cutoverThread","dualThreadCutoverComposer"),j;b[0]!==h||b[1]!==e||b[2]!==f||b[3]!==g||b[4]!==a?(j=function(){e!=null&&f?g.openTabOrInbox({threadKey:e,threadType:(i||(i=d("LSIntEnum"))).ofNumber(1)},"cutoverThread"):h==null||h(a)},b[0]=h,b[1]=e,b[2]=f,b[3]=g,b[4]=a,b[5]=j):j=b[5];return j}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("ArmadilloReceiveWriteDbSuccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5721");b=d("FalcoLoggerInternal").create("armadillo_receive_write_db_success",a);e=b;g["default"]=e}),98);
__d("EBGetMinosWasm",["WAWasmModuleCache","bx"],(function(a,b,c,d,e,f,g){"use strict";var h=c("bx").getURL(c("bx")("31853"));a=function(){return d("WAWasmModuleCache").loadWasmModule(h)};g.getMinosWasm=a}),98);
__d("EBMinosWasm.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={},i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={},G={},H={},I={},J={},K={},L={},M={},N={},O={},P={},Q={},R={},S={},T={},U={},V={},W={},X={},Y={},Z={},$={};a.name="MinosMessageMetadata";a.internalSpec={mekId:[1,(d=d("WAProtoConst")).FLAGS.REQUIRED|d.TYPES.BYTES],timestamp:[2,d.FLAGS.REQUIRED|d.TYPES.UINT64],messageId:[3,d.FLAGS.REQUIRED|d.TYPES.STRING],threadId:[4,d.FLAGS.REQUIRED|d.TYPES.BYTES]};b.name="MinosEncryptAndSignMessageInput";b.internalSpec={transportSigningSk:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],mek:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES],plaintext:[3,d.FLAGS.REQUIRED|d.TYPES.BYTES],metadata:[4,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,a]};c.name="MinosEncryptAndSignMessageResult";c.internalSpec={ciphertext:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],signature:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES]};e.name="MinosDecryptAndVerifyMessageInput";e.internalSpec={transportSigningPk:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],mek:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES],encryptedMessageCiphertext:[3,d.FLAGS.REQUIRED|d.TYPES.BYTES],encryptedMessageSignature:[4,d.FLAGS.REQUIRED|d.TYPES.BYTES],metadata:[5,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,a]};f.name="MinosDecryptAndVerifyMessageResult";f.internalSpec={plaintext:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};h.name="MekBundle";h.internalSpec={key:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],mekId:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES],rosterHash:[3,d.FLAGS.REQUIRED|d.TYPES.BYTES]};i.name="GenerateMekInput";i.internalSpec={epochHeads:[1,d.FLAGS.REPEATED|d.TYPES.BYTES]};j.name="GenerateMekResult";j.internalSpec={mek:[1,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,h]};k.name="GenerateMekRosterHashInput";k.internalSpec={epochHeads:[1,d.FLAGS.REPEATED|d.TYPES.BYTES]};l.name="GenerateMekRosterHashResult";l.internalSpec={rosterHash:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};m.name="EncryptMekForDistributionInput";m.internalSpec={senderEpochHead:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],toMailboxPk:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES],fromKeypair:[3,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,n],mek:[4,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,h]};n.name="EncryptMekForDistributionInput$MailboxAuthKP";n.internalSpec={sk:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],pk:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES]};o.name="EncryptMekForDistributionResult";o.internalSpec={ciphertext:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};p.name="DecryptMekForDistributionInput";p.internalSpec={toMailboxSk:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],fromPk:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES],mekId:[3,d.FLAGS.REQUIRED|d.TYPES.BYTES],senderEpochHead:[4,d.FLAGS.REQUIRED|d.TYPES.BYTES],rosterHash:[5,d.FLAGS.REQUIRED|d.TYPES.BYTES],ciphertext:[6,d.FLAGS.REQUIRED|d.TYPES.BYTES]};q.name="DecryptMekForDistributionResult";q.internalSpec={mek:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};r.name="EncryptMeksForDistributionFromTransportSenderInput";r.internalSpec={mek:[1,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,h],transportSigningKp:[2,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,s],recipientMailboxEncryptionPks:[3,d.FLAGS.REPEATED|d.TYPES.BYTES],recipientEpochHeads:[4,d.FLAGS.REPEATED|d.TYPES.BYTES]};s.name="EncryptMeksForDistributionFromTransportSenderInput$TransportSigningKP";s.internalSpec={sk:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],pk:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES]};t.name="EncryptMeksForDistributionFromTransportSenderResult";t.internalSpec={encryptedMeks:[1,d.FLAGS.REPEATED|d.TYPES.BYTES],ephemeralEncryptionPk:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES],signingPk:[3,d.FLAGS.REQUIRED|d.TYPES.BYTES],signature:[4,d.FLAGS.REQUIRED|d.TYPES.BYTES]};u.name="DecryptMekForDistributionFromTransportSenderInput";u.internalSpec={mekDistribution:[1,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,v],mekId:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES],rosterHash:[3,d.FLAGS.REQUIRED|d.TYPES.BYTES],recipientEncSk:[4,d.FLAGS.REQUIRED|d.TYPES.BYTES]};v.name="DecryptMekForDistributionFromTransportSenderInput$TransportSenderMEKDistributionSingleRecipient";v.internalSpec={encryptedMek:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],ephemeralEncryptionPk:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES],signingPk:[3,d.FLAGS.REQUIRED|d.TYPES.BYTES],signature:[4,d.FLAGS.REQUIRED|d.TYPES.BYTES]};w.name="DecryptMekForDistributionFromTransportSenderResult";w.internalSpec={mek:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};x.name="WrapTransportSigningPublicKeyInput";x.internalSpec={keyBytes:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};y.name="WrapTransportSigningPublicKeyResult";y.internalSpec={prefixedKey:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};z.name="WrapTransportSigningSecretKeyInput";z.internalSpec={keyBytes:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};A.name="WrapTransportSigningSecretKeyResult";A.internalSpec={prefixedKey:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};B.name="DeriveMailboxSigningKeypairInput";B.internalSpec={exportRootKey:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],epochNumber:[2,d.FLAGS.REQUIRED|d.TYPES.UINT64]};C.name="DeriveMailboxSigningKeypairResult";C.internalSpec={mailboxSigningPublicKey:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],mailboxSigningPrivateKey:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES]};D.name="DeriveMailboxEncryptionKeypairInput";D.internalSpec={exportRootKey:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],epochNumber:[2,d.FLAGS.REQUIRED|d.TYPES.UINT64]};E.name="DeriveMailboxEncryptionKeypairResult";E.internalSpec={mailboxEncryptionPublicKey:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],mailboxEncryptionPrivateKey:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES]};F.name="DeriveMailboxAuthKeypairInput";F.internalSpec={exportRootKey:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],epochNumber:[2,d.FLAGS.REQUIRED|d.TYPES.UINT64]};G.name="DeriveMailboxAuthKeypairResult";G.internalSpec={mailboxAuthPublicKey:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],mailboxAuthPrivateKey:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES]};H.name="DeriveAttachmentAccessTokenSecretInput";H.internalSpec={mediaKey:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};I.name="DeriveAttachmentAccessTokenSecretResult";I.internalSpec={attachmentAccessTokenSecret:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};J.name="DeriveAttachmentPrimaryKeySecretInput";J.internalSpec={mediaKey:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};K.name="DeriveAttachmentPrimaryKeySecretResult";K.internalSpec={attachmentPrimaryKeySecret:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};L.name="EpochPublicData";L.internalSpec={epochNumber:[1,d.FLAGS.REQUIRED|d.TYPES.UINT64],userFbid:[2,d.FLAGS.REQUIRED|d.TYPES.STRING],mailboxSigningPk:[3,d.FLAGS.REQUIRED|d.TYPES.BYTES],mailboxEncryptionPk:[4,d.FLAGS.REQUIRED|d.TYPES.BYTES],mailboxAuthPk:[5,d.FLAGS.REQUIRED|d.TYPES.BYTES],previousEpochHead:[6,d.TYPES.BYTES]};M.name="EpochSignatures";M.internalSpec={selfSignature:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],prevSignature:[2,d.TYPES.BYTES]};N.name="MinosSignedEpoch";N.internalSpec={epochPublicData:[1,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,L],signatures:[2,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,M],epochHead:[3,d.FLAGS.REQUIRED|d.TYPES.BYTES]};O.name="MinosOpenInitialEpochInput";O.internalSpec={userFbid:[1,d.FLAGS.REQUIRED|d.TYPES.STRING],epochNumber:[2,d.FLAGS.REQUIRED|d.TYPES.UINT64],exportRootKey:[3,d.FLAGS.REQUIRED|d.TYPES.BYTES]};P.name="MinosOpenInitialEpochResult";P.internalSpec={minosSignedEpoch:[1,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,N]};Q.name="MinosOpenEpochInput";Q.internalSpec={userFbid:[1,d.FLAGS.REQUIRED|d.TYPES.STRING],epochNumber:[2,d.FLAGS.REQUIRED|d.TYPES.UINT64],exportRootKey:[3,d.FLAGS.REQUIRED|d.TYPES.BYTES],previousExportRootKey:[4,d.FLAGS.REQUIRED|d.TYPES.BYTES],previousEpochNumber:[5,d.FLAGS.REQUIRED|d.TYPES.UINT64],previousEpochHead:[6,d.FLAGS.REQUIRED|d.TYPES.BYTES]};R.name="MinosOpenEpochResult";R.internalSpec={minosSignedEpoch:[1,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,N]};S.name="MinosValidateEpochInput";S.internalSpec={epochPublicData:[1,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,L],previousEpochPublicData:[2,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,L],signatures:[3,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,M]};T.name="MinosValidateEpochResult";T.internalSpec={valid:[1,d.TYPES.BOOL],errorMessage:[2,d.TYPES.STRING],__oneofs__:{result:["valid","errorMessage"]}};U.name="MinosVerifySingleEpochInput";U.internalSpec={epochPublicData:[1,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,L],signature:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES]};V.name="MinosVerifySingleEpochResult";V.internalSpec={valid:[1,d.FLAGS.REQUIRED|d.TYPES.BOOL]};W.name="MinosThreadIdFromOneToOneThreadInput";W.internalSpec={actThreadId:[1,d.FLAGS.REQUIRED|d.TYPES.STRING],selfFbid:[2,d.FLAGS.REQUIRED|d.TYPES.STRING]};X.name="MinosThreadIdFromOneToOneThreadResult";X.internalSpec={threadId:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};Y.name="MinosThreadIdFromActThreadIdInput";Y.internalSpec={actThreadId:[1,d.FLAGS.REQUIRED|d.TYPES.STRING]};Z.name="MinosThreadIdFromActThreadIdResult";Z.internalSpec={threadId:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};$.name="MinosCommand";$.internalSpec={encryptAndSignMessage:[1,d.TYPES.MESSAGE,b],decryptAndVerifyMessage:[2,d.TYPES.MESSAGE,e],generateMek:[3,d.TYPES.MESSAGE,i],generateMekRosterHash:[4,d.TYPES.MESSAGE,k],encryptMekForDistribution:[5,d.TYPES.MESSAGE,m],decryptMekForDistribution:[6,d.TYPES.MESSAGE,p],encryptMeksForDistributionFromTransportSender:[7,d.TYPES.MESSAGE,r],decryptMekForDistributionFromTransportSender:[8,d.TYPES.MESSAGE,u],wrapTransportSigningPublicKey:[9,d.TYPES.MESSAGE,x],wrapTransportSigningSecretKey:[10,d.TYPES.MESSAGE,z],deriveMailboxSigningKeypair:[11,d.TYPES.MESSAGE,B],deriveMailboxEncryptionKeypair:[12,d.TYPES.MESSAGE,D],deriveMailboxAuthKeypair:[13,d.TYPES.MESSAGE,F],deriveAttachmentAccessTokenSecret:[14,d.TYPES.MESSAGE,H],deriveAttachmentPrimaryKeySecret:[15,d.TYPES.MESSAGE,J],minosOpenInitialEpoch:[16,d.TYPES.MESSAGE,O],minosOpenEpoch:[17,d.TYPES.MESSAGE,Q],minosValidateEpoch:[18,d.TYPES.MESSAGE,S],minosVerifySingleEpoch:[19,d.TYPES.MESSAGE,U],minosThreadIdFromOneToOneThread:[20,d.TYPES.MESSAGE,W],minosThreadIdFromActThreadId:[21,d.TYPES.MESSAGE,Y],__oneofs__:{commandInput:["encryptAndSignMessage","decryptAndVerifyMessage","generateMek","generateMekRosterHash","encryptMekForDistribution","decryptMekForDistribution","encryptMeksForDistributionFromTransportSender","decryptMekForDistributionFromTransportSender","wrapTransportSigningPublicKey","wrapTransportSigningSecretKey","deriveMailboxSigningKeypair","deriveMailboxEncryptionKeypair","deriveMailboxAuthKeypair","deriveAttachmentAccessTokenSecret","deriveAttachmentPrimaryKeySecret","minosOpenInitialEpoch","minosOpenEpoch","minosValidateEpoch","minosVerifySingleEpoch","minosThreadIdFromOneToOneThread","minosThreadIdFromActThreadId"]}};g.MinosMessageMetadataSpec=a;g.MinosEncryptAndSignMessageInputSpec=b;g.MinosEncryptAndSignMessageResultSpec=c;g.MinosDecryptAndVerifyMessageInputSpec=e;g.MinosDecryptAndVerifyMessageResultSpec=f;g.MekBundleSpec=h;g.GenerateMekInputSpec=i;g.GenerateMekResultSpec=j;g.GenerateMekRosterHashInputSpec=k;g.GenerateMekRosterHashResultSpec=l;g.EncryptMekForDistributionInputSpec=m;g.EncryptMekForDistributionInput$MailboxAuthKPSpec=n;g.EncryptMekForDistributionResultSpec=o;g.DecryptMekForDistributionInputSpec=p;g.DecryptMekForDistributionResultSpec=q;g.EncryptMeksForDistributionFromTransportSenderInputSpec=r;g.EncryptMeksForDistributionFromTransportSenderInput$TransportSigningKPSpec=s;g.EncryptMeksForDistributionFromTransportSenderResultSpec=t;g.DecryptMekForDistributionFromTransportSenderInputSpec=u;g.DecryptMekForDistributionFromTransportSenderInput$TransportSenderMEKDistributionSingleRecipientSpec=v;g.DecryptMekForDistributionFromTransportSenderResultSpec=w;g.WrapTransportSigningPublicKeyInputSpec=x;g.WrapTransportSigningPublicKeyResultSpec=y;g.WrapTransportSigningSecretKeyInputSpec=z;g.WrapTransportSigningSecretKeyResultSpec=A;g.DeriveMailboxSigningKeypairInputSpec=B;g.DeriveMailboxSigningKeypairResultSpec=C;g.DeriveMailboxEncryptionKeypairInputSpec=D;g.DeriveMailboxEncryptionKeypairResultSpec=E;g.DeriveMailboxAuthKeypairInputSpec=F;g.DeriveMailboxAuthKeypairResultSpec=G;g.DeriveAttachmentAccessTokenSecretInputSpec=H;g.DeriveAttachmentAccessTokenSecretResultSpec=I;g.DeriveAttachmentPrimaryKeySecretInputSpec=J;g.DeriveAttachmentPrimaryKeySecretResultSpec=K;g.EpochPublicDataSpec=L;g.EpochSignaturesSpec=M;g.MinosSignedEpochSpec=N;g.MinosOpenInitialEpochInputSpec=O;g.MinosOpenInitialEpochResultSpec=P;g.MinosOpenEpochInputSpec=Q;g.MinosOpenEpochResultSpec=R;g.MinosValidateEpochInputSpec=S;g.MinosValidateEpochResultSpec=T;g.MinosVerifySingleEpochInputSpec=U;g.MinosVerifySingleEpochResultSpec=V;g.MinosThreadIdFromOneToOneThreadInputSpec=W;g.MinosThreadIdFromOneToOneThreadResultSpec=X;g.MinosThreadIdFromActThreadIdInputSpec=Y;g.MinosThreadIdFromActThreadIdResultSpec=Z;g.MinosCommandSpec=$}),98);
__d("WASIContext",[],(function(a,b,c,d,e,f){"use strict";a=function(a){var b;this.fs=(b=a==null?void 0:a.fs)!=null?b:{};this.args=(b=a==null?void 0:a.args)!=null?b:[];this.env=(b=a==null?void 0:a.env)!=null?b:{};this.stdin=(b=a==null?void 0:a.stdin)!=null?b:function(){return null};this.stdout=(b=a==null?void 0:a.stdout)!=null?b:function(){};this.stderr=(b=a==null?void 0:a.stderr)!=null?b:function(){};this.debug=a==null?void 0:a.debug;this.isTTY=!!(a!=null&&a.isTTY)};f.WASIContext=a}),66);
__d("WASISnapshotPreview1",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({SUCCESS:0,E2BIG:1,EACCESS:2,EADDRINUSE:3,EADDRNOTAVAIL:4,EAFNOSUPPORT:5,EAGAIN:6,EALREADY:7,EBADF:8,EBADMSG:9,EBUSY:10,ECANCELED:11,ECHILD:12,ECONNABORTED:13,ECONNREFUSED:14,ECONNRESET:15,EDEADLK:16,EDESTADDRREQ:17,EDOM:18,EDQUOT:19,EEXIST:20,EFAULT:21,EFBIG:22,EHOSTUNREACH:23,EIDRM:24,EILSEQ:25,EINPROGRESS:26,EINTR:27,EINVAL:28,EIO:29,EISCONN:30,EISDIR:31,ELOOP:32,EMFILE:33,EMLINK:34,EMSGSIZE:35,EMULTIHOP:36,ENAMETOOLONG:37,ENETDOWN:38,ENETRESET:39,ENETUNREACH:40,ENFILE:41,ENOBUFS:42,ENODEV:43,ENOENT:44,ENOEXEC:45,ENOLCK:46,ENOLINK:47,ENOMEM:48,ENOMSG:49,ENOPROTOOPT:50,ENOSPC:51,ENOSYS:52,ENOTCONN:53,ENOTDIR:54,ENOTEMPTY:55,ENOTRECOVERABLE:56,ENOTSOCK:57,ENOTSUP:58,ENOTTY:59,ENXIO:60,EOVERFLOW:61,EOWNERDEAD:62,EPERM:63,EPIPE:64,EPROTO:65,EPROTONOSUPPORT:66,EPROTOTYPE:67,ERANGE:68,EROFS:69,ESPIPE:70,ESRCH:71,ESTALE:72,ETIMEDOUT:73,ETXTBSY:74,EXDEV:75,ENOTCAPABLE:76});d=(c=b("$InternalEnum"))({REALTIME:0,MONOTONIC:1,PROCESS_CPUTIME_ID:2,THREAD_CPUTIME_ID:3});e=c({SET:0,CUR:1,END:2});b=c({UNKNOWN:0,BLOCK_DEVICE:1,CHARACTER_DEVICE:2,DIRECTORY:3,REGULAR_FILE:4,SOCKET_DGRAM:5,SOCKET_STREAM:6,SYMBOLIC_LINK:7});var g=c({DIR:0});c=c({CLOCK:0,FD_READ:1,FD_WRITE:2});var h={SYMLINK_FOLLOW:1<<0},i={CREAT:1<<0,DIRECTORY:1<<1,EXCL:1<<2,TRUNC:1<<3},j={APPEND:1<<0,DSYNC:1<<1,NONBLOCK:1<<2,RSYNC:1<<3,SYNC:1<<4},k={FD_DATASYNC:BigInt(1)<<BigInt(0),FD_READ:BigInt(1)<<BigInt(1),FD_SEEK:BigInt(1)<<BigInt(2),FD_FDSTAT_SET_FLAGS:BigInt(1)<<BigInt(3),FD_SYNC:BigInt(1)<<BigInt(4),FD_TELL:BigInt(1)<<BigInt(5),FD_WRITE:BigInt(1)<<BigInt(6),FD_ADVISE:BigInt(1)<<BigInt(7),FD_ALLOCATE:BigInt(1)<<BigInt(8),PATH_CREATE_DIRECTORY:BigInt(1)<<BigInt(9),PATH_CREATE_FILE:BigInt(1)<<BigInt(10),PATH_LINK_SOURCE:BigInt(1)<<BigInt(11),PATH_LINK_TARGET:BigInt(1)<<BigInt(12),PATH_OPEN:BigInt(1)<<BigInt(13),FD_READDIR:BigInt(1)<<BigInt(14),PATH_READLINK:BigInt(1)<<BigInt(15),PATH_RENAME_SOURCE:BigInt(1)<<BigInt(16),PATH_RENAME_TARGET:BigInt(1)<<BigInt(17),PATH_FILESTAT_GET:BigInt(1)<<BigInt(18),PATH_FILESTAT_SET_SIZE:BigInt(1)<<BigInt(19),PATH_FILESTAT_SET_TIMES:BigInt(1)<<BigInt(20),FD_FILESTAT_GET:BigInt(1)<<BigInt(21),FD_FILESTAT_SET_SIZE:BigInt(1)<<BigInt(22),FD_FILESTAT_SET_TIMES:BigInt(1)<<BigInt(23),PATH_SYMLINK:BigInt(1)<<BigInt(24),PATH_REMOVE_DIRECTORY:BigInt(1)<<BigInt(25),PATH_UNLINK_FILE:BigInt(1)<<BigInt(26),POLL_FD_READWRITE:BigInt(1)<<BigInt(27),SOCK_SHUTDOWN:BigInt(1)<<BigInt(28),SOCK_ACCEPT:BigInt(1)<<BigInt(29)},l={ATIM:1<<0,ATIM_NOW:1<<1,MTIM:1<<2,MTIM_NOW:1<<3},m={SUBSCRIPTION_CLOCK_ABSTIME:1<<0},n={FD_READWRITE_HANGUP:1<<0},o=64,p=48,q=32;f.RESULT=a;f.Clock=d;f.Whence=e;f.FileType=b;f.PreopenType=g;f.EventType=c;f.LookupFlags=h;f.OpenFlags=i;f.FileDescriptorFlags=j;f.RightsFlags=k;f.FileStatTimestampFlags=l;f.SubscriptionClockFlags=m;f.EventReadWriteFlags=n;f.FILESTAT_SIZE=o;f.SUBSCRIPTION_SIZE=p;f.EVENT_SIZE=q}),66);
__d("WATextEncoding",[],(function(a,b,c,d,e,f){"use strict";e=TextEncoder;var g=TextDecoder,h=e,i=g;function a(){return new h()}function b(){return new i()}function c(a){h=a}function d(a){i=a}f.newTextEncoder=a;f.newTextDecoder=b;f.setTextEncoderClass=c;f.setTextDecoderClass=d}),66);
__d("WASIDrive",["WASISnapshotPreview1","WATextEncoding"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.nextFD=10,this.openMap=new Map(),this.fs=babelHelpers["extends"]({},a),this.openMap.set(3,new j(this.fs,"/"))}var b=a.prototype;b.$1=function(a,b,c){a=new h(a,c);b&&(a.buffer=new Uint8Array(new ArrayBuffer(1024),0,0));c=this.nextFD;this.openMap.set(c,a);this.nextFD++;return[d("WASISnapshotPreview1").RESULT.SUCCESS,c]};b.$2=function(a,b){a=new j(a,b);b=this.nextFD;this.openMap.set(b,a);this.nextFD++;return[d("WASISnapshotPreview1").RESULT.SUCCESS,b]};b.$3=function(a,b){return b==="."?!0:a.containsDirectory(b)};b.open=function(a,b,c,e){var f,g=!!(c&(f=d("WASISnapshotPreview1")).OpenFlags.CREAT),h=!!(c&f.OpenFlags.DIRECTORY),i=!!(c&f.OpenFlags.EXCL);c=!!(c&f.OpenFlags.TRUNC);f=this.openMap.get(a);if(!(f instanceof j))return[d("WASISnapshotPreview1").RESULT.EBADF];if(f.containsFile(b)){if(h)return[d("WASISnapshotPreview1").RESULT.ENOTDIR];if(i)return[d("WASISnapshotPreview1").RESULT.EEXIST];a=f.get(b);return this.$1(a,c,e)}else if(this.$3(f,b)){if(b===".")return this.$2(this.fs,"/");var k="/"+b+"/";h=Object.entries(this.fs).filter(function(a){a=a[0];return a.startsWith(k)});return this.$2(Object.fromEntries(h),k)}else{if(g){i=f.fullPath(b);this.fs[i]={path:i,mode:"binary",content:new Uint8Array(0),timestamps:{access:new Date(),modification:new Date(),change:new Date()}};return this.$1(this.fs[i],c,e)}return[d("WASISnapshotPreview1").RESULT.ENOTCAPABLE]}};b.close=function(a){if(!this.openMap.has(a))return d("WASISnapshotPreview1").RESULT.EBADF;var b=this.openMap.get(a);b instanceof h&&b.sync();this.openMap["delete"](a);return d("WASISnapshotPreview1").RESULT.SUCCESS};b.read=function(a,b){a=this.openMap.get(a);return!a||a instanceof j?[d("WASISnapshotPreview1").RESULT.EBADF]:[d("WASISnapshotPreview1").RESULT.SUCCESS,a.read(b)]};b.pread=function(a,b,c){a=this.openMap.get(a);return!a||a instanceof j?[d("WASISnapshotPreview1").RESULT.EBADF]:[d("WASISnapshotPreview1").RESULT.SUCCESS,a.pread(b,c)]};b.write=function(a,b){a=this.openMap.get(a);if(!a||a instanceof j)return d("WASISnapshotPreview1").RESULT.EBADF;a.write(b);return d("WASISnapshotPreview1").RESULT.SUCCESS};b.pwrite=function(a,b,c){a=this.openMap.get(a);if(!a||a instanceof j)return d("WASISnapshotPreview1").RESULT.EBADF;a.pwrite(b,c);return d("WASISnapshotPreview1").RESULT.SUCCESS};b.sync=function(a){a=this.openMap.get(a);if(!a||a instanceof j)return d("WASISnapshotPreview1").RESULT.EBADF;a.sync();return d("WASISnapshotPreview1").RESULT.SUCCESS};b.seek=function(a,b,c){a=this.openMap.get(a);return!a||a instanceof j?[d("WASISnapshotPreview1").RESULT.EBADF]:[d("WASISnapshotPreview1").RESULT.SUCCESS,a.seek(b,c)]};b.tell=function(a){a=this.openMap.get(a);return!a||a instanceof j?[d("WASISnapshotPreview1").RESULT.EBADF]:[d("WASISnapshotPreview1").RESULT.SUCCESS,a.tell()]};b.renumber=function(a,b){if(!this.exists(a)||!this.exists(b))return d("WASISnapshotPreview1").RESULT.EBADF;if(a===b)return d("WASISnapshotPreview1").RESULT.SUCCESS;this.close(b);a=this.openMap.get(a);this.openMap.set(b,a);return d("WASISnapshotPreview1").RESULT.SUCCESS};b.unlink=function(a,b){a=this.openMap.get(a);if(!(a instanceof j))return d("WASISnapshotPreview1").RESULT.EBADF;if(!a.contains(b))return d("WASISnapshotPreview1").RESULT.ENOENT;for(var c of Object.keys(this.fs))(c===a.fullPath(b)||c.startsWith(a.fullPath(b)+"/"))&&delete this.fs[c];return d("WASISnapshotPreview1").RESULT.SUCCESS};b.rename=function(a,b,c,e){a=this.openMap.get(a);c=this.openMap.get(c);if(!(a instanceof j)||!(c instanceof j))return d("WASISnapshotPreview1").RESULT.EBADF;if(!a.contains(b))return d("WASISnapshotPreview1").RESULT.ENOENT;if(c.contains(e))return d("WASISnapshotPreview1").RESULT.EEXIST;a=a.fullPath(b);b=c.fullPath(e);for(c of Object.keys(this.fs))if(c.startsWith(a)){e=c.replace(a,b);this.fs[e]=this.fs[c];this.fs[e].path=e;delete this.fs[c]}return d("WASISnapshotPreview1").RESULT.SUCCESS};b.list=function(a){a=this.openMap.get(a);return!(a instanceof j)?[d("WASISnapshotPreview1").RESULT.EBADF]:[d("WASISnapshotPreview1").RESULT.SUCCESS,a.list()]};b.stat=function(a){a=this.openMap.get(a);return!(a instanceof h)?[d("WASISnapshotPreview1").RESULT.EBADF]:[d("WASISnapshotPreview1").RESULT.SUCCESS,a.stat()]};b.pathStat=function(a,b){a=this.openMap.get(a);if(!(a instanceof j))return[d("WASISnapshotPreview1").RESULT.EBADF];if(a.containsFile(b)){var c=a.fullPath(b);c=new h(this.fs[c],0).stat();return[d("WASISnapshotPreview1").RESULT.SUCCESS,c]}else if(this.$3(a,b)){if(b===".")return[d("WASISnapshotPreview1").RESULT.SUCCESS,new j(this.fs,"/").stat()];var e="/"+b+"/";c=Object.entries(this.fs).filter(function(a){a=a[0];return a.startsWith(e)});a=new j(Object.fromEntries(c),e).stat();return[d("WASISnapshotPreview1").RESULT.SUCCESS,a]}else return[d("WASISnapshotPreview1").RESULT.ENOTCAPABLE]};b.setFlags=function(a,b){a=this.openMap.get(a);if(a instanceof h){a.setFlags(b);return d("WASISnapshotPreview1").RESULT.SUCCESS}else return d("WASISnapshotPreview1").RESULT.EBADF};b.setSize=function(a,b){a=this.openMap.get(a);if(a instanceof h){a.setSize(Number(b));return d("WASISnapshotPreview1").RESULT.SUCCESS}else return d("WASISnapshotPreview1").RESULT.EBADF};b.setAccessTime=function(a,b){a=this.openMap.get(a);if(a instanceof h){a.setAccessTime(b);return d("WASISnapshotPreview1").RESULT.SUCCESS}else return d("WASISnapshotPreview1").RESULT.EBADF};b.setModificationTime=function(a,b){a=this.openMap.get(a);if(a instanceof h){a.setModificationTime(b);return d("WASISnapshotPreview1").RESULT.SUCCESS}else return d("WASISnapshotPreview1").RESULT.EBADF};b.pathSetAccessTime=function(a,b,c){a=this.openMap.get(a);if(!(a instanceof j))return d("WASISnapshotPreview1").RESULT.EBADF;a=a.get(b);if(a==null)return d("WASISnapshotPreview1").RESULT.ENOTCAPABLE;b=new h(a,0);b.setAccessTime(c);b.sync();return d("WASISnapshotPreview1").RESULT.SUCCESS};b.pathSetModificationTime=function(a,b,c){a=this.openMap.get(a);if(!(a instanceof j))return d("WASISnapshotPreview1").RESULT.EBADF;a=a.get(b);if(a==null)return d("WASISnapshotPreview1").RESULT.ENOTCAPABLE;b=new h(a,0);b.setModificationTime(c);b.sync();return d("WASISnapshotPreview1").RESULT.SUCCESS};b.pathCreateDir=function(a,b){a=this.openMap.get(a);if(!(a instanceof j))return d("WASISnapshotPreview1").RESULT.EBADF;if(a.contains(b))return d("WASISnapshotPreview1").RESULT.ENOTCAPABLE;a=a.fullPath(b)+"/.runno";this.fs[a]={path:a,timestamps:{access:new Date(),modification:new Date(),change:new Date()},mode:"string",content:""};return d("WASISnapshotPreview1").RESULT.SUCCESS};b.exists=function(a){return this.openMap.has(a)};b.fileType=function(a){a=this.openMap.get(a);if(!a)return d("WASISnapshotPreview1").FileType.UNKNOWN;else if(a instanceof h)return d("WASISnapshotPreview1").FileType.REGULAR_FILE;else return d("WASISnapshotPreview1").FileType.DIRECTORY};b.fileFdflags=function(a){a=this.openMap.get(a);if(a instanceof h)return a.fdflags;else return 0};return a}();var h=function(){function a(a,b){this.$1=BigInt(0);this.isDirty=!1;this.file=a;if(this.file.mode==="string"){a=this.file.content;var c=d("WATextEncoding").newTextEncoder();this.buffer=c.encode(a)}else this.buffer=this.file.content;this.fdflags=b;this.flagAppend=!!(b&d("WASISnapshotPreview1").FileDescriptorFlags.APPEND);this.flagDSync=!!(b&d("WASISnapshotPreview1").FileDescriptorFlags.DSYNC);this.flagNonBlock=!!(b&d("WASISnapshotPreview1").FileDescriptorFlags.NONBLOCK);this.flagRSync=!!(b&d("WASISnapshotPreview1").FileDescriptorFlags.RSYNC);this.flagSync=!!(b&d("WASISnapshotPreview1").FileDescriptorFlags.SYNC)}var b=a.prototype;b.getOffset=function(){return Number(this.$1)};b.read=function(a){a=this.buffer.subarray(this.getOffset(),this.getOffset()+a);this.$1+=BigInt(a.length);return a};b.pread=function(a,b){return this.buffer.subarray(b,b+a)};b.write=function(a){this.isDirty=!0;if(this.flagAppend){var b=this.buffer.length;this.$2(b+a.byteLength);this.buffer.set(a,b)}else{b=Math.max(this.getOffset()+a.byteLength,this.buffer.byteLength);this.$2(b);this.buffer.set(a,this.getOffset());this.$1+=BigInt(a.byteLength)}(this.flagDSync||this.flagSync)&&this.sync()};b.pwrite=function(a,b){this.isDirty=!0;if(this.flagAppend){var c=this.buffer.length;this.$2(c+a.byteLength);this.buffer.set(a,c)}else{c=Math.max(b+a.byteLength,this.buffer.byteLength);this.$2(c);this.buffer.set(a,b)}(this.flagDSync||this.flagSync)&&this.sync()};b.sync=function(){if(!this.isDirty)return;this.isDirty=!1;if(this.file.mode==="binary"){this.file.content=new Uint8Array(this.buffer);return}var a=d("WATextEncoding").newTextDecoder();this.file.content=a.decode(this.buffer);return};b.seek=function(a,b){switch(b){case d("WASISnapshotPreview1").Whence.SET:this.$1=a;break;case d("WASISnapshotPreview1").Whence.CUR:this.$1+=a;break;case d("WASISnapshotPreview1").Whence.END:this.$1=BigInt(this.buffer.length)+a;break}return this.$1};b.tell=function(){return this.$1};b.stat=function(){return{path:this.file.path,timestamps:this.file.timestamps,type:d("WASISnapshotPreview1").FileType.REGULAR_FILE,byteLength:this.buffer.length}};b.setFlags=function(a){this.fdflags=a};b.setSize=function(a){this.$2(a)};b.setAccessTime=function(a){this.file.timestamps.access=a};b.setModificationTime=function(a){this.file.timestamps.modification=a};b.$2=function(a){if(a<=this.buffer.buffer.byteLength){this.buffer=new Uint8Array(this.buffer.buffer,0,a);return}var b;this.buffer.buffer.byteLength===0?b=new ArrayBuffer(a<1024?1024:a*2):a>this.buffer.buffer.byteLength*2?b=new ArrayBuffer(a*2):b=new ArrayBuffer(this.buffer.buffer.byteLength*2);b=new Uint8Array(b,0,a);b.set(this.buffer);this.buffer=b};return a}();function i(a,b){b=b.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&");b=new RegExp("^"+b);return a.replace(b,"")}var j=function(){function a(a,b){this.dir=a,this.prefix=b}var b=a.prototype;b.containsFile=function(a){for(var b of Object.keys(this.dir)){var c=i(b,this.prefix);if(c===a)return!0}return!1};b.containsDirectory=function(a){for(var b of Object.keys(this.dir)){var c=i(b,this.prefix);if(c.startsWith(a+"/"))return!0}return!1};b.contains=function(a){for(var b of Object.keys(this.dir)){var c=i(b,this.prefix);if(c===a||c.startsWith(a+"/"))return!0}return!1};b.get=function(a){return this.dir[this.fullPath(a)]};b.fullPath=function(a){return""+this.prefix+a};b.list=function(){var a=[],b=new Set();for(var c of Object.keys(this.dir)){var e=i(c,this.prefix);if(e.includes("/")){var f=e.split("/")[0];if(b.has(f))continue;b.add(f);a.push({name:f,type:d("WASISnapshotPreview1").FileType.DIRECTORY})}else a.push({name:e,type:d("WASISnapshotPreview1").FileType.REGULAR_FILE})}return a};b.stat=function(){return{path:this.prefix,timestamps:{access:new Date(),modification:new Date(),change:new Date()},type:d("WASISnapshotPreview1").FileType.DIRECTORY,byteLength:0}};return a}();g.WASIDrive=a}),98);
__d("WASI",["WACryptoDependencies","WASIContext","WASIDrive","WASISnapshotPreview1","WATextEncoding","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b,e=new(d("WASIContext").WASIContext)(a),f=new(d("WASIDrive").WASIDrive)(e.fs);function g(){return Object.entries(e.env).map(function(a){var b=a[0];a=a[1];return b+"="+a})}var o={args_get:function(a,c){a=a;c=c;var f=new DataView(b.buffer);for(var g of e.args){f.setUint32(a,c,!0);a+=4;var h=d("WATextEncoding").newTextEncoder().encode(g+"\0"),i=new Uint8Array(b.buffer,c,h.byteLength);i.set(h);c+=h.byteLength}return d("WASISnapshotPreview1").RESULT.SUCCESS},args_sizes_get:function(a,c){var f=e.args,g=f.reduce(function(a,b){return a+d("WATextEncoding").newTextEncoder().encode(b+"\0").byteLength},0),h=new DataView(b.buffer);h.setUint32(a,f.length,!0);h.setUint32(c,g,!0);return d("WASISnapshotPreview1").RESULT.SUCCESS},clock_res_get:function(){throw c("err")("clock_res_get is not implemented")},clock_time_get:function(a,c,e){c=d("WASISnapshotPreview1").Clock.cast(a);if(c==null)return d("WASISnapshotPreview1").RESULT.EINVAL;switch(c){case d("WASISnapshotPreview1").Clock.REALTIME:case d("WASISnapshotPreview1").Clock.MONOTONIC:case d("WASISnapshotPreview1").Clock.PROCESS_CPUTIME_ID:case d("WASISnapshotPreview1").Clock.THREAD_CPUTIME_ID:a=new DataView(b.buffer);a.setBigUint64(e,n(new Date()),!0);return d("WASISnapshotPreview1").RESULT.SUCCESS}},environ_get:function(a,c){a=a;c=c;var e=new DataView(b.buffer);for(var f of g()){e.setUint32(a,c,!0);a+=4;var h=d("WATextEncoding").newTextEncoder().encode(f+"\0"),i=new Uint8Array(b.buffer,c,h.byteLength);i.set(h);c+=h.byteLength}return d("WASISnapshotPreview1").RESULT.SUCCESS},environ_sizes_get:function(a,c){var e=g().reduce(function(a,b){return a+d("WATextEncoding").newTextEncoder().encode(b+"\0").byteLength},0),f=new DataView(b.buffer);f.setUint32(a,g().length,!0);f.setUint32(c,e,!0);return d("WASISnapshotPreview1").RESULT.SUCCESS},fd_advise:function(){throw c("err")("fd_advise is not implemented")},fd_allocate:function(){throw c("err")("fd_allocate is not implemented")},fd_close:function(a){return f.close(a)},fd_datasync:function(){throw c("err")("fd_datasync is not implemented")},fd_fdstat_get:function(a,c){if(a<3){if(e.isTTY){var g=i^d("WASISnapshotPreview1").RightsFlags.FD_SEEK^d("WASISnapshotPreview1").RightsFlags.FD_TELL;g=l(d("WASISnapshotPreview1").FileType.CHARACTER_DEVICE,0,g)}else g=l(d("WASISnapshotPreview1").FileType.CHARACTER_DEVICE,0);var h=new Uint8Array(b.buffer,c,g.byteLength);h.set(g);return d("WASISnapshotPreview1").RESULT.SUCCESS}if(!f.exists(a))return d("WASISnapshotPreview1").RESULT.EBADF;h=f.fileType(a);g=f.fileFdflags(a);a=l(h,g);h=new Uint8Array(b.buffer,c,a.byteLength);h.set(a);return d("WASISnapshotPreview1").RESULT.SUCCESS},fd_fdstat_set_flags:function(a,b){return f.setFlags(a,b)},fd_fdstat_set_rights:function(){return d("WASISnapshotPreview1").RESULT.SUCCESS},fd_filestat_get:function(a,c){if(a<3){var e;switch(a){case 0:e="/dev/stdin";break;case 1:e="/dev/stdout";break;case 2:e="/dev/stderr";break;default:e="/dev/undefined";break}var g=k({path:e,byteLength:0,timestamps:{access:new Date(),modification:new Date(),change:new Date()},type:d("WASISnapshotPreview1").FileType.CHARACTER_DEVICE}),h=new Uint8Array(b.buffer,c,g.byteLength);h.set(g);return d("WASISnapshotPreview1").RESULT.SUCCESS}h=f.stat(a);if(h.length===1)return h[0];g=h[1];a=k(g);h=new Uint8Array(b.buffer,c,a.byteLength);h.set(a);return d("WASISnapshotPreview1").RESULT.SUCCESS},fd_filestat_set_size:function(){throw c("err")("fd_filestat_set_size is not implemented")},fd_filestat_set_times:function(){throw c("err")("fd_filestat_set_times is not implemented")},fd_pread:function(){throw c("err")("fd_pread is not implemented")},fd_prestat_dir_name:function(a,c,e){if(a!==3)return d("WASISnapshotPreview1").RESULT.EBADF;a=d("WATextEncoding").newTextEncoder().encode("/");c=new Uint8Array(b.buffer,c,e);c.set(a.subarray(0,e));return d("WASISnapshotPreview1").RESULT.SUCCESS},fd_prestat_get:function(a,c){if(a!==3)return d("WASISnapshotPreview1").RESULT.EBADF;a=d("WATextEncoding").newTextEncoder().encode(".");c=new DataView(b.buffer,c);c.setUint8(0,d("WASISnapshotPreview1").PreopenType.DIR);c.setUint32(4,a.byteLength,!0);return d("WASISnapshotPreview1").RESULT.SUCCESS},fd_pwrite:function(){throw c("err")("fd_pwrite is not implemented")},fd_read:function(a,c,g,h){if(a===1||a===2)return d("WASISnapshotPreview1").RESULT.ENOTSUP;var i=new DataView(b.buffer);c=j(i,c,g);g=d("WATextEncoding").newTextEncoder();var k=0,l=d("WASISnapshotPreview1").RESULT.SUCCESS;for(c of c){var m=void 0;if(a===0){var n=e.stdin(c.byteLength);if(n==null)break;m=g.encode(n)}else{n=f.read(a,c.byteLength);if(n.length===1){l=n[0];break}else m=n[1]}n=Math.min(c.byteLength,m.byteLength);c.set(m.subarray(0,n));k+=n}i.setUint32(h,k,!0);return l},fd_readdir:function(){throw c("err")("fd_readdir is not implemented")},fd_renumber:function(){throw c("err")("fd_renumber is not implemented")},fd_seek:function(a,e,g,h){g=d("WASISnapshotPreview1").Whence.cast(g);if(g==null)throw c("err")("fd_seek: invalid whence");a=f.seek(a,e,g);if(a.length===1)return a[0];e=a[0];g=a[1];a=new DataView(b.buffer);a.setBigUint64(h,g,!0);return e},fd_sync:function(){throw c("err")("fd_sync is not implemented")},fd_tell:function(a,c){a=f.tell(a);if(a.length===1)return a[0];var d=a[0];a=a[1];var e=new DataView(b.buffer);e.setBigUint64(c,a,!0);return d},fd_write:function(a,c,g,h){if(a===0)return d("WASISnapshotPreview1").RESULT.ENOTSUP;var i=new DataView(b.buffer);c=j(i,c,g);g=d("WATextEncoding").newTextDecoder();var k=0,l=d("WASISnapshotPreview1").RESULT.SUCCESS;for(c of c){if(c.byteLength===0)continue;if(a===1||a===2){var m=a===1?e.stdout:e.stderr,n=g.decode(c);m(n)}else{l=f.write(a,c);if(l!==d("WASISnapshotPreview1").RESULT.SUCCESS)break}k+=c.byteLength}i.setUint32(h,k,!0);return l},path_create_directory:function(){throw c("err")("path_create_directory is not implemented")},path_filestat_get:function(){throw c("err")("path_filestat_get is not implemented")},path_filestat_set_times:function(){throw c("err")("path_filestat_set_times is not implemented")},path_link:function(){throw c("err")("path_link is not implemented")},path_open:function(a,c,d,e,g,h,i,j,k){c=new DataView(b.buffer);h=m(b,d,e);i=f.open(a,h,g,j);if(i.length===1)return i[0];d=i[0];e=i[1];c.setUint32(k,e,!0);return d},path_readlink:function(){throw c("err")("path_readlink is not implemented")},path_remove_directory:function(){throw c("err")("path_remove_directory is not implemented")},path_rename:function(){throw c("err")("path_rename is not implemented")},path_symlink:function(){throw c("err")("path_symlink is not implemented")},path_unlink_file:function(){throw c("err")("path_unlink_file is not implemented")},poll_oneoff:function(){throw c("err")("poll_oneoff is not implemented")},proc_exit:function(a){throw new h(a)},proc_raise:function(){throw c("err")("proc_raise is not implemented")},random_get:function(a,c){a=new Uint8Array(b.buffer,a,c);d("WACryptoDependencies").getCrypto().getRandomValues(a);return d("WASISnapshotPreview1").RESULT.SUCCESS},sched_yield:function(){throw c("err")("sched_yield is not implemented")},sock_accept:function(){throw c("err")("sock_accept is not implemented")},sock_recv:function(){throw c("err")("sock_recv is not implemented")},sock_send:function(){throw c("err")("sock_send is not implemented")},sock_shutdown:function(){throw c("err")("sock_shutdown is not implemented")}};return{getImportObject:function(){return{wasi_snapshot_preview1:o}},start:function(a){var d=a.exports.memory;if(d instanceof WebAssembly.Memory)b=d;else throw c("err")("Expected memory object");d=a.exports._start;try{d()}catch(a){if(a instanceof h)return{exitCode:a.code,fs:f.fs};else if(a instanceof WebAssembly.RuntimeError)return{exitCode:134,fs:f.fs};else throw a}return{exitCode:0,fs:f.fs}},initialize:function(a){var d=a.exports.memory;if(d instanceof WebAssembly.Memory)b=d;else throw c("err")("Expected memory object");d=a.exports;if("_initialize"in d){a=d._initialize;a()}return{exports:d,drive:f}}}}var h=function(a){function b(b){var c;c=a.call(this)||this;c.code=b;return c}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error)),i=(b=d("WASISnapshotPreview1")).RightsFlags.FD_DATASYNC|b.RightsFlags.FD_READ|b.RightsFlags.FD_SEEK|b.RightsFlags.FD_FDSTAT_SET_FLAGS|b.RightsFlags.FD_SYNC|b.RightsFlags.FD_TELL|b.RightsFlags.FD_WRITE|b.RightsFlags.FD_ADVISE|b.RightsFlags.FD_ALLOCATE|b.RightsFlags.PATH_CREATE_DIRECTORY|b.RightsFlags.PATH_CREATE_FILE|b.RightsFlags.PATH_LINK_SOURCE|b.RightsFlags.PATH_LINK_TARGET|b.RightsFlags.PATH_OPEN|b.RightsFlags.FD_READDIR|b.RightsFlags.PATH_READLINK|b.RightsFlags.PATH_RENAME_SOURCE|b.RightsFlags.PATH_RENAME_TARGET|b.RightsFlags.PATH_FILESTAT_GET|b.RightsFlags.PATH_FILESTAT_SET_SIZE|b.RightsFlags.PATH_FILESTAT_SET_TIMES|b.RightsFlags.FD_FILESTAT_GET|b.RightsFlags.FD_FILESTAT_SET_SIZE|b.RightsFlags.FD_FILESTAT_SET_TIMES|b.RightsFlags.PATH_SYMLINK|b.RightsFlags.PATH_REMOVE_DIRECTORY|b.RightsFlags.PATH_UNLINK_FILE|b.RightsFlags.POLL_FD_READWRITE|b.RightsFlags.SOCK_SHUTDOWN|b.RightsFlags.SOCK_ACCEPT;function j(a,b,c){var d=new Array(c);b=b;for(var e=0;e<c;e++){var f=a.getUint32(b,!0);b+=4;var g=a.getUint32(b,!0);b+=4;d[e]=new Uint8Array(a.buffer,f,g)}return d}function k(a){var b=new Uint8Array(d("WASISnapshotPreview1").FILESTAT_SIZE),c=new DataView(b.buffer);c.setBigUint64(0,BigInt(0),!0);c.setBigUint64(8,BigInt(o(a.path)),!0);c.setUint8(16,a.type);c.setBigUint64(24,BigInt(1),!0);c.setBigUint64(32,BigInt(a.byteLength),!0);c.setBigUint64(40,n(a.timestamps.access),!0);c.setBigUint64(48,n(a.timestamps.modification),!0);c.setBigUint64(56,n(a.timestamps.change),!0);return b}function l(a,b,c){var d=c!=null?c:i;c=c!=null?c:i;var e=new Uint8Array(24),f=new DataView(e.buffer,0,24);f.setUint8(0,a);f.setUint32(2,b,!0);f.setBigUint64(8,d,!0);f.setBigUint64(16,c,!0);return e}function m(a,b,c){return d("WATextEncoding").newTextDecoder().decode(new Uint8Array(a.buffer,b,c))}function n(a){return BigInt(a.getTime())*BigInt(1e6)}function o(a,b){b===void 0&&(b=0);var c=3735928559^b;b=1103547991^b;for(var d=0,e;d<a.length;d++)e=a.charCodeAt(d),c=Math.imul(c^e,2654435761),b=Math.imul(b^e,1597334677);c=Math.imul(c^c>>>16,2246822507)^Math.imul(b^b>>>13,3266489909);b=Math.imul(b^b>>>16,2246822507)^Math.imul(c^c>>>13,3266489909);return 4294967296*(2097151&b)+(c>>>0)}g.createWasi=a}),98);
__d("WACreateWasmFunction",["WAErrorMessage","WAResultOrError","WASI","decodeProtobuf","encodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m="input",n="output",o="/"+m,p="/"+n;function q(a){var b=a.command,c=a.input,d=a.stderr,e=a.stdout;a=a.cli;var f=new Date();return{args:[a,b,"-i="+m,"-o="+n],fs:(a={},a[o]={content:new Uint8Array(c),mode:"binary",path:o,timestamps:{access:f,change:f,modification:f}},a),stderr:d,stdout:e}}function a(a){var b=a.InputSpec,c=a.ResultSpec,e=a.command,f=a.getWasmModule,g=a.logger,m=a.validateResult,n=a.cli,o=g.TAGS(["WasmFunc"]),r=function(a){o.ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["",""])),a)},s=function(a){o.LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["",""])),a)};return async function(a){try{a=d("encodeProtobuf").encodeProtobuf(b,a).readBuffer();a=d("WASI").createWasi(q({cli:n,command:e,input:a,stderr:r,stdout:s}));var g=a.getImportObject;a=a.start;var h=await f();h=await WebAssembly.instantiate(h,g());g=a(h);a=g.exitCode;h=g.fs;h=(g=h[p])==null?void 0:g.content;if(a!==0){o.ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["non-zero-exit-code: ",""])),a);return d("WAResultOrError").makeError("wasm-internal-non-zero-exit-code")}if(!(h instanceof Uint8Array)){o.ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["invalid result type"])));return d("WAResultOrError").makeError("wasm-internal-invalid-result-type")}g=d("decodeProtobuf").decodeProtobuf(c,h);return m(g)}catch(a){o.ERROR(l||(l=babelHelpers.taggedTemplateLiteralLoose(["Unexpected runtime error: ",", for cli: ",""])),d("WAErrorMessage").maybeGetMessageFromError(a),n);return a instanceof Error?d("WAResultOrError").DEPRECATED_makeError("wasm-internal-runtime-error",a):d("WAResultOrError").makeError("wasm-internal-runtime-error")}}}g.createWasmFunction=a}),98);
__d("EBMinosWasmVerifySingleEpoch",["EBGetMinosWasm","EBMinosLogger","EBMinosWasm.pb","WACreateWasmFunction","WAResultOrError"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.getWasmModule,c=d("EBMinosLogger").minosLogger.TAGS(["minos-verify-single-epoch"]);function e(a){a=a.valid;return d("WAResultOrError").makeResult({valid:a})}return async function(a){var f=a.epochPublicData;a=a.signature;var g=d("WACreateWasmFunction").createWasmFunction({InputSpec:d("EBMinosWasm.pb").MinosVerifySingleEpochInputSpec,ResultSpec:d("EBMinosWasm.pb").MinosVerifySingleEpochResultSpec,cli:"minos_cli",command:"minos-verify-single-epoch",getWasmModule:b,logger:c,validateResult:e});g=await g({epochPublicData:f,signature:a});return g}}b=a({getWasmModule:d("EBGetMinosWasm").getMinosWasm});g.verifySingleEpoch=b}),98);
__d("EBAPIMinosVerifySingleEpoch",["EBMinosLogger","EBMinosWasmVerifySingleEpoch","WAGetSafeQPLError"],(function(a,b,c,d,e,f,g){"use strict";var h,i;async function a(a){d("EBMinosLogger").minosLogger.DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["minosVerifySingleEpoch start"])));var b=a.qplFlow,c=a.minosEpochAnonId,e=a.minosMailboxAuthPublicKey,f=a.minosMailboxEncryptionPublicKey,g=a.minosMailboxSigningPublicKey,j=a.userId,k=a.selfEpochSignature;try{c={epochNumber:c,mailboxAuthPk:e,mailboxEncryptionPk:f,mailboxSigningPk:g,previousEpochHead:a.previousEpochHead==null?void 0:a.previousEpochHead,userFbid:j};b.addPoint("verify_single_epoch_start");e=await d("EBMinosWasmVerifySingleEpoch").verifySingleEpoch({epochPublicData:c,signature:k});b.addPoint("verify_single_epoch_end");if(e.success){b.endSuccess();return e.value.valid}d("EBMinosLogger").minosLogger.ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Unable to verify epoch - WASM error ",""])),e.error);b.endFailWithError("invalid-result",e.error);return!1}catch(a){b.endFailWithError("runtime-error",d("WAGetSafeQPLError").getSafeQPLErrorMessage(a));return!1}}g.minosVerifySingleEpoch=a}),98);
__d("EBMinosBridgedAPI",["IEBAPI"],(function(a,b,c,d,e,f,g){"use strict";a={writeMinosKeyChangeAdminMessage:d("IEBAPI").makeMinosBridgedApi("writeMinosKeyChangeAdminMessage"),writeMinosMailboxKeysForRecipientAPI:d("IEBAPI").makeMinosBridgedApi("writeMinosMailboxKeysForRecipientAPI"),writeMinosSecureStorageAlert:d("IEBAPI").makeMinosBridgedApi("writeMinosSecureStorageAlert")};b=a;g["default"]=b}),98);
__d("EBMinosDBDev",["MAWWormOdsLogger","QPLFlow","WALogger","WAResolvable","Worm","WormEAR","WormIDbDriver"],(function(a,b,c,d,e,f,g){"use strict";var h,i={secure_minos_mailbox_keys:{indexes:{},primaryKey:"contact_id",secure:!0},secure_minos_message_epoch_heads:{indexes:{"[thread_id+message_id]":{fields:["thread_id","message_id"],unique:!0}},primaryKey:"message_id",secure:!0},secure_minos_thread_message_encryption_keys:{indexes:{"[roster_hash+minos_thread_id]":{fields:["roster_hash","minos_thread_id"],unique:!1}},primaryKey:"mek_id_blob",secure:!0}},j=new(d("WAResolvable").Resolvable)(),k=1e4;async function a(a,b,c){var e=d("QPLFlow").startQPLFlow(b,{annotations:{string:{operationType:"initEBMinosDevDbSchema"}},timeoutInMs:k});try{var f="ebMinosDev";c=new(d("WormEAR").WormEAR)(i,f,c);a=new(d("Worm").WormDatabase)(new(d("WormIDbDriver").WormIDbDriver)(a,f,i,c,d("MAWWormOdsLogger").wormOdsWorkerLogger,{}),b);await a.init({eventFlow:e});e.endSuccess();j.resolve(a)}catch(a){j.reject(a);e.endFail("error");d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Error performing makeEBMinosDevDB: ",""])),a);throw a}}function l(){return j.promise}async function b(){var a=Object.keys(i),b=await l();return b.runInTransaction(a,"readonly",async function(b){var c={};await Promise.all(a.map(async function(a){var d=await b.stores[a].readAll();c[a]=d}));return c},"EBMinosDevDb - Dump").catch(function(){return{}})}g.schema=i;g.makeEBMinosDevDB=a;g.getEBMinosDevDb=l;g.getDbDump=b}),98);
__d("EBMinosSaveNewMailboxKey",["EBMinosDBDev"],(function(a,b,c,d,e,f,g){"use strict";a=async function(a,b,c,e,f,g){var h=await d("EBMinosDBDev").getEBMinosDevDb();await h.runInTransaction(["secure_minos_mailbox_keys"],"readwrite",function(d){return d.stores.secure_minos_mailbox_keys.bulkPut([{contact_id:a,encryption_public_key:b,epoch_anon_id:c,epoch_head:e,epoch_head_creation_time:f,public_key_fbid:g}])},"SaveNewMailboxKey")};g.saveNewMailboxKey=a}),98);
__d("EBMinosLoadMailboxKeys",["EBMinosDBDev"],(function(a,b,c,d,e,f,g){"use strict";a=async function(a){var b=await d("EBMinosDBDev").getEBMinosDevDb();b=await b.runInTransaction(["secure_minos_mailbox_keys"],"readonly",function(b){return b.stores.secure_minos_mailbox_keys.get(a)},"LoadMailboxKeys");return b};g.loadMailboxKeys=a}),98);
__d("EBMinosSecureMailboxKeysForContact",["EBMinosLoadMailboxKeys","EBMinosTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("EBMinosLoadMailboxKeys").loadMailboxKeys(d("EBMinosTypes").unsafeCastToUserFbId(a))}g.getSecureMailboxKeysForContact=a}),98);
__d("EBMinosWriteMinosPublicKeysForRecipient",["EBMinosBridgedAPI","EBMinosLogger","EBMinosSaveNewMailboxKey","EBMinosSecureMailboxKeysForContact","WAResultOrError","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;async function a(a){var b=a.contactId,e=a.encryptionPublicKey,f=a.epochAnonId,g=a.epochHead,k=a.epochHeadCreationTime;a=a.publicKeyFbid;var l=await d("EBMinosSecureMailboxKeysForContact").getSecureMailboxKeysForContact(b);if(g==null||k==null){(l==null?void 0:l.epoch_head)!=null&&(l==null?void 0:l.epoch_head_creation_time)!=null&&(d("EBMinosLogger").minosLogger.DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Deleting mailbox keys for contact: ",""])),b),await d("EBMinosSaveNewMailboxKey").saveNewMailboxKey(b,e,f,g,k,a));return d("WAResultOrError").makeResult()}j(l,g,k)&&(d("EBMinosLogger").minosLogger.DEV(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Writing new mailbox keys for contact: ",""])),b),await d("EBMinosSaveNewMailboxKey").saveNewMailboxKey(b,e,f,g,k,a),c("promiseDone")(c("EBMinosBridgedAPI").writeMinosSecureStorageAlert({contactId:b,epochHead:g,epochHeadCreationTime:k})),c("promiseDone")(c("EBMinosBridgedAPI").writeMinosKeyChangeAdminMessage({contactId:b,epochHeadCreationTime:k})));return d("WAResultOrError").makeResult()}function j(a,b,c){if(b==null||c==null)return!1;return(a==null?void 0:a.epoch_head)==null||(a==null?void 0:a.epoch_head_creation_time)==null?!0:a.epoch_head_creation_time!==c&&c>a.epoch_head_creation_time}g.writeMinosMailboxKeysForRecipient=a}),98);
__d("EBAPIWriteMinosPublicKeysForRecipient",["EBMinosWriteMinosPublicKeysForRecipient"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.contactId,c=a.encryptionPublicKey,e=a.epochAnonId,f=a.epochHead,g=a.epochHeadCreationTime;a=a.publicKeyFbid;return d("EBMinosWriteMinosPublicKeysForRecipient").writeMinosMailboxKeysForRecipient({contactId:b,encryptionPublicKey:c,epochAnonId:e,epochHead:f,epochHeadCreationTime:g,publicKeyFbid:a})}g.writeMinosMailboxKeysForRecipientAPI=a}),98);
__d("EBSMAPI",["Promise","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(a=c("requireDeferred"))("EBAddDeviceWithKeys").__setRef("EBSMAPI"),j=a("EBAddDeviceWithRecoveryCode").__setRef("EBSMAPI"),k=a("EBDeleteMailbox").__setRef("EBSMAPI"),l=a("EBFetchBackupIds").__setRef("EBSMAPI"),m=a("EBGetEBState").__setRef("EBSMAPI"),n=a("EBGetLSVirtualDevices").__setRef("EBSMAPI"),o=a("EBInitializeBackup").__setRef("EBSMAPI"),p=a("EBIsEbEnabled").__setRef("EBSMAPI");d={addDeviceWithEBKeys:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return i.load().then(function(a){return a.addDeviceWithEBKeys.apply(a,b)})},addDeviceWithRecoveryCode:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return j.load().then(function(a){return a.addDeviceWithRecoveryCode.apply(a,b)})},deleteMailbox:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return k.load().then(function(a){return a.deleteMailbox.apply(a,b)})},fetchBackupIds:function(a,b){return l.load().then(function(c){return c.fetchBackupIds(a,b)})},getEBState:function(){return m.load().then(function(a){return a.GetEbState()})},getLSVirtualDevices:function(a){return n.load().then(function(b){return b.getLSVirtualDevices(a)})},initializeBackup:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return o.load().then(function(a){return a.initializeBackup.apply(a,b)})},isEbEnabled:function(){return p.load().then(function(a){return a.isEbEnabledEbSwitch()})},optOutOfBackup:function(){return(h||(h=b("Promise"))).resolve()}};e=d;g["default"]=e}),98);
__d("EchoCommonUtils",[],(function(a,b,c,d,e,f){"use strict";c="Echo-Doc-Version";function a(a,b){var c=a.localKey;a=a.transportKey;return c+"@"+a+"-"+b}function b(a,b,c){return a==null?{localKey:b,transportKey:c}:{displayName:a,localKey:b,transportKey:c}}f.ECHO_COMMON_FIELD_DOCUMENT_VERSION=c;f.getEchoAddressFieldNameWithSuffix=a;f.craftEchoAddress=b}),66);
__d("EchoConstants",[],(function(a,b,c,d,e,f){"use strict";a=new Set(["\0","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x0e","\x0f","\x10","\x11","\x12","\x13","\x14","\x15","\x16","\x17","\x18","\x19","\x1a","\x1b","\x1c","\x1d","\x1e","\x1f",'"'," ","(",")",",",":",";","<",">","@","[","]","\\"]);f.ADDRESS_LOCAL_KEY_CHARS_NEED_QUOTE=a}),66);
__d("EchoDecodingUtils",["invariant","EchoConstants","WALogger"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m,n,o,p,q,r,s,t,u,v=new Set([]);function w(a,b){if(a.length===0)return;var c=a.indexOf(":");if(c===-1){d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] This is a raw line and we cannot decode its field name and value."])));return}var e=a.substring(0,c).trim();a=a.substring(c+1).trim();if(e.length===0){d("WALogger").ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Field name is blank"])));return}if(a.length===0){b.has(e)&&b["delete"](e);return}b.set(e,a)}function x(a,b,c,e){c===void 0&&(c=new Set());var f=!1,g=b==="conditional"&&a[0]==='"',h="",i=g?1:0;while(i<a.length){var j=a[i];if(b==="conditional"&&!g&&j==='"')break;if(!g&&c.has(j))break;if(g&&!f&&j==='"'){g=!1;i++;break}if(g&&!f&&j==="\\"){if(i===a.length-1)break;f=!0}else f&&j==="r"?h+="\r":f&&j==="n"?h+="\n":h+=j,f=!1;i++}if(g||h.length===0){j=e!=null?e:"unknown";d("WALogger").ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Fail decoding because we didn't have a closing quote. Error Field: ",""])),j);return{remainder:a,result:null,success:!1}}return{remainder:a.substring(i),result:h,success:!0}}function y(a,b){if(a.length===0){d("WALogger").ERROR(l||(l=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] invalid input to echoDecodeAddress"])));return{remainder:a,result:null,success:!1}}var c=a.trimLeft();c=x(c,"conditional",d("EchoConstants").ADDRESS_LOCAL_KEY_CHARS_NEED_QUOTE,b);if(!c.success){d("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] conditional quote mode decode failed"])));return{remainder:a,result:null,success:!1}}c.result!=null||h(0,47923);if(c.remainder[0]==="@"){var e=z(c.remainder,c.result,b);return{remainder:e.remainder,result:e.result,success:e.success}}e=c.result;c=c.remainder.trimLeft();if(c.startsWith("<")){c=z(c.substring(1),void 0,b);b=c.result;var f=c.remainder;if(c.success&&b!=null&&f.startsWith(">"))if(e.length===0)return{remainder:f.substring(1),result:b,success:!0};else return{remainder:f.substring(1),result:babelHelpers["extends"]({},b,{displayName:e}),success:!0}}d("WALogger").ERROR(n||(n=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] echoDecodeAddress failed"])));return{remainder:a,result:null,success:!1}}function z(a,b,c){var e=b==null?a.trimLeft():a;b=b;if(b==null){var f=x(e,"conditional",d("EchoConstants").ADDRESS_LOCAL_KEY_CHARS_NEED_QUOTE,c);if(!f.success){d("WALogger").ERROR(o||(o=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] parse localKey in address failed"])));return{remainder:a,result:null,success:!1}}b=f.result;e=f.remainder}if(b==null||b.length===0||e[0]!=="@"){d("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] invalid localKey in address detected"])));return{remainder:a,result:null,success:!1}}f=x(e.substring(1),"never",d("EchoConstants").ADDRESS_LOCAL_KEY_CHARS_NEED_QUOTE,c);e=f.result;if(f.success&&e!=null&&e.length>0)return{remainder:f.remainder,result:{localKey:b,transportKey:e},success:!0};else{d("WALogger").ERROR(q||(q=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] invalid transportKey in address detected"])));return{remainder:a,result:null,success:!1}}}function A(a,b){if(a.length===0){d("WALogger").ERROR(r||(r=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] invalid input to echoDecodeAddressList detected"])));return{result:null,success:!1}}var c=y(a,b);if(!c.success){d("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Address  decode failed with value: ",""])),a);return{result:null,success:!1}}c.result!=null||h(0,47927);a=[c.result];c=c.remainder;while(c.startsWith(",")){var e=y(c.substring(1).trimLeft(),b);if(e.success)e.result!=null&&a.push(e.result),c=e.remainder;else break}return{result:a,success:!0}}function a(a){var b=new Map(),c=a.split("\r\n");if(c.length===1&&c[0]===a){d("WALogger").ERROR(t||(t=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Fail to decode if the input string does not have CRLF"])));return b}c.forEach(function(a){return w(a,b)});return b}function b(a,b){a=a.get(b);if(a==null||a.length===0||a==='""')return{result:null,success:!1};a=x(a,"conditional",v,b);b=a.result;a=a.success;return{result:b,success:a}}function c(a,b){a=B(a,b);return{result:(b=a.result)!=null?b:0,success:a.success}}function B(a,b){a=a.get(b);if(a==null||a.length===0)return{result:null,success:!1};a=parseInt(a,10);if(isNaN(a)){d("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] "," not a valid number in echo message"])),b);return{result:null,success:!1}}else return Number.isSafeInteger(a)?{result:a,success:!0}:{result:a>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,success:!0}}function e(a,b){a=C(a,b);return{result:(b=a.result)!=null?b:!1,success:a.success}}function C(a,b){a=B(a,b);return!a.success||a.result!==0&&a.result!==1?{result:null,success:!1}:{result:a.result===1,success:!0}}function f(a,b){a=a.get(b);if(a==null||a.length===0)return{result:null,success:!1};a=y(a,b);b=a.result;a=a.success;return{result:b,success:a}}function D(a,b){a=a.get(b);return a==null||a.length===0?{result:null,success:!1}:A(a,b)}function E(a,b){a=a.get(b);if(a==null||a.length===0)return{result:null,success:!1};b=a.split(",").map(function(a){return a.trim()}).filter(Boolean);return b.length===0?{result:null,success:!1}:{result:b,success:!0}}g.echoDecodeFields=a;g.echoDecodeStringField=b;g.echoDecodeIntField=c;g.echoDecodeNullableIntField=B;g.echoDecodeBooleanField=e;g.echoDecodeNullableBooleanField=C;g.echoDecodeAddressField=f;g.echoDecodeAddressListField=D;g.echoDecodeObjectIdListField=E}),98);
__d("EchoEncodingUtils",["EchoConstants","EchoMessage","FBLogger","MAWMsgType","WABase64"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set(['"',"\\","\n","\r","\0"]),i=new Set(["\0","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x0e","\x0f","\x10","\x11","\x12","\x13","\x14","\x15","\x16","\x17","\x18","\x19","\x1a","\x1b","\x1c","\x1d","\x1e","\x1f",'"',"\\"]);function j(a,b){for(b of b)if(a.indexOf(b)>=0)return!0;return!1}function k(a,b,d){d===void 0&&(d=new Set());if(a.length<=0)throw c("FBLogger")("wmi_eb").mustfixThrow("The input string must be non-empty");var e=b;b==="conditional"&&(j(a,d)?e="always":e="never");if(e==="never")return a;b='"';for(d=0;d<a.length;d++){e=a[d];h.has(e)?(b+="\\",e==="\r"?b+="r":e==="\n"?b+="n":b+=e):b+=e}return b+'"'}function l(a){if(!Number.isSafeInteger(a))throw c("FBLogger")("wmi_eb").mustfixThrow("The input value must be a safe integer");return a.toString()}function m(a){var b="",c=a.displayName,e=a.localKey;a=a.transportKey;c!=null&&c.length>0&&(b+=k(c,"always")+" <");b+=k(e,"conditional",d("EchoConstants").ADDRESS_LOCAL_KEY_CHARS_NEED_QUOTE)+"@"+a;c!=null&&c.length>0&&(b+=">");return b}function n(a,b,c){c!=null&&c.length!==0&&a.set(b,k(c,"conditional",i))}function a(a,b,c){if(c!=null){c=l(c);n(a,b,c)}}function b(a,b,c){if(c!=null){c=l(c?1:0);n(a,b,c)}}function e(a,b,c){c!=null&&a.set(b,m(c))}function f(a,b,c){if(c!=null){var d="";c.forEach(function(a,b){d+=m(a),b<c.length-1&&(d+=", ")});a.set(b,d)}}function o(a){var b="";a.forEach(function(a,c){b=b+c+": "+a+"\r\n"});return b}function p(a){return d("WABase64").encodeB64UrlSafe(a)}function q(a){switch(a){case d("MAWMsgType").MSG_TYPE.TEXT:return d("EchoMessage").EchoXMessageContentType.TEXT;case d("MAWMsgType").MSG_TYPE.IMAGE:return d("EchoMessage").EchoXMessageContentType.IMAGE;case d("MAWMsgType").MSG_TYPE.VIDEO:return d("EchoMessage").EchoXMessageContentType.VIDEO;case d("MAWMsgType").MSG_TYPE.PTT:return d("EchoMessage").EchoXMessageContentType.AUDIO;case d("MAWMsgType").MSG_TYPE.STICKER:return d("EchoMessage").EchoXMessageContentType.STICKER;case d("MAWMsgType").MSG_TYPE.GIF:return d("EchoMessage").EchoXMessageContentType.GIF;case d("MAWMsgType").MSG_TYPE.XMA:return d("EchoMessage").EchoXMessageContentType.XMA;case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:return d("EchoMessage").EchoXMessageContentType.DOCUMENT;case d("MAWMsgType").MSG_TYPE.REACTION:return d("EchoMessage").EchoXMessageContentType.REACTION;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:return d("EchoMessage").EchoXMessageContentType.EPHEMERAL_SETTINGS;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:return d("EchoMessage").EchoXMessageContentType.EPHEMERAL_SYNC_RESPONSE;case d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:return d("EchoMessage").EchoXMessageContentType.MESSAGE_DELETE_FOR_ME;case d("MAWMsgType").MSG_TYPE.REVOKED:return d("EchoMessage").EchoXMessageContentType.UNSEND;case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:return d("EchoMessage").EchoXMessageContentType.GROUP_INVITES;case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:return d("EchoMessage").EchoXMessageContentType.BUMP;default:return d("EchoMessage").EchoXMessageContentType.UNKNOWN}}g.echoSetStringField=n;g.echoSetIntField=a;g.echoSetBooleanField=b;g.echoSetAddressField=e;g.echoSetAddressListField=f;g.echoEncodeFields=o;g.convertMediaKeyToString=p;g.convertDbMsgTypeToXMessageContentType=q}),98);
__d("EchoMessage",["$InternalEnum","EchoCommonUtils","EchoDecodingUtils","EchoEncodingUtils","EchoMessageMediaFieldUtils","EchoMessageMediaGroupFieldUtil","EchoMessageQuoteFieldUtils","EchoMessageReceiptStatusFieldUtils","EchoMessageXMAFieldUtils","FBLogger","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o="Message-ID",p="Thread-ID",q="Sort-Order",r="Display-Timestamp",s="Authoritative-Timestamp",t="From",u="Text",v="Text-Size",w="Send-Error",x="Is-Tombstoned",y="Expire-Timestamp",z="Delete-Timestamp",A="Ephemeral-Duration",B="Message-Content-Type",C="X-Message-Content-Type",D="Message-Content-Subtype",E="Is-Forwarded",F="X-Offline-Threading-ID",G="X-Thread-ID",H="X-Message-Placeholder-Type",I="Reactions",J="Reaction-Authoritative-Timestamps",K="X-Reaction-Offline-Threading-IDs",L="Echo-Serialization-Origin",M="Revoke-Sent-Timestamp",N="Revoke-Unsent-Timestamp",O="Edit-Count",P="Edit-Contents-",Q="Edit-Timestamps-";f="Group-ID";var R="Group-Index",S="Group-Size",T="Receiver-Fetch-Id",U="Message-Ephemerality-Type",V=1,W=(b=b("$InternalEnum"))({NONE:"none",SMALL:"small",MEDIUM:"medium",LARGE:"large"}),X=b({NONE:"none",UNSEND:"unsend"}),Y=b({DECRYPTION_FAILURE:"decryption_failure",UNSUPPORTED_NEEDS_UPDATE:"unsupported_needs_update",TEXT:"text",ADMIN_MESSAGE:"admin_message",MEDIA:"media",XMA:"xma",NULL_STATE:"null_state",PLACEHOLDER:"placeholder"}),aa=b({UNKNOWN:"unknown",TEXT:"text",IMAGE:"image",VIDEO:"video",AUDIO:"audio",STICKER:"sticker",GIF:"gif",URL:"url",EPHEMERAL_SETTINGS:"ephemeral_settings",LOCATION:"location",DOCUMENT:"document",UNSEND:"unsend",SCREENSHOT_ACTION:"screenshot_action",REACTION:"reaction",XMA:"xma",VISUAL_MESSAGE_VIDEO:"visual_message_video",VISUAL_MESSAGE_IMAGE:"visual_message_image",VISUAL_MESSAGE_ACTION:"visual_message_action",SCREEN_RECORDING_ACTION:"screen_recording_action",MESSAGE_DELETE_FOR_ME:"message_delete_for_me",ENCRYPTED_BACKUP_NEW_DEVICE_ENROLLMENT:"encrypted_backup_new_device_enrollment",SENDER_KEY:"sender_key",DELETE_THREAD:"delete_thread",READ_THREAD:"read_thread",UNREAD_THREAD:"unread_thread",REACTION_UNSEND:"reaction_unsend",GROUP_INVITES:"group_invites",EPHEMERAL_SYNC_RESPONSE:"ephemeral_sync_response",BUMP:"bump"}),Z=b({NO_PLACEHOLDER:"0",DECRYPTION_FAILURE:"-1",CLIENT_NOT_SUPPORTED_NEED_UPDATE:"-2",UNAVIALABLE_DEVICE:"-3"}),$=b({UNKNOWN:"Unknown",WEB:"Web",MOBILE:"Mobile"});function a(a){var b=new Map();ia(b,a);"mediaData"in a&&a.mediaData&&d("EchoMessageMediaFieldUtils").echoMessageSetMediaMetadataFields(b,a.mediaData);return d("EchoEncodingUtils").echoEncodeFields(b)}function ba(a,b){var c,e=[],f=new Set();b.forEach(function(c,g,h){c=g.startsWith(P);h=g.startsWith(Q);if(c||h){h=g.slice(c?P.length:Q.length);if(!f.has(h)){f.add(h);c=(g=d("EchoDecodingUtils").echoDecodeStringField(b,""+P+h).result)!=null?g:"";g=((g=d("EchoDecodingUtils").echoDecodeIntField(b,""+Q+h).result)!=null?g:0)/1e3;e.push({messageId:h,originalMessageId:a,text:c,timestamp:g})}}});c=(c=d("EchoDecodingUtils").echoDecodeIntField(b,O).result)!=null?c:0;return{editCount:c,editHistory:e}}function e(a){a=d("EchoDecodingUtils").echoDecodeFields(a);if(a.size===0){d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] fieldsMap is empty for the echo message"])));return null}var b=d("EchoDecodingUtils").echoDecodeStringField(a,o),e=d("EchoDecodingUtils").echoDecodeStringField(a,p),f=d("EchoDecodingUtils").echoDecodeIntField(a,q),g=d("EchoDecodingUtils").echoDecodeIntField(a,r),O=d("EchoDecodingUtils").echoDecodeStringField(a,B),P=d("EchoDecodingUtils").echoDecodeStringField(a,C),Q=d("EchoDecodingUtils").echoDecodeStringField(a,D);if(b.success&&e.success&&f.success){b=b.result;if(b==null)throw c("FBLogger")("messenger_web").mustfixThrow("The decoded messageId cannot be null");e=e.result;if(e==null)throw c("FBLogger")("messenger_web").mustfixThrow("The decoded threadId cannot be null");O=O==null?void 0:O.result;if(O==null)throw c("FBLogger")("messenger_web").mustfixThrow("The decoded contentTypeString cannot be null");var R=ba(b,a),S=R.editCount;R=R.editHistory;Q={contentSubtype:fa(Q.result),contentType:da(O),displayTimestampMs:g.success?g.result:f.result,editCount:S,editHistory:R,messageId:b,sortOrderMs:f.result,threadId:e};O=ea(P.result);O!=null&&(Q.xContentType=O);g=d("EchoDecodingUtils").echoDecodeAddressField(a,t);g.success&&g.result!=null&&(Q.from=g.result);S=d("EchoDecodingUtils").echoDecodeNullableBooleanField(a,x);S.success&&S.result!=null&&(Q.isTombstoned=S.result);R=d("EchoDecodingUtils").echoDecodeStringField(a,u);R.success&&R.result!=null&&(Q.text=R.result);b=d("EchoDecodingUtils").echoDecodeStringField(a,v);if(b.success&&b.result!=null){f=ca(b.result);Q.textSize=f}e=d("EchoDecodingUtils").echoDecodeStringField(a,H);if(e.success&&e.result!=null){P=ga(e.result);Q.xMessagePlaceholderType=P}O=d("EchoDecodingUtils").echoDecodeStringField(a,w);O.success&&O.result!=null&&(Q.sendError=O.result);g=d("EchoDecodingUtils").echoDecodeNullableIntField(a,y);g.success&&g.result!=null&&(Q.expireTimestampMs=g.result);S=d("EchoDecodingUtils").echoDecodeNullableIntField(a,z);S.success&&S.result!=null&&(Q.deleteTimestampMs=S.result);R=d("EchoDecodingUtils").echoDecodeNullableIntField(a,A);R.success&&R.result!=null&&(Q.ephemeralDurationInSec=R.result);b=d("EchoDecodingUtils").echoDecodeStringField(a,U);b.success&&b.result!=null&&(b.result==="view_once"&&(Q.viewOnce=!0));f=d("EchoDecodingUtils").echoDecodeNullableIntField(a,s);f.success&&f.result!=null&&(Q.authoritativeTimestampMs=f.result);e=d("EchoMessageReceiptStatusFieldUtils").echoMessageDecodeReceiptStatusDataFields(a);e.length>0&&(Q.receiptStatusList=e);P=d("EchoDecodingUtils").echoDecodeNullableBooleanField(a,E);P.success&&P.result!=null&&(Q.isForwarded=P.result);d("EchoMessageMediaGroupFieldUtil").decodeMessageMediaGroupFields(a,Q);O=d("EchoDecodingUtils").echoDecodeStringField(a,F);O.success&&O.result!=null&&(Q.xOfflineThreadingId=O.result);g=d("EchoDecodingUtils").echoDecodeStringField(a,G);g.success&&g.result!=null&&(Q.xThreadId=g.result);S=d("EchoDecodingUtils").echoDecodeStringField(a,L);S.success&&S.result!=null&&(Q.serializationOrigin=ha(S.result));R=d("EchoDecodingUtils").echoDecodeNullableIntField(a,d("EchoCommonUtils").ECHO_COMMON_FIELD_DOCUMENT_VERSION);Q.version=R.success&&R.result!=null?R.result:V;b=d("EchoDecodingUtils").echoDecodeAddressListField(a,I);b.success&&b.result!=null&&(Q.reactions=b.result);f=d("EchoDecodingUtils").echoDecodeAddressListField(a,J);f.success&&f.result!=null&&(Q.reactionAuthoritativeTimestampMs=f.result);e=d("EchoDecodingUtils").echoDecodeAddressListField(a,K);e.success&&e.result!=null&&(Q.reactionXOfflineThreadingIds=e.result);P=d("EchoMessageQuoteFieldUtils").echoMessageDecodeQuoteFields(a);P!=null&&(Q.quoteData=P);O=(Q==null?void 0:Q.contentType)===Y.XMA&&a.has(d("EchoMessageMediaFieldUtils").ECHO_MESSAGE_FIELD_NAME_ATTACHMENT_TYPE)&&(a.has(d("EchoMessageMediaFieldUtils").ECHO_MESSAGE_FIELD_NAME_ATTACHMENT_OBJECT_ID)||a.has(d("EchoMessageMediaFieldUtils").ECHO_MESSAGE_FIELD_NAME_ATTACHMENT_OBJECT_IDS));g=a.has(T);if(a.has(T)){S=d("EchoMessageMediaFieldUtils").decodeReceiverFetchData(a);R=d("EchoDecodingUtils").echoDecodeStringField(a,T);b=R.result;f=R.success;S==null||!f||b==null?d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Failed to decode media data for Receiver Fetch, Message origin: ",""])),Q.serializationOrigin):(Q.receiverFetchData=S,Q.receiverFetchId=b)}if(((Q==null?void 0:Q.contentType)===Y.MEDIA||O)&&!g){e=d("EchoMessageMediaFieldUtils").echoMessageDecodeMediaDataFields(a,Q==null?void 0:Q.contentType,Q==null?void 0:Q.xContentType);P="[labyrinth_web] mandatory media data is missing from media message, msgId: "+Q.messageId+".";e!=null?(e.length!==1&&e.length!==2&&((Q==null?void 0:Q.contentType)===Y.MEDIA&&d("WALogger").ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose([""," Message origin: ",""])),P,Q.serializationOrigin),(Q==null?void 0:Q.contentType)===Y.XMA&&d("WALogger").WARN(k||(k=babelHelpers.taggedTemplateLiteralLoose([""," Message origin: ",""])),P,Q.serializationOrigin)),Q.mediaData=e[0],e.length===2&&(Q.previewMediaData=e[1])):((Q==null?void 0:Q.contentType)===Y.MEDIA&&d("WALogger").ERROR(l||(l=babelHelpers.taggedTemplateLiteralLoose([""," Message origin: ",""])),P,Q.serializationOrigin),(Q==null?void 0:Q.contentType)===Y.XMA&&d("WALogger").WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose([""," Message origin: ",""])),P,Q.serializationOrigin))}if(Q.contentType===Y.PLACEHOLDER&&Q.contentSubtype===X.UNSEND){R=d("EchoDecodingUtils").echoDecodeNullableIntField(a,M);R.success&&R.result!=null&&(Q.revokeSentTimestampMs=R.result);f=d("EchoDecodingUtils").echoDecodeNullableIntField(a,N);f.success&&f.result!=null&&(Q.revokeUnsentTimestampMS=f.result)}if(Q.contentType===Y.XMA){S=d("EchoMessageXMAFieldUtils").decodeXMAFields(a);if(S!=null)Q.xmaData=S;else{d("WALogger").ERROR(n||(n=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] mandatory xma data is missing from xma message, msgId: ",""])),Q.messageId);return null}}return Q}else return null}function ca(a){return(a=W.cast(a))!=null?a:W.NONE}function da(a){return(a=Y.cast(a))!=null?a:Y.TEXT}function ea(a){return aa.cast(a)}function fa(a){return(a=X.cast(a))!=null?a:X.NONE}function ga(a){return(a=Z.cast(a))!=null?a:Z.NO_PLACEHOLDER}function ha(a){return(a=$.cast(a))!=null?a:$.UNKNOWN}function ia(a,b){var c;(c=d("EchoEncodingUtils")).echoSetStringField(a,o,b.messageId);c.echoSetStringField(a,p,b.threadId);c.echoSetIntField(a,q,b.sortOrderMs);c.echoSetIntField(a,r,b.displayTimestampMs);c.echoSetIntField(a,s,b.authoritativeTimestampMs);c.echoSetAddressField(a,t,b.from);c.echoSetStringField(a,u,b.text);b.textSize!=null&&d("EchoEncodingUtils").echoSetStringField(a,v,b.textSize);b.xMessagePlaceholderType!=null&&d("EchoEncodingUtils").echoSetStringField(a,H,b.xMessagePlaceholderType);d("EchoEncodingUtils").echoSetStringField(a,w,b.sendError);d("EchoEncodingUtils").echoSetBooleanField(a,x,b.isTombstoned);d("EchoEncodingUtils").echoSetIntField(a,y,b.expireTimestampMs);d("EchoEncodingUtils").echoSetIntField(a,z,b.deleteTimestampMs);d("EchoEncodingUtils").echoSetIntField(a,A,b.ephemeralDurationInSec);b.contentType!=null&&d("EchoEncodingUtils").echoSetStringField(a,B,b.contentType);b.xContentType!=null&&d("EchoEncodingUtils").echoSetStringField(a,C,b.xContentType);d("EchoMessageReceiptStatusFieldUtils").echoMessageSetReceiptStatusDataFields(a,b.receiptStatusList);d("EchoEncodingUtils").echoSetBooleanField(a,E,b.isForwarded);d("EchoEncodingUtils").echoSetStringField(a,F,b.xOfflineThreadingId);d("EchoEncodingUtils").echoSetStringField(a,G,b.xThreadId);d("EchoEncodingUtils").echoSetIntField(a,d("EchoCommonUtils").ECHO_COMMON_FIELD_DOCUMENT_VERSION,b.version);b.contentSubtype!=null&&d("EchoEncodingUtils").echoSetStringField(a,D,b.contentSubtype);d("EchoEncodingUtils").echoSetAddressListField(a,I,b.reactions);d("EchoEncodingUtils").echoSetAddressListField(a,J,b.reactionAuthoritativeTimestampMs);d("EchoEncodingUtils").echoSetAddressListField(a,K,b.reactionXOfflineThreadingIds);d("EchoMessageQuoteFieldUtils").echoMessageSetQuoteFields(a,b);b.serializationOrigin!=null&&d("EchoEncodingUtils").echoSetStringField(a,L,b.serializationOrigin);b.revokeSentTimestampMs!=null&&d("EchoEncodingUtils").echoSetIntField(a,M,b.revokeSentTimestampMs);b.revokeUnsentTimestampMS!=null&&d("EchoEncodingUtils").echoSetIntField(a,N,b.revokeUnsentTimestampMS);d("EchoMessageMediaGroupFieldUtil").echoMessageSetMediaGroupFields(a,b);c=b.xmaData;c!=null&&d("EchoMessageXMAFieldUtils").echoMessageSetXMAFields(a,c);((c=b.editHistory)==null?void 0:c.length)>0&&(d("EchoEncodingUtils").echoSetIntField(a,O,b.editCount),b.editHistory.forEach(function(b){var c=b.messageId;c!=null&&(d("EchoEncodingUtils").echoSetStringField(a,P+c,b.text),d("EchoEncodingUtils").echoSetIntField(a,Q+c,b.timestamp*1e3))}));b.receiverFetchId!=null&&d("EchoEncodingUtils").echoSetStringField(a,T,b.receiverFetchId)}g.ECHO_SERIALIZATION_ORIGIN=L;g.ECHO_MESSAGE_FIELD_NAME_EDIT_COUNT=O;g.ECHO_MESSAGE_FIELD_NAME_EDIT_CONTENT_PREFIX=P;g.ECHO_MESSAGE_FIELD_NAME_EDIT_TS_PREFIX=Q;g.ECHO_MESSAGE_FIELD_GROUP_ID=f;g.ECHO_MESSAGE_FIELD_GROUP_INDEX=R;g.ECHO_MESSAGE_FIELD_GROUP_SIZE=S;g.ECHO_MESSAGE_FIELD_RECEIVER_FETCH_ID=T;g.ECHO_MESSAGE_FIELD_NAME_EPHEMERALITY_TYPE=U;g.ECHO_MESSAGE_MIGRATION_DOCUMENT_VERSION=V;g.MessageTextSize=W;g.EchoMessageContentSubtype=X;g.EchoMessageContentType=Y;g.EchoXMessageContentType=aa;g.EchoMessagePlaceholderType=Z;g.EchoSerializationOriginType=$;g.encodeEchoMessage=a;g.decodeEchoMessage=e}),98);
__d("EchoMessageMediaFieldUtils",["$InternalEnum","EchoDecodingUtils","EchoEncodingUtils","EchoMessage","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w="X-Object-Id",x="X-Attachment-Object-Ids",y="Attachment-Type",z="Content-Type",A="X-Encrypted-Hash",B="X-Attachment-Type",C="X-Backup-Ent-Fbid",D="X-Backup-Status",E="X-Content-Type",F="X-Direct-Path",G="Height",H="X-Media-Key",I="X-Media-Key-Timestamp",J="Playable-Duration",K="Preview-Height",L="Preview-Content-Type",M="Preview-Width",N="Size",O="Width",P="X-Plaintext-Hash",Q="File-Name",R="Header-Attribution-Content-Type",S=(f=b("$InternalEnum"))({IMAGE:"image",STICKER:"sticker",VIDEO:"video",GIF:"animated_image",PTT:"audio",XMA:"xma",DOCUMENT:"document"}),T=f({IMAGE_JPEG:"image/jpeg",IMAGE_PNG:"image/png",STICKER:"image/webp",GIF:"image/gif",AUDIO_MP4:"audio/mp4",AUDIO_WAV:"audio/wav",XMA:"xma"}),U=f({INVALID:"-1",IMAGE:"0",PTT:"1",AUDIO:"2",DOCUMENT:"3",VIDEO:"4",GIF:"5",STICKER:"6",PROFILE_PICTURE:"7",APP_STATE:"8",HISTORY_SYNC:"9",THUMBNAIL_IMAGE:"10",THUMBNAIL_VIDEO:"11",THUMBNAIL_GIF:"12",THUMBNAIL_DOCUMENT:"13",THUMBNAIL_LINK:"14",NOVI_IMAGE:"15",NOVI_VIDEO:"16",KYCID:"17",WAFFLE_IMAGE:"18",WAFFLE_VIDEO:"19",WAFFLE_GIF:"20",PAYMENT_BG_IMAGE:"21",XMA_IMAGE:"22",PAYMENT_BR_DOCUMENT:"23",BIZ_COVER_PHOTO:"24",MESSENGER_PREVIEW:"25"}),V=f({FULL:"full",PREVIEW:"preview"});function W(a,b){var c=a.attachmentObjectId,e=a.attachmentType,f=a.backupEntFbid,g=a.directPath,n=a.filename,o=a.encryptedHash,p=a.height,q=a.mediaBackupStatus,r=a.mediaContentType,s=a.mediaKey,t=a.mediaKeyTimestamp,u=a.mediaPlayableDuration,v=a.plaintextHash,w=a.previewContentHeight,x=a.previewContentType,y=a.previewContentWidth,z=a.size,A=a.width,B=a.xAttachmentType,C=a.xContentType,D=a.xmaData;a=a.mediaEntryData;if(c==null)d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing attachment object id from required media metadata fields, msgId: ",""])),b);else if(e==null)d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing attachment type from required media metadata fields, msgId: ",""])),b);else if(g==null)d("WALogger").ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing direct path field from required media metadata fields, msgId: ",""])),b);else if(v==null)d("WALogger").ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing plaintextHash field from required media metadata fields, msgId: ",""])),b);else if(C==null)d("WALogger").ERROR(l||(l=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing xContentType field from required media metadata fields, msgId: ",""])),b);else if(B==null)d("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing xAttachmentType field from required media metadata fields, msgId: ",""])),b);else return{attachmentObjectId:c,attachmentType:e,backupEntFbid:f,directPath:g,encryptedHash:o,filename:n,height:p,mediaBackupStatus:q,mediaContentType:r,mediaEntryData:a,mediaKey:s,mediaKeyTimestamp:t,mediaPlayableDuration:u,plaintextHash:v,previewContentHeight:w,previewContentType:x,previewContentWidth:y,size:z,width:A,xAttachmentType:B,xContentType:C,xmaData:D}}function a(a,b){var c;(c=d("EchoEncodingUtils")).echoSetStringField(a,w,b.attachmentObjectId);c.echoSetStringField(a,y,b.attachmentType);c.echoSetStringField(a,P,b.plaintextHash);c.echoSetStringField(a,A,b.encryptedHash);c.echoSetIntField(a,N,b.size);c.echoSetStringField(a,H,b.mediaKey);c.echoSetIntField(a,I,b.mediaKeyTimestamp);c.echoSetStringField(a,F,b.directPath);b.mediaContentType!=null&&d("EchoEncodingUtils").echoSetStringField(a,z,b.mediaContentType);d("EchoEncodingUtils").echoSetIntField(a,O,b.width);d("EchoEncodingUtils").echoSetIntField(a,G,b.height);b.previewContentType!=null&&d("EchoEncodingUtils").echoSetStringField(a,L,b.previewContentType);b.headerAttributionContentType!=null&&d("EchoEncodingUtils").echoSetStringField(a,R,b.headerAttributionContentType);d("EchoEncodingUtils").echoSetIntField(a,M,b.previewContentWidth);d("EchoEncodingUtils").echoSetIntField(a,K,b.previewContentHeight);d("EchoEncodingUtils").echoSetIntField(a,J,b.mediaPlayableDuration);b.xAttachmentType!=null&&d("EchoEncodingUtils").echoSetStringField(a,B,b.xAttachmentType);d("EchoEncodingUtils").echoSetStringField(a,E,b.xContentType);d("EchoEncodingUtils").echoSetStringField(a,C,b.backupEntFbid);d("EchoEncodingUtils").echoSetStringField(a,D,b.mediaBackupStatus);d("EchoEncodingUtils").echoSetStringField(a,Q,b.filename)}function c(a,b,c){var e={},f=!1,g=!1,h=!1;if(ba(a)){var i=$(a,b,c);if(i==null){d("WALogger").ERROR(n||(n=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] multi blob media message: primary attachment object id is null. msgType: "," mediaType: ",""])),b,c);return null}i.length!==2&&d("WALogger").ERROR(o||(o=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Unable to get primary and secondary attachment object ids"])));c=!1;var j=!1,k=i[0];i=i[1];var l={};f=Z(a,e,k);c=Z(a,l,i);g=Y(a,e,b,k,k);j=Y(a,l,b,i,k);h=X(a,e,k);k=X(a,l,i);if(!f||!g||!h||!c||!j||!k)return null;i=d("EchoDecodingUtils").echoDecodeStringField(a,"X-Offline-Threading-ID").result;c=W(e,i);j=W(l,i);if(c!=null&&j!=null)return[c,j]}else{f=Z(a,e);g=Y(a,e,b);h=X(a,e);if(!f||!g||!h)return null;k=W(e);if(k!=null)return[k]}return null}function X(a,b,c){var e,f=d("EchoDecodingUtils").echoDecodeStringField(a,"X-Offline-Threading-ID").result;e=(e=a.get(d("EchoMessage").ECHO_SERIALIZATION_ORIGIN))!=null?e:"";c=[{fieldName:"height",id:G},{fieldName:"width",id:O},{fieldName:"size",id:N},{fieldName:"previewContentHeight",id:K},{fieldName:"previewContentWidth",id:M},{fieldName:"mediaKeyTimestamp",id:c!=null?c+"-"+I:I}];var g=[{attachmentTypes:[U.VIDEO,U.AUDIO],fieldName:"mediaPlayableDuration",id:J}];for(g of g){var h=g.attachmentTypes,i=g.fieldName,j=g.id;j=d("EchoDecodingUtils").echoDecodeIntField(a,j);var k=j.result;j=j.success;if(j&&k!=null)b[i]=k;else if(!(b.xAttachmentType!=null&&!aa(h,b.xAttachmentType)||b.attachmentType===S.XMA)){d("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing "," from media fields. xAttachmentType: ",", AttachmentType: ",". EchoOrigin: "," xOfflineThreadingId: ",""])),i,b.xAttachmentType,b.attachmentType,e,f);return!1}}c.map(function(f){var c=f.fieldName;f=f.id;f=d("EchoDecodingUtils").echoDecodeIntField(a,f);var e=f.result;f=f.success;f&&e!=null&&(b[c]=e)});return!0}function Y(a,b,c,e,f){var g,h=d("EchoDecodingUtils").echoDecodeStringField(a,"X-Offline-Threading-ID").result,i,j;g=(g=a.get(d("EchoMessage").ECHO_SERIALIZATION_ORIGIN))!=null?g:"";var k=[{fieldName:"filename",id:Q}];e!=null&&f!=null?(b.attachmentObjectId=e,i=[{fieldName:"plaintextHash",id:e+"-"+P},{fieldName:"directPath",id:e+"-"+F},{fieldName:"xContentType",id:e+"-"+E}],k.push({fieldName:"mediaKey",id:e+"-"+H}),j=f+"-"+C,e=e+"-"+A):(i=[{fieldName:"attachmentObjectId",id:w},{fieldName:"plaintextHash",id:P},{fieldName:"directPath",id:F},{fieldName:"xContentType",id:E}],k.push({fieldName:"mediaKey",id:H}),j=C,e=A);k.push({fieldName:"backupEntFbid",id:j});k.push({fieldName:"mediaContentType",id:z});k.push({fieldName:"encryptedHash",id:e});j=f!=null?f+"-"+D:D;k.push({fieldName:"mediaBackupStatus",id:j});e=[];for(f of i){j=f.fieldName;i=f.id;i=d("EchoDecodingUtils").echoDecodeStringField(a,i);var l=i.result;i=i.success;i&&l!=null?b[j]=l:e.push(j)}if(e.length>0){i=e.join(", ");c===d("EchoMessage").EchoMessageContentType.XMA?d("WALogger").WARN(q||(q=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing "," from media fields. AttachmentType: "," EchoOrigin: ",""])),i,b.attachmentType,g):d("WALogger").ERROR(r||(r=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing "," from media fields. AttachmentType: "," EchoOrigin: "," xOfflineThreadingId: ",""])),i,b.attachmentType,g,h);return!1}k.map(function(e){var f=e.fieldName;e=e.id;e=d("EchoDecodingUtils").echoDecodeStringField(a,e);var c=e.result;e=e.success;e&&c!=null&&(b[f]=c)});return!0}function Z(a,b,c){var e,f=d("EchoDecodingUtils").echoDecodeStringField(a,"X-Offline-Threading-ID").result;e=(e=a.get(d("EchoMessage").ECHO_SERIALIZATION_ORIGIN))!=null?e:"";var g=d("EchoDecodingUtils").echoDecodeStringField(a,y);g=g.result==="file"?S.DOCUMENT:S.cast(g.result);g!=null&&(b.attachmentType=g);var h=d("EchoDecodingUtils").echoDecodeStringField(a,L);h=T.cast(h.result);h!=null&&(b.previewContentType=h);var i=d("EchoDecodingUtils").echoDecodeStringField(a,R);i=i.result;i!=null&&(b.headerAttributionContentType=i);i=d("EchoDecodingUtils").echoDecodeStringField(a,c!=null?c+"-"+B:B);i.success&&i.result!=null&&(a=ca(i.result),a!=null&&(b.xAttachmentType=a));if(g!=null&&(h!=null||g===S.DOCUMENT||g===S.PTT))return!0;else d("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing enum fields from media fields: attachmentType: "," mediaPreviewContentType: "," mediaAttachmentType: "," EchoOrigin: "," xOfflineThreadingId: ",""])),g,h,i,e,f);return!1}function aa(a,b){return a.reduce(function(a,c){return a||c===b},!1)}function ba(a){return a.has(x)}function $(a,b,c){var e=d("EchoDecodingUtils").echoDecodeObjectIdListField(a,x),f=e.result;e=e.success;if(!e||f==null||f.length!==2){d("WALogger").ERROR(t||(t=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] multi blob media message: can not parse objects ids. "," msgType: "," mediaType: ",""])),f,b,c);return null}e=f.find(function(b){b=b+"-"+D;b=d("EchoDecodingUtils").echoDecodeStringField(a,b);var c=b.result;b=b.success;if(b&&c!=null)return!0});if(e!=null){b=e===f[0]?f[1]:f[0];return[e,b]}e=f.find(function(b){b=b+"-"+E;b=d("EchoDecodingUtils").echoDecodeStringField(a,b);var c=b.result;b=b.success;if(b&&c!=null&&V.cast(c)===V.FULL)return!0});if(e!=null){c=e===f[0]?f[1]:f[0];return[e,c]}return f}function ca(a){var b=U.cast(a);b==null&&d("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Invalid media attachment type: ",""])),a);return b!=null?b:U.INVALID}function e(a){var b={};b=Z(a,b);if(!b)return null;b=d("EchoDecodingUtils").echoDecodeStringField(a,z);var c=d("EchoDecodingUtils").echoDecodeIntField(a,G),e=d("EchoDecodingUtils").echoDecodeIntField(a,O);a=d("EchoDecodingUtils").echoDecodeStringField(a,y);if(!b.success||!c.success||!e.success||!a.success||b.result==null||c.result==null||e.result==null||a.result==null){d("WALogger").ERROR(v||(v=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing media fields for receiver fetch"])));return null}return{mimetype:b.result,previewHeight:c.result,previewWidth:e.result,type:a.result}}g.ECHO_MESSAGE_FIELD_NAME_ATTACHMENT_OBJECT_ID=w;g.ECHO_MESSAGE_FIELD_NAME_ATTACHMENT_OBJECT_IDS=x;g.ECHO_MESSAGE_FIELD_NAME_ATTACHMENT_TYPE=y;g.AttachmentType=S;g.EchoMessageMediaPreviewType=T;g.EchoMessageActMediaAttachmentType=U;g.convertMediaMetadataDetailsToMediaMetadata=W;g.echoMessageSetMediaMetadataFields=a;g.echoMessageDecodeMediaDataFields=c;g.setMediaIntFields=X;g.setMediaEnumFields=Z;g.getAttachmentObjectIdsFromMultiBlobMediaMsg=$;g.decodeReceiverFetchData=e}),98);
__d("EchoMessageMediaGroupFieldUtil",["EchoDecodingUtils","EchoEncodingUtils","EchoMessage"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b.groupId!=null&&d("EchoEncodingUtils").echoSetStringField(a,d("EchoMessage").ECHO_MESSAGE_FIELD_GROUP_ID,b.groupId),b.groupIndex!=null&&d("EchoEncodingUtils").echoSetIntField(a,d("EchoMessage").ECHO_MESSAGE_FIELD_GROUP_INDEX,b.groupIndex),b.groupSize!=null&&d("EchoEncodingUtils").echoSetIntField(a,d("EchoMessage").ECHO_MESSAGE_FIELD_GROUP_SIZE,b.groupSize)}function b(a,b){var c=d("EchoDecodingUtils").echoDecodeStringField(a,d("EchoMessage").ECHO_MESSAGE_FIELD_GROUP_ID);c.success&&c.result!=null&&(b.groupId=c.result);c=d("EchoDecodingUtils").echoDecodeIntField(a,d("EchoMessage").ECHO_MESSAGE_FIELD_GROUP_INDEX);c.success&&c.result!=null&&(b.groupIndex=c.result);c=d("EchoDecodingUtils").echoDecodeIntField(a,d("EchoMessage").ECHO_MESSAGE_FIELD_GROUP_SIZE);c.success&&c.result!=null&&(b.groupSize=c.result)}g.echoMessageSetMediaGroupFields=a;g.decodeMessageMediaGroupFields=b}),98);
__d("EchoMessageQuoteFieldUtils",["$InternalEnum","EchoDecodingUtils","EchoEncodingUtils"],(function(a,b,c,d,e,f,g){"use strict";var h="Reply-Message-Id",i="Reply-Message-Sender",j="Reply-Sort-Order",k="Reply-Type",l="Reply-Status",m=b("$InternalEnum").Mirrored(["BUMP"]),n=b("$InternalEnum")({VALID:"valid"});function a(a){var b={quoteMessageId:"<not set>",quoteMessageSender:{localKey:"<not set>",transportKey:"<not set>"},quoteSortOrderInMs:0},c=o(a,b),d=p(a,b),e=q(a,b);a=r(a,b);return!c||!d||!e||!a?null:b}function c(a,b){b=b.quoteData;if(b==null)return;d("EchoEncodingUtils").echoSetStringField(a,h,b.quoteMessageId);d("EchoEncodingUtils").echoSetAddressField(a,i,b.quoteMessageSender);d("EchoEncodingUtils").echoSetIntField(a,j,b.quoteSortOrderInMs);b.status!=null&&d("EchoEncodingUtils").echoSetStringField(a,l,b.status);b.replyType!=null&&d("EchoEncodingUtils").echoSetStringField(a,k,b.replyType)}function o(a,b){var c=[{fieldName:"quoteMessageSender",id:i}];for(c of c){var e=c.fieldName,f=c.id;f=d("EchoDecodingUtils").echoDecodeAddressField(a,f);var g=f.result;f=f.success;if(f&&g!=null)b[e]=g;else return!1}return!0}function p(a,b){var c=[{fieldName:"quoteMessageId",id:h}];for(c of c){var e=c.fieldName,f=c.id;f=d("EchoDecodingUtils").echoDecodeStringField(a,f);var g=f.result;f=f.success;if(f&&g!=null)b[e]=g;else return!1}return!0}function q(a,b){var c=[{fieldName:"quoteSortOrderInMs",id:j}];for(c of c){var e=c.fieldName,f=c.id;f=d("EchoDecodingUtils").echoDecodeIntField(a,f);var g=f.result;f=f.success;if(f&&g!=null)b[e]=g;else return!1}return!0}function r(a,b){var c=d("EchoDecodingUtils").echoDecodeStringField(a,k);c=m.cast(c.result);c!=null&&(b.replyType=c);c=d("EchoDecodingUtils").echoDecodeStringField(a,l);a=n.cast(c.result);a!=null&&(b.status=a);return!0}g.EchoMessageQuoteReplyType=m;g.EchoMessageQuoteStatus=n;g.echoMessageDecodeQuoteFields=a;g.echoMessageSetQuoteFields=c}),98);
__d("EchoMessageReceiptStatusFieldUtils",["$InternalEnum","EchoCommonUtils","EchoDecodingUtils","EchoEncodingUtils","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i="Receipt-Status",j="Receipt-Timestamp",k=b("$InternalEnum")({UNKNOWN:"unknown",SENDING:"sending",SERVER_RECEIVED:"server_received",DELIVERED:"delivered",READ:"read",ERROR:"error",NON_RETRYABLE_ERROR:"non_retryable_error"});function a(a,b){if(b==null||b.length===0)return;b.forEach(function(b){d("EchoEncodingUtils").echoSetStringField(a,d("EchoCommonUtils").getEchoAddressFieldNameWithSuffix(b.address,i),b.status),b.timestampMs!=null&&d("EchoEncodingUtils").echoSetIntField(a,d("EchoCommonUtils").getEchoAddressFieldNameWithSuffix(b.address,j),b.timestampMs)})}function c(a){var b=[];l(a).forEach(function(c){var e=d("EchoCommonUtils").getEchoAddressFieldNameWithSuffix(c,i);e=d("EchoDecodingUtils").echoDecodeStringField(a,e);if(e.success){e=(e=k.cast(e.result))!=null?e:k.UNKNOWN;var f=d("EchoCommonUtils").getEchoAddressFieldNameWithSuffix(c,j);f=d("EchoDecodingUtils").echoDecodeNullableIntField(a,f);f.result!=null?b.push({address:c,status:e,timestampMs:f.result}):b.push({address:c,status:e})}});return b}function l(a){var b=new Set();for(a of a.keys())if(a.includes(i))try{var c=a.split("@"),e=c[0];c=m(c[1]);b.add({localKey:e,transportKey:c})}catch(a){d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Error occurred while decoding participants from echo doc, error: ",""])),a)}return Array.from(b)}function m(a){a=a.split(i);return a[0].split("-")[0]}g.MessageReceiptStatus=k;g.echoMessageSetReceiptStatusDataFields=a;g.echoMessageDecodeReceiptStatusDataFields=c}),98);
__d("EchoMessageXMAFieldUtils",["$InternalEnum","EchoDecodingUtils","EchoEncodingUtils","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l="XMA-Default-CTA",m="XMA-Gating-Type",n="XMA-Header-Subtitle",o="XMA-Header-Title",p="XMA-Is-Tombstoned",q="XMA-Layout-Type",r="XMA-Max-Subtitle-Num-Lines",s="XMA-Max-Title-Num-Lines",t="XMA-Subtitle-Text",u="XMA-Target-Expiry",v="XMA-Target-ID",w="XMA-Target-Type",x="XMA-Target-Username",y="XMA-Title-Text",z="XMA-Content-Ref",A="XMA-Dataclass",B=b("$InternalEnum").Mirrored(["SINGLE","HSCROLL","VSTACK","PORTRAIT","STANDARD_DXMA","LIST_DXMA","GRID"]),C=b("$InternalEnum").Mirrored(["NONE","IG_STORY_PHOTO_MENTION","IG_SINGLE_IMAGE_POST_SHARE","IG_MULTIPOST_SHARE","IG_SINGLE_VIDEO_POST_SHARE","IG_STORY_PHOTO_SHARE","IG_STORY_VIDEO_SHARE","IG_CLIPS_SHARE","IG_IGTV_SHARE","IG_SHOP_SHARE","IG_PROFILE_SHARE","IG_STORY_PHOTO_HIGHLIGHT_SHARE","IG_STORY_VIDEO_HIGHLIGHT_SHARE","IG_STORY_REPLY","IG_STORY_REACTION","FB_FEED_SHARE","FB_STORY_REPLY","FB_STORY_SHARE","FB_STORY_MENTION","FB_FEED_VIDEO_SHARE","FB_GAMING_CUSTOM_UPDATE","FB_PRODUCER_STORY_REPLY","FB_PROFILE_DIRECTORY_ITEM","MSG_EXTERNAL_LINK_SHARE","MSG_RECEIVER_FETCH","RTC_AUDIO_CALL","RTC_VIDEO_CALL","RTC_MISSED_AUDIO_CALL","RTC_MISSED_VIDEO_CALL","RTC_GROUP_AUDIO_CALL","RTC_GROUP_VIDEO_CALL","FB_EVENT","FB_SHORT","MSG_LOCATION_SHARING","MSG_LOCATION_SHARING_V2","MSG_MEMORIES_SHARE"]),D=b("$InternalEnum").Mirrored(["NONE","PRIVATE","SENSITIVE","MISINFORMATION","MEDIA_LABEL","POST_COVER","POST_LABEL","WARNING_SCREENS","INFO","EYE_OFF","NEWS_OFF","WARNING"]);function a(a,b){b.xmaLayoutType!=null&&d("EchoEncodingUtils").echoSetStringField(a,q,b.xmaLayoutType),b.xmaTargetType!=null&&d("EchoEncodingUtils").echoSetStringField(a,w,b.xmaTargetType),d("EchoEncodingUtils").echoSetStringField(a,x,b.xmaTargetUsername),d("EchoEncodingUtils").echoSetStringField(a,v,b.xmaTargetId),b.xmaTargetExpiry!=null&&d("EchoEncodingUtils").echoSetIntField(a,u,b.xmaTargetExpiry),d("EchoEncodingUtils").echoSetStringField(a,l,b.xmaDefaultCTA),d("EchoEncodingUtils").echoSetStringField(a,o,b.xmaHeaderTitle),d("EchoEncodingUtils").echoSetStringField(a,n,b.xmaHeaderSubtitle),d("EchoEncodingUtils").echoSetStringField(a,y,b.xmaTitleText),d("EchoEncodingUtils").echoSetStringField(a,t,b.xmaSubtitleText),b.xmaMaxTitleNumLines!=null&&d("EchoEncodingUtils").echoSetIntField(a,s,b.xmaMaxTitleNumLines),b.xmaMaxSubtitleNumLines!=null&&d("EchoEncodingUtils").echoSetIntField(a,r,b.xmaMaxSubtitleNumLines),b.xmaGatingType!=null&&d("EchoEncodingUtils").echoSetStringField(a,m,b.xmaGatingType),b.xmaDataclass!=null&&d("EchoEncodingUtils").echoSetStringField(a,A,b.xmaDataclass),d("EchoEncodingUtils").echoSetBooleanField(a,p,b.xmaIsTombstoned),b.xmaContentRef!=null&&d("EchoEncodingUtils").echoSetStringField(a,z,b.xmaContentRef)}function c(a){var b=G(a,p);if(b==null){d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing xmaIsTombstoned from xma fields"])));return null}var c=D.cast(d("EchoDecodingUtils").echoDecodeStringField(a,m).result),e=B.cast(d("EchoDecodingUtils").echoDecodeStringField(a,q).result),f=C.cast(d("EchoDecodingUtils").echoDecodeStringField(a,w).result);return{xmaContentRef:E(a,z),xmaDataclass:E(a,A),xmaDefaultCTA:E(a,l),xmaGatingType:c,xmaHeaderSubtitle:E(a,n),xmaHeaderTitle:E(a,o),xmaIsTombstoned:b,xmaLayoutType:e,xmaMaxSubtitleNumLines:F(a,r),xmaMaxTitleNumLines:F(a,s),xmaSubtitleText:E(a,t),xmaTargetExpiry:F(a,u),xmaTargetId:E(a,v),xmaTargetType:f,xmaTargetUsername:E(a,x),xmaTitleText:E(a,y)}}function E(a,b){a=d("EchoDecodingUtils").echoDecodeStringField(a,b);var c=a.result;a=a.success;if(a&&c!=null)return c;else d("WALogger").WARN(i||(i=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing "," from media fields"])),b)}function F(a,b){a=d("EchoDecodingUtils").echoDecodeIntField(a,b);var c=a.result;a=a.success;if(a&&c!=null)return c;else d("WALogger").WARN(j||(j=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing "," from xma fields"])),b)}function G(a,b){a=d("EchoDecodingUtils").echoDecodeBooleanField(a,b);var c=a.result;a=a.success;if(a&&c!=null)return c;else d("WALogger").WARN(k||(k=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing "," from xma fields"])),b)}g.XMALayoutType=B;g.XMAContentType=C;g.XMAGatingType=D;g.echoMessageSetXMAFields=a;g.decodeXMAFields=c}),98);
__d("EncryptedBackupTaskFailureFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5725");b=d("FalcoLoggerInternal").create("encrypted_backup_task_failure",a);e=b;g["default"]=e}),98);
__d("EncryptedBackupTaskIssuedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5726");b=d("FalcoLoggerInternal").create("encrypted_backup_task_issued",a);e=b;g["default"]=e}),98);
__d("EncryptedBackupUploadSuccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5729");b=d("FalcoLoggerInternal").create("encrypted_backup_upload_success",a);e=b;g["default"]=e}),98);
__d("EphemeralMediaViewMode",[],(function(a,b,c,d,e,f){a=Object.freeze({READ_ONCE:0,REPLAYABLE:1,PERMANENT:2});f["default"]=a}),66);
__d("LSEBPayloadSerializerError",[],(function(a,b,c,d,e,f){a=Object.freeze({INVALID_BACKUP_OPERATION:-7,INVALID_CONTENT_TYPE:-6,INVALID_PAYLOAD_FORMAT:-5,CQL_DB_ERROR:-4,REQUIRED_COLUMN_NOT_PRESENT_ON_CLIENT:-3,DEPRECATED_SPROC:-2,UNKNOWN_ERROR:-1,NOT_AN_ERROR:0,BACKUP_NOT_FOUND:1,REQUIRED_TABLE_NOT_FOUND:2,NATIVE_OP_NOT_FOUND:3,BACKUP_UPLOAD_KILLSWITCHED:4,TASK_ID_NOT_FOUND:5,NOT_IMPLEMENTED:6,NOT_SUPPORTED_ON_WEB:7,DUPLICATE_TASK:8,CLIENT_STATE_NOT_LOADED:9,RECOVERY_CODE_NOT_FOUND:10,EPOCH_KEYS_NOT_FOUND:11,DEVICE_PAYLOAD_NOT_CREATED:12,NULL_DEVICE_PAYLOAD:13,EPOCH_PAYLOAD_NOT_CREATED:14,NULL_EPOCH_PAYLOAD:15,VIRTUAL_DEVICE_PAYLOAD_NOT_CREATED:16,NULL_VIRTUAL_DEVICE_PAYLOAD:17,DEVICE_METADATA_NOT_FOUND:18,NO_MATCHING_DEVICE_PUBLIC_KEY:19,NULL_MAILBOX_ROOT_KEY:20,NULL_ENCRYPTION_VERSION:21,NULL_OCMF_KEY:22,NULL_EPOCH_KEYS:23,NULL_DEVICE_ID:24,OPE_KEY_DERIVATION_FAILED:25,MESSAGE_KEY_DERIVATION_FAILED:26,NULL_MAILBOX_ROOT_KEY_V2:27,ECHO_DOCUMENT_ENCODING_FAILED:30,ECHO_PAYLOAD_CREATION_DISABLED:31,ECHO_DOCUMENT_ENCODING_SKIPPED:32,MESSAGE_PAYLOAD_ENCRYPTION_FAILED:40,SERVER_THREAD_ID_NOT_FOUND_FOR_JID:52,UNKNOWN_PROTOBUF_TYPE:60,SUPPLEMENTARY_DATA_KEY_UNEXPECTED:61,PROTOBUF_ENCRYPTION_FAILED:62,PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE:63,PROTOBUF_NOT_FOUND_IN_SUPPLEMENTAL_TABLE:64,SUPPLEMENTAL_KEY_NOT_SET_IN_CONTEXT_TABLE:65,SUPPLEMENTAL_ENCRYPTION_FAILED:66,PROTOBUF_CONTEXT_ROW_NOT_FOUND:67,PROTOBUF_FORMATTING_FAILED:68,SUPPLEMENTAL_FORMATTING_FAILED:69,PROTOBUF_ALREADY_DELETED:70,PROTOBUF_NOT_FOUND_IN_DELETED_MESSAGES_TABLE:71,DELETION_PROTOBUF_IS_NULL:72,PROTOBUF_PAYLOAD_IN_CONTEXT_ROW_IS_NOT_FOUND:73,PROTOBUF_ENCRYPTION_FAILED_RETRYABLE:74,VALUE_SECRET_REF_INVALID:75,MINOS_ENCRYPTION_RESULT_NULL:76,SUPPLEMENTAL_OTID_NOT_SET_IN_CONTEXT_TABLE:77,SNAPSHOT_NOT_FOUND_FAILURE:78,THREAD_PK_NOT_FOUND_FOR_JID:100,MESSAGE_DECRYPTION_FAILED:101,EPOCH_KEY_FETCH_FAILED:102,TOO_MANY_OPEN_EPOCHS:103,MESSAGE_RANGE_PREPARE_FAILURE:104,ECHO_DOCUMENT_RESTORE_FAILED:105,MISMATCH_POINT_QUERY_MESSAGE_AND_RANGE_LENGTH:106,INITIAL_THREADS_FETCH_FOR_RESTORE_FAILED:107,MISSING_SUPPLEMENTAL_KEY_CIPHERTEXT:108,SUPPLEMENTAL_KEY_DECRYPTION_FAILURE:109,DEVICE_ID_MISMATCH:110,RESTORE_TO_TAM_INFO:111,MISSING_SERVER_THREAD_KEY:112,EB_ADD_DEVICE_FOUND_NO_LOCAL_THREADS:113,EB_MORE_THREADS_IN_MAPPING_TABLE:114,RESTORE_INTEGRITY_CHECK_FAILED:115,RESTORE_TOP_LEVEL_PROTOBUF_NULL:116,DECRYPT_MINOS_PROTOBUF_FAILURE:117,MESSAGE_PK_NOT_FOUND_IN_CLIENT_MESSAGES:200,OTID_NOT_FOUND_IN_ACT_MESSAGES:201,THREAD_ID_NOT_FOUND_IN_ACT_THREADS:202,THREAD_PK_NOT_FOUND_IN_CLIENT_THREADS:203,FAILED_TO_GET_THREAD_SORT_KEY:204,MEDIA_INFO_INVALID:205,REVERB_DB_NOT_ENABLED_FOR_INSTAMADILLO:206,SKIPPED_EB_DISABLED:300,SKIPPED_THREAD_NOT_ELIGIBLE:301,SKIPPED_MESSAGE_NOT_ELIGIBLE:302,NO_EPOCHS_FOUND:400,LATEST_EPOCH_QUERY_BY_ID_FAILED:401,FOUND_EPOCH_WITH_NULL_ROOT_KEY:402,FOUND_EPOCH_WITH_NULL_ANON_ID:403,NO_RECOVERY_CODE:501,NO_ERROR:601,ERROR_GENERAL:602,UNKNOWN:603,ONBOARDING_MATERIAL_DERIVATION_FAILURE:604,NULL_DEVICE_HMAC:605,MISSING_LATEST_EPOCH_AT_ONBOARDING:606,NO_THREADS_TO_COMPARE:701,START_SORT_KEY_FAILURE:702,END_SORT_KEY_FAILURE:703,LOOPING_UPLOAD_PAYLOAD_NOT_FOUND:704,NULL_ECHO_IDENTIFIERS:705,ECHO_TIMESTAMP_CONVERSION_FAILED:706,ECHO_PROTOBUF_THREAD_ID_MISMATCH:707,ECHO_PROTOBUF_TIMESTAMP_MISMATCH:708,ECHO_PROTOBUF_OTID_MISMATCH:709,NULL_ECHO_DOCUMENT:710,INVALID_PROTOBUF_BACKUP_ACTION:711,EMPTY_ENCODED_ECHO_DOCUMENT:712,LOOPING_UPLOAD_TASK_QUEUE_FULL:713,ECHO_DOCUMENT_ENCODING_UNKNOWN_ENCODING_ERROR:750,ECHO_DOCUMENT_ENCODING_MESSAGE_PK_NOT_FOUND_ERROR:751,ECHO_DOCUMENT_ENCODING_DISK_WRITE_CHECK_FAILED:752,ECHO_DOCUMENT_ENCODING_THREAD_TRANSPORT_ID_FETCH_FAILED:753,ECHO_DOCUMENT_ENCODING_FILE_WRITE_FAILED:754,ECHO_DOCUMENT_ENCODING_DISK_WRITE_DISABLED:755,ECHO_DOCUMENT_ENCODING_SHOULD_NOT_PERSIST:756,MISSING_SUPPLEMENTAL_DATA:757,ECHO_DOCUMENT_ENCODING_MESSAGE_FIELDS_REPLY_PROXY_ERROR:758,ECHO_DOCUMENT_ENCODING_MESSAGE_FIELDS_EDIT_MESSAGE_QUERY_ERROR:759,ECHO_DOCUMENT_ENCODING_MESSAGE_FIELDS_EDIT_MESSAGE_ERROR:760,ECHO_DOCUMENT_ENCODING_MESSAGE_FIELDS_RECEIPTS_ERROR:761,ECHO_DOCUMENT_ENCODING_MESSAGE_FIELDS_REACTIONS_ERROR:762,ECHO_DOCUMENT_ENCODING_MESSAGE_FIELDS_VISUAL_MESSAGE_ACTIONS_ERROR:763,ECHO_DOCUMENT_ENCODING_MESSAGE_FIELDS_POLLS_ERROR:764,READ_CLIENT_STATE_FROM_MAIN_DB_ERROR:801,NOT_SUPPORTED_ON_MAIN_DB:802,SKIP_MPS_WRITE_DUE_TO_HIGHER_TIMESTAMP_AVAILABILITY:851,MESSAGE_ALREADY_DELETED:852});f["default"]=a}),66);
__d("LSQplAnnotateInt.nop",["EBMarkerIdToQPLEvent","I64","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(a,e,f,g,j,k){try{a=c("nullthrows")(d("EBMarkerIdToQPLEvent").markerIdToQPLEvent(f));e=d("WAHashStringToNumber").hashStringToNumber(g);c("QPLUserFlow").addAnnotations(a,{"int":(f={},f[j]=(i||(i=d("I64"))).to_int32(k),f)},{instanceKey:e});return(h||(h=b("Promise"))).resolve()}catch(a){return(h||(h=b("Promise"))).resolve()}};a.__nop_name__="LSQplAnnotateInt";g["default"]=a}),98);
__d("MAWDexieCastToPromise",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a){return(g||(g=b("Promise"))).resolve(a)}function c(a){return a}f.dexieCastToPromise_I_KNOW_WHAT_I_AM_DOING=a;f.promiseCastToDexiePromise_I_KNOW_WHAT_I_AM_DOING=c}),66);
__d("MAWRavenUtils",["EphemeralMediaViewMode","MAWMsg","RavenMessagingState"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){switch(a){case d("MAWMsg").MAWRavenMsgEphemeralMediaState.PERMANENT:return c("RavenMessagingState").PERMANENT;case d("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN:return c("RavenMessagingState").UNSEEN;case d("MAWMsg").MAWRavenMsgEphemeralMediaState.SEEN:return c("RavenMessagingState").SEEN;case d("MAWMsg").MAWRavenMsgEphemeralMediaState.REPLAYED:return c("RavenMessagingState").REPLAYED;case d("MAWMsg").MAWRavenMsgEphemeralMediaState.EXPIRED:return c("RavenMessagingState").EXPIRED}},i=function(a){switch(a){case d("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT:return c("EphemeralMediaViewMode").PERMANENT;case d("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY:return c("EphemeralMediaViewMode").REPLAYABLE;case d("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE:return c("EphemeralMediaViewMode").READ_ONCE}};b=function(a,b){return{ephemeralMediaState:b,ephemeralMediaViewMode:i(a)}};function a(a,b){switch(b){case d("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE:return a===d("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN?c("RavenMessagingState").SEEN:h(a);case d("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY:if(a===d("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN)return c("RavenMessagingState").SEEN;else if(a===d("MAWMsg").MAWRavenMsgEphemeralMediaState.SEEN)return c("RavenMessagingState").REPLAYED;return h(a);case d("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT:return h(a)}}g.getEphemeralMediaState=h;g.getEphemeralMediaViewMode=i;g.deriveRavenSettings=b;g.getNextRavenMessageEphemeralState=a}),98);
__d("MAWMediaAfterTxns",["MAWBridgeTypesCreators","MAWDbMedia","MAWDexieCastToPromise","MAWDexieTable","MAWIndexedDb","MAWMediaUtils","MAWRavenUtils","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e,f,g,j){if(c("gkx")("9695"))return h(a,b,e,f,g,j);i(a,b,e,f,g,j);return d("MAWDexieTable").dexieResolve()}function h(a,b,c,e,f,g){return e.messages.where("msgId").anyOf(b.msgIds).toArray().then(function(h){var i=a.threadJid,k=d("MAWBridgeTypesCreators").getMsgIdsFilteredByJid(h,i);h=d("MAWMediaUtils").createHdTypesForBridgeMedia(h);i=a.ravenEphemeralType!=null&&a.ravenEphemeralMediaState!=null?d("MAWBridgeTypesCreators").createBridgeMedia({chatJid:i,filteredMsgIds:k,hasMediaForUI:c,hdTypes:h,media:b,ravenSettings:d("MAWRavenUtils").deriveRavenSettings(a.ravenEphemeralType,a.ravenEphemeralMediaState),sortOrderMs:a.sortOrderMs,transportKey:g}):d("MAWBridgeTypesCreators").createBridgeMedia({chatJid:i,filteredMsgIds:k,hasMediaForUI:c,hdTypes:h,media:b,sortOrderMs:a.sortOrderMs,transportKey:g});return j(e,babelHelpers["extends"]({},i,{skipShouldUpdateHasMore:f}))})}function i(a,b,e,f,g,h){c("promiseDone")(d("MAWDexieCastToPromise").dexieCastToPromise_I_KNOW_WHAT_I_AM_DOING(f.messages.where("msgId").anyOf(b.msgIds).toArray().then(function(c){var i=a.threadJid,j=d("MAWBridgeTypesCreators").getMsgIdsFilteredByJid(c,i);c=d("MAWMediaUtils").createHdTypesForBridgeMedia(c);i=a.ravenEphemeralType!=null&&a.ravenEphemeralMediaState!=null?d("MAWBridgeTypesCreators").createBridgeMedia({chatJid:i,filteredMsgIds:j,hasMediaForUI:e,hdTypes:c,media:b,ravenSettings:d("MAWRavenUtils").deriveRavenSettings(a.ravenEphemeralType,a.ravenEphemeralMediaState),sortOrderMs:a.sortOrderMs,transportKey:h}):d("MAWBridgeTypesCreators").createBridgeMedia({chatJid:i,filteredMsgIds:j,hasMediaForUI:e,hdTypes:c,media:b,sortOrderMs:a.sortOrderMs,transportKey:h});l(f,babelHelpers["extends"]({},i,{skipShouldUpdateHasMore:g}))})))}function j(a,b,e){if(c("gkx")("9695"))return k(a,b,e);l(a,b,e);return d("MAWDexieTable").dexieResolve()}function k(a,b,c){if(!m(b)){d("MAWIndexedDb").afterTransaction({tag:"NewMedia",value:b});return d("MAWDexieTable").dexieResolve()}return d("MAWMediaUtils").getBridgeMediaAnnotatedForDisplay(a,b,c).then(function(a){d("MAWIndexedDb").afterTransaction({tag:"NewMedia",value:a})})}function l(a,b,e){if(!m(b))return d("MAWIndexedDb").afterTransaction({tag:"NewMedia",value:b});c("promiseDone")(d("MAWDexieCastToPromise").dexieCastToPromise_I_KNOW_WHAT_I_AM_DOING(d("MAWMediaUtils").getBridgeMediaAnnotatedForDisplay(a,b,e).then(function(a){d("MAWIndexedDb").afterTransaction({tag:"NewMedia",value:a})})))}function m(a){if(a.ephemeralMediaState!=null||a.ephemeralMediaViewMode!=null)return!1;switch(a.mediaType){case d("MAWDbMedia").MEDIA_TYPE.IMAGE:case d("MAWDbMedia").MEDIA_TYPE.VIDEO:case d("MAWDbMedia").MEDIA_TYPE.GIF:case d("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE:return!0;default:return!1}}g.handleNewMediaAfterTxn=a;g.handleNewMediaAfterTxnWithBridgeMedia=j}),98);
__d("MAWMediaDownloadStatusForUI",["MAWBridge","MAWLoggerUtils","MAWMediaDownloadStatus","MWFBLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("MWFBLogger").MWMediaLogger().tags([d("MAWLoggerUtils").Tag.MediaDownload,d("MAWLoggerUtils").Tag.MessageReceive]);function a(a){var b=a.details,c=a.hash,d=a.status,e=a.type;a=a.validationResult;j({details:b,hash:c,status:d,type:e,validationResult:a})}function j(a){var b=a.details,c=a.hash,e=a.status,f=a.type;a=a.validationResult;d("MAWBridge").getBridge().fireAndForget("event","updateMediaStatus",{details:b,key:c,status:e,type:f,validationResult:a})}function b(a){switch(a){case"disconnected":case"backoff":case"body-network-error":case"no-host":case"download-throttled":case"max-attempts-exceeded":case"runtime-error":case"access-expired":case"http-fetch-exception":case"http-fetch-aborted":case"unspecified-http-error":case"server-timeout":return c("MAWMediaDownloadStatus").MANUAL_RETRYABLE_FAILURE;case"request-error":case"media-not-found":case"media-entry-invalid":case"media-entry-invalid-direct-path":case"media-entry-invalid-file-enc-sha256":case"media-entry-invalid-file-sha256":case"media-entry-invalid-media-key":case"media-entry-invalid-server-media-type":case"decryption-error":case"enc-hash-mismatch":case"hash-mismatch":case"ciphertext-hash-mismatch":case"signature-expired":return c("MAWMediaDownloadStatus").NOT_MANUAL_RETRYABLE_FAILURE;default:a;i.MUSTFIX(h||(h=babelHelpers.taggedTemplateLiteralLoose(["getStatusTypeFromWAAPIDownloadMediaError: Unknown error type ",""])),String(a));return c("MAWMediaDownloadStatus").MANUAL_RETRYABLE_FAILURE}}g.sendMediaDownloadStatusToUI=a;g.getStatusFromWAAPIDownloadMediaError=b}),98);
__d("MessageBackupSupplementalKeyGenerator",["$InternalEnum","MAWJids","WAGlobals","WAJids","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=b("$InternalEnum")({REACTION:"reaction",EDIT:"edit",RAVEN_ACTION_MESSAGE:"raven_action_message"}),i=":";function a(a,b){return""+a+i+b}function c(a){return a.split(i)[1]}function j(a,b){b=b.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");b=new RegExp("^"+b,"i");return b.test(a)}function e(a){return j(a,h.REACTION)}function f(a){return j(a,h.EDIT)}function k(a){return j(a,h.RAVEN_ACTION_MESSAGE)}function l(a){var b=a.split(i);if(b.length===1)return{rawIdentifierString:a,type:"poll_update"};var c=b[0];if(b.length<2||b.length>3)return{prefix:c,rawIdentifierString:a,type:"unknown"};var e=b[1];e=d("MAWJids").toUserJid(e);if(c===h.REACTION)return{senderJid:e,type:"reaction"};b=b.length===3?d("WATimeUtils").castToMillisTime(Number(b[2])):null;if(c===h.RAVEN_ACTION_MESSAGE)return{senderJid:e,type:"raven_action_message"};if(b==null)return{prefix:c,rawIdentifierString:a,type:"unknown"};return c===h.EDIT?{senderJid:e,ts:b,type:"edit"}:{prefix:c,rawIdentifierString:a,type:"unknown"}}function m(a){switch(a.type){case"edit":return""+h.EDIT+i+d("WAJids").extractUserId(a.senderJid)+i+a.ts.toString();case"reaction":return""+h.REACTION+i+d("WAJids").extractUserId(a.senderJid);case"raven_action_message":return""+h.RAVEN_ACTION_MESSAGE+i+d("WAJids").extractUserId(a.senderJid);case"poll_update":return a.rawIdentifierString}}function n(a){var b;if(d("WAJids").isAuthorMe(a))b=d("WAGlobals").getMyUserJid();else{a=d("WAJids").interpretAndValidateJid(a);if(a.jidType==="msgrUser")b=a.userJid;else return null}a=d("WAJids").userIdFromJid(b);return""+h.REACTION+i+a}function o(a,b){var c;if(d("WAJids").isAuthorMe(a))c=d("WAGlobals").getMyUserJid();else{a=d("WAJids").interpretAndValidateJid(a);if(a.jidType==="msgrUser")c=a.userJid;else return null}a=d("WAJids").userIdFromJid(c);return""+h.EDIT+i+a+i+b.toString()}g.SupplementalKeyPrefix=h;g.SUPPLEMENTAL_KEY_DELIMITER=i;g.createMessageSupplementalKey_DEPRECATED=a;g.getSupplementalSenderId_DEPRECATED=c;g.isSupplementalProtobufAReaction=e;g.isSupplementalProtobufAnEdit=f;g.isSupplementalProtobufARavenAction=k;g.parseIdentifierString=l;g.toIdentifierString=m;g.createReactionSupplementalKey=n;g.createEditSupplementalKey=o}),98);
__d("WAIsMediaExpiredError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){switch(a){case"signature-expired":return!0;case"hash-mismatch":case"ciphertext-hash-mismatch":case"enc-hash-mismatch":case"decryption-error":case"max-attempts-exceeded":case"request-error":case"download-throttled":case"media-not-found":case"media-entry-invalid":case"media-entry-invalid-direct-path":case"media-entry-invalid-file-enc-sha256":case"media-entry-invalid-file-sha256":case"media-entry-invalid-media-key":case"media-entry-invalid-server-media-type":case"no-host":case"backoff":case"body-network-error":case"disconnected":case"runtime-error":case"access-expired":case"http-fetch-exception":case"http-fetch-aborted":case"unspecified-http-error":case"server-timeout":case"missing-expected-hmacs":case"hmac-chiphertext-array-mismatch":return!1;default:a;return!0}};f.isMediaExpiredError=a}),66);/*FB_PKG_DELIM*/
__d("LSAppendDataTraceAddon.nop",["LSAppendDataTraceAddonStoredProcedure","LSFactory","MetaConfig","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,d,e,f,g,i,j){return!c("MetaConfig")._("62")?(h||(h=b("Promise"))).resolve():c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:f,dataTraceId:e,errorMessage:i!=null?i:"",syncChannel:g,tags:j!=null?j:""})};a.__nop_name__="LSAppendDataTraceAddonNop";g["default"]=a}),98);
__d("LSFeatureLimitsType",[],(function(a,b,c,d,e,f){a=Object.freeze({READ_ONLY:1,GENERIC_READ_ONLY_BLOCK:2,MESSAGE_SEND:4,MESSENGER_ONLY_ACCOUNTS_READ_ONLY_BLOCK:8,MESSAGE_SEND_PRIVATE:16,MESSAGE_SEND_PUBLIC:32,MESSAGE_SEND_FROM_PAGE:64,COMMERCE_MESSAGE_SEND:128,PAGE_MESSAGING:256,APPEALABLE_MESSAGE_SEND:512,SCREEN_CAPTURE_VIDEO_CALL:1024,MESSENGER_APPEALABLE_MESSAGE_SEND:2048});f["default"]=a}),66);
__d("genArrayBufferFromFile",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a){return"arrayBuffer"in a&&typeof a.arrayBuffer==="function"?a.arrayBuffer():new(g||(g=b("Promise")))(function(b,c){var d=new FileReader();d.onload=function(){var a=d.result;a instanceof ArrayBuffer?b(a):c()};d.onerror=function(){c(d.error)};d.readAsArrayBuffer(a)})}f["default"]=a}),66);
__d("genIsNonAnimatedWebPFile",["genArrayBufferFromFile"],(function(a,b,c,d,e,f,g){"use strict";var h=8;function a(a){return c("genArrayBufferFromFile")(a).then(function(a){a=new Uint8Array(a);var b=a.slice(12,16).reduce(function(a,b,c){return a+String.fromCharCode(b)},"");if(b==="VP8X"){b=a[20];b=b.toString(2).padStart(8,"0");if(b[6]==="1")return!i(a)}return!0})}function i(a){var b=12,c=0;while(c<2&&b+h<a.length){var d=j(a,b);d==="ANMF"&&c++;d=k(a,b+4);var e=d%2;d=h+d+e;b+=d}return c>1}function j(a,b){return a.slice(b,b+4).reduce(function(a,b,c){return a+String.fromCharCode(b)},"")}function k(a,b){return parseInt(a.slice(b,b+4).reduce(function(a,b,c){return b.toString(2).padStart(8,"0")+a},""),2)}g["default"]=a}),98);
__d("LSGetAttachmentType",["LSIntEnum","MessagingAttachmentType","cometIsMimeTypeForMedia","genIsNonAnimatedWebPFile"],(function(a,b,c,d,e,f,g){"use strict";var h;async function a(a){return a.type==="image/webp"?(h||(h=d("LSIntEnum"))).ofNumber(await c("genIsNonAnimatedWebPFile")(a)?c("MessagingAttachmentType").IMAGE:c("MessagingAttachmentType").VIDEO):i(a)}function i(a){a=a.type;if(d("cometIsMimeTypeForMedia").isMimeTypeForPhoto(a))return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE);else if(a==="audio/wav")return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO);else if(a==="image/gif")return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE);else if(d("cometIsMimeTypeForMedia").isMimeTypeForVideo(a))return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO);else return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE)}g.LSGetAttachmentType=a;g.LSGetAttachmentTypeSyncButLessAccurate=i}),98);
__d("LSGetMessageAttributionParams",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.filter(b.db.table(31).fetch(),function(b){return b.offlineThreadingId===a[0]}).next().then(function(a,b){var d=a.done;a=a.value;return d?(d=[void 0,void 0,void 0],c[0]=d[0],c[1]=d[1],c[2]=d[2],d):(b=a.item,d=[b.threadAttributionSource,b.platformRef,b.platformToken],c[0]=d[0],c[1]=d[1],c[2]=d[2])})},function(a){return a=[c[0],c[1],c[2]],d[0]=a[0],d[1]=a[1],d[2]=a[2],a}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMediaSendGetMessageAttributionParamsStoredProcedure";a.__tables__=["messages_optimistic_context"];e.exports=a}),null);
__d("LSInsertOptimisticAttachment",["LSSetMessageDisplayedContentTypes"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[];return c.sequence([function(d){return c.sequence([function(b){return c.forEach(c.filter(c.db.table(16).fetch([[[a[0],a[2],a[4]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&b.messageId===a[2]&&b.attachmentFbid===a[4]&&c.i64.lt(b.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(16).add({threadKey:a[0],messageId:a[2],attachmentFbid:a[4],timestampMs:a[1],offlineAttachmentId:a[3],attachmentType:a[5],attachmentIndex:a[7],filename:a[6],attributionAppId:a[8],hasMedia:a[9],isSharable:!1,hasXma:a[10],authorityLevel:c.i64.cast([0,20])})},function(d){return c.storedProcedure(b("LSSetMessageDisplayedContentTypes"),a[0],a[2],a[1],void 0,!1,c.i64.eq(a[5],c.i64.cast([0,1]))||c.i64.eq(a[5],c.i64.cast([0,15])))}])},function(a){return c.resolve(d)}])}a.__sproc_name__="LSMailboxInsertOptimisticAttachmentStoredProcedure";a.__tables__=["attachments"];e.exports=a}),null);
__d("LSInsertPhase2PendingTask",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return c.db.table(12).fetch([[[a[0]]],"optimistic"]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[0]=void 0:(b=a.item,d[0]=b.threadKey)})},function(e){return c.i64.neq(d[0],void 0)?c.sequence([function(e){return c.storedProcedure(b("LSIssueNewTask"),[c.i64.to_string(d[0]),"_multi_media"].join(""),c.i64.cast([0,4]),a[0],void 0,void 0,a[1],c.i64.cast([0,0]),c.i64.cast([0,29]),void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return d[2]=void 0}]):c.resolve(d[2]=c.i64.cast([0,1002]))},function(a){return e[0]=d[2]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMediaSendInsertPhase2PendingTaskStoredProcedure";a.__tables__=["messages"];e.exports=a}),null);
__d("LSIssueNewTaskWithExtraOperationsAndGetTaskID",["LSIssueNewTaskAndGetTaskID","LSMailboxTaskCompletionApiOnTaskInsertion"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[11]).then(function(a){return a=a,d[0]=a[0],a})},function(a){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskInsertion"),d[0])},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSCoreIssueNewTaskWithExtraOperationsAndGetTaskIDStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSPredefineTraceForTask",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.sequence([function(d){return c[0]=b.i64.of_float(Date.now()),b.forEach(b.db.table(2).fetch([[[a[1]]]]),function(b){var d=b.update;b.item;return d({dataTraceId:a[0],initTraceTimestampMs:c[0]})})},function(d){return b.db.table(153).add({traceId:a[0],initTimestampMs:c[0],foregroundTimestampMs:b.i64.cast([0,0]),traceType:b.i64.cast([0,1]),shouldFlush:!1,contextOne:a[2],contextTwo:b.i64.to_string(a[1]),predefinedId:a[3]})}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSDataTracePredefineTraceForTaskStoredProcedure";a.__tables__=["pending_tasks","data_trace_meta"];e.exports=a}),null);
__d("LSIssueSendAttachmentMessageTask",["LSAppendDataTraceAddon","LSArrayGetObjectAt","LSIssueNewTaskWithExtraOperationsAndGetTaskID","LSPredefineTraceForTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=c.i64.of_int32(a[5].length),c.i64.gt(d[0],c.i64.cast([0,0]))?c.loopAsync(d[0],function(e){return d[7]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[5],d[7]).then(function(a){return a=a,d[8]=a[0],d[9]=a[1],a})},function(b){return c.forEach(c.filter(c.db.table(16).fetch([[[a[1],a[3]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[3]&&c.i64.eq(b.attachmentIndex,d[7])&&c.i64.eq(b.authorityLevel,c.i64.cast([0,20]))}),function(a){var b=a.update;a.item;return b({attachmentFbid:c.i64.to_string(d[8])})})}])}):c.resolve()},function(b){return a[9]?d[1]=c.i64.cast([0,9]):d[1]=c.i64.cast([0,3]),c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[2]=c.i64.cast([0,1]):(b=a.item,d[8]=b.syncGroup,c.i64.neq(d[8],void 0)?d[7]=d[8]:d[7]=c.i64.cast([0,1]),d[2]=d[7])})},function(e){return c.storedProcedure(b("LSIssueNewTaskWithExtraOperationsAndGetTaskID"),c.i64.to_string(a[1]),c.i64.cast([0,46]),"",void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),d[2],void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[4]=a[0],a})},function(e){return a[12]!==void 0?c.sequence([function(e){return c.storedProcedure(b("LSPredefineTraceForTask"),a[12],d[4],c.i64.to_string(c.i64.cast([0,46])),a[3])},function(d){return c.storedProcedure(b("LSAppendDataTraceAddon"),a[12],c.i64.cast([0,20]),c.i64.cast([0,1]),void 0,void 0)}]):c.resolve()},function(b){return d[5]=new c.Map(),d[6]=c.createArray(),c.db.table(31).add({taskId:d[4],threadKey:a[1],offlineThreadingId:a[3],threadAttributionSource:a[6],platformRef:a[10],platformToken:a[11],replySourceId:a[7],replySourceType:a[8],sendType:d[1],markThreadRead:!1,metadataDataclass:a[13]})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxIssueSendAttachmentMessageTaskStoredProcedure";a.__tables__=["attachments","threads","messages_optimistic_context"];e.exports=a}),null);
__d("LSLocalApplyOptimisticMessageV2",["LSArrayGetObjectAt","LSCreateOfflineThreadingID","LSDeserializeFromJsonIntoDictionaryV2.nop","LSGetLocalizedReplySnippet","LSIssueNewError","LSLocalize","LSSetMessageDisplayedContentTypes","LSSetMessageViewFlags"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSCreateOfflineThreadingID"),d[0]).then(function(a){return a=a,d[1]=a[0],a})},function(e){return d[4]=c.i64.to_string(d[1]),d[3]=a[4]==null?a[3]:a[4],c.sequence([function(b){return d[5]=a[5].get("snippet_has_emoji"),c.islc(c.db.table(9).fetchDesc([[[]],"lastActivityTimestampMs"]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?d[6]=c.i64.cast([-1,4294967295]):(b=a.item,d[6]=b.lastActivityTimestampMs)})},function(e){return d[8]=c.i64.add(d[6],c.i64.cast([0,1])),d[10]=c.i64.gt(d[0],d[8])?d[0]:d[8],c.db.table(9).fetch([[[a[1]]]]).next().then(function(e,f){f=e.done;e=e.value;return f?c.sequence([function(b){return function(a){c.logger(a).info(a)}("localApplyOptimisticMessage insert optimistic thread"),c.i64.eq(a[2],c.i64.cast([0,1]))?c.sequence([function(b){return c.filter(c.db.table(7).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.id,a[1])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(a,b){var e=a.done;a=a.value;return e?d[16]=!1:(b=a.item,d[19]=b.capabilities2,c.i64.neq(d[19],void 0)?d[18]=d[19]:d[18]=c.i64.cast([0,0]),d[16]=c.i64.neq(c.i64.and_(d[18],c.i64.cast([0,4096])),c.i64.cast([0,0])))})},function(a){return d[11]=d[16]}]):c.resolve(d[11]=!1)},function(b){return d[11]?d[12]="e2ee_cutover":d[12]="inbox",d[11]?d[13]=c.i64.cast([-1,4294967279]):d[13]=c.i64.cast([0,0]),c.forEach(c.filter(c.db.table(9).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.lt(b.authorityLevel,c.i64.cast([0,40]))}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:a[1],mailboxType:c.i64.cast([0,0]),threadType:a[2],clientThreadKey:a[1],folderName:d[12],parentThreadKey:d[13],lastActivityTimestampMs:d[10],lastReadWatermarkTimestampMs:d[10],snippet:d[3],snippetHasEmoji:d[5]==null?!1:d[5],snippetSenderContactId:a[0],ongoingCallState:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,40])})},function(b){return c.i64.eq(a[2],c.i64.cast([0,13]))||c.i64.eq(a[2],c.i64.cast([0,7]))||c.i64.eq(a[2],c.i64.cast([0,1]))?c.sequence([function(b){return c.forEach(c.filter(c.db.table(14).fetch([[[a[1],a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.contactId,a[1])&&c.i64.lt(b.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(14).add({threadKey:a[1],contactId:a[1],readWatermarkTimestampMs:c.i64.cast([0,0]),deliveredWatermarkTimestampMs:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,20]),isModerator:!1})}]):c.resolve()},function(a){return c.sortBy(c.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[14]=!1:(b=a.item,d[14]=b.errorShouldBeShown)})},function(a){return d[14]===!0?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2285622730]),void 0).then(function(a){return d[16]=a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1919524925]),void 0).then(function(a){return d[17]=a})},function(a){return c.storedProcedure(b("LSIssueNewError"),void 0,c.i64.cast([0,1545093]),d[16],d[17],void 0,void 0)}]):c.resolve()}]):(e.item,c.forEach(c.filter(c.db.table(9).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(b.threadType,a[2])}),function(b){var c=b.update;b.item;return c({lastActivityTimestampMs:d[10],lastReadWatermarkTimestampMs:d[10],snippet:d[3],snippetHasEmoji:d[5]==null?!1:d[5],snippetSenderContactId:a[0],snippetStringHash:void 0,snippetStringArgument1:void 0,snippetAttribution:void 0,snippetAttributionStringHash:void 0,additionalThreadContext:void 0})}))})}])},function(e){return c.sequence([function(b){return c.islc(c.db.table(12).fetchDesc([[[a[1],c.i64.cast([0,80])],[a[1],c.i64.cast([0,60])],[a[1],c.i64.cast([0,40])]],"messageDisplayOrderAuthority"]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[57]=c.i64.of_float(Date.now()),d[5]=d[57]):(b=a.item,d[5]=b.primarySortKey)})},function(e){return d[7]=a[5].get("reply_source_id"),d[8]=a[5].get("reply_source_type"),d[9]=a[5].get("reply_source_type_v2"),d[10]=a[5].get("reply_type"),d[7]!==void 0&&(c.i64.eq(d[8],c.i64.cast([0,1]))||c.i64.eq(d[9],c.i64.cast([0,1])))?c.sequence([function(e){return c.filter(c.db.table(12).fetch([[[d[7]==null?"":d[7]]],"messageId"]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===(d[7]==null?"":d[7])}).next().then(function(e,f){var g=e.done;e=e.value;return g?(g=[d[7],void 0,void 0,c.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],d[57]=g[0],d[58]=g[1],d[59]=g[2],d[60]=g[3],d[61]=g[4],d[62]=g[5],d[63]=g[6],d[64]=g[7],d[65]=g[8],d[66]=g[9],d[67]=g[10],d[68]=g[11],d[69]=g[12],d[70]=g[13],d[71]=g[14],d[72]=g[15],g):(f=e.item,c.sequence([function(e){return d[78]=f.senderId,d[77]=f.stickerId,c.i64.neq(d[77],void 0)?(e=[d[77],c.i64.cast([0,4])],d[79]=e[0],d[80]=e[1],e):(e=[void 0,void 0],d[79]=e[0],d[80]=e[1],e),e=[d[79],d[80]],d[74]=e[0],d[75]=e[1],c.sequence([function(e){return c.storedProcedure(b("LSGetLocalizedReplySnippet"),a[1],a[0],d[78],d[10]==null?c.i64.cast([0,0]):d[10]).then(function(a){return a=a,d[79]=a[0],a})},function(a){return d[76]=c.i64.eq(d[9],c.i64.cast([0,1]))?d[79]:""}])},function(a){return a=[d[7],d[8],d[9],c.i64.cast([0,1]),d[76],d[78],f.text,d[74],d[75],void 0,void 0,void 0,void 0,void 0,void 0,d[10]],d[57]=a[0],d[58]=a[1],d[59]=a[2],d[60]=a[3],d[61]=a[4],d[62]=a[5],d[63]=a[6],d[64]=a[7],d[65]=a[8],d[66]=a[9],d[67]=a[10],d[68]=a[11],d[69]=a[12],d[70]=a[13],d[71]=a[14],d[72]=a[15],a}]))})},function(a){return a=[d[57],d[58],d[59],d[60],d[61],d[62],d[63],d[64],d[65],d[66],d[67],d[68],d[69],d[70],d[71],d[72]],d[11]=a[0],d[12]=a[1],d[13]=a[2],d[14]=a[3],d[15]=a[4],d[16]=a[5],d[17]=a[6],d[18]=a[7],d[19]=a[8],d[20]=a[9],d[21]=a[10],d[22]=a[11],d[23]=a[12],d[24]=a[13],d[25]=a[14],d[26]=a[15],a}]):c.resolve((d[7]===void 0||c.i64.eq(d[8],c.i64.cast([0,0]))||c.i64.eq(d[9],c.i64.cast([0,0]))?(e=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],d[57]=e[0],d[58]=e[1],d[59]=e[2],d[60]=e[3],d[61]=e[4],d[62]=e[5],d[63]=e[6],d[64]=e[7],d[65]=e[8],d[66]=e[9],d[67]=e[10],d[68]=e[11],d[69]=e[12],d[70]=e[13],d[71]=e[14],d[72]=e[15],e):(e=[d[7],d[8],d[9],c.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],d[57]=e[0],d[58]=e[1],d[59]=e[2],d[60]=e[3],d[61]=e[4],d[62]=e[5],d[63]=e[6],d[64]=e[7],d[65]=e[8],d[66]=e[9],d[67]=e[10],d[68]=e[11],d[69]=e[12],d[70]=e[13],d[71]=e[14],d[72]=e[15],e),e=[d[57],d[58],d[59],d[60],d[61],d[62],d[63],d[64],d[65],d[66],d[67],d[68],d[69],d[70],d[71],d[72]],d[11]=e[0],d[12]=e[1],d[13]=e[2],d[14]=e[3],d[15]=e[4],d[16]=e[5],d[17]=e[6],d[18]=e[7],d[19]=e[8],d[20]=e[9],d[21]=e[10],d[22]=e[11],d[23]=e[12],d[24]=e[13],d[25]=e[14],d[26]=e[15]))},function(e){return d[27]=a[5].get("mention_data"),d[27]?d[28]=!1:d[28]=!0,d[28]?(e=[void 0,void 0,void 0,void 0],d[29]=e[0],d[30]=e[1],d[31]=e[2],d[32]=e[3],e):(d[57]=d[27].get("mention_offsets"),d[58]=d[27].get("mention_lengths"),d[59]=d[27].get("mention_ids"),d[60]=d[27].get("mention_types"),e=[d[57],d[58],d[59],d[60]],d[29]=e[0],d[30]=e[1],d[31]=e[2],d[32]=e[3]),d[33]=a[5].get("magic_words_data"),d[33]?d[34]=!1:d[34]=!0,d[34]?(e=[void 0,void 0],d[35]=e[0],d[36]=e[1],e):(d[57]=d[33].get("magic_word_offsets"),d[58]=d[33].get("magic_word_lengths"),e=[d[57],d[58]],d[35]=e[0],d[36]=e[1]),d[56]=c.i64.eq(d[10],c.i64.cast([0,1]))?d[17]:a[3],d[37]=a[5].get("sticker_id"),d[38]=a[5].get("sticker_alt_text"),d[39]=a[5].get("hot_emoji_size"),d[40]=a[5].get("iout"),d[41]=a[5].get("platform_XMD_encoded"),d[42]=a[5].get("is_forwarded"),d[43]=a[5].get("forward_score"),d[44]=a[5].get("power_up_style"),d[45]=a[5].get("local_data_id"),d[46]=a[5].get("command_type"),d[47]=a[5].get("reply_type"),d[48]=a[5].get("ephemeral_duration_in_sec"),a[6]!==void 0?c.sequence([function(e){return c.nativeOperation(b("LSDeserializeFromJsonIntoDictionaryV2.nop"),a[6]).then(function(a){return a=a,d[57]=a[0],a})},function(a){return d[58]=new c.Map(),d[59]=d[57].keys(),d[60]=c.i64.of_int32(d[59].length),c.i64.gt(d[60],c.i64.cast([0,0]))?c.loopAsync(d[60],function(a){return d[65]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[59],d[65]).then(function(a){return a=a,d[66]=a[0],d[67]=a[1],a})},function(a){return d[68]=d[57].get(d[66]),d[58].set(d[66],d[68])}])}):c.resolve()},function(a){return d[61]=d[58].get("ai_metadata"),d[61]?d[62]=!1:d[62]=!0,d[62]?c.resolve(d[63]=void 0):c.sequence([function(a){return d[65]=new c.Map(),d[66]=d[61].keys(),d[67]=c.i64.of_int32(d[66].length),c.i64.gt(d[67],c.i64.cast([0,0]))?c.loopAsync(d[67],function(a){return d[68]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[66],d[68]).then(function(a){return a=a,d[69]=a[0],d[70]=a[1],a})},function(a){return d[71]=d[61].get(d[69]),d[65].set(d[69],d[71])}])}):c.resolve()},function(a){return d[63]=d[65]}])},function(a){return d[63]!==void 0?(d[65]=d[63].get("ai_product"),d[64]=d[65]):d[64]=void 0,d[49]=d[64]}]):c.resolve(d[49]=void 0)},function(b){return d[50]=a[5].get("rich_text_format_type"),c.i64.eq(d[50],c.i64.cast([0,1]))?d[51]=c.i64.cast([0,3]):(d[49]==="HIDDEN_METADATA"?d[57]=c.i64.cast([0,2]):d[57]=c.i64.cast([0,0]),d[51]=d[57]),d[52]=a[5].get("is_forwarded"),d[52]?d[53]=c.i64.cast([0,3]):d[53]=d[13],d[54]=a[5].get("plugin_type"),c.i64.eq(d[54],c.i64.cast([0,40]))?d[55]="Instamadillo":d[55]="FBBroker",c.i64.eq(c.i64.cast([0,20]),c.i64.cast([0,20]))?c.db.table(12).add({threadKey:a[1],messageId:d[4],timestampMs:d[0],offlineThreadingId:d[4],primarySortKey:d[5],secondarySortKey:d[0],text:d[56],senderId:a[0],stickerId:d[37],hotEmojiSize:d[39],platformXmdEncoded:d[41],isForwarded:d[42],forwardScore:d[43],isAdminMessage:!1,sendStatus:c.i64.cast([0,1]),sendStatusV2:c.i64.cast([0,1]),authorityLevel:c.i64.cast([0,20]),localDataId:d[45],replyType:d[26],ephemeralDurationInSec:d[48],metadataDataclass:a[6],messageRenderingType:d[51],replySourceId:d[11],replySourceType:d[12],replySourceTypeV2:d[53],replyStatus:d[14],replySnippet:d[15],replyToUserId:d[16],replyMessageText:d[17],replyAttachmentId:d[18],replyAttachmentType:d[19],replyMediaUrl:d[20],replyMediaUrlFallback:d[21],replyMediaPreviewWidth:d[22],replyMediaPreviewHeight:d[23],replyMediaUrlMimeType:d[24],mentionOffsets:d[29],mentionLengths:d[30],mentionIds:d[31],mentionTypes:d[32],transportKey:d[55]}):c.sequence([function(a){return c.db.table(12).fetch([[[d[4]]],"optimistic"]).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[d[5],d[0],d[45]],d[57]=c[0],d[58]=c[1],d[59]=c[2],c):(b=a.item,c=[b.primarySortKey,b.secondarySortKey,b.localDataId],d[57]=c[0],d[58]=c[1],d[59]=c[2])})},function(a){return c.forEach(c.filter(c.db.table(12).fetch([[[d[4]]],"optimistic"]),function(a){return a.offlineThreadingId===d[4]&&c.i64.lt(a.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(12).add({threadKey:a[1],messageId:d[4],timestampMs:d[0],offlineThreadingId:d[4],primarySortKey:d[57],secondarySortKey:d[58],text:d[56],senderId:a[0],stickerId:d[37],hotEmojiSize:d[39],platformXmdEncoded:d[41],isForwarded:d[42],forwardScore:d[43],isAdminMessage:!1,sendStatus:c.i64.cast([0,1]),sendStatusV2:c.i64.cast([0,1]),authorityLevel:c.i64.cast([0,20]),localDataId:d[59],replyType:d[26],ephemeralDurationInSec:d[48],metadataDataclass:a[6],messageRenderingType:d[51],replySourceId:d[11],replySourceType:d[12],replySourceTypeV2:d[53],replyStatus:d[14],replySnippet:d[15],replyToUserId:d[16],replyMessageText:d[17],replyAttachmentId:d[18],replyAttachmentType:d[19],replyMediaUrl:d[20],replyMediaUrlFallback:d[21],replyMediaPreviewWidth:d[22],replyMediaPreviewHeight:d[23],replyMediaUrlMimeType:d[24],mentionOffsets:d[29],mentionLengths:d[30],mentionIds:d[31],mentionTypes:d[32],transportKey:d[55]})}])}])},function(e){return d[5]=c.createArray(),d[6]=(d[5].push("LSMailboxLocalApplyOptimisticMessageV2StoredProcedure"),d[5]),d[7]=(d[5].push("localApplyOptimisticMessage"),d[5]),d[8]=(d[5].push(a[1]),d[5]),d[9]=(d[5].push(d[4]),d[5]),d[10]=c.toJSON(d[5]),function(a){c.logger(a).info(a)}(d[10]),d[2]=a[5].get("calculate_denormalizations"),(d[2]==null?!0:d[2])?c.sequence([function(e){return c.storedProcedure(b("LSSetMessageViewFlags"),a[1],d[4],d[0],c.i64.eq(a[2],c.i64.cast([0,1])))},function(e){return d[5]=a[5].get("sticker_id"),c.storedProcedure(b("LSSetMessageDisplayedContentTypes"),a[1],d[4],d[0],a[3],!1,c.i64.neq(d[5],void 0))}]):c.resolve()},function(a){return a=[d[4],d[0]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxLocalApplyOptimisticMessageV2StoredProcedure";a.__tables__=["threads","contacts","participants","user_visible_network_connectivity_error","messages"];e.exports=a}),null);
__d("LSMarkSubJobCompletedV2",["LSArrayGetObjectAt"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return d[0]=c.createArray(),c.db.table(51).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?0:(b=a.item,d[3]=new c.Map(),d[3].set("offline_attachment_id",b.offlineAttachmentId),d[3].set("offline_threading_id",b.offlineThreadingId),d[3].set("in_message_index",b.inMessageIndex),d[3].set("attachment_type",b.attachmentType),d[3].set("should_transcode",b.shouldTranscode),d[3].set("use_double_phase",b.useDoublePhase),d[3].set("send_by_server",b.sendByServer),d[3].set("is_secure",b.isSecure),d[3].set("state",b.state),d[3].set("fbid",b.fbid),d[3].set("metadata",b.metadata),d[3].set("error",b.error),d[3].set("message_id",b.messageId),d[4]=(d[0].push(d[3]),d[0]))})},function(e){return d[2]=c.i64.of_int32(d[0].length),c.i64.neq(d[2],c.i64.cast([0,0]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[0],c.i64.cast([0,0])).then(function(a){return a=a,d[3]=a[0],d[4]=a[1],a})},function(b){return d[5]=d[3].get("state"),c.i64.neq(a[1],void 0)?a[2]!==void 0?(c.i64.eq(d[5],c.i64.cast([-1,4294967293]))?(d[7]=c.i64.cast([-1,4294967295]),d[6]=d[7]):(c.i64.eq(d[5],c.i64.cast([0,1]))?d[7]=c.i64.cast([0,2]):(c.i64.eq(d[5],c.i64.cast([0,3]))?d[8]=c.i64.cast([0,4]):(c.i64.eq(d[5],c.i64.cast([0,5]))?d[9]=c.i64.cast([0,6]):(c.i64.eq(d[5],c.i64.cast([0,13]))?d[10]=c.i64.cast([0,14]):(c.i64.eq(d[5],c.i64.cast([0,7]))?d[11]=c.i64.cast([0,8]):(c.i64.eq(d[5],c.i64.cast([0,9]))?d[12]=c.i64.cast([0,10]):(c.i64.eq(d[5],c.i64.cast([0,11]))?d[13]=c.i64.cast([0,12]):d[13]=d[5],d[12]=d[13]),d[11]=d[12]),d[10]=d[11]),d[9]=d[10]),d[8]=d[9]),d[7]=d[8]),d[6]=d[7]),c.forEach(c.db.table(51).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({state:d[6],fbid:a[1],messageId:a[2],metadata:a[3]})})):(c.i64.eq(d[5],c.i64.cast([-1,4294967293]))?(d[7]=c.i64.cast([-1,4294967295]),d[6]=d[7]):(c.i64.eq(d[5],c.i64.cast([0,1]))?d[7]=c.i64.cast([0,2]):(c.i64.eq(d[5],c.i64.cast([0,3]))?d[8]=c.i64.cast([0,4]):(c.i64.eq(d[5],c.i64.cast([0,5]))?d[9]=c.i64.cast([0,6]):(c.i64.eq(d[5],c.i64.cast([0,13]))?d[10]=c.i64.cast([0,14]):(c.i64.eq(d[5],c.i64.cast([0,7]))?d[11]=c.i64.cast([0,8]):(c.i64.eq(d[5],c.i64.cast([0,9]))?d[12]=c.i64.cast([0,10]):(c.i64.eq(d[5],c.i64.cast([0,11]))?d[13]=c.i64.cast([0,12]):d[13]=d[5],d[12]=d[13]),d[11]=d[12]),d[10]=d[11]),d[9]=d[10]),d[8]=d[9]),d[7]=d[8]),d[6]=d[7]),c.forEach(c.db.table(51).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({state:d[6],fbid:a[1],metadata:a[3]})})):c.i64.neq(a[4],void 0)?(c.i64.eq(d[5],c.i64.cast([-1,4294967293]))?(d[7]=c.i64.cast([-1,4294967295]),d[6]=d[7]):(c.i64.eq(d[5],c.i64.cast([0,1]))?d[7]=c.i64.cast([0,2]):(c.i64.eq(d[5],c.i64.cast([0,3]))?d[8]=c.i64.cast([0,4]):(c.i64.eq(d[5],c.i64.cast([0,5]))?d[9]=c.i64.cast([0,6]):(c.i64.eq(d[5],c.i64.cast([0,13]))?d[10]=c.i64.cast([0,14]):(c.i64.eq(d[5],c.i64.cast([0,7]))?d[11]=c.i64.cast([0,8]):(c.i64.eq(d[5],c.i64.cast([0,9]))?d[12]=c.i64.cast([0,10]):(c.i64.eq(d[5],c.i64.cast([0,11]))?d[13]=c.i64.cast([0,12]):d[13]=d[5],d[12]=d[13]),d[11]=d[12]),d[10]=d[11]),d[9]=d[10]),d[8]=d[9]),d[7]=d[8]),d[6]=d[7]),c.forEach(c.db.table(51).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({state:d[6],error:a[4]})})):(c.i64.eq(d[5],c.i64.cast([-1,4294967293]))?(d[7]=c.i64.cast([-1,4294967295]),d[6]=d[7]):(c.i64.eq(d[5],c.i64.cast([0,1]))?d[7]=c.i64.cast([0,2]):(c.i64.eq(d[5],c.i64.cast([0,3]))?d[8]=c.i64.cast([0,4]):(c.i64.eq(d[5],c.i64.cast([0,5]))?d[9]=c.i64.cast([0,6]):(c.i64.eq(d[5],c.i64.cast([0,13]))?d[10]=c.i64.cast([0,14]):(c.i64.eq(d[5],c.i64.cast([0,7]))?d[11]=c.i64.cast([0,8]):(c.i64.eq(d[5],c.i64.cast([0,9]))?d[12]=c.i64.cast([0,10]):(c.i64.eq(d[5],c.i64.cast([0,11]))?d[13]=c.i64.cast([0,12]):d[13]=d[5],d[12]=d[13]),d[11]=d[12]),d[10]=d[11]),d[9]=d[10]),d[8]=d[9]),d[7]=d[8]),d[6]=d[7]),c.forEach(c.db.table(51).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({state:d[6]})}))}]):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMediaSendMarkSubJobCompletedV2StoredProcedure";a.__tables__=["media_send_jobs"];e.exports=a}),null);
__d("LSMarkSubJobCompletedV2StoredProcedure",["LSMarkSubJobCompletedV2","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSMarkSubJobCompletedV2"),e.offlineAttachmentId,e.fbid,e.messageId,e.metadata,e.error);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSMediaUrlAttachment",["I64","LSMediaUrlUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.previewUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?a.previewUrlFallback:a.previewUrl}function b(a){var b=a.previewUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?a.previewUrlFallback:a.previewUrlLarge}function c(a){var b=a.playableUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?a.playableUrlFallback:a.playableUrl}function e(a){var b=a.imageUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?a.imageUrlFallback:a.imageUrl}function f(a){var b=a.faviconUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?a.faviconUrlFallback:a.faviconUrl}function i(a){try{var b=a.listItemContactUrlExpirationTimestampList1;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired((h||(h=d("I64"))).of_string(b))?a.listItemContactUrlFallbackList1:a.listItemContactUrlList1}catch(b){return a.listItemContactUrlList1}}function j(a){try{var b=a.listItemContactUrlExpirationTimestampList2;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired((h||(h=d("I64"))).of_string(b))?a.listItemContactUrlFallbackList2:a.listItemContactUrlList2}catch(b){return a.listItemContactUrlList2}}function k(a){try{var b=a.listItemContactUrlExpirationTimestampList3;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired((h||(h=d("I64"))).of_string(b))?a.listItemContactUrlFallbackList3:a.listItemContactUrlList3}catch(b){return a.listItemContactUrlList3}}function l(a){var b=a.headerImageUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?a.headerImageUrlFallback:a.headerImageUrl}function m(a){try{var b=a.listItemProfilePictureUrlExpirationTimestamp1;if(b!=null&&d("LSMediaUrlUtils").isTimestampExpired((h||(h=d("I64"))).of_string(b)))return a.listItemProfilePictureUrlFallback1;else return a.listItemProfilePictureUrl1}catch(b){return a.listItemProfilePictureUrl1}}function n(a){try{var b=a.listItemProfilePictureUrlExpirationTimestamp2;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired((h||(h=d("I64"))).of_string(b))?a.listItemProfilePictureUrlFallback2:a.listItemProfilePictureUrl2}catch(b){return a.listItemProfilePictureUrl2}}function o(a){try{var b=a.listItemProfilePictureUrlExpirationTimestamp3;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired((h||(h=d("I64"))).of_string(b))?a.listItemProfilePictureUrlFallback3:a.listItemProfilePictureUrl3}catch(b){return a.listItemProfilePictureUrl3}}g.previewUrl=a;g.previewUrlLarge=b;g.playableUrl=c;g.imageUrl=e;g.faviconUrl=f;g.listItemContactUrlList1=i;g.listItemContactUrlList2=j;g.listItemContactUrlList3=k;g.headerImageUrl=l;g.listItemProfilePictureUrl1=m;g.listItemProfilePictureUrl2=n;g.listItemProfilePictureUrl3=o}),98);
__d("LSMessageSendToSentQPLInteractionHelper.nop",["LSSynchronousPromise","QPLUserFlow","qpl"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e,f){f!=null&&c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),e,{instanceKey:parseInt(f,10)});return d("LSSynchronousPromise").makeSynchronousPromise()}a.__nop_name__="LSMessageSendToSentQPLInteractionHelper";g["default"]=a}),98);
__d("LSUpdateOptimisticAttachmentPreview",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(16).fetch([[[a[0],a[1],a[2]]]]),function(c){return c.attachmentFbid===a[2]&&b.i64.eq(c.threadKey,a[0])&&c.messageId===a[1]&&b.i64.eq(c.authorityLevel,b.i64.cast([0,20]))}),function(b){var c=b.update;b.item;return c({playableUrl:a[3],playableUrlFallback:a[4],playableUrlExpirationTimestampMs:a[5],playableUrlMimeType:a[6],previewUrl:a[7],previewUrlFallback:a[8],previewUrlExpirationTimestampMs:a[9],previewUrlMimeType:a[10],previewWidth:a[11],previewHeight:a[12],imageUrl:void 0,imageUrlFallback:void 0,imageUrlExpirationTimestampMs:void 0,imageUrlMimeType:void 0,titleText:a[13]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpdateOptimisticAttachmentPreviewStoredProcedure";a.__tables__=["attachments"];e.exports=a}),null);
__d("LSOptimisticSendAttachmentForward",["LSInsertOptimisticAttachment","LSIssueNewTaskWithExtraOperationsAndGetTaskID","LSLocalApplyOptimisticMessage","LSUpdateOptimisticAttachmentPreview"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[1]=a[3]===""?void 0:a[3],d[1]!==void 0?c.sequence([function(b){return c.forEach(c.filter(c.db.table(16).fetch([[[a[1],d[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===d[1]&&c.i64.eq(b.authorityLevel,c.i64.cast([0,20]))}),function(b){var d=b.update;b.item;return d({attachmentFbid:c.i64.to_string(a[7])})})},function(a){return d[0]=d[1]}]):c.sequence([function(e){return c.storedProcedure(b("LSLocalApplyOptimisticMessage"),a[0],a[1],a[2],a[4],a[5],a[6],void 0,void 0,void 0,void 0,c.i64.cast([0,3]),void 0,void 0,void 0,!0).then(function(a){return a=a,d[2]=a[0],d[3]=a[1],a})},function(e){return c.filter(c.db.table(16).fetch(),function(b){return b.attachmentFbid===c.i64.to_string(a[7])}).next().then(function(e,f){var g=e.done;e=e.value;return g?c.storedProcedure(b("LSInsertOptimisticAttachment"),a[1],d[3],d[2],d[2],c.i64.to_string(a[7]),c.i64.cast([0,2]),void 0,c.i64.cast([0,0]),void 0,!0,!1):(f=e.item,c.sequence([function(e){return c.storedProcedure(b("LSInsertOptimisticAttachment"),a[1],d[3],d[2],d[2],c.i64.to_string(a[7]),f.attachmentType,f.filename,f.attachmentIndex,f.attributionAppId,!0,!1)},function(e){return c.storedProcedure(b("LSUpdateOptimisticAttachmentPreview"),a[1],d[2],c.i64.to_string(a[7]),f.playableUrl,f.playableUrlFallback,f.playableUrlExpirationTimestampMs,f.playableUrlMimeType,f.previewUrl,f.previewUrlFallback,f.previewUrlExpirationTimestampMs,f.previewUrlMimeType,f.previewWidth,f.previewHeight,f.titleText)}]))})},function(a){return d[0]=d[2]}])},function(e){return c.sequence([function(b){return d[2]=c.createArray(),d[6]=(d[2].push(a[7]),d[2]),c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[3]=c.i64.cast([0,1]):(b=a.item,d[7]=b.syncGroup,c.i64.neq(d[7],void 0)?d[6]=d[7]:d[6]=c.i64.cast([0,1]),d[3]=d[6])})},function(e){return c.storedProcedure(b("LSIssueNewTaskWithExtraOperationsAndGetTaskID"),c.i64.to_string(a[1]),c.i64.cast([0,46]),"",void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),d[3],void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[5]=a[0],a})},function(b){return c.db.table(31).add({taskId:d[5],threadKey:a[1],offlineThreadingId:d[0],threadAttributionSource:a[8],sendType:c.i64.cast([0,4]),markThreadRead:!1,initiatingSource:a[9]})}])},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticSendAttachmentForwardStoredProcedure";a.__tables__=["attachments","threads","messages_optimistic_context"];e.exports=a}),null);
__d("LSOptimisticSendAttachmentForwardStoredProcedure",["LSOptimisticSendAttachmentForward","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticSendAttachmentForward"),e.senderId,e.threadKey,e.threadType,e.offlineThreadingId,e.text,e.snippet,e.snippetHasEmoji,e.forwardedAttachmentFbid,e.source,e.initiatingSource);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSOptimisticSendMessageForward",["LSInsertOptimisticAttachment","LSIssueNewTaskWithExtraOperationsAndGetTaskID","LSLocalApplyOptimisticMessage","LSPredefineTraceForTask","LSUpdateOptimisticAttachmentPreview"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.filter(c.db.table(12).fetch([[[a[3],a[4],a[5]]]]),function(b){return c.i64.eq(b.threadKey,a[3])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.timestampMs,a[4])&&b.messageId===a[5]&&c.i64.eq(b.authorityLevel,c.i64.cast([0,80]))}).next().then(function(e,f){var g=e.done;e=e.value;return g?(d[3]=c.createArray(),d[4]=(d[3].push("optimisticSendMessageForward msg not found"),d[3]),d[5]=(d[3].push(a[5]),d[3]),d[6]=c.toJSON(d[3]),function(a){c.logger(a).mustfix(a)}(d[6]),g=["",c.i64.cast([-1,4294967295])],d[0]=g[0],d[1]=g[1]):(f=e.item,c.sequence([function(e){return d[11]=f.forwardScore,d[3]=f.text,d[4]=d[11],c.storedProcedure(b("LSLocalApplyOptimisticMessage"),a[0],a[1],a[2],d[3],void 0,void 0,f.stickerId,f.hotEmojiSize,void 0,void 0,c.i64.cast([0,3]),void 0,d[4],void 0,!0).then(function(a){return a=a,d[5]=a[0],d[6]=a[1],a})},function(e){return c.forEach(c.db.table(16).fetch([[[f.threadKey,f.messageId]]]),function(e){var f=e.item;return c.sequence([function(e){return d[16]=f.attachmentFbid,d[12]=c.createArray(),d[13]=(d[12].push(d[16]),d[12]),d[14]=(d[12].push(d[5]),d[12]),d[15]=c.toJSON(d[12]),c.storedProcedure(b("LSInsertOptimisticAttachment"),a[1],d[6],d[5],d[16],d[15],f.attachmentType,f.filename,f.attachmentIndex,void 0,f.hasMedia,f.hasXma)},function(e){return c.storedProcedure(b("LSUpdateOptimisticAttachmentPreview"),a[1],d[5],d[15],f.playableUrl,f.playableUrlFallback,f.playableUrlExpirationTimestampMs,f.playableUrlMimeType,f.previewUrl,f.previewUrlFallback,f.previewUrlExpirationTimestampMs,f.previewUrlMimeType,f.previewWidth,f.previewHeight,f.titleText)}])})},function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[7]=c.i64.cast([0,1]):(e=b.item,d[13]=e.syncGroup,c.i64.neq(d[13],void 0)?d[12]=d[13]:d[12]=c.i64.cast([0,1]),d[7]=d[12])})},function(e){return c.storedProcedure(b("LSIssueNewTaskWithExtraOperationsAndGetTaskID"),c.i64.to_string(a[1]),c.i64.cast([0,46]),"",void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),d[7],void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[9]=a[0],a})},function(a){return void 0!==void 0?c.storedProcedure(b("LSPredefineTraceForTask"),void 0,d[9],c.i64.to_string(c.i64.cast([0,46])),d[5]):c.resolve()},function(b){return c.db.table(31).add({taskId:d[9],threadKey:a[1],offlineThreadingId:d[5],messageId:a[5],threadAttributionSource:a[6],sendType:c.i64.cast([0,5]),markThreadRead:!1,initiatingSource:a[7]})},function(b){return d[12]=new c.Map(),d[13]=d[12].set("optimisticSendMessageForward",a[1]),d[14]=d[12].set("fwdMsgID",a[5]),d[15]=c.toJSON(d[12]),d[10]=d[15],function(a){c.logger(a).info(a)}(d[10]),b=[d[5],d[9]],d[0]=b[0],d[1]=b[1]}]))})},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticSendMessageForwardStoredProcedure";a.__tables__=["messages","attachments","threads","messages_optimistic_context"];e.exports=a}),null);
__d("LSOptimisticSendMessageForwardStoredProcedure",["LSOptimisticSendMessageForward","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticSendMessageForward"),e.senderId,e.threadKey,e.threadType,e.forwardedMsgThreadKey,e.forwardedMsgTimestampMs,e.forwardedMsgId,e.source,e.initiatingSource);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSOptimisticSendMessageV2",["LSAppendDataTraceAddon.nop","LSInsertOptimisticAttachment","LSIssueNewTaskWithExtraOperationsAndGetTaskID","LSLocalApplyOptimisticMessageV2","LSLogEventAnnotate.nop","LSMessageSendToSentQPLInteractionHelper.nop","LSOptimisticMarkThreadReadV2","LSPredefineTraceForTask","LSUpdateOptimisticAttachmentPreview","gkx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,d=a[a.length-1],e=[],f=[];return d.sequence([function(g){return d.sequence([function(c){return e[0]=a[6].get("qpl_instance_key"),d.storedProcedure(b("LSLocalApplyOptimisticMessageV2"),a[0],a[1],a[2],a[4],a[5],a[6],a[8]).then(function(a){return a=a,e[1]=a[0],e[2]=a[1],a})},function(f){return d.sequence([function(c){return e[5]=a[6].get("external_attachment_url"),e[44]=e[5]===""?void 0:e[5],e[44]!==void 0?d.sequence([function(c){return e[45]=a[6].get("attribution_app_id"),e[46]=a[6].get("optimistic_attachment_preview"),d.nativeOperation(b("LSMessageSendToSentQPLInteractionHelper.nop"),"sp_insert_optimistic_gif_start",e[0])},function(c){return d.storedProcedure(b("LSInsertOptimisticAttachment"),a[1],e[2],e[1],e[1],e[1],d.i64.cast([0,3]),e[44],d.i64.cast([0,0]),e[45],!0,!1)},function(c){return e[46]?e[47]=!1:e[47]=!0,e[47]?d.resolve():(e[48]=e[46].get("playable_url"),e[49]=e[46].get("playable_url_fallback"),e[50]=e[46].get("playable_url_expiration_timestamp_ms"),e[51]=e[46].get("playable_url_mime_type"),e[52]=e[46].get("preview_url"),e[53]=e[46].get("preview_url_fallback"),e[54]=e[46].get("preview_url_expiration_timestamp_ms"),e[55]=e[46].get("preview_url_mime_type"),e[56]=e[46].get("preview_width"),e[57]=e[46].get("preview_height"),e[58]=e[46].get("image_url"),e[59]=e[46].get("image_url_fallback"),e[60]=e[46].get("image_url_expiration_timestamp_ms"),e[61]=e[46].get("image_url_mime_type"),e[62]=e[46].get("title_text"),d.storedProcedure(b("LSUpdateOptimisticAttachmentPreview"),a[1],e[1],e[1],e[48],e[49],e[50],e[51],e[52],e[53],e[54],e[55],e[56],e[57],e[62]))},function(a){return d.nativeOperation(b("LSMessageSendToSentQPLInteractionHelper.nop"),"sp_insert_optimistic_gif_end",e[0])},function(a){return e[6]=d.i64.cast([0,7])}]):d.sequence([function(c){return e[45]=a[6].get("sticker_id"),d.i64.neq(e[45],void 0)?d.sequence([function(c){return d.i64.neq(e[45],d.i64.cast([53057,267535043]))&&d.i64.neq(e[45],d.i64.cast([85970,924785702]))&&d.i64.neq(e[45],d.i64.cast([85970,1004785694]))&&d.i64.neq(e[45],d.i64.cast([85970,1044785690]))?d.sequence([function(c){return e[49]=d.i64.to_string(e[45]),e[47]=a[6].get("optimistic_attachment_preview"),d.nativeOperation(b("LSMessageSendToSentQPLInteractionHelper.nop"),"sp_insert_optimistic_sticker_start",e[0])},function(c){return d.storedProcedure(b("LSInsertOptimisticAttachment"),a[1],e[2],e[1],d.i64.to_string(e[45]),e[49],d.i64.cast([0,1]),void 0,d.i64.cast([0,0]),void 0,!0,!1)},function(c){return e[47]?e[48]=!1:e[48]=!0,e[48]?d.resolve():(e[50]=e[47].get("playable_url"),e[51]=e[47].get("playable_url_fallback"),e[52]=e[47].get("playable_url_expiration_timestamp_ms"),e[53]=e[47].get("playable_url_mime_type"),e[54]=e[47].get("preview_url"),e[55]=e[47].get("preview_url_fallback"),e[56]=e[47].get("preview_url_expiration_timestamp_ms"),e[57]=e[47].get("preview_url_mime_type"),e[58]=e[47].get("preview_width"),e[59]=e[47].get("preview_height"),e[60]=e[47].get("image_url"),e[61]=e[47].get("image_url_fallback"),e[62]=e[47].get("image_url_expiration_timestamp_ms"),e[63]=e[47].get("image_url_mime_type"),e[64]=e[47].get("title_text"),d.storedProcedure(b("LSUpdateOptimisticAttachmentPreview"),a[1],e[1],e[49],e[50],e[51],e[52],e[53],e[54],e[55],e[56],e[57],e[58],e[59],e[64]))},function(a){return d.nativeOperation(b("LSMessageSendToSentQPLInteractionHelper.nop"),"sp_insert_optimistic_sticker_end",e[0])}]):d.resolve()},function(a){return e[46]=d.i64.cast([0,2])}]):d.sequence([function(c){return e[47]=a[6].get("signed_xma_dataclass"),e[47]!==void 0?d.sequence([function(c){return d.storedProcedure(b("LSInsertOptimisticAttachment"),a[1],e[2],e[1],e[1],e[1],d.i64.cast([0,7]),void 0,d.i64.cast([0,0]),void 0,!1,!0)},function(a){return e[48]=d.i64.cast([0,12])}]):d.resolve(e[48]=d.i64.cast([0,1]))},function(a){return e[46]=e[48]}])},function(a){return e[6]=e[46]}])},function(a){return d.nativeOperation(b("LSMessageSendToSentQPLInteractionHelper.nop"),"sp_send_message_v2_task_start",e[0])},function(b){return e[7]=d.i64.cast([0,0]),d.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?e[8]=d.i64.cast([0,1]):(b=a.item,e[46]=b.syncGroup,d.i64.neq(e[46],void 0)?e[45]=e[46]:e[45]=d.i64.cast([0,1]),e[8]=e[45])})},function(c){return e[10]=a[6].get("plugin_type"),d.storedProcedure(b("LSIssueNewTaskWithExtraOperationsAndGetTaskID"),d.i64.to_string(a[1]),d.i64.cast([0,46]),"",void 0,void 0,e[10]==null?d.i64.cast([0,0]):e[10],d.i64.cast([0,0]),e[8],void 0,d.i64.cast([0,0]),void 0,e[7]==null?d.i64.cast([0,0]):e[7]).then(function(a){return a=a,e[11]=a[0],a})},function(a){return d.nativeOperation(b("LSMessageSendToSentQPLInteractionHelper.nop"),"sp_send_message_v2_task_end",e[0])},function(c){return e[12]=a[6].get("data_trace_id"),e[12]!==void 0?d.sequence([function(a){return d.storedProcedure(b("LSPredefineTraceForTask"),e[12],e[11],d.i64.to_string(d.i64.cast([0,46])),e[1])},function(c){return e[45]=a[6].get("source"),e[48]=d.i64.to_string(e[45]),e[48]!==void 0?e[46]=e[48]:e[46]=d.i64.to_string(d.i64.cast([0,0])),e[47]=",",d.nativeOperation(b("LSAppendDataTraceAddon.nop"),e[12],d.i64.cast([0,20]),d.i64.cast([0,1]),void 0,[e[46],e[47],d.i64.to_string(e[6]),e[47],d.i64.to_string(a[2])].join(""))}]):d.resolve()},function(b){return e[13]=a[6].get("blocked_by_otids"),e[14]=new d.Map(),e[15]=a[6].get("openEb"),e[16]=a[6].get("source"),e[17]=a[6].get("external_attachment_url"),e[18]=a[6].get("platform_ref"),e[19]=a[6].get("platform_token"),e[20]=a[6].get("reply_source_id"),e[21]=a[6].get("reply_source_attachment_id"),e[22]=a[6].get("reply_source_type"),e[23]=a[6].get("mark_read"),e[24]=a[6].get("initiating_app_id"),e[25]=a[6].get("initiating_source"),e[26]=a[6].get("navigation_chain"),e[27]=a[6].get("dety_params"),e[28]=a[6].get("skip_url_preview_gen"),e[29]=a[6].get("text_has_links"),e[30]=a[6].get("multitab_env"),e[31]=a[6].get("subthread_parent_message_id"),e[32]=a[6].get("is_exclusive_to_subthread"),e[33]=a[6].get("rich_text_format_type"),e[34]=a[6].get("plugin_type"),d.i64.eq(e[34],d.i64.cast([0,40]))?e[35]="Instamadillo":e[35]="FBBroker",e[36]=a[6].get("signed_xma_dataclass"),e[37]=a[6].get("signed_xma_dataclass_validation"),d.db.table(31).add({taskId:e[11],threadKey:a[1],openEb:e[15],qplInstanceKey:e[0],offlineThreadingId:e[1],threadAttributionSource:e[16],externalAttachmentUrl:e[17],platformRef:e[18],platformToken:e[19],replySourceId:e[20],replySourceType:e[22],sendType:e[6],markThreadRead:e[23]==null?!1:e[23],initiatingSource:e[25],skipUrlPreviewGen:e[28],textHasLinks:e[29],dataclassParams:a[7],multitabEnv:e[30],subthreadParentMessageId:e[31],isExclusiveToSubthread:e[32],metadataDataclass:a[8],richTextFormatType:e[33],transportKey:e[35]})},function(f){return c("gkx")("834")&&d.i64.eq(a[2],d.i64.cast([0,1]))?d.resolve(0):(e[45]=a[6].get("mark_read"),(e[45]==null?!1:e[45])?d.sequence([function(a){return d.nativeOperation(b("LSMessageSendToSentQPLInteractionHelper.nop"),"sp_mark_thread_read_start",e[0])},function(c){return d.storedProcedure(b("LSOptimisticMarkThreadReadV2"),a[1],e[2])},function(a){return d.nativeOperation(b("LSMessageSendToSentQPLInteractionHelper.nop"),"sp_mark_thread_read_end",e[0])}]):d.resolve())},function(c){return e[38]=d.createArray(),e[39]=(e[38].push("optimisticSendMessageV2"),e[38]),e[40]=(e[38].push(a[1]),e[38]),e[41]=(e[38].push(e[1]),e[38]),e[42]=d.toJSON(e[38]),function(a){d.logger(a).info(a)}(e[42]),e[43]=new d.Map(),e[43].set("offline_threading_id",e[1]),e[43].set("task_id",e[11]),e[43].set("task_queue_name",d.i64.to_string(a[1])),e[43].set("task_label",d.i64.to_string(d.i64.cast([0,46]))),d.nativeOperation(b("LSLogEventAnnotate.nop"),d.i64.cast([0,16]),d.i64.cast([0,23]),d.i64.cast([0,0]),e[43])},function(a){return a=[e[1],e[11]],e[3]=a[0],e[4]=a[1],a}])},function(a){return f[0]=e[3]}])},function(a){return d.resolve(f)}])}a.__sproc_name__="LSMailboxOptimisticSendMessageV2StoredProcedure";a.__tables__=["threads","messages_optimistic_context"];d=a;g["default"]=d}),98);
__d("LSOptimisticSendMessageV2StoredProcedure",["LSOptimisticSendMessageV2","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticSendMessageV2"),e.senderId,e.threadKey,e.threadType,e.mailboxType,e.text,e.snippet,e.extraSendMessageParams,e.dataclassParams,e.metadataDataclass);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSRemoveMediaSendJobs",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMediaSendRemoveMediaSendJobsStoredProcedure";a.__tables__=["media_send_jobs"];e.exports=a}),null);
__d("LSRemoveMediaSendJobsStoredProcedure",["LSRemoveMediaSendJobs","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSRemoveMediaSendJobs"),e.offlineThreadingId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSSendPhase1MultiPhotoMessageV2",["LSArrayGetObjectAt","LSGetMessageAttributionParams","LSIssueSendAttachmentMessageTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return d[0]=c.createArray(),d[1]=new c.Map(),d[2]=new c.Map(),d[3]=!1,d[4]=c.i64.cast([0,0]),c.forEach(c.sortBy(c.filter(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["inMessageIndex","ASC"]]),function(a){a=a.item;return d[7]=a.fbid,d[4]=c.i64.add(d[4],c.i64.cast([0,1])),c.i64.neq(d[7],void 0)?d[8]=(d[0].push(d[7]),d[0]):0})},function(e){return d[5]=c.i64.of_int32(d[0].length),c.i64.neq(d[5],d[4])||c.i64.eq(d[4],c.i64.cast([0,0]))?c.resolve(d[6]=c.i64.cast([0,10002])):c.sequence([function(b){return c.db.table(12).fetch([[[a[0]]],"optimistic"]).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[void 0,void 0,void 0,void 0,void 0],d[7]=c[0],d[8]=c[1],d[9]=c[2],d[10]=c[3],d[11]=c[4],c):(b=a.item,c=[b.threadKey,b.senderId,b.text,b.replySourceId,b.replySourceTypeV2],d[7]=c[0],d[8]=c[1],d[9]=c[2],d[10]=c[3],d[11]=c[4])})},function(e){return c.i64.eq(d[7],void 0)||c.i64.eq(d[8],void 0)?c.resolve((c.i64.eq(d[7],void 0)?d[14]=c.i64.cast([0,10003]):d[14]=c.i64.cast([0,10004]),d[13]=d[14])):c.sequence([function(a){return c.db.table(9).fetch([[[d[7]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[14]=void 0:(b=a.item,d[14]=b.threadType)})},function(b){return c.filter(c.db.table(31).fetch(),function(b){return b.offlineThreadingId===a[0]}).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[void 0,void 0,void 0,void 0,void 0,void 0,void 0],d[16]=c[0],d[17]=c[1],d[18]=c[2],d[19]=c[3],d[20]=c[4],d[21]=c[5],d[22]=c[6],c):(b=a.item,c=[b.platformRef,b.platformToken,b.initiatingSource,void 0,void 0,b.dataclassParams,b.metadataDataclass],d[16]=c[0],d[17]=c[1],d[18]=c[2],d[19]=c[3],d[20]=c[4],d[21]=c[5],d[22]=c[6])})},function(e){return c.i64.neq(d[14],void 0)?c.sequence([function(e){return d[25]=d[1].keys(),d[26]=c.i64.of_int32(d[25].length),c.i64.gt(d[26],c.i64.cast([0,0]))?c.loopAsync(d[26],function(e){return d[32]=e,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[25],d[32]).then(function(a){return a=a,d[33]=a[0],d[34]=a[1],a})},function(e){return d[35]=d[2].get(d[33]),d[36]=c.i64.to_string(d[35]),d[36]!==void 0?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[25],d[32]).then(function(a){return a=a,d[37]=a[0],d[38]=a[1],a})},function(b){return d[39]=d[1].get(d[33]),c.forEach(c.filter(c.db.table(16).fetch([[[d[7],a[0],d[37]]]]),function(b){return c.i64.eq(b.threadKey,d[7])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&b.messageId===a[0]&&b.attachmentFbid===d[37]}),function(a){var b=a.update;a.item;return b({attachmentFbid:d[36],originalFileHash:d[39]})})}]):c.resolve()}])}):c.resolve()},function(e){return c.storedProcedure(b("LSGetMessageAttributionParams"),a[0]).then(function(a){return a=a,d[27]=a[0],d[28]=a[1],d[29]=a[2],a})},function(e){return c.i64.neq(d[27],void 0)?d[30]=d[27]:d[30]=c.i64.cast([0,0]),c.storedProcedure(b("LSIssueSendAttachmentMessageTask"),d[8],d[7],d[14],a[0],d[9],d[0],d[30],d[10],d[11],d[3],d[16],d[17],a[1],d[22])},function(a){return c.i64.ge(c.i64.cast([0,0]),c.i64.cast([0,0]))?d[31]=void 0:d[31]=c.i64.cast([0,10006]),d[24]=d[31]}]):c.resolve(d[24]=c.i64.cast([0,10005]))},function(a){return d[13]=d[24]}])},function(a){return d[6]=d[13]}])},function(a){return e[0]=d[6]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMediaSendSendPhase1MultiPhotoMessageV2StoredProcedure";a.__tables__=["media_send_jobs","messages","threads","messages_optimistic_context","attachments"];e.exports=a}),null);
__d("LSResumeMediaSendJob",["LSInsertPhase2PendingTask","LSSendPhase1MultiPhotoMessageV2"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return d[0]=new c.Map(),d[1]=new c.Map(),d[1].set("main_job_succeeded",!1),d[1].set("resume_failed",!1),d[1].set("error",void 0),d[1].set("running_sub_job_states",d[0]),d[2]=new c.Map(),d[2].set("should_transcode",!1),d[2].set("use_double_phase",!1),d[2].set("send_by_server",!1),d[2].set("is_secure",!1),d[2].set("should_dedupe",!1),d[2].set("is_optimistic_upload",!1),c.sortBy(c.filter(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["state","ASC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?0:(b=a.item,d[2].set("should_transcode",b.shouldTranscode),d[2].set("use_double_phase",b.useDoublePhase),d[2].set("send_by_server",b.sendByServer),d[2].set("is_secure",b.isSecure),d[2].set("is_optimistic_upload",!1))})},function(b){return d[4]=new c.Map(),c.forEach(c.sortBy(c.filter(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["inMessageIndex","ASC"]]),function(a){a=a.item;return d[13]=a.offlineAttachmentId,d[11]=a.state,d[12]=a.error,c.i64.eq(d[11],c.i64.cast([-1,4294967293]))?d[10]=!0:(c.i64.eq(d[11],c.i64.cast([0,1]))?d[14]=!0:(c.i64.eq(d[11],c.i64.cast([0,3]))?d[15]=!0:(c.i64.eq(d[11],c.i64.cast([0,5]))?d[16]=!0:(c.i64.eq(d[11],c.i64.cast([0,13]))?d[17]=!0:(c.i64.eq(d[11],c.i64.cast([0,7]))?d[18]=!0:(c.i64.eq(d[11],c.i64.cast([0,9]))?d[19]=!0:(c.i64.eq(d[11],c.i64.cast([0,11]))?d[20]=!0:d[20]=!1,d[19]=d[20]),d[18]=d[19]),d[17]=d[18]),d[16]=d[17]),d[15]=d[16]),d[14]=d[15]),d[10]=d[14]),d[10]?c.resolve(c.i64.eq(d[11],c.i64.cast([0,5]))||c.i64.eq(d[11],c.i64.cast([0,11]))?0:d[4].set(d[13],d[11])):c.i64.neq(d[12],void 0)?c.resolve((d[1].set("resume_failed",!0),d[1].set("error",d[12]))):(c.i64.eq(d[11],c.i64.cast([-1,4294967295]))?d[14]=c.i64.cast([0,5]):(c.i64.eq(d[11],c.i64.cast([-1,4294967294]))?(d[16]=d[2].get("should_transcode"),d[15]=d[16]?c.i64.cast([0,1]):c.i64.cast([0,3])):(c.i64.eq(d[11],c.i64.cast([0,2]))?d[16]=c.i64.cast([0,3]):(c.i64.eq(d[11],c.i64.cast([0,4]))?(d[18]=d[2].get("send_by_server"),d[19]=d[2].get("use_double_phase"),d[17]=d[18]?d[19]?c.i64.cast([0,13]):void 0:c.i64.cast([0,5])):(c.i64.eq(d[11],c.i64.cast([0,6]))?(d[19]=d[2].get("use_double_phase"),d[18]=d[19]?c.i64.cast([0,13]):void 0):(c.i64.eq(d[11],c.i64.cast([0,14]))?(d[20]=d[2].get("use_double_phase"),d[21]=d[2].get("should_transcode"),d[19]=d[20]?d[21]?c.i64.cast([0,7]):c.i64.cast([0,9]):void 0):(c.i64.eq(d[11],c.i64.cast([0,8]))?d[20]=c.i64.cast([0,9]):(c.i64.eq(d[11],c.i64.cast([0,10]))?(d[22]=d[2].get("send_by_server"),d[21]=d[22]?void 0:c.i64.cast([0,11])):(c.i64.eq(d[11],c.i64.cast([0,12]))?d[22]=void 0:d[22]=void 0,d[21]=d[22]),d[20]=d[21]),d[19]=d[20]),d[18]=d[19]),d[17]=d[18]),d[16]=d[17]),d[15]=d[16]),d[14]=d[15]),c.i64.neq(d[14],void 0)?c.sequence([function(a){return c.forEach(c.db.table(51).fetch([[[d[13]]]]),function(a){var b=a.update;a.item;return b({state:d[14]})})},function(a){return c.i64.eq(d[14],c.i64.cast([0,5]))||c.i64.eq(d[14],c.i64.cast([0,11]))?0:d[4].set(d[13],d[14])}]):c.resolve())})},function(b){return c.sortBy(c.filter(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["state","ASC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[5]=void 0:(b=a.item,d[5]=b.state)})},function(e){return c.i64.neq(d[5],void 0)?(d[10]=d[2].get("send_by_server"),d[11]=d[2].get("use_double_phase"),d[12]=d[2].get("use_double_phase"),(d[10]?d[11]?c.i64.eq(d[5],c.i64.cast([0,10])):c.i64.eq(d[5],c.i64.cast([0,4])):d[12]?c.i64.eq(d[5],c.i64.cast([0,12])):c.i64.eq(d[5],c.i64.cast([0,6])))?c.resolve(d[1].set("main_job_succeeded",!0)):c.i64.eq(d[5],c.i64.cast([0,5]))?c.sequence([function(b){return d[13]=void 0,c.forEach(c.filter(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[15]=a.error,c.i64.eq(d[15],void 0)?(c.i64.neq(a.fbid,void 0)?d[16]=void 0:d[16]=c.i64.cast([0,9]),d[14]=d[16]):d[14]=d[15],c.i64.neq(d[14],void 0)?d[13]=d[14]:0})},function(e){return c.i64.neq(d[13],void 0)?c.resolve((d[1].set("resume_failed",!0),d[1].set("error",d[13]))):(d[14]=d[2].get("is_optimistic_upload"),d[14]?(d[15]=d[2].get("send_by_server"),d[16]=d[2].get("use_double_phase"),d[17]=d[2].get("use_double_phase"),(d[15]?d[16]?c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,10])):c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,4])):d[17]?c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,12])):c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,6])))?c.resolve(d[1].set("main_job_succeeded",!0)):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([-1,4294967295]))?d[18]=c.i64.cast([0,5]):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([-1,4294967294]))?(d[20]=d[2].get("should_transcode"),d[19]=d[20]?c.i64.cast([0,1]):c.i64.cast([0,3])):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,2]))?d[20]=c.i64.cast([0,3]):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,4]))?(d[22]=d[2].get("send_by_server"),d[23]=d[2].get("use_double_phase"),d[21]=d[22]?d[23]?c.i64.cast([0,13]):void 0:c.i64.cast([0,5])):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,6]))?(d[23]=d[2].get("use_double_phase"),d[22]=d[23]?c.i64.cast([0,13]):void 0):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,14]))?(d[24]=d[2].get("use_double_phase"),d[25]=d[2].get("should_transcode"),d[23]=d[24]?d[25]?c.i64.cast([0,7]):c.i64.cast([0,9]):void 0):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,8]))?d[24]=c.i64.cast([0,9]):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,10]))?(d[26]=d[2].get("send_by_server"),d[25]=d[26]?void 0:c.i64.cast([0,11])):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,12]))?d[26]=void 0:d[26]=void 0,d[25]=d[26]),d[24]=d[25]),d[23]=d[24]),d[22]=d[23]),d[21]=d[22]),d[20]=d[21]),d[19]=d[20]),d[18]=d[19]),c.i64.neq(d[18],void 0)?c.sequence([function(b){return c.forEach(c.filter(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){var b=a.update;a.item;return b({state:d[18]})})},function(b){return c.forEach(c.filter(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[4].set(a.offlineAttachmentId,a.state)})}]):c.resolve())):c.sequence([function(e){return d[15]=d[2].get("is_secure"),d[15]?c.sequence([function(b){return d[17]=c.createArray(),d[18]=new c.Map(),d[19]=new c.Map(),d[20]=!1,d[21]=c.i64.cast([0,0]),c.forEach(c.sortBy(c.filter(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["inMessageIndex","ASC"]]),function(a){a=a.item;return d[26]=a.fbid,d[21]=c.i64.add(d[21],c.i64.cast([0,1])),c.i64.neq(d[26],void 0)?d[27]=(d[17].push(d[26]),d[17]):0})},function(b){return d[22]=c.createArray(),c.forEach(c.sortBy(c.filter(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["inMessageIndex","ASC"]]),function(a){a=a.item;return d[26]=a.metadata,d[26]!==void 0?d[27]=(d[22].push(d[26]),d[22]):0})},function(a){return d[23]=c.i64.of_int32(d[17].length),d[24]=c.i64.of_int32(d[22].length),c.i64.neq(d[23],d[21])||c.i64.neq(d[24],d[21])?d[25]=c.i64.cast([0,11]):(function(a){c.logger(a).debug(a)}("[TincanLS][LSSecureMailboxSendSecureMediaMessageStoredProcedure] Started"),function(a){c.logger(a).debug(a)}("[TincanLS][LSSecureMailboxSendSecureMediaMessageStoredProcedure] Completed"),d[25]=void 0),d[16]=d[25]}]):c.sequence([function(e){return c.storedProcedure(b("LSSendPhase1MultiPhotoMessageV2"),a[0],a[2]).then(function(a){return a=a,d[17]=a[0],a})},function(b){return c.i64.eq(d[17],void 0)?c.forEach(c.filter(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){var b=a.update;a.item;return b({state:c.i64.cast([0,6])})}):c.resolve()},function(a){return d[16]=d[17]}])},function(b){return c.i64.eq(d[16],void 0)?(d[17]=d[2].get("send_by_server"),d[18]=d[2].get("use_double_phase"),d[19]=d[2].get("use_double_phase"),(d[17]?d[18]?c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,10])):c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,4])):d[19]?c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,12])):c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,6])))?c.resolve(d[1].set("main_job_succeeded",!0)):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([-1,4294967295]))?d[20]=c.i64.cast([0,5]):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([-1,4294967294]))?(d[22]=d[2].get("should_transcode"),d[21]=d[22]?c.i64.cast([0,1]):c.i64.cast([0,3])):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,2]))?d[22]=c.i64.cast([0,3]):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,4]))?(d[24]=d[2].get("send_by_server"),d[25]=d[2].get("use_double_phase"),d[23]=d[24]?d[25]?c.i64.cast([0,13]):void 0:c.i64.cast([0,5])):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,6]))?(d[25]=d[2].get("use_double_phase"),d[24]=d[25]?c.i64.cast([0,13]):void 0):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,14]))?(d[26]=d[2].get("use_double_phase"),d[27]=d[2].get("should_transcode"),d[25]=d[26]?d[27]?c.i64.cast([0,7]):c.i64.cast([0,9]):void 0):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,8]))?d[26]=c.i64.cast([0,9]):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,10]))?(d[28]=d[2].get("send_by_server"),d[27]=d[28]?void 0:c.i64.cast([0,11])):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,12]))?d[28]=void 0:d[28]=void 0,d[27]=d[28]),d[26]=d[27]),d[25]=d[26]),d[24]=d[25]),d[23]=d[24]),d[22]=d[23]),d[21]=d[22]),d[20]=d[21]),c.i64.neq(d[20],void 0)?c.sequence([function(b){return c.forEach(c.filter(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){var b=a.update;a.item;return b({state:d[20]})})},function(b){return c.forEach(c.filter(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[4].set(a.offlineAttachmentId,a.state)})}]):c.resolve())):c.resolve((d[1].set("resume_failed",!0),d[1].set("error",d[16])))}]))}]):c.i64.eq(d[5],c.i64.cast([0,11]))?c.sequence([function(b){return d[13]=void 0,c.forEach(c.filter(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[14]=a.error,c.i64.neq(d[14],void 0)?d[13]=d[14]:0})},function(a){return c.i64.neq(d[13],void 0)?(d[1].set("resume_failed",!0),d[1].set("error",d[13])):d[1].set("main_job_succeeded",!0)}]):c.i64.eq(d[5],c.i64.cast([0,13]))?c.sequence([function(e){return c.storedProcedure(b("LSInsertPhase2PendingTask"),a[0],a[1]).then(function(a){return a=a,d[13]=a[0],a})},function(b){return c.i64.neq(d[13],void 0)?c.resolve((d[1].set("resume_failed",!0),d[1].set("error",d[13]))):c.sequence([function(b){return c.forEach(c.filter(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){var b=a.update;a.item;return b({state:c.i64.cast([0,14])})})},function(b){return d[1].set("main_job_succeeded",!0),c.forEach(c.filter(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[4].set(a.offlineAttachmentId,a.state)})}])}]):c.resolve(0)):c.resolve((d[1].set("resume_failed",!0),d[1].set("error",c.i64.cast([0,11]))))},function(a){return d[7]=d[1].get("main_job_succeeded"),d[8]=d[1].get("resume_failed"),d[9]=d[1].get("error"),a=[d[7],d[8],d[9],d[4]],e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMediaSendResumeMediaSendJobStoredProcedure";a.__tables__=["media_send_jobs"];e.exports=a}),null);
__d("LSResumeMediaSendJobStoredProcedure",["LSResumeMediaSendJob","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSResumeMediaSendJob"),e.jobId,e.pluginType,e.dataTraceId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSThreadAttributionTypeUtil",["I64","LSIntEnum","LSMessagingThreadAttributionType","LSThreadAttributionStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){b=d("LSThreadAttributionStore").getSourceWithoutReset({type:"MWLSEntrypoint",value:b},(h||(h=d("I64"))).to_string(a));return j(b)}function b(a,b){b=d("LSThreadAttributionStore").getSourceAndResetAttribution({type:"MWLSEntrypoint",value:b},(h||(h=d("I64"))).to_string(a));return j(b)}function j(a){if(a.type==="LSThreadAttribution")return a.value;a=a.value;if(a==="inboxPendingRequests")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_PENDING_REQUESTS);else if(a==="fullscreenChat")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_COMMUNITY_MESSAGING_FULLSCREEN_CHAT);else if(a==="sidebarGroupsList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_GROUPS);else if(a==="jewel")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").JEWEL_THREAD_LIST);else if(a==="shop")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MINI_SHOP_VIEW_MENU_BUTTON);else if(a==="chatheadsOverflow")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").CHATHEADS_OVERFLOW);else if(a==="hovercard"||a==="feedDynamicHoverCard")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_DYNAMIC_HOVER_CARD);else if(a==="search"||a==="messengerUniversalSearch")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_UNIVERSAL_SEARCH);else if(a==="story"||a==="storyAggregatedUsers"||a==="storySeenByList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_STORY);else if(a==="feedOrganicPost")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_ORGANIC_POST);else if(a==="timeline")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PROFILE_MESSAGE_BUTTON);else if(a==="pageAboutCard")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PAGE_ABOUT_CARD);else if(a==="inboxInThread")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_IN_THREAD);else if(a==="notificationInThreadReply")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_NOTIFICATION_IN_THREAD_REPLY);else if(a==="archieve")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_ARCHIVED_THREADS);else if(a==="storyViewerSheetRow")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_STORY_VIEWER_SHEET_ROW);else if(a==="chatheadsNewMessage")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").CHATHEADS_NEW_MESSAGE);else if(a==="event")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_EVENT);else if(a==="jewelSearch")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").JEWEL_SEARCH);else if(a==="inboxSpam"||a==="inboxThreadList"||a==="inboxRestricted")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX);else if(a==="jewelNewMessage")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").JEWEL_NEW_MESSAGE);else if(a==="pendingRequests")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_PENDING_REQUESTS_INBOX_THREAD_LIST);else if(a==="sidebarSearch")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_SEARCH);else if(a==="inboxRemainingThreads")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_REMAINING_THREADS);else if(a==="pagesHeader")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PAGE_PROFILE_HEADER_MESSAGE_BUTTON);else if(a==="inboxRecentThreads")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_RECENT_THREADS);else if(a==="chatheads")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").CHATHEADS);else if(a==="pageResponsivenessCard")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PAGE_RESPONSIVENESS_CONTEXT_CARD);else if(a==="inboxSearch")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_MESSAGE_SEARCH);else if(a==="jewelNestedFolder")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").JEWEL_NESTED_FOLDER);else if(a==="marketplace")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MARKETPLACE_SEND_MESSAGE);else if(a==="feedOrganicPostViewAndMessage")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_ORGANIC_POST_VIEW_AND_MESSAGE);else if(a==="adsCta")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").CLICK_TO_MESSENGER_AD_SEND_MESSAGE_CTA);else if(a==="chatInThread")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_CHAT_IN_THREAD);else if(a==="payments")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").PAYMENTS);else if(a==="inboxFolder")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_NESTED_FOLDER);else if(a==="inboxArchived")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_ARCHIVED_THREADS);else if(a==="inboxActiveContacts")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_ACTIVE_CONTACTS);else if(a==="sidebarContactsList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_LIST);else if(a==="sidebarCommunityChatsList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_COMMUNITY_CHATS);else if(a==="igdChatTabsThreadView")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").IGD_WEB_CHAT_TAB_IN_THREAD);else if(a==="inboxTrayActiveNow")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MONTAGE_AND_ACTIVE_NOW_ACTIVE_NOW);else if(a==="communityFriendsDialog")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_COMMUNITY_MESSAGING_COMMUNITY_FRIENDS_DIALOG);else if(a==="pagesHomeFriendsDialog")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PAGE_PAGES_HOME_FRIENDS_DIALOG);else if(a==="mutualFriendsDialog")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PROFILE_MUTUAL_FRIENDS_DIALOG);else if(a==="birthday")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_BIRTHDAY_CENTER);else if(a==="groupMembers")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_GROUPS_MEMBER_LIST);else if(a==="fundraiserSupportersList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FUNDRAISER_SUPPORTERS_LIST);else if(a==="memories")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MEMORIES);else if(a==="feedPoll")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_FEED_POLL);else if(a==="reactorList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_REACTORS_LIST_MESSAGE_BUTTON);else if(a==="friendsList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FRIENDS_HOME);else if(a==="pagesPrivateReply")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PAGE_PAGES_PRIVATE_REPLY);else if(a==="inboxNewMessage")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_OMNIPICKER);else return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").UNKNOWN)}g.getSourceWithoutReset=a;g.getSourceAndResetAttribution=b}),98);
__d("MWChatForwardDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="29676447045302300"}),null);
__d("MWChatForwardDialogQuery$Parameters",["MWChatForwardDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWChatForwardDialogQuery_facebookRelayOperation"),metadata:{},name:"MWChatForwardDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWChatForwardDialog.entrypoint",["JSResourceForInteraction","MWChatForwardDialogQuery$Parameters","MWXacGating","WebPixelRatio"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){return{queries:{forwardQueryReference:{parameters:b("MWChatForwardDialogQuery$Parameters"),variables:{scale:d("WebPixelRatio").get(),suppress_xac_groups:!d("MWXacGating").isGroupsEnabled()}}}}},root:c("JSResourceForInteraction")("MWChatForwardDialog.react").__setRef("MWChatForwardDialog.entrypoint")};g["default"]=a}),98);
__d("MWChatThreadId",["FBLogger","I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){switch(a.NAME){case"Group":case"User":case"Page":case"UserSecret":return a.VAL}}function b(a){switch(a.NAME){case"Group":return"g."+a.VAL;case"Page":return"p."+a.VAL;case"User":return"u."+a.VAL;case"UserSecret":throw c("FBLogger")("messenger_web").mustfixThrow("MWChatThreadIdType Not supported")}}function e(a){switch(a.targetType){case"GROUP":return{NAME:"Group",VAL:a.targetID};case"PAGE":return{NAME:"Page",VAL:a.targetID};case"USER":return{NAME:"User",VAL:a.targetID};default:throw c("FBLogger")("messenger_web").mustfixThrow("Invalid id")}}function f(a){return a.NAME==="User"}function j(a){return a.NAME==="UserSecret"}function k(a){if(a==null)return;a=a.split(":");if(a.length!==2)return;var b=a[0];a=a[1];switch(b){case"thread":return{NAME:"Group",VAL:a};case"user":return{NAME:"User",VAL:a};default:return}}function l(a){a=a.NAME;if(a==="Group")return(h||(h=d("LSIntEnum"))).ofNumber(2);return a==="User"||a==="Page"?(h||(h=d("LSIntEnum"))).ofNumber(1):(h||(h=d("LSIntEnum"))).ofNumber(7)}function m(a){return(i||(i=d("I64"))).of_string(a.VAL)}g.getFBID=a;g.serializeFuture=b;g.fromJs=e;g.isUser=f;g.isSecret=j;g.deserializeFromLegacyThreadId=k;g.getMessagingThreadType=l;g.toThreadKey=m}),98);
__d("useGetForwardSource",["LSIntEnum","LSMessagingThreadAttributionType","MWLSThreadDisplayContext","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("react-compiler-runtime").c(4),b=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();if(b!=null)if(b==="Inbox"){var e;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_FORWARD),a[0]=e):e=a[0];return e}else if(b==="ChatTab"){a[1]===Symbol["for"]("react.memo_cache_sentinel")?(e=(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_CHAT_FORWARD),a[1]=e):e=a[1];return e}else{a[2]===Symbol["for"]("react.memo_cache_sentinel")?(b=(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_BROADCAST_FLOW),a[2]=b):b=a[2];return b}else{a[3]===Symbol["for"]("react.memo_cache_sentinel")?(e=(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_BROADCAST_FLOW),a[3]=e):e=a[3];return e}}g["default"]=a}),98);
__d("useLSMessagingInitiatingSource",["LSIntEnum","LSMessagingInitiatingSource","MWLSThreadDisplayContext","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("react-compiler-runtime").c(4),b=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();if(b==null)return;else if(b==="Inbox"){var e;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessagingInitiatingSource").FACEBOOK_INBOX),a[0]=e):e=a[0];return e}else if(b==="FullscreenChat"){a[1]===Symbol["for"]("react.memo_cache_sentinel")?(e=(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessagingInitiatingSource").FACEBOOK_FULLSCREEN),a[1]=e):e=a[1];return e}else if(b==="ChatTab"){a[2]===Symbol["for"]("react.memo_cache_sentinel")?(e=(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessagingInitiatingSource").FACEBOOK_CHAT),a[2]=e):e=a[2];return e}else{a[3]===Symbol["for"]("react.memo_cache_sentinel")?(b=(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessagingInitiatingSource").ROOMS_SIDE_CHAT),a[3]=b):b=a[3];return b}}g["default"]=a}),98);
__d("useLSMessagingSource",["IGDWebUtils","MWLSThreadDisplayContext"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),b=d("IGDWebUtils").isOnInstagramWeb();switch(a){case"Inbox":return"inboxInThread";case"FullscreenChat":return"fullscreenChat";case"ChatTab":return b?"igdChatTabsThreadView":"chatInThread";default:return"unknown"}}g["default"]=a}),98);
__d("MessagePowerUp",[],(function(a,b,c,d,e,f){a=Object.freeze({AVATAR_LOVE:1e3,AVATAR_ANGER:1001,AVATAR_LAUGH:1002,AVATAR_CRY:1003,NONE:0,LOVE:1,GIFT_WRAP:2,CELEBRATION:3,FIRE:4,HALLOWEEN:5,NOM_NOM_DASH:6,NEW_YEARS:7,VALENTINES_DAY:8,ANTI_VALENTINES:9});f["default"]=a}),66);
__d("WorkChatMessageType",[],(function(a,b,c,d,e,f){"use strict";a="text";b="gif";c="sticker";d="audio";e="file";f.text=a;f.gif=b;f.sticker=c;f.audio=d;f.file=e}),66);
__d("useMWLSSendStickerMessage",["I64","Int64Hooks","LSFactory","LSIntEnum","LSMailboxType","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSOptimisticSendMessageV2StoredProcedure","LSShape","LSThreadAttributionTypeUtil","MWPActor.react","MessagePowerUp","WorkChatMessageType","promiseDone","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,b,e){var g=d("react-compiler-runtime").c(7),k=(j||(j=c("useReStore")))(),l=d("MWPActor.react").useActor(),m,n;g[0]!==l||g[1]!==b||g[2]!==a||g[3]!==e||g[4]!==k?(m=function(g,j,m){c("promiseDone")(k.runInTransaction(function(e){var f=d("LSThreadAttributionTypeUtil").getSourceAndResetAttribution(g,a!=null?a:"unknown");return c("LSOptimisticSendMessageV2StoredProcedure")(c("LSFactory")(e),{extraSendMessageParams:d("LSShape").ofRecord({calculate_denormalizations:!0,initiating_source:b,mark_read:!0,optimistic_attachment_preview:d("LSShape").ofRecord({playable_url:void 0,playable_url_expiration_timestamp_ms:void 0,playable_url_fallback:void 0,playable_url_mime_type:void 0,preview_height:(h||(h=d("I64"))).zero,preview_url:m,preview_url_expiration_timestamp_ms:void 0,preview_url_fallback:void 0,preview_url_mime_type:void 0,preview_width:h.zero}),power_up_style:(i||(i=d("LSIntEnum"))).ofNumber(c("MessagePowerUp").NONE),reply_source_id:void 0,reply_source_type:i.ofNumber(c("LSMessageReplySourceType").MESSAGE),reply_source_type_v2:i.ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE),snippet_has_emoji:!1,source:f,sticker_id:h.of_string(j)}),mailboxType:i.ofNumber(c("LSMailboxType").MESSENGER),senderId:l,threadKey:g,threadType:i.ofNumber(1)})},"readwrite",void 0,void 0,f.id+":49").then(function(a){e==null||e(d("WorkChatMessageType").sticker,1,a[0])}))},n=[k,l,b,a,e],g[0]=l,g[1]=b,g[2]=a,g[3]=e,g[4]=k,g[5]=m,g[6]=n):(m=g[5],n=g[6]);return d("Int64Hooks").useCallbackInt64(m,n)}g["default"]=a}),98);
__d("MWLSForwardMessage",["I64","Int64Hooks","LSFactory","LSMediaUrlAttachment","LSOptimisticSendAttachmentForwardStoredProcedure","LSOptimisticSendMessageForwardStoredProcedure","MWChatThreadId","MWPActor.react","ODS","Promise","ReQL","promiseDone","react-compiler-runtime","useGetForwardSource","useLSMessagingInitiatingSource","useLSMessagingSource","useMWLSSendStickerMessage","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function a(){var a=d("react-compiler-runtime").c(7),e=(k||(k=c("useReStore")))(),g=d("MWPActor.react").useActor(),o=c("useLSMessagingInitiatingSource")(),p=c("useGetForwardSource")(),q=c("useLSMessagingSource")(),r=c("useMWLSSendStickerMessage")(q,o),s;a[0]!==o||a[1]!==r||a[2]!==g||a[3]!==p||a[4]!==e?(q=function(a,k,q){if(q.type!=="sent")return;q=q.value;var s=q.timestamp,t=q.messageId,u=q.threadId;(i||(i=d("ODS"))).bumpEntityKey(3185,"mw_forward","send");var v=function(){return e.runInTransaction(function(b){return c("LSOptimisticSendMessageForwardStoredProcedure")(c("LSFactory")(b),{forwardedMsgId:t,forwardedMsgThreadKey:u,forwardedMsgTimestampMs:s,initiatingSource:o,senderId:g,source:p,threadKey:a,threadType:k})},"readwrite",void 0,void 0,f.id+":62").then(n)};c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.messages).getKeyRange(u,s,t)).then(function(c){if(c==null)return v();var f=c.stickerId;if(f!=null)return d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.attachments).getKeyRange(u,t)).then(function(c){c=c!=null?d("LSMediaUrlAttachment").previewUrl(c):void 0;r(a,(j||(j=d("I64"))).to_string(f),c);return(h||(h=b("Promise"))).resolve()});else return v()}),m,l)},s=[e,g,o,p,r],a[0]=o,a[1]=r,a[2]=g,a[3]=p,a[4]=e,a[5]=q,a[6]=s):(q=a[5],s=a[6]);return d("Int64Hooks").useCallbackInt64(q,s)}function l(){return(i||(i=d("ODS"))).bumpEntityKey(3185,"mw_forward","failure")}function m(){return(i||(i=d("ODS"))).bumpEntityKey(3185,"mw_forward","success")}function n(){}function e(){var a=d("react-compiler-runtime").c(6),b=(k||(k=c("useReStore")))(),e=d("MWPActor.react").useActor(),g=c("useLSMessagingInitiatingSource")(),h=c("useGetForwardSource")(),l,m;a[0]!==g||a[1]!==e||a[2]!==h||a[3]!==b?(l=function(){return function(a,k,l){(i||(i=d("ODS"))).bumpEntityKey(3185,"mw_forward","send");var m=d("MWChatThreadId").getMessagingThreadType(a),n=d("MWChatThreadId").toThreadKey(a);c("promiseDone")(b.runInTransaction(function(a){return c("LSOptimisticSendAttachmentForwardStoredProcedure")(c("LSFactory")(a),{forwardedAttachmentFbid:(j||(j=d("I64"))).of_string(k),initiatingSource:g,senderId:e,source:h,threadKey:n,threadType:m})},"readwrite",void 0,void 0,f.id+":140"),p,o)}},m=[b,e,g,h],a[0]=g,a[1]=e,a[2]=h,a[3]=b,a[4]=l,a[5]=m):(l=a[4],m=a[5]);return d("Int64Hooks").useMemoInt64(l,m)}function o(){return(i||(i=d("ODS"))).bumpEntityKey(3185,"mw_forward","failure")}function p(){return(i||(i=d("ODS"))).bumpEntityKey(3185,"mw_forward","success")}g.useForwardMessage=a;g.useForwardAttachment=e}),98);
__d("getMessengerPreciseTimestamp",["$InternalEnum","formatDate"],(function(a,b,c,d,e,f,g){"use strict";var h=b("$InternalEnum").Mirrored(["TODAY","WEEK_AGO","CURRENT_YEAR","OTHER_YEAR"]);d=864e5;var i=6*d;function j(a){a=new Date(a);var b=new Date();b=new Date(b.getFullYear(),b.getMonth(),b.getDate());if(b<a)return h.TODAY;if(b.getTime()-i<a.getTime())return h.WEEK_AGO;return b.getFullYear()===a.getFullYear()?h.CURRENT_YEAR:h.OTHER_YEAR}function k(a){a=j(a);switch(a){case h.TODAY:return"g:ia";case h.WEEK_AGO:return"l g:ia";case h.CURRENT_YEAR:return"F jS, g:ia";case h.OTHER_YEAR:return"F j, Y g:i a"}}function a(a,b){return c("formatDate")(new Date(a),k(a),void 0,b)}g["default"]=a}),98);
__d("MWMessageDeliveryStatus",["fbt","I64","LSIntEnum","getFBTSafeGenderFromGenderConst","getMessengerPreciseTimestamp","intlList","intlSummarizeNumber"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;function a(a){if(a.length!==1)return{heads:a,type:"MultipleSeenHeads"};a=a[0];return{head:a,type:"SingleSeenHead"}}function b(a,b){return{delivered:b,heads:a,type:"DeliveredAndRead"}}function e(a){return{count:a,type:"SeenCount"}}function k(a){return a.timestamp>0?h._(/*BTDS*/"_j{\"*\":\"Seen by {full name} at {seen time}\"}",[h._name("full name",a.name,c("getFBTSafeGenderFromGenderConst")(a.gender)),h._param("seen time",c("getMessengerPreciseTimestamp")(a.timestamp))]):h._(/*BTDS*/"_j{\"*\":\"Seen by {full name}\"}",[h._name("full name",a.name,c("getFBTSafeGenderFromGenderConst")(a.gender))])}function l(a,b){if(a.length===0)return"";if(b)return h._(/*BTDS*/"Seen by everyone").toString();b=a.map(function(a){return h._(/*BTDS*/"_j{\"*\":\"{full name}\"}",[h._name("full name",a.name,c("getFBTSafeGenderFromGenderConst")(a.gender))])});a=c("intlList")(b,c("intlList").CONJUNCTIONS.AND,c("intlList").DELIMITERS.COMMA);return h._(/*BTDS*/"Seen by {full name}",[h._param("full name",a)]).toString()}function m(a){a=c("intlSummarizeNumber")(a);return h._(/*BTDS*/"Seen by {seen count}",[h._param("seen count",a)]).toString()}var n={delivered:h._(/*BTDS*/"Delivered"),error:h._(/*BTDS*/"Couldn't send"),loading:h._(/*BTDS*/"Loading..."),retriableError:h._(/*BTDS*/"Click to try again."),sending:h._(/*BTDS*/"Sending"),sent:h._(/*BTDS*/"Sent")};function f(a){switch(a.type){case"Sending":return n.sending;case"Sent":case"Delivered":return n.sent;case"Error":return n.error;case"SingleSeenHead":return k(a.head);case"NoneStatus":case"MultipleSeenHeads":return"";case"DeliveredAndRead":return l(a.heads,a.delivered);case"SeenCount":return m(a.count);case"Loading":return n.loading;case"RetriableError":return n.retriableError;case"ValidationError":return""}}function o(a){switch(a.type){case"Sending":return n.sending;case"Sent":return n.sent;case"Delivered":return n.delivered;case"Error":case"RetriableError":return n.error;case"SingleSeenHead":return k(a.head);case"DeliveredAndRead":return l(a.heads,a.delivered);default:return""}}function p(a){if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(1)))return{type:"Sending"};else if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(2))||(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(6)))return{type:"Sent"};else if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(4))||(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(5)))return{type:"Error"};else return{type:"NoneStatus"}}function q(a,b,c){var e=p(a.sendStatusV2);if((i||(i=d("I64"))).equal(a.sendStatusV2,(j||(j=d("LSIntEnum"))).ofNumber(4))||(i||(i=d("I64"))).equal(a.sendStatusV2,(j||(j=d("LSIntEnum"))).ofNumber(5))||(i||(i=d("I64"))).equal(a.sendStatusV2,(j||(j=d("LSIntEnum"))).ofNumber(1)))return e;else if(!c&&(i||(i=d("I64"))).equal(a.sendStatusV2,(j||(j=d("LSIntEnum"))).ofNumber(2)))return{type:"NoneStatus"};else if((i||(i=d("I64"))).ge(b,a.timestampMs))return{type:"Delivered"};else return e}function r(a){return["SingleSeenHead","Sending","MultipleSeenHeads","Error","RetriableError"].includes(a.type)}g.seenHead=a;g.deliveredAndRead=b;g.seenCount=e;g.getSingleSeenHead=k;g.getSeenCount=m;g.Titles=n;g.getBroadcastStatusTitle=f;g.getStatusTitle=o;g.getFromSendStatus=p;g.getDeliveryStatusForMessageSentByYou=q;g.isAlwaysShownStatus=r}),226);
__d("MWPComposerMediaUploadUtil",["FBLogger","I64","LSGetAttachmentType","LSIntEnum","MessagingAttachmentType","ResumableUploadServiceState.enum","URI","cr:6057","cr:7187","emptyFunction","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k="messenger_file",l="messenger_audio",m="messenger_image",n="messenger_video",o="file_type",p="image_type",q="video_type",r="audio_type",s="FILE_ATTACHMENT",t="VOICE_MESSAGE",u="target_id";async function v(a,d,e,f,g,h,i,j,k,l,m){d===void 0&&(d=c("emptyFunction"));f===void 0&&(f=c("emptyFunction"));g===void 0&&(g=!1);var n="/ajax/mercury/upload.php";j===!0&&(n="/ajax/mercury/chatsupportuser/upload.php");var o=await b("cr:6057").load();o=new o({concurrentLimit:3,onUploadFailure:f,onUploadProgress:d,onUploadStart:function(b,c){a&&a(b,c.upload._file.size,c.upload._file.type)},onUploadSuccess:function(a,b){b=b.response.payload.metadata;var d;if(b==null)c("FBLogger")("messenger_web_media").warn("Empty payload"),d={};else{b=b[0];b!=null?d=b:(c("FBLogger")("messenger_web_media").warn("Empty metadata isChatSupportUser: %s",j),d={})}b=d.fbid;var f=d.image_id,g=d.video_id,h=d.audio_id,i=d.gif_id;d=d.file_id;f=(g=(b=(f=(b=b!=null?b:f)!=null?b:g)!=null?f:h)!=null?b:i)!=null?g:d;typeof f==="number"&&(f=f.toString());x(f);e(a,f);if(f==null)throw c("FBLogger")("messenger_web").mustfixThrow("Unrecognized file upload success payload")},retryLimit:1,uploadEndpoint:n});f={};f.data={chat_support_user_id:j===!0&&k!=null?k:void 0,nonce:j===!0&&m!=null?m:void 0,voice_clip:g?!0:void 0,voice_clip_waveform_data:g?JSON.stringify(l):void 0};o.getAsyncFileUploadRequest(h,i,f).send()}function w(a,e,f,g,i,v){f===void 0&&(f=c("emptyFunction"));if(!b("cr:7187"))return;var w=(j||(j=c("URI"))).getRequestURI().getDomain(),x=/workplace.com/i.test(w)?"workplace.com":/messenger.com/i.test(w)?"messenger.com":"facebook.com";g.forEach(function(g,j){var w=g.attachmentType,y=g.file;g=k;var z=o,A=s;switch(w){case(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE):g=m;z=p;break;case(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO):g=l;z=r;A=t;break;case(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO):g=n;z=q;break;default:break}w=b("cr:7187").create({consumer:g,customHttpHeaders:new Map([[u,v],[z,A]]),serviceDomain:x});w.addListener((g=c("ResumableUploadServiceState.enum")).START,function(){a&&a(i[j],y.size,y.type)});w.addListener(g.SUCCESS,function(a){e(i[j],a.media_id)});w.addListener(g.FAIL,function(a){f(i[j],{response:a})});w.addListener(g.TRANSPORT_FAILURE,function(a){f(i[j],{response:a})});void w.resume(y)})}function x(a){if(a!=null){var b=Number(a),d=b.toString();b>Number.MAX_SAFE_INTEGER&&d!==a&&c("FBLogger")("work_web_messaging","messaging-composer-upload-fbid-out-of-range").warn("FBID for attachment is out of JS Number range and it's not correctly handled on client: %d",a)}}async function a(a,e,f,g,j,k,l,m,n,o,p,q){e===void 0&&(e=c("emptyFunction"));g===void 0&&(g=c("emptyFunction"));j===void 0&&(j=!1);if(b("cr:7187")&&q!=null&&m!==!0){var r=[],s=[],t=[],u=[],x=await Promise.all(k.map(function(a){return d("LSGetAttachmentType").LSGetAttachmentType(a)}));k.forEach(function(a,b){var e=x[b];(i||(i=d("I64"))).equal(e,(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))?(r.push({attachmentType:e,file:a}),s.push(l[b])):(t.push(a),u.push(l[b]))});r.length>0&&w(a,f,g,r,s,q);t.length>0&&c("promiseDone")(v(a,e,f,g,j,t,u,m,n,o,p))}else c("promiseDone")(v(a,e,f,g,j,k,l,m,n,o,p))}function e(a,b,e,f){var g;return{action_url:void 0,attachment_fbid:a,attachment_index:(i||(i=d("I64"))).zero,attachment_type:(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO),cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,description_text:void 0,filename:void 0,filesize:void 0,has_media:!0,has_xma:!1,image_url:void 0,mini_preview:void 0,offline_attachment_id:a,original_file_hash:void 0,playable_duration_ms:i.of_float(e*1e3),playable_url:URL.createObjectURL(b),playable_url_mime_type:b.type,preview_height:void 0,preview_url:void 0,preview_url_mime_type:void 0,preview_width:void 0,sampling_frequency_hz:f==null?void 0:f.sampling_freq,source_text:void 0,subtitle_text:void 0,title_text:void 0,waveform_data:f==null||(g=f.amplitudes)==null?void 0:g.join(","),xma_layout_type:void 0,xmas_template_type:void 0}}function f(a,b,e){a=a.map(function(a){return{action_url:void 0,attachment_fbid:a.offlineAttachmentId,attachment_index:(i||(i=d("I64"))).zero,attachment_type:a.attachmentType,cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,description_text:void 0,filename:a.filename,filesize:void 0,has_media:!0,has_xma:!1,image_url:void 0,mini_preview:void 0,offline_attachment_id:a.offlineAttachmentId,original_file_hash:void 0,playable_duration_ms:void 0,playable_url:a.previewUrl,playable_url_mime_type:a.mimeType,preview_height:a.previewHeight,preview_url:a.previewUrl,preview_url_mime_type:void 0,preview_width:a.previewWidth,source_text:void 0,subtitle_text:void 0,title_text:void 0,xma_layout_type:void 0,xmas_template_type:void 0}});var f=[],g=[];a.forEach(function(a){((i||(i=d("I64"))).equal(a.attachment_type,(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))||c("gkx")("4280")&&(i||(i=d("I64"))).equal(a.attachment_type,(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))&&!b?(g.push(a),e===!0&&g.length===30&&(f.unshift([].concat(g)),g.length=0)):f.push([a])});g.length>0&&(e===!0?f.push(g):f.unshift(g));return f.map(function(a){return a.map(function(a,b){return babelHelpers.extends({},a,{attachment_index:(i||(i=d("I64"))).of_int32(b)})})})}g.startUpload=a;g.getAudioAttachment=e;g.createPartitionedAttachments=f}),98);
__d("MWPFeatureLimitedData",["I64","Int64Hooks","LSFeatureLimitsType","LSIntEnum","LSMessagingThreadTypeUtil","ReQL","ReQLSuspense","ServerTime","gkx","react-compiler-runtime","useReStore","useServerTime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=[(i||(i=d("LSIntEnum"))).ofNumber(c("LSFeatureLimitsType").READ_ONLY),i.ofNumber(c("LSFeatureLimitsType").GENERIC_READ_ONLY_BLOCK),i.ofNumber(c("LSFeatureLimitsType").MESSAGE_SEND)];function l(a){for(var b of k)if((j||(j=d("I64"))).equal(b,a.type_))return!0;return!1}function m(a,b){return(j||(j=d("I64"))).equal((i||(i=d("LSIntEnum"))).ofNumber(c("LSFeatureLimitsType").MESSAGE_SEND_PUBLIC),a.type_)&&d("LSMessagingThreadTypeUtil").isPublicCMThread(b)&&c("gkx")("26351")}function n(a,b){return(j||(j=d("I64"))).equal((i||(i=d("LSIntEnum"))).ofNumber(c("LSFeatureLimitsType").MESSAGE_SEND_PRIVATE),a.type_)&&d("LSMessagingThreadTypeUtil").isPrivateThread(b)}var o=function(a){var b=(j||(j=d("I64"))).of_float(d("ServerTime").getMillis()/1e3);return d("ReQL").fromTableAscending(a.tables.feature_limits).filter(function(a){return l(a)&&(j||(j=d("I64"))).gt(a.expirationTimestampSeconds,b)})};function p(a,b){var e=d("react-compiler-runtime").c(8),f=(j||(j=d("I64"))).of_float(c("useServerTime")().valueOf()/1e3),g;e[0]!==f||e[1]!==a.tables.feature_limits||e[2]!==b?(g=function(){return d("ReQL").fromTableAscending(a.tables.feature_limits).filter(function(a){return(b!=null?l(a)||m(a,b)||n(a,b):l(a))&&(j||(j=d("I64"))).gt(a.expirationTimestampSeconds,f)})},e[0]=f,e[1]=a.tables.feature_limits,e[2]=b,e[3]=g):g=e[3];var h;e[4]!==f||e[5]!==a||e[6]!==b?(h=[f,a,b],e[4]=f,e[5]=a,e[6]=b,e[7]=h):h=e[7];return d("Int64Hooks").useMemoInt64(g,h)}function a(){var a=d("react-compiler-runtime").c(3),b=(h||(h=c("useReStore")))(),e,g;a[0]!==b?(e=function(){return o(b)},g=[b],a[0]=b,a[1]=e,a[2]=g):(e=a[1],g=a[2]);return d("ReQLSuspense").useFirst(e,g,f.id+":127")}function b(a){var b=d("react-compiler-runtime").c(3),e=(h||(h=c("useReStore")))(),g=p(e,a);b[0]!==g?(e=function(){return g},a=[g],b[0]=g,b[1]=e,b[2]=a):(e=b[1],a=b[2]);return d("ReQLSuspense").useFirst(e,a,f.id+":136")}g.readonlyFeatureLimitQuery=o;g.useReadOnlyFeatureLimitData=a;g.useReadOnlyFeatureLimitDataWithThreadType=b}),98);
__d("MWPOpenComposerUtils",["I64","LSRemoveMediaSendJobsStoredProcedure","LSResumeMediaSendJobStoredProcedure","MWConsole"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return a.media_staging.get(b).then(function(c){if(c!=null)return a.media_staging.delete(b);else return Promise.resolve()})}async function b(a,b,c){b=await a.media_staging.get(b);b!=null&&await a.media_staging.put(c(b))}function e(a,b,c,d,e){return a.attachments.get(b,c,d).then(function(f){if(f!=null)return a.attachments.upsert([b,c,d],e(f));else return Promise.resolve()})}function f(a,b,e){return c("LSResumeMediaSendJobStoredProcedure")(a,{dataTraceId:e!=null?e:void 0,jobId:b,pluginType:(h||(h=d("I64"))).zero}).then(function(d){var e=d[0],f=d[1];f=d[2];if(e)return c("LSRemoveMediaSendJobsStoredProcedure")(a,{offlineThreadingId:b});else return Promise.resolve()})}g.deleteMediaStaging=a;g.updateMediaStaging=b;g.updateAttachment=e;g.resumeSendJob=f}),98);
__d("MWPThreadCapabilitiesContext",["I64","Int64Hooks","LSIntEnum","LSMessageThreadUnsendabilityStatus","LSThreadBitOffset","ThreadStatus","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react"));e=h;f=e.createContext;var l=e.useContext,m=f({air131ShareChatMessagesWithMetaAiEnabled:!1,blurMediaEnabled:!1,canUnsendMessage:!1,communityMessagingChannelDescriptionCustomization:!1,communityMessagingChannelInvite:!1,disableLinks:!1,editMessageEnabled:!1,feedbackAndReportEnabled:!1,hasLSThreadBitOffset:function(a){return!1},isPaused:!1,localDeleteMessageEnabled:!1,messageForwardEnabled:!1,messageUnsendEnabled:!1,modifyPinnedMessageV2Enabled:!1,reactEnabled:!1,reactionsV2WriteEnabled:!1,replyEnabled:!1,reportMessageToAdminEnabled:!1,rtcVideoCallEnabled:!1,rtcVoiceCallEnabled:!1,seenCountV2Enabled:!1,subThreadCreationEnabled:!1});function a(a){var b=d("react-compiler-runtime").c(17),e=a.children,f=a.customCapabilityCheck,g=a.thread,h=g.capabilities,l=g.capabilities2,n=g.capabilities3,o=g.capabilities4,p=g.capabilities5,q=g.threadType,r;b[0]!==h||b[1]!==l||b[2]!==n||b[3]!==o||b[4]!==p||b[5]!==q?(a=function(a){var b={capabilities:h,capabilities2:l,capabilities3:n,capabilities4:o,capabilities5:p,threadType:q};return d("LSThreadBitOffset").has(a,b)},r=[h,l,n,o,p,q],b[0]=h,b[1]=l,b[2]=n,b[3]=o,b[4]=p,b[5]=q,b[6]=a,b[7]=r):(a=b[6],r=b[7]);var s=d("Int64Hooks").useCallbackInt64(a,r);b[8]!==f||b[9]!==s||b[10]!==g.cannotUnsendReason||b[11]!==g.threadStatus?(a=function(){return{air131ShareChatMessagesWithMetaAiEnabled:s(256),blurMediaEnabled:s(46),canUnsendMessage:g.cannotUnsendReason!=null?(i||(i=d("I64"))).equal(g.cannotUnsendReason,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageThreadUnsendabilityStatus").CAN_UNSEND)):!0,communityMessagingChannelDescriptionCustomization:s(135),communityMessagingChannelInvite:s(120),disableLinks:s(45),editMessageEnabled:s(194),feedbackAndReportEnabled:s(17),hasLSThreadBitOffset:s!=null?s:f,isPaused:g.threadStatus!=null&&((i||(i=d("I64"))).equal(g.threadStatus,(i||(i=d("I64"))).of_int32(c("ThreadStatus").PAUSED))||(i||(i=d("I64"))).equal(g.threadStatus,(i||(i=d("I64"))).of_int32(c("ThreadStatus").PAUSED_AND_UPGRADED_TO_COMMUNITY))),localDeleteMessageEnabled:s(102),messageForwardEnabled:s(103),messageUnsendEnabled:s(122)&&g.cannotUnsendReason!=null?(i||(i=d("I64"))).equal(g.cannotUnsendReason,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageThreadUnsendabilityStatus").CAN_UNSEND)):!1,modifyPinnedMessageV2Enabled:s(172),reactEnabled:s(18),reactionsV2WriteEnabled:s(169),replyEnabled:s(42),reportMessageToAdminEnabled:s(93),rtcVideoCallEnabled:s(24),rtcVoiceCallEnabled:s(25),seenCountV2Enabled:s(140),subThreadCreationEnabled:s(167)}},r=[f,s,g.threadStatus,g.cannotUnsendReason],b[8]=f,b[9]=s,b[10]=g.cannotUnsendReason,b[11]=g.threadStatus,b[12]=a,b[13]=r):(a=b[12],r=b[13]);a=d("Int64Hooks").useMemoInt64(a,r);b[14]!==e||b[15]!==a?(r=k.jsx(m.Provider,{value:a,children:e}),b[14]=e,b[15]=a,b[16]=r):r=b[16];return r}function b(){return l(m)}g.Provider=a;g.useMWPThreadCapabilitiesContext=b}),98);
__d("MWUnvaultedText",["cr:2472","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useMemo;var i=function(a,c){if(b("cr:2472")==null||c==null||c==="")return c;return a?b("cr:2472").unvaultOrThrow(c):b("cr:2472").unvault(c,!0)};function a(a,b){var c=d("react-compiler-runtime").c(3),e;c[0]!==a||c[1]!==b?(e=i(a,b),c[0]=a,c[1]=b,c[2]=e):e=c[2];a=e;b=a;return b}g.getMWUnvaultedText=i;g.useMWUnvaultedText=a}),98);
__d("MWV2LogMessageClick",["I64","LSMessagingThreadTypeUtil","Promise","ReQL","UserAgentData","promiseDone","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("LsMessageClickFalcoEvent").__setRef("MWV2LogMessageClick");function a(a,e,f,g){var k=e.threadKey;c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.threads).getKeyRange(k)).then(function(a){a!=null&&!d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType)&&j.onReady(function(a){a.log(function(){return{click:{category:2},click_target:{type:f},extra:JSON.stringify({action:g!=null?g:void 0,browserName:c("UserAgentData").browserName}),message:{id:e.messageId,sender_id:void 0,sent_time:(i||(i=d("I64"))).to_float(e.timestampMs)},thread:{id:i.to_string(e.threadKey),key:void 0,type:void 0},xma:void 0}})});return(h||(h=b("Promise"))).resolve()}))}g.log=a}),98);
__d("MWV2MessageRowIsRowFocusedContext.react",["emptyFunction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;f=e.createContext;var j=e.useContext;e={isDialogOpened:!1,setFocused:c("emptyFunction"),setIsDialogOpened:c("emptyFunction")};var k=f(e);function a(){return j(k)}function b(a){var b=d("react-compiler-runtime").c(3),c=a.children;a=a.value;var e=k.Provider;b[0]!==c||b[1]!==a?(e=i.jsx(e,{value:a,children:c}),b[0]=c,b[1]=a,b[2]=e):e=b[2];return e}g.context=k;g.useMWV2MessageRowIsRowFocusedContext=a;g.MWV2MessageRowIsRowFocusedContextProvider=b}),98);
__d("isDeliveryStatusErrorState",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.type==="Error"||a.type==="RetriableError"}f["default"]=a}),66);
__d("isFeatureLimitEnabled",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("588")===!0}g["default"]=a}),98);
__d("useIsReadOnlyFeatureLimitedWithThreadType",["MWPFeatureLimitedData"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=d("MWPFeatureLimitedData").useReadOnlyFeatureLimitDataWithThreadType(a);return a!=null}g["default"]=a}),98);
__d("useIsSecureMessage",["LSMessagingThreadTypeUtil","ReQL","ReQLSuspense","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){var e,g=d("react-compiler-runtime").c(2);e=(e=d("ReQLSuspense").useFirst(function(){return b==null?d("ReQL").empty():d("ReQL").fromTableAscending(a.tables.threads,["threadType"]).getKeyRange(b.threadKey).map(h)},[a,b],f.id+":37"))!=null?e:c.fallbackThreadType;if(e==null){return(c=c.fallbackIsSecure)!=null?c:!1}g[0]!==e?(c=d("LSMessagingThreadTypeUtil").isArmadilloSecure(e),g[0]=e,g[1]=c):c=g[1];return c}function h(a){a=a.threadType;return a}g["default"]=a}),98);
__d("useMWChatForward",["MWChatForwardDialog.entrypoint","MessengerWebUXLogger","react","react-compiler-runtime","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.useRef;function a(a){var b=d("react-compiler-runtime").c(11),e=a.dropToggle,f=a.forwardDialogType,g=a.messageID,h=a.onClose,j=a.onSend;a=i(null);var k;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(k={},b[0]=k):k=b[0];k=c("useMWXEntryPointDialog")(c("MWChatForwardDialog.entrypoint"),k);var l=k[0],m=c("MessengerWebUXLogger").useInteractionLogger();b[1]!==e||b[2]!==f||b[3]!==m||b[4]!==g||b[5]!==h||b[6]!==j||b[7]!==l?(k=function(){l({dropToggle:e,forwardDialogType:f,messageID:g,onSend:j},h,m==null?void 0:m("forward_message"))},b[1]=e,b[2]=f,b[3]=m,b[4]=g,b[5]=h,b[6]=j,b[7]=l,b[8]=k):k=b[8];k=k;b[9]!==k?(a={onClick:k,triggerRef:a},b[9]=k,b[10]=a):a=b[10];return a}g["default"]=a}),98);
__d("useMWGetOtherUserContact",["I64","LSMessagingThreadTypeUtil","MWPActor.react","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useMemo;function a(a,b,e){var g=(h||(h=c("useReStore")))(),j=d("MWPActor.react").useActor(),l=(i||(i=d("I64"))).equal(j,a),m=k(function(){return e},[].concat(e));return d("ReQLSuspense").useFirst(function(){return!d("LSMessagingThreadTypeUtil").isOneToOne(b)?d("ReQL").empty():d("ReQL").mergeJoin(d("ReQL").fromTableAscending(g.tables.participants,["contactId"]).getKeyRange(a),d("ReQL").fromTableAscending(g.tables.contacts,e)).filter(function(a){var b=a[0];a[1];return l||!(i||(i=d("I64"))).equal(b.contactId,j)}).map(function(a){a[0];a=a[1];return a})},[b,g,a,l,j,m],f.id+":35")}g["default"]=a}),98);
__d("useMWIsContactRestricted",["LSContactBitOffset","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=d("react-compiler-runtime").c(2),c;b[0]!==a?(c=a!=null&&d("LSContactBitOffset").has(66,a),b[0]=a,b[1]=c):c=b[1];a=c;return a}g["default"]=a}),98);
__d("useMWLSDefaultThreadSourceAndResetAttribution",["LSThreadAttributionTypeUtil","react","react-compiler-runtime","useLSMessagingSource"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(){var a=d("react-compiler-runtime").c(2),b=c("useLSMessagingSource")(),e;a[0]!==b?(e=function(a){return d("LSThreadAttributionTypeUtil").getSourceAndResetAttribution(a,b)},a[0]=b,a[1]=e):e=a[1];return e}g["default"]=a}),98);
__d("useMWV2ForwardMessage",["$InternalEnum","CometRelay","FBLogger","I64","Int64Hooks","LSIntEnum","LSMessagingThreadTypeUtil","MAWDbMsg","MAWExternalId","MAWThreadId","MAWVault","MAWVerifyThreadCutover","MWChatMessageId","MWChatThreadId","MWLSForwardMessage","MWPActor.react","MWSharedMsgLogUtils","MWSharedS2SBaseAnnotations","MWUnvaultedText","ReQL","ReQLSuspense","WAResultOrError","cr:19816","cr:19893","cr:19894","cr:9759","promiseDone","react","react-compiler-runtime","sendToSentQPLLogger","useGetForwardSource","useIsSecureMessage","useLSMessagingSource","useReStore","useStringWithSubstitutions"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;(i||d("react")).useMemo;function l(a,b,c){var e;return(e=d("ReQL")).firstAsync(e.mergeJoin(e.fromTableAscending(a.tables.participants).getKeyRange(b),e.fromTableAscending(a.tables.contacts)).filter(function(a){a[0];a=a[1];return!(k||(k=d("I64"))).equal(a.id,c)}))}function m(a,b,c){var e=d("react-compiler-runtime").c(20),g=b.messageId,h=b.threadKey;e[0]!==a.tables.attachments||e[1]!==g||e[2]!==h?(b=function(){return d("ReQL").fromTableAscending(a.tables.attachments).getKeyRange(h,g)},e[0]=a.tables.attachments,e[1]=g,e[2]=h,e[3]=b):b=e[3];var i;e[4]!==a||e[5]!==g||e[6]!==h?(i=[a,g,h],e[4]=a,e[5]=g,e[6]=h,e[7]=i):i=e[7];b=d("ReQLSuspense").useArray(b,i,f.id+":89");e[8]!==c||e[9]!==a.tables.attachments||e[10]!==g||e[11]!==h?(i=function(){return c!=null?d("ReQL").fromTableAscending(a.tables.attachments).getKeyRange(h,g,c):d("ReQL").empty()},e[8]=c,e[9]=a.tables.attachments,e[10]=g,e[11]=h,e[12]=i):i=e[12];var j;e[13]!==c||e[14]!==a||e[15]!==g||e[16]!==h?(j=[c,a,g,h],e[13]=c,e[14]=a,e[15]=g,e[16]=h,e[17]=j):j=e[17];i=d("ReQLSuspense").useFirst(i,j,f.id+":98");j=b.length>0?b[0]:void 0;if(c!=null){i=i!=null?i:j;e[18]!==i?(j=i!=null?[i]:[],e[18]=i,e[19]=j):j=e[19];return j}return b}function n(){var a=(h||(h=c("useReStore")))();return d("Int64Hooks").useCallbackInt64(async function(e,f,g,h,i,j,k,m,n){var p=d("MWChatThreadId").toThreadKey(i),q=d("MWChatThreadId").getMessagingThreadType(i);i=await d("MAWVerifyThreadCutover").verifyThreadCutover(Promise.resolve(a),p);var r=await Promise.all([d("MAWThreadId").isSecureThreadKey(a.tables,p),d("MAWThreadId").getThread(a.tables,p),l(a,p,g)]),s=r[0],t=r[1];r=r[2];s=s||i;try{if(b("cr:19893")!=null&&!s){d("sendToSentQPLLogger").addSendToSentAnnotations(j,{string:{forward_type:o.SecureToOpen}});m!=null?await Promise.allSettled([m.messagesAndAttachments.map(function(c){return b("cr:19893").forwardMessage(a,p,q,c.message,h,(c=c.attachment)!=null?c:void 0,g,k)})]):await b("cr:19893").forwardMessage(a,p,q,e,h,f[0],g,k,n);d("sendToSentQPLLogger").markSendToSentSuccess(j);return[d("WAResultOrError").makeResult({description:"open message",messageType:"fixMe"})]}i=d("MAWDbMsg").toMsgId(e.messageId);if(i==null)throw c("FBLogger")("messenger_web_sharing").mustfixThrow("Message does not have an id");if(b("cr:19816")!=null){d("sendToSentQPLLogger").addSendToSentAnnotations(j,{string:{forward_type:o.SecureToSecure}});if(m!=null){s=m.messagesAndAttachments.map(function(a){return d("MAWDbMsg").toMsgId(a.message.messageId)}).filter(Boolean);f=await b("cr:19816").forwardMessageBatch(a,p,s,k,j)}else f=await b("cr:19816").forwardMessage(a,p,i,k,j,n!=null?d("MAWVault").vault(n):void 0).then(function(a){return[a]});b("cr:9759")!=null&&t!=null&&await b("cr:9759")(a,t,r,d("LSMessagingThreadTypeUtil").isOneToOne(t.threadType));return f!=null?f:[d("WAResultOrError").makeResult({description:"removal pending rollout of MAWMessageSendReporterV2",messageType:"fixMe"})]}throw c("FBLogger")("messenger_web_sharing").mustfixThrow("We won't reach to this step, if you are in QE, you should use secure forward")}catch(a){d("sendToSentQPLLogger").markSendToSentFail(j,"failed_forwarding_message",a);c("FBLogger")("messenger_web").catching(a).mustfix("MW Fail forwarding a message");throw a}},[a])}var o=b("$InternalEnum")({SecureToOpen:"secure_to_open",OpenToOpen:"open_to_open",SecureToSecure:"secure_to_secure",OpenToSecure:"open_to_secure"});function a(a,e,f,g){var i=d("react-compiler-runtime").c(68),q=(h||(h=c("useReStore")))(),r=m(q,a,f),s;i[0]!==e?(s={fallbackThreadType:e},i[0]=e,i[1]=s):s=i[1];var t=c("useIsSecureMessage")(q,a,s),u=d("MWPActor.react").useActor(),v=!(k||(k=d("I64"))).equal(u,a.senderId),w=d("MWLSForwardMessage").useForwardMessage(),x=d("MWLSForwardMessage").useForwardAttachment(),y=c("useGetForwardSource")();i[2]!==a.messageId||i[3]!==a.threadKey||i[4]!==a.timestampMs?(e=d("MWChatMessageId").makeSent((k||(k=d("I64"))).to_string(a.threadKey),a.messageId,k.to_string(a.timestampMs)),i[2]=a.messageId,i[3]=a.threadKey,i[4]=a.timestampMs,i[5]=e):e=i[5];var z=e,A=d("CometRelay").useRelayEnvironment(),B=n();i[6]!==a.displayedContentTypes?(s=d("MWSharedMsgLogUtils").getMessageTypeFromDisplayedContentType(a.displayedContentTypes),i[6]=a.displayedContentTypes,i[7]=s):s=i[7];var C=s;e=c("useLSMessagingSource")();if(i[8]!==a.mentionIds){s=new Set((s=(s=a.mentionIds)==null||s.split==null?void 0:s.split(","))!=null?s:[]);i[8]=a.mentionIds;i[9]=s}else s=i[9];s=s;s=s;var D=s.size>0,E=d("MWUnvaultedText").useMWUnvaultedText(!1,a.text);s=(s=d("useStringWithSubstitutions").useStringWithMentionSubstitutionsAndUpdatedRanges(t?E:null,[],s,a.threadKey))!=null?s:{textWithSubstitutions:E};var F=s.textWithSubstitutions;i[10]!==r||i[11]!==q.tables||i[12]!==D||i[13]!==v||i[14]!==g||i[15]!==a||i[16]!==C||i[17]!==B||i[18]!==u||i[19]!==y||i[20]!==F?(E=async function(b){var c=d("MWChatThreadId").toThreadKey(b);c=await d("MAWThreadId").getThread(q.tables,c);var e=function(c){return B(a,r,u,v,b,c,y,g,D?F:void 0)};c=d("sendToSentQPLLogger").markSendToSentStartWithAnnotation(c,{isForward:!0,mediaGroupInfo:g},(j||(j=d("LSIntEnum"))).unwrapIntEnum(y),{string:{attachment_type:"forward",message_type:C}});await e(c)},i[10]=r,i[11]=q.tables,i[12]=D,i[13]=v,i[14]=g,i[15]=a,i[16]=C,i[17]=B,i[18]=u,i[19]=y,i[20]=F,i[21]=E):E=i[21];i[22]!==r||i[23]!==q||i[24]!==D||i[25]!==v||i[26]!==e||i[27]!==g||i[28]!==a||i[29]!==C||i[30]!==B||i[31]!==u||i[32]!==y||i[33]!==F?(s=[q,u,e,g,y,B,a,r,v,C,F,D],i[22]=r,i[23]=q,i[24]=D,i[25]=v,i[26]=e,i[27]=g,i[28]=a,i[29]=C,i[30]=B,i[31]=u,i[32]=y,i[33]=F,i[34]=s):s=i[34];var G=d("Int64Hooks").useCallbackInt64(E,s);i[35]!==f||i[36]!==r||i[37]!==q||i[38]!==x||i[39]!==w||i[40]!==v||i[41]!==a||i[42]!==C||i[43]!==z||i[44]!==A||i[45]!==u||i[46]!==y?(E=async function(e){var g=d("MWChatThreadId").toThreadKey(e),h=d("MWChatThreadId").getMessagingThreadType(e),i=await Promise.all([d("MAWThreadId").isSecureThreadKey(q.tables,g),d("MAWThreadId").getThread(q.tables,g),l(q,g,u),d("MAWVerifyThreadCutover").verifyThreadCutover(Promise.resolve(q),g),d("MAWThreadId").getThread(q.tables,g)]),k=i[0],m=i[1],n=i[2],s=i[3],t=i[4];i=k||s;var B=function(a){var b=d("sendToSentQPLLogger").markSendToSentStart();if(t!=null){var e=d("MWSharedS2SBaseAnnotations").getMessageTypeParams({isForward:!0,threadType:t.threadType});c("promiseDone")(d("MWSharedMsgLogUtils").getSendToSentAnnotations(t,e,(j||(j=d("LSIntEnum"))).unwrapIntEnum(y),void 0,a),function(a){a.string=babelHelpers.extends({},a.string,{attachment_type:"forward",message_type:C}),d("sendToSentQPLLogger").addSendToSentAnnotations(b,a)})}d("sendToSentQPLLogger").addSendToSentAnnotations(b,{string:{forward_type:o.OpenToSecure,message_type:C}});return b};if(b("cr:19894")!=null&&i){var D=function(c,d){return function(e){return b("cr:19894").forwardMessage(A,q,g,a,v,d,y,e!=null?e:void 0,c).then(p)}};if(r.length===0){k=d("MAWExternalId").generateExternalId();s=B(k);await D(k,void 0)(s);d("sendToSentQPLLogger").markSendToSentSuccess(s)}else await Promise.all(r.map(async function(a){var b=d("MAWExternalId").generateExternalId(),e=B(b);try{await D(b,a)(e),d("sendToSentQPLLogger").markSendToSentSuccess(e)}catch(a){b=a;d("sendToSentQPLLogger").markSendToSentFail(e,"failed_forwarding_message",b);c("FBLogger")("messenger_web").catching(b).mustfix("MW Fail forwarding a message");throw b}}));b("cr:9759")!=null&&m!=null&&b("cr:9759")(q,m,n,d("LSMessagingThreadTypeUtil").isOneToOne(m.threadType))}else if(!i){k=B();try{d("sendToSentQPLLogger").addSendToSentAnnotations(k,{string:{forward_type:o.OpenToOpen,message_type:C}});f==null?w(g,h,z):x(e,f);d("sendToSentQPLLogger").markSendToSentSuccess(k);return}catch(a){s=a;d("sendToSentQPLLogger").markSendToSentFail(k,"failed_forwarding_message",s);c("FBLogger")("messenger_web").catching(s).mustfix("MW Fail forwarding a message");throw s}}},i[35]=f,i[36]=r,i[37]=q,i[38]=x,i[39]=w,i[40]=v,i[41]=a,i[42]=C,i[43]=z,i[44]=A,i[45]=u,i[46]=y,i[47]=E):E=i[47];i[48]!==f||i[49]!==r||i[50]!==q||i[51]!==x||i[52]!==w||i[53]!==v||i[54]!==e||i[55]!==g||i[56]!==a||i[57]!==C||i[58]!==z||i[59]!==A||i[60]!==u||i[61]!==y?(s=[q,u,y,f,A,a,v,g,e,r,w,z,x,C],i[48]=f,i[49]=r,i[50]=q,i[51]=x,i[52]=w,i[53]=v,i[54]=e,i[55]=g,i[56]=a,i[57]=C,i[58]=z,i[59]=A,i[60]=u,i[61]=y,i[62]=s):s=i[62];var H=d("Int64Hooks").useCallbackInt64(E,s);i[63]!==H||i[64]!==G||i[65]!==t?(e=function(){return t?G:H},E=[t,G,H],i[63]=H,i[64]=G,i[65]=t,i[66]=E,i[67]=e):(E=i[66],e=i[67]);return d("Int64Hooks").useMemoInt64(e,E)}function p(a){return[a]}g.ForwardType=o;g.useMWV2ForwardMessage=a}),98);
__d("useMWV2MessageForwardAction",["I64","LSBitFlag","LSIntEnum","MWChatMessageId","MWV2LogMessageClick","MWV2MessageRowIsRowFocusedContext.react","gkx","promiseDone","qex","react","react-compiler-runtime","useMWChatForward","useMWV2ForwardMessage","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;b=k||d("react");b.useCallback;var l=b.useContext;function a(a,b,e){var f=d("react-compiler-runtime").c(20),g=(h||(h=c("useReStore")))(),k=c("gkx")("20836"),p=!k&&a;k=!k&&c("qex")._("564")===!0;p=p?k?"cross_transport":"secure":k?"cross_transport":"open_";f[0]!==b.messageId||f[1]!==b.threadKey||f[2]!==b.timestampMs?(k=d("MWChatMessageId").makeSent((i||(i=d("I64"))).to_string(b.threadKey),b.messageId,i.to_string(b.timestampMs)),f[0]=b.messageId,f[1]=b.threadKey,f[2]=b.timestampMs,f[3]=k):k=f[3];k=k;var q=d("useMWV2ForwardMessage").useMWV2ForwardMessage(b,e);e=l(d("MWV2MessageRowIsRowFocusedContext.react").context);var r=e.setFocused,s=e.setIsDialogOpened;e=b.stickerId;a=!a;e=d("LSBitFlag").has((j||(j=d("LSIntEnum"))).ofNumber(1),b.displayedContentTypes)&&!b.textHasLinks||d("LSBitFlag").has((j||(j=d("LSIntEnum"))).ofNumber(16384),b.displayedContentTypes)||d("LSBitFlag").has((j||(j=d("LSIntEnum"))).ofNumber(2),b.displayedContentTypes)||d("LSBitFlag").has((j||(j=d("LSIntEnum"))).ofNumber(4),b.displayedContentTypes)||d("LSBitFlag").has((j||(j=d("LSIntEnum"))).ofNumber(512),b.displayedContentTypes)||d("LSBitFlag").has((j||(j=d("LSIntEnum"))).ofNumber(1024),b.displayedContentTypes)||e!=null&&(i||(i=d("I64"))).equal(e,(i||(i=d("I64"))).of_string("369239263222822"))||e!=null&&(i||(i=d("I64"))).equal(e,(i||(i=d("I64"))).of_string("369239343222814"))||e!=null&&(i||(i=d("I64"))).equal(e,(i||(i=d("I64"))).of_string("369239383222810"));a=a&&!e;f[4]!==r||f[5]!==s?(e=function(){s(o),r(n)},f[4]=r,f[5]=s,f[6]=e):e=f[6];e=e;var t;f[7]!==q?(t=function(a){return c("promiseDone")(q(a))},f[7]=q,f[8]=t):t=f[8];t=t;var u;f[9]!==p||f[10]!==k||f[11]!==a||f[12]!==e||f[13]!==t?(u={dropToggle:a,forwardDialogType:p,messageID:k,onClose:e,onSend:t},f[9]=p,f[10]=k,f[11]=a,f[12]=e,f[13]=t,f[14]=u):u=f[14];var v=c("useMWChatForward")(u);f[15]!==g||f[16]!==v||f[17]!==b||f[18]!==s?(p=function(){d("MWV2LogMessageClick").log(g,b,44),v!=null&&(s(m),v.onClick())},f[15]=g,f[16]=v,f[17]=b,f[18]=s,f[19]=p):p=f[19];return p}function m(){return!0}function n(){return!0}function o(){return!1}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("CometLeftRailLayoutContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext(!1);g["default"]=b}),98);
__d("CometLeftRailPrimaryContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext(!1);g["default"]=b}),98);
__d("EOTRTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["UNKNOWN","NO_MOBILE","UNTRUSTED_MOBILE"]);f.EOTRFlow=a}),66);
__d("FDSCheckmarkFilled24Icon",["cr:13975"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:13975")}),98);
__d("FDSDots3HorizontalFilled20Icon",["cr:14854"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:14854")}),98);
__d("GroupsCometChatsChannelInviteLinkQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="30001991716058719"}),null);
__d("GroupsCometChatsChannelInviteLinkQuery$Parameters",["GroupsCometChatsChannelInviteLinkQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("GroupsCometChatsChannelInviteLinkQuery_facebookRelayOperation"),metadata:{},name:"GroupsCometChatsChannelInviteLinkQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("GroupsCometChatsChannelInviteLink.entrypoint",["GroupsCometChatsChannelInviteLinkQuery$Parameters","JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){a=a.threadID;return{queries:{queryReference:{parameters:c("GroupsCometChatsChannelInviteLinkQuery$Parameters"),variables:{threadID:a}}}}},root:c("JSResourceForInteraction")("GroupsCometChatsChannelInviteLink.react").__setRef("GroupsCometChatsChannelInviteLink.entrypoint")};g["default"]=a}),98);
__d("LSClearSingleCommunityMember",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return void 0!==void 0?c[0]=!1:c[0]=!0,b.i64.neq(void 0,void 0)?b.forEach(b.filter(b.db.table(170).fetch([[[a[0],a[1]]]]),function(d){return b.i64.eq(d.groupThreadId,void 0)&&b.i64.eq(d.communityId,a[0])&&b.i64.eq(d.contactId,a[1])&&(c[0]||d.requestId===void 0)}),function(a){return a["delete"]()}):b.forEach(b.filter(b.db.table(170).fetch([[[a[0],a[1]]]]),function(d){return b.i64.eq(d.communityId,a[0])&&b.i64.eq(d.contactId,a[1])&&(c[0]||d.requestId===void 0)}),function(a){return a["delete"]()})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxClearSingleCommunityMemberStoredProcedure";a.__tables__=["community_members"];e.exports=a}),null);
__d("LSLocalOptimisticDeleteCommunityChannel",["LSDeleteThread","LSGetViewerFBID","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(d){return c.storedProcedure(b("LSDeleteThread"),a[0],!1)},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[0]=a[0],a})},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[1]=c.i64.cast([0,1]):(b=a.item,d[7]=b.syncGroup,c.i64.neq(d[7],void 0)?d[6]=d[7]:d[6]=c.i64.cast([0,1]),d[1]=d[6])})},function(e){return d[3]=new c.Map(),d[3].set("thread_key",a[0]),d[3].set("actor_id",d[0]),d[3].set("sync_group",d[1]),d[4]=d[3].get("actor_id"),d[5]=c.toJSON(d[3]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[4]),c.i64.cast([0,366]),d[5],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxLocalOptimisticDeleteCommunityChannelStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSLocalOptimisticDeleteCommunityChannelStoredProcedure",["LSLocalOptimisticDeleteCommunityChannel","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSLocalOptimisticDeleteCommunityChannel"),e.threadKey);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSLocalOptimisticDeleteDiscoverableChat",["LSDeleteThread","LSGetViewerFBID","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[6]=b.syncGroup,c.i64.neq(d[6],void 0)?d[5]=d[6]:d[5]=c.i64.cast([0,1]),d[0]=d[5])})},function(d){return c.storedProcedure(b("LSDeleteThread"),a[0],!1)},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[2]=a[0],a})},function(e){return d[3]=new c.Map(),d[3].set("thread_key",a[0]),d[3].set("actor_id",d[2]),d[3].set("sync_group",d[0]),d[4]=c.toJSON(d[3]),c.storedProcedure(b("LSIssueNewTask"),"expr_delete_public_chat",c.i64.cast([0,110004]),d[4],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxLocalOptimisticDeleteDiscoverableChatStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSLocalOptimisticDeleteDiscoverableChatStoredProcedure",["LSLocalOptimisticDeleteDiscoverableChat","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSLocalOptimisticDeleteDiscoverableChat"),e.threadKey);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSReportCommunityChannel",["LSIssueNewError","LSIssueNewTaskWithExtraOperations","LSLocalize"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.sortBy(c.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[0]=!1:(b=a.item,d[0]=b.errorShouldBeShown)})},function(a){return d[0]===!0?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2285622730]),void 0).then(function(a){return d[5]=a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1919524925]),void 0).then(function(a){return d[6]=a})},function(a){return c.storedProcedure(b("LSIssueNewError"),void 0,c.i64.cast([0,1545093]),d[5],d[6],void 0,void 0)}]):c.resolve()},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[3]=d[2].get("thread_key"),d[4]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),c.i64.to_string(d[3]),c.i64.cast([0,371]),d[4],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxReportCommunityChannelStoredProcedure";a.__tables__=["user_visible_network_connectivity_error"];e.exports=a}),null);
__d("LSReportCommunityChannelStoredProcedure",["LSReportCommunityChannel","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSReportCommunityChannel"),e.threadKey);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWRemoveGroupParticipantsUtils",["fbt","I64","LSFactory","LSIntEnum","LSIssueNewErrorStoredProcedure","LSOptimisticRemoveThreadStoredProcedure","LSThreadRemoveType","MAWBridgeSendAndReceive","MAWJobDefinitions","MAWTimedJob","Promise","ReQL","WAJids","WAJobOrchestratorTypes","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k;function l(a,e,g){return function(l){return a.runInTransaction(function(a){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.mi_act_mapping_table).getKeyRange(e)).then(function(f){if(f==null)return(k||(k=b("Promise"))).resolve();f=(i||(i=d("I64"))).to_string(f.jid);f=d("WAJids").toGroupJid(f);var m;c("gkx")("1800")?m=d("MAWBridgeSendAndReceive").sendAndReceive("backend","removeGroupParticipants",{group:f,users:[(i||(i=d("I64"))).to_string(l)]}):m=d("MAWTimedJob").TimedUIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").jobSerializers.removeGroupParticipants(f,[(i||(i=d("I64"))).to_string(l)],{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}));return m.then(function(f){if(f.success)if(g)return c("LSOptimisticRemoveThreadStoredProcedure")(c("LSFactory")(a),{removeType:(j||(j=d("LSIntEnum"))).ofNumber(c("LSThreadRemoveType").ARCHIVE_THREAD),threadKey:e});else return(k||(k=b("Promise"))).resolve();f=h._(/*BTDS*/"Couldn't remove member from group").toString();return c("LSIssueNewErrorStoredProcedure")(c("LSFactory")(a),{errorBodyText:f,errorTitleText:f})})})},"readwrite",void 0,void 0,f.id+":38")}}function a(a,b){return l(a,b,!1)}function e(a,b){return l(a,b,!1)}function m(a,b){return l(a,b,!0)}g.createRemoveParticipantCallbackFromThreadKey=a;g.createRemoveParticipantCallback=e;g.createLeaveGroupCallback=m}),226);
__d("MDSMultiStepDialogClosingHeader.react",["FDSMultiStepDialogCloseContext","MDSDialogHeader.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext;function a(a){var b=d("react-compiler-runtime").c(3),e=j(c("FDSMultiStepDialogCloseContext")),f;b[0]!==e||b[1]!==a?(f=i.jsx(c("MDSDialogHeader.react"),babelHelpers["extends"]({},a,{onClose:e})),b[0]=e,b[1]=a,b[2]=f):f=b[2];return f}g["default"]=a}),98);
__d("MDSMultiStepDialogPushPageProvider.react",["BaseHeadingContextWrapper.react","CometHideLayerOnEscape.react","FDSMultiStepDialogCloseContext","FDSMultiStepDialogPushPageContext.react","MDSMultiStepDialogClosingHeader.react","emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useCallback,k=b.useMemo,l=b.useState;function a(a){var b=a.children,e=a.pushPageBase,g=a.buttonType,h=a.closeButtonTestId,m=a.onClose,n=m===void 0?c("emptyFunction"):m;m=a.withCloseButton;var o=m===void 0?!1:m,p=k(function(){function a(a){var b=a.children,d=a.initialTitle;d=d===void 0?null:d;var e=a.onBack,f=a.onCloseButtonPress,j=a.onReturn,k=a.withoutBackButton;k=k===void 0?!1:k;a=a.withoutCloseButton;a=a===void 0?!1:a;d=l(d);var m=d[0];d=d[1];m=i.jsx(c("MDSMultiStepDialogClosingHeader.react"),{backButtonType:g,closeButtonTestId:h,closeButtonType:g,onBack:e?e(j):j,title:m,withBackButton:!k,withCloseButton:a?!1:o});return i.jsxs(c("CometHideLayerOnEscape.react"),{onHide:k?c("emptyFunction"):(a=e==null?void 0:e(j))!=null?a:j,children:[f!=null?i.jsx(c("FDSMultiStepDialogCloseContext").Provider,{value:f(n),children:m}):m,i.jsx(c("BaseHeadingContextWrapper.react"),{children:b(d)})]})}a.displayName=a.name+" [from "+f.id+"]";return a},[g,h,n,o]),q=j(function(a,b){b=b===void 0?{}:b;var c=b.onBack,f=b.title,g=b.withoutBackButton,h=g===void 0?!1:g;g=b.withoutCloseButton;var j=g===void 0?!1:g;e(function(b){var e=b.onReturn;return i.jsx(d("FDSMultiStepDialogPushPageContext.react").FDSMultiStepDialogPushPageContext.Provider,{value:q,children:i.jsx(p,{initialTitle:f,onBack:c,onReturn:e,withoutBackButton:h,withoutCloseButton:j,children:function(b){return i.jsx(a,{onReturn:e,setTitle:b})}})})})},[p,e]);return i.jsx(d("FDSMultiStepDialogPushPageContext.react").FDSMultiStepDialogPushPageContext.Provider,{value:q,children:b(q)})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MDSMultiStepDialog.react",["BaseHeadingContextWrapper.react","BaseMultiStepContainer.react","FBLogger","FDSMultiStepDialogCloseContext","MDSDialogContainerLegacy.react","MDSDialogPageLoadingState.react","MDSMultiStepDialogClosingHeader.react","MDSMultiStepDialogPushPageProvider.react","emptyFunction","react","react-compiler-runtime","useIsCometOnMobile"],(function(a,b,c,d,e,f,g){"use strict";var h=["ref","buttonType","children","closeButtonTestId","onClose","onPageChange","size","title","withCloseButton","fallback"],i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(36),e,f,g,i,k,l,m,n,o,p,q;b[0]!==a?(k=a.ref,e=a.buttonType,f=a.children,m=a.closeButtonTestId,n=a.onClose,l=a.onPageChange,o=a.size,q=a.title,p=a.withCloseButton,i=a.fallback,g=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=i,b[5]=k,b[6]=l,b[7]=m,b[8]=n,b[9]=o,b[10]=p,b[11]=q):(e=b[1],f=b[2],g=b[3],i=b[4],k=b[5],l=b[6],m=b[7],n=b[8],o=b[9],p=b[10],q=b[11]);var r=m===void 0?"close-button":m,s=n===void 0?c("emptyFunction"):n;a=o===void 0?"small":o;var t=p===void 0?!1:p;m=c("useIsCometOnMobile")();n=a==="content-mobile-safe"&&!m?"content":a;t===!0&&s==null&&c("FBLogger")("messenger_comet").mustfix("MDSMultiStepDialog: withCloseButton is set to true without being provided an onClose handler. Please provide an onClose handler, or set withCloseButton to false");b[12]!==i?(o=i!=null?i:j.jsx(c("MDSDialogPageLoadingState.react"),{}),b[12]=i,b[13]=o):o=b[13];p=n==="content";b[14]!==e||b[15]!==f||b[16]!==r||b[17]!==s||b[18]!==q||b[19]!==t?(m=function(a){return j.jsxs(j.Fragment,{children:[j.jsx(c("MDSMultiStepDialogClosingHeader.react"),{backButtonType:e,closeButtonTestId:r,closeButtonType:e,title:q,withBackButton:!1,withCloseButton:t}),j.jsx(c("BaseHeadingContextWrapper.react"),{children:j.jsx(c("MDSMultiStepDialogPushPageProvider.react"),{buttonType:e,closeButtonTestId:r,onClose:s,pushPageBase:a,withCloseButton:t,children:f})})]})},b[14]=e,b[15]=f,b[16]=r,b[17]=s,b[18]=q,b[19]=t,b[20]=m):m=b[20];b[21]!==k||b[22]!==l||b[23]!==o||b[24]!==p||b[25]!==m?(i=j.jsx(c("BaseMultiStepContainer.react"),{fallback:o,fitContentWidth:p,onPageChange:l,ref:k,children:m}),b[21]=k,b[22]=l,b[23]=o,b[24]=p,b[25]=m,b[26]=i):i=b[26];b[27]!==s||b[28]!==i?(n=j.jsx(c("FDSMultiStepDialogCloseContext").Provider,{value:s,children:i}),b[27]=s,b[28]=i,b[29]=n):n=b[29];b[30]!==g||b[31]!==s||b[32]!==a||b[33]!==n||b[34]!==q?(k=j.jsx(c("MDSDialogContainerLegacy.react"),babelHelpers["extends"]({onClose:s,size:a,title:q},g,{children:n})),b[30]=g,b[31]=s,b[32]=a,b[33]=n,b[34]=q,b[35]=k):k=b[35];return k}g["default"]=a}),98);
__d("MWAdminForBroadcastChannelUtils",["ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=d("react-compiler-runtime").c(12),e=(h||(h=c("useReStore")))(),g;b[0]!==e.tables.participants||b[1]!==a?(g=function(){return d("ReQL").fromTableAscending(e.tables.participants,["contactId","isAdmin"]).getKeyRange(a).filter(i)},b[0]=e.tables.participants,b[1]=a,b[2]=g):g=b[2];var j;b[3]!==e||b[4]!==a?(j=[e,a],b[3]=e,b[4]=a,b[5]=j):j=b[5];var k=d("ReQLSuspense").useFirst(g,j,f.id+":23");b[6]!==k||b[7]!==e.tables.contacts?(g=function(){return(k==null?void 0:k.contactId)!=null?d("ReQL").fromTableAscending(e.tables.contacts).getKeyRange(k.contactId):d("ReQL").empty()},b[6]=k,b[7]=e.tables.contacts,b[8]=g):g=b[8];j=k==null?void 0:k.contactId;var l;b[9]!==e||b[10]!==j?(l=[j,e],b[9]=e,b[10]=j,b[11]=l):l=b[11];return d("ReQLSuspense").useFirst(g,l,f.id+":31")}function i(a){a=a.isAdmin;return!!a}function b(a){var b=d("react-compiler-runtime").c(6),e=(h||(h=c("useReStore")))(),g;b[0]!==e.tables.participants||b[1]!==a?(g=function(){return d("ReQL").fromTableAscending(e.tables.participants,["contactId","isAdmin"]).getKeyRange(a).filter(j)},b[0]=e.tables.participants,b[1]=a,b[2]=g):g=b[2];var i;b[3]!==e||b[4]!==a?(i=[e,a],b[3]=e,b[4]=a,b[5]=i):i=b[5];b=d("ReQLSuspense").useFirst(g,i,f.id+":45");return b==null?void 0:b.contactId}function j(a){a=a.isAdmin;return!!a}g.useFetchBroadcastChannelCreator=a;g.useFetchBroadcastChannelCreatorId=b}),98);
__d("MWBReportingLogger",["QuickPerformanceLogger","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("qpl")._(190461e3,"3093");function a(a){(h||(h=c("QuickPerformanceLogger"))).markerStart(i),h.markerAnnotate(i,{string:{entrypoint:a}})}function b(a,b){(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(i,{string:babelHelpers["extends"]({step:a},b!=null?{selected_tag:String(b)}:{})})}function d(a){(h||(h=c("QuickPerformanceLogger"))).markerEnd(i,a?2:3)}g.logReportingStart=a;g.logReportingStep=b;g.logReportingEnd=d}),98);
__d("MWCMChannelLinkShareTrigger.react",["GroupsCometChatsChannelInviteLink.entrypoint","I64","react","react-compiler-runtime","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i;h||d("react");function a(a){var b=d("react-compiler-runtime").c(9),e=a.children;a=a.threadKey;var f;b[0]!==a?(f=(i||(i=d("I64"))).to_string(a),b[0]=a,b[1]=f):f=b[1];b[2]!==f?(a={threadID:f},b[2]=f,b[3]=a):a=b[3];f=c("useMWXEntryPointDialog")(c("GroupsCometChatsChannelInviteLink.entrypoint"),a);var g=f[0];b[4]!==g?(a=function(){return g({})},b[4]=g,b[5]=a):a=b[5];b[6]!==e||b[7]!==a?(f=e(a),b[6]=e,b[7]=a,b[8]=f):f=b[8];return f}g["default"]=a}),98);
__d("MWCMPauseChatLogger",["$InternalEnum","I64","gkx","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("GroupsCometChatsEngagementLoggerWithDefaultExport").__setRef("MWCMPauseChatLogger"),j=b("$InternalEnum")({INBOX:"messenger_dot_com",CHAT_TAB:"comet_www_chat",COMET_INBOX:"comet_www_inbox",FULLSCREEN_CHAT:"comet_www_fullscreen_chat"});function k(a){var b=c("gkx")("23433"),d=null;a!=null&&(a==="Inbox"?d=b?j.INBOX:j.COMET_INBOX:a==="ChatTab"?d=j.CHAT_TAB:a==="FullscreenChat"&&(d=j.FULLSCREEN_CHAT));return d}function a(a){var b=a.action,c=a.clientExtras,e=a.displayContext,f=a.event,g=a.parentSurface,j=a.source,l=a.surface,m=a.threadId,n=k(e);i.onReady(function(a){return a.log({action:b,client_extras:n!=null?babelHelpers["extends"]({},c,{entry_point:n}):babelHelpers["extends"]({},c),event:f,parent_surface:g,source:j,surface:l,thread_id:(h||(h=d("I64"))).to_string(m)})})}g.getEntrypoint=k;g.logPauseEvent=a}),98);
__d("MWChatEncrypedBackupsNumericCodeKeyTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["NUM_PAD_WITHOUT_NUM_LOCK","NON_NUMERIC_CHAR"]);f.InvalidKeyType=a}),66);
__d("MWChatEncrypedBackupsNumericCodeValidation",[],(function(a,b,c,d,e,f){"use strict";var g=function(a){var b=/^[0-9]*$/;return b.test(a)};a=function(a,b){return a.length>b?!1:g(a)};b=function(a,b){return a.length!==b?!1:g(a)};f.numericCodeIsValid=a;f.numericCodeIsCompleted=b}),66);
__d("MWChatEncryptedBackupsNumericCodeErrorWrapper.react",["MWXColumn.react","MWXColumnItem.react","MWXText.react","react","react-compiler-runtime","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={inputWrapperErrorOnly:{paddingBottom:"x18d9i69",$$css:!0},outterWrapper:{minHeight:"x10sr9ya",$$css:!0},outterWrapperSmall:{minHeight:"x1h7t28c",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(14),e=a.children,f=a.error;a=a.inputSize;a=a===void 0?"large":a;var g=a==="large"?k.outterWrapper:k.outterWrapperSmall;a=a==="large"?20:0;var i;b[0]!==f?(i=(h||(h=c("stylex"))).props(f!=null&&[k.inputWrapperErrorOnly]),b[0]=f,b[1]=i):i=b[1];var l;b[2]!==e||b[3]!==i?(l=j.jsx("div",babelHelpers["extends"]({},i,{children:e})),b[2]=e,b[3]=i,b[4]=l):l=b[4];b[5]!==f?(e=f!=null?j.jsx("div",{className:"x10b6aqq x1y1aw1k x2b8uid",children:j.jsx(c("MWXText.react"),{color:"negative",testid:void 0,type:"body4",children:f})}):null,b[5]=f,b[6]=e):e=b[6];b[7]!==a||b[8]!==l||b[9]!==e?(i=j.jsxs(c("MWXColumnItem.react"),{align:"center",paddingHorizontal:a,paddingTop:0,children:[l,e]}),b[7]=a,b[8]=l,b[9]=e,b[10]=i):i=b[10];b[11]!==g||b[12]!==i?(f=j.jsx(c("MWXColumn.react"),{xstyle:g,children:i}),b[11]=g,b[12]=i,b[13]=f):f=b[13];return f}g["default"]=a}),98);
__d("useMWChatEncryptedBackupsNumericCodeInputAutoFocus",["FocusRegion.react","HiddenSubtreePassiveContext","focusScopeQueries","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useEffect;function k(a){if(!("elementsFromPoint"in document))return!0;var b=a.getBoundingClientRect();b=document.elementsFromPoint(b.left+b.width/2,b.top+b.height/2);for(b of b){if(b===a)return!1;var c=window.getComputedStyle(b);if(c.visibility!=="hidden"&&c.display!=="none")return!0}return!1}function l(a){var b=d("react-compiler-runtime").c(3),c,e;b[0]!==a?(c=function(){var b=function(b){b.key>="0"&&b.key<="9"&&a(b.key)};window.addEventListener("keydown",b);return function(){window.removeEventListener("keydown",b)}},e=[a],b[0]=a,b[1]=c,b[2]=e):(c=b[1],e=b[2]);j(c,e)}function a(a,b,e){var f=d("react-compiler-runtime").c(5),g=i(c("HiddenSubtreePassiveContext")),h;f[0]!==b||f[1]!==a||f[2]!==g||f[3]!==e?(h=function(){var f=g.getCurrentState(),h=["input","textarea"].some(m);!a&&!h&&!f.hiddenOrBackgrounded&&!(e.current?k(e.current):!0)&&(c("gkx")("15923")&&d("FocusRegion.react").focusRegionById(b,d("focusScopeQueries").tabbableScopeQuery))},f[0]=b,f[1]=a,f[2]=g,f[3]=e,f[4]=h):h=f[4];l(h)}function m(a){var b;return(b=document.activeElement)==null?void 0:b.matches(a)}g["default"]=a}),98);
__d("MWChatEncryptedBackupsNumericCodeInputInner.react",["BaseTextInput.react","FocusRegion.react","MWChatEncrypedBackupsNumericCodeKeyTypes","MWChatEncrypedBackupsNumericCodeValidation","focusScopeQueries","gkx","qex","react","react-compiler-runtime","useMWChatEncryptedBackupsNumericCodeInputAutoFocus"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.useEffect,k=b.useRef,l=b.useState,m=c("gkx")("24058"),n=function(a){return["0","1","2","3","4","5","6","7","8","9"].includes(a.key)},o=new Map([["Numpad0","0"],["Numpad1","1"],["Numpad2","2"],["Numpad3","3"],["Numpad4","4"],["Numpad5","5"],["Numpad6","6"],["Numpad7","7"],["Numpad8","8"],["Numpad9","9"]]),p=function(a){return a.location===3&&!n(a)&&!a.shiftKey&&!a.ctrlKey&&!a.altKey&&!a.metaKey?o.get((a=a.nativeEvent)==null?void 0:a.code):null},q={input:{height:"x5yr21d",insetInlineStart:"x1o0tod",left:null,right:null,opacity:"xg01cxk",position:"x10l6tqk",top:"x13vifvy",width:"xh8yej3",$$css:!0},testOpacity:{opacity:"x1ptxcow",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(44),e=a.extraProps;a=a.props;var f=e.hasFocus,g=e.setFocus;e=a["aria-label"];var h=a.disabled,n=a.focusRegionId,o=a.inputMode,s=a.onChange,t=a.onCompletionChange,u=a.onEnabledNumLock,v=a.onPressedInvalidKey,w=a.size,x=a.testid,y=a.value,z=h===void 0?!1:h;a=l(y.length===w);var A=a[0],B=a[1],C=k(null),D=k(z);c("useMWChatEncryptedBackupsNumericCodeInputAutoFocus")(f,n,C);b[0]!==A||b[1]!==s||b[2]!==t||b[3]!==w?(h=function(a){var b=d("MWChatEncrypedBackupsNumericCodeValidation").numericCodeIsCompleted(a,w);s(a);t!=null&&b!==A&&(B(b),t(b))},b[0]=A,b[1]=s,b[2]=t,b[3]=w,b[4]=h):h=b[4];var E=h;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(){var a=r,b=C.current;b==null||b.addEventListener("selectstart",a);return function(){b==null||b.removeEventListener("selectstart",a)}},f=[],b[5]=a,b[6]=f):(a=b[5],f=b[6]);j(a,f);b[7]!==z||b[8]!==g?(h=function(){z&&g(!1)},a=[z,g],b[7]=z,b[8]=g,b[9]=h,b[10]=a):(h=b[9],a=b[10]);j(h,a);b[11]===Symbol["for"]("react.memo_cache_sentinel")?(f=function(){var a=C.current;if(a==null)return;var b=function(){var b=a.value.length,c=a.selectionStart===a.selectionEnd&&a.selectionStart===b;c||a.setSelectionRange(b,b)};a.addEventListener("selectionchange",b);return function(){a.removeEventListener("selectionchange",b)}},h=[],b[11]=h,b[12]=f):(h=b[11],f=b[12]);j(f,h);b[13]!==z||b[14]!==n?(a=function(){D.current!==z&&(D.current=z,z||d("FocusRegion.react").focusRegionById(n,d("focusScopeQueries").tabbableScopeQuery))},f=[z,n],b[13]=z,b[14]=n,b[15]=a,b[16]=f):(a=b[15],f=b[16]);j(a,f);b[17]!==u||b[18]!==v||b[19]!==y||b[20]!==E?(h=function(a){var b=p(a);if(b!=null){v==null||v(d("MWChatEncrypedBackupsNumericCodeKeyTypes").InvalidKeyType.NUM_PAD_WITHOUT_NUM_LOCK);if(c("qex")._("4752")===!0){b=y+b;E(b);a.preventDefault();a.stopPropagation()}}else a.key==="NumLock"&&(a.getModifierState==null?void 0:a.getModifierState("NumLock"))===!0&&(u==null||u())},b[17]=u,b[18]=v,b[19]=y,b[20]=E,b[21]=h):h=b[21];var F=h;a=x!=null?x+"-mw-numeric-code-input-prevent-composer-focus-steal":"mw-numeric-code-input-prevent-composer-focus-steal";b[22]!==g?(f=function(){g(!1)},h=function(){g(!0)},b[22]=g,b[23]=f,b[24]=h):(f=b[23],h=b[24]);var G;b[25]!==F?(G=function(a){var b=a.keyCode;(b===35||b===36||b===37||b===38||b===39||b===40)&&(a.preventDefault(),a.stopPropagation());F==null||F(a)},b[25]=F,b[26]=G):G=b[26];var H;b[27]!==v||b[28]!==w||b[29]!==E?(H=function(a){a=a.toString();d("MWChatEncrypedBackupsNumericCodeValidation").numericCodeIsValid(a,w)?E(a):v==null||v(d("MWChatEncrypedBackupsNumericCodeKeyTypes").InvalidKeyType.NON_NUMERIC_CHAR)},b[27]=v,b[28]=w,b[29]=E,b[30]=H):H=b[30];var I;b[31]===Symbol["for"]("react.memo_cache_sentinel")?(I=[q.input,m&&q.testOpacity],b[31]=I):I=b[31];b[32]!==e||b[33]!==z||b[34]!==o||b[35]!==w||b[36]!==a||b[37]!==f||b[38]!==h||b[39]!==G||b[40]!==H||b[41]!==x||b[42]!==y?(I=i.jsx(c("BaseTextInput.react"),{"aria-label":e,autoComplete:"one-time-code",disabled:z,id:a,inputMode:o,maxLength:w,onBlur:f,onFocus:h,onKeyDown:G,onValueChange:H,ref:C,testid:void 0,value:y,xstyle:I}),b[32]=e,b[33]=z,b[34]=o,b[35]=w,b[36]=a,b[37]=f,b[38]=h,b[39]=G,b[40]=H,b[41]=x,b[42]=y,b[43]=I):I=b[43];return I}function r(a){a.preventDefault()}g["default"]=a}),98);
__d("MWChatEncryptedBackupsNumericCodeInputRenderer.react",["MWXRow.react","MWXRowItem.react","MWXText.react","gkx","react","react-compiler-runtime","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.useState,m={focusRing:{boxShadow:"x18bame2",outline:"x1a2a7pz xvetz19",$$css:!0},input:{alignItems:"x6s0dn4",borderStartStartRadius:"x1i5p2am",borderStartEndRadius:"x1whfx0g",borderEndEndRadius:"xr2y4jy",borderEndStartRadius:"x1ihp6rs",borderTopStyle:"x1ejq31n",borderInlineEndStyle:"x18oe1m7",borderBottomStyle:"x1sy0etr",borderInlineStartStyle:"xstzfhl",boxSizing:"x9f619",display:"x78zum5",height:"xng8ra",justifyContent:"xl56j7k",position:"x1n2onr6",width:"x1o817pb",$$css:!0},inputBox:{marginTop:"x1k70j0n",marginInlineEnd:"xbelrpt",marginBottom:"xzueoph",marginInlineStart:"xdzw4kq",$$css:!0},inputColorPrimary:{backgroundColor:"xljulmy",$$css:!0},inputColorSecondary:{backgroundColor:"xwcfey6",$$css:!0},inputSmall:{height:"xaymia4",width:"x1bgwkul",$$css:!0},inputTiny:{height:"x1vqgdyp",width:"x10faclu",$$css:!0}},n="-",o="\u25cf";function p(a,b){if(b)return"disabled";return!c("gkx")("7485")?"primary":a===n?"secondary":"primary"}function a(a){var b=d("react-compiler-runtime").c(28),e=a.color,f=a.disabled,g=a.enableMasking,i=a.hasFocus,q=a.inputSize,r=a.size,s=a.testid,t=a.value,u=e===void 0?"primary":e,v=f===void 0?!1:f,w=g===void 0?!1:g,x=q===void 0?"large":q;a=s===void 0?"numeric-renderer":s;b[0]!==i||b[1]!==r||b[2]!==t?(e=function(a){return(t.length===a||t.length>a&&a===r-1)&&i},b[0]=i,b[1]=r,b[2]=t,b[3]=e):e=b[3];var y=e;b[4]!==r?(f=Array(r).fill(c("gkx")("7485")?n:""),b[4]=r,b[5]=f):f=b[5];g=l(f);q=g[0];var z=g[1];b[6]!==w||b[7]!==r||b[8]!==t?(s=function(){z(Array(r).fill().map(function(a,b){return t[b]!=null?w?o:t[b]:c("gkx")("7485")?n:""}))},e=[w,r,t],b[6]=w,b[7]=r,b[8]=t,b[9]=s,b[10]=e):(s=b[9],e=b[10]);k(s,e);if(b[11]!==u||b[12]!==v||b[13]!==w||b[14]!==x||b[15]!==y||b[16]!==a||b[17]!==q){b[19]!==u||b[20]!==v||b[21]!==w||b[22]!==x||b[23]!==y||b[24]!==a?(f=function(a,b){return j.jsx(c("MWXRowItem.react"),{xstyle:m.inputBox,children:j.jsx("div",babelHelpers["extends"]({},(h||(h=c("stylex"))).props(m.input,x==="small"&&m.inputSmall,x==="tiny"&&m.inputTiny,u==="primary"&&m.inputColorPrimary,u==="secondary"&&m.inputColorSecondary,y(b)&&m.focusRing),{"aria-hidden":a===n&&c("gkx")("7485"),"data-testid":void 0,children:w?j.jsx(c("MWXText.react"),{color:p(a,v),type:c("gkx")("7485")&&a===n?"entityHeaderHeadline1":"headlineEmphasized4",children:v?o:a}):j.jsx(c("MWXText.react"),{color:p(a,v),type:c("gkx")("7485")&&a===n?"entityHeaderHeadline1":"headlineEmphasized1",children:a})}))},b)},b[19]=u,b[20]=v,b[21]=w,b[22]=x,b[23]=y,b[24]=a,b[25]=f):f=b[25];g=q.map(f);b[11]=u;b[12]=v;b[13]=w;b[14]=x;b[15]=y;b[16]=a;b[17]=q;b[18]=g}else g=b[18];b[26]!==g?(s=j.jsx(c("MWXRow.react"),{align:"center",paddingHorizontal:0,paddingVertical:0,role:"group",spacing:0,children:g}),b[26]=g,b[27]=s):s=b[27];return s}g.MWChatEncryptedBackupsNumericCodeInputRenderer=a}),98);
__d("MWChatEncryptedBackupsNumericCodeInput.react",["MWChatEncryptedBackupsNumericCodeInputInner.react","MWChatEncryptedBackupsNumericCodeInputRenderer.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useState;function a(a){var b=d("react-compiler-runtime").c(18),e=a.enableMasking,f=a.inputSize,g=a.size,h=a.testid,k=a.value,l=j(!1),m=l[0];l=l[1];var n;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(n={className:"x1n2onr6"},b[0]=n):n=b[0];var o;b[1]!==e||b[2]!==m||b[3]!==a.color||b[4]!==a.disabled||b[5]!==f||b[6]!==g||b[7]!==h||b[8]!==k?(o=i.jsx(d("MWChatEncryptedBackupsNumericCodeInputRenderer.react").MWChatEncryptedBackupsNumericCodeInputRenderer,{color:a.color,disabled:a.disabled,enableMasking:e,hasFocus:m,inputSize:f,size:g,testid:void 0,value:k}),b[1]=e,b[2]=m,b[3]=a.color,b[4]=a.disabled,b[5]=f,b[6]=g,b[7]=h,b[8]=k,b[9]=o):o=b[9];b[10]!==m?(e={hasFocus:m,setFocus:l},b[10]=m,b[11]=e):e=b[11];b[12]!==a||b[13]!==e?(f=i.jsx(c("MWChatEncryptedBackupsNumericCodeInputInner.react"),{extraProps:e,props:a}),b[12]=a,b[13]=e,b[14]=f):f=b[14];b[15]!==o||b[16]!==f?(g=i.jsxs("div",babelHelpers["extends"]({},n,{children:[o,f]})),b[15]=o,b[16]=f,b[17]=g):g=b[17];return g}g["default"]=a}),98);
__d("MWChatEncryptedBackupsSetIsDialogPersistedContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({setIsDialogPersisted:function(){}});g["default"]=b}),98);
__d("MWDialogTextPairing.react",["MWDialogContentTypeValues","MWXTextPairing.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(2),e;b[0]!==a?(e=i.jsx(c("MWXTextPairing.react"),babelHelpers["extends"]({},a,{level:d("MWDialogContentTypeValues").textPairingLevel})),b[0]=a,b[1]=e):e=b[1];return e}g["default"]=a}),98);
__d("MWEBFlowSourceContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({source:null});g["default"]=b}),98);
__d("MWEBHasSeenAutoRestoreNoticeContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({hasSeenNotice:!1});g["default"]=b}),98);
__d("MWEBNoMobileEOTRInformationalDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{}}},root:c("JSResourceForInteraction")("MWEBNoMobileEOTRInformationalDialogForEntrypoint.react").__setRef("MWEBNoMobileEOTRInformationalDialog.entrypoint")};g["default"]=a}),98);
__d("MWEBOTCDialogStepDeferred.react",["deferredLoadComponent","react","react-compiler-runtime","requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MWEncryptedBackupsInsertOTCStep.react").__setRef("MWEBOTCDialogStepDeferred.react"));function a(a){var b=d("react-compiler-runtime").c(2),c;b[0]!==a?(c=i.jsx(j,babelHelpers["extends"]({},a)),b[0]=a,b[1]=c):c=b[1];return c}g["default"]=a}),98);
__d("MWEBPinCodeSize",[],(function(a,b,c,d,e,f){"use strict";a=6;f.EB_PIN_CODE_SIZE=a}),66);
__d("MWEBQPResetPIN.react",["ix","CometImageFromIXValue.react","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=c("gkx")("23433");function a(a){var b=d("react-compiler-runtime").c(5),e=a.alt,f=a.ref;a=a.xstyle;var g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g=k?h("421464"):h("421459"),b[0]=g):g=b[0];g=g;b[1]!==e||b[2]!==f||b[3]!==a?(g=j.jsx(c("CometImageFromIXValue.react"),{alt:e,ref:f,source:g,xstyle:a}),b[1]=e,b[2]=f,b[3]=a,b[4]=g):g=b[4];return g}g["default"]=a}),98);
__d("MWEBUntrustedMobileEOTRInformationalDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{}}},root:c("JSResourceForInteraction")("MWEBUntrustedMobileEOTRInformationalDialogForEntrypoint.react").__setRef("MWEBUntrustedMobileEOTRInformationalDialog.entrypoint")};g["default"]=a}),98);
__d("MWEBVestaUserInfoContext.react",["FBLogger","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");e=b.createContext;var i=b.useContext,j=e(null);function k(){var a=i(j);if(a==null)throw c("FBLogger")("messenger_web").mustfixThrow("useMWEBVestaUserInfo must be used inside MWEBVestaUserInfoContext");return a}function a(){var a=k(),b=a.attemptsRemaining;a=a.loginTimeoutRemainingSecs;return b===0||a!=null&&a>0}g.MWEBVestaUserInfoContext=j;g.useMWEBVestaUserInfo=k;g.useMWEBIsCooldownOrLockOutState=a}),98);
__d("MWEBVirtualDevicesContext.react",["react","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||(h=d("react"));var i=h.useContext,j=b.createContext(null);function a(){var a=i(j);if(a==null)throw c("unrecoverableViolation")("useEBVirtualDevices must be used inside MWEBVirtualDevicesContext","messenger_web_product");return a}g.MWEBVirtualDevicesContext=j;g.useMWEBVirtualDevices=a}),98);
__d("MWEmoji.react",["CometEmoji.react","EmojiRenderer","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo;function a(a){var b=a.emoji,e=a.size;a=a.testid;return i.jsx(c("CometEmoji.react"),{emoji:j(function(){var a=d("EmojiRenderer").parse(b);a=a[0];return a!=null?a.emoji:[b]},[b]),size:e,testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEncryptedBackupsForgotRCStep",["deferredLoadComponent","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("deferredLoadComponent")(c("requireDeferred")("MWChatEncryptedBackupsGenerateNewRecoveryCodeInstruction.react").__setRef("MWEncryptedBackupsForgotRCStep"));function a(a){var b=a.onClose,c=a.onComplete,d=a.pushPage;d(function(){return i.jsx(j,{onClose:b,onComplete:c,pushPage:d})})}g.pushForgotRCPage=a}),98);
__d("MWEncryptedBackupsOtcRestoreSteps",["MWEBOTCDialogStepDeferred.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.onClose,d=a.onOtcComplete,e=a.onSkip,f=a.pushPage;f(function(){return i.jsx(c("MWEBOTCDialogStepDeferred.react"),{onClose:b,onComplete:d,onSkip:e,pushPage:f})})}g.pushByOneTimeCodePage=a}),98);
__d("MWGroupMembershipListItem",["I64","MessagingSpecialThreadRole","MessagingSpecialThreadRoleBitOffset"],(function(a,b,c,d,e,f,g){"use strict";var h,i={BroadcastChannelParticipant:"broadcastChannelParticipantType",CommunityMember:"communityMemberType",ParticipantAndContact:"participantAndContactType",ServerSearchResult:"serverSearchResultType"};function a(a){if(a.type===i.ParticipantAndContact)return a.participant.isAdmin;if(a.type===i.CommunityMember)return a.communityMember.isAdmin;return a.type===i.BroadcastChannelParticipant?a.participant.isAdmin:!1}function b(a){if(a.type===i.ParticipantAndContact)return a.participant.isModerator;return a.type===i.CommunityMember?a.communityMember.isModerator:!1}function e(a){return a.type===i.CommunityMember?d("MessagingSpecialThreadRoleBitOffset").has(c("MessagingSpecialThreadRole").CHAT_HOST,a.communityMember):!1}function f(a){if(a.type===i.ParticipantAndContact)return a.contact.id;if(a.type===i.CommunityMember)return a.communityMember.contactId;return a.type===i.BroadcastChannelParticipant?a.participant.contactId:(h||(h=d("I64"))).of_string(a.serverSearchResult.resultId)}g.MWGroupMembershipMemberTypes=i;g.isAdmin=a;g.isModerator=b;g.isHost=e;g.contactId=f}),98);
__d("MWWellbeingQPLLogStartAndCancelUtils",["QPLUserFlow","qpl"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var d=c("qpl")._(756626838,"231");c("QPLUserFlow").start(d);c("QPLUserFlow").addAnnotations(d,{bool:{is_restricted:a},string:{entry_point:b.toString()}})}function b(){c("QPLUserFlow").endCancel(c("qpl")._(756626838,"231"))}function d(a,b){var d=c("qpl")._(756614954,"380");c("QPLUserFlow").start(d);c("QPLUserFlow").addAnnotations(d,{string:{entry_point:a.toString(),source:b.toString()}})}function e(){c("QPLUserFlow").endCancel(c("qpl")._(756614954,"380"))}g.logRestrictStart=a;g.logRestrictCancel=b;g.logBlockStart=d;g.logBlockCancel=e}),98);
__d("MWInboxInfoBlockMessages.react",["fbt","FBLogger","I64","JSResourceForInteraction","LSContactBlockedByViewerStatus","LSIntEnum","MWPBumpEntityKey","MWWellbeingQPLLogStartAndCancelUtils","ReQL","ReQLSuspense","react","react-compiler-runtime","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l;l||d("react");var m=c("JSResourceForInteraction")("MWChatBlockActionDialog.react").__setRef("MWInboxInfoBlockMessages.react"),n=c("JSResourceForInteraction")("MWChatMutualBlockPreventionDialog.react").__setRef("MWInboxInfoBlockMessages.react");function a(a){var b=d("react-compiler-runtime").c(32),e=a.children,g=a.contactId,l=a.loggingEntryPoint,q=a.loggingSource,r=a.loggingSourceOwner,s=a.thread,t=(i||(i=c("useReStore")))();b[0]!==g||b[1]!==t.tables.contacts?(a=function(){return d("ReQL").fromTableAscending(t.tables.contacts,["blockedByViewerStatus","name"]).getKeyRange(g)},b[0]=g,b[1]=t.tables.contacts,b[2]=a):a=b[2];var u;b[3]!==g||b[4]!==t?(u=[t,g],b[3]=g,b[4]=t,b[5]=u):u=b[5];var v=d("ReQLSuspense").useFirst(a,u,f.id+":51");b[6]!==g||b[7]!==t.tables.supervision_edge?(a=function(){return d("ReQL").fromTableAscending(t.tables.supervision_edge,["targetUserType"]).getKeyRange(g)},u=[g,t.tables.supervision_edge],b[6]=g,b[7]=t.tables.supervision_edge,b[8]=a,b[9]=u):(a=b[8],u=b[9]);var w=d("ReQLSuspense").useFirst(a,u,f.id+":59");a=c("useMWXLazyDialog")(n);var x=a[0];b[10]!==(v==null?void 0:v.name)||b[11]!==g||b[12]!==l||b[13]!==q||b[14]!==r||b[15]!==x||b[16]!==(w==null?void 0:w.targetUserType)||b[17]!==s?(u=function(){var a=v==null?void 0:v.name,b=w==null?void 0:w.targetUserType;if(b==null||a==null)throw c("FBLogger")("messenger_web").mustfixThrow("invalid target user supervision type or user name");return x({loggingEntryPoint:l,loggingSource:q,loggingSourceOwner:r,name:a,otherUserId:g,supervisionType:b,threadKey:s.threadKey},p)},b[10]=v==null?void 0:v.name,b[11]=g,b[12]=l,b[13]=q,b[14]=r,b[15]=x,b[16]=w==null?void 0:w.targetUserType,b[17]=s,b[18]=u):u=b[18];a=u;u=c("useMWXLazyDialog")(m);var y=u[0];b[19]!==g||b[20]!==l||b[21]!==q||b[22]!==r||b[23]!==y||b[24]!==s?(u=function(){d("MWWellbeingQPLLogStartAndCancelUtils").logBlockStart(l,q);d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_wellbeing","block_click");var a={loggingData:{entryPoint:l,requestId:void 0,source:q,sourceOwner:r},targetFBID:(j||(j=d("I64"))).to_string(g),thread:s};return y(a,o)},b[19]=g,b[20]=l,b[21]=q,b[22]=r,b[23]=y,b[24]=s,b[25]=u):u=b[25];u=u;if(v==null)return null;if(b[26]!==v||b[27]!==e||b[28]!==a||b[29]!==u||b[30]!==w){var z=v!=null?(j||(j=d("I64"))).equal(v.blockedByViewerStatus,(k||(k=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").MESSAGE_BLOCKED)):!1,A=v!=null?(j||(j=d("I64"))).equal(v.blockedByViewerStatus,(k||(k=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").FULLY_BLOCKED)):!1,B=z||A?h._(/*BTDS*/"Unblock"):h._(/*BTDS*/"Block"),C=w!=null?a:u;C=e(C,B,A||z);b[26]=v;b[27]=e;b[28]=a;b[29]=u;b[30]=w;b[31]=C}else C=b[31];return C}function o(){}function p(){}g["default"]=a}),226);
__d("MWLSThreadCapabilities",["I64","LSBitOffset","LSIntEnum","LSThreadBitOffset","MWThreadKey.react","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=d("LSBitOffset").set((j||(j=d("LSIntEnum"))).ofNumber(38),d("LSBitOffset").set(j.ofNumber(30),d("LSBitOffset").set(j.ofNumber(10),d("LSBitOffset").set(j.ofNumber(25),d("LSBitOffset").set(j.ofNumber(24),d("LSBitOffset").set(j.ofNumber(23),d("LSBitOffset").set(j.ofNumber(20),d("LSBitOffset").set(j.ofNumber(18),d("LSBitOffset").set(j.ofNumber(15),d("LSBitOffset").set(j.ofNumber(14),d("LSBitOffset").set(j.ofNumber(8),d("LSBitOffset").set(j.ofNumber(55),d("LSBitOffset").set(j.ofNumber(4),d("LSBitOffset").set(j.ofNumber(3),d("LSBitOffset").set(j.ofNumber(2),d("LSBitOffset").set(j.ofNumber(1),d("LSBitOffset").set(j.ofNumber(0),d("LSBitOffset").empty))))))))))))))))),l={capabilities:k,capabilities2:d("LSBitOffset").empty,capabilities3:d("LSBitOffset").empty,capabilities4:d("LSBitOffset").empty,capabilities5:d("LSBitOffset").empty};function m(){var a=d("react-compiler-runtime").c(10),b=(h||(h=c("useReStore")))(),e=d("MWThreadKey.react").useMWThreadKeyMemoized(),g,i;a[0]!==b||a[1]!==e?(g=function(){return e!=null?d("ReQL").fromTableAscending(b.tables.threads,d("LSThreadBitOffset").threadCapabilityFields).getKeyRange(e):d("ReQL").empty()},i=[e,b],a[0]=b,a[1]=e,a[2]=g,a[3]=i):(g=a[2],i=a[3]);g=d("ReQLSuspense").useFirst(g,i,f.id+":126");if(g!=null){i=g.capabilities;var j=g.capabilities2,k=g.capabilities3,m=g.capabilities4;g=g.capabilities5;var n;a[4]!==i||a[5]!==j||a[6]!==k||a[7]!==m||a[8]!==g?(n={capabilities:i,capabilities2:j,capabilities3:k,capabilities4:m,capabilities5:g},a[4]=i,a[5]=j,a[6]=k,a[7]=m,a[8]=g,a[9]=n):n=a[9];return n}return l}function n(a,b){a=(i||(i=d("I64"))).ge(a,(i||(i=d("I64"))).of_string("64"))?(i||(i=d("I64"))).mod_(a,(i||(i=d("I64"))).of_string("64")):a;a=(i||(i=d("I64"))).lsl_(i.one,i.to_int32(a));return i.equal(i.and_(b,a),a)}function a(a){a=a.capabilities2;return n((j||(j=d("LSIntEnum"))).ofNumber(88),a)}function b(a){a=a.capabilities2;return n((j||(j=d("LSIntEnum"))).ofNumber(172),a)}function e(a){a=a.capabilities4;return n((j||(j=d("LSIntEnum"))).ofNumber(238),a)}function o(a){a=a.capabilities;return n((j||(j=d("LSIntEnum"))).ofNumber(7),a)}function p(a){a=a.capabilities;return n((j||(j=d("LSIntEnum"))).ofNumber(9),a)}function q(a){a=a.capabilities;return n((j||(j=d("LSIntEnum"))).ofNumber(6),a)}function r(a){a=a.capabilities;return n((j||(j=d("LSIntEnum"))).ofNumber(35),a)}function s(a){a=a.capabilities;return n((j||(j=d("LSIntEnum"))).ofNumber(24),a)}function t(a){a=a.capabilities;return n((j||(j=d("LSIntEnum"))).ofNumber(25),a)}function u(a){a=a.capabilities;return n((j||(j=d("LSIntEnum"))).ofNumber(27),a)}function v(a){a=a.capabilities;return n((j||(j=d("LSIntEnum"))).ofNumber(60),a)}function w(a){a=a.capabilities;return n((j||(j=d("LSIntEnum"))).ofNumber(32),a)}function x(a){a=a.capabilities2;return n((j||(j=d("LSIntEnum"))).ofNumber(95),a)}function y(a){a=a.capabilities;return n((j||(j=d("LSIntEnum"))).ofNumber(19),a)}function z(a){a=a.capabilities2;return n((j||(j=d("LSIntEnum"))).ofNumber(85),a)}function A(a){a=a.capabilities2;return n((j||(j=d("LSIntEnum"))).ofNumber(108),a)}function B(a){a=a.capabilities2;return n((j||(j=d("LSIntEnum"))).ofNumber(74),a)}function C(){var a=d("react-compiler-runtime").c(2),b=m(),c;a[0]!==b?(c=v(b),a[0]=b,a[1]=c):c=a[1];return c}g.useCapabilities=m;g.canReportChatToAdmin=a;g.canPinMessage=b;g.canSwitchVoice=e;g.canCustomizeEmoji=o;g.canCustomizeNicknames=p;g.canCustomizeTheme=q;g.canCreateGroup=r;g.canRtcVideoCall=s;g.canRtcVoiceCall=t;g.canAddMember=u;g.canCustomizeThreadName=v;g.canIgnoreMessages=w;g.canSeeSharedLinks=x;g.canMuteThread=y;g.canRestrict=z;g.canCopyInviteLink=A;g.canDeleteThread=B;g.useCanCustomizeThreadNameCapability=C}),98);
__d("MWXListCell.react",["AddOnEndOverride.react","AddOnStartOverride.react","MWXDivider.react","cr:2201","cr:43","react","xplatToDOMRef"],(function(a,b,c,d,e,f,g){"use strict";var h=["ref"],i=["addOnBottom","addOnEnd","addOnStart","content","hasBottomDivider","size"],j,k=j||d("react");function a(a){var e=a.ref;a=babelHelpers.objectWithoutPropertiesLoose(a,h);var f=a.addOnBottom,g=a.addOnEnd,j=a.addOnStart,l=a.content,m=a.hasBottomDivider;m=m===void 0?!1:m;var n=a.size;a=babelHelpers.objectWithoutPropertiesLoose(a,i);if(b("cr:43")!=null)return k.jsx(b("cr:43"),babelHelpers["extends"]({addOnBottom:f,addOnEnd:g!=null?k.jsx(c("AddOnEndOverride.react"),{children:g}):void 0,addOnStart:j!=null?k.jsx(c("AddOnStartOverride.react"),{children:j}):void 0,addOnStartMarginTop:0,content:l,contentPaddingHorizontal:8,hasBottomDivider:m,level:4,paddingVertical:8},a,{ref:e}));return b("cr:2201")!=null?k.jsx(b("cr:2201"),babelHelpers["extends"]({addOnBottom:f,addOnEnd:g,addOnStart:j,content:l,size:n!=null?n:"medium"},a,{addOnFooter:m?k.jsx(c("MWXDivider.react"),{}):void 0,ref:d("xplatToDOMRef").xplatToDOMRef(e)})):null}a.displayName=a.name+" [from "+f.id+"]";e=a;g["default"]=e}),98);
__d("MWMemberListGlimmer.react",["MWXGlimmer.react","MWXListCell.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={nameGlimmer:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"xlup9mm",width:"x1oux285",$$css:!0},profileGlimmer:{borderStartStartRadius:"x1xn7y0n",borderStartEndRadius:"x1uxb8k9",borderEndEndRadius:"x1vmbcc8",borderEndStartRadius:"x16xm01d",height:"xc9qbxq",width:"x14qfxbe",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(4);a=a.rowCount;a=a===void 0?3:a;var c;b[0]!==a?(c=new Array(a).fill("").map(k),b[0]=a,b[1]=c):c=b[1];b[2]!==c?(a=i.jsx(i.Fragment,{children:c}),b[2]=c,b[3]=a):a=b[3];return a}function k(a,b){return i.jsx(c("MWXListCell.react"),{addOnStart:i.jsx(c("MWXGlimmer.react"),{index:0,xstyle:j.profileGlimmer}),content:i.jsx(c("MWXGlimmer.react"),{index:1,xstyle:j.nameGlimmer}),size:"medium"},b)}k.displayName=k.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPParticipantsAndContactsForThread_DO_NOT_USE_THIS_WILL_KILL_PERFORMANCE",["ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=d("react-compiler-runtime").c(7),e=(h||(h=c("useReStore")))(),g;b[0]!==e.tables.contacts||b[1]!==e.tables.participants||b[2]!==a.threadKey?(g=function(){return d("ReQL").mergeJoin(d("ReQL").fromTableAscending(e.tables.participants).getKeyRange(a.threadKey),d("ReQL").fromTableAscending(e.tables.contacts))},b[0]=e.tables.contacts,b[1]=e.tables.participants,b[2]=a.threadKey,b[3]=g):g=b[3];var i;b[4]!==e||b[5]!==a.threadKey?(i=[e,a.threadKey],b[4]=e,b[5]=a.threadKey,b[6]=i):i=b[6];return d("ReQLSuspense").useArray(g,i,f.id+":28")}g.useValue=a}),98);
__d("MWQuickPromotionBroadcastChannelNUXesQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9666390616774728"}),null);
__d("MWQuickPromotionBroadcastChannelNuxQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="10060673247311283"}),null);
__d("MWXDialogPage.react",["cr:2384","cr:6810","react","react-compiler-runtime","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h=["children","hasTextOnlyContent"],i=["scrollAreaFocusProps"],j,k=j||d("react"),l={cometPageContent:{paddingBottom:"xwib8y2",paddingInlineEnd:"xv54qhq",paddingInlineStart:"xf7dkkf",$$css:!0}};function a(a){var c=d("react-compiler-runtime").c(16),e,f,g;c[0]!==a?(f=a.children,g=a.hasTextOnlyContent,e=babelHelpers.objectWithoutPropertiesLoose(a,h),c[0]=a,c[1]=e,c[2]=f,c[3]=g):(e=c[1],f=c[2],g=c[3]);if(b("cr:6810")!=null){if(c[4]!==e){a=e;a.scrollAreaFocusProps;a=babelHelpers.objectWithoutPropertiesLoose(a,i);a=a;c[4]=e;c[5]=a}else a=c[5];var j;c[6]===Symbol["for"]("react.memo_cache_sentinel")?(j=[l.cometPageContent],c[6]=j):j=c[6];c[7]!==f?(j=k.jsx(d("react-strict-dom").html.div,{style:j,children:f}),c[7]=f,c[8]=j):j=c[8];var m;c[9]!==a||c[10]!==j?(m=k.jsx(b("cr:6810"),babelHelpers["extends"]({},a,{children:j})),c[9]=a,c[10]=j,c[11]=m):m=c[11];return m}if(b("cr:2384")!=null){c[12]!==e||c[13]!==f||c[14]!==g?(a=k.jsx(b("cr:2384"),babelHelpers["extends"]({hasTextOnlyContent:g},e,{children:f})),c[12]=e,c[13]=f,c[14]=g,c[15]=a):a=c[15];return a}return null}g["default"]=a}),98);
__d("MWXDialogPageLegacy.react",["cr:6308","cr:6309","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["ref","callToActionGroupDirection","callToActionGroupLayout","children","includeFDSContentPadding_REMOVE_THIS_AFTER_CONTENT_PADDING_MIGRATION"],i,j=i||d("react");function a(a){var c=d("react-compiler-runtime").c(19),e,f,g,i,k,l;c[0]!==a?(i=a.ref,k=a.callToActionGroupDirection,e=a.callToActionGroupLayout,f=a.children,l=a.includeFDSContentPadding_REMOVE_THIS_AFTER_CONTENT_PADDING_MIGRATION,g=babelHelpers.objectWithoutPropertiesLoose(a,h),c[0]=a,c[1]=e,c[2]=f,c[3]=g,c[4]=i,c[5]=k,c[6]=l):(e=c[1],f=c[2],g=c[3],i=c[4],k=c[5],l=c[6]);a=k===void 0?"backward":k;k=l===void 0?!0:l;if(b("cr:6308")){c[7]!==a||c[8]!==e||c[9]!==f||c[10]!==k||c[11]!==g||c[12]!==i?(l=j.jsx(b("cr:6308"),babelHelpers["extends"]({callToActionGroupDirection:a,callToActionGroupLayout:e,includeFDSContentPadding_REMOVE_THIS_AFTER_CONTENT_PADDING_MIGRATION:k},g,{ref:i,children:f})),c[7]=a,c[8]=e,c[9]=f,c[10]=k,c[11]=g,c[12]=i,c[13]=l):l=c[13];return l}if(b("cr:6309")){c[14]!==a||c[15]!==f||c[16]!==g||c[17]!==i?(e=j.jsx(b("cr:6309"),babelHelpers["extends"]({callToActionGroupDirection:a,ref:i},g,{children:f})),c[14]=a,c[15]=f,c[16]=g,c[17]=i,c[18]=e):e=c[18];return e}return null}g["default"]=a}),98);
__d("MWXIconCalendar",["MWXSvgIcon","SVGIcon","cr:22243","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22243")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconMenuItemBox",["MWXSvgIcon","SVGIcon","cr:22587","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgMenuItemIcon(d("SVGIcon").svgIcon(b("cr:22587")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconMenuItemCautionTriangle",["MWXSvgIcon","SVGIcon","cr:22610","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgMenuItemIcon(d("SVGIcon").svgIcon(b("cr:22610")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconMenuItemLeave",["MWXSvgIcon","SVGIcon","cr:22718","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgMenuItemIcon(d("SVGIcon").svgIcon(b("cr:22718")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconMenuItemLink",["MWXSvgIcon","SVGIcon","cr:22721","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgMenuItemIcon(d("SVGIcon").svgIcon(b("cr:22721")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconMenuItemPauseChat",["MWXSvgIcon","SVGIcon","cr:22754","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgMenuItemIcon(d("SVGIcon").svgIcon(b("cr:22754")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconMenuItemResumeChat",["MWXSvgIcon","SVGIcon","cr:22797","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgMenuItemIcon(d("SVGIcon").svgIcon(b("cr:22797")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconMenuItemTrash",["MWXSvgIcon","SVGIcon","cr:22843","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgMenuItemIcon(d("SVGIcon").svgIcon(b("cr:22843")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXMultiStepDialogHeader.react",["cr:73","cr:8246","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["buttonType","iconCssSelectorId","withoutBackButton","withoutHeaderBottomBorder"],i,j=i||d("react");function a(a){var c=d("react-compiler-runtime").c(16),e,f,g,i,k;c[0]!==a?(e=a.buttonType,f=a.iconCssSelectorId,i=a.withoutBackButton,k=a.withoutHeaderBottomBorder,g=babelHelpers.objectWithoutPropertiesLoose(a,h),c[0]=a,c[1]=e,c[2]=f,c[3]=g,c[4]=i,c[5]=k):(e=c[1],f=c[2],g=c[3],i=c[4],k=c[5]);if(b("cr:8246")){c[6]!==e||c[7]!==f||c[8]!==g||c[9]!==i||c[10]!==k?(a=j.jsx(b("cr:8246"),babelHelpers["extends"]({buttonType:e,iconCssSelectorId:f,withoutBackButton:i,withoutHeaderBottomBorder:k},g)),c[6]=e,c[7]=f,c[8]=g,c[9]=i,c[10]=k,c[11]=a):a=c[11];return a}if(b("cr:73")){f=!i;c[12]!==e||c[13]!==g||c[14]!==f?(k=j.jsx(b("cr:73"),babelHelpers["extends"]({backButtonType:e,closeButtonType:e,withBackButton:f},g)),c[12]=e,c[13]=g,c[14]=f,c[15]=k):k=c[15];return k}return null}g["default"]=a}),98);
__d("MWXMultiStepDialog_DEPRECATED.react",["cr:12314","cr:7741","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["ref"],i=["iconCssSelectorId","withDeprecatedStyles","withoutHeaderBottomBorder"],j,k=j||d("react");function a(a){var c=d("react-compiler-runtime").c(11),e,f;c[0]!==a?(f=a.ref,e=babelHelpers.objectWithoutPropertiesLoose(a,h),c[0]=a,c[1]=e,c[2]=f):(e=c[1],f=c[2]);if(c[3]!==e){a=e;a.iconCssSelectorId;a.withDeprecatedStyles;a.withoutHeaderBottomBorder;a=babelHelpers.objectWithoutPropertiesLoose(a,i);a=a;c[3]=e;c[4]=a}else a=c[4];if(b("cr:7741")!=null){var g;c[5]!==e||c[6]!==f?(g=k.jsx(b("cr:7741"),babelHelpers["extends"]({},e,{ref:f})),c[5]=e,c[6]=f,c[7]=g):g=c[7];return g}if(b("cr:12314")!=null){c[8]!==a||c[9]!==f?(e=k.jsx(b("cr:12314"),babelHelpers["extends"]({},a,{ref:f})),c[8]=a,c[9]=f,c[10]=e):e=c[10];return e}return null}g["default"]=a}),98);
__d("MessengerBoxFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{d:"M8 7.5a1 1 0 0 0-1 1V10a1 1 0 0 0 1 1h20a1 1 0 0 0 1-1V8.5a1 1 0 0 0-1-1H8z"}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M9 13.5a.5.5 0 0 1 .5-.5h17a.5.5 0 0 1 .5.5v12a3 3 0 0 1-3 3H12a3 3 0 0 1-3-3v-12zm4.5 3.25c0-.69.56-1.25 1.25-1.25h6.5a1.25 1.25 0 1 1 0 2.5h-6.5c-.69 0-1.25-.56-1.25-1.25z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerChatResumeFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{d:"M25.515 14.014c.69.04 1.307-.531 1.122-1.196C25.502 8.734 21.807 6 17 6 11.188 6 7 9.996 7 15.544v.002c0 1.9.376 3.618 1.257 5.056.416.68.513 1.513.265 2.273l-.662 2.191c-.182.558.339 1.08.876.897l3.335-1.024a3.873 3.873 0 0 1 2.172-.081c.223.054.45.1.68.139.66.11 1.173-.515 1.114-1.181a9 9 0 0 1 9.478-9.801z"}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M32 23a7 7 0 1 1-14 0 7 7 0 0 1 14 0zm-9.625-2.692v5.415c0 .403.424.665.784.485l5.417-2.708c.399-.2.399-.77 0-.969l-5.417-2.707a.542.542 0 0 0-.784.484z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerLeaveFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{d:"M21.498 14.75a1 1 0 0 0 1-1V12a4 4 0 0 0-4-4h-6.5a4 4 0 0 0-4 4v12a4 4 0 0 0 4 4h6.5a4 4 0 0 0 4-4v-1.75a1 1 0 0 0-1-1h-.5a1 1 0 0 0-1 1V24a1.5 1.5 0 0 1-1.5 1.5h-6.5a1.5 1.5 0 0 1-1.5-1.5V12a1.5 1.5 0 0 1 1.5-1.5h6.5a1.5 1.5 0 0 1 1.5 1.5v1.75a1 1 0 0 0 1 1h.5z"}),i.jsx(d("XPlatReactSVG").Path,{d:"M14.498 16.75h9.752a.25.25 0 0 0 .25-.25v-1.858a1 1 0 0 1 1.643-.766l4.002 3.356a1 1 0 0 1 0 1.532l-4.002 3.357a1 1 0 0 1-1.643-.767V19.5a.25.25 0 0 0-.25-.25h-9.752a1 1 0 0 1-1-1v-.5a1 1 0 0 1 1-1z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerLinkFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{d:"M21.996 19.317c-1.405 1.406-3.747 1.408-5.23-.075a1.25 1.25 0 0 0-1.768 1.768c2.423 2.424 6.348 2.494 8.766.076l3.462-3.461c2.418-2.418 2.348-6.344-.076-8.767-2.423-2.424-6.348-2.494-8.766-.076l-.557.557a1.25 1.25 0 0 0 1.769 1.768l.556-.556c1.406-1.406 3.747-1.408 5.23.075 1.483 1.483 1.48 3.825.075 5.23l-3.461 3.461z"}),i.jsx(d("XPlatReactSVG").Path,{d:"M14.012 16.69c1.406-1.405 3.747-1.407 5.23.076a1.25 1.25 0 0 0 1.768-1.768c-2.423-2.424-6.348-2.493-8.766-.076l-3.462 3.462c-2.418 2.418-2.348 6.343.076 8.766 2.423 2.424 6.349 2.494 8.767.076l.556-.557a1.25 1.25 0 1 0-1.768-1.768l-.557.556c-1.405 1.406-3.747 1.408-5.23-.075-1.483-1.483-1.48-3.824-.075-5.23l3.461-3.461z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerTextFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12.243 12.238a.368.368 0 0 0-.35.255l-2.18 6.675a.25.25 0 0 0 .238.328h4.584a.25.25 0 0 0 .238-.328l-2.18-6.675a.369.369 0 0 0-.35-.255zm5.802 13.755a1.44 1.44 0 0 1-1.365-.982l-.928-2.844a.25.25 0 0 0-.238-.173H8.973a.25.25 0 0 0-.238.173l-.929 2.844a1.44 1.44 0 1 1-2.722-.94L9.83 10.7a2.563 2.563 0 0 1 4.829 0l4.744 13.37a1.44 1.44 0 0 1-1.357 1.922zm11.207-5.475a.25.25 0 0 0-.266-.25l-2.805.176c-1.659.108-2.434.709-2.434 1.779 0 1.105.942 1.766 2.255 1.766 1.79 0 3.25-1.166 3.25-2.692v-.78zm1.409 5.46a1.33 1.33 0 0 1-1.339-1.336c0-.098-.139-.138-.198-.06-.803 1.058-2.387 1.668-3.925 1.668-2.475 0-4.198-1.56-4.198-3.9 0-2.316 1.7-3.9 4.82-4.088l3.195-.185a.25.25 0 0 0 .236-.25v-.762c0-1.252-1.032-1.829-2.603-1.829-2.066 0-2.316 1.24-3.333 1.24-1.13 0-1.745-1.354-.968-2.172.933-.982 2.349-1.556 4.254-1.556 3.295 0 5.398 1.603 5.398 4.317v7.577a1.33 1.33 0 0 1-1.34 1.335z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerTrashFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{d:"M20.882 7c.685 0 1.312.387 1.618 1 .306.613.933 1 1.618 1H27a1 1 0 0 1 1 1v.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1h2.882c.685 0 1.312-.387 1.618-1 .306-.613.933-1 1.618-1h5.764zM10.601 13.5a1 1 0 0 0-.995 1.096l1.132 11.693A3 3 0 0 0 13.724 29h8.552a3 3 0 0 0 2.986-2.711l1.132-11.693a1 1 0 0 0-.995-1.096H10.6z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("getMWChatEncryptedBackupsPinCodeInvalidKeyPressedError",["fbt","MWChatEncrypedBackupsNumericCodeKeyTypes"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a,b){if(a===d("MWChatEncrypedBackupsNumericCodeKeyTypes").InvalidKeyType.NON_NUMERIC_CHAR)return b==="pin"?h._(/*BTDS*/"Your PIN can only contain numbers"):null;else if(a===d("MWChatEncrypedBackupsNumericCodeKeyTypes").InvalidKeyType.NUM_PAD_WITHOUT_NUM_LOCK)return h._(/*BTDS*/"Press num lock to use the numeric keypad")}g["default"]=a}),226);
__d("isStringNotNullAndNotWhitespaceOnly",[],(function(a,b,c,d,e,f){"use strict";function a(a){return!(a==null||a.trim()==="")}f["default"]=a}),66);
__d("queryMWLSOtherParticipantContact",["I64","LSMessagingThreadTypeUtil","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c,e,f){c=d("LSMessagingThreadTypeUtil").isOneToOne(c);return c?d("ReQL").leftJoin(d("ReQL").fromTableAscending(a.tables.participants,["contactId"]).getKeyRange(b).filter(function(a){return!(h||(h=d("I64"))).equal(a.contactId,e)}).take(1),d("ReQL").fromTableAscending(a.tables.contacts,f)).map(function(a){a[0];a=a[1];return a}):d("ReQL").empty()}g["default"]=a}),98);
__d("useEOTRPhaseTwoAndThree",["EOTRTypes","cr:6080","cr:6737"],(function(a,b,c,d,e,f,g){"use strict";function a(){return d("EOTRTypes").EOTRFlow.UNKNOWN}f=(e=(c=b("cr:6737"))!=null?c:b("cr:6080"))!=null?e:a;g["default"]=f}),98);
__d("useEncryptedBackupsQplImpressionRef",["QPLUserFlow","react-compiler-runtime","useVisibilityObserver"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e,f){var g=d("react-compiler-runtime").c(5),h;g[0]!==f||g[1]!==a||g[2]!==e||g[3]!==b?(h={onVisible:function(){c("QPLUserFlow").addPoint(a,b,{instanceKey:e}),f==null||f()}},g[0]=f,g[1]=a,g[2]=e,g[3]=b,g[4]=h):h=g[4];return c("useVisibilityObserver")(h)}g["default"]=a}),98);
__d("useLogDeleteChannelFailed",["LSMessagingThreadTypeUtil","QuickPerformanceLogger","emptyFunction","qpl","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useCallback;function a(a){a=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a);var b=j;return a?b:c("emptyFunction")}function j(){(h||(h=c("QuickPerformanceLogger"))).markerEnd(c("qpl")._(975844490,"1761"),3)}g["default"]=a}),98);
__d("useMWCMGetReportCommunityDialogTriggerHook",["fbt","I64","Int64Hooks","LSFactory","LSIntEnum","LSInternetConnectionState","LSReportCommunityChannelStoredProcedure","ReQL","ReQLSuspense","promiseDone","react","react-compiler-runtime","useMWXConfirmationDialog","useMWXPushToast","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l;(l||d("react")).useCallback;function a(a){var b=d("react-compiler-runtime").c(14),e=(i||(i=c("useReStore")))(),g;b[0]!==e.tables.connectivity_status?(g=function(){return d("ReQL").fromTableAscending(e.tables.connectivity_status)},b[0]=e.tables.connectivity_status,b[1]=g):g=b[1];var l;b[2]!==e?(l=[e],b[2]=e,b[3]=l):l=b[3];var m=d("ReQLSuspense").useFirst(g,l,f.id+":34"),n=c("useMWXPushToast")();b[4]===Symbol["for"]("react.memo_cache_sentinel")?(g=h._(/*BTDS*/"You've reported this chat to the group admins."),b[4]=g):g=b[4];var o=g;b[5]!==m||b[6]!==e||b[7]!==n||b[8]!==a?(l=function(){c("promiseDone")(e.runInTransaction(function(b){return c("LSReportCommunityChannelStoredProcedure")(c("LSFactory")(b),{threadKey:a})},"readwrite",void 0,void 0,f.id+":47"),function(){(m==null||(j||(j=d("I64"))).equal(m.internetConnectionState,(k||(k=d("LSIntEnum"))).ofNumber(c("LSInternetConnectionState").CONNECTED)))&&n({body:o})})},g=[e,a,m,n,o],b[5]=m,b[6]=e,b[7]=n,b[8]=a,b[9]=l,b[10]=g):(l=b[9],g=b[10]);var p=d("Int64Hooks").useCallbackInt64(l,g),q=c("useMWXConfirmationDialog")();b[11]!==p||b[12]!==q?(l=function(a){return q({body:h._(/*BTDS*/"If you report this chat, it will be sent to the group admins for review."),cancel:h._(/*BTDS*/"Cancel"),confirm:h._(/*BTDS*/"Report"),title:h._(/*BTDS*/"Report chat to group admins?")},function(){p(),a==null||a()},function(){a==null||a()})},b[11]=p,b[12]=q,b[13]=l):l=b[13];return l}g["default"]=a}),226);
__d("useMWChatEncryptedBackupsAddDevice",["EBMainThreadEBDBApiDeferred","LSDataTraceCheckPoint","LSIntEnum","MAWTraceUtils","Promise","promiseDone","react","react-compiler-runtime","requireDeferred","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=["onStart"],i,j,k;e=k||d("react");e.useCallback;var l=e.useRef,m=e.useState,n=c("requireDeferred")("MAWEncryptedBackupsClearRecoveryCode").__setRef("useMWChatEncryptedBackupsAddDevice"),o=c("requireDeferred")("MWEncryptedBackupsFetchBackupIds").__setRef("useMWChatEncryptedBackupsAddDevice"),p=c("requireDeferred")("mwEBAddDevice").__setRef("useMWChatEncryptedBackupsAddDevice");function a(a){var e=d("react-compiler-runtime").c(12),f=a.environment,g=a.hsmFleetMigrationResetPIN,k=a.onComplete,t=a.onFailure,u=a.onInvalidRecoveryCode,v=a.onStart;a=m(!1);var w=a[0],x=a[1];e[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(){x(!1)},e[0]=a):a=e[0];var y=a,z=c("useAsyncReStore")(),A=l("");e[1]!==z||e[2]!==f||e[3]!==g||e[4]!==k||e[5]!==t||e[6]!==u||e[7]!==v?(a=function(a,e,l){A.current=l||"",c("promiseDone")((i||(i=b("Promise"))).all([z,n.load(),p.load().then(s),o.load()]),function(i){var l=i[0],b=i[1],m=i[2];i=i[3];b=b.encryptedBackupsClearRecoveryCode;var n=i.encryptedBackupsFetchBackupIds;return c("promiseDone")(b(l),function(){var b={onFailure:function(a){y(),t(a),e!=null&&d("MAWTraceUtils").recordFailureAndFlushForTraceId(e,(j||(j=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_PIN_RESTORE_FAILURE),[],"Add Device Failure")},onInvalidRecoveryCode:function(){y(),u()},onStart:function(){x(!0),e!=null&&d("MAWTraceUtils").recordSuccessAndFlushForTraceId(e,(j||(j=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_PLUGIN_CALLING_INITIALIZE_RESTORE),[]),v==null||v()},onSuccess:function(){c("promiseDone")(n(l)),y(),k(),g&&A.current!==""&&g(A.current)},recoveryCode:a,storage:l};b.onStart();b.onStart;b=babelHelpers.objectWithoutPropertiesLoose(b,h);return m(babelHelpers["extends"]({},b,{environment:f,trackAddingDevice:r,trackOverprompting:q}))})})},e[1]=z,e[2]=f,e[3]=g,e[4]=k,e[5]=t,e[6]=u,e[7]=v,e[8]=a):a=e[8];a=a;var B;e[9]!==w||e[10]!==a?(B=[a,w],e[9]=w,e[10]=a,e[11]=B):B=e[11];return B}function q(a){return d("EBMainThreadEBDBApiDeferred").trackOverprompting(a)}function r(){return d("EBMainThreadEBDBApiDeferred").addNewDevice()}function s(a){return a.EBAddDevice}g["default"]=a}),98);
__d("useMWChatEncryptedBackupsNumericCode",["fbt","FocusRegion.react","MWChatEncrypedBackupsNumericCodeKeyTypes","MWChatEncrypedBackupsNumericCodeValidation","MWLogInteraction","focusScopeQueries","getMWChatEncryptedBackupsPinCodeInvalidKeyPressedError","promiseDone","qex","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i;i||(i=d("react"));var j=i.useState,k={confirmPin:h._(/*BTDS*/"Confirm your PIN"),otc:h._(/*BTDS*/"One-time code"),pin:h._(/*BTDS*/"PIN")};function a(a){var b=a.checkPreviouslyInsertedCode,e=a.clearInputOnComplete,f=e===void 0?!1:e;e=a.enableMasking;var g=a.focusRegionId,h=a.inputSize,i=a.onChange,l=a.onComplete;a=a.type;var m=j(!1),n=m[0],o=m[1];m=j(!0);var p=m[0],q=m[1];m=j("");var r=m[0],s=m[1];m=j(null);var t=m[0],u=m[1];m=function(a){u(null),q(!a)};var v=async function(a){if(d("MWChatEncrypedBackupsNumericCodeValidation").numericCodeIsCompleted(a,h)){d("MWLogInteraction").logPopoverOpenCancel("initiate_restore");if(b!=null){var c=b.onCodeMismatch,e=b.previouslyInsertedCode;e=e===a;if(!e){c();return}}q(!0);o(!0);try{await l(a),f&&s("")}catch(a){s("")}finally{o(!1)}}},w=b!=null&&a==="pin"?"confirmPin":a;return[{"aria-label":k[w],disabled:n,enableMasking:e,focusRegionId:g,onChange:function(a){var b=function(){d("MWChatEncrypedBackupsNumericCodeValidation").numericCodeIsValid(a,h)&&(s(a),u(null),i==null||i(a),c("promiseDone")(v(a)))};b()},onCompletionChange:m,onEnabledNumLock:function(){t===d("MWChatEncrypedBackupsNumericCodeKeyTypes").InvalidKeyType.NUM_PAD_WITHOUT_NUM_LOCK&&u(null)},onPressedInvalidKey:function(a){(a===d("MWChatEncrypedBackupsNumericCodeKeyTypes").InvalidKeyType.NON_NUMERIC_CHAR||a===d("MWChatEncrypedBackupsNumericCodeKeyTypes").InvalidKeyType.NUM_PAD_WITHOUT_NUM_LOCK&&c("qex")._("4752")!==!0)&&u(a)},size:h,value:r},{clearNumericInput:function(){return s("")},disabled:p,focusOnInput:function(){d("FocusRegion.react").focusRegionById(g,d("focusScopeQueries").tabbableScopeQuery)},invalidKeyPressedError:c("getMWChatEncryptedBackupsPinCodeInvalidKeyPressedError")(t,a),isLoading:n,onPress:function(){c("promiseDone")(v(r))}}]}g.useMWChatEncryptedBackupsNumericCode=a}),226);
__d("useMWNavigateAfterLeavingGroup",["I64","Int64Hooks","MWInboxCommunityThreadsRouteBuilder","XCometGroupDiscussionControllerRouteBuilder","getFirstReadThread","promiseDone","react-compiler-runtime","useAsyncReStore","useCometRouterDispatcher","useCommunityFolder","useMWNavigation","useTopMostRouteCometEntityKey"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=c("useTopMostRouteCometEntityKey")();if(a==null)return!1;var b=a.entity_type;a=a.section;return a==="CHATS"&&b==="group"}function a(a,b){var e,f=d("react-compiler-runtime").c(19),g=c("useAsyncReStore")();e=(e=a==null?void 0:a.parentThreadKey)!=null?e:(h||(h=d("I64"))).zero;var j;f[0]!==e||f[1]!==a?(j=a!=null?a:{parentThreadKey:e},f[0]=e,f[1]=a,f[2]=j):j=f[2];var k=c("useCommunityFolder")(j),l=c("useCometRouterDispatcher")(),m=i(),n=c("useMWNavigation")();f[3]!==g||f[4]!==l||f[5]!==b||f[6]!==k||f[7]!==m||f[8]!==n||f[9]!==(a==null?void 0:a.parentThreadKey)?(e=function(){if((a==null?void 0:a.parentThreadKey)==null)return;if(k!=null){if(l==null)return;var e=m?c("XCometGroupDiscussionControllerRouteBuilder").buildURL({idorvanity:(h||(h=d("I64"))).to_string(k.fbGroupId)}):d("MWInboxCommunityThreadsRouteBuilder").buildURLWithoutThread({folder_id:(h||(h=d("I64"))).to_string(k.folderId)});l.go(e,{});return}c("promiseDone")(g,function(d){c("promiseDone")(c("getFirstReadThread")(d,a==null?void 0:a.parentThreadKey).then(function(a){if(a!=null)return n.openInbox({clientThreadKey:a.clientThreadKey,threadKey:a.threadKey,threadType:a.threadType},"afterLeavingGroup",void 0,void 0,b)}))})},f[3]=g,f[4]=l,f[5]=b,f[6]=k,f[7]=m,f[8]=n,f[9]=a==null?void 0:a.parentThreadKey,f[10]=e):e=f[10];j=a==null?void 0:a.parentThreadKey;var o;f[11]!==g||f[12]!==l||f[13]!==b||f[14]!==k||f[15]!==m||f[16]!==n||f[17]!==j?(o=[j,k,g,l,m,n,b],f[11]=g,f[12]=l,f[13]=b,f[14]=k,f[15]=m,f[16]=n,f[17]=j,f[18]=o):o=f[18];return d("Int64Hooks").useCallbackInt64(e,o)}g["default"]=a}),98);
__d("useMWDeleteThreadAndMaybeNavigate",["I64","Int64Hooks","LSFactory","LSIntEnum","LSLocalOptimisticDeleteCommunityChannelStoredProcedure","LSLocalOptimisticDeleteDiscoverableChatStoredProcedure","LSMessagingThreadTypeUtil","LSOptimisticRemoveThreadStoredProcedure","LSThreadRemoveType","MWChatStateActions","MWChatStateV2.react","MessengerWebUXLogger","Promise","QPLUserFlow","Random","WebUserFlowLoggingDataContextProvider.react","mwCMIsAnyCMThread","promiseDone","qpl","react","react-compiler-runtime","useLogDeleteChannelFailed","useMWNavigateAfterLeavingGroup","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=(l||d("react")).useContext;function a(a,e,g){var l=d("react-compiler-runtime").c(32),n=(i||(i=c("useReStore")))(),o=c("useMWNavigateAfterLeavingGroup")(a,g),p=d("MWChatStateV2.react").useDispatch();l[0]!==a.threadType?(g=c("mwCMIsAnyCMThread")(a.threadType),l[0]=a.threadType,l[1]=g):g=l[1];var q=g;l[2]!==a.threadType?(g=d("LSMessagingThreadTypeUtil").isJoinedSocialChannel(a.threadType),l[2]=a.threadType,l[3]=g):g=l[3];var r=g,s=c("useLogDeleteChannelFailed")(a.threadKey);l[4]!==a.threadType?(g=d("LSMessagingThreadTypeUtil").isCMSubthread(a.threadType),l[4]=a.threadType,l[5]=g):g=l[5];var t=g,u=c("MessengerWebUXLogger").useInteractionLogger();g=m(d("WebUserFlowLoggingDataContextProvider.react").WebUserFlowLoggingDataContext);var v=g.loggingDataRef;l[6]!==n||l[7]!==p||l[8]!==t||l[9]!==q||l[10]!==r||l[11]!==s||l[12]!==u||l[13]!==v.current||l[14]!==o||l[15]!==e||l[16]!==a.threadKey||l[17]!==a.threadType?(g=function(){var g=c("qpl")._(25308751,"2014"),i=Date.now()+(Math.round(d("Random").random()*1e4)+1e4);c("QPLUserFlow").start(g,{annotations:{string:{action_type:"delete",thread_type:(j||(j=d("I64"))).to_string(a.threadType)}},instanceKey:i});var l=babelHelpers["extends"]({},v.current,{eventType:"backend"});c("promiseDone")(n.runInTransaction(function(b){if(q||t)return c("LSLocalOptimisticDeleteCommunityChannelStoredProcedure")(c("LSFactory")(b),{threadKey:a.threadKey});else if(r)return c("LSLocalOptimisticDeleteDiscoverableChatStoredProcedure")(c("LSFactory")(b),{threadKey:a.threadKey});else return c("LSOptimisticRemoveThreadStoredProcedure")(c("LSFactory")(b),{removeType:(k||(k=d("LSIntEnum"))).ofNumber(c("LSThreadRemoveType").DELETE_THREAD),threadKey:a.threadKey})},"readwrite",void 0,void 0,f.id+":84")["catch"](function(a){s(),u==null||u(babelHelpers["extends"]({},l,{eventName:"thread_delete_failure"})),c("QPLUserFlow").endFailure(g,a,{instanceKey:i})}).then(function(){e&&o();p(d("MWChatStateActions").closeTabByThreadKey(Date.now(),a.threadKey));u==null||u(babelHelpers["extends"]({},l,{eventName:"thread_delete_success"}));c("QPLUserFlow").endSuccess(g,{instanceKey:i});return(h||(h=b("Promise"))).resolve()}))},l[6]=n,l[7]=p,l[8]=t,l[9]=q,l[10]=r,l[11]=s,l[12]=u,l[13]=v.current,l[14]=o,l[15]=e,l[16]=a.threadKey,l[17]=a.threadType,l[18]=g):g=l[18];var w;l[19]!==n||l[20]!==p||l[21]!==t||l[22]!==q||l[23]!==r||l[24]!==s||l[25]!==u||l[26]!==v||l[27]!==o||l[28]!==e||l[29]!==a.threadKey||l[30]!==a.threadType?(w=[a.threadType,a.threadKey,v,n,q,t,r,s,u,e,p,o],l[19]=n,l[20]=p,l[21]=t,l[22]=q,l[23]=r,l[24]=s,l[25]=u,l[26]=v,l[27]=o,l[28]=e,l[29]=a.threadKey,l[30]=a.threadType,l[31]=w):w=l[31];return d("Int64Hooks").useCallbackInt64(g,w)}g["default"]=a}),98);
__d("useMWEBFlowSourceContext",["FBLogger","MWChatEncryptedBackupsQPLSource.enum","MWEBFlowSourceContext","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.useContext;function a(){var a=d("react-compiler-runtime").c(2),b=i(c("MWEBFlowSourceContext")),e=b.source;a[0]!==e?(b=function(){if(e==null){c("FBLogger")("wmi_eb").mustfix("[labyrinth][web] source is null. Did you wrap your flow with MWEBFlowSourceContextProvider?");return c("MWChatEncryptedBackupsQPLSource.enum").UNKNOWN}return e},a[0]=e,a[1]=b):b=a[1];return b}g["default"]=a}),98);
__d("useMWEncryptedBackupsListenForChangesToVirtualDevicesV2",["Base64Utils","I64","LSIntEnum","ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;b=k||d("react");var l=b.useEffect;b.useMemo;var m=b.useState;function a(a){var b=d("react-compiler-runtime").c(16),e;b[0]!==a?(e=a===void 0?{}:a,b[0]=a,b[1]=e):e=b[1];a=e;e=a.offlineDevicesCountInitialValue;a=a.vestaClientIDInitialValue;var g=(h||(h=c("useReStore")))(),i;b[2]!==g.tables.encrypted_backups_virtual_devices?(i=function(){return d("ReQL").fromTableAscending(g.tables.encrypted_backups_virtual_devices)},b[2]=g.tables.encrypted_backups_virtual_devices,b[3]=i):i=b[3];var j;b[4]!==g?(j=[g],b[4]=g,b[5]=j):j=b[5];var k=d("ReQLSuspense").useArray(i,j,f.id+":52");bb0:{if(a!=null){i=a;break bb0}if(b[6]!==k){j=k.filter(q);a=j[0];j=a!=null?d("Base64Utils").fromArrayBuffer(a.virtualDeviceId):void 0;b[6]=k;b[7]=j}else j=b[7];i=j}a=i;bb1:{if(e!=null){j=e;break bb1}b[8]!==k?(i=k.filter(p),b[8]=k,b[9]=i):i=b[9];j=i.length}e=j;i=m(a);j=i[0];var r=i[1];a=m(e);i=a[0];var s=a[1];b[10]!==k?(e=function(){if(k.length===0)return;var a=k.filter(o);a=a[0];var b=k.filter(n);r(a!=null?d("Base64Utils").fromArrayBuffer(a.virtualDeviceId):void 0);s(b.length)},a=[k],b[10]=k,b[11]=e,b[12]=a):(e=b[11],a=b[12]);l(e,a);b[13]!==i||b[14]!==j?(e={offlineDevicesCount:i,vestaClientID:j},b[13]=i,b[14]=j,b[15]=e):e=b[15];return e}function n(a){return(i||(i=d("I64"))).equal(a.virtualDeviceType,(j||(j=d("LSIntEnum"))).ofNumber(1))}function o(a){return(i||(i=d("I64"))).equal(a.virtualDeviceType,(j||(j=d("LSIntEnum"))).ofNumber(2))}function p(a){return(i||(i=d("I64"))).equal(a.virtualDeviceType,(j||(j=d("LSIntEnum"))).ofNumber(1))}function q(a){return(i||(i=d("I64"))).equal(a.virtualDeviceType,(j||(j=d("LSIntEnum"))).ofNumber(2))}g["default"]=a}),98);
__d("useMWInboxInfoFRX",["JSResourceForInteraction","LSMessagingThreadTypeUtil","MWCMThreadTypes.react","MWGetLSThreadReportingTokenFromThread","MWPThreadIsPage.react","MessengerWebUXLogger","cr:2580","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var e=a.entryPoint;e=e===void 0?"report_button":e;var f=a.messagingEntrypoint,g=a.onPress,h=a.thread,i=h.threadKey,j=h.threadType;a=c("MWGetLSThreadReportingTokenFromThread")(h);var k=d("MWPThreadIsPage.react").useIsPage(),l=d("LSMessagingThreadTypeUtil").isOneToOne(j),m=d("LSMessagingThreadTypeUtil").isGroup(j),n=d("LSMessagingThreadTypeUtil").isArmadilloSecure(j),o=d("LSMessagingThreadTypeUtil").isCMSubthread(j),p=d("MWCMThreadTypes.react").isJoinedCMThread(j),q=d("LSMessagingThreadTypeUtil").isDiscoverableChannel(j);e={entryPoint:e,id:a,threadKey:i};var r=k&&!q?babelHelpers["extends"]({},e,{location:"messenger_p2b_direct_thread_details"}):l&&n?babelHelpers["extends"]({},e,{location:"messenger_encrypted_direct_thread"}):l&&!n?babelHelpers["extends"]({},e,{location:"messenger_direct_thread_details"}):p?babelHelpers["extends"]({},e,{location:"messenger_community_messaging_group_thread_details"}):m&&n?babelHelpers["extends"]({},e,{location:"messenger_encrypted_group_thread"}):m&&!n?babelHelpers["extends"]({},e,{location:"messenger_group_thread_details"}):o&&!n?babelHelpers["extends"]({},e,{location:"messenger_community_messaging_subthread_view"}):void 0;a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("CometFRX_DEPRECATED.react").__setRef("useMWInboxInfoFRX"));var s=a[0],t=c("MessengerWebUXLogger").useInteractionLogger();return function(){r!=null&&(s(r),b("cr:2580")&&f!=null&&b("cr:2580")({threadKey:i,threadType:j},"report_thread",f),t==null||t({eventName:"report_thread",threadKey:h.threadKey,threadType:h.threadType})),g==null||g()}}g["default"]=a}),98);
__d("useMWIsViewerThreadAdmin.react",["MWPActor.react","ReQL","ReQLSuspense","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=d("react-compiler-runtime").c(8),e=d("MWPActor.react").useActor(),g;c[0]!==e||c[1]!==a.tables.participants||c[2]!==b?(g=function(){return d("ReQL").fromTableAscending(a.tables.participants,["isAdmin"]).getKeyRange(b,e)},c[0]=e,c[1]=a.tables.participants,c[2]=b,c[3]=g):g=c[3];var h;c[4]!==e||c[5]!==a||c[6]!==b?(h=[a,b,e],c[4]=e,c[5]=a,c[6]=b,c[7]=h):h=c[7];c=d("ReQLSuspense").useFirst(g,h,f.id+":23");return(g=c==null?void 0:c.isAdmin)!=null?g:!1}g["default"]=a}),98);
__d("useMWLSCanLeaveGroup",["I64","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=(h||(h=d("I64"))).equal(a.parentThreadKey,(i||(i=d("LSIntEnum"))).ofNumber(-10));if(d("LSMessagingThreadTypeUtil").isGroup(a.threadType)&&d("LSThreadBitOffset").has(28,a))return!b;else return!1}g["default"]=a}),98);
__d("useMWPRemoveFromGroup",["LSFactory","LSOptimisticRemoveParticipantsFromGroupThreadStoredProcedure","LSVec","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=d("react-compiler-runtime").c(3),e=(h||(h=c("useReStore")))(),g;b[0]!==e||b[1]!==a?(g=function(b){return e.runInTransaction(function(d){return c("LSOptimisticRemoveParticipantsFromGroupThreadStoredProcedure")(c("LSFactory")(d),{contactIds:c("LSVec").ofArray([b]),threadKey:a})},"readwrite",void 0,void 0,f.id+":24")},b[0]=e,b[1]=a,b[2]=g):g=b[2];return g}g["default"]=a}),98);
__d("useMWLSConfirmRemoveFromGroup",["fbt","BroadcastChannelQPL","CommunityMessagingEnableState","I64","Int64Hooks","JSResourceForInteraction","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWCMThreadTypes.react","MWChatStateV2.react","MWChatStateV2Types","MWPActor.react","ReQL","ReQLSuspense","cr:9761","promiseDone","react","react-compiler-runtime","useCommunityFolder","useMWPRemoveFromGroup","useMWXConfirmationDialog","useMWXLazyDialog","useReStore","useShouldShowMessagingEntrypointInCometRoot"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l;(l||d("react")).useCallback;var m=c("JSResourceForInteraction")("MWCMLeaveThreadUpsellDialog.react").__setRef("useMWLSConfirmRemoveFromGroup");function n(a){var b=d("react-compiler-runtime").c(5),e=d("MWChatStateV2.react").useDispatch(),f=c("useShouldShowMessagingEntrypointInCometRoot")("CHAT"),g,h;b[0]!==e||b[1]!==f||b[2]!==a?(g=function(){if(f)return e([{tabConfig:{shouldFocus:!1},threadKey:a,type:d("MWChatStateV2Types").MWChatStateActionsType.UpdateTabByThreadKey,updater:o}])},h=[e,a,f],b[0]=e,b[1]=f,b[2]=a,b[3]=g,b[4]=h):(g=b[3],h=b[4]);return d("Int64Hooks").useCallbackInt64(g,h)}function o(a){return{clientForcedMinimizeWatermark:a.clientForcedMinimizeWatermark,closeWatermark:Date.now(),isExpanded:a.isExpanded,minimizeWatermark:a.minimizeWatermark,openFlyoutWatermark:a.openFlyoutWatermark,openWatermark:a.openWatermark,tabId:a.tabId,tabType:a.tabType}}function a(a,e,g,l,o){var r=d("react-compiler-runtime").c(64),s=(i||(i=c("useReStore")))(),t=i(),u;r[0]!==a.threadType?(u=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType),r[0]=a.threadType,r[1]=u):u=r[1];var v=u,w=d("MWPActor.react").useActor(),x=c("useCommunityFolder")(a),y=n(a.threadKey),z=c("useMWXConfirmationDialog")();u=c("useMWXLazyDialog")(m);var A=u[0];r[2]!==(x==null?void 0:x.fbGroupId)||r[3]!==A||r[4]!==a?(u=function(b,c,d){A({groupId:x==null?void 0:x.fbGroupId,onCancel:d==null?void 0:d(),onLeaveGroup:c,thread:a},q)},r[2]=x==null?void 0:x.fbGroupId,r[3]=A,r[4]=a,r[5]=u):u=r[5];x==null||x.fbGroupId;var B=u;r[6]!==t.tables.participants||r[7]!==a.threadKey?(u=function(){return d("ReQL").fromTableAscending(t.tables.participants).getKeyRange(a.threadKey).filter(p)},r[6]=t.tables.participants,r[7]=a.threadKey,r[8]=u):u=r[8];var C;r[9]!==t||r[10]!==a.threadKey?(C=[t,a.threadKey],r[9]=t,r[10]=a.threadKey,r[11]=C):C=r[11];u=d("ReQLSuspense").useArray(u,C,f.id+":137");r[12]!==a.threadType?(C=d("LSMessagingThreadTypeUtil").isJoinedDiscoverablePublicBroadcastChannel(a.threadType),r[12]=a.threadType,r[13]=C):C=r[13];C=C;var D=d("BroadcastChannelQPL").useLogLeaveChannelFailed(C),E=d("BroadcastChannelQPL").useLogLeaveChannelSuccess(C),F=d("BroadcastChannelQPL").useLogLeaveChannelCanceled(C),G=d("BroadcastChannelQPL").useLogLeaveChannelConfirmClick(C),H;if(r[14]!==w||r[15]!==u[0]||r[16]!==u.length){if(u.length!==1)H=!1;else{var I=u[0];H=(j||(j=d("I64"))).equal(I.contactId,w)}r[14]=w;r[15]=u[0];r[16]=u.length;r[17]=H}else H=r[17];var J=c("useMWPRemoveFromGroup")(a.threadKey),K;r[18]!==w||r[19]!==v||r[20]!==D||r[21]!==J||r[22]!==t||r[23]!==a.threadKey?(b("cr:9761")==null||!v?K=function(){return J(w)["catch"](function(a){D()})}:K=b("cr:9761").createLeaveGroupCallback(t,a.threadKey),r[18]=w,r[19]=v,r[20]=D,r[21]=J,r[22]=t,r[23]=a.threadKey,r[24]=K):K=r[24];r[25]!==a.threadType?(I=d("MWCMThreadTypes.react").isJoinedCMThread(a.threadType),r[25]=a.threadType,r[26]=I):I=r[26];var L=I;r[27]!==a.threadType?(u=d("LSMessagingThreadTypeUtil").isJoinedSocialChannel(a.threadType),r[27]=a.threadType,r[28]=u):u=r[28];var M=u,N=M||C;r[29]!==x?(I=(x==null?void 0:x.enableState)!=null?(j||(j=d("I64"))).equal(x.enableState,(k||(k=d("LSIntEnum"))).ofNumber(c("CommunityMessagingEnableState").DISABLE_REQUESTED)):!1,r[29]=x,r[30]=I):I=r[30];var O=I;r[31]!==L||r[32]!==O||r[33]!==g||r[34]!==a?(u=L&&d("LSThreadBitOffset").has(148,a)&&(!g||O),r[31]=L,r[32]=O,r[33]=g,r[34]=a,r[35]=u):u=r[35];var P=u;r[36]!==w||r[37]!==P||r[38]!==y||r[39]!==s||r[40]!==v||r[41]!==L||r[42]!==O||r[43]!==M||r[44]!==F||r[45]!==G||r[46]!==E||r[47]!==l||r[48]!==K||r[49]!==o||r[50]!==g||r[51]!==e||r[52]!==N||r[53]!==z||r[54]!==B||r[55]!==a.threadKey||r[56]!==H?(C=function(b){var f;if(L)f=g&&!O?{body:h._(/*BTDS*/"You are the last participant in this chat. If you leave this chat, the chat and all of its content will be permanently deleted from the group."),cancel:h._(/*BTDS*/"Cancel"),confirm:h._(/*BTDS*/"Delete Chat"),title:h._(/*BTDS*/"Leave and delete chat?")}:{body:h._(/*BTDS*/"Leaving means that you can't send messages in this chat and won't receive notifications for it. You can rejoin at any time."),cancel:h._(/*BTDS*/"Cancel"),confirm:h._(/*BTDS*/"Leave chat"),title:h._(/*BTDS*/"Leave chat?")};else if(H){var i=v?h._(/*BTDS*/"An admin can add or remove group members. If you leave without choosing an admin, a group member will be selected to be admin."):M?h._(/*BTDS*/"This conversation will be archived and you won't get any messages"):h._(/*BTDS*/"You can choose a new admin from the people listed under Members. If you leave the group without choosing a new admin, the most senior group member will become the admin.");f={body:i,cancel:h._(/*BTDS*/"Cancel"),confirm:M?h._(/*BTDS*/"Leave channel"):h._(/*BTDS*/"Leave Group"),title:h._(/*BTDS*/"Leave without choosing an admin?")}}else f={body:N?h._(/*BTDS*/"This channel will be removed from your chats. You'll need to rejoin to receive new messages."):h._(/*BTDS*/"You will stop receiving messages from this conversation and people will see that you left."),cancel:h._(/*BTDS*/"Cancel"),confirm:N?h._(/*BTDS*/"Leave channel"):h._(/*BTDS*/"Leave Group"),title:N?h._(/*BTDS*/"Leave channel?"):h._(/*BTDS*/"Leave group chat?")};i=P?B:z;return i(f,function(){b();o==null||o();G();c("promiseDone")(K(w));y();var f=d("ReQL").fromTableAscending(s.tables.threads).getKeyRange(a.threadKey).subscribe(function(a,b){b.operation==="delete"&&(E(),f())});if(e){l();return}else return},function(){F(),o==null||o()})},r[36]=w,r[37]=P,r[38]=y,r[39]=s,r[40]=v,r[41]=L,r[42]=O,r[43]=M,r[44]=F,r[45]=G,r[46]=E,r[47]=l,r[48]=K,r[49]=o,r[50]=g,r[51]=e,r[52]=N,r[53]=z,r[54]=B,r[55]=a.threadKey,r[56]=H,r[57]=C):C=r[57];H;K;I=C;r[58]!==L||r[59]!==N?(u=L?h._(/*BTDS*/"Leave chat"):N?h._(/*BTDS*/"Leave channel"):h._(/*BTDS*/"Leave group"),r[58]=L,r[59]=N,r[60]=u):u=r[60];C=u;r[61]!==I||r[62]!==C?(u=[I,C],r[61]=I,r[62]=C,r[63]=u):u=r[63];return u}function p(a){return a.isAdmin===!0}function q(){}g["default"]=a}),226);
__d("useMWLSGroupMembershipMenuQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="10069255396431304"}),null);
__d("useMWNavigateToThreadFromGroupMembership",["CometRelay","FBLogger","LSIntEnum","MAWVerifyThreadCutover","MWPBumpEntityKey","ReQL","cr:874","gkx","promiseDone","react-compiler-runtime","useMWNavigation","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;async function j(a,b,e){if(c("gkx")("8556")){b=await d("MAWVerifyThreadCutover").verifyContactCutoverOrDefaultE2EEWhenReady(Promise.resolve(a),b,e);return b!=null}b=await d("MAWVerifyThreadCutover").verifyThreadCutover(Promise.resolve(a),e);return b}function a(){var a=d("react-compiler-runtime").c(5),e=(i||(i=c("useReStore")))(),f=c("useMWNavigation")(),g=b("cr:874")(),k=d("CometRelay").useRelayEnvironment(),l;a[0]!==g||a[1]!==e||a[2]!==k||a[3]!==f?(l=function(a){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","chat_members_overflow_message"),c("promiseDone")(j(e,k,a),function(b){if(b)c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.contacts).getKeyRange(a)).then(function(a){if(a!=null&&g!=null)return g([a],[]);else{c("FBLogger")("Unable to fetch contact","maw_threads");return}}));else return f.openTabOrInbox({clientThreadKey:void 0,threadKey:a,threadType:(h||(h=d("LSIntEnum"))).ofNumber(1)},"groupMembers")})},a[0]=g,a[1]=e,a[2]=k,a[3]=f,a[4]=l):l=a[4];return l}g.default=a}),98);
__d("useMWPIsThreadMuted",["I64","ServerTime","clearTimeout","react","react-compiler-runtime","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useEffect,k=b.useState;function l(a){var b=Math.min((i||(i=d("I64"))).to_float(a.muteExpireTimeMs),i.to_float(a.muteCallsExpireTimeMs));a=Math.max(i.to_float(a.muteExpireTimeMs),i.to_float(a.muteCallsExpireTimeMs));if(b===-1)return-1;else return a}function m(a){if(a<=-1)return!0;else return a>d("ServerTime").getMillis()}function a(a){var b=d("react-compiler-runtime").c(5),e=l(a);b[0]!==e?(a=function(){return m(e)},b[0]=e,b[1]=a):a=b[1];a=k(a);var f=a[0],g=a[1],h;b[2]!==e?(a=function(){var a=m(e);g(a);var b=e===-1;if(!(a&&!b))return;var f=c("setTimeout")(function(){g(!1)},e-d("ServerTime").getMillis());return function(){c("clearTimeout")(f)}},h=[e,g],b[2]=e,b[3]=a,b[4]=h):(a=b[3],h=b[4]);j(a,h);return f}g["default"]=a}),98);
__d("usePushFDSMultiStepDialogEntryPointPage",["BaseMultiPageEntryPointImpl.react","CometRelay","FDSMultiStepDialogPushPageContext.react","react","react-compiler-runtime","useCometRelayEntrypointContextualEnvironmentProvider"],(function(a,b,c,d,e,f,g){"use strict";var h=["fallback"],i,j=i||(i=d("react"));b=i;b.useCallback;var k=b.useContext,l=b.useTransition;function a(a,b){var e=d("react-compiler-runtime").c(8),f=l(),g=f[0],i=f[1],m=c("useCometRelayEntrypointContextualEnvironmentProvider")(),n=k(d("FDSMultiStepDialogPushPageContext.react").FDSMultiStepDialogPushPageContext);e[0]!==m||e[1]!==a||e[2]!==b||e[3]!==n?(f=function(e,f){if(b==null)return;i(function(){var g=d("CometRelay").loadEntryPoint(m,a,b),i=f!=null?f:{},k=i.fallback;i=babelHelpers.objectWithoutPropertiesLoose(i,h);n(function(){return j.jsx(c("BaseMultiPageEntryPointImpl.react"),{entryPoint:a,environmentProvider:m,fallback:k,loadedEntryPoint:g,otherProps:e,preloadParams:b,usePlaceholder:k!=null})},i)})},e[0]=m,e[1]=a,e[2]=b,e[3]=n,e[4]=f):f=e[4];f=f;var o;e[5]!==g||e[6]!==f?(o=[g,f],e[5]=g,e[6]=f,e[7]=o):o=e[7];return o}g["default"]=a}),98);
__d("usePushPage",["BaseMultiPageEntryPointImpl.react","BaseMultiPageViewContext","FBLogger","react","react-compiler-runtime","useCometRelayEntrypointContextualEnvironmentProvider","usePageEntryPointPrerenderer"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.useContext;function a(a,b,e){var f=d("react-compiler-runtime").c(9);e=e===void 0?"button":e;var g=c("useCometRelayEntrypointContextualEnvironmentProvider")(),h=j(c("BaseMultiPageViewContext"));e=c("usePageEntryPointPrerenderer")(a,b,e);var k=e[0];e=e[1];var l;f[0]!==h||f[1]!==g||f[2]!==k||f[3]!==a||f[4]!==b?(l=function(e,d){d=d===void 0?{}:d;var f=d.fallback,j=d.pageKey;if(h==null)throw c("FBLogger")("BaseMultiPageView").blameToPreviousFrame().mustfixThrow("usePushPage can only be used inside BaseMultiPageView.");if(b==null)return;k(function(d){return h.pushPage(function(){return i.jsx(c("BaseMultiPageEntryPointImpl.react"),{entryPoint:a,environmentProvider:g,fallback:f!=null?f:h.fallback,loadedEntryPoint:d,otherProps:e,placeholderComponent:h.placeholderComponent,preloadParams:b})},{pageKey:j})})},f[0]=h,f[1]=g,f[2]=k,f[3]=a,f[4]=b,f[5]=l):l=f[5];l=l;var m;f[6]!==e||f[7]!==l?(m=[l,e],f[6]=e,f[7]=l,f[8]=m):m=f[8];return m}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("CPXComposerConstants",[],(function(a,b,c,d,e,f){"use strict";a=120;b=68;c=90;d=160;e=10;var g=4;f.THUMBNAIL_WIDTH=a;f.THUMBNAIL_HEIGHT=b;f.REEL_THUMBNAIL_WIDTH=c;f.REEL_THUMBNAIL_HEIGHT=d;f.NUM_OF_THUMBNAILS=e;f.MAX_NUM_THUMBNAILS=g}),66);
__d("CanvasToBlobImpl",["BlobFactory"],(function(a,b,c,d,e,f){function a(a,c){a=atob(a.substr(a.indexOf(",")+1));var d=new Uint8Array(a.length);for(var e=0;e<a.length;e++)d[e]=a.charCodeAt(e);return b("BlobFactory").getBlob([d],{type:c})}e.exports={getBlob:a}}),null);
__d("VideoThumbnail_UNTYPED",["invariant","vulture"],(function(a,b,c,d,e,f,g){a=function(){"use strict";function a(a){this.$1=a}var c=a.prototype;c.getURL=function(){return this.$1};c.getData=function(){b("vulture")("a1B5XUEMmGR-xYeKTjqzsKYluSg="),g(0,4844)};a.addTextToCanvasContext=function(a,c,d,e,f,g,h,i,j){b("vulture")("qikNWy_gjGUk0GFVslGmB8bCVwk=");a.fillStyle=i;a.textAlign=j;a.font=g+"px "+h;i=j==="center"?e+f/2:e;h=1;j=c.split("\n");for(e of j){c="";j="";var k=e.split(" ");for(k of k){j+=k;var l=a.measureText(j).width,m=a.measureText(k).width;if(m>f){c.length>0&&(a.fillText(c,i,d+g*h),h++);m="";var n="";for(var o of k){n+=o;var p=a.measureText(n).width;p>f?(a.fillText(m,i,d+g*h),m=o,n=o,h++):m=n}c=m+" ";j=m+" "}else l>f?(a.fillText(c,i,d+g*h),c=k+" ",j=k+" ",h++):(j+=" ",c=j)}a.fillText(c,i,d+g*h);h++}return a};return a}();e.exports=a}),null);
__d("WebWorker",["invariant","BlobFactory","Bootloader","EventListener","FBLogger","SubscriptionsHandler","TrustedTypesWebWorkerScriptURLPolicy","URI","WebWorkerConfig","XCometFBMultiSiteWebWorkerInitScriptControllerRouteBuilder","XHRRequest","cr:951783","emptyFunction","err","filterObject","getCrossOriginTransport","getWorkerInitScriptSPINParams","gkx","isSameOrigin","justknobx","memoize","nullthrows","performanceNow","recoverableViolation"],(function(a,b,c,d,e,f,g){var h,i,j=a.URL||a.webkitURL,k={remove:b("emptyFunction")},l=function(){"use strict";function c(a){var c=this;this.$2=!1;this.$3=null;this.$4=a;this.__worker=null;this.$5=b("emptyFunction");this.$6=b("emptyFunction");this.$7=[];this.$8=[];this.$9=!1;this.$10=new(b("SubscriptionsHandler"))();this.$1=b("cr:951783")!==null?b("cr:951783")(function(){c.$9||c.terminate()}):k;b("gkx")("20935")&&setTimeout(function(){!c.$9&&!c.isCurrentState("terminated")&&b("recoverableViolation")("WebWorker (resource: "+a.name+") allowCrossPageTransitions must be true on Comet, or you must handle cleaning up your worker.","comet_infra")},1e3);this.$11("constructed")}var d=c.prototype;d.setMessageHandler=function(a){this.$5=a||b("emptyFunction");return this};d.setErrorHandler=function(a){this.$6=a||b("emptyFunction");return this};d.postMessage=function(a,b){this.isCurrentState("constructed")&&g(0,5977);this.isCurrentState("terminated")&&g(0,5978);if(this.isCurrentState("preparing")){this.$7.push(this.postMessage.bind(this,a,b));return this}a={type:"message",message:a};b?this.getInterfaceableWorker().postMessage(a,b):this.getInterfaceableWorker().postMessage(a);return this};d.$12=function(){this.isCurrentState("terminated")||(this.$11("terminated"),this.__worker=null,this.$13(),this.$7=[],this.$8=[],this.$1&&this.$1.remove&&this.$1.remove())};d.terminate=function(){this.isCurrentState("executing")&&this.__worker!=null&&this.__worker.terminate(),this.$12()};d.execute=function(){this.isCurrentState("terminated")&&g(0,5979);if(["preparing","executing"].some(this.isCurrentState,this))return this;this.$11("preparing");c.prepareResource(this.$4,this.$14.bind(this));return this};d.setAllowCrossPageTransition=function(a){b("gkx")("20935")&&!a&&b("recoverableViolation")("allowAcrossPageTransitions must be true because we dont kill these in Comet.","comet_infra");this.$9=a;return this};d.isCurrentState=function(a){c.states.includes(a)||g(0,5980,a);return a===this.$3};d.$14=function(){this.isCurrentState("executing")&&g(0,5981);if(this.isCurrentState("terminated"))return;this.$4.useInitScript&&b("gkx")("21112")||this.$4.sameOriginURL||this.$4.source||g(0,19837,this.$4.name);if(this.$4.useInitScript&&b("gkx")("21112")){var a;a=b("nullthrows")((a=b("XCometFBMultiSiteWebWorkerInitScriptControllerRouteBuilder").buildUri({}).addQueryParams(b("getWorkerInitScriptSPINParams")()))==null?void 0:a.toString());var d=new window.URL(this.$4.url,window.location.href).href;if(d==null)throw b("err")("Can't start up worker without a resource url.");this.__worker=this.constructWorker(a,this.$4.name);this.__worker.postMessage({bundleUrl:d,doNotStartBundle:!0,isDev:!1,resource:this.$4,type:"sr-init"})}else this.$4.sameOriginURL?this.__worker=this.constructWorker(this.$4.sameOriginURL):(this.__worker=this.constructWorker(c.evalWorkerURL),this.getInterfaceableWorker().postMessage(this.$4.source));this.$15("ping",Date.now());if(this.$4.dynamicModules)try{this.$15("defineModules",this.$4.dynamicModules)}catch(a){this.terminate();this.$16("define_error",{message:a.message});throw a}this.$17();this.$11("executing");this.$7.forEach(function(a){return a()});this.$7=[];this.$8.forEach(function(a){return a()});this.$8=[]};d.$13=function(){this.$10.release()};d.$15=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.getInterfaceableWorker().postMessage({type:a,args:c})};d.$16=function(a,d){var e=!(this.$4.useInitScript&&b("gkx")("21112"));c.$16(a,this.$4.name,babelHelpers["extends"]({},d,{cross_page_transition:!!this.$9,state:this.$3}),e)};c.$18=function(a){return Object.keys(b("filterObject")({object_url:a&&c.$19(),data_url:a&&c.$20(),worker:c.isSupported()},function(a){return!!a}))};d.$17=function(){this.$10.addSubscriptions(b("EventListener").listen(this.getInterfaceableWorker(),"message",this.$21.bind(this)),b("EventListener").listen(this.getInterfaceableWorker(),"error",this.$22.bind(this)))};d.$22=function(a){var b=this.$6(a);!b&&!a.defaultPrevented&&this.$16("exception",{message:a.message})};d.$21=function(b){b=b.data;switch(b.type){case"message":this.$5(b.message);break;case"pong":this.$2=!0;this.$16("executed",{dt:Math.floor(b.args[1]-b.args[0]),bytes:this.$4.source?this.$4.source.length:-1});break;case"terminate":this.terminate();break;case"haste-error":this.terminate();this.$16("haste_error",{message:b.message});break;case"console":var c=b.args.shift();["log","error","info","debug","warn"].includes(c)||g(0,5983,c);a.console[c].apply(a.console,b.args);break}};d.$11=function(a){c.states.includes(a)||g(0,5984,a),this.$16("transition",{next_state:a}),this.$3=a};c.prepareResource=function(d,e){e===void 0&&(e=b("emptyFunction"));d.sameOriginURL||d.url||d.source||g(0,5985);!c.isSupported()&&g(0,5986);if(d.sameOriginURL)e();else if(d.url&&b("isSameOrigin")(new(h||(h=b("URI")))(d.url),new(h||(h=b("URI")))(a.location.href)))d.sameOriginURL=d.url,e();else if(d.source)b("justknobx")._("819")&&b("FBLogger")("static_resources").warn("trying to instantiate blob/data Url Worker %s %s",d.name,d.url),c.$23()&&(d.sameOriginURL=c.$24(d.source)),e();else if(b("gkx")("21112")&&d.useInitScript===!0)e();else{b("justknobx")._("819")&&b("FBLogger")("static_resources").warn("trying to instantiate blob/data Url Worker %s %s",d.name,d.url);if(!d.loading){var f=(i||(i=b("performanceNow")))();d.loading=[e];c.$25(d.url,function(a){a?(d.source=a,c.$23()&&(d.sameOriginURL=c.$24(a)),c.$16("prepared",d.name,{dt:Math.floor((i||(i=b("performanceNow")))()-f),bytes:a.length},!1)):c.$16("failed",d.name,{dt:Math.floor((i||(i=b("performanceNow")))()-f),bytes:0},!1),d.loading.forEach(function(a){return a()}),d.loading=!1})}else d.loading.push(e)}return d};c.releaseResource=function(a){a.sameOriginURL.indexOf("blob:")===0&&(j.revokeObjectURL&&j.revokeObjectURL(a.sameOriginURL),a.sameOriginURL=null);return a};c.isSupported=function(){return p};c.isMessageChannelSupported=function(){return c.areTransferablesSupported()&&!!a.MessageChannel};c.areTransferablesSupported=function(){return c.isSupported()&&q()};c.$25=function(a,c){new(b("XHRRequest"))(a).setTransportBuilder(b("getCrossOriginTransport")).setMethod("GET").setResponseHandler(function(a){c(a)}).setErrorHandler(c.bind(null,null)).send()};c.$24=function(a){c.$23()||g(0,5987);if(c.$19()){var d=b("BlobFactory").getBlob([a],{type:"application/javascript"});return j.createObjectURL(d)}if(c.$20())return"data:application/javascript,"+encodeURIComponent(a)};c.$19=function(){return b("BlobFactory").isSupported()&&n()};c.$20=function(){return o()};c.$23=function(){return c.$19()||c.$20()};c.$16=function(a,d,e,f){if(!b("WebWorkerConfig").logging.enabled)return;b("Bootloader").loadModules(["BanzaiLogger"],function(g){g.log(b("WebWorkerConfig").logging.config,babelHelpers["extends"]({},e,{features_array:c.$18(f),event:a,resource:d}))},"WebWorker")};d.constructWorker=function(a,b){return m(a,b)};d.$26=function(a,b){if(this.isCurrentState("preparing")){this.$8.push(this.$26.bind(this,a,b));return}this.getInterfaceableWorker().postMessage({type:"port",message:a},b)};d.createMessageChannel=function(a,b){var c=new MessageChannel();this.$26(a,[c.port2].concat(b||[]));c.port1.start();return c.port1};d.getInterfaceableWorker=function(){return this.__worker};return c}();l.states=["constructed","preparing","executing","terminated"];l.evalWorkerURL=b("WebWorkerConfig").evalWorkerURL;function m(c,d){return new a.Worker(b("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(c),d!=null?{name:d}:{})}var n=b("memoize")(function(){var a,c;if(!j||!j.createObjectURL)return!1;try{a=j.createObjectURL(b("BlobFactory").getBlob([""],{type:"application/javascript"}));var d=m(a);d.terminate();c=!0}catch(a){c=!1}finally{j.revokeObjectURL&&j.revokeObjectURL(a)}return c}),o=b("memoize")(function(){try{var a=m("data:application/javascript,");a.terminate();a=!0}catch(b){a=!1}return a}),p=!!a.Worker,q=b("memoize")(function(){try{var a=m(l.evalWorkerURL),b=new ArrayBuffer(0);a.postMessage({buffer:b},[b]);a.terminate();b=!0}catch(a){b=!1}return b});e.exports=l}),null);
__d("dataURLToBlob",["BlobFactory","CanvasToBlobImpl","CanvasToBlobResource","Promise","WebWorker"],(function(a,b,c,d,e,f,g){var h,i=a.URL||a.webkitURL||{};function e(a,e){if(!i.createObjectURL||!c("BlobFactory").isSupported)return(h||(h=b("Promise"))).reject("Browser doesn't support this feature");if(c("WebWorker").isSupported())return new(h||(h=b("Promise")))(function(b,d){var f=new(c("WebWorker"))(c("CanvasToBlobResource")).setMessageHandler(function(a){b(a),f.terminate()}).setErrorHandler(function(a){d(a.message),f.terminate()}).execute().postMessage({dataURL:a,fileType:e})});else return(h||(h=b("Promise"))).resolve(d("CanvasToBlobImpl").getBlob(a,e))}g["default"]=e}),98);
__d("canvasToBlob",["Promise","dataURLToBlob","promiseDone"],(function(a,b,c,d,e,f,g){var h;function a(a,d,e){return new(h||(h=b("Promise")))(function(b,f){if(a.toBlob)a.toBlob(b,d,e);else{var g=a.toDataURL(d,e);c("promiseDone")(c("dataURLToBlob")(g,d).then(function(a){b(a)},f))}})}g["default"]=a}),98);
__d("CanvasVideoThumbnail",["EventListener","Promise","VideoThumbnail_UNTYPED","canvasToBlob","promiseDone"],(function(a,b,c,d,e,f,g){var h;a=function(a){function d(b,c,d,e,f,g,h){var i;e===void 0&&(e=null);f===void 0&&(f=null);g===void 0&&(g=0);h===void 0&&(h=0);i=a.call(this,null)||this;i.$CanvasVideoThumbnail$p_1=b;i.$CanvasVideoThumbnail$p_2=c;i.$CanvasVideoThumbnail$p_3=d;i.$CanvasVideoThumbnail$p_4=e;i.$CanvasVideoThumbnail$p_5=f;i.$CanvasVideoThumbnail$p_6=g;i.$CanvasVideoThumbnail$p_7=h;i.$CanvasVideoThumbnail$p_8=i.$CanvasVideoThumbnail$p_1.toDataURL("image/jpeg");return i}babelHelpers.inheritsLoose(d,a);var e=d.prototype;e.getCanvas=function(){return this.$CanvasVideoThumbnail$p_1};e.getTime=function(){return this.$CanvasVideoThumbnail$p_3?this.$CanvasVideoThumbnail$p_3:0};e.getURL=function(){this.$CanvasVideoThumbnail$p_8||(this.$CanvasVideoThumbnail$p_8=this.$CanvasVideoThumbnail$p_1.toDataURL("image/jpeg"));return this.$CanvasVideoThumbnail$p_8};e.getData=function(){var a=this,d=document.createElement("canvas"),e=d.getContext("2d"),f=this.$CanvasVideoThumbnail$p_2;return new(h||(h=b("Promise")))(function(b,g){var h=c("EventListener").listen(f,"seeked",function(){h.remove(),a.$CanvasVideoThumbnail$p_9(d,e),c("promiseDone")(c("canvasToBlob")(d,"image/jpeg").then(b,g))});f.currentTime=a.$CanvasVideoThumbnail$p_3})};e.getDataWithText=function(a,d,e,f,g,i,j,k){var l=this,m=document.createElement("canvas"),n=m.getContext("2d"),o=this.$CanvasVideoThumbnail$p_2;return new(h||(h=b("Promise")))(function(b,h){var p=c("EventListener").listen(o,"seeked",function(){p.remove(),n.fillStyle=j,n.textAlign=k,l.$CanvasVideoThumbnail$p_9(m,n),n=c("VideoThumbnail_UNTYPED").addTextToCanvasContext(n,a,d,e,f,g,i,j,k),c("promiseDone")(c("canvasToBlob")(m,"image/jpeg").then(b,h))});o.currentTime=l.$CanvasVideoThumbnail$p_3})};e.$CanvasVideoThumbnail$p_9=function(a,b){var c=this.$CanvasVideoThumbnail$p_2;this.$CanvasVideoThumbnail$p_4||this.$CanvasVideoThumbnail$p_5?(a.width=this.$CanvasVideoThumbnail$p_4?this.$CanvasVideoThumbnail$p_4:c.videoWidth,a.height=this.$CanvasVideoThumbnail$p_5?this.$CanvasVideoThumbnail$p_5:c.videoHeight,this.$CanvasVideoThumbnail$p_10(a,b)):(a.width=c.videoWidth,a.height=c.videoHeight,b.drawImage(c,0,0,a.width,a.height))};e.$CanvasVideoThumbnail$p_10=function(a,b){var c=this.$CanvasVideoThumbnail$p_2,d=this.$CanvasVideoThumbnail$p_6,e=this.$CanvasVideoThumbnail$p_7,f=this.$CanvasVideoThumbnail$p_4?this.$CanvasVideoThumbnail$p_4:a.width,g=this.$CanvasVideoThumbnail$p_5?this.$CanvasVideoThumbnail$p_5:a.height;b.drawImage(c,d,e,f,g,0,0,a.width,a.height)};return d}(c("VideoThumbnail_UNTYPED"));g["default"]=a}),98);
__d("EBBridgedAPI",["IEBAPI"],(function(a,b,c,d,e,f,g){"use strict";b={getContactEpochHead:(a=d("IEBAPI")).makeBridgedApi("getContactEpochHead"),getMessageKeys:a.makeBridgedApi("getMessageKeys"),isEbEnabledEbSwitch:a.makeBridgedApi("isEbEnabledEbSwitch"),messageBulkPointQuery:a.makeBridgedApi("messageBulkPointQuery"),messageRangeQueryForIndexing:a.makeBridgedApi("messageRangeQueryForIndexing")};c=b;g["default"]=c}),98);
__d("HTMLMediaElementReadyStates",[],(function(a,b,c,d,e,f){a={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4};b=a;f["default"]=b}),66);
__d("LSIssueAttachmentsRangeQuery",["LSGetCursor","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[5]=b.syncGroup,c.i64.neq(d[5],void 0)?d[4]=d[5]:d[4]=c.i64.cast([0,1]),d[0]=d[4])})},function(a){return c.storedProcedure(b("LSGetCursor"),d[0]).then(function(a){return a=a,d[2]=a[0],a})},function(e){return c.db.table(17).fetch([[[a[0],a[1]]]]).next().then(function(e,f){var g=e.done;e=e.value;return g?c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[4]=c.i64.cast([0,1]):(e=b.item,d[9]=e.syncGroup,c.i64.neq(d[9],void 0)?d[8]=d[9]:d[8]=c.i64.cast([0,1]),d[4]=d[8])})},function(e){return d[6]=new c.Map(),d[6].set("thread_key",a[0]),d[6].set("media_group",a[1]),d[6].set("max_timestamp_ms",c.i64.cast([2328,1316134911])),d[6].set("cursor",d[2]),d[6].set("sync_group",d[4]),d[6].set("last_loaded_message_id",void 0),d[7]=c.toJSON(d[6]),c.storedProcedure(b("LSIssueNewTask"),"arq",c.i64.cast([0,105]),d[7],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}]):(f=e.item,f.hasMoreBefore?c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[4]=c.i64.cast([0,1]):(e=b.item,d[9]=e.syncGroup,c.i64.neq(d[9],void 0)?d[8]=d[9]:d[8]=c.i64.cast([0,1]),d[4]=d[8])})},function(e){return d[6]=new c.Map(),d[6].set("thread_key",a[0]),d[6].set("media_group",a[1]),d[6].set("max_timestamp_ms",f.minTimestampMs),d[6].set("cursor",d[2]),d[6].set("sync_group",d[4]),d[6].set("last_loaded_message_id",void 0),d[7]=c.toJSON(d[6]),c.storedProcedure(b("LSIssueNewTask"),"arq",c.i64.cast([0,105]),d[7],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}]):c.resolve())})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxIssueAttachmentsRangeQueryStoredProcedure";a.__tables__=["threads","attachments_ranges_v2__generated"];e.exports=a}),null);
__d("LSIssueAttachmentsRangeQueryStoredProcedure",["LSIssueAttachmentsRangeQuery","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSIssueAttachmentsRangeQuery"),e.threadKey,e.mediaGroup);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSOptimisticSendXMAMessageForwardFromSecureThread",["LSArrayGetObjectAt","LSIssueNewTaskWithExtraOperationsAndGetTaskID","LSLocalApplyOptimisticMessage","LSSetMessageDisplayedContentTypes","LSUpdateOptimisticAttachmentPreview"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.storedProcedure(b("LSLocalApplyOptimisticMessage"),a[0],a[1],a[2],a[3],void 0,void 0,void 0,void 0,void 0,void 0,c.i64.cast([0,3]),a[4],void 0,void 0,!0).then(function(a){return a=a,d[0]=a[0],d[1]=a[1],a})},function(e){return d[3]=c.i64.of_int32(a[6].length),c.i64.gt(d[3],c.i64.cast([0,0]))?c.loopAsync(d[3],function(e){return d[4]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[6],d[4]).then(function(a){return a=a,d[5]=a[0],d[6]=a[1],a})},function(e){return d[7]=d[5].get("attachment_fbid"),d[8]=d[5].get("offline_attachment_id"),d[9]=d[5].get("attachment_type"),d[10]=d[5].get("filename"),d[11]=d[5].get("filesize"),d[12]=d[5].get("attachment_index"),d[13]=d[5].get("has_media"),d[14]=d[5].get("has_xma"),d[15]=d[5].get("playable_url"),d[16]=d[5].get("playable_url_mime_type"),d[17]=d[5].get("playable_duration_ms"),d[18]=d[5].get("preview_url"),d[19]=d[5].get("preview_url_mime_type"),d[20]=d[5].get("mini_preview"),d[21]=d[5].get("preview_width"),d[22]=d[5].get("preview_height"),d[23]=d[5].get("xma_layout_type"),d[24]=d[5].get("xmas_template_type"),d[25]=d[5].get("cta1_title"),d[26]=d[5].get("cta2_title"),d[27]=d[5].get("cta3_title"),d[28]=d[5].get("image_url"),d[29]=d[5].get("action_url"),d[30]=d[5].get("title_text"),d[31]=d[5].get("subtitle_text"),d[32]=d[5].get("description_text"),d[33]=d[5].get("source_text"),d[34]=d[5].get("original_file_hash"),d[35]=d[5].get("sound_bite_client_sound_key"),d[36]=d[5].get("sound_bite_visual"),d[37]=d[5].get("ephemeral_media_state"),c.sequence([function(b){return c.forEach(c.filter(c.db.table(16).fetch([[[a[1],d[0],d[7]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&b.messageId===d[0]&&b.attachmentFbid===d[7]&&c.i64.lt(b.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(16).add({threadKey:a[1],messageId:d[0],attachmentFbid:d[7],timestampMs:d[1],offlineAttachmentId:d[8],attachmentType:d[9],filename:d[10],filesize:d[11],attachmentIndex:d[12],hasMedia:d[13],hasXma:d[14],isSharable:!1,playableUrl:d[15],playableUrlMimeType:d[16],playableDurationMs:d[17],previewUrl:d[18],previewUrlMimeType:d[19],miniPreview:d[20],previewWidth:d[21],previewHeight:d[22],xmaLayoutType:d[23],xmasTemplateType:d[24],cta1Title:d[25],cta2Title:d[26],cta3Title:d[27],imageUrl:d[28],actionUrl:d[29],titleText:d[30],subtitleText:d[31],descriptionText:d[32],sourceText:d[33],ephemeralMediaState:d[37],originalFileHash:d[34],authorityLevel:c.i64.cast([0,20])})},function(e){return c.storedProcedure(b("LSSetMessageDisplayedContentTypes"),a[1],d[0],d[1],a[3],!1,!1)},function(e){return c.storedProcedure(b("LSUpdateOptimisticAttachmentPreview"),a[1],d[0],d[7],d[15],void 0,void 0,d[16],d[18],void 0,void 0,d[19],d[21],d[22],d[30])}])}])}):c.resolve()},function(e){return c.storedProcedure(b("LSIssueNewTaskWithExtraOperationsAndGetTaskID"),c.i64.to_string(a[1]),c.i64.cast([0,46]),"",void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,1]),void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[2]=a[0],a})},function(b){return c.db.table(31).add({taskId:d[2],threadKey:a[1],offlineThreadingId:d[0],threadAttributionSource:a[5],sendType:c.i64.cast([0,11]),markThreadRead:!1})},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticSendXMAMessageForwardFromSecureThreadStoredProcedure";a.__tables__=["attachments","messages_optimistic_context"];e.exports=a}),null);
__d("LSOptimisticSendXMAMessageForwardFromSecureThreadStoredProcedure",["LSOptimisticSendXMAMessageForwardFromSecureThread","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticSendXMAMessageForwardFromSecureThread"),e.senderId,e.threadKey,e.threadType,e.text,e.isForwarded,e.source,e.attachments);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWDocumentPreProcess",["WABlobToArrayBuffer","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("WATagsLogger").TAGS(["MAWDocumentPreProcess"]);async function b(a){j.DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["start document preprocess"])));return Promise.resolve({file:a,filename:a.name,plaintext:await d("WABlobToArrayBuffer").blobToArrayBuffer(a),type:"document"})}function c(b){j.DEV(i||(i=babelHelpers.taggedTemplateLiteralLoose(["start optimistic document preprocess"])));var c=a.URL.createObjectURL(b);return Promise.resolve({file:b,filename:b.name,type:"document",url:c})}g.documentPreprocess=b;g.optimisticDocumentPreprocess=c}),98);
__d("MAWMediaRestoreEBRange",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;b=281474976710655;var i={hasMoreBefore:!0,nextTimestampMsBefore:b.toString()},j=function(){function a(){this.$1=new Map()}a.getInstance=function(){if(a.instance!=null)return a.instance;var b=new a();a.instance=b;return b};var b=a.prototype;b.updateRange=function(a,b){this.$1.set((h||(h=d("I64"))).to_string(a),b)};b.getRange=function(a){return(a=this.$1.get((h||(h=d("I64"))).to_string(a)))!=null?a:i};b.resetRange=function(a){this.$1.set((h||(h=d("I64"))).to_string(a),i)};return a}();j.instance=null;function a(){return j.getInstance()}g.getMediaRestoreEBRange=a}),98);
__d("MAWFetchAndPersistMedia",["CurrentUser","EBAPI","EBBridgedAPI","EchoMessage","EchoMessageMediaFieldUtils","I64","LSDatabaseSingleton","LSIntEnum","LSMEBTaskCreationSource","MAWHandleEchoProtobufsRestoreApi","MAWJids","MAWJobDefinitions","MAWMediaRestoreEBRange","MAWMpsGating","MAWMsgType","MAWRestoreMessagesFromEncryptedBackupsDeferred","MAWRestoreProtobufsFromEncryptedBackupsDeferred","MSGDataclassTypes.flow","MpsOverBridge","MpsTypes","ReQL","WAJids","WALogger","WAResultOrError","gkx","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l;b=c("justknobx")._("3177");var m=c("justknobx")._("2538"),n=c("justknobx")._("3916"),o="timeout",p=b;function a(a,b,c,e){var f=d("MAWMediaRestoreEBRange").getMediaRestoreEBRange(),g=f.getRange(b),h=d("WAJids").threadIdForChatJid(a);if(g.hasMoreBefore===!1)return Promise.resolve();e==null||e.addPoint("eb_fetch_and_persist_start",{int:{mediaGalleryGroup:c}});return u({jid:a,nextTimestampMsBefore:g.nextTimestampMsBefore,numMessages:p,threadId:h}).then(function(a){var g=a.error;g!=null&&(e==null||e.addPoint("eb_fetch_and_persist_error",{string:{error:g}}));if(g!==o){f.updateRange(b,{hasMoreBefore:(g=a==null?void 0:a.hasMoreBefore)!=null?g:!1,nextTimestampMsBefore:(j||(j=d("I64"))).to_string((g=a==null?void 0:a.nextMessageTimestampMsBefore)!=null?g:(j||(j=d("I64"))).zero)})}return q(a,h).then(function(){e==null||e.addPoint("eb_fetch_and_persist_end");return t(b,c,{hasMoreBefore:!0})})})}function q(a,b){if(a.success===!1)return Promise.resolve();if(a.echoMessages!=null&&a.echoMessages.length>0)return r(a,b);return a.protobufMessages!=null&&a.protobufMessages.length>0?s(a,b):Promise.resolve()}function r(a,b){var e;e=(e=a==null?void 0:a.echoMessages)!=null?e:[];var f=[d("EchoMessageMediaFieldUtils").AttachmentType.IMAGE,d("EchoMessageMediaFieldUtils").AttachmentType.VIDEO],g=e.filter(function(a){var b;a=d("EchoMessage").decodeEchoMessage(a);return(a==null?void 0:a.contentType)===d("EchoMessage").EchoMessageContentType.MEDIA&&f.includes(a==null||(b=a.mediaData)==null?void 0:b.attachmentType)});e.length!==g.length&&(p=m);return d("MAWRestoreMessagesFromEncryptedBackupsDeferred").call("AdvancedCrypto",d("MAWJobDefinitions").toThreadJidPrimaryId(b),g,(e=a==null?void 0:a.hasMoreBefore)!=null?e:!1,void 0,(b=a==null?void 0:a.hasMoreAfter)!=null?b:!1,void 0,(g=a==null?void 0:a.isPointQuery)!=null?g:!1,a==null?void 0:a.requestId,a==null?void 0:a.referenceTimestamp,c("LSMEBTaskCreationSource").MEDIA_GALLERY_RESTORE).catch(function(a){d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["MediaPersist Echo error: ",""])),a)})}function s(a,b){var e,f=d("MAWJids").toUserJid(c("CurrentUser").getAccountID());e=(e=a==null?void 0:a.protobufMessages)!=null?e:[];var g=[d("MAWMsgType").MSG_TYPE.IMAGE,d("MAWMsgType").MSG_TYPE.VIDEO],h=e.filter(function(a){a=d("MAWHandleEchoProtobufsRestoreApi").decodeDecryptedMessageProtobuf(a,f,void 0,new Set(),new Set(),new Map(),new Map(),new Map(),!0);return g.includes(a.msgType)});e.length!==h.length&&(p=m);return d("MAWRestoreProtobufsFromEncryptedBackupsDeferred").call("AdvancedCrypto",d("MAWJobDefinitions").toThreadJidPrimaryId(b),h,(e=a==null?void 0:a.hasMoreBefore)!=null?e:!1,void 0,(b=a==null?void 0:a.hasMoreAfter)!=null?b:!1,void 0,(h=a==null?void 0:a.isPointQuery)!=null?h:!1,a==null?void 0:a.requestId,a==null?void 0:a.referenceTimestamp,void 0,void 0,(j||(j=d("I64"))).of_int32(c("LSMEBTaskCreationSource").MEDIA_GALLERY_RESTORE)).catch(function(a){d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["MediaPersist Protobuf error: ",""])),a)})}async function t(a,b,c){var e=await (k||(k=d("LSDatabaseSingleton"))).LSDatabaseSingleton;return e.runInTransaction(async function(f){var g=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.attachments_ranges_v2__generated).getKeyRange(a).filter(function(a){return(j||(j=d("I64"))).equal(a.mediaGroup,(l||(l=d("LSIntEnum"))).ofNumber(b))}));if(g==null)return;var h=babelHelpers.extends({},g,c);return f.attachments_ranges_v2__generated.upsert([g.threadKey,g.mediaGroup,g.minTimestampMs],h)},"readwrite","ui",void 0,f.id+":233")}async function u(a){var b,e=a.jid,f=a.nextTimestampMsBefore,g=a.numMessages;a=a.threadId;var h;d("MAWMpsGating").isSearchOnMpsEnabled()||d("MAWMpsGating").isFullMpsEnabled()?h=d("MpsOverBridge").mps().loadMessages({config:{persistToReverb:"no-persist",shouldFetchSupplementals:!1,shouldFetchTags:!0,shouldIgnoreLocalOnly:!0,strategy:"remote-only",tagsFilter:new Set([d("MSGDataclassTypes.flow").MpsMessageTag.Photo,d("MSGDataclassTypes.flow").MpsMessageTag.Video])},debug:{purpose:"MAWFetchAndPersistMedia"},direction:"desc",from:[d("MpsTypes").toTimestamp(Number(f)),null],numMessages:g,threadId:d("MpsTypes").toThreadId(e)}).then(function(a){var b,e;if(a.success===!1)return a;var g=a.value.messages.map(d("MAWJobDefinitions").mpsMessageToEncryptedBackupsMessage);b=(b=a.value.cursorInfo.endCursor)==null?void 0:b[0];e=(e=a.value.cursorInfo.startCursor)==null?void 0:e[0];return d("WAResultOrError").makeResult({echoMessages:[],hasMoreAfter:a.value.cursorInfo.hasPrevious,hasMoreBefore:a.value.cursorInfo.hasNext,isPointQuery:!1,mpsMessageQuery:void 0,nextMessageTimestampMsAfter:e==null?void 0:(j||(j=d("I64"))).of_float(e),nextMessageTimestampMsBefore:b==null?void 0:(j||(j=d("I64"))).of_float(b),protobufMessages:g,referenceTimestamp:f,requestId:void 0,taskSource:c("LSMEBTaskCreationSource").MEDIA_GALLERY_RESTORE})}):h=c("gkx")("5431")?c("EBBridgedAPI").messageRangeQueryForIndexing({chatJid:e,direction:"before",numMessages:g,sortOrderMs:f,source:c("LSMEBTaskCreationSource").MEDIA_GALLERY_RESTORE}):c("EBAPI").messageRangeQueryForIndexing({chatJid:e,direction:"before",numMessages:g,sortOrderMs:f,source:c("LSMEBTaskCreationSource").MEDIA_GALLERY_RESTORE});var i=null;h=await Promise.race([h,new Promise(function(a){i=window.setTimeout(function(){return a(d("WAResultOrError").makeError(o))},n)})]);window.clearTimeout(i);if(h.success===!1)return h;h=h.value;b=(j||(j=d("I64"))).to_string((b=h==null?void 0:h.nextMessageTimestampMsBefore)!=null?b:(j||(j=d("I64"))).zero);return(h==null?void 0:h.referenceTimestamp)===b?g===m?d("WAResultOrError").makeError("Retried with max pageSize: "+m+". Still stuck"):u({jid:e,nextTimestampMsBefore:b,numMessages:m,threadId:a}):h}g.MAWFetchAndPersistMedia=a;g.updateLocalAttachmentsRange=t}),98);
__d("MAWFetchXMABlob",["FBLogger","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var d=a.descriptionForLogging,e=a.url,f=a.xmaContentType;return e==null||e===""?(h||(h=b("Promise"))).resolve():window.fetch(e).then(function(a){return a.blob()})["catch"](function(a){c("FBLogger")("messenger_web_sharing").mustfix("Error fetching url in xma share from %s, with XMA content type %s and error %s",d,f,a);return(h||(h=b("Promise"))).resolve()})}g.fetchBlob=a}),98);
__d("MAWFetchXMADataUtils",["FBLogger","LSXmaContentType","MAWFetchXMABlob","MAWGetImageSpec","MAWParseXMAFBConfig","WAArmadilloXMA.pb","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h={failed_to_fetch_blob_for_xma_share:"Failed to fetch blob xma data for MAWShareAttachent",failed_to_fetch_json_for_xma_share:"Failed execute MAWShareAttachment_LinkPreviewQuery for MAWShareAttachent",failed_to_parse_json_for_xma_share:"Failed to fetch blob xma data for MAWShareAttachent"};function a(a){var b=Object.entries(c("LSXmaContentType")).find(function(b){var c=b[0];b=b[1];return a===b&&d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE[c]!=null});b=b!=null?d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE[b[0]]:void 0;if(b===void 0)return void 0;if(!d("MAWParseXMAFBConfig").isFBSupportedTargetType({fbTargetType:b,silentExposure:!0})){c("FBLogger")("messenger_web_sharing").mustfix("Unsupported XMA Target Type in sending path: "+b);return d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE}return b}async function b(a,b){var c=a.favicon_blob,e=a.header_image_blob,f=a.overlayIconGlyph;a=a.preview_blob;a=a==null?void 0:new File([a],"preview",{type:a.type});c=c==null?void 0:new File([c],"favicon",{type:c.type});e=e==null?void 0:new File([e],"header",{type:e.type});d("sendToSentQPLLogger").markSendToSentPoint(b,"preview_favicon_spec_start");f=f===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.PRIVATE?Promise.resolve({height:2,width:2}):a!=null?d("MAWGetImageSpec").getImageSpec_DEPRECATED(a):Promise.resolve();var g=c!=null?d("MAWGetImageSpec").getImageSpec_DEPRECATED(c):Promise.resolve(),h=e!=null?d("MAWGetImageSpec").getImageSpec_DEPRECATED(e):Promise.resolve();f=await Promise.all([f,g,h]);g=f[0];h=f[1];f=f[2];d("sendToSentQPLLogger").markSendToSentPoint(b,"preview_favicon_spec_ready");b=a==null||g==null?void 0:{file:a,height:g.height,width:g.width};a=c==null||h==null?void 0:{file:c,height:h.height,width:h.width};g=e==null||f==null?void 0:{file:e,height:f.height,width:f.width};return{faviconFileArgs:a,headerImageFileArgs:g,previewFileArgs:b}}async function e(a,b,e,f,g,i){a=await Promise.all([[(a==null?void 0:a.startsWith("ls"))===!0?null:a,"favicon"],[b,"image"],[e,"preview"],[f,"header_image"]].map(function(a){return d("MAWFetchXMABlob").fetchBlob({descriptionForLogging:"MAWFetchXMAData_"+a[1],url:a[0],xmaContentType:i}).then(function(a){return a!=null?a:void 0})})).catch(function(a){g.forEach(function(a){d("sendToSentQPLLogger").markSendToSentFail(a,"failed_to_fetch_blob_for_xma_share")});c("FBLogger")("messenger_web_sharing").catching(a).mustfix(h.failed_to_fetch_blob_for_xma_share);return[void 0,void 0,void 0,void 0]});b=a[0];e=a[1];f=a[2];a=a[3];return[b,e,f,a]}g.XMA_DATA_ERRORS=h;g.convertXmaContentTypeToMessageType=a;g.makeXMAFileArgs=b;g.getPreviewBlobs=e}),98);
__d("MAWFetchXMAData_fetchXmaPreviewDataQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9840669832713841"}),null);
__d("MAWFetchXMAData_fetchXmaPreviewDataQuery.graphql",["MAWFetchXMAData_fetchXmaPreviewDataQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"url"}],c=[{alias:null,args:[{fields:[{kind:"Variable",name:"url",variableName:"url"}],kind:"ObjectValue",name:"params"}],concreteType:"XFBXMAPreviewData",kind:"LinkedField",name:"xma_preview_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_receiver_fetch_supported",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_public",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"post_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"default_cta_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"header_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtitle_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"xma_content_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"favicon_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"header_image_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"preview_url",storageKey:null},{alias:null,args:null,concreteType:"XFBXMAPreviewDataCtaDataConnection",kind:"LinkedField",name:"cta_data",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBXMACtaData",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"cta_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cta_action_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cta_native_url",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MAWFetchXMAData_fetchXmaPreviewDataQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MAWFetchXMAData_fetchXmaPreviewDataQuery",selections:c},params:{id:b("MAWFetchXMAData_fetchXmaPreviewDataQuery_facebookRelayOperation"),metadata:{},name:"MAWFetchXMAData_fetchXmaPreviewDataQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MAWUnshimUrl",["CometLinkShimUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a==null)return void 0;var b=d("CometLinkShimUtils").getLinkShimInfo(a,void 0,void 0,void 0,void 0,!0);return!b.shimmed?a:b.unshimmedHref}g.unshimUrl=a}),98);
__d("MAWFetchXMAData",["fbt","CometRelay","ConstUriUtils","FBLogger","LSXmaContentType","MAWFetchXMADataUtils","MAWFetchXMAData_fetchXmaPreviewDataQuery.graphql","MAWUnshimUrl","MSGDataclassTypes.flow","WAArmadilloXMA.pb","getJSEnumSafe","isFacebookURI","isStringNullOrEmpty","justknobx","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g,h){"use strict";var i;function j(a,b){b.forEach(function(a){d("sendToSentQPLLogger").addSendToSentAnnotations(a,{string:{xma_data_result:"private"}})});return{defaultCTA:{actionUrl:d("MAWUnshimUrl").unshimUrl(a),buttonType:(b=d("WAArmadilloXMA.pb")).EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE,nativeUrl:d("MAWUnshimUrl").unshimUrl(a),title:h._(/*BTDS*/"_j[\"Private post\",\"599d20d959e0009397c73fb9edb426dd\",1]").toString()},linkType:"internal",overlayIconGlyph:b.EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.PRIVATE,preview_blob:void 0,title_text:h._(/*BTDS*/"Facebook").toString(),transportLayerForLogging:"sender_copy",xma_message_type:b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE,xmaTargetTypeForLogging:b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE}}function k(a,c){return d("CometRelay").fetchQuery(a,i!==void 0?i:i=b("MAWFetchXMAData_fetchXmaPreviewDataQuery.graphql"),{url:c}).toPromise()}async function l(a,b,e){a=await k(a,b).catch(function(a){e.forEach(function(b){d("sendToSentQPLLogger").markSendToSentFail(b,"failed_to_fetch_json_for_xma_share",a)}),c("FBLogger")("messenger_web_sharing").catching(a).mustfix(d("MAWFetchXMADataUtils").XMA_DATA_ERRORS.failed_to_fetch_json_for_xma_share)});e.forEach(function(a){d("sendToSentQPLLogger").markSendToSentPoint(a,"fetch_json_for_xma_share_end")});a=a==null?void 0:a.xma_preview_data;if(a==null){e.forEach(function(a){d("sendToSentQPLLogger").addSendToSentAnnotations(a,{string:{xma_data_result:"empty"}})});return j(b,e)}if(a.is_public!==!0)return j(b,e);e.forEach(function(a){d("sendToSentQPLLogger").addSendToSentAnnotations(a,{string:{xma_data_result:"public"}})});b={defaultCTA:{actionUrl:d("MAWUnshimUrl").unshimUrl(b),buttonType:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE,nativeUrl:d("MAWUnshimUrl").unshimUrl(b),title:(b=a.default_cta_title)!=null?b:void 0},linkType:"internal",title_text:(b=(b=a.title_text)!=null?b:a.header_title)!=null?b:void 0};var f=c("getJSEnumSafe")(c("LSXmaContentType"),a.xma_content_type),g=d("MAWFetchXMADataUtils").convertXmaContentTypeToMessageType(f),h=a.post_id,i=a.is_receiver_fetch_supported===!0;if(i&&h!=null){i={__typename:"XMSGMsgrXmaContentRefDataclass",action_type:d("MSGDataclassTypes.flow").XmsgMsgrXmaActionType.Share,content_type:d("MSGDataclassTypes.flow").XmsgMsgrReceiverFetchContentType.Statusupdate,fetch_params:{__typename:"XMSGMsgrReceiverFetchXmaStatusUpdateFetchParams",post_id:h},xma_content_type:c("getJSEnumSafe")(c("LSXmaContentType"),a.xma_content_type),xma_layout_type:d("MSGDataclassTypes.flow").XmsgMsgrReceiverFetchXmaLayoutType.Single};return babelHelpers.extends({},b,{contentRef:JSON.stringify(i),transportLayerForLogging:"receiver_fetch",xma_message_type:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH,xmaTargetTypeForLogging:g})}h=await d("MAWFetchXMADataUtils").getPreviewBlobs(a.favicon_url,null,a.preview_url,a.header_image_url,e,f);i=h[0];h[1];f=h[2];h=h[3];return babelHelpers.extends({},b,{ctas:(b=a.cta_data)==null||(b=b.nodes)==null?void 0:b.map(function(a){var b=d("MAWUnshimUrl").unshimUrl(c("isStringNullOrEmpty")(a.cta_action_url)?void 0:a.cta_action_url),e=d("MAWUnshimUrl").unshimUrl(c("isStringNullOrEmpty")(a.cta_native_url)?void 0:a.cta_native_url);return{actionUrl:b,buttonType:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE,ctaType:"xma_web_url",nativeUrl:e,title:(b=a.cta_title)!=null?b:void 0}}),favicon_blob:i!=null?i:void 0,header_image_blob:h!=null?h:void 0,header_title:c("isStringNullOrEmpty")(a.title_text)?void 0:(b=a.header_title)!=null?b:void 0,preview_blob:f!=null?f:void 0,subtitle_text:(i=a.subtitle_text)!=null?i:void 0,transportLayerForLogging:"sender_copy",xma_message_type:g,xmaTargetTypeForLogging:g})}function a(a,b,e){var f,g=d("ConstUriUtils").getUri(b);g=g==null||(f=g.setSubDomain("www"))==null?void 0:f.toString();if(g==null)return Promise.resolve({linkType:"unknown",transportLayerForLogging:"sender_copy",xmaTargetTypeForLogging:null});b=d("MAWUnshimUrl").unshimUrl(b);if(b!=null){b=d("ConstUriUtils").getUri(b);if(b!=null&&!c("isFacebookURI")(b)&&c("justknobx")._("5006"))return Promise.resolve({linkType:"external",transportLayerForLogging:"sender_copy",xmaTargetTypeForLogging:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE})}e.forEach(function(a){d("sendToSentQPLLogger").markSendToSentPoint(a,"fetch_json_for_xma_share_start")});return l(a,g,e)}g.fetchXMAData=a}),226);
__d("MAWSecureAttachmentGroupingUtils",["I64","LSIntEnum","MAWSendFileMsgTypes","MessagingAttachmentType","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){a=a.reduce(function(a,b){(h||(h=d("I64"))).equal(b.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))?a.mediaStagingsImage.push(b):a.mediaStagingsOther.push(b);return a},{mediaStagingsImage:[],mediaStagingsOther:[]});var b=a.mediaStagingsImage;a=a.mediaStagingsOther;return[].concat(b,a)}function b(a){var b=new Map();a=a.filter(function(a){return(h||(h=d("I64"))).equal(a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))});var e=a.length;if(e>1){var f=c("uuidv4")();a.forEach(function(a,c){b.set(d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(a.offlineAttachmentId),{groupId:f,groupIndex:c,groupSize:e})})}return b}function e(a){var b=new Map(),d=a.length;if(d>1){var e=c("uuidv4")();a.forEach(function(a,c){b.set(a,{groupId:e,groupIndex:c,groupSize:d})})}return b}g.orderMediaStagingsForGrouping=a;g.generateMediaGroupMetadataForMediaStagings=b;g.generateMediaGroupMetadataForMessageIds=e}),98);
__d("MAWForwardMessage",["MAWBridgeSendAndReceive","MAWCreateOneToOneThread","MAWExternalId","MAWGetEphemeralSettings","MAWGetProtocolMsgIdByMsgIdInUI","MAWMessageSendReporter","MAWMiActOnActThreadReady","MAWSecureAttachmentGroupingUtils","MAWThreadId","WAResultOrError","qpl"],(function(a,b,c,d,e,f,g){"use strict";async function h(a,b,c,e){var f=await d("MAWThreadId").isSecureThreadKey(a.tables,b);if(!f){f=await d("MAWCreateOneToOneThread").call(a,b,void 0,"MAWForwardMessage",e);e=f.jid;return c(e,!0)}f=await d("MAWMiActOnActThreadReady").waitForACTThreadReady(a.tables,b,"MAWForwardMessage");e=f.chatJid;return c(e,!1)}function a(a,b,c,d,e,f){return i(a,b,c,d,e,void 0,f)}async function b(a,b,c,e,f){var g=d("MAWSecureAttachmentGroupingUtils").generateMediaGroupMetadataForMessageIds(c);await Promise.allSettled([c.map(function(c){return i(a,b,c,e,f,g.get(c))})])}function i(a,b,e,f,g,i,j){var k=d("MAWExternalId").generateExternalId();return h(a,b,function(h,l){return d("MAWGetProtocolMsgIdByMsgIdInUI").getProtocolMsgIdByMsgIdUI(e).then(function(e){if(e!=null)return d("MAWGetEphemeralSettings").getEphemeralSetting(h,b).then(function(b){b=d("MAWBridgeSendAndReceive").sendAndReceive("backend","forwardMsg",{args:{args:{mediaGroupMetadata:i,source:f},chatJid:h,ephemeralSetting:b!=null?b:void 0,externalId:k,isFirstMsg:l,protocolMsgId:e,textWithSubstitutions:j},qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:g});return d("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:h,externalId:k},b,{qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:g},a)});else return d("WAResultOrError").makeResult({description:"unexpected null protocolMsgId",messageType:"fixMe"})})},g)}g.maybeCreateNewThreadAndCallback=h;g.forwardMessage=a;g.forwardMessageBatch=b}),98);
__d("MAWForwardMessageFromSecureThread.react",["FBLogger","I64","LSFactory","LSHotEmojiSize","LSInsertNewMediaSendStoredProcedure","LSIntEnum","LSLocalApplyOptimisticMessageWithAttachmentsStoredProcedure","LSMailboxType","LSMarkSubJobCompletedV2StoredProcedure","LSOptimisticSendMessageV2StoredProcedure","LSOptimisticSendXMAMessageForwardFromSecureThreadStoredProcedure","LSShape","LSVec","MAWBridgeSendAndReceive","MAWDbMedia","MAWMpsGating","MWPComposerMediaUploadUtil","MWPOpenComposerUtils","MessagePowerUp","MessagingAttachmentType","OfflineThreadingId","ReQL","WAHashUtils","cr:2472","cr:332","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(){return c("gkx")("11351")||d("MAWMpsGating").isFullMpsEnabled()};function k(a,b,c){return{action_url:void 0,attachment_fbid:b,attachment_index:(h||(h=d("I64"))).zero,attachment_type:a.attachmentType,cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,description_text:void 0,filename:a.filename,filesize:void 0,has_media:!0,has_xma:!1,image_url:void 0,mini_preview:void 0,offline_attachment_id:b,original_file_hash:void 0,playable_duration_ms:a.playableDurationMs,playable_url:URL.createObjectURL(c),playable_url_mime_type:c.type,preview_height:void 0,preview_url:void 0,preview_url_mime_type:void 0,preview_width:void 0,source_text:void 0,subtitle_text:void 0,title_text:void 0,xma_layout_type:void 0,xmas_template_type:void 0}}function l(a,b,c,e){var f;return{action_url:(f=b==null?void 0:b.actionUrl)!=null?f:b==null?void 0:b.nativeUrl,attachment_fbid:c,attachment_index:(h||(h=d("I64"))).zero,attachment_type:a.attachmentType,cta1_title:a.cta1Title,cta2_title:a.cta2Title,cta3_title:a.cta3Title,description_text:a.descriptionText,filename:a.filename,filesize:a.filesize,has_media:!1,has_xma:!0,image_url:void 0,mini_preview:void 0,offline_attachment_id:c,original_file_hash:void 0,playable_duration_ms:void 0,playable_url:e!=null?URL.createObjectURL(e):void 0,playable_url_mime_type:e==null?void 0:e.type,preview_height:void 0,preview_url:e!=null?URL.createObjectURL(e):void 0,preview_url_mime_type:e==null?void 0:e.type,preview_width:void 0,source_text:a.sourceText,subtitle_text:a.subtitleText,title_text:a.titleText,xma_layout_type:a.xmaLayoutType,xmas_template_type:a.xmasTemplateType}}function m(a,b,e,f,g,h,i,j){j=c("LSFactory")(j);return c("LSOptimisticSendXMAMessageForwardFromSecureThreadStoredProcedure")(j,{attachments:c("LSVec").ofArray([d("LSShape").ofRecord(h)]),isForwarded:g,senderId:a,source:i,text:f!=null?f:void 0,threadKey:b,threadType:e}).then(function(){return Promise.resolve()})}function n(a,b){return a==null||b==null?void 0:{amplitudes:b.split(",").map(parseFloat),sampling_freq:a}}function o(a,b,e,g,j,k,l,m,o){var p=c("LSFactory")(m);return c("LSLocalApplyOptimisticMessageWithAttachmentsStoredProcedure")(p,{attachments:c("LSVec").ofArray([d("LSShape").ofRecord(b)]),isForwarded:k,senderId:l,threadKey:j,threadType:g}).then(function(a){var b=a[0];a[1];return m.messages_optimistic_context.add({externalAttachmentUrl:void 0,initiatingSource:void 0,markThreadRead:!1,messageId:void 0,offlineThreadingId:b,platformRef:void 0,platformToken:void 0,replySourceId:void 0,replySourceType:void 0,sendType:void 0,skipUrlPreviewGen:void 0,taskId:(h||(h=d("I64"))).of_string(b),threadAttributionSource:o,threadKey:j}).then(function(){return Promise.resolve(b)})}).then(function(a){var e=b.attachment_fbid;return c("LSInsertNewMediaSendStoredProcedure")(p,{attachmentType:b.attachment_type,inMessageIndex:(h||(h=d("I64"))).zero,isSecure:!1,offlineAttachmentId:e,offlineThreadingId:a,sendByServer:!1,shouldTranscode:!1,useDoublePhase:!1}).then(function(){return Promise.resolve([a,e])})}).then(function(g){var j=g[0],k=g[1];g=function(b,e){if(e==null||e.length===0)return;c("promiseDone")(a.runInTransaction(function(a){var b=c("LSFactory")(a);return c("LSMarkSubJobCompletedV2StoredProcedure")(b,{fbid:(h||(h=d("I64"))).of_string(e),offlineAttachmentId:k}).then(function(){return d("MWPOpenComposerUtils").resumeSendJob(b,j)})},"readwrite",void 0,void 0,f.id+":226"))};return d("MWPComposerMediaUploadUtil").startUpload(void 0,void 0,g,void 0,(h||(h=d("I64"))).equal(b.attachment_type,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO)),[e],[k],void 0,void 0,n(b.sampling_frequency_hz,b.waveform_data),void 0,void 0)})}async function a(a,e,g,p,q,r,s,t,u){if(r!=null){var v=r.attachmentType;if(!((h||(h=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO))||(h||(h=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))||(h||(h=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))||(h||(h=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE))||(h||(h=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE))||(h||(h=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA))))throw c("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding this type");var w=null;if(!(h||(h=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA))){isFinite(r.attachmentFbid)?w=await d("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByMediaId",{description:"MAWForwardMessageFromSecureThread",mediaId:d("MAWDbMedia").convertNumberToMediaId(Number.parseInt(r.attachmentFbid,10))}):w=await d("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByHashedPlaintextHash",{description:"MAWForwardMessageFromSecureThread",plaintextHash:d("WAHashUtils").stringToPlaintextHash(r.attachmentFbid)}).then(function(a){b("cr:332")!=null&&void b("cr:332").runBlobReadAndCompareResult({fileName:r.attachmentFbid,idbBlob:a});return a});if(w==null)return}await a.runInTransaction(function(f){switch(!0){case(h||(h=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO)):if(w==null)throw c("FBLogger")("messenger_web_sharing").mustfixThrow("Blob can not be null for MessagingAttachmentType.AUDIO");var x=new File([w],"mediaForwardedFromSecureThread",{type:w.type}),y=d("OfflineThreadingId").createOfflineThreadingID();y=d("MWPComposerMediaUploadUtil").getAudioAttachment(y,x,(h||(h=d("I64"))).to_int32((y=r.playableDurationMs)!=null?y:(h||(h=d("I64"))).zero)/1e3,n(r.samplingFrequencyHz!=null?(h||(h=d("I64"))).to_int32(r.samplingFrequencyHz):void 0,r.waveformData));return o(a,y,x,g,e,q,s,f,t);case(h||(h=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA)):return d("ReQL").firstAsync(d("ReQL").fromTableDescending(f.attachment_ctas).getKeyRange((y=r.defaultCtaId)!=null?y:(h||(h=d("I64"))).zero)).then(function(a){var e,f=r.xmaPreviewFbid;if(f==null){c("FBLogger")("messenger_web_sharing").mustfix("XMA preview fbid is null when forwarding XMA");return Promise.resolve([a,void 0])}if(j())e=d("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByHashedPlaintextHash",{description:"MAWForwardMessageFromSecureThread",plaintextHash:d("WAHashUtils").stringToPlaintextHash(f)}).then(function(a){b("cr:332")!=null&&void b("cr:332").runBlobReadAndCompareResult({fileName:r.attachmentFbid,idbBlob:a});return a});else if(c("gkx")("7858"))isFinite(r.xmaPreviewFbid)?(c("FBLogger")("messenger_web_sharing").warn("XMA preview fbid is not a plaintextHash when forwarding XMA"),e=d("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByMediaId",{description:"MAWForwardMessageFromSecureThread",mediaId:d("MAWDbMedia").convertNumberToMediaId(Number.parseInt(f,10))})):e=d("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByHashedPlaintextHash",{description:"MAWForwardMessageFromSecureThread",plaintextHash:d("WAHashUtils").stringToPlaintextHash(f)}).then(function(a){b("cr:332")!=null&&void b("cr:332").runBlobReadAndCompareResult({fileName:r.attachmentFbid,idbBlob:a});return a});else try{e=d("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByMediaId",{description:"MAWForwardMessageFromSecureThread",mediaId:d("MAWDbMedia").convertNumberToMediaId(Number.parseInt(f,10))})}catch(b){c("FBLogger")("messenger_web_sharing").mustfix("XMA preview fbid is not a valid mediaId when forwarding XMA %s",b);return Promise.resolve([a,void 0])}return e.then(function(b){return Promise.resolve([a,b])}).catch(function(b){c("FBLogger")("messenger_web_sharing").catching(b).warn("Unable to getBlobDataUrlByXMAId, from MAWForwardMessageFromSecureThread");return Promise.resolve([a,void 0])})}).then(function(a){var c=a[0];a=a[1];var h=null;a!=null&&(h=new File([a],"xmaForwardedFromSecureThread",{type:a.type}));a=d("OfflineThreadingId").createOfflineThreadingID();c=l(r,c,a,h);a=p.text;h=b("cr:2472")==null||a==null?a:b("cr:2472").unvault(a);return m(s,e,g,u!=null?u:h,q,c,t,f)});case(h||(h=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE)):case(h||(h=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)):case(h||(h=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)):case(h||(h=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE)):if(w==null)throw c("FBLogger")("messenger_web_sharing").mustfixThrow("Blob can not be null for MessagingAttachmentType.AUDIO");y=new File([w],(x=r.filename)!=null?x:"mediaForwardedFromSecureThread",{type:w.type});x=d("OfflineThreadingId").createOfflineThreadingID();x=k(r,x,y);return o(a,x,y,g,e,q,s,f,t);default:throw c("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding this type")}},"readwrite",void 0,void 0,f.id+":341")}else{var x=p.text;if(x==null)throw c("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding this type");var y=b("cr:2472")==null?x:b("cr:2472").unvault(x),z=y==="\ud83d\udc4d"&&p.hotEmojiSize!=null&&(h||(h=d("I64"))).equal(p.hotEmojiSize,(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL)),A=z?(h||(h=d("I64"))).of_string("369239263222822"):void 0;await a.runInTransaction(function(a){return c("LSOptimisticSendMessageV2StoredProcedure")(c("LSFactory")(a),{extraSendMessageParams:d("LSShape").ofRecord({calculate_denormalizations:!1,is_forwarded:q,mark_read:!1,power_up_style:(i||(i=d("LSIntEnum"))).ofNumber(c("MessagePowerUp").NONE),source:t,sticker_id:A}),mailboxType:i.ofNumber(c("LSMailboxType").MESSENGER),senderId:s,text:z?void 0:u!=null?u:y,threadKey:e,threadType:g})},"readwrite",void 0,void 0,f.id+":586")}}g.getMediaAttachment=k;g.uploadAndSendMediaToOpenThread=o;g.forwardMessage=a}),98);
__d("VideoFrameBuffer",["HTMLMediaElementReadyStates"],(function(a,b,c,d,e,f,g){a=function(){function a(a,b,c,d,e,f,g){d===void 0&&(d=null),e===void 0&&(e=null),f===void 0&&(f=null),g===void 0&&(g=null),this.$2=b,this.$1=a,this.$3=c||"contain",this.$6=d,this.$7=e,this.$8=f,this.$9=g}var b=a.prototype;b.updateFrameBuffer=function(){this.$4&&(this.$1.width=this.$4,this.$4=null);this.$5&&(this.$1.height=this.$5,this.$5=null);if(this.$2.readyState<c("HTMLMediaElementReadyStates").HAVE_CURRENT_DATA)return;var a=this.$1.clientWidth||this.$1.width,b=this.$1.clientHeight||this.$1.height,d=a,e=b,f=this.$2.videoWidth/this.$2.videoHeight,g=d/e;this.$3==="cover"&&(g*=-1,f*=-1);g>f?d=e*f:g<f&&(e=d/f);g=this.$1.getContext("2d");if(!(g instanceof window.CanvasRenderingContext2D))return;try{if(this.$6||this.$7){g.drawImage(this.$2,(f=this.$8)!=null?f:0,(f=this.$9)!=null?f:0,(f=this.$6)!=null?f:a,(f=this.$7)!=null?f:b,0,0,a,b)}else g.drawImage(this.$2,(a-d)/2,(b-e)/2,d,e)}catch(a){if(a.name!=="NS_ERROR_NOT_AVAILABLE")throw a}};b.getDOMNode=function(){return this.$1};b.updateDimensions=function(a,b){this.$4=a,this.$5=b};return a}();g["default"]=a}),98);
__d("generateVideoThumbnails",["CPXComposerConstants","CanvasVideoThumbnail","HTMLMediaElementReadyStates","Promise","VideoFrameBuffer","cr:909281"],(function(a,b,c,d,e,f,g){var h,i=.5625;function a(a,d,e,f,g,i,o,p,q,r){g===void 0&&(g="contain");i===void 0&&(i=0);o===void 0&&(o=null);p===void 0&&(p=null);q===void 0&&(q=null);r===void 0&&(r=null);return new(h||(h=b("Promise")))(function(h,s){var t=document.createElement("canvas"),u=[],v=0,w=a.duration-i;r!=null&&(w=Math.min(w,r));var x=w/f,y=null,z=null,A,B=p!=null?p:j(o,d),C=q!=null?q:k(o,e),D=l(o,d),E=m(o,e);t.width=B!=null?B:d;t.height=C!=null?C:e;var F=new(c("VideoFrameBuffer"))(t,a,g,B,C,D,E);F.updateFrameBuffer();var G=function(){F.updateFrameBuffer();var b=new(c("CanvasVideoThumbnail"))(t,a,i+(v-1)*x,B,C,D,E);u.push(b);(!y||b.getURL().length>y.getURL().length)&&(y=b,z=n(o,a));I()},H=function(){if(a.readyState>=c("HTMLMediaElementReadyStates").HAVE_CURRENT_DATA)G();else if(b("cr:909281")!==null)var d=b("cr:909281").listen(a,"loadeddata",function(){d.remove(),G()});else a.addEventListener("loadeddata",G,{once:!0})},I=function(){v===0&&(b("cr:909281")!==null?A=b("cr:909281").listen(a,"seeked",H):a.addEventListener("seeked",H)),v<f?(a.currentTime=i+v*x,v++):(b("cr:909281")!==null?A&&A.remove():a.removeEventListener("seeked",H),h({thumbnails:u,selectedThumbnail:y,croppedThumbnailUri:z}))};if(a.videoWidth===0||a.videoHeight===0){s();return}I()})}function j(a,b){if(a&&a.spherical){if(a.stereoMode==="left-right")return b/2;if(a.projectionType==="cubemap")return b/3}return null}function k(a,b){return a&&a.spherical&&(a.stereoMode==="top-bottom"||a.projectionType==="cubemap")?b/2:null}function l(a,b){return a&&a.spherical&&a.projectionType==="cubemap"?b/3:0}function m(a,b){return a&&a.spherical&&a.projectionType==="cubemap"?b/2:0}function n(a,b){var c=b.videoWidth!=null&&b.videoHeight!=null?b.videoWidth/b.videoHeight:i,e=c<1;if(a==null&&!e){a=document.createElement("canvas");e=a.getContext("2d");var f=b.videoWidth,g=b.videoHeight;a.width=f;a.height=g;e.drawImage(b,0,0,f,g);e=document.createElement("canvas");c>=1&&c<1.2?(b=f*(d("CPXComposerConstants").REEL_THUMBNAIL_WIDTH/d("CPXComposerConstants").REEL_THUMBNAIL_HEIGHT),c=g):(b=g,c=f);e.width=b;e.height=c;var h=e.getContext("2d");h.drawImage(a,0,0,f,g,0,0,b,c);return e.toDataURL("image/jpeg")}return null}g["default"]=a}),98);
__d("MAWVideoUtils",["FBLogger","MAWImageUtils","Promise","generateVideoThumbnails"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var e=document.body;if(!e)return new(h||(h=b("Promise")))(function(a,b){return b("Unable to find DOM body, please use this util only in DOM environment.")});var f=document.createElement("video");return new(h||(h=b("Promise")))(function(d,g){f.setAttribute("style","display: none"),f.setAttribute("src",URL.createObjectURL(a)),f.addEventListener("loadedmetadata",function(a){a=a.currentTarget;if(a instanceof HTMLVideoElement){var e=a.duration,i=a.videoHeight;a=a.videoWidth;var j=c("generateVideoThumbnails")(f,a,i,1);d((h||(h=b("Promise"))).all([j,a,i,Math.round(e)]))}else g("EventTarget returned for event should be HTMLVideoElement")}),f.addEventListener("error",function(a){g("Unable to load video")}),e.appendChild(f)}).then(function(a){var b=a[0],c=a[1],g=a[2],h=a[3];e.removeChild(f);return d("MAWImageUtils").canvasToBlob(b.thumbnails[0].getCanvas(),d("MAWImageUtils").TYPE_JPEG,!0).then(function(a){return a.arrayBuffer().then(function(a){return{duration:h,height:g,jpegThumbnail:a,width:c}})})})["catch"](function(a){e.removeChild(f);throw c("FBLogger")("messenger_web").mustfixThrow(a)})}function e(a){var d=document.body;if(!d)return new(h||(h=b("Promise")))(function(a,b){return b("Unable to find DOM body, please use this util only in DOM environment.")});var e=document.createElement("video");return new(h||(h=b("Promise")))(function(b,c){e.setAttribute("style","display: none"),e.setAttribute("src",URL.createObjectURL(a)),e.addEventListener("loadedmetadata",function(a){a=a.currentTarget;if(a instanceof HTMLVideoElement){var d=a.duration,e=a.videoHeight;a=a.videoWidth;b({duration:Math.round(d),height:e,width:a})}else c("EventTarget returned for event should be HTMLVideoElement")}),e.addEventListener("error",function(a){c("Unable to load video")}),d.appendChild(e)})["catch"](function(a){d.removeChild(e);throw c("FBLogger")("messenger_web").mustfixThrow(a)})}g.getVideoThumbnailUrlAndSpec=a;g.getVideoThumbnailSpec=e}),98);
__d("MAWFowardMessageFromOpenThread",["FBLogger","I64","LSIntEnum","MAWBridgeSendAndReceive","MAWDocumentPreProcess","MAWFetchXMABlob","MAWFetchXMAData","MAWFetchXMADataUtils","MAWForwardMessage","MAWGetEphemeralSettings","MAWGetImageSpec","MAWImagePreProcess","MAWMessageSendReporter","MAWUnshimUrl","MAWVideoUtils","MessagingAttachmentType","ReQL","WAArmadilloXMA.pb","WABlobToArrayBuffer","qpl","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j="369239263222822",k="369239343222814",l="369239383222810";function m(a){return a===j||a===k||a===l}function n(a,b){return Promise.all([d("MAWGetImageSpec").getImageSpec_DEPRECATED(a),Promise.resolve(a),b.arrayBuffer(),d("MAWGetImageSpec").getImageSpec_DEPRECATED(b)]).then(async function(a){var b=a[0],c=a[1],e=a[2];a=a[3];return{file:c,imageSpec:b,plaintext:await d("WABlobToArrayBuffer").blobToArrayBuffer(c),thumbnailUrlAndSpec:{duration:void 0,height:a.height,jpegThumbnail:e,width:a.width},type:"image"}})}function o(a){return d("MAWVideoUtils").getVideoThumbnailUrlAndSpec(a).then(async function(b){return{file:a,plaintext:await d("WABlobToArrayBuffer").blobToArrayBuffer(a),thumbnailUrlAndSpec:b,type:"video"}})}async function p(a,b){a=await d("MAWFetchXMABlob").fetchBlob({descriptionForLogging:"MAWFowardMessageFromOpenThread",url:a});b=a==null?void 0:new File([a],b,{type:a.type});a=b!=null?await d("MAWGetImageSpec").getImageSpec_DEPRECATED(b):null;return b!=null&&a!=null?{file:b,height:a.height,width:a.width}:void 0}async function q(a,b,c){c=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(c.tables.attachment_ctas).getKeyRange(a));return c==null||b==null&&c.actionUrl==null?null:{actionUrl:(a=c==null?void 0:c.actionUrl)!=null?a:void 0,buttonType:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE,nativeUrl:(a=c==null?void 0:c.actionUrl)!=null?a:void 0,title:b!=null?b:void 0}}async function r(a,b,e,f){var g=await s(b,e);if((g==null?void 0:g.actionUrl)==null){d("sendToSentQPLLogger").markSendToSentFail(f,"null_xma_url");throw c("FBLogger")("messenger_web_sharing").mustfixThrow("Cannot forward XMA to secure threads without a defaultCTA and actionUrl")}a=await d("MAWFetchXMAData").fetchXMAData(a,g.actionUrl,[f]);if(a.linkType==="unknown"){d("sendToSentQPLLogger").markSendToSentFail(f,"unknown_xma_link_type");throw c("FBLogger")("messenger_web_sharing").mustfixThrow("Cannot forward XMA to secure threads with an unknown link type")}if(a.linkType==="external")return u(b,g,e,a);else return t(a,f)}async function s(a,b){var c=a.actionUrl,e=a.defaultCtaId;a=a.defaultCtaTitle;if(e==null)return null;e=await q(e,a,b);return e!=null?e:{actionUrl:c!=null?c:void 0,buttonType:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE,nativeUrl:c!=null?c:void 0,title:a!=null?a:void 0}}async function t(a,b){b=await d("MAWFetchXMADataUtils").makeXMAFileArgs(a,b);var c=a.contentRef,e=a.ctas,f=a.defaultCTA,g=a.overlayIconGlyph,h=a.subtitle_text,i=a.title_text;a=a.xma_message_type;c={contentRef:c,ctas:e,defaultCTA:f,overlayIconGlyph:g,subtitleText:h,titleText:i};return babelHelpers.extends({},b,{xmaArgs:c,xmaMessageType:a!=null?a:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE})}async function u(a,b,c,e){var f=a.attachmentCta1Id,g=a.attachmentCta2Id,i=a.attachmentCta3Id,j=a.cta1Title,k=a.cta2Title,l=a.cta3Title,m=a.faviconUrl,n=a.headerImageUrl,o=a.headerTitle,r=a.maxSubtitleNumOfLines,s=a.maxTitleNumOfLines,t=a.previewUrl,u=a.subtitleText;a=a.titleText;m=await Promise.all([[m,"favicon"],[n,"headerImage"],[t,"preview"]].map(function(a){return p(a[0],a[1])}));n=m[0];t=m[1];m=m[2];var v=[];if(f!=null){f=await q(f,j,c);f!=null&&v.push(f)}if(g!=null){j=await q(g,k,c);j!=null&&v.push(j)}if(i!=null){f=await q(i,l,c);f!=null&&v.push(f)}g={contentRef:e.contentRef,ctas:v.map(function(a){return babelHelpers.extends({},a,{actionUrl:d("MAWUnshimUrl").unshimUrl(a.actionUrl),nativeUrl:d("MAWUnshimUrl").unshimUrl(a.nativeUrl)})}),defaultCTA:babelHelpers.extends({},b,{actionUrl:d("MAWUnshimUrl").unshimUrl(b.actionUrl),nativeUrl:d("MAWUnshimUrl").unshimUrl(b.nativeUrl)}),headerTitle:o,maxSubtitleNumOfLines:(h||(h=d("I64"))).to_int32(r!=null?r:(h||(h=d("I64"))).zero),maxTitleNumOfLines:h.to_int32(s!=null?s:(h||(h=d("I64"))).zero),overlayIconGlyph:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.NONE,subtitleText:u,titleText:a};return{faviconFileArgs:n,headerFileArgs:t,previewFileArgs:m,xmaArgs:g,xmaMessageType:e.xma_message_type}}function v(a){var b=a.attachmentType,e=a.filename,f=a.playableDurationMs,g=a.playableUrl,j=a.playableUrlMimeType,k=a.previewUrl,l=a.previewUrlMimeType;if((h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE))){if(g==null)throw c("FBLogger")("messenger_web_sharing").mustfixThrow("If you see this error, there is no playableUrl for this attachment");var m=(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE));if(k!=null){a=m?k+"&":g;var p=m?k+"&":k;return Promise.all([window.fetch(a).then(function(a){return a.blob()}),window.fetch(p).then(function(a){return a.blob()})]).then(function(a){var e=a[0];a=a[1];e=new File([e],"mediaForwardedFromOpenThread",{type:m?l:j});a=new File([a],"previewForwardedFromOpenThread",{type:l});if((h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)))return n(e,a);if((h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))return o(e);if((h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE)))return n(e,a);throw c("FBLogger")("messenger_web_sharing").mustfixThrow("shouldn't have this error in forward message from open thread")})}a=m?g+"&":g;return window.fetch(a).then(function(a){return a.blob()}).then(function(a){if(m&&j==="video/mp4")throw c("FBLogger")("messenger_web_sharing").mustfixThrow("If you see this error, there is only mp4 url for gif");a=new File([a],e!=null?e:"mediaForwardedFromOpenThread",{type:j});if((h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)))return d("MAWImagePreProcess").imagePreprocess(a,!1);if((h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))return o(a);if((h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE)))return d("MAWDocumentPreProcess").documentPreprocess(a);if((h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE)))return Promise.all([d("MAWImagePreProcess").getJpegThumbnailInfo(a,400),d("MAWGetImageSpec").getImageSpec_DEPRECATED(a),Promise.resolve(a)]).then(async function(a){var b=a[0],c=a[1];a=a[2];return{file:a,imageSpec:c,plaintext:await d("WABlobToArrayBuffer").blobToArrayBuffer(a),thumbnailUrlAndSpec:b,type:"image"}});throw c("FBLogger")("messenger_web_sharing").mustfixThrow("shouldn't have this error in forward message from open thread")})}if((h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO))){if(g!=null)return window.fetch(g+"&").then(function(a){return a.blob()}).then(async function(a){a=new File([a],"mediaForwardedFromOpenThread",{type:j});return{durations:(h||(h=d("I64"))).to_int32(f!=null?f:(h||(h=d("I64"))).zero)/1e3,file:a,isPtt:!0,plaintext:await d("WABlobToArrayBuffer").blobToArrayBuffer(a),type:"audio"}});throw c("FBLogger")("messenger_web_sharing").mustfixThrow("If you see this error, there is no playableUrl for this audio attachment")}if((h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER))){if(g==null&&k==null)throw c("FBLogger")("messenger_web_sharing").mustfixThrow("If you see this error, there is no url for this sticker");return g!=null?k!=null?Promise.all([window.fetch(g).then(function(a){return a.blob()}),window.fetch(k).then(function(a){return a.blob()})]).then(function(a){var b=a[0];a=a[1];b=new File([b],"mediaForwardedFromOpenThread",{type:j});a=new File([a],"previewForwardedFromOpenThread",{type:l});return n(b,a)}):window.fetch(g).then(function(a){return a.blob()}).then(function(a){a=new File([a],"mediaForwardedFromOpenThread",{type:j});return n(a,a)}):window.fetch(k).then(function(a){return a.blob()}).then(function(a){return d("MAWImagePreProcess").imagePreprocess(new File([a],"previewForwardedFromOpenThread",{type:l}),!0)})}throw c("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding other media types. Received attachment %d",(i||(i=d("LSIntEnum"))).toNumber(b))}function a(a,b,e,f,g,j,k,l,n){return d("MAWForwardMessage").maybeCreateNewThreadAndCallback(b,e,function(o,p){var q=d("MAWGetEphemeralSettings").getEphemeralSetting(o,e),s=p;return q.then(function(e){if(j!=null){if(m(j.attachmentFbid)){var p=d("MAWBridgeSendAndReceive").sendAndReceive("backend","sendMsg",{args:{content:"\ud83d\udc4d",ephemeralSetting:e!=null?e:void 0,isFirstMsg:s,isForwarded:g,source:k,specialTextSize:1},chatJid:o,externalId:n,qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:l});return d("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:o,externalId:n},p,{qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:l},b)}return(h||(h=d("I64"))).equal(j.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA))?r(a,j,b,l).then(function(a){var g=a.faviconFileArgs,h=a.headerFileArgs,i=a.previewFileArgs,j=a.xmaArgs;a=a.xmaMessageType;a=d("MAWBridgeSendAndReceive").sendAndReceive("backend","sendXMAShareMsg",{args:{content:f.text,ephemeralSetting:e!=null?e:void 0,isFirstMsg:s,isForwarded:!0,xmaMessageType:a!=null?a:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE},chatJid:o,faviconFile:g,headerFile:h,previewFile:i,qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:l,xmaArgs:j,xmaMsgExternalId:n});return d("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:o,externalId:n},a,{qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:l},b)}):v(j).then(async function(a){var f;switch(a.type){case"image":var h=a.imageSpec,i=a.thumbnailUrlAndSpec;f={args:{ephemeralSetting:e!=null?e:void 0,height:h.height,isFirstMsg:s,isForwarded:g,jpegThumbnail:i==null?void 0:i.jpegThumbnail,jpegThumbnailHeight:i==null?void 0:i.height,jpegThumbnailWidth:i==null?void 0:i.width,source:k,width:h.width},attachmentType:"image",chatJid:o,externalId:n};break;case"video":i=a.thumbnailUrlAndSpec;f={args:{duration:i.duration,ephemeralSetting:e!=null?e:void 0,height:i.height,isFirstMsg:s,isForwarded:g,jpegThumbnail:i.jpegThumbnail,jpegThumbnailHeight:i.height,jpegThumbnailWidth:i.width,source:k,width:i.width},attachmentType:"video",chatJid:o,externalId:n};break;case"audio":h=a.durations;i=a.isPtt;f={args:{duration:Math.round(h),ephemeralSetting:e!=null?e:void 0,isFirstMsg:s,isForwarded:g,isPtt:i,source:k},attachmentType:"audio",chatJid:o,externalId:n};break;case"document":f={args:{ephemeralSetting:e!=null?e:void 0,filename:a.filename,isFirstMsg:s,isForwarded:g,source:k},attachmentType:"application",chatJid:o,externalId:n};break}if(f==null)throw c("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding this attachment type: %s",a.type);i=d("MAWBridgeSendAndReceive").sendAndReceive("backend","sendMediaMsgV2",babelHelpers.extends({},f,{mimeType:a.file.type,plaintext:(h=a.plaintext)!=null?h:await d("WABlobToArrayBuffer").blobToArrayBuffer(a.file),qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:l}));return d("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:o,externalId:n},i,{qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:l},b)})}p=f.text;if(p!=null){p=d("MAWBridgeSendAndReceive").sendAndReceive("backend","sendMsg",{args:{content:f.text,ephemeralSetting:e!=null?e:void 0,isFirstMsg:s,isForwarded:g,source:k},chatJid:o,externalId:n,qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:l});return d("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:o,externalId:n},p,{qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:l},b)}throw c("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding this types")})},l)}g.downloadMediaByUrl=v;g.forwardMessage=a}),98);
__d("MWSharedAttachmentsSectionHooks",["I64","LSIntEnum","LSThreadMediaGalleryGroup","MessagingAttachmentType","ReQL","ReQLSuspense","gkx","react","react-compiler-runtime","usePrevious","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||d("react");l.useCallback;var m=l.useEffect,n=l.useState;function a(a){var b=d("react-compiler-runtime").c(33),e=a.attachmentsRange,f=a.hasMore,g=a.loadMore,h=a.logLoadMediaCancel,i=a.logLoadMediaSuccess,j=a.media,k=a.skipInitialLoad;a=n(!1);var l=a[0],o=a[1],p=j.length,q=(a=c("usePrevious")(p))!=null?a:0,r=c("usePrevious")(f),s=(j=c("usePrevious")(l))!=null?j:!1,t=e!=null;b[0]!==t||b[1]!==g||b[2]!==k?(a=function(){!t&&k!==!0&&(g(),o(!0))},j=[t,g,k],b[0]=t,b[1]=g,b[2]=k,b[3]=a,b[4]=j):(a=b[3],j=b[4]);m(a,j);b[5]!==e||b[6]!==f||b[7]!==l||b[8]!==g||b[9]!==i||b[10]!==p||b[11]!==r||b[12]!==s||b[13]!==q?(a=function(){var a=q!==p,b=r===!0&&!f||e==null&&f===!1&&r===!1&&q===p;l&&(b||a)?(o(!1),i==null||i({fetchedMediaCount:p-q,startMediaCount:q})):q===p&&f&&l&&s===!0&&(i==null||i({fetchedMediaCount:p-q,isAlreadyPreloaded:!0,startMediaCount:q}),g())},b[5]=e,b[6]=f,b[7]=l,b[8]=g,b[9]=i,b[10]=p,b[11]=r,b[12]=s,b[13]=q,b[14]=a):a=b[14];b[15]!==e||b[16]!==f||b[17]!==l||b[18]!==g||b[19]!==h||b[20]!==i||b[21]!==p||b[22]!==r||b[23]!==s||b[24]!==q?(j=[p,f,l,q,r,e,g,s,i,h],b[15]=e,b[16]=f,b[17]=l,b[18]=g,b[19]=h,b[20]=i,b[21]=p,b[22]=r,b[23]=s,b[24]=q,b[25]=j):j=b[25];m(a,j);b[26]!==l||b[27]!==g?(h=function(){if(!l){g();return o(!0)}},b[26]=l,b[27]=g,b[28]=h):h=b[28];a=h;j=p>0||!l&&!f;b[29]!==j||b[30]!==l||b[31]!==a?(h=[l,a,j],b[29]=j,b[30]=l,b[31]=a,b[32]=h):h=b[32];return h}function o(a,b,e,g){var i=d("react-compiler-runtime").c(19),j;i[0]!==g?(j=g===void 0?{}:g,i[0]=g,i[1]=j):j=i[1];g=j;j=g.removeUnsentMessages;var k=j===void 0?!1:j,l=(h||(h=c("useReStore")))();g=t(a,b);j=g.attachmentsRange;b=g.hasMoreBefore;var m=g.minTimestampMs,n=g.query;i[2]!==l||i[3]!==e||i[4]!==k?(g=function(a){if(!e(a))return null;if(!k)return a;var b=d("ReQLSuspense").first(d("ReQL").fromTableAscending(l.tables.messages.index("messageId")).getKeyRange(a.messageId),f.id+":147");return b==null||b.isUnsent?null:a},i[2]=l,i[3]=e,i[4]=k,i[5]=g):g=i[5];var o=g;i[6]!==o||i[7]!==n?(g=function(){return n.map(o).filter(Boolean)},i[6]=o,i[7]=n,i[8]=g):g=i[8];var p;i[9]!==l||i[10]!==m||i[11]!==o||i[12]!==a?(p=[l,a,o,m],i[9]=l,i[10]=m,i[11]=o,i[12]=a,i[13]=p):p=i[13];a=d("ReQLSuspense").useArray(g,p,f.id+":160");i[14]!==a||i[15]!==j||i[16]!==b||i[17]!==m?(g=[a,j,m,b],i[14]=a,i[15]=j,i[16]=b,i[17]=m,i[18]=g):g=i[18];return g}function p(a){var b=a.attachmentType;a=a.defaultCtaType;return(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA))?a==="xma_web_url"||a==="xma_open_native":!1}function b(a,b){var e=d("react-compiler-runtime").c(7),f;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=(j||(j=d("LSIntEnum"))).ofNumber(c("LSThreadMediaGalleryGroup").LINKS),e[0]=f):f=e[0];a=o(a,f,p,b);f=a[0];b=a[1];var g=a[2];a=a[3];var h;e[1]===Symbol["for"]("react.memo_cache_sentinel")?(h=(j||(j=d("LSIntEnum"))).ofNumber(c("LSThreadMediaGalleryGroup").LINKS),e[1]=h):h=e[1];e[2]!==f||e[3]!==b||e[4]!==a||e[5]!==g?(h=[f,h,b,g,a],e[2]=f,e[3]=b,e[4]=a,e[5]=g,e[6]=h):h=e[6];return h}function q(a){a=a.attachmentType;return(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))||(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))||(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE))&&c("gkx")("9525")}function e(a,b){var e=d("react-compiler-runtime").c(7),f;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=(j||(j=d("LSIntEnum"))).ofNumber(c("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS),e[0]=f):f=e[0];a=o(a,f,q,b);f=a[0];b=a[1];var g=a[2];a=a[3];var h;e[1]===Symbol["for"]("react.memo_cache_sentinel")?(h=(j||(j=d("LSIntEnum"))).ofNumber(c("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS),e[1]=h):h=e[1];e[2]!==f||e[3]!==b||e[4]!==a||e[5]!==g?(h=[f,h,b,g,a],e[2]=f,e[3]=b,e[4]=a,e[5]=g,e[6]=h):h=e[6];return h}function r(a){a=a.attachmentType;return(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE))}function s(a,b){var e=d("react-compiler-runtime").c(7),f;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=(j||(j=d("LSIntEnum"))).ofNumber(c("LSThreadMediaGalleryGroup").FILES_ONLY),e[0]=f):f=e[0];a=o(a,f,r,b);f=a[0];b=a[1];var g=a[2];a=a[3];var h;e[1]===Symbol["for"]("react.memo_cache_sentinel")?(h=(j||(j=d("LSIntEnum"))).ofNumber(c("LSThreadMediaGalleryGroup").FILES_ONLY),e[1]=h):h=e[1];e[2]!==f||e[3]!==b||e[4]!==a||e[5]!==g?(h=[f,h,b,g,a],e[2]=f,e[3]=b,e[4]=a,e[5]=g,e[6]=h):h=e[6];return h}function t(a,b){var e=d("react-compiler-runtime").c(17),g=(h||(h=c("useReStore")))(),j;e[0]!==g.tables.attachments_ranges_v2__generated||e[1]!==b||e[2]!==a?(j=function(){return d("ReQL").fromTableDescending(g.tables.attachments_ranges_v2__generated).getKeyRange(a).filter(function(a){return(i||(i=d("I64"))).equal(a.mediaGroup,b)})},e[0]=g.tables.attachments_ranges_v2__generated,e[1]=b,e[2]=a,e[3]=j):j=e[3];var k;e[4]!==g||e[5]!==b||e[6]!==a?(k=[g,a,b],e[4]=g,e[5]=b,e[6]=a,e[7]=k):k=e[7];j=d("ReQLSuspense").useFirst(j,k,f.id+":293");k=j==null?void 0:j.minTimestampMs;var l=j==null?void 0:j.hasMoreBefore;if(e[8]!==g.tables.attachments||e[9]!==k||e[10]!==a){var m=d("ReQL").fromTableDescending(g.tables.attachments.index("fk_messages")).getKeyRange(a);m=k!=null&&(i||(i=d("I64"))).to_float(k)!==Number.MAX_SAFE_INTEGER?m.bounds({gte:d("ReQL").key(k)}):m;e[8]=g.tables.attachments;e[9]=k;e[10]=a;e[11]=m}else m=e[11];m=m;var n;e[12]!==j||e[13]!==l||e[14]!==k||e[15]!==m?(n={attachmentsRange:j,hasMoreBefore:l,minTimestampMs:k,query:m},e[12]=j,e[13]=l,e[14]=k,e[15]=m,e[16]=n):n=e[16];return n}g.useLoader=a;g.useQueryLinkAttachments=b;g.filterMediaAttachments=q;g.useQueryMediaAttachments=e;g.useQueryFileAttachments=s;g.useAttachmentsQuery=t}),98);
__d("MessengerDownloadFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{d:"M17.75 6.5a1 1 0 0 0-1 1v9.25a.25.25 0 0 1-.25.25h-1.998a1 1 0 0 0-.844 1.537l3.498 5.497a1 1 0 0 0 1.688 0l3.498-5.497A1 1 0 0 0 21.498 17H19.5a.25.25 0 0 1-.25-.25V7.5a1 1 0 0 0-1-1h-.5zM7 28a1 1 0 0 1 1-1h20a1 1 0 0 1 1 1v.5a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1V28z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("acceptMAWMessageRequest",["I64","LSAddMessengerContactStoredProcedure","LSFactory","LSOptimisticAcceptMessageRequestStoredProcedure","MAWUpdateLSThreadCapabilities","Promise","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e,g,j){if(!j||g==null)return;var k=g[1],l=babelHelpers["extends"]({},k,{contactViewerRelationship:(i||(i=d("I64"))).of_string("2")});c("promiseDone")(a.runInTransaction(function(a){return(h||(h=b("Promise"))).all([a.contacts.upsert([k.id],l),c("LSAddMessengerContactStoredProcedure")(c("LSFactory")(a),{contactId:k.id}),d("MAWUpdateLSThreadCapabilities").updateNonMessageRequestThreadTxn(a,e.threadKey),c("LSOptimisticAcceptMessageRequestStoredProcedure")(c("LSFactory")(a),{threadKey:e.threadKey})])},"readwrite",void 0,void 0,f.id+":37"))}g["default"]=a}),98);
__d("useLoadMoreThreadSharedAttachments.react",["Int64Hooks","LSFactory","LSIssueAttachmentsRangeQueryStoredProcedure","MAWThreadCutover","MWThreadKey.react","promiseDone","react-compiler-runtime","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e){var g=d("react-compiler-runtime").c(6),h=c("useAsyncReStore")(),i=d("MWThreadKey.react").useMWThreadKeyMemoized();i==null&&(i=b);b=d("MAWThreadCutover").useGetCutoverOpenThreadKey(i);var j=b!=null?b:i;g[0]!==h||g[1]!==j||g[2]!==e||g[3]!==a?(b=function(){e==null||e(),c("promiseDone")(h,function(b){return b.runInTransaction(function(b){return c("LSIssueAttachmentsRangeQueryStoredProcedure")(c("LSFactory")(b),{mediaGroup:a,threadKey:j})},"readwrite",void 0,void 0,f.id+":40")})},i=[e,h,a,j],g[0]=h,g[1]=j,g[2]=e,g[3]=a,g[4]=b,g[5]=i):(b=g[4],i=g[5]);return d("Int64Hooks").useCallbackInt64(b,i)}g["default"]=a}),98);
__d("useMAWLoadMoreThreadSharedAttachments",["I64","Int64Hooks","MAWBridgeSendAndReceive","MAWMediaGalleryEBTaggingUtils","MAWMiActOnActThreadReady","Promise","cr:20241","promiseDone","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a){var e=d("react-compiler-runtime").c(16),f=a.earliestLoadedMediaMessageId,g=a.hasMoreBefore,k=a.mediaGalleryGroup,l=a.minTimestampMs,m=a.pageSize,n=a.qplLogger,o=a.threadKey,p=(j||(j=c("useReStore")))(),q;e[0]!==g||e[1]!==l?(a=function(){return g!=null&&g&&l!=null?(i||(i=d("I64"))).to_float(l):Number.MAX_SAFE_INTEGER},q=[g,l],e[0]=g,e[1]=l,e[2]=a,e[3]=q):(a=e[2],q=e[3]);var r=d("Int64Hooks").useCallbackInt64(a,q);e[4]!==k?(a=d("MAWMediaGalleryEBTaggingUtils").isMediaGalleryGroupSupportedForTaggedRestore(k),e[4]=k,e[5]=a):a=e[5];var s=a;e[6]!==p.tables||e[7]!==f||e[8]!==r||e[9]!==s||e[10]!==k||e[11]!==m||e[12]!==n||e[13]!==o?(q=function(){o!=null&&(n==null||n.logLoadMediaStart==null||n.logLoadMediaStart(),c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(p.tables,o,"useMAWLoadMoreThreadSharedAttachments",function(a,c){return(b("cr:20241")!=null&&s?b("cr:20241").MAWFetchAndPersistMedia(c,o,k,n):(h||(h=b("Promise"))).resolve()).then(function(){n==null||n.addPoint("fetch_from_maw_db",{"int":{mediaGalleryGroup:k}});return d("MAWBridgeSendAndReceive").sendAndReceive("backend","loadMoreMedia",{earliestLoadedMediaMessageId:f,earliestLoadedMediaTs:r(),mediaGalleryGroup:k,pageSize:m,threadJid:c})})})))},a=[o,p.tables,s,k,n,f,r,m],e[6]=p.tables,e[7]=f,e[8]=r,e[9]=s,e[10]=k,e[11]=m,e[12]=n,e[13]=o,e[14]=q,e[15]=a):(q=e[14],a=e[15]);return d("Int64Hooks").useCallbackInt64(q,a)}g["default"]=a}),98);
__d("useMAWQuerySecureMediaAttachments",["I64","LSIntEnum","LSThreadMediaGalleryGroup","MWSharedAttachmentsSectionHooks","ReQL","ReQLSuspense","gkx","justknobx","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;b=k||d("react");var l=b.useCallback,m=b.useMemo;function a(a,b,e){e=e===void 0?{}:e;e=e.removeUnsentMessages;var g=e===void 0?!1:e,k=(h||(h=c("useReStore")))(),o=b==null||!c("gkx")("9247")?c("justknobx")._("1132"):b;e=d("MWSharedAttachmentsSectionHooks").useAttachmentsQuery(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS));b=e.attachmentsRange;var q=e.hasMoreBefore,r=e.minTimestampMs,s=e.query,t=l(function(a){if(!d("MWSharedAttachmentsSectionHooks").filterMediaAttachments(a))return null;var b=d("ReQLSuspense").first(d("ReQL").fromTableAscending(k.tables.messages.index("messageId")).getKeyRange(a.messageId),f.id+":79");if(g&&(b==null||b.isUnsent))return null;return b==null?{attachment:a}:{attachment:a,message:b}},[k,g]),u=d("ReQLSuspense").useArray(function(){var a=s.map(t).filter(Boolean);(r==null||(j||(j=d("I64"))).equal(r,(j||(j=d("I64"))).zero))&&(a=a.take(o));return a},[k,a,t,r],f.id+":97"),v=m(function(){var a=n(u);a.sort(p);return a},[u]);e=m(function(){return v.map(function(a){a=a.attachment;return a})},[v]);return[e,i.ofNumber(c("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS),b,r,q]}function n(a){var b=o(a);return a.map(function(a){var c=a.attachment;a=a.message;var e=a==null?void 0:a.groupId,f=b.get(e!=null?e:"");if(e==null||f==null){return{attachment:c,message:a,sortKey:{sortingMessageGroupIndex:Number.MAX_SAFE_INTEGER,sortingMessageId:c.messageId,sortingMessagePrimarySortTS:(e=a==null?void 0:a.primarySortKey)!=null?e:c.timestampMs,sortingMessageSecondarySortTS:(e=(e=a==null?void 0:a.secondarySortKey)!=null?e:a==null?void 0:a.timestampMs)!=null?e:c.timestampMs}}}return{attachment:c,message:a,sortKey:{sortingMessageGroupIndex:(j||(j=d("I64"))).to_int32((e=a==null?void 0:a.groupIndex)!=null?e:(j||(j=d("I64"))).zero),sortingMessageId:f.messageId,sortingMessagePrimarySortTS:f.primarySortTs,sortingMessageSecondarySortTS:f.secondarySortTs}}})}function o(a){var b=new Map();a.forEach(function(a){var c;a=a.message;if(!a||a.groupId==null||a.groupIndex==null)return;var e=a.groupId,f=(j||(j=d("I64"))).to_int32(a.groupIndex);c=Math.min((c=(c=b.get(e))==null?void 0:c.groupIndex)!=null?c:Number.MAX_SAFE_INTEGER,f);f=f===c?{groupIndex:f,messageId:a.messageId,primarySortTs:a.primarySortKey,secondarySortTs:(c=a.secondarySortKey)!=null?c:a.timestampMs}:b.get(e);f&&b.set(e,f)});return b}function p(a,b){var c=a.sortKey,e=b.sortKey;a=a.message;b=b.message;if(!(j||(j=d("I64"))).equal(c.sortingMessagePrimarySortTS,e.sortingMessagePrimarySortTS))return(j||(j=d("I64"))).compare(e.sortingMessagePrimarySortTS,c.sortingMessagePrimarySortTS);if(!(j||(j=d("I64"))).equal(e.sortingMessageSecondarySortTS,c.sortingMessageSecondarySortTS))return(j||(j=d("I64"))).compare(e.sortingMessageSecondarySortTS,c.sortingMessageSecondarySortTS);if(c.sortingMessageId!==e.sortingMessageId)return e.sortingMessageId.localeCompare(c.sortingMessageId);return(a==null?void 0:a.groupId)!=null&&(b==null?void 0:b.groupId)!=null&&a.groupId===b.groupId?e.sortingMessageGroupIndex-c.sortingMessageGroupIndex:0}g["default"]=a}),98);
__d("useMWMediaLoadingQplLogger",["MWMediaRenderQplUtils","QPLUserFlow","QuickPerformanceLogger","Random","qpl","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");b.useCallback;var j=b.useEffect;b.useMemo;function a(a){var b=d("react-compiler-runtime").c(11),e=a.entrypoint,f=a.threadType;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=o(),b[0]=a):a=b[0];a=a;var g=a;b[1]!==e||b[2]!==f?(a=function(a){var b;k({entrypoint:e,instanceKey:g,isCutoverThread:(b=a==null?void 0:a.isCutoverThread)!=null?b:!1,isPreCutoverMedia:(b=a==null?void 0:a.isPreCutoverMedia)!=null?b:!1,threadType:f})},b[1]=e,b[2]=f,b[3]=a):a=b[3];a=a;var i;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(i=function(a){var b=a.fetchedMediaCount,c=a.isAlreadyPreloaded;a=a.startMediaCount;l({fetchedMediaCount:b,instanceKey:g,isAlreadyPreloaded:c,startMediaCount:a})},b[4]=i):i=b[4];i=i;var p;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(p=function(){m({instanceKey:g})},b[5]=p):p=b[5];var q=p;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(p=function(a,b){n({annotations:b,instanceKey:g,name:a})},b[6]=p):p=b[6];p=p;var r,s;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(r=function(){return function(){var a=(h||(h=c("QuickPerformanceLogger"))).isMarkerOn(c("qpl")._(25300395,"1954"),g);a&&q()}},s=[g,q],b[7]=r,b[8]=s):(r=b[7],s=b[8]);j(r,s);b[9]!==a?(r={addPoint:p,logLoadMediaCancel:q,logLoadMediaStart:a,logLoadMediaSuccess:i},b[9]=a,b[10]=r):r=b[10];s=r;return s}function k(a){var b=a.entrypoint,e=a.instanceKey,f=a.isCutoverThread;f=f===void 0?!1:f;var g=a.isPreCutoverMedia;g=g===void 0?!1:g;a=a.threadType;c("QPLUserFlow").start(c("qpl")._(25300395,"1954"),{annotations:{bool:{isCutoverThread:f,isPreCutoverMedia:g},string:{entrypoint:b,threadType:d("MWMediaRenderQplUtils").getThreadTypeStringFromEnum(a)}},cancelOnUnload:!0,instanceKey:e,timeoutInMs:60*1e3})}function l(a){var b=a.fetchedMediaCount,d=a.instanceKey,e=a.isAlreadyPreloaded;a=a.startMediaCount;c("QPLUserFlow").endSuccess(c("qpl")._(25300395,"1954"),{annotations:{bool:{isAlreadyPreloaded:e!=null?e:!1},"int":{fetchedMediaCount:b,startMediaCount:a}},instanceKey:d})}function m(a){a=a.instanceKey;c("QPLUserFlow").endCancel(c("qpl")._(25300395,"1954"),{instanceKey:a})}function n(a){var b=a.annotations,d=a.instanceKey;a=a.name;c("QPLUserFlow").addPoint(c("qpl")._(25300395,"1954"),a,{data:b,instanceKey:d})}function o(){return Date.now()+Math.round(d("Random").random()*1e4)}g["default"]=a}),98);
__d("useMAWLoadMoreCutoverThreadSharedAttachments",["MAWDbMsg","MWSharedAttachmentsSectionHooks","gkx","react","react-compiler-runtime","useLoadMoreThreadSharedAttachments.react","useMAWLoadMoreThreadSharedAttachments","useMAWQuerySecureMediaAttachments","useMWMediaLoadingQplLogger"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(a,b,e,f,g,h,j){var k=d("react-compiler-runtime").c(55),l=c("useMAWQuerySecureMediaAttachments")(a,j),m=l[0],n=l[1],o=l[2],p=l[3];l=l[4];var q;k[0]!==(o==null?void 0:o.lastLoadedMessageId)?(q=(o==null?void 0:o.lastLoadedMessageId)!=null?d("MAWDbMsg").toMsgId(o==null?void 0:o.lastLoadedMessageId):void 0,k[0]=o==null?void 0:o.lastLoadedMessageId,k[1]=q):q=k[1];q=q;var r=l!=null?l:!0,s;k[2]!==f.entrypoint||k[3]!==e?(s={entrypoint:f.entrypoint,threadType:e},k[2]=f.entrypoint,k[3]=e,k[4]=s):s=k[4];var t=c("useMWMediaLoadingQplLogger")(s);k[5]!==t?(f=function(){t.logLoadMediaStart({isCutoverThread:!0,isPreCutoverMedia:!1})},k[5]=t,k[6]=f):f=k[6];e=f;s=q!=null?q:void 0;k[7]!==e||k[8]!==t?(f=babelHelpers["extends"]({},t,{logLoadMediaStart:e}),k[7]=e,k[8]=t,k[9]=f):f=k[9];k[10]!==l||k[11]!==g||k[12]!==p||k[13]!==j||k[14]!==a||k[15]!==s||k[16]!==f?(q={earliestLoadedMediaMessageId:s,hasMoreBefore:l,mediaGalleryGroup:g,minTimestampMs:p,pageSize:j,qplLogger:f,threadKey:a},k[10]=l,k[11]=g,k[12]=p,k[13]=j,k[14]=a,k[15]=s,k[16]=f,k[17]=q):q=k[17];e=c("useMAWLoadMoreThreadSharedAttachments")(q);l=d("MWSharedAttachmentsSectionHooks").useQueryMediaAttachments(b);g=l[0];p=l[2];j=l[4];a=j!=null?j:c("gkx")("6241");k[18]!==t?(s=function(){t.logLoadMediaStart({isCutoverThread:!0,isPreCutoverMedia:!0})},k[18]=t,k[19]=s):s=k[19];f=s;q=c("useLoadMoreThreadSharedAttachments.react")(n,b,f);k[20]!==o||k[21]!==r||k[22]!==e||k[23]!==m||k[24]!==t.logLoadMediaCancel||k[25]!==t.logLoadMediaSuccess?(l={attachmentsRange:o,hasMore:r,loadMore:e,logLoadMediaCancel:t.logLoadMediaCancel,logLoadMediaSuccess:t.logLoadMediaSuccess,media:m},k[20]=o,k[21]=r,k[22]=e,k[23]=m,k[24]=t.logLoadMediaCancel,k[25]=t.logLoadMediaSuccess,k[26]=l):l=k[26];j=d("MWSharedAttachmentsSectionHooks").useLoader(l);s=j[0];n=j[1];b=j[2];f=r||s;k[27]!==p||k[28]!==a||k[29]!==q||k[30]!==g||k[31]!==t.logLoadMediaCancel||k[32]!==t.logLoadMediaSuccess||k[33]!==f?(o={attachmentsRange:p,hasMore:a,loadMore:q,logLoadMediaCancel:t.logLoadMediaCancel,logLoadMediaSuccess:t.logLoadMediaSuccess,media:g,skipInitialLoad:f},k[27]=p,k[28]=a,k[29]=q,k[30]=g,k[31]=t.logLoadMediaCancel,k[32]=t.logLoadMediaSuccess,k[33]=f,k[34]=o):o=k[34];e=d("MWSharedAttachmentsSectionHooks").useLoader(o);l=e[0];j=e[1];p=e[2];if(r||s||h===!0){k[35]!==b||k[36]!==r||k[37]!==s||k[38]!==m||k[39]!==n?(q={attachments:m,completedFirstLoad:b,hasMore:r,isLoadingMore:s,onLoadMore:n},k[35]=b,k[36]=r,k[37]=s,k[38]=m,k[39]=n,k[40]=q):q=k[40];return q}else if(a||l){k[41]!==g||k[42]!==m?(f=m.concat(g),k[41]=g,k[42]=m,k[43]=f):f=k[43];k[44]!==p||k[45]!==a||k[46]!==l||k[47]!==j||k[48]!==f?(o={attachments:f,completedFirstLoad:p,hasMore:a,isLoadingMore:l,onLoadMore:j},k[44]=p,k[45]=a,k[46]=l,k[47]=j,k[48]=f,k[49]=o):o=k[49];return o}else{k[50]!==g||k[51]!==m?(e=m.concat(g),k[50]=g,k[51]=m,k[52]=e):e=k[52];k[53]!==e?(h={attachments:e,completedFirstLoad:!0,hasMore:!1,isLoadingMore:!1,onLoadMore:i},k[53]=e,k[54]=h):h=k[54];return h}}function i(){}g["default"]=a}),98);
__d("useMWV2MediaViewerOpenPlayableUrl",["I64","LSIntEnum","LSMediaUrlAttachment","MessagingAttachmentType","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;(h||d("react")).useCallback;function a(){return k}function k(a){if(a==null)return;return(i||(i=d("I64"))).equal(a.attachmentType,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE))?d("LSMediaUrlAttachment").previewUrl(a):d("LSMediaUrlAttachment").playableUrl(a)}g["default"]=a}),98);
__d("useMWV2MediaViewerOpenPreviewUrl",["LSMediaUrlAttachment","react"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(){return i}function i(a){return a!=null?d("LSMediaUrlAttachment").previewUrl(a):void 0}g["default"]=a}),98);
__d("useMWV2MediaViewerSecurePreviewUrl_CausesSuspense",["cr:5931","react"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(){return i}function i(a,c,d){return b("cr:5931")==null?void 0:b("cr:5931").getThumbnailBlob_CausesSuspense(a,c,d)}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("DgwClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1755537");b=d("FalcoLoggerInternal").create("dgw_client",a);e=b;g["default"]=e}),98);
__d("DGWLoggingContext",["$InternalEnum","DgwClientFalcoEvent","ODS","Random"],(function(a,b,c,d,e,f,g){"use strict";var h;a="dgw_client";var i=b("$InternalEnum")({STREAM_GROUP_COMPONENT:"WebStreamGroup",GROUPED_STREAM_COMPONENT:"GroupedWebStream",WEBSOCKET_TRANSPORT_COMPONENT:"WebSocketTransport",ACK_MANAGER_COMPONENT:"WebStreamAckManager",CODEC_COMPONENT:"WebCodec",RAW_CLIENT:"RAWDGWClient",PINGER:"DGWPinger"}),j={VERBOSE:-1,INFO:0,WARNING:1,ERROR:2,FATAL:3};function k(a){switch(a){case i.GROUPED_STREAM_COMPONENT:case i.ACK_MANAGER_COMPONENT:return!0;default:return!1}}e=function(){function a(a,b,c,d,e,f,g){f===void 0&&(f=!1),g===void 0&&(g=!1),this.$5=""+a,this.$1=b,this.$4=c,this.$3=d,this.sgTransportId=e,this.$2=f,this.$6=g}a.bumpODSKey=function(a,b,c){c===void 0&&(c=1);if(!d("Random").coinflip(c))return;a=a+"."+b;(h||(h=d("ODS"))).bumpEntityKey(3589,"dgw_web_client",a,c)};var b=a.prototype;b.bumpODSKey=function(a,b,c){c===void 0&&(c=1);if(!d("Random").coinflip(c))return;a=this.$4+"."+a+"."+b;(h||(h=d("ODS"))).bumpEntityKey(3589,"dgw_web_client",a,c)};b.logEvent=function(a,b,c,d,e){d===void 0&&(d=!1),this.$2||this.$7(a,b,null,j.INFO,c,d,e)};b.$7=function(a,b,d,e,f,g,h){var i=this;g===void 0&&(g=!1);if(g&&!this.$6)return;(k(a)&&this.$1!=null||!k(a)&&this.sgTransportId!=null)&&c("DgwClientFalcoEvent").log(function(){return{event:b,logging_id:h!=null?h:i.$1,dgw_version:i.$5,message:d,severity:e,uuid:i.$3,dgw_component:a,extra_info:f,destination_tier:i.$4,sg_transport_id:i.sgTransportId,source:2}})};b.logError=function(a,b,c,d,e,f){e===void 0&&(e=!1),this.$2||this.$7(a,b,c,j.ERROR,d,e,f)};b.logWarn=function(a,b,c,d,e){e===void 0&&(e=!1),this.$2||this.$7(a,b,c,j.WARNING,d,e)};return a}();g.DGW_MODULE=a;g.DGWLoggingComponent=i;g.DGWLoggingContext=e}),98);
__d("DGWAckManager",["DGWLoggingContext"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a,b,c){var d=this;this.$3=c;this.sendId=a;this.$2=b;this.handleAckReceived=function(){d.stopTracking(!0)};this.$1=window.setTimeout(function(){d.stopTracking(!1)},b)}var b=a.prototype;b.stopTracking=function(a){window.clearTimeout(this.$1),this.$3(a)};return a}();a=function(){function a(a){this.$1=new Map(),this.$2=a}var b=a.prototype;b.waitForAck=async function(a,b){this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_expected");var c=this.$1;try{var e=await new Promise(function(d,e){c.set(a,new h(a,b,d))});e===!0?this.$2.logEvent(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Received ACK","sendId:"+a,!0):(this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_timeout"),this.$2.logWarn(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ACK timeout","Request "+a+" timed out after "+b+"ms"));c.delete(a);return e}catch(b){this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_error");c.delete(a);throw b}};b.handleAckReceived=function(a){this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_received");var b=this.$1.get(a);if(b===void 0){this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_received.not_tracked");this.$2.logWarn(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"untracked ACK","Received ACK for ackId "+a+" which was not being tracked");return}b.handleAckReceived()};b.clearPendingAcks=function(){var a=this;this.$2.logEvent(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending acks","ACKs cleared size: "+this.$1.size);this.$1.forEach(function(b,c,e){a.$2.logEvent(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending ACK with ackId "+b.sendId,null,!0),b.stopTracking(!1),e.delete(c)})};return a}();g.DGWAckManager=a}),98);
__d("DGWAuth",["$InternalEnum","err"],(function(a,b,c,d,e,f,g){"use strict";var h=b("$InternalEnum")({TEST:"0:0",FACEBOOK:"1:0",INTERNALFB:"2:0",OCULUS:"3:0",ENTERPRISEFB:"7:0",RECRUITINGFB:"8:0",INSTAGRAM:"6:0",HORIZON_WEB:"12:0",SPARK_WEB:"13:0",ABRA:"15:0",GUEST:"19:0"});function a(a){if(a==="TEST")return h.TEST;else if(a==="FACEBOOK")return h.FACEBOOK;else if(a==="INTERNALFB")return h.INTERNALFB;else if(a==="OCULUS")return h.OCULUS;else if(a==="ENTERPRISEFB")return h.ENTERPRISEFB;else if(a==="RECRUITINGFB")return h.RECRUITINGFB;else if(a==="INSTAGRAM")return h.INSTAGRAM;else if(a==="HORIZON_WEB")return h.HORIZON_WEB;else if(a==="SPARK_WEB")return h.SPARK_WEB;else if(a==="ABRA")return h.ABRA;else if(a==="GUEST")return h.GUEST;else throw c("err")("failed to convert string ("+a+") to DGWAuth Type")}function d(a){if(a===h.FACEBOOK)return"FACEBOOK";else if(a===h.INTERNALFB)return"INTERNALFB";else if(a===h.OCULUS)return"OCULUS";else if(a===h.ENTERPRISEFB)return"ENTERPRISEFB";else if(a===h.RECRUITINGFB)return"RECRUITINGFB";else if(a===h.INSTAGRAM)return"INSTAGRAM";else if(a===h.HORIZON_WEB)return"HORIZON_WEB";else if(a===h.SPARK_WEB)return"SPARK_WEB";else if(a===h.ABRA)return"ABRA";else if(a===h.GUEST)return"GUEST";else return"TEST"}g.DGWAuth=h;g.fromStringToDGWAuth=a;g.fromDGWAuthToString=d}),98);
__d("DGWStream",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum").Mirrored(["ABNORMAL_CLOSURE","GOING_AWAY","SERVER_INTERNAL_ERROR","PREMATURE_CLOSE","UNKNOWN_ERROR","KEEPALIVE_TIMEOUT","TRANSPORT_CLOSED_BEFORE_STREAM_INIT","TRANSPORT_ESTABLISHMENT_ERROR","TRANSPORT_ESTABLISHMENT_TIMEOUT","ESTABLISHMENT_TIMEOUT","UNAUTHENTICATED","UNAUTHORIZED","REJECTED","BAD_REQUEST","DGW_SERVER_ERROR","ESTABLISHMENT_ERROR","ACK_TIMEOUT"]);function a(a){switch(a){case g.UNAUTHENTICATED:case g.UNAUTHORIZED:case g.REJECTED:case g.BAD_REQUEST:case g.UNKNOWN_ERROR:case g.SERVER_INTERNAL_ERROR:return!1;default:return!0}}f.StreamError=g;f.isRetryableError=a}),66);
__d("DGWCppBridge",[],(function(l,m,n,o,p,q){var r=function(){var l=typeof document!=="undefined"&&document.currentScript?document.currentScript.src:void 0;return function(m){m=m||{};var m=typeof m!=="undefined"?m:{},n=function(){function m(){}function n(l,m){return function(){l.apply(m,arguments)}}function l(m){if(!(this instanceof l))throw new TypeError("Promises must be constructed via new");if(typeof m!=="function")throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];t(m,this)}function o(m,n){while(m._state===3)m=m._value;if(m._state===0){m._deferreds.push(n);return}m._handled=!0;l._immediateFn(function(){var l=m._state===1?n.onFulfilled:n.onRejected;if(l===null){(m._state===1?p:q)(n.promise,m._value);return}var o;try{o=l(m._value)}catch(l){q(n.promise,l);return}p(n.promise,o)})}function p(m,o){try{if(o===m)throw new TypeError("A promise cannot be resolved with itself.");if(o&&(typeof o==="object"||typeof o==="function")){var p=o.then;if(o instanceof l){m._state=3;m._value=o;r(m);return}else if(typeof p==="function"){t(n(p,o),m);return}}m._state=1;m._value=o;r(m)}catch(l){q(m,l)}}function q(l,m){l._state=2,l._value=m,r(l)}function r(m){m._state===2&&m._deferreds.length===0&&l._immediateFn(function(){m._handled||l._unhandledRejectionFn(m._value)});for(var n=0,p=m._deferreds.length;n<p;n++)o(m,m._deferreds[n]);m._deferreds=null}function s(l,m,n){this.onFulfilled=typeof l==="function"?l:null,this.onRejected=typeof m==="function"?m:null,this.promise=n}function t(l,m){var n=!1;try{l(function(l){if(n)return;n=!0;p(m,l)},function(l){if(n)return;n=!0;q(m,l)})}catch(l){if(n)return;n=!0;q(m,l)}}l.prototype["catch"]=function(l){return this.then(null,l)};l.prototype.then=function(l,n){var p=new this.constructor(m);o(this,new s(l,n,p));return p};l.all=function(m){return new l(function(l,n){if(!Array.isArray(m))return n(new TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(m);if(o.length===0)return l([]);var p=o.length;function q(m,r){try{if(r&&(typeof r==="object"||typeof r==="function")){var s=r.then;if(typeof s==="function"){s.call(r,function(l){q(m,l)},n);return}}o[m]=r;--p===0&&l(o)}catch(l){n(l)}}for(var r=0;r<o.length;r++)q(r,o[r])})};l.resolve=function(m){return m&&typeof m==="object"&&m.constructor===l?m:new l(function(l){l(m)})};l.reject=function(m){return new l(function(l,n){n(m)})};l.race=function(m){return new l(function(n,o){if(!Array.isArray(m))return o(new TypeError("Promise.race accepts an array"));for(var p=0,q=m.length;p<q;p++)l.resolve(m[p]).then(n,o)})};l._immediateFn=typeof setImmediate==="function"&&function(l){setImmediate(l)}||function(l){setTimeout(l,0)};l._unhandledRejectionFn=function(l){typeof console!=="undefined"&&console};return l}(),o,s;m.ready=new n(function(l,m){o=l,s=m});var t={},u;for(u in m)Object.prototype.hasOwnProperty.call(m,u)&&(t[u]=m[u]);var v=[];(function(l,m){throw m});var w=!0,x=!1,y="";function z(l){return m.locateFile?m.locateFile(l,y):y+l}var A;(w||x)&&(x?y=self.location.href:typeof document!=="undefined"&&document.currentScript&&(y=document.currentScript.src),l&&(y=l),y.indexOf("blob:")!==0?y=y.substr(0,y.lastIndexOf("/")+1):y="",(function(l){try{var m=new XMLHttpRequest();m.open("GET",l,!1);m.send(null);return m.responseText}catch(n){m=ga(l);if(m)return fa(m);throw n}},x&&(A=function(l){try{var m=new XMLHttpRequest();m.open("GET",l,!1);m.responseType="arraybuffer";m.send(null);return new Uint8Array(m.response)}catch(n){m=ga(l);if(m)return m;throw n}}),function(l,m,n){var o=new XMLHttpRequest();o.open("GET",l,!0);o.responseType="arraybuffer";o.onload=function(){if(o.status==200||o.status==0&&o.response){m(o.response);return}var p=ga(l);if(p){m(p.buffer);return}n()};o.onerror=n;o.send(null)}),function(l){document.title=l});m.print||emptyFunction.bind(console);var B=m.printErr||emptyFunction.bind(console);for(u in t)Object.prototype.hasOwnProperty.call(t,u)&&(m[u]=t[u]);t=null;m.arguments&&(v=m.arguments);m.thisProgram&&m.thisProgram;m.quit&&m.quit;var C;m.wasmBinary&&(C=m.wasmBinary);m.noExitRuntime||!0;var D={Memory:function(l){this.buffer=new ArrayBuffer(l.initial*65536)},Module:function(l){},Instance:function(l,m){this.exports=function(l){function m(l){l.set=function(l,m){this[l]=m};l.get=function(l){return this[l]};return l}var n,o=new Uint8Array(123);for(var p=25;p>=0;--p)o[48+p]=52+p,o[65+p]=p,o[97+p]=26+p;o[43]=62;o[47]=63;function q(m,n,p){var q,r,l=0,s=n,t=p.length;n=n+(t*3>>2)-(p[t-2]=="=")-(p[t-1]=="=");for(;l<t;l+=4)q=o[p.charCodeAt(l+1)],r=o[p.charCodeAt(l+2)],m[s++]=o[p.charCodeAt(l)]<<2|q>>4,s<n&&(m[s++]=q<<4|r>>2),s<n&&(m[s++]=r<<6|o[p.charCodeAt(l+3)])}function r(l){q(n,1024,"U3Q5dHlwZV9pbmZvAAAAAOAEAAAABAAATjEwX19jeHhhYml2MTE2X19zaGltX3R5cGVfaW5mb0UAAAAACAUAABgEAAAQBAAATjEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm9FAAAACAUAAEgEAAA8BAAATjEwX19jeHhhYml2MTE3X19wYmFzZV90eXBlX2luZm9FAAAACAUAAHgEAAA8BAAATjEwX19jeHhhYml2MTE5X19wb2ludGVyX3R5cGVfaW5mb0UACAUAAKgEAACcBAAAAAAAAGwEAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAAAAABQBQAAAQAAAAkAAAADAAAABAAAAAUAAAAKAAAACwAAAAwAAABOMTBfX2N4eGFiaXYxMjBfX3NpX2NsYXNzX3R5cGVfaW5mb0UAAAAACAUAACgFAABsBA=="),q(n,1372,"gAkQ")}function s(l){var o=l.a,p=o.buffer;o.grow=xa;var q=new Int8Array(p),s=new Int16Array(p),t=new Int32Array(p),u=new Uint8Array(p),v=new Uint16Array(p),w=new Uint32Array(p);new Float32Array(p);new Float64Array(p);var x=Math.imul;Math.fround;Math.abs;var y=Math.clz32;Math.min;Math.max;Math.floor;Math.ceil;Math.trunc;Math.sqrt;l.abort;NaN;Infinity;var z=l.b,A=1051008,B;function C(o,p,l,r,m,n){o=o|0;p=p|0;l=l|0;r=r|0;m=m|0;n=n|0;var y=0,z=0,B;y=A-80|0;A=y;t[y+72>>2]=o;t[y+68>>2]=p;t[y+64>>2]=l;t[y+60>>2]=r;t[y+56>>2]=m;t[y+52>>2]=n;a:{if(t[y+52>>2]?!t[y+56>>2]|(!t[y+72>>2]|!t[y+68>>2]|(!t[y+64>>2]|!t[y+60>>2])):1){t[y+76>>2]=5;break a}t[t[y+64>>2]>>2]=0;t[t[y+60>>2]>>2]=0;p=t[y+68>>2];l=t[y+56>>2];r=t[y+52>>2];o=A+-64|0;A=o;t[o+56>>2]=t[y+72>>2];t[o+52>>2]=p;t[o+48>>2]=l;t[o+44>>2]=r;t[o+40>>2]=0;t[o+36>>2]=t[o+56>>2];b:{c:{d:{while(1){if(!t[o+52>>2])break c;t[o+32>>2]=t[o+36>>2];q[o+31|0]=u[t[o+36>>2]];t[o+52>>2]=t[o+52>>2]-1;t[o+36>>2]=t[o+36>>2]+1;if(u[o+31|0]!=10?u[o+31|0]==2|u[o+31|0]==4|u[o+31|0]==9:1){t[o+40>>2]=t[o+40>>2]+1;continue}t[o+24>>2]=1;if(V(u[o+31|0])&1){z=o,B=X(u[o+31|0])&1,q[z+23|0]=B;t[o+16>>2]=q[o+23|0]&1?1:2;if(w[o+52>>2]<w[o+16>>2]){t[t[o+48>>2]>>2]=t[o+32>>2];t[t[o+44>>2]>>2]=t[o+52>>2]+t[o+24>>2];break b}t[o+52>>2]=t[o+52>>2]-t[o+16>>2];t[o+24>>2]=t[o+16>>2]+t[o+24>>2];t[o+36>>2]=t[o+16>>2]+t[o+36>>2];if(!(u[o+31|0]!=14?u[o+31|0]!=8:0)){t[o+40>>2]=t[o+40>>2]+1;continue}}if(w[o+52>>2]<3)break d;t[o+12>>2]=0;p=t[o+36>>2];l=u[p|0]|u[p+1|0]<<8;q[o+12|0]=l;q[o+13|0]=l>>>8;q[o+14|0]=u[p+2|0];t[o+52>>2]=t[o+52>>2]-3;t[o+24>>2]=t[o+24>>2]+3;t[o+36>>2]=t[o+36>>2]+3;if(w[o+12>>2]<=w[o+52>>2]){t[o+40>>2]=t[o+40>>2]+1;t[o+36>>2]=t[o+12>>2]+t[o+36>>2];t[o+52>>2]=t[o+52>>2]-t[o+12>>2];continue}break}t[t[o+48>>2]>>2]=t[o+32>>2];t[t[o+44>>2]>>2]=t[o+52>>2]+t[o+24>>2];break b}t[t[o+48>>2]>>2]=t[o+32>>2];t[t[o+44>>2]>>2]=t[o+52>>2]+t[o+24>>2];break b}t[t[o+44>>2]>>2]=t[o+52>>2]}t[o+60>>2]=t[o+40>>2];A=o- -64|0;t[y+48>>2]=t[o+60>>2];if(!t[y+48>>2]){t[y+76>>2]=0;break a}z=y,B=D(x(t[y+48>>2],20)),t[z+44>>2]=B;if(!t[y+44>>2]){t[y+76>>2]=3;break a}t[y+40>>2]=t[y+44>>2];t[y+36>>2]=t[y+72>>2];t[y+32>>2]=t[y+68>>2]-t[t[y+52>>2]>>2];t[y+28>>2]=0;while(1){if(w[y+28>>2]<w[y+48>>2]){if(w[y+32>>2]<1){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=1;break a}q[y+27|0]=u[t[y+36>>2]];t[y+36>>2]=t[y+36>>2]+1;t[y+32>>2]=t[y+32>>2]-1;e:{if(!u[y+27|0]|u[y+27|0]==1|(u[y+27|0]==2|u[y+27|0]==3)|(u[y+27|0]==4|u[y+27|0]==9|u[y+27|0]==10))break e;if(V(u[y+27|0])&1)break e;O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=6;break a}o=t[y+40>>2];t[o>>2]=u[y+27|0]&15|t[o>>2]&-16;f:{if(u[y+27|0]!=10?u[y+27|0]==2|u[y+27|0]==4|u[y+27|0]==9:1){o=t[y+40>>2];t[o>>2]=t[o>>2]&-268435441;t[y+40>>2]=t[y+40>>2]+20;break f}if(V(u[y+27|0])&1){o=A-48|0;A=o;t[o+40>>2]=t[y+40>>2];t[o+36>>2]=y+36;t[o+32>>2]=y+32;g:{if(!(V(t[t[o+40>>2]>>2]&15)&1)){t[o+44>>2]=1;break g}z=o,B=X(t[t[o+40>>2]>>2]&15)&1,q[z+31|0]=B;t[o+24>>2]=q[o+31|0]&1?1:2;if(w[t[o+32>>2]>>2]<w[o+24>>2]){t[o+44>>2]=1;break g}ba(t[o+40>>2]+4|0,t[t[o+36>>2]>>2],t[o+24>>2]);p=t[o+36>>2];t[p>>2]=t[o+24>>2]+t[p>>2];p=t[o+32>>2];t[p>>2]=t[p>>2]-t[o+24>>2];if((t[t[o+40>>2]>>2]&15)==8){p=t[o+40>>2];t[p>>2]=t[p>>2]&-268435441;t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==14){p=t[o+40>>2];t[p>>2]=t[p>>2]&-268435441;t[o+44>>2]=0;break g}if(w[t[o+32>>2]>>2]<3){t[o+44>>2]=11;break g}t[o+20>>2]=0;p=t[t[o+36>>2]>>2];l=u[p|0]|u[p+1|0]<<8;q[o+20|0]=l;q[o+21|0]=l>>>8;q[o+22|0]=u[p+2|0];p=t[o+36>>2];t[p>>2]=t[p>>2]+3;p=t[o+32>>2];t[p>>2]=t[p>>2]-3;p=t[o+40>>2];t[p>>2]=t[p>>2]&-268435441|(t[o+20>>2]&16777215)<<4;if(w[t[o+32>>2]>>2]<w[o+20>>2]){t[o+44>>2]=11;break g}if((t[t[o+40>>2]>>2]&15)==15){t[t[o+40>>2]+12>>2]=t[o+20>>2];p=D(t[o+20>>2]);t[t[o+40>>2]+8>>2]=p;if(!t[t[o+40>>2]+8>>2]){t[o+44>>2]=3;break g}ba(t[t[o+40>>2]+8>>2],t[t[o+36>>2]>>2],t[o+20>>2]);p=t[o+36>>2];t[p>>2]=t[o+20>>2]+t[p>>2];p=t[o+32>>2];t[p>>2]=t[p>>2]-t[o+20>>2];t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==5){t[t[o+40>>2]+12>>2]=t[o+20>>2];p=D(t[o+20>>2]);t[t[o+40>>2]+8>>2]=p;if(!t[t[o+40>>2]+8>>2]){t[o+44>>2]=3;break g}ba(t[t[o+40>>2]+8>>2],t[t[o+36>>2]>>2],t[o+20>>2]);p=t[o+36>>2];t[p>>2]=t[o+20>>2]+t[p>>2];p=t[o+32>>2];t[p>>2]=t[p>>2]-t[o+20>>2];t[o+44>>2]=0;break g}h:{if(!((t[t[o+40>>2]>>2]&15)!=6?(t[t[o+40>>2]>>2]&15)!=7:0)){z=o,B=Q(t[o+36>>2],t[o+32>>2],o+19|0,o+18|0),t[z+12>>2]=B;if(t[o+12>>2]){t[o+44>>2]=t[o+12>>2];break g}break h}if(!((t[t[o+40>>2]>>2]&15)!=13?(t[t[o+40>>2]>>2]&15)!=12:0)){l=t[o+32>>2];p=A-32|0;t[p+24>>2]=t[o+36>>2];t[p+20>>2]=l;t[p+16>>2]=o+19;t[p+12>>2]=o+16;s[p+10>>1]=0;i:{if(w[t[p+20>>2]>>2]<2){t[p+28>>2]=1;break i}l=t[t[p+24>>2]>>2];l=u[l|0]|u[l+1|0]<<8;q[p+10|0]=l;q[p+11|0]=l>>>8;l=t[p+24>>2];t[l>>2]=t[l>>2]+2;l=t[p+20>>2];t[l>>2]=t[l>>2]-2;q[t[p+16>>2]]=(v[p+10>>1]&32768)==32768;s[t[p+12>>2]>>1]=v[p+10>>1]&32767;t[p+28>>2]=0}t[o+12>>2]=t[p+28>>2];if(t[o+12>>2]){t[o+44>>2]=t[o+12>>2];break g}}}if((t[t[o+40>>2]>>2]&15)==12){p=t[o+40>>2];s[p+8>>1]=s[p+8>>1]&1|v[o+16>>1]<<1;t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==7){p=t[o+40>>2];q[p+8|0]=q[p+8|0]&1|u[o+18|0]<<1;t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==13){l=t[o+32>>2];r=t[o+20>>2];m=t[o+40>>2]+12|0;n=t[o+40>>2];p=A-32|0;A=p;t[p+24>>2]=t[o+36>>2];t[p+20>>2]=l;t[p+16>>2]=r;t[p+12>>2]=m;t[p+8>>2]=n+16;j:{if(w[p+16>>2]<2){t[p+28>>2]=9;break j}t[t[p+8>>2]>>2]=t[p+16>>2]-2;if(w[t[p+20>>2]>>2]<w[t[p+8>>2]>>2]){t[p+28>>2]=1;break j}l=D(t[t[p+8>>2]>>2]);t[t[p+12>>2]>>2]=l;if(!t[t[p+12>>2]>>2]){t[p+28>>2]=3;break j}ba(t[t[p+12>>2]>>2],t[t[p+24>>2]>>2],t[t[p+8>>2]>>2]);l=t[p+24>>2];t[l>>2]=t[t[p+8>>2]>>2]+t[l>>2];l=t[p+20>>2];t[l>>2]=t[l>>2]-t[t[p+8>>2]>>2];t[p+28>>2]=0}A=p+32|0;t[o+8>>2]=t[p+28>>2];if(t[o+8>>2]){t[o+44>>2]=t[o+8>>2];break g}p=t[o+40>>2];s[p+8>>1]=q[o+19|0]&1|v[p+8>>1]&65534;p=t[o+40>>2];s[p+8>>1]=s[p+8>>1]&1|v[o+16>>1]<<1;t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==6){z=o,B=M(t[o+36>>2],t[o+32>>2],t[o+20>>2],t[o+40>>2]+12|0,t[o+40>>2]+16|0),t[z+4>>2]=B;if(t[o+4>>2]){t[o+44>>2]=t[o+4>>2];break g}p=t[o+40>>2];q[p+8|0]=q[o+19|0]&1|u[p+8|0]&254;p=t[o+40>>2];q[p+8|0]=q[p+8|0]&1|u[o+18|0]<<1;t[o+44>>2]=0;break g}t[o+44>>2]=1}A=o+48|0;t[y+20>>2]=t[o+44>>2];if(!t[y+20>>2]){t[y+40>>2]=t[y+40>>2]+20;break f}O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=t[y+20>>2];break a}t[y+16>>2]=0;if(w[y+32>>2]<3){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=1;break a}o=t[y+36>>2];p=u[o|0]|u[o+1|0]<<8;q[y+16|0]=p;q[y+17|0]=p>>>8;q[y+18|0]=u[o+2|0];t[y+36>>2]=t[y+36>>2]+3;t[y+32>>2]=t[y+32>>2]-3;if(!(t[y+16>>2]==1|u[y+27|0]!=1)){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=7;break a}o=t[y+40>>2];t[o>>2]=t[o>>2]&-268435441|(t[y+16>>2]&16777215)<<4;if(u[y+27|0]==3){if(t[y+16>>2]!=1){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=10;break a}q[y+15|0]=0;if(w[y+32>>2]<1){J(t[y+44>>2]);t[y+76>>2]=1;break a}q[y+15|0]=u[t[y+36>>2]];t[y+36>>2]=t[y+36>>2]+1;t[y+32>>2]=t[y+32>>2]-1;k:{if(u[y+15|0]<=4){q[t[y+40>>2]+4|0]=u[y+15|0];break k}q[t[y+40>>2]+4|0]=4}t[y+40>>2]=t[y+40>>2]+20;break f}z=y,B=Q(y+36|0,y+32|0,y+14|0,y+13|0),t[z+8>>2]=B;if(t[y+8>>2]){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=t[y+8>>2];break a}if(u[y+27|0]==1){o=t[y+40>>2];q[o+4|0]=q[o+4|0]&1|u[y+13|0]<<1;t[y+40>>2]=t[y+40>>2]+20;break f}if(!u[y+27|0]){z=y,B=M(y+36|0,y+32|0,t[y+16>>2],t[y+40>>2]+8|0,t[y+40>>2]+12|0),t[z+4>>2]=B;if(t[y+4>>2]){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=t[y+4>>2];break a}o=t[y+40>>2];q[o+4|0]=q[y+14|0]&1|u[o+4|0]&254;o=t[y+40>>2];q[o+4|0]=q[o+4|0]&1|u[y+13|0]<<1;t[y+40>>2]=t[y+40>>2]+20}}t[y+28>>2]=t[y+28>>2]+1;continue}break}if(t[y+32>>2]){O(t[y+44>>2],t[y+48>>2]);t[y+76>>2]=1;break a}t[t[y+64>>2]>>2]=t[y+44>>2];t[t[y+60>>2]>>2]=t[y+48>>2];t[y+76>>2]=0}A=y+80|0;return t[y+76>>2]}function D(o){var q=0,l=0,r=0,m=0,n=0,s=0,u=0,v,w=0,x,p;w=8;a:{b:{if(o>>>0>4294967239)break b;while(1){w=w>>>0>8?w:8;l=t[603];n=l;m=t[602];u=m;o=o>>>0>8?o+3&-4:8;c:{if(o>>>0<=127){s=(o>>>3|0)-1|0;break c}r=y(o);s=((o>>>29-r^4)-(r<<2)|0)+110|0;if(o>>>0<=4095)break c;r=((o>>>30-r^2)-(r<<1)|0)+71|0;s=r>>>0<63?r:63}q=s;r=q&31;(q&63)>>>0>=32?(q=0,l=l>>>r|0):(q=l>>>r|0,l=((1<<r)-1&l)<<32-r|u>>>r);r=q;if(l|q){while(1){n=l;q=r;d:{if(q|l){m=q-1|0;v=m+1|0;u=m;m=l-1|0;u=(m|0)!=-1?v:u;m=y(l^m)+32|0;l=y(q^u);l=(l|0)==32?m:l;q=63-l|0;0-(l>>>0>63)|0;break d}q=64}m=q;q=m;l=q&31;(q&63)>>>0>=32?(q=0,u=r>>>l|0):(q=r>>>l|0,u=((1<<l)-1&r)<<32-l|n>>>l);r=q;s=m+s|0;n=s<<4;q=t[n+1384>>2];m=n+1376|0;e:{if((q|0)!=(m|0)){l=I(q,w,o);if(l)break b;l=t[q+4>>2];t[l+8>>2]=t[q+8>>2];t[t[q+8>>2]+4>>2]=l;t[q+8>>2]=m;l=n+1380|0;t[q+4>>2]=t[l>>2];t[l>>2]=q;t[t[q+4>>2]+8>>2]=q;s=s+1|0;l=(r&1)<<31|u>>>1;r=r>>>1|0;break e}x=t[603];q=s;v=q&63;l=v;n=l&31;l>>>0>=32?(l=0,m=-1>>>n|0):(l=-1>>>n|0,m=(1<<n)-1<<32-n|-1>>>n);m=m&-2;n=v&31;v>>>0>=32?(l=m<<n,v=0):(l=(1<<n)-1&m>>>32-n|l<<n,v=m<<n);n=l;m=0-q&63;l=m;q=l&31;l>>>0>=32?(l=-1<<q,q=0):(l=(1<<q)-1&-1>>>32-q|-1<<q,q=-1<<q);p=q&-2;q=m&31;m>>>0>=32?(m=0,q=l>>>q|0):(m=l>>>q|0,q=((1<<q)-1&l)<<32-q|p>>>q);l=q|v;B=n|m;t[602]=t[602]&l;t[603]=B&x;l=u^1}if(l|r)continue;break}m=t[602];n=t[603]}f:{if(n|m){r=y(n);r=63-((r|0)==32?y(m)+32|0:r)<<4;q=r+1376|0;r=t[r+1384>>2];g:{if(!n&m>>>0<1073741824)break g;s=98;if((q|0)==(r|0))break g;while(1){l=I(r,w,o);if(l)break b;r=t[r+8>>2];if(!s)break g;s=s-1|0;if((q|0)!=(r|0))continue;break}}if(G(o+48|0))break f;if(!r|(q|0)==(r|0))break a;while(1){l=I(r,w,o);if(l)break b;r=t[r+8>>2];if((q|0)!=(r|0))continue;break}break a}if(!G(o+48|0))break a}l=0;if(o>>>0>4294967239)break b;r=w;q=0;while(1){s=q;if(r){r=r-1&r;q=q+1|0;continue}break}if(s>>>0<=1)continue;break}}return l}return 0}function E(o,p,l,r,m,n,x){o=o|0;p=p|0;l=l|0;r=r|0;m=m|0;n=n|0;x=x|0;var y=0,z=0;y=A-32|0;A=y;s[y+26>>1]=o;t[y+20>>2]=p;t[y+16>>2]=l;q[y+15|0]=r;s[y+12>>1]=m;t[y+8>>2]=n;t[y+4>>2]=x;a:{if(!(!(q[y+15|0]&1)|v[y+12>>1]<=32767)){t[y+28>>2]=4;break a}p=t[y+20>>2];l=t[y+16>>2];r=t[y+8>>2];m=t[y+4>>2];n=q[y+15|0]&1;o=A+-64|0;A=o;t[o+56>>2]=y+26;t[o+52>>2]=p;t[o+48>>2]=l;t[o+44>>2]=r;t[o+40>>2]=m;q[o+39|0]=2;q[o+38|0]=13;t[o+32>>2]=y+12;q[o+31|0]=n;q[o+30|0]=2;b:{c:{if(!(!t[o+52>>2]|(!t[o+44>>2]|!t[o+40>>2]))&&w[o+48>>2]<=16777215)break c;t[o+60>>2]=5;break b}t[o+24>>2]=t[o+48>>2]+(u[o+39|0]+(u[o+30|0]+4|0)|0);z=o,x=D(t[o+24>>2]),t[z+20>>2]=x;if(!t[o+20>>2]){t[o+60>>2]=3;break b}t[o+16>>2]=t[o+20>>2];q[t[o+16>>2]]=u[o+38|0];t[o+16>>2]=t[o+16>>2]+1;ba(t[o+16>>2],t[o+56>>2],u[o+30|0]);t[o+16>>2]=u[o+30|0]+t[o+16>>2];t[o+12>>2]=u[o+39|0]+t[o+48>>2];if(w[o+12>>2]<w[o+48>>2]){J(t[o+20>>2]);t[o+60>>2]=9;break b}p=t[o+16>>2];l=u[o+12|0]|u[o+13|0]<<8;q[p|0]=l;q[p+1|0]=l>>>8;q[p+2|0]=u[o+14|0];t[o+16>>2]=t[o+16>>2]+3;if(q[o+31|0]&1)d:{if(u[o+38|0]==6){p=t[o+32>>2];q[p|0]=u[p|0]|128;break d}e:{if(u[o+38|0]==13){p=t[o+32>>2];s[p>>1]=v[p>>1]|32768;break e}J(t[o+20>>2]);t[o+60>>2]=1;break b}}ba(t[o+16>>2],t[o+32>>2],u[o+39|0]);t[o+16>>2]=u[o+39|0]+t[o+16>>2];ba(t[o+16>>2],t[o+52>>2],t[o+48>>2]);t[t[o+44>>2]>>2]=t[o+20>>2];t[t[o+40>>2]>>2]=t[o+24>>2];t[o+60>>2]=0}A=o- -64|0;t[y+28>>2]=t[o+60>>2]}A=y+32|0;return t[y+28>>2]}function F(o,p,l,r,m){o=o|0;p=p|0;l=l|0;r=r|0;m=m|0;var n=0,v=0;n=A-32|0;A=n;s[n+30>>1]=o;t[n+24>>2]=p;t[n+20>>2]=l;t[n+16>>2]=r;t[n+12>>2]=m;p=t[n+24>>2];l=t[n+20>>2];r=t[n+16>>2];m=t[n+12>>2];o=A-48|0;A=o;t[o+40>>2]=n+30;t[o+36>>2]=p;t[o+32>>2]=l;t[o+28>>2]=r;t[o+24>>2]=m;q[o+23|0]=2;q[o+22|0]=15;a:{if(!(t[o+24>>2]?t[o+28>>2]:0)){t[o+44>>2]=5;break a}t[t[o+28>>2]>>2]=0;t[t[o+24>>2]>>2]=0;if(!(w[o+32>>2]<=16777215?t[o+36>>2]:0)){t[o+44>>2]=5;break a}t[o+16>>2]=t[o+32>>2]+(u[o+23|0]+4|0);v=o,r=D(t[o+16>>2]),t[v+12>>2]=r;if(!t[o+12>>2]){t[o+44>>2]=3;break a}t[o+8>>2]=t[o+12>>2];q[t[o+8>>2]]=u[o+22|0];t[o+8>>2]=t[o+8>>2]+1;ba(t[o+8>>2],t[o+40>>2],u[o+23|0]);t[o+8>>2]=u[o+23|0]+t[o+8>>2];p=t[o+8>>2];l=u[o+32|0]|u[o+33|0]<<8;q[p|0]=l;q[p+1|0]=l>>>8;q[p+2|0]=u[o+34|0];t[o+8>>2]=t[o+8>>2]+3;ba(t[o+8>>2],t[o+36>>2],t[o+32>>2]);t[o+8>>2]=t[o+32>>2]+t[o+8>>2];t[t[o+28>>2]>>2]=t[o+12>>2];t[t[o+24>>2]>>2]=t[o+16>>2];t[o+44>>2]=0}A=o+48|0;A=n+32|0;return t[o+44>>2]}function G(o){var p=0,l,r=0,m=0,n,s=0;r=t[343];l=o+3&-4;p=r+l|0;a:{b:{if(p>>>0<=r>>>0?l:0)break b;if(p>>>0>wa()<<16>>>0&&!(z(p|0)|0))break b;t[343]=p;break a}t[604]=48;r=-1}if((r|0)!=-1){l=o+r|0;p=l-16|0;t[p+12>>2]=16;t[p>>2]=16;o=t[600];o?s=t[o+8>>2]:s=0;c:{d:{if((s|0)==(r|0)){m=r-(t[r-4>>2]&-2)|0;n=t[m-4>>2];t[o+8>>2]=l;o=m-(n&-2)|0;l=-16;if(!(q[(o+t[o>>2]|0)-4|0]&1))break d;l=t[o+4>>2];t[l+8>>2]=t[o+8>>2];t[t[o+8>>2]+4>>2]=l;p=p-o|0;t[o>>2]=p;break c}t[r+12>>2]=16;t[r>>2]=16;t[r+8>>2]=l;t[r+4>>2]=o;t[600]=r;l=16}o=r+l|0;p=p-o|0;t[o>>2]=p}t[((p&-4)+o|0)-4>>2]=p|1;s=o;m=t[o>>2]-8|0;e:{if(m>>>0<=127){p=(m>>>3|0)-1|0;break e}n=y(m);p=((m>>>29-n^4)-(n<<2)|0)+110|0;if(m>>>0<=4095)break e;p=((m>>>30-n^2)-(n<<1)|0)+71|0;p=p>>>0<63?p:63}l=p<<4;t[s+4>>2]=l+1376;l=l+1384|0;t[o+8>>2]=t[l>>2];t[l>>2]=o;t[t[o+8>>2]+4>>2]=o;l=t[603];o=p&31;(p&63)>>>0>=32?(p=1<<o,o=0):(p=(1<<o)-1&1>>>32-o,o=1<<o);t[602]=o|t[602];t[603]=p|l}return(r|0)!=-1}function la(o,p,l,r){o=o|0;p=p|0;l=l|0;r=r|0;var m=0,n=0;m=A-16|0;A=m;s[m+10>>1]=o;s[m+8>>1]=p;t[m+4>>2]=l;t[m>>2]=r;a:{if(v[m+8>>1]>32767){t[m+12>>2]=4;break a}p=t[m+4>>2];l=t[m>>2];o=A-48|0;A=o;t[o+40>>2]=m+10;t[o+36>>2]=p;t[o+32>>2]=l;q[o+31|0]=2;q[o+30|0]=12;t[o+24>>2]=m+8;q[o+23|0]=2;b:{if(!(t[o+32>>2]?t[o+36>>2]:0)){t[o+44>>2]=5;break b}t[o+16>>2]=u[o+31|0]+(u[o+23|0]+4|0);n=o,r=D(t[o+16>>2]),t[n+12>>2]=r;if(!t[o+12>>2]){t[o+44>>2]=3;break b}t[o+8>>2]=t[o+12>>2];q[t[o+8>>2]]=u[o+30|0];t[o+8>>2]=t[o+8>>2]+1;ba(t[o+8>>2],t[o+40>>2],u[o+23|0]);t[o+8>>2]=u[o+23|0]+t[o+8>>2];t[o+4>>2]=u[o+31|0];p=t[o+8>>2];l=u[o+4|0]|u[o+5|0]<<8;q[p|0]=l;q[p+1|0]=l>>>8;q[p+2|0]=u[o+6|0];t[o+8>>2]=t[o+8>>2]+3;ba(t[o+8>>2],t[o+24>>2],u[o+31|0]);t[t[o+32>>2]>>2]=t[o+16>>2];t[t[o+36>>2]>>2]=t[o+12>>2];t[o+44>>2]=0}A=o+48|0;t[m+12>>2]=t[o+44>>2]}A=m+16|0;return t[m+12>>2]}function H(o,p,l){o=o|0;p=p|0;l=l|0;var q=0,m=0,n=0,r=0,s=0;n=A+-64|0;A=n;m=1;a:{if(R(o,p,0))break a;m=0;if(!p)break a;q=A+-64|0;A=q;m=t[p>>2];r=t[m-4>>2];s=t[m-8>>2];t[q+20>>2]=0;t[q+16>>2]=1084;t[q+12>>2]=p;t[q+8>>2]=1132;m=0;ca(q+24|0,39);p=p+s|0;b:{if(R(r,1132,0)){t[q+56>>2]=1;ka[t[t[r>>2]+20>>2]](r,q+8|0,p,p,1,0);m=t[q+32>>2]==1?p:0;break b}ka[t[t[r>>2]+24>>2]](r,q+8|0,p,1,0);c:switch(t[q+44>>2]){case 0:m=t[q+48>>2]==1?t[q+36>>2]==1?t[q+40>>2]==1?t[q+28>>2]:0:0:0;break b;case 1:break c;default:break b}if(t[q+48>>2]|t[q+36>>2]!=1|t[q+40>>2]!=1?t[q+32>>2]!=1:0)break b;m=t[q+24>>2]}A=q- -64|0;p=m;m=0;if(!p)break a;ca(n+8|4,52);t[n+56>>2]=1;t[n+20>>2]=-1;t[n+16>>2]=o;t[n+8>>2]=p;ka[t[t[p>>2]+28>>2]](p,n+8|0,t[l>>2],1);o=t[n+32>>2];(o|0)==1&&(t[l>>2]=t[n+24>>2]);m=(o|0)==1}o=m;A=n- -64|0;return o|0}function I(o,p,l){var q=0,m,n=0,r=0;q=o+4|0;m=(q+p|0)-1&0-p;p=t[o>>2];if(m+l>>>0<=(p+o|0)-4>>>0){n=t[o+4>>2];t[n+8>>2]=t[o+8>>2];t[t[o+8>>2]+4>>2]=n;(q|0)!=(m|0)&&(m=m-q|0,n=o-(t[o-4>>2]&-2)|0,q=m+t[n>>2]|0,t[n>>2]=q,t[(n+(q&-4)|0)-4>>2]=q,o=o+m|0,p=p-m|0,t[o>>2]=p);a:{if(l+24>>>0<=p>>>0){q=(o+l|0)+8|0;p=(p-l|0)-8|0;t[q>>2]=p;t[(q+(p&-4)|0)-4>>2]=p|1;r=q;n=t[q>>2]-8|0;b:{if(n>>>0<=127){m=(n>>>3|0)-1|0;break b}p=y(n);m=((n>>>29-p^4)-(p<<2)|0)+110|0;if(n>>>0<=4095)break b;p=((n>>>30-p^2)-(p<<1)|0)+71|0;m=p>>>0<63?p:63}p=m;m=p<<4;t[r+4>>2]=m+1376;m=m+1384|0;t[q+8>>2]=t[m>>2];t[m>>2]=q;t[t[q+8>>2]+4>>2]=q;m=t[603];q=p&31;(p&63)>>>0>=32?(p=1<<q,r=0):(p=(1<<q)-1&1>>>32-q,r=1<<q);t[602]=r|t[602];t[603]=p|m;p=l+8|0;t[o>>2]=p;t[((p&-4)+o|0)-4>>2]=p;break a}t[(o+p|0)-4>>2]=p}o=o+4|0}else o=0;return o}function J(o){var p=0,l,q=0,m,n=0;if(o){l=o-4|0;m=t[l>>2];q=m;p=l;n=t[o-8>>2];o=n&-2;(o|0)!=(n|0)&&(p=l-o|0,q=t[p+4>>2],t[q+8>>2]=t[p+8>>2],t[t[p+8>>2]+4>>2]=q,q=o+m|0);o=l+m|0;l=t[o>>2];(l|0)!=t[(o+l|0)-4>>2]&&(m=t[o+4>>2],t[m+8>>2]=t[o+8>>2],t[t[o+8>>2]+4>>2]=m,q=q+l|0);t[p>>2]=q;t[((q&-4)+p|0)-4>>2]=q|1;n=p;q=t[p>>2]-8|0;a:{if(q>>>0<=127){o=(q>>>3|0)-1|0;break a}m=y(q);o=((q>>>29-m^4)-(m<<2)|0)+110|0;if(q>>>0<=4095)break a;o=((q>>>30-m^2)-(m<<1)|0)+71|0;o=o>>>0<63?o:63}l=o<<4;t[n+4>>2]=l+1376;l=l+1384|0;t[p+8>>2]=t[l>>2];t[l>>2]=p;t[t[p+8>>2]+4>>2]=p;l=t[603];p=o&31;(o&63)>>>0>=32?(o=1<<p,p=0):(o=(1<<p)-1&1>>>32-p,p=1<<p);t[602]=p|t[602];t[603]=o|l}}function K(n,o,l){n=n|0;o=o|0;l=l|0;var p=0,m=0;p=A-48|0;A=p;t[p+40>>2]=n;t[p+36>>2]=o;t[p+32>>2]=l;a:{if(!(t[p+32>>2]?t[p+36>>2]:0)){t[p+44>>2]=5;break a}if(w[p+40>>2]>4){t[p+44>>2]=8;break a}t[p+28>>2]=5;m=p,l=D(t[p+28>>2]),t[m+24>>2]=l;if(!t[p+24>>2]){t[p+44>>2]=3;break a}t[p+20>>2]=t[p+24>>2];q[p+19|0]=3;q[t[p+20>>2]]=u[p+19|0];t[p+20>>2]=t[p+20>>2]+1;t[p+12>>2]=1;n=t[p+20>>2];o=u[p+12|0]|u[p+13|0]<<8;q[n|0]=o;q[n+1|0]=o>>>8;q[n+2|0]=u[p+14|0];t[p+20>>2]=t[p+20>>2]+3;q[p+11|0]=t[p+40>>2];q[t[p+20>>2]]=u[p+11|0];t[t[p+36>>2]>>2]=t[p+24>>2];t[t[p+32>>2]>>2]=t[p+28>>2];t[p+44>>2]=0}A=p+48|0;return t[p+44>>2]}function L(n,o,l,p,m){n=n|0;o=o|0;l=l|0;p=p|0;m=m|0;if(R(n,t[o+8>>2],m)){da(o,l,p);return}a:{if(R(n,t[o>>2],m)){if(!(t[o+20>>2]!=(l|0)?t[o+16>>2]!=(l|0):0)){if((p|0)!=1)break a;t[o+32>>2]=1;return}t[o+32>>2]=p;b:{if(t[o+44>>2]==4)break b;s[o+52>>1]=0;n=t[n+8>>2];ka[t[t[n>>2]+20>>2]](n,o,l,l,1,m);if(u[o+53|0]){t[o+44>>2]=3;if(!u[o+52|0])break b;break a}t[o+44>>2]=4}t[o+20>>2]=l;t[o+40>>2]=t[o+40>>2]+1;if(t[o+36>>2]!=1|t[o+24>>2]!=2)break a;q[o+54|0]=1;return}n=t[n+8>>2];ka[t[t[n>>2]+24>>2]](n,o,l,p,m)}}function M(o,p,l,q,m){var n=0;n=A-32|0;A=n;t[n+24>>2]=o;t[n+20>>2]=p;t[n+16>>2]=l;t[n+12>>2]=q;t[n+8>>2]=m;a:{if(w[n+16>>2]<1){t[n+28>>2]=9;break a}t[t[n+8>>2]>>2]=t[n+16>>2]-1;if(w[t[n+20>>2]>>2]<w[t[n+8>>2]>>2]){t[n+28>>2]=1;break a}o=D(t[t[n+8>>2]>>2]);t[t[n+12>>2]>>2]=o;if(!t[t[n+12>>2]>>2]){t[n+28>>2]=3;break a}ba(t[t[n+12>>2]>>2],t[t[n+24>>2]>>2],t[t[n+8>>2]>>2]);o=t[n+24>>2];t[o>>2]=t[t[n+8>>2]>>2]+t[o>>2];o=t[n+20>>2];t[o>>2]=t[o>>2]-t[t[n+8>>2]>>2];t[n+28>>2]=0}A=n+32|0;return t[n+28>>2]}function N(n,o,l){n=n|0;o=o|0;l=l|0;var p=0,m=0;p=A-32|0;A=p;s[p+26>>1]=n;t[p+20>>2]=o;t[p+16>>2]=l;t[t[p+16>>2]>>2]=3;m=p,l=D(t[t[p+16>>2]>>2]),t[m+12>>2]=l;a:{if(!t[p+12>>2]){t[p+28>>2]=3;break a}t[t[p+20>>2]>>2]=t[p+12>>2];q[p+11|0]=14;q[t[p+12>>2]]=u[p+11|0];t[p+12>>2]=t[p+12>>2]+1;n=t[p+12>>2];o=u[p+26|0]|u[p+27|0]<<8;q[n|0]=o;q[n+1|0]=o>>>8;t[p+28>>2]=0}A=p+32|0;return t[p+28>>2]}function O(m,n){var l=0;l=A-16|0;A=l;t[l+12>>2]=m;t[l+8>>2]=n;t[l+4>>2]=0;while(1){if(w[l+4>>2]<w[l+8>>2]){t[l>>2]=t[l+12>>2]+x(t[l+4>>2],20);a:{if(!(t[t[l>>2]>>2]&15)){J(t[t[l>>2]+8>>2]);break a}b:{if((t[t[l>>2]>>2]&15)==5){J(t[t[l>>2]+8>>2]);break b}(t[t[l>>2]>>2]&15)==6&&J(t[t[l>>2]+12>>2])}}t[l+4>>2]=t[l+4>>2]+1;continue}break}J(t[l+12>>2]);A=l+16|0}function P(m,n,l,o){q[m+53|0]=1;a:{if(t[m+4>>2]!=(l|0))break a;q[m+52|0]=1;l=t[m+16>>2];if(!l){t[m+36>>2]=1;t[m+24>>2]=o;t[m+16>>2]=n;if((o|0)!=1|t[m+48>>2]!=1)break a;q[m+54|0]=1;return}if((n|0)==(l|0)){l=t[m+24>>2];(l|0)==2&&(t[m+24>>2]=o,l=o);if(t[m+48>>2]!=1|(l|0)!=1)break a;q[m+54|0]=1;return}q[m+54|0]=1;t[m+36>>2]=t[m+36>>2]+1}}function Q(n,o,l,p){var m;m=A-32|0;t[m+24>>2]=n;t[m+20>>2]=o;t[m+16>>2]=l;t[m+12>>2]=p;q[m+11|0]=0;a:{if(w[t[m+20>>2]>>2]<1){t[m+28>>2]=1;break a}q[m+11|0]=u[t[t[m+24>>2]>>2]];n=t[m+24>>2];t[n>>2]=t[n>>2]+1;n=t[m+20>>2];t[n>>2]=t[n>>2]-1;q[t[m+16>>2]]=(u[m+11|0]&128)==128;q[t[m+12>>2]]=u[m+11|0]&127;t[m+28>>2]=0}return t[m+28>>2]}function ma(n,o,l,p,m){n=n|0;o=o|0;l=l|0;p=p|0;m=m|0;if(R(n,t[o+8>>2],m)){da(o,l,p);return}a:{if(!R(n,t[o>>2],m))break a;if(!(t[o+20>>2]!=(l|0)?t[o+16>>2]!=(l|0):0)){if((p|0)!=1)break a;t[o+32>>2]=1;return}t[o+20>>2]=l;t[o+32>>2]=p;t[o+40>>2]=t[o+40>>2]+1;t[o+36>>2]!=1|t[o+24>>2]!=2||(q[o+54|0]=1);t[o+44>>2]=4}}function R(m,n,l){var o;if(!l)return t[m+4>>2]==t[n+4>>2];if((m|0)==(n|0))return 1;l=t[m+4>>2];m=u[l|0];n=t[n+4>>2];o=u[n|0];a:{if(!m|(o|0)!=(m|0))break a;while(1){o=u[n+1|0];m=u[l+1|0];if(!m)break a;n=n+1|0;l=l+1|0;if((m|0)==(o|0))continue;break}}return(m|0)==(o|0)}function na(m,n){m=m|0;n=n|0;var l=0,o=0;l=A-32|0;A=l;t[l+24>>2]=m;t[l+20>>2]=n;o=l,m=D(1),t[o+16>>2]=m;a:{if(!t[l+16>>2]){t[l+28>>2]=3;break a}q[l+15|0]=9;q[t[l+16>>2]]=u[l+15|0];t[t[l+24>>2]>>2]=t[l+16>>2];t[t[l+20>>2]>>2]=1;t[l+28>>2]=0}A=l+32|0;return t[l+28>>2]}function S(m,n){m=m|0;n=n|0;var l=0,o=0;l=A-32|0;A=l;t[l+24>>2]=m;t[l+20>>2]=n;o=l,m=D(1),t[o+16>>2]=m;a:{if(!t[l+16>>2]){t[l+28>>2]=3;break a}q[l+15|0]=10;q[t[l+16>>2]]=u[l+15|0];t[t[l+24>>2]>>2]=t[l+16>>2];t[t[l+20>>2]>>2]=1;t[l+28>>2]=0}A=l+32|0;return t[l+28>>2]}function T(m,n){m=m|0;n=n|0;var l=0,o=0;l=A-32|0;A=l;t[l+24>>2]=m;t[l+20>>2]=n;o=l,m=D(1),t[o+16>>2]=m;a:{if(!t[l+16>>2]){t[l+28>>2]=3;break a}q[l+15|0]=2;q[t[l+16>>2]]=u[l+15|0];t[t[l+24>>2]>>2]=t[l+16>>2];t[t[l+20>>2]>>2]=1;t[l+28>>2]=0}A=l+32|0;return t[l+28>>2]}function U(m,n){m=m|0;n=n|0;var l=0,o=0;l=A-32|0;A=l;t[l+24>>2]=m;t[l+20>>2]=n;o=l,m=D(1),t[o+16>>2]=m;a:{if(!t[l+16>>2]){t[l+28>>2]=3;break a}q[l+15|0]=4;q[t[l+16>>2]]=u[l+15|0];t[t[l+24>>2]>>2]=t[l+16>>2];t[t[l+20>>2]>>2]=1;t[l+28>>2]=0}A=l+32|0;return t[l+28>>2]}function V(l){var m=0;m=A-16|0;A=m;t[m+12>>2]=l;l=1;a:{if(X(t[m+12>>2])&1)break a;l=1;if(t[m+12>>2]==15)break a;l=1;if(t[m+12>>2]==13)break a;l=1;if(t[m+12>>2]==12)break a;l=t[m+12>>2]==14}A=m+16|0;return l}function W(m,n,l){var o;o=t[m+16>>2];if(!o){t[m+36>>2]=1;t[m+24>>2]=l;t[m+16>>2]=n;return}a:{if((n|0)==(o|0)){if(t[m+24>>2]!=2)break a;t[m+24>>2]=l;return}q[m+54|0]=1;t[m+24>>2]=2;t[m+36>>2]=t[m+36>>2]+1}}function X(l){var m;m=A-16|0;t[m+12>>2]=l;l=1;a:{if(t[m+12>>2]==5)break a;l=1;if(t[m+12>>2]==6)break a;l=1;if(t[m+12>>2]==7)break a;l=t[m+12>>2]==8}return l}function Y(o,p,l,q,m,n){o=o|0;p=p|0;l=l|0;q=q|0;m=m|0;n=n|0;if(R(o,t[p+8>>2],n)){P(p,l,q,m);return}o=t[o+8>>2];ka[t[t[o>>2]+20>>2]](o,p,l,q,m,n)}function Z(){var m=0,n,l;while(1){n=m<<4;l=n+1376|0;t[n+1380>>2]=l;t[n+1384>>2]=l;m=m+1|0;if((m|0)!=64)continue;break}G(48)}function $(m,n,l,o){m=m|0;n=n|0;l=l|0;o=o|0;if(R(m,t[n+8>>2],0)){W(n,l,o);return}m=t[m+8>>2];ka[t[t[m>>2]+28>>2]](m,n,l,o)}function aa(o,p,l,q,m,n){o=o|0,p=p|0,l=l|0,q=q|0,m=m|0,n=n|0,R(o,t[p+8>>2],n)&&P(p,l,q,m)}function ba(m,n,l){if(l)while(1){q[m|0]=u[n|0];m=m+1|0;n=n+1|0;l=l-1|0;if(l)continue;break}}function ca(l,m){if(m)while(1){q[l|0]=0;l=l+1|0;m=m-1|0;if(m)continue;break}}function oa(m,n,l,o){m=m|0,n=n|0,l=l|0,o=o|0,R(m,t[n+8>>2],0)&&W(n,l,o)}function da(m,n,l){t[m+28>>2]==1|t[m+4>>2]!=(n|0)||(t[m+28>>2]=l)}function pa(l,m){l=l|0;m=m|0;return x(m,20)+l|0}function ea(l){l=l|0;return v[l+8>>1]>>>1|0}function qa(l){l=l|0;return s[l+8>>1]&1}function fa(l){l=l|0;return t[l+12>>2]}function ra(l){l=l|0;return t[l>>2]&15}function sa(l){l=l|0;return t[l+16>>2]}function ga(l){l=l|0;return v[l+4>>1]}function ha(l){l=l|0;return t[l+8>>2]}function ia(l){l=l|0;return u[l+4|0]}function ja(l){l=l|0;return l|0}function ta(l){return D(l)}function ua(l){l=l|0,J(l)}function va(l){l|0}n=u;r(l);var ka=m([null,ja,ua,va,va,H,aa,ma,oa,ua,Y,L,$]);function wa(){return p.byteLength/65536|0}function xa(l){l=l|0;var m=wa()|0;l=m+l|0;if(m<l&&l<65536){l=new ArrayBuffer(x(l,65536));var r=new Int8Array(l);r.set(q);q=new Int8Array(l);s=new Int16Array(l);t=new Int32Array(l);u=new Uint8Array(l);v=new Uint16Array(l);w=new Uint32Array(l);new Float32Array(l);new Float64Array(l);p=l;o.buffer=p;n=u}return m}return{c:Z,d:ta,e:ua,f:T,g:U,h:K,i:F,j:N,k:E,l:la,m:na,n:S,o:C,p:ra,q:ia,r:pa,s:ga,t:ha,u:fa,v:fa,w:sa,x:ea,y:qa,z:ea,A:ka}}return s(l)}(ha)},instantiate:function(l,m){return{then:function(n){var m=new D.Module(l);n({instance:new D.Instance(m)})}}},RuntimeError:Error};C=[];typeof D!=="object"&&Y("no native wasm support detected");var E,F=!1;function G(l,m){l||Y("Assertion failed: "+m)}function la(l,m){l%m>0&&(l+=m-l%m);return l}var H,I;function J(l){H=l,m.HEAP8=new Int8Array(l),m.HEAP16=new Int16Array(l),m.HEAP32=new Int32Array(l),m.HEAPU8=I=new Uint8Array(l),m.HEAPU16=new Uint16Array(l),m.HEAPU32=new Uint32Array(l),m.HEAPF32=new Float32Array(l),m.HEAPF64=new Float64Array(l)}u=m.INITIAL_MEMORY||2097152;m.wasmMemory?E=m.wasmMemory:E=new D.Memory({initial:u/65536,maximum:2147483648/65536});E&&(H=E.buffer);H.byteLength;J(H);var K,L=[],M=[],N=[];function O(){if(m.preRun){typeof m.preRun=="function"&&(m.preRun=[m.preRun]);while(m.preRun.length)ma(m.preRun.shift())}da(L)}function P(){da(M)}function Q(){if(m.postRun){typeof m.postRun=="function"&&(m.postRun=[m.postRun]);while(m.postRun.length)na(m.postRun.shift())}da(N)}function ma(l){L.unshift(l)}function R(l){M.unshift(l)}function na(l){N.unshift(l)}(!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function(l,m){var n=l>>>16;l=l&65535;var o=m>>>16;m=m&65535;return l*m+(n*m+l*o<<16)|0});if(!Math.fround){var S=new Float32Array(1);Math.fround=function(l){S[0]=l;return S[0]}}Math.clz32||(Math.clz32=function(l){var m=32,n=l>>16;n&&(m-=16,l=n);n=l>>8;n&&(m-=8,l=n);n=l>>4;n&&(m-=4,l=n);n=l>>2;n&&(m-=2,l=n);n=l>>1;return n?m-2:m-l});Math.trunc||(Math.trunc=function(l){return l<0?Math.ceil(l):Math.floor(l)});var T=0,U=null,V=null;function W(l){T++,m.monitorRunDependencies&&m.monitorRunDependencies(T)}function X(l){T--;m.monitorRunDependencies&&m.monitorRunDependencies(T);if(T==0){U!==null&&(clearInterval(U),U=null);if(V){l=V;V=null;l()}}}m.preloadedImages={};m.preloadedAudios={};function Y(l){m.onAbort&&m.onAbort(l);l+="";B(l);F=!0;l="abort("+l+"). Build with -s ASSERTIONS=1 for more info.";l=new D.RuntimeError(l);s(l);throw l}var Z="data:application/octet-stream;base64,";function $(l){return l.startsWith(Z)}var aa="dgwcppbridge.wasm";$(aa)||(aa=z(aa));function ba(l){try{if(l==aa&&C)return new Uint8Array(C);var m=ga(l);if(m)return m;if(A)return A(l);else throw"both async and sync fetching of the wasm failed"}catch(l){Y(l)}}function ca(){return!C&&(w||x)&&typeof fetch==="function"?fetch(aa,{credentials:"same-origin"}).then(function(l){if(!l.ok)throw"failed to load wasm binary file at '"+aa+"'";return l.arrayBuffer()})["catch"](function(){return ba(aa)}):n.resolve().then(function(){return ba(aa)})}function oa(){var n={a:ha};function o(n,l){l=n.exports;m.asm=l;K=m.asm.A;R(m.asm.c);X("wasm-instantiate")}W("wasm-instantiate");function r(l){o(l.instance)}function t(l){return ca().then(function(l){l=D.instantiate(l,n);return l}).then(l,function(l){B("failed to asynchronously prepare wasm: "+l),Y(l)})}function u(){if(!C&&typeof D.instantiateStreaming==="function"&&!$(aa)&&typeof fetch==="function")return fetch(aa,{credentials:"same-origin"}).then(function(l){l=D.instantiateStreaming(l,n);return l.then(r,function(l){B("wasm streaming compile failed: "+l);B("falling back to ArrayBuffer instantiation");return t(r)})});else return t(r)}if(m.instantiateWasm)try{var l=m.instantiateWasm(n,o);return l}catch(l){B("Module.instantiateWasm callback failed with error: "+l);return!1}u()["catch"](s);return{}}function da(l){while(l.length>0){var n=l.shift();if(typeof n=="function"){n(m);continue}var o=n.func;typeof o==="number"?n.arg===void 0?K.get(o)():K.get(o)(n.arg):o(n.arg===void 0?null:n.arg)}}function pa(l){try{E.grow(l-H.byteLength+65535>>>16);J(E.buffer);return 1}catch(l){}}function ea(l){var m=I.length;l=l>>>0;var n=2147483648;if(l>n)return!1;for(var o=1;o<=4;o*=2){var p=m*(1+.2/o);p=Math.min(p,l+100663296);p=Math.min(n,la(Math.max(l,p),65536));p=pa(p);if(p)return!0}return!1}var qa=!1;function fa(l){var m=[];for(var n=0;n<l.length;n++){var o=l[n];o>255&&(qa&&G(!1,"Character code "+o+" ("+String.fromCharCode(o)+")  at offset "+n+" not in 0x00-0xFF."),o&=255);m.push(String.fromCharCode(o))}return m.join("")}var ra=typeof atob==="function"?atob:function(l){var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="",o,p,q,r,s,t=0;l=l.replace(/[^A-Za-z0-9\+\/\=]/g,"");do p=m.indexOf(l.charAt(t++)),q=m.indexOf(l.charAt(t++)),r=m.indexOf(l.charAt(t++)),s=m.indexOf(l.charAt(t++)),p=p<<2|q>>4,q=(q&15)<<4|r>>2,o=(r&3)<<6|s,n=n+String.fromCharCode(p),r!==64&&(n=n+String.fromCharCode(q)),s!==64&&(n=n+String.fromCharCode(o));while(t<l.length);return n};function sa(l){try{l=ra(l);var m=new Uint8Array(l.length);for(var n=0;n<l.length;++n)m[n]=l.charCodeAt(n);return m}catch(l){throw new Error("Converting base64 string to bytes failed.")}}function ga(l){if(!$(l))return;return sa(l.slice(Z.length))}var ha={b:ea,a:E};oa();m.___wasm_call_ctors=function(){return(m.___wasm_call_ctors=m.asm.c).apply(null,arguments)};m.__malloc=function(){return(m.__malloc=m.asm.d).apply(null,arguments)};m.__free=function(){return(m.__free=m.asm.e).apply(null,arguments)};m.__DgwCodecEncodeEmpty=function(){return(m.__DgwCodecEncodeEmpty=m.asm.f).apply(null,arguments)};m.__DgwCodecEncodeDeauth=function(){return(m.__DgwCodecEncodeDeauth=m.asm.g).apply(null,arguments)};m.__DgwCodecEncodeDrain=function(){return(m.__DgwCodecEncodeDrain=m.asm.h).apply(null,arguments)};m.__DgwCodecEncodeStreamGroup_EstabStream=function(){return(m.__DgwCodecEncodeStreamGroup_EstabStream=m.asm.i).apply(null,arguments)};m.__DgwCodecEncodeStreamGroup_EndOfData=function(){return(m.__DgwCodecEncodeStreamGroup_EndOfData=m.asm.j).apply(null,arguments)};m.__DgwCodecEncodeStreamGroup_Data=function(){return(m.__DgwCodecEncodeStreamGroup_Data=m.asm.k).apply(null,arguments)};m.__DgwCodecEncodeStreamGroup_Ack=function(){return(m.__DgwCodecEncodeStreamGroup_Ack=m.asm.l).apply(null,arguments)};m.__DgwCodecEncodePing=function(){return(m.__DgwCodecEncodePing=m.asm.m).apply(null,arguments)};m.__DgwCodecEncodePong=function(){return(m.__DgwCodecEncodePong=m.asm.n).apply(null,arguments)};m.__DgwCodecDecode=function(){return(m.__DgwCodecDecode=m.asm.o).apply(null,arguments)};m.__getFrameType=function(){return(m.__getFrameType=m.asm.p).apply(null,arguments)};m.__getDrainReasonFromDrainFrame=function(){return(m.__getDrainReasonFromDrainFrame=m.asm.q).apply(null,arguments)};m.__getDGWFramePtr=function(){return(m.__getDGWFramePtr=m.asm.r).apply(null,arguments)};m.__getStreamIdFromStreamGroupFrame=function(){return(m.__getStreamIdFromStreamGroupFrame=m.asm.s).apply(null,arguments)};m.__getEncodedParamsFromEstablishStreamFrame=function(){return(m.__getEncodedParamsFromEstablishStreamFrame=m.asm.t).apply(null,arguments)};m.__getEncodedParamsSizeFromEstablishStreamFrame=function(){return(m.__getEncodedParamsSizeFromEstablishStreamFrame=m.asm.u).apply(null,arguments)};m.__getDataFromGroupedStreamDataFrame=function(){return(m.__getDataFromGroupedStreamDataFrame=m.asm.v).apply(null,arguments)};m.__getDataSizeFromGroupedStreamDataFrame=function(){return(m.__getDataSizeFromGroupedStreamDataFrame=m.asm.w).apply(null,arguments)};m.__getAckIdFromGroupedStreamDataFrame=function(){return(m.__getAckIdFromGroupedStreamDataFrame=m.asm.x).apply(null,arguments)};m.__getRequiresAckFromGroupedStreamDataFrame=function(){return(m.__getRequiresAckFromGroupedStreamDataFrame=m.asm.y).apply(null,arguments)};m.__getAckIdFromGroupedStreamAckFrame=function(){return(m.__getAckIdFromGroupedStreamAckFrame=m.asm.z).apply(null,arguments)};var ia;V=function l(){ia||ja(),ia||(V=l)};function ja(l){l||v;if(T>0)return;O();if(T>0)return;function n(){if(ia)return;ia=!0;m.calledRun=!0;if(F)return;P();o(m);m.onRuntimeInitialized&&m.onRuntimeInitialized();Q()}m.setStatus?(m.setStatus("Running..."),setTimeout(function(){setTimeout(function(){m.setStatus("")},1),n()},1)):n()}m.run=ja;if(m.preInit){typeof m.preInit=="function"&&(m.preInit=[m.preInit]);while(m.preInit.length>0)m.preInit.pop()()}ja();return m.ready}}();typeof q==="object"&&typeof p==="object"?p.exports=r:typeof define==="function"&&define.amd?define([],function(){return r}):typeof q==="object"&&(q.Module=r)}),null);
__d("DGWUtils",["Base64","DGWConstants","DGWCppBridge","DGWLoggingContext","Random","URI"],(function(a,b,c,d,e,f,g){"use strict";var h,i=4;function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=d("Random").random()*16|0;a=a==="x"?b:b&3|8;return a.toString(16)})}function j(a){var b=new TextDecoder();b=b.decode(a);a=c("Base64").encode(b);b=a.replace(/\+/gi,"-").replace(/\//gi,"_").replace(/=/gi,"");return b}var k=null,l=null;function m(){l==null&&(l=Promise.resolve().then(function(){return c("DGWCppBridge")()}).then(function(a){k=a}));return l}b=function(){function a(){}a.initialize=async function(){return m()};a.constructConnectUrl=function(a){var b,e,f=a.appId,g=a.appVersion,i=a.authType,k=a.deviceId,l=a.dgwVersion,m=a.fbId,n=a.tier,o=a.loggingId,p=a.headers,q=a.endpoint,r=a.serviceId,s=a.regionHint,t=a.establishStreamFrame,u=a.trafficTracing;a=a.authToken;var v=(b={},b[(e=d("DGWConstants")).HEADER_CONSTANTS.HEADER_APPID]=f,b[e.HEADER_CONSTANTS.HEADER_APPVERSION]=g,b[e.HEADER_CONSTANTS.HEADER_AUTHTYPE]=i,b[e.HEADER_CONSTANTS.HEADER_DGW_VERSION]=""+l,b[e.HEADER_CONSTANTS.HEADER_UUID]=m,b[e.HEADER_CONSTANTS.HEADER_TARGET_TIER]=n,b);t!==void 0&&(v[d("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64]=j(t));o!==void 0&&(v[d("DGWConstants").HEADER_CONSTANTS.HEADER_LOGGING_ID]=o);s!==void 0&&(v[d("DGWConstants").HEADER_CONSTANTS.HEADER_REGIONHINT]=s);k!==void 0&&(v[d("DGWConstants").HEADER_CONSTANTS.HEADER_DEVICE_ID]=k);u!==void 0&&(v[d("DGWConstants").HEADER_CONSTANTS.TRAFFIC_TRACING]="debug:"+u);a!==void 0&&(v[d("DGWConstants").HEADER_CONSTANTS.HEADER_AUTHTOKEN]=a);Object.keys(p).forEach(function(a){var b=d("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+a;Object.prototype.hasOwnProperty.call(v,b)||(v[b]=p[a])});f=new(h||(h=c("URI")))(q);f.setQueryData(v);f.setPath(f.getPath()+"/"+r);f.toString().length>2e3&&(delete v[d("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64],f.setQueryData(v));return f.toStringRawQuery()};return a}();e=function(){function a(a,b,c){this.$1=null,this.$2=a,this.$3=b,this.$4=c}a.initialize=async function(){return m()};var b=a.prototype;b.malloc=function(a){try{a=k.__malloc(a);if(a===0){var b;(b=this.$2)==null||b.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"wasm malloc failure","malloc returned 0");return-1}return a}catch(a){(b=this.$2)==null||b.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"wasm malloc failure","exception during malloc",a.toString());return-1}};b.free=function(a){k.__free(a)};b.append=function(a){if(this.$1==null){this.$1=a;return}var b=this.$1.length,c=new Uint8Array(b+a.length);c.set(this.$1,0);c.set(a,b);this.$1=c};b.processData=function(){var a=this;if(this.$1==null)return;var b=this.$1.length,c=this.malloc(b);if(c===-1)return;var e=k.HEAPU8.subarray(c,c+b);if(this.$1)for(var f=0;f<e.length;++f)e[f]=this.$1[f];f=this.malloc(i*4);if(f===-1)return;e=f;var g=e+i,h=g+i,j=h+i;b=k.__DgwCodecDecode(c,b,e,g,h,j);this.free(c);if(b!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){this.free(f);(h=this.$2)==null||h.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Codec Decode Failure","Failed to decode Frame(s). Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(b));return}c=k.HEAPU32.subarray(j/i,j/i+1)[0];if(this.$1==null){this.free(f);return}h=this.$1.length-c;if(this.$1&&this.$1.length>h){this.$1=new Uint8Array(((b=this.$1)==null?void 0:b.subarray(h))||[])}else this.$1=null;j=k.HEAPU32.subarray(g/i,g/i+1)[0];var l=k.HEAPU32.subarray(e/i,e/i+1)[0],m=[];c=function(){var b=k.__getDGWFramePtr(l,n),c=k.__getFrameType(b);switch(c){case d("DGWConstants").DgwFrameType.DgwFrameType_Drain:c=k.__getDrainReasonFromDrainFrame(b);var e=d("DGWConstants").drainReasonToDrainReasonString(c);(c=a.$2)==null||c.logEvent(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Received Drain Frame from server","DrainReason: "+e);m.push(function(){var b;return(b=a.$3)==null?void 0:b.receivedDrainSignal(e)});break;case d("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_EstabStream:var f=k.__getStreamIdFromStreamGroupFrame(b);c=k.__getEncodedParamsFromEstablishStreamFrame(b);var g=new Uint8Array(k.HEAPU8.subarray(c,c+k.__getEncodedParamsSizeFromEstablishStreamFrame(b)));a.free(c);m.push(function(){var b;return(b=a.$3)==null?void 0:b.onGroupedStreamEstablishStreamReceived(f,g)});break;case d("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_Data:var h=k.__getStreamIdFromStreamGroupFrame(b);c=k.__getDataFromGroupedStreamDataFrame(b);var i=new Uint8Array(k.HEAPU8.subarray(c,c+k.__getDataSizeFromGroupedStreamDataFrame(b)));a.free(c);var j=k.__getRequiresAckFromGroupedStreamDataFrame(b)?k.__getAckIdFromGroupedStreamDataFrame(b):null;m.push(function(){var b;return(b=a.$3)==null?void 0:b.onGroupedStreamDataReceived(h,i,j)});break;case d("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_Ack:var o=k.__getStreamIdFromStreamGroupFrame(b),p=k.__getAckIdFromGroupedStreamAckFrame(b);m.push(function(){var b;return(b=a.$3)==null?void 0:b.onGroupedStreamAckReceived(o,p)});break;case d("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_EndOfData:var q=k.__getStreamIdFromStreamGroupFrame(b);m.push(function(){var b;return(b=a.$3)==null?void 0:b.onGroupedStreamEndOfDataReceived(q)});break;case d("DGWConstants").DgwFrameType.DgwFrameType_Ping:m.push(function(){var b;return(b=a.$3)==null?void 0:b.onPingReceived()});break;case d("DGWConstants").DgwFrameType.DgwFrameType_Pong:m.push(function(){var b;return(b=a.$3)==null?void 0:b.onPongReceived()});break;default:break}a.free(b)};for(var n=0;n<j;++n)c();this.free(f);for(b=0;b<m.length;b++)m[b]()};b.encodeData=function(a,b,c,e){var f=this.malloc(a.length);if(f===-1)return null;var g=k.HEAPU8.subarray(f,f+a.length);for(var h=0;h<g.length;++h)g[h]=a[h];a=this.malloc(i*2);h=a;var j=a+i;e=k.__DgwCodecEncodeStreamGroup_Data(e,f,g.length,b,c,h,j);this.free(f);if(e!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){(g=this.$2)==null||g.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Data Frame encode failure","Failed to decode DGW Data Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(e));return null}b=k.HEAPU32.subarray(h/i,h/i+1)[0];c=k.HEAPU32.subarray(j/i,j/i+1)[0];f=new Uint8Array(k.HEAPU8.subarray(b,b+c));this.free(b);this.free(a);return f};b.encodeAck=function(a,b){var c=this.malloc(i*2);if(c===-1)return null;var e=c,f=c+i;b=k.__DgwCodecEncodeStreamGroup_Ack(b,a,e,f);if(b!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){(a=this.$2)==null||a.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"ACK Frame encode failure","Failed to encode ACK Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(b));return null}a=k.HEAPU32.subarray(e/i,e/i+1)[0];b=k.HEAPU32.subarray(f/i,f/i+1)[0];e=new Uint8Array(k.HEAPU8.subarray(a,a+b));this.free(a);this.free(c);return e};b.encodeDrain=function(a){var b=this.malloc(i*2);if(b===-1)return null;var c=b,e=b+i;a=k.__DgwCodecEncodeDrain(a,c,e);if(a!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null||f.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Drain Frame encode failure","Failed to encode Drain Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(a));return null}f=k.HEAPU32.subarray(c/i,c/i+1)[0];a=k.HEAPU32.subarray(e/i,e/i+1)[0];c=new Uint8Array(k.HEAPU8.subarray(f,f+a));this.free(f);this.free(b);return c};b.encodeEstablishStream=function(a,b){var c=this.malloc(b.length);if(c===-1)return null;var e=k.HEAPU8.subarray(c,c+b.length);for(var f=0;f<b.length;++f)e[f]=b[f];e=this.malloc(i*2);f=e;var g=e+i;b=k.__DgwCodecEncodeStreamGroup_EstabStream(a,c,b.length,f,g);this.free(c);if(b!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){(c=this.$2)==null||c.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"EstablishStream Frame encode failure","Failed to encode EstablishStream Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(b)+" for StreamId "+a);return null}c=k.HEAPU32.subarray(f/i,f/i+1)[0];b=k.HEAPU32.subarray(g/i,g/i+1)[0];a=new Uint8Array(k.HEAPU8.subarray(c,c+b));this.free(c);this.free(e);return a};b.encodeEndOfData=function(a){var b=this.malloc(i*2);if(b===-1)return null;var c=b,e=b+i;a=k.__DgwCodecEncodeStreamGroup_EndOfData(a,c,e);if(a!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null||f.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"EndOfData Frame encode failure","Failed to encode EndOfData Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(a));return null}f=k.HEAPU32.subarray(c/i,c/i+1)[0];a=k.HEAPU32.subarray(e/i,e/i+1)[0];c=new Uint8Array(k.HEAPU8.subarray(f,f+a));this.free(f);this.free(b);return c};b.encodePing=function(){var a=this.malloc(i*2);if(a===-1)return null;var b=a,c=a+i,e=k.__DgwCodecEncodePing(b,c);if(e!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null||f.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Ping Frame encode failure","Failed to encode Ping Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(e));return null}f=k.HEAPU32.subarray(b/i,b/i+1)[0];e=k.HEAPU32.subarray(c/i,c/i+1)[0];b=new Uint8Array(k.HEAPU8.subarray(f,f+e));this.free(f);this.free(a);return b};b.encodePong=function(){if(this.$5!=null)return this.$5;var a=this.malloc(i*2);if(a===-1)return null;var b=a,c=a+i,e=k.__DgwCodecEncodePong(b,c);if(e!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null||f.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Pong Frame encode failure","Failed to encode Pong Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(e));return null}f=k.HEAPU32.subarray(b/i,b/i+1)[0];e=k.HEAPU32.subarray(c/i,c/i+1)[0];b=new Uint8Array(k.HEAPU8.subarray(f,f+e));this.free(f);this.free(a);this.$5=b;return b};return a}();g.uuidv4=a;g.Uint8ArrayToBase64UrlStr=j;g.DGWUtils=b;g.DGWCodec=e}),98);
__d("DGWExponentialBackoff",[],(function(a,b,c,d,e,f){"use strict";var g={maxRetries:5,baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)},h=function(a){function b(b,c){b=a.call(this,b)||this;b.errors=c;return b}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));async function a(a,b){b===void 0&&(b=g);try{return await i(a,b)}catch(a){throw a.errors[a.errors.length-1]}}async function i(a,b){var c=0,d=[],e=b.baseRetryInterval,f=b.backoffFactor;while(c<=b.maxRetries){try{var g=await a();return g}catch(a){d.push(a)}await j(e*Math.pow(f,c));++c}throw new h("Max call count exceeded",d)}async function j(a){await new Promise(function(b){return window.setTimeout(b,a)})}f.callWithExponentialBackoff=a}),66);
__d("DGWGlobalLogger",["gkx","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){var a=this;this.tabID=c("uuidv4")();this.isTabClosed=!1;this.otherTabs=new Map();this.thisTab={realtime:0,lightspeed:0};this.broadcastChannel=this.$1("DGWGlobalLogger");this.broadcastChannel.onmessage=function(b){b=JSON.parse(String(b.data));var c=!a.otherTabs.has(b.key);b.event==="DELETE"?a.otherTabs["delete"](b.key):b.event==="UPDATE"&&b.value!=null&&(a.otherTabs.set(b.key,b.value),c&&a.$2())}}var b=a.prototype;b.$1=function(a){if(window.BroadcastChannel!=null)return new BroadcastChannel(a);else return{onmessage:function(a){},postMessage:function(a){}}};b.streamRequested=function(a){switch(a){case"realtime":this.thisTab.realtime++;break;case"lightspeed":this.thisTab.lightspeed++;break}this.$2()};b.streamClosed=function(a){switch(a){case"realtime":this.thisTab.realtime=Math.max(0,this.thisTab.realtime-1);break;case"lightspeed":this.thisTab.lightspeed=Math.max(0,this.thisTab.lightspeed-1);break}this.$2()};b.tabClosed=function(){if(this.isTabClosed)return;this.isTabClosed=!0;var a={key:this.tabID,event:"DELETE"};this.broadcastChannel.postMessage(JSON.stringify(a))};b.getGlobalState=function(){var a={realtime:this.thisTab.realtime,lightspeed:this.thisTab.lightspeed};this.otherTabs.forEach(function(b){a.realtime+=b.realtime,a.lightspeed+=b.lightspeed});return a};b.$2=function(){var a={key:this.tabID,event:"UPDATE",value:this.thisTab};this.broadcastChannel.postMessage(JSON.stringify(a))};return a}();var h=c("gkx")("4337")?new a():{streamRequested:function(){},streamClosed:function(){},tabClosed:function(){},getGlobalState:function(){return{realtime:-1,lightspeed:-1}}};b=function(){return h};g.getInstance=b}),98);
__d("DGWPinger",["DGWLoggingContext"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c){this.$1=a,this.$4=b,this.$5=c,this.$3=!1}var b=a.prototype;b.$6=function(){var a=this;if(this.$3){var b;(b=d("DGWLoggingContext")).DGWLoggingContext.bumpODSKey(b.DGWLoggingComponent.PINGER,"timeout_fired.reset");this.$3=!1;this.$4();b.DGWLoggingContext.bumpODSKey(b.DGWLoggingComponent.PINGER,"timeout.newtimeout");this.$2=window.setTimeout(function(){a.$6()},this.$1)}else d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.PINGER,"timeout_fired.disconnect"),this.$5()};b.reset=function(){var a=this;this.$3=!0;this.$2&&(d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.PINGER,"reset"),window.clearTimeout(this.$2),this.$2=null);this.$1>0&&(d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.PINGER,"reset.newtimeout"),this.$2=window.setTimeout(function(){a.$6()},this.$1))};b.cancel=function(){this.$2&&(d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.PINGER,"canceled"),window.clearTimeout(this.$2),this.$2=null)};return a}();g.DGWPinger=a}),98);
__d("DGWStreamGroupCallbacks",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum")({TRANSPORT_SERVER_INTERNAL_ERROR:0,TRANSPORT_ABNORMAL_CLOSURE:1,TRANSPORT_GOING_AWAY:2,TRANSPORT_UNKNOWN_ERROR:3,TRANSPORT_KEEPALIVE_TIMEOUT:4,TRANSPORT_UNAUTHORIZED:5,TRANSPORT_REJECTED:6,TRANSPORT_BAD_REQUEST:7,TRANSPORT_DGW_SERVER_ERROR:8,TRANSPORT_NORMAL_CLOSURE:9});function a(a){switch(a){case g.TRANSPORT_UNAUTHORIZED:return!1;default:return!0}}c=function(){function a(){}var b=a.prototype;b.onStreamGroupError=function(){};b.onStreamGroupMustDrain=function(){};b.onStreamGroupTransportClose=function(){};return a}();f.DGWStreamGroupError=g;f.isRetryableError=a;f.NoOpDGWStreamGroupCallbacks=c}),66);
__d("DGWTransportEvents",["DGWLoggingContext","NetworkStatus"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$3=a}var b=a.prototype;b.transportEstablished=function(a){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"open",a),this.$2=Date.now(),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_success")};b.transportPingSent=function(a){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Ping Frame Sent",a,!0)};b.transportPongReceived=function(a){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Pong Frame Received",a,!0)};b.transportEstablishmentPending=function(){this.$1=Date.now(),this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transportPending",null,!0),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_pending")};b.transportClosed=function(a,b,c){this.$4=Date.now(),a?(this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transport_close_graceful"),this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Transport closed gracefully",null,!0)):(this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transport_close_with_error"),this.$3.logError(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Transport closed abnormally",b,c))};b.transportEstablishmentFailure=function(a){this.$3.logError(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"WebSocket transport establishment failure","WebSocket close code: "+a.code+" reason: "+a.reason+" wasClean: "+String(a.wasClean)),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_failure")};b.streamEstablishmentTimeout=function(a,b,e){this.$3.logError(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment timeout",a,"streamId:"+b+", onLine:"+String(c("NetworkStatus").isOnline()),!1,e),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_timeout")};b.streamEstablishmentPending=function(a,b){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment pending","streamId:"+a,!0,b),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_pending")};b.streamEstablishmentSuccess=function(a,b){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment success","streamId:"+a,!0,b),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_success")};b.transportError=function(a,b,c){this.$3.logError(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,a,b,c)};b.receivedFrameForInactiveStream=function(a,b,c){this.$3.logWarn(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Frame received for inactive stream","frameType: "+a+", streamID: "+b,c)};b.ranOutOfStreamIds=function(a){this.$3.logWarn(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Hit max StreamId limit","Hit max StreamId limit",a)};return a}();g.DGWTransportEvents=a}),98);
__d("DGWWebSocketTransport",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=new WebSocket(a);a.binaryType="arraybuffer";a.onopen=function(){};a.onclose=function(){};a.onerror=function(){};return a}f.getWebSocketConnection=a}),66);
__d("DGWStreamEvents",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c){this.$4=new Map(),this.$5=new Map(),this.$6=a,this.$1=b,c!=null&&(this.$8="streamId:"+c+"::")}var b=a.prototype;b.dataSent=function(a,b,c){var d=b?"sendWithAckRequested":"sendWithoutAckRequested";this.$6.logEvent(this.$1,d,((d=this.$8)!=null?d:"")+"sendId:"+c+", payloadSize:"+a,!0);this.$4.set(c,{ackRequested:b,payloadSize:a,sendTimestamp:Date.now()})};b.ackReceived=function(a){var b;this.$6.logEvent(this.$1,"AckReceived",((b=this.$8)!=null?b:"")+"sendId:"+a,!0);this.$6.bumpODSKey(this.$1,"ack_received");b=this.$4.get(a);b!=null&&(b.ackReceivedTimestamp=Date.now())};b.ackSent=function(a){var b;this.$6.bumpODSKey(this.$1,"ack_sent");this.$6.logEvent(this.$1,"ACK sent",((b=this.$8)!=null?b:"")+"ackId:"+a,!0)};b.drainSent=function(a){var b;this.$6.logEvent(this.$1,"Drain sent",((b=this.$8)!=null?b:"")+"drainReason: "+a)};b.dataReceived=function(a,b,c){var d;this.$6.bumpODSKey(this.$1,"data_received");this.$6.logEvent(this.$1,"Data received",((d=this.$8)!=null?d:"")+"sendId:"+(c!=null?c:"null")+", ackRequested:"+b.toString()+", payloadSize:"+a,!0);c!=null&&this.$5.set(c,{ackRequested:b,payloadSize:a,receiveTimestamp:Date.now()})};b.endOfDataReceived=function(){this.$6.bumpODSKey(this.$1,"end_of_data_received"),this.$6.logEvent(this.$1,"EndOfDataReceived",this.$8,!0)};b.endOfDataSent=function(){this.$6.bumpODSKey(this.$1,"end_of_data_sent"),this.$6.logEvent(this.$1,"EndOfDataSent",this.$8,!0)};b.streamClosed=function(a,b){this.$7=Date.now();var c=this.$9();if(a){this.$6.bumpODSKey(this.$1,"stream_closed_gracefully");this.$6.logEvent(this.$1,"Stream closed gracefully",""+((a=this.$8)!=null?a:"")+c)}else{this.$6.bumpODSKey(this.$1,"stream_closed_with_error");this.$6.logError(this.$1,"Stream closed abnormally",b,""+((a=this.$8)!=null?a:"")+c)}};b.connectionEstablishmentFailure=function(a){this.$6.logEvent(this.$1,"WebSocket connection establishment failure","WebSocket close code: "+a)};b.streamEstablishmentFailure=function(a,b){this.$6.logError(this.$1,"Failed to establish DGW Stream","Last seen error: "+a.toString(),""+((a=this.$8)!=null?a:"")+b);this.$6.bumpODSKey(this.$1,"stream_establishment_failure")};b.error=function(a,b){b={msg:b,state:this.$9()};this.$6.logError(this.$1,a,JSON.stringify(b),this.$8)};b.$9=function(){var a={currentNetworkCondition:window.navigator&&window.navigator.onLine===!0,establishRequestTimestamp:this.$2,establishedTimestamp:this.$3,streamClosedTimestamp:this.$7,sendHistory:JSON.stringify(Array.from(this.$4.entries())),receiveHistory:JSON.stringify(Array.from(this.$5.entries()))};return JSON.stringify(a)};return a}();f.DGWStreamEvents=a}),66);
__d("GroupedStream",["DGWAckManager","DGWConstants","DGWLoggingContext","DGWStream","DGWStreamEvents","QuickPerformanceLogger","Random","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("qpl")._(701242292,"2919");a=function(){function a(a,b,e,f,g,j,k){this.$1=a,this.$3=!1,this.$4=!1,this.$5=!1,this.$6=b,this.$7=e,this.$8=f,this.$2=j,this.$9=g,this.$10=new(d("DGWAckManager").DGWAckManager)(this.$9),this.$12=new(d("DGWStreamEvents").DGWStreamEvents)(this.$9,d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,this.$1),this.$11=0,this.$13=k,this.$14=Date.now()+(Math.round(d("Random").random()*1e4)+1e4),(h||(h=c("QuickPerformanceLogger"))).markerStart(i,this.$14)}var b=a.prototype;b.send=async function(a,b){var c=this.$11++%d("DGWConstants").MAX_ACK_ID;a=this.$15(a,!0,c);if(!this.$16(a,!0,c))return!1;a=await this.$10.waitForAck(c,b!=null?b:d("DGWConstants").DEFAULT_ACK_TIMEOUT_MS);return a};b.sendFrame=async function(a,b,c){var e=this.$11++%d("DGWConstants").MAX_ACK_ID;b=this.$15(b,!0,e);if(b==null)return!1;var f=new Uint8Array(a.length+b.length);f.set(a);f.set(b,a.length);if(!this.$16(f,!0,e))return!1;b=await this.$10.waitForAck(e,c!=null?c:d("DGWConstants").DEFAULT_ACK_TIMEOUT_MS);this.__markerPoint(b?"ack_recevied":"ack_timeout");if(!b){this.__endMarker(3);return Promise.reject(d("DGWStream").StreamError.ACK_TIMEOUT)}return b};b.sendAndForget=function(a){a=this.$15(a,!1,0);return this.$16(a,!1,0)};b.sendFrameAndForget=function(a,b){b=this.$15(b,!1,0);if(b==null)return!1;var c=new Uint8Array(a.length+b.length);c.set(a);c.set(b,a.length);return this.$16(c,!1,0)};b.close=function(){var a=this.$2.encodeEndOfData(this.$1);if(a==null){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to encode EndOfData","streamId: "+this.$1);return}a=this.$8.send(a);if(!a){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send EndOfData","streamId: "+this.$1+". StreamGroupTransport not open during send");return}this.$12.endOfDataSent();this.$5=!0;this.$4&&this.$17()};b.loggingContext=function(){return this.$9};b.__sendDrain=function(a){var b=d("DGWConstants").drainReasonToDrainReasonString(a);if(this.$5)return!1;a=this.$2.encodeDrain(a);if(a==null)return!1;this.$12.drainSent(b);b=this.$8.send(a);return b};b.__transportCloseHook=function(a){this.$13(),this.$10.clearPendingAcks(),a?(this.$12.error("Received StreamError","StreamErrorType: "+a),this.$6.onError(a)):this.$5&&this.$4?this.$17():(this.$12.streamClosed(!1,"Stream closed: ClosedLocally: "+this.$5.toString()+", EndOfDataReceived: "+this.$4.toString()),this.$6.onError(d("DGWStream").StreamError.PREMATURE_CLOSE))};b.$17=function(){this.$13(),this.$12.streamClosed(!0,"Graceful close"),this.$6.onClose(this)};b.__dataReceivedHook=function(a,b){this.$12.dataReceived(a.length,b!=null,b),b!=null&&this.$18(b),this.$6.onDataReceived(a)};b.__ackReceivedHook=function(a){this.$12.ackReceived(a),this.$10.handleAckReceived(a)};b.__drainReceivedHook=function(a){this.$3===!1&&(this.$6.onStreamMustDrain(this,a),this.$3=!0)};b.__endOfDataHook=function(){this.$12.endOfDataReceived(),this.$4=!0,this.$5?this.$17():this.$6.onServerHasFinishedSendingData(this)};b.__markerPoint=function(a){var b=this.$14;(h||(h=c("QuickPerformanceLogger"))).markerPoint(i,a,{instanceKey:b})};b.__markerAnnotate=function(a){var b=this.$14;(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(i,a,{instanceKey:b})};b.__endMarker=function(a){(h||(h=c("QuickPerformanceLogger"))).markerEnd(i,a,this.$14)};b.$15=function(a,b,c){return this.$2.encodeData(a,b,c,this.$1)};b.$16=function(a,b,c){this.__markerPoint("send_data_start");if(this.$5){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send data","Stream closed locally");return!1}if(a==null)return!1;var e=this.$8.send(a);if(!e){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send data","ClosedLocally: "+this.$5.toString());return!1}this.__markerPoint("send_data_end");this.$12.dataSent(a.length,b,c);return!0};b.$18=function(a){var b=this.$2.encodeAck(a,this.$1);if(b==null){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to encode ACK","ackId: "+a);return!1}b=this.$8.send(b);if(!b){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send ACK","ackId: "+a);return!1}this.$12.ackSent(a);return!0};return a}();g.GroupedStream=a}),98);
__d("StreamIdGenerator",["err"],(function(a,b,c,d,e,f,g){"use strict";var h=65535;a=function(){function a(){this.$1=new Set(),this.$2=0}var b=a.prototype;b.getNextStreamId=function(){var a;if(!this.streamIdAvailable())throw c("err")("Max number of stream IDs reached");if(this.$2<=h)return this.$2++;a=(a=this.$1.values().next().value)!=null?a:0;this.$1["delete"](a);return a};b.putBackStreamId=function(a){this.$1.add(a)};b.streamIdAvailable=function(){return this.$1.size>0||this.$2<=h};return a}();g.MAX_STREAM_ID=h;g.StreamIdGeneratorImpl=a}),98);
__d("StreamGroupWebSocketTransport",["DGWConstants","DGWExponentialBackoff","DGWGlobalLogger","DGWLoggingContext","DGWPinger","DGWStream","DGWStreamGroupCallbacks","DGWTransportEvents","DGWUtils","DGWWebSocketTransport","GroupedStream","QuickPerformanceLogger","Random","Run","StreamIdGenerator","err","qex","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("qpl")._(701238781,"3037"),j=(a=c("qex")._("2101"))!=null?a:20,k=(b=c("qex")._("2102"))!=null?b:3e4,l=(e=c("qex")._("2103"))!=null?e:!1,m=function(a,b,c,e,f){var g=this;this.groupedStream=a;this.$1=window.setTimeout(function(){c(d("DGWStream").StreamError.ESTABLISHMENT_TIMEOUT)},e);this.handleEstablishFrameReceived=function(){window.clearTimeout(g.$1),b(g.groupedStream)};this.abortStream=function(a){f(),c(a)}};f=function(){function a(b,e,f,g,j,k,l,m){var n=this;this.$18=-1;this.$15=j;this.$17=this.__getStreamIdGenerator();this.$5=new Map();this.$6=new Map();this.$7=g.keepAliveMs;this.$8=!1;this.$9=!1;this.$3=!0;this.$4=!1;this.$21=!1;this.$22=!1;this.$13=f;this.$11=new TextEncoder();this.$12=new TextDecoder();this.$14=g;j={onDataReceived:function(){},handleAckReceived:function(){},receivedDrainSignal:function(a){n.$9||(n.$9=!0,n.$15(),n.$13.transportClosed(!0,""),n.$14.streamGroupCallbacks.onStreamGroupMustDrain(a),n.$5.forEach(function(b){b.__drainReceivedHook(a)}),n.onClose(d("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE))},onGroupedStreamDataReceived:function(a,b,c){if(n.$5.has(a)){var d=n.$5.get(a);d==null||d.__dataReceivedHook(b,c)}else n.$13.receivedFrameForInactiveStream("Data",a,"sendAckID: "+(c!=null?c:"null"))},onGroupedStreamAckReceived:function(a,b){if(n.$5.has(a)){var c=n.$5.get(a);c==null||c.__ackReceivedHook(b)}else n.$13.receivedFrameForInactiveStream("ACK",a,"ackId: "+(b!=null?b:"null"))},onGroupedStreamEndOfDataReceived:function(a){if(n.$5.has(a)){var b=n.$5.get(a);b==null||b.__endOfDataHook()}else n.$13.receivedFrameForInactiveStream("EndOfData",a)},onGroupedStreamEstablishStreamReceived:function(a,b){if(n.$6.has(a)){var c=n.$6.get(a);n.$6.delete(a);b=JSON.parse(n.$12.decode(b));(b.code===void 0||b.code!==200)&&(c==null||c.abortStream(d("DGWStream").StreamError.ABNORMAL_CLOSURE));c==null||c.handleEstablishFrameReceived()}else n.$13.receivedFrameForInactiveStream("EstablishStream",a,"EstablishStream received for non-inflight stream")},onPingReceived:function(){var a=n.$2.encodePing();if(a==null)return;n.send(a)},onPongReceived:function(){n.$3=!1,n.$22||(n.$22=!0,n.__markerPoint("auth_success")),n.$13.transportPongReceived("readyState:"+n.$1.readyState+", bufferedAmount:"+n.$1.bufferedAmount)}};this.$2=new(d("DGWUtils").DGWCodec)(k,j,g.dgwVersion);this.$20=Date.now()+(Math.round(d("Random").random()*1e4)+1e4);this.$23=d("DGWGlobalLogger").getInstance();d("Run").onUnload(function(){n.$23.tabClosed()});if(g.enableFirstStreamOnWsHandshake){if(l===void 0)throw c("err")("Missing grouped stream options");if(m===void 0)throw c("err")("Missing grouped stream callbacks");var o=this.$17.getNextStreamId();f=this.createEstablishStreamFrame(o,l);k=d("DGWUtils").DGWUtils.constructConnectUrl({appId:g.appId,appVersion:g.appVersion,authType:g.authType,deviceId:(k=g.deviceId)!=null?k:void 0,dgwVersion:g.dgwVersion,fbId:g.fbId,tier:g.tier,loggingId:(j=g.loggingId)!=null?j:void 0,headers:a.__prefixAppHeaders(g.headers),endpoint:g.connectEndpoint,serviceId:g.serviceId,regionHint:(k=g.regionHint)!=null?k:void 0,establishStreamFrame:f,authToken:(j=g.authToken)!=null?j:void 0});this.$1=e(k);if(!k.includes(d("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64))return;f=new(d("DGWLoggingContext").DGWLoggingContext)(this.$14.dgwVersion,l.loggingId,this.$14.serviceId,this.$14.fbId,this.$14.loggingId,l.disableFalcoLogging);j=this.__createGroupedStream(o,m,l,f);this.$16=this.waitForEstablishStream(o,j,l,function(a){n.$5.set(o,a)},function(){n.$17.putBackStreamId(o)})}else this.$1=e(b);this.$23.streamRequested(g.serviceId);(h||(h=c("QuickPerformanceLogger"))).markerStart(i,this.$20);this.__markerAnnotate({string:{serviceId:this.$14.serviceId,streamGroupId:this.$14.loggingId}})}var b=a.prototype;b.send=function(a){try{this.$1.send(a);return!0}catch(a){this.$13.transportError("Failed to send over transport","readyState: "+this.$1.readyState,a.toString());return!1}};b.close=function(){var a;this.$23.streamClosed(this.$14.serviceId);this.__markerPoint("teardown");this.$8=!0;(a=this.$10)==null||a.cancel();this.$1.onopen=function(a){};this.$1.onmessage=function(a){};this.$1.onerror=function(a){};this.$1.onclose=function(a){};this.$1.close()};b.onClose=function(a){var b;this.$23.streamClosed(this.$14.serviceId);this.__markerPoint("abort");this.__markerAnnotate({int:{abort_code:a}});this.$8=!0;(b=this.$10)==null||b.cancel();this.$1.close(a)};b.abort=function(a,b,c,d,e){if(this.$8)return;this.$23.streamClosed(this.$14.serviceId);this.$8=!0;this.$13.transportClosed(!1,d,e);this.$5.forEach(function(a){a.__transportCloseHook(b)});this.$6.forEach(function(a){a.abortStream(b)});this.$14.streamGroupCallbacks.onStreamGroupError(a);this.$5.clear();this.$6.clear();this.$15();this.onClose(c)};a.getTransportWithInitialStream=async function(b,c,e,f,g,h){await d("DGWUtils").DGWCodec.initialize();var i=new(d("DGWTransportEvents").DGWTransportEvents)(f);i.transportEstablishmentPending();var j=function(){return a.$24("",e,i,g,f,b,c)};try{j=await d("DGWExponentialBackoff").callWithExponentialBackoff(j,h);h=j.$16!=null?j.$16:j.establishGroupedStream(c,b,new(d("DGWLoggingContext").DGWLoggingContext)(e.dgwVersion,b.loggingId,e.serviceId,e.fbId,e.loggingId,b.disableFalcoLogging));return{transport:j,streamPromise:h}}catch(a){throw a}};a.getTransport_DEPRECATED=async function(b,c,e,f,g){await d("DGWUtils").DGWCodec.initialize();var h=new(d("DGWTransportEvents").DGWTransportEvents)(e);h.transportEstablishmentPending();var i=function(){return a.$24(b,c,h,f,e)};try{return await d("DGWExponentialBackoff").callWithExponentialBackoff(i,g)}catch(a){throw a}};b.establishGroupedStream=async function(a,b,d,e,f,g){var h=this;f===void 0&&(f=!0);var i=this.getStreamId(),j=this.createEstablishStreamFrame(i,b);a=this.__createGroupedStream(i,a,b,d);a.__markerAnnotate({string:{serviceId:this.$14.serviceId,streamGroupId:this.$14.loggingId,streamId:b.streamTraceId}});g!=null&&a.__markerAnnotate(g);d=this.waitForEstablishStream(i,a,b,function(a){h.$5.set(i,a)},function(){h.$17.putBackStreamId(i)});if(e!=null){a.__markerPoint("send_payload_start");a.__markerAnnotate({int:{establishStreamPayloadSize:e.byteLength}});g=f?await a.sendFrame(j,e,k):a.sendFrameAndForget(j,e);if(!g){a.__endMarker(3);return Promise.reject("Failed to send data when establishing stream")}a.__markerPoint("send_payload_end");a.__endMarker(2);return Promise.resolve(a)}a.__markerPoint("send_establish_stream_start");if(!this.send(j)){a.__endMarker(3);throw c("err")("Websocket connection closed before stream established")}a.__markerPoint("send_establish_stream_end");b=await d;a.__endMarker(2);return b};a.__prefixAppHeaders=function(a){return Object.keys(a).reduce(function(b,c){b[""+d("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+c]=a[c];return b},{})};b.waitForEstablishStream=async function(a,b,c,d,e){var f=this;this.$13.streamEstablishmentPending(a,c.loggingId);try{var g=await new Promise(function(c,d){f.$6.set(a,new m(b,c,d,3e4,function(){f.streamEndCallback(a)}))});d(b);this.$13.streamEstablishmentSuccess(a,c.loggingId);return g}catch(b){e();this.$13.streamEstablishmentTimeout("Stream establishment timeout. readyState: "+this.$1.readyState,a,c.loggingId);throw b}};a.$24=async function(b,c,e,f,g,h,i){var j=new a(b,d("DGWWebSocketTransport").getWebSocketConnection,e,c,f,g,h,i);j.$1.onmessage=a.$25(j);j.$1.onopen=function(){j.__markerPoint("onopen"),e.transportEstablished(b),j.$10!=null&&j.$10.cancel(),j.$7!=null&&(j.$10=new(d("DGWPinger").DGWPinger)(j.$7,function(){j.$26()},function(){j.abort(d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_KEEPALIVE_TIMEOUT,d("DGWStream").StreamError.KEEPALIVE_TIMEOUT,d("DGWConstants").WebsocketCloseCodes.KEEPALIVE_TIMEOUT,"Aborting transport because of keepalive timeout","readyState:"+j.$1.readyState+", bufferedAmount:"+j.$1.bufferedAmount)}))};j.$1.onerror=function(){j.__markerPoint("onerror"),j.$13.transportError("onerror","readyState: "+j.$1.readyState)};j.$1.onclose=a.$27(j);c=await a.getTransportPromise(j);return c};a.getTransportPromise=async function(a){var b=await new Promise(function(b,c){var e=a.$1.onerror,f=a.$1.onmessage,g=a.$1.onclose;a.$19=window.setTimeout(function(){a.$15(),a.$13.transportClosed(!1,"TIMEOUT"),a.__markerPoint("connect_timeout"),a.close(),c(d("DGWStream").StreamError.TRANSPORT_ESTABLISHMENT_TIMEOUT)},j*1e3);a.$1.onerror=function(){a.$19!=null&&(window.clearTimeout(a.$19),a.$19=null),e(),a.close(),l||c(d("DGWStream").StreamError.ESTABLISHMENT_ERROR)};a.$1.onclose=function(b){a.$19!=null&&(window.clearTimeout(a.$19),a.$19=null),g(b),b.code===d("DGWConstants").WebsocketCloseCodes.UNAUTHORIZED?c(d("DGWStream").StreamError.UNAUTHORIZED):c(b.code+":"+b.reason)};a.$1.onmessage=function(c){f(c),a.$19!=null&&!a.$3&&(window.clearTimeout(a.$19),a.$19=null,a.__markerPoint("connect_success"),b(a))}});return b};a.$25=function(a){return function(b){var c;a.$21||(a.$21=!0,a.__markerPoint("onmessage"));(c=a.$10)==null||c.reset();if(!(b.data instanceof ArrayBuffer)){a.$13.transportError("Incorrect Data Protocol","Received "+typeof b.data+" instead of ArrayBuffer");return}a.$2.append(new Uint8Array(b.data));a.$2.processData()}};a.$27=function(a){return function(b){var c=a.$23.getGlobalState();a.__markerPoint("onclose");a.__markerAnnotate({string:{reason:b.reason},int:{code:b.code,realtimeWebSockets:c.realtime,lightspeedWebSockets:c.lightspeed}});a.__endMarker(b.code===d("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE?2:3);(c=a.$10)==null||c.cancel();if(a.$8===!0||a.$4)return;a.$23.streamClosed(a.$14.serviceId);a.$8=!0;if(a.$3===!0){a.$13.transportEstablishmentFailure(b);a.$5.clear();a.$15();return}a.$15();a.$3=!0;if(b.code!==d("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE){a.$13.transportClosed(!1,"Websocket connection failure with code: "+b.code+" reason: "+b.reason+" wasClean: "+String(b.wasClean));c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNKNOWN_ERROR;var e=d("DGWStream").StreamError.UNKNOWN_ERROR;switch(b.code){case d("DGWConstants").WebsocketCloseCodes.NORMAL_CLOSURE:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_NORMAL_CLOSURE;e=d("DGWStream").StreamError.ABNORMAL_CLOSURE;break;case d("DGWConstants").WebsocketCloseCodes.ABNORMAL_CLOSURE:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_ABNORMAL_CLOSURE;e=d("DGWStream").StreamError.ABNORMAL_CLOSURE;break;case d("DGWConstants").WebsocketCloseCodes.SERVER_INTERNAL_ERROR:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_SERVER_INTERNAL_ERROR;e=d("DGWStream").StreamError.SERVER_INTERNAL_ERROR;break;case d("DGWConstants").WebsocketCloseCodes.GOING_AWAY:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_GOING_AWAY;e=d("DGWStream").StreamError.GOING_AWAY;break;case d("DGWConstants").WebsocketCloseCodes.UNAUTHORIZED:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNAUTHORIZED;e=d("DGWStream").StreamError.UNAUTHORIZED;break;case d("DGWConstants").WebsocketCloseCodes.REJECTED:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_REJECTED;e=d("DGWStream").StreamError.REJECTED;break;case d("DGWConstants").WebsocketCloseCodes.BAD_REQUEST:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_BAD_REQUEST;e=d("DGWStream").StreamError.BAD_REQUEST;break;case d("DGWConstants").WebsocketCloseCodes.DGW_SERVER_ERROR:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_SERVER_INTERNAL_ERROR;e=d("DGWStream").StreamError.DGW_SERVER_ERROR;c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_DGW_SERVER_ERROR;break;default:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNKNOWN_ERROR;e=d("DGWStream").StreamError.UNKNOWN_ERROR;break}a.$14.streamGroupCallbacks.onStreamGroupError(c);a.$5.forEach(function(a){a.__transportCloseHook(e)});a.$6.forEach(function(a){a.abortStream(e)})}else a.$13.transportClosed(!0,""),a.$14.streamGroupCallbacks.onStreamGroupTransportClose(),a.$5.forEach(function(a){a.__transportCloseHook()}),a.$6.forEach(function(a){a.abortStream(d("DGWStream").StreamError.TRANSPORT_CLOSED_BEFORE_STREAM_INIT)});a.$5.clear();a.$6.clear()}};b.$26=function(){var a=this.$2.encodePing();if(a==null)throw c("err")("Failed to encode Ping Frame");var b=this.send(a);this.$18=this.$1.bufferedAmount;this.$13.transportPingSent("readyState:"+this.$1.readyState+", bufferedAmount:"+this.$18+", payloadSize:"+(a==null?void 0:a.byteLength)+", sent:"+String(b))};b.isClosedLocally=function(){return this.$3||this.$8||this.$4};b.streamEndCallback=function(a){this.$5.delete(a),this.$6.delete(a),this.$17.putBackStreamId(a)};b.canCreateGroupedStream=function(){return this.$17.streamIdAvailable()};b.createEstablishStreamFrame=function(b,e){var f=a.__prefixAppHeaders(e.groupedStreamHeaders);e.streamTraceId!=null&&(f[d("DGWConstants").HEADER_CONSTANTS.HEADER_STREAM_TRACE_ID]=e.streamTraceId);e=this.$2.encodeEstablishStream(b,new Uint8Array(this.$11.encode(JSON.stringify(f))));if(e==null){this.$17.putBackStreamId(b);throw c("err")("Failed to encode EstablishStreamFrame")}return e};b.getStreamId=function(){try{return this.$17.getNextStreamId()}catch(a){this.$13.ranOutOfStreamIds("inFlightGroupedStreamSize: "+this.$6.size+" groupedStreamSize: "+this.$5.size);throw a}};b.__createGroupedStream=function(a,b,c,e){var f=this;return new(d("GroupedStream").GroupedStream)(a,b,c,this,e,this.$2,function(){f.streamEndCallback(a)})};b.__getStreamIdGenerator=function(){return new(d("StreamIdGenerator").StreamIdGeneratorImpl)()};b.__markerPoint=function(a){var b=this.$20;(h||(h=c("QuickPerformanceLogger"))).markerPoint(i,a,{instanceKey:b})};b.__markerAnnotate=function(a){var b=this.$20;(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(i,a,{instanceKey:b})};b.__endMarker=function(a){(h||(h=c("QuickPerformanceLogger"))).markerEnd(i,a,this.$20)};return a}();g.StreamGroupWebSocketTransport=f}),98);
__d("StreamGroup",["DGWConstants","DGWLoggingContext","DGWUtils","StreamGroupWebSocketTransport","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h={maxRetries:c("justknobx")._("2595"),baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)};a=function(){function a(a,b,c,e,f,g,h,i,j){this.$2=j;this.$1=j.getNewStreamGroupId();j=(j=h.overrideUrl)!=null?j:f;this.$5=null;this.$3={appId:a,appVersion:b,authType:(f=h.authType)!=null?f:c,deviceId:h.deviceId,dgwVersion:e,headers:h.streamGroupAppHeaders,tier:(a=h.serviceTier)!=null?a:d("DGWConstants").DEFAULT_SERVICE_TIER,connectEndpoint:j,fbId:g,loggingId:h.loggingId,serviceId:h.serviceId,streamGroupCallbacks:i,keepAliveMs:h.keepAliveMs,regionHint:h.regionHint,enableFirstStreamOnWsHandshake:!1,authToken:h.authToken};this.$4=h;this.streamGroupLoggingContext=new(d("DGWLoggingContext").DGWLoggingContext)(this.$3.dgwVersion,null,this.$3.serviceId,this.$3.fbId,this.$4.loggingId,!1,(b=h.verboseLoggingEnabled)!=null?b:!1);this.$6=d("DGWUtils").DGWUtils.constructConnectUrl({appId:this.$3.appId,appVersion:this.$3.appVersion,authType:this.$3.authType,deviceId:(f=this.$3.deviceId)!=null?f:void 0,dgwVersion:this.$3.dgwVersion,fbId:this.$3.fbId,headers:babelHelpers.extends({},this.$3.headers),loggingId:(c=this.$3.loggingId)!=null?c:void 0,tier:this.$3.tier,serviceId:this.$3.serviceId,endpoint:this.$3.connectEndpoint,regionHint:(e=this.$3.regionHint)!=null?e:void 0,trafficTracing:(a=this.$4.trafficTracing)!=null?a:void 0,authToken:(j=this.$4.authToken)!=null?j:void 0})}var b=a.prototype;b.initTransport=async function(){var b=this,a={maxRetries:0,baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)};this.$5=this.$5||d("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransport_DEPRECATED(this.$6,this.$3,this.streamGroupLoggingContext,function(){b.$2.removeStreamGroupAndTransport(b.$1)},a);var c;try{c=await this.$5,this.$5=null}catch(a){this.$5=null;throw a}this.$2.containsStreamGroup(this.$1)||this.$2.setStreamGroupAndTransport(this.$1,c);return c};b.establishStream=async function(a,b,c,e,f){var g=this;if(this.$2.containsStreamGroup(this.$1)===!1){this.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"createTransportWhenEstablishStream");if(!this.$3.enableFirstStreamOnWsHandshake){this.$5=this.$5||d("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransport_DEPRECATED(this.$6,this.$3,this.streamGroupLoggingContext,function(){g.$2.removeStreamGroupAndTransport(g.$1)},h);var i;try{i=await this.$5,this.$5=null}catch(a){this.$5=null;throw a}this.$2.containsStreamGroup(this.$1)||this.$2.setStreamGroupAndTransport(this.$1,i)}else{var j=await d("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransportWithInitialStream(a,b,this.$3,this.streamGroupLoggingContext,function(){g.$2.removeStreamGroupAndTransport(g.$1)},h);this.$2.setStreamGroupAndTransport(this.$1,j.transport);return j.streamPromise}}return this.establishStreamWithTransport(a,b,c,e,f)};b.establishStreamWithTransport=async function(a,b,c,e,f){var g=a.loggingId;this.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"Establishing Grouped Stream","initialData:"+String(c!=null),!0,g);g=await this.$2.getStreamGroupTransport(this.$1).establishGroupedStream(b,a,new(d("DGWLoggingContext").DGWLoggingContext)(this.$3.dgwVersion,g,this.$3.serviceId,this.$3.fbId,this.$3.loggingId,a.disableFalcoLogging,(b=a.verboseLoggingEnabled)!=null?b:!1),c,e,f);return g};b.canCreateGroupedStream=function(){var a=!0;if(this.$2.containsStreamGroup(this.$1)!==!1){var b=this.$2.getStreamGroupTransport(this.$1);a=b.canCreateGroupedStream()}d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,a?"can_create":"cannot_create");return a};b.close=function(){var a=this.$2.getStreamGroupTransport(this.$1);a.close()};return a}();g.StreamGroup=a}),98);
__d("StreamGroupRegistry",["Random","err"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=new Map(),this.$2=new Set()}var b=a.prototype;b.setStreamGroupAndTransport=function(a,b){this.$1.set(a,b)};b.containsStreamGroup=function(a){return this.$1.has(a)};b.removeStreamGroupAndTransport=function(a){this.$1["delete"](a)};b.getStreamGroupTransport=function(a){a=this.$1.get(a);if(a==null)throw c("err")("No stream group transport");return a};b.getNewStreamGroupId=function(){var a=d("Random").uint32();while(this.$2.has(a))a=d("Random").uint32();this.$2.add(a);return a};return a}();g.StreamGroupRegistry=a}),98);
__d("RawDGWClient",["CurrentUser","DGWAuth","DGWLoggingContext","DGWStream","StreamGroup","StreamGroupRegistry","isFastRefreshEnabledForCurrentDomain"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=a.appId,c=a.appVersion,e=a.authType,f=a.dgwVersion,g=a.endpoint;a=a.fbId;this.$1=b;this.$2=c;this.$3=e;this.$4=f;this.$5=g;this.$6=a;this.$7=new(d("StreamGroupRegistry").StreamGroupRegistry)()}var b=a.prototype;b.createStreamGroup=function(a,b){var c;this.handleUserChecks((c=b.authType)!=null?c:this.$3);return new(d("StreamGroup").StreamGroup)(this.$1,this.$2,this.$3,this.$4,this.$5,this.$6,b,a,this.$7)};b.handleUserChecks=function(a){if(!c("CurrentUser").isLoggedInNow()&&d("DGWAuth").fromDGWAuthToString(a)!=="GUEST"&&!c("isFastRefreshEnabledForCurrentDomain")()){d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.RAW_CLIENT,"unauthenticated");throw d("DGWStream").StreamError.UNAUTHENTICATED}};return a}();g.RawDGWClient=a}),98);
__d("DGWClient",["DGWAuth","DGWEnvUtil","DGWWebConfig","RawDGWClient","err"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("RawDGWClient").RawDGWClient)({appId:c("DGWWebConfig").appId,appVersion:c("DGWWebConfig").appVersion,authType:d("DGWAuth").fromStringToDGWAuth(c("DGWEnvUtil").getDGWAuthType()),dgwVersion:c("DGWEnvUtil").getDGWVersion(),endpoint:c("DGWEnvUtil").getDGWEndpoint(),fbId:c("DGWWebConfig").fbId});function a(){if(c("DGWEnvUtil").isDGWEnvCompatible())return h;else throw c("err")("unsupported_environment_retry_with_mqtt")}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("BaseMiddotSeparator.react",["BaseMiddot.react","react","react-compiler-runtime","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(10),e=a.children,f=a["aria-label"],g=a["aria-labelledby"];a=a.asList;var h=a===void 0?!1:a;if(b[0]!==h||b[1]!==e){b[3]!==h?(a=function(a,b){return i.jsxs(j,{asList:h,children:[b!==0?i.jsx(c("BaseMiddot.react"),{}):null,a]},b)},b[3]=h,b[4]=a):a=b[4];a=i.Children.toArray(e).filter(Boolean).map(a);b[0]=h;b[1]=e;b[2]=a}else a=b[2];e=a;b[5]!==f||b[6]!==g||b[7]!==h||b[8]!==e?(a=h?i.jsx(d("react-strict-dom").html.span,{"aria-label":f!=null?f:void 0,"aria-labelledby":g!=null?g:void 0,role:"list",children:e}):e,b[5]=f,b[6]=g,b[7]=h,b[8]=e,b[9]=a):a=b[9];return a}function j(a){var b=d("react-compiler-runtime").c(3),c=a.asList;a=a.children;var e;b[0]!==c||b[1]!==a?(e=c?i.jsx(d("react-strict-dom").html.span,{role:"listitem",children:a}):a,b[0]=c,b[1]=a,b[2]=e):e=b[2];return e}g["default"]=a}),98);
__d("FBPayHubTransactionDetailDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="29938039689142900"}),null);
__d("FBPayHubTransactionDetailDialogQuery$Parameters.facebook",["FBPayHubTransactionDetailDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("FBPayHubTransactionDetailDialogQuery_facebookRelayOperation"),metadata:{},name:"FBPayHubTransactionDetailDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("FDSAirplaneFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("571771"),20);b=a;g["default"]=b}),98);
__d("FDSAppThreadsFilled16PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("380222"),16);b=a;g["default"]=b}),98);
__d("FDSBadgeCheckmarkFilled12PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("494936"),12);b=a;g["default"]=b}),98);
__d("FDSCalendarAddFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("640913"),20);b=a;g["default"]=b}),98);
__d("FDSCamcorderCrossFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("662989"),20);b=a;g["default"]=b}),98);
__d("FDSCamcorderIncomingFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("1096148"),20);b=a;g["default"]=b}),98);
__d("FDSCamcorderOutgoingFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("1096150"),20);b=a;g["default"]=b}),98);
__d("FDSCamcorderPlusFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("662993"),20);b=a;g["default"]=b}),98);
__d("FDSCheckmarkCircleFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("498146"),20);b=a;g["default"]=b}),98);
__d("FDSCheckmarkFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("477814"),20);b=a;g["default"]=b}),98);
__d("FDSCurrencyUsdFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("847056"),20);b=a;g["default"]=b}),98);
__d("FDSDocumentFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("728245"),20);b=a;g["default"]=b}),98);
__d("FDSFriendConfirmFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("538342"),20);b=a;g["default"]=b}),98);
__d("FDSFriendRemoveFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("714636"),20);b=a;g["default"]=b}),98);
__d("FDSFriendRequestFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("502671"),20);b=a;g["default"]=b}),98);
__d("FDSKeyHouseFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("1670302"),20);b=a;g["default"]=b}),98);
__d("FDSLocationFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("795388"),20);b=a;g["default"]=b}),98);
__d("FDSMapFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("645715"),20);b=a;g["default"]=b}),98);
__d("FDSNumberedBadge.react",["fbt","CometScreenReaderText.react","CometVisualCompletionAttributes","getFDSBadgeColorStyle","react","react-compiler-runtime","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react"),l={rectangle:{borderStartStartRadius:"x1ekkm8c",borderStartEndRadius:"x1143rjc",borderEndEndRadius:"xum4auv",borderEndStartRadius:"xj21bgg",$$css:!0},root:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",display:"x3nfvp2",fontSize:"x1nxh6w3",fontWeight:"xk50ysn",height:"xhvdbge",lineHeight:"xo5v014",minWidth:"xnyloks",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(20),e=a.accessibilityText,f=a.color,g=a.overflow,j=a.ref,m=a.testid,n=a.value;a=a.vcIgnore;f=f===void 0?"red":f;g=g===void 0?20:g;a=a===void 0?!1:a;var o;b[0]!==a?(o=a===!0?c("CometVisualCompletionAttributes").IGNORE_DYNAMIC:{},b[0]=a,b[1]=o):o=b[1];b[2]!==f||b[3]!==n?(a=(i||(i=c("stylex"))).props(l.root,c("getFDSBadgeColorStyle")(f),n>=10&&l.rectangle),b[2]=f,b[3]=n,b[4]=a):a=b[4];var p;b[5]!==e?(p=(typeof e==="string"||h.isFbtInstance(e))&&k.jsx(c("CometScreenReaderText.react"),{text:e}),b[5]=e,b[6]=p):p=b[6];e=typeof e==="string"||h.isFbtInstance(e)?!0:void 0;var q;b[7]!==f?(q={0:{className:"x6s0dn4 xtk6v10 x3nfvp2 x5yr21d xl56j7k xexx8yu x18d9i69 xaso8d8 x1gabggj xh8yej3"},1:{className:"x6s0dn4 x3nfvp2 x5yr21d xl56j7k xexx8yu x18d9i69 xaso8d8 x1gabggj xh8yej3 x1mvi0mv"}}[!!(f==="lightBlue")<<0],b[7]=f,b[8]=q):q=b[8];f=n>g?g+"+":n;b[9]!==e||b[10]!==q||b[11]!==f?(g=k.jsx("span",babelHelpers["extends"]({"aria-hidden":e},q,{children:f})),b[9]=e,b[10]=q,b[11]=f,b[12]=g):g=b[12];b[13]!==j||b[14]!==g||b[15]!==o||b[16]!==a||b[17]!==p||b[18]!==m?(n=k.jsxs("span",babelHelpers["extends"]({},o,a,{"data-testid":void 0,ref:j,children:[p,g]})),b[13]=j,b[14]=g,b[15]=o,b[16]=a,b[17]=p,b[18]=m,b[19]=n):n=b[19];return n}g["default"]=a}),98);
__d("FDSPhoneCrossFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("847457"),20);b=a;g["default"]=b}),98);
__d("FDSPhoneIncomingFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("1096151"),20);b=a;g["default"]=b}),98);
__d("FDSPhoneOutgoingFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("1096154"),20);b=a;g["default"]=b}),98);
__d("FDSPinFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("481942"),20);b=a;g["default"]=b}),98);
__d("FDSPostClockFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("1604445"),20);b=a;g["default"]=b}),98);
__d("FDSPostSlashFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("1501526"),20);b=a;g["default"]=b}),98);
__d("FDSShoppingCartFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("763120"),20);b=a;g["default"]=b}),98);
__d("FDSTagFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("502473"),20);b=a;g["default"]=b}),98);
__d("LexicalClipboard",["cr:862"],(function(a,b,c,d,e,f){e.exports=b("cr:862")}),null);
__d("LexicalHtml",["cr:1497"],(function(a,b,c,d,e,f){e.exports=b("cr:1497")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<72ccea9adf628bcebd7faae4d56781d1>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalClipboard.prod",["Lexical","LexicalHtml","LexicalSelection","LexicalUtils"],(function $module_LexicalClipboard_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";function i(e){var n=new URL("https://lexical.dev/docs/error"),o=new URLSearchParams();o.append("code",e);for(var _len=arguments.length,t=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){t[_key-1]=arguments[_key];}for(var _e of t)o.append("v",_e);throw n.search=o.toString(),Error("Minified Lexical error #"+e+"; visit "+n.toString()+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.");}function r(t,n){if(n===void 0){n=require("Lexical").$getSelection();}return null==n&&i(166),require("Lexical").$isRangeSelection(n)&&n.isCollapsed()||0===n.getNodes().length?"":require("LexicalHtml").$generateHtmlFromNodes(t,n);}function l(e,t){if(t===void 0){t=require("Lexical").$getSelection();}return null==t&&i(166),require("Lexical").$isRangeSelection(t)&&t.isCollapsed()||0===t.getNodes().length?null:JSON.stringify(c(e,t));}function s(e,t,n){e.dispatchCommand(require("Lexical").SELECTION_INSERT_CLIPBOARD_NODES_COMMAND,{nodes:t,selection:n})||(n.insertNodes(t),function(e){if(require("Lexical").$isRangeSelection(e)&&e.isCollapsed()){var _t=e.anchor;var _n=null;var _i=require("Lexical").$caretFromPoint(_t,"previous");if(_i)if(require("Lexical").$isTextPointCaret(_i))_n=_i.origin;else{var _e2=require("Lexical").$getCaretRange(_i,require("Lexical").$getChildCaret(require("Lexical").$getRoot(),"next").getFlipped());for(var _t2 of _e2){if(require("Lexical").$isTextNode(_t2.origin)){_n=_t2.origin;break;}if(require("Lexical").$isElementNode(_t2.origin)&&!_t2.origin.isInline())break;}}if(_n&&require("Lexical").$isTextNode(_n)){var _t3=_n.getFormat(),_o=_n.getStyle();e.format===_t3&&e.style===_o||(e.format=_t3,e.style=_o,e.dirty=!0);}}}(n));}function a(e,n,r,l){if(l===void 0){l=[];}var s=null===n||r.isSelected(n);var c=require("Lexical").$isElementNode(r)&&r.excludeFromCopy("html");var d=r;if(null!==n){var _e3=require("Lexical").$cloneWithProperties(r);_e3=require("Lexical").$isTextNode(_e3)&&null!==n?require("LexicalSelection").$sliceSelectedTextNodeContent(n,_e3):_e3,d=_e3;}var u=require("Lexical").$isElementNode(d)?d.getChildren():[],f=function(e){var t=e.exportJSON(),n=e.constructor;if(t.type!==n.getType()&&i(58,n.name),require("Lexical").$isElementNode(e)){var _e4=t.children;Array.isArray(_e4)||i(59,n.name);}return t;}(d);if(require("Lexical").$isTextNode(d)){var _e5=d.__text;_e5.length>0?f.text=_e5:s=!1;}for(var _t4=0;_t4<u.length;_t4++){var _i2=u[_t4],_l=a(e,n,_i2,f.children);!s&&require("Lexical").$isElementNode(r)&&_l&&r.extractWithChild(_i2,n,"clone")&&(s=!0);}if(s&&!c)l.push(f);else if(Array.isArray(f.children))for(var _e6=0;_e6<f.children.length;_e6++){var _t5=f.children[_e6];l.push(_t5);}return s;}function c(e,t){var n=[],i=require("Lexical").$getRoot().getChildren();for(var _o2=0;_o2<i.length;_o2++){a(e,t,i[_o2],n);}return{namespace:e._config.namespace,nodes:n};}function d(e){var n=[];for(var _i3=0;_i3<e.length;_i3++){var _r=e[_i3],_l2=require("Lexical").$parseSerializedNode(_r);require("Lexical").$isTextNode(_l2)&&require("LexicalSelection").$addNodeStyle(_l2),n.push(_l2);}return n;}var u=null;function f(e,t,n){if(void 0===n){var _t6=require("Lexical").getDOMSelection(e._window);if(!_t6)return!1;var _i4=_t6.anchorNode,_r2=_t6.focusNode;if(null!==_i4&&null!==_r2&&!require("Lexical").isSelectionWithinEditor(e,_i4,_r2))return!1;var _l3=require("Lexical").$getSelection();if(null===_l3)return!1;n=g(_l3);}t.preventDefault();var i=t.clipboardData;return null!==i&&(x(i,n),!0);}var p=[["text/html",r],["application/x-lexical-editor",l]];function g(e){if(e===void 0){e=require("Lexical").$getSelection();}var t={"text/plain":e?e.getTextContent():""};if(e){var _n2=require("Lexical").$getEditor();for(var _ref2 of p){var _o3=_ref2[0];var _i5=_ref2[1];{var _r3=_i5(_n2,e);null!==_r3&&(t[_o3]=_r3);}}}return t;}function x(e,t){for(var _n3 in t){var _o4=t[_n3];void 0!==_o4&&e.setData(_n3,_o4);}}exports.$generateJSONFromSelectedNodes=c,exports.$generateNodesFromSerializedNodes=d,exports.$getClipboardDataFromSelection=g,exports.$getHtmlContent=r,exports.$getLexicalContent=l,exports.$insertDataTransferForPlainText=function(e,t){var n=e.getData("text/plain")||e.getData("text/uri-list");null!=n&&t.insertRawText(n);},exports.$insertDataTransferForRichText=function(t,n,i){var r=t.getData("application/x-lexical-editor");if(r)try{var _e7=JSON.parse(r);if(_e7.namespace===i._config.namespace&&Array.isArray(_e7.nodes)){return s(i,d(_e7.nodes),n);}}catch(e){}var l=t.getData("text/html"),a=t.getData("text/plain");if(l&&a!==l)try{var _t7=new DOMParser().parseFromString(function(e){if(window.trustedTypes&&window.trustedTypes.createPolicy){return window.trustedTypes.createPolicy("Lexical",{createHTML:function createHTML(e){return e;}}).createHTML(e);}return e;}(l),"text/html");return s(i,require("LexicalHtml").$generateNodesFromDOM(i,_t7),n);}catch(e){}var c=a||t.getData("text/uri-list");if(null!=c)if(require("Lexical").$isRangeSelection(n)){var _e8=c.split(/(\r?\n|\t)/);""===_e8[_e8.length-1]&&_e8.pop();for(var _t8=0;_t8<_e8.length;_t8++){var _n4=require("Lexical").$getSelection();if(require("Lexical").$isRangeSelection(_n4)){var _i6=_e8[_t8];"\n"===_i6||"\r\n"===_i6?_n4.insertParagraph():"\t"===_i6?_n4.insertNodes([require("Lexical").$createTabNode()]):_n4.insertText(_i6);}}}else n.insertRawText(c);},exports.$insertGeneratedNodes=s,exports.copyToClipboard=async function(e,t,i){if(null!==u)return!1;if(null!==t)return new Promise(function(n,o){e.update(function(){n(f(e,t,i));});});var r=e.getRootElement(),l=e._window||window,s=window.document,a=require("Lexical").getDOMSelection(l);if(null===r||null===a)return!1;var c=s.createElement("span");c.style.cssText="position: fixed; top: -1000px;",c.append(s.createTextNode("#")),r.append(c);var d=new Range();return d.setStart(c,0),d.setEnd(c,1),a.removeAllRanges(),a.addRange(d),new Promise(function(t,r){var l=e.registerCommand(require("Lexical").COPY_COMMAND,function(o){return require("LexicalUtils").objectKlassEquals(o,ClipboardEvent)&&(l(),null!==u&&(window.clearTimeout(u),u=null),t(f(e,o,i))),!0;},require("Lexical").COMMAND_PRIORITY_CRITICAL);u=window.setTimeout(function(){l(),u=null,t(!1);},50),s.execCommand("copy"),c.remove();});},exports.setLexicalClipboardDataTransfer=x;}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<cd5c73654bce8c2f27a693250a4cd1f0>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalDragon.prod",["Lexical"],(function $module_LexicalDragon_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";exports.registerDragonSupport=function(t){var n=window.location.origin,o=function o(_o){if(_o.origin!==n)return;var i=t.getRootElement();if(document.activeElement!==i)return;var s=_o.data;if("string"==typeof s){var _n;try{_n=JSON.parse(s);}catch(e){return;}if(_n&&"nuanria_messaging"===_n.protocol&&"request"===_n.type){var _i=_n.payload;if(_i&&"makeChanges"===_i.functionId){var _n2=_i.args;if(_n2){var _i2=_n2[0],_s=_n2[1],r=_n2[2],a=_n2[3],c=_n2[4],g=_n2[5];t.update(function(){var t=require("Lexical").$getSelection();if(require("Lexical").$isRangeSelection(t)){var _n3=t.anchor;var _g=_n3.getNode(),d=0,u=0;if(require("Lexical").$isTextNode(_g)&&_i2>=0&&_s>=0&&(d=_i2,u=_i2+_s,t.setTextNodeRange(_g,d,_g,u)),d===u&&""===r||(t.insertRawText(r),_g=_n3.getNode()),require("Lexical").$isTextNode(_g)){d=a,u=a+c;var _e=_g.getTextContentSize();d=d>_e?_e:d,u=u>_e?_e:u,t.setTextNodeRange(_g,d,_g,u);}_o.stopImmediatePropagation();}});}}}}};return window.addEventListener("message",o,!0),function(){window.removeEventListener("message",o,!0);};};}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<1e906dfc753852931a5746cc0583a10d>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalHistory.prod",["Lexical","LexicalUtils"],(function $module_LexicalHistory_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";function n(t,n,r,o,i){if(null===t||0===r.size&&0===o.size&&!i)return 0;var s=n._selection,c=t._selection;if(i)return 1;if(!(require("Lexical").$isRangeSelection(s)&&require("Lexical").$isRangeSelection(c)&&c.isCollapsed()&&s.isCollapsed()))return 0;var a=function(t,n,r){var o=t._nodeMap,i=[];for(var _t of n){var _e=o.get(_t);void 0!==_e&&i.push(_e);}for(var _ref2 of r){var _t2=_ref2[0];var _n=_ref2[1];{if(!_n)continue;var _r=o.get(_t2);void 0===_r||require("Lexical").$isRootNode(_r)||i.push(_r);}}return i;}(n,r,o);if(0===a.length)return 0;if(a.length>1){var _r2=n._nodeMap,_o=_r2.get(s.anchor.key),_i=_r2.get(c.anchor.key);return _o&&_i&&!t._nodeMap.has(_o.__key)&&require("Lexical").$isTextNode(_o)&&1===_o.__text.length&&1===s.anchor.offset?2:0;}var u=a[0],d=t._nodeMap.get(u.__key);if(!require("Lexical").$isTextNode(d)||!require("Lexical").$isTextNode(u)||d.__mode!==u.__mode)return 0;var _=d.__text,l=u.__text;if(_===l)return 0;var f=s.anchor,O=c.anchor;if(f.key!==O.key||"text"!==f.type)return 0;var C=f.offset,p=O.offset,M=l.length-_.length;return 1===M&&p===C-1?2:-1===M&&p===C+1?3:-1===M&&p===C?4:0;}function r(t,r){var o=Date.now(),i=0;return function(s,c,a,u,d,_){var l=Date.now();if(_.has(require("Lexical").HISTORIC_TAG))return i=0,o=l,2;var f=n(s,c,u,d,t.isComposing()),O=function(){var n=null===a||a.editor===t,O=_.has(require("Lexical").HISTORY_PUSH_TAG);if(!O&&n&&_.has(require("Lexical").HISTORY_MERGE_TAG))return 0;if(null===s)return 1;var C=c._selection;if(!(u.size>0||d.size>0))return null!==C?0:2;if(!1===O&&0!==f&&f===i&&l<o+r&&n)return 0;if(1===u.size){if(function(t,n,r){var o=n._nodeMap.get(t),i=r._nodeMap.get(t),s=n._selection,c=r._selection;return!(require("Lexical").$isRangeSelection(s)&&require("Lexical").$isRangeSelection(c)&&"element"===s.anchor.type&&"element"===s.focus.type&&"text"===c.anchor.type&&"text"===c.focus.type||!require("Lexical").$isTextNode(o)||!require("Lexical").$isTextNode(i)||o.__parent!==i.__parent)&&JSON.stringify(n.read(function(){return o.exportJSON();}))===JSON.stringify(r.read(function(){return i.exportJSON();}));}(Array.from(u)[0],s,c))return 0;}return 1;}();return o=l,i=f,O;};}function o(t){t.undoStack=[],t.redoStack=[],t.current=null;}exports.createEmptyHistoryState=function(){return{current:null,redoStack:[],undoStack:[]};},exports.registerHistory=function(n,i,s){var _require_Lexical;var c=r(n,s);return require("LexicalUtils").mergeRegister(n.registerCommand((_require_Lexical=require("Lexical")).UNDO_COMMAND,function(){return function(t,n){var r=n.redoStack,o=n.undoStack;if(0!==o.length){var _i2=n.current,_s=o.pop();null!==_i2&&(r.push(_i2),t.dispatchCommand(require("Lexical").CAN_REDO_COMMAND,!0)),0===o.length&&t.dispatchCommand(require("Lexical").CAN_UNDO_COMMAND,!1),n.current=_s||null,_s&&_s.editor.setEditorState(_s.editorState,{tag:require("Lexical").HISTORIC_TAG});}}(n,i),!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),n.registerCommand(_require_Lexical.REDO_COMMAND,function(){return function(t,n){var r=n.redoStack,o=n.undoStack;if(0!==r.length){var _i3=n.current;null!==_i3&&(o.push(_i3),t.dispatchCommand(require("Lexical").CAN_UNDO_COMMAND,!0));var _s2=r.pop();0===r.length&&t.dispatchCommand(require("Lexical").CAN_REDO_COMMAND,!1),n.current=_s2||null,_s2&&_s2.editor.setEditorState(_s2.editorState,{tag:require("Lexical").HISTORIC_TAG});}}(n,i),!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),n.registerCommand(_require_Lexical.CLEAR_EDITOR_COMMAND,function(){return o(i),!1;},_require_Lexical.COMMAND_PRIORITY_EDITOR),n.registerCommand(_require_Lexical.CLEAR_HISTORY_COMMAND,function(){return o(i),n.dispatchCommand(require("Lexical").CAN_REDO_COMMAND,!1),n.dispatchCommand(require("Lexical").CAN_UNDO_COMMAND,!1),!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),n.registerUpdateListener(function(_ref3){var t=_ref3.editorState,r=_ref3.prevEditorState,o=_ref3.dirtyLeaves,s=_ref3.dirtyElements,a=_ref3.tags;var u=i.current,d=i.redoStack,_=i.undoStack,l=null===u?null:u.editorState;if(null!==u&&t===l)return;var f=c(r,t,u,o,s,a);if(1===f)0!==d.length&&(i.redoStack=[],n.dispatchCommand(require("Lexical").CAN_REDO_COMMAND,!1)),null!==u&&(_.push(babelHelpers["extends"]({},u)),n.dispatchCommand(require("Lexical").CAN_UNDO_COMMAND,!0));else if(2===f)return;i.current={editor:n,editorState:t};}));};}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<59d0b568da0d95113481c4525402e522>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalHtml.prod",["Lexical","LexicalSelection","LexicalUtils"],(function $module_LexicalHtml_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";function o(l,i,r,s){if(s===void 0){s=null;}var c=null===s||i.isSelected(s);var d=require("Lexical").$isElementNode(i)&&i.excludeFromCopy("html");var u=i;if(null!==s){var _t=require("Lexical").$cloneWithProperties(i);_t=require("Lexical").$isTextNode(_t)&&null!==s?require("LexicalSelection").$sliceSelectedTextNodeContent(s,_t):_t,u=_t;}var a=require("Lexical").$isElementNode(u)?u.getChildren():[],f=require("Lexical").getRegisteredNode(l,u.getType());var m;m=f&&void 0!==f.exportDOM?f.exportDOM(l,u):u.exportDOM(l);var _m=m,h=_m.element,p=_m.after;if(!h)return!1;var g=document.createDocumentFragment();for(var _e=0;_e<a.length;_e++){var _t2=a[_e],_r=o(l,_t2,g,s);!c&&require("Lexical").$isElementNode(i)&&_r&&i.extractWithChild(_t2,s,"html")&&(c=!0);}if(c&&!d){if((require("LexicalUtils").isHTMLElement(h)||require("Lexical").isDocumentFragment(h))&&h.append(g),r.append(h),p){var _e2=p.call(u,h);_e2&&(require("Lexical").isDocumentFragment(h)?h.replaceChildren(_e2):h.replaceWith(_e2));}}else r.append(g);return c;}var l=new Set(["STYLE","SCRIPT"]);function i(e,o,s,c,d,u){var _f;if(d===void 0){d=new Map();}var a=[];if(l.has(e.nodeName))return a;var f=null;var m=function(e,t){var n=e.nodeName,o=t._htmlConversions.get(n.toLowerCase());var l=null;if(void 0!==o)for(var _t3 of o){var _n=_t3(e);null!==_n&&(null===l||(l.priority||0)<=(_n.priority||0))&&(l=_n);}return null!==l?l.conversion:null;}(e,o),h=m?m(e):null;var p=null;if(null!==h){p=h.after;var _t4=h.node;if(f=Array.isArray(_t4)?_t4[_t4.length-1]:_t4,null!==f){var _a;for(var _ref2 of d){var _e3=_ref2[1];if(f=_e3(f,u),!f)break;}f&&(_a=a).push.apply(_a,Array.isArray(_t4)?_t4:[f]);}null!=h.forChild&&d.set(e.nodeName,h.forChild);}var g=e.childNodes;var N=[];var $=(null==f||!require("Lexical").$isRootOrShadowRoot(f))&&(null!=f&&require("Lexical").$isBlockElementNode(f)||c);for(var _e4=0;_e4<g.length;_e4++){var _N;(_N=N).push.apply(_N,i(g[_e4],o,s,$,new Map(d),f));}return null!=p&&(N=p(N)),require("LexicalUtils").isBlockDomNode(e)&&(N=r(e,N,$?function(){var e=new(require("Lexical").ArtificialNode__DO_NOT_USE)();return s.push(e),e;}:require("Lexical").$createParagraphNode)),null==f?N.length>0?a=a.concat(N):require("LexicalUtils").isBlockDomNode(e)&&function(e){if(null==e.nextSibling||null==e.previousSibling)return!1;return require("Lexical").isInlineDomNode(e.nextSibling)&&require("Lexical").isInlineDomNode(e.previousSibling);}(e)&&(a=a.concat(require("Lexical").$createLineBreakNode())):require("Lexical").$isElementNode(f)&&(_f=f).append.apply(_f,N),a;}function r(e,t,o){var l=e.style.textAlign,i=[];var r=[];for(var _e5=0;_e5<t.length;_e5++){var s=t[_e5];if(require("Lexical").$isBlockElementNode(s))l&&!s.getFormat()&&s.setFormat(l),i.push(s);else if(r.push(s),_e5===t.length-1||_e5<t.length-1&&require("Lexical").$isBlockElementNode(t[_e5+1])){var _e6=o();_e6.setFormat(l),_e6.append.apply(_e6,r),i.push(_e6),r=[];}}return i;}exports.$generateHtmlFromNodes=function(e,t){if("undefined"==typeof document||"undefined"==typeof window&&void 0===global.window)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");var l=document.createElement("div"),i=require("Lexical").$getRoot().getChildren();for(var _n2=0;_n2<i.length;_n2++){o(e,i[_n2],l,t);}return l.innerHTML;},exports.$generateNodesFromDOM=function(e,t){var o=t.body?t.body.childNodes:[];var r=[];var s=[];for(var _t5=0;_t5<o.length;_t5++){var _n3=o[_t5];if(!l.has(_n3.nodeName)){var _t6=i(_n3,e,s,!1);null!==_t6&&(r=r.concat(_t6));}}return function(e){for(var _t7 of e)_t7.getNextSibling()instanceof require("Lexical").ArtificialNode__DO_NOT_USE&&_t7.insertAfter(require("Lexical").$createLineBreakNode());for(var _t8 of e){var _e7=_t8.getChildren();for(var _n4 of _e7)_t8.insertBefore(_n4);_t8.remove();}}(s),r;};}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<8e7ba94880acb45a5b530761d203b126>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalPlainText.prod",["Lexical","LexicalClipboard","LexicalSelection","LexicalUtils"],(function $module_LexicalPlainText_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";var i="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,o=i&&"documentMode"in document?document.documentMode:null,a=!(!i||!("InputEvent"in window)||o)&&"getTargetRanges"in new window.InputEvent("input"),s=i&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),l=i&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,R=i&&/^(?=.*Chrome).*/i.test(navigator.userAgent),c=i&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!R;function O(t,i){i.update(function(){if(null!==t){var _o=require("LexicalUtils").objectKlassEquals(t,KeyboardEvent)?null:t.clipboardData,_a=require("Lexical").$getSelection();if(null!==_a&&null!=_o){t.preventDefault();var _n=require("LexicalClipboard").$getHtmlContent(i);null!==_n&&_o.setData("text/html",_n),_o.setData("text/plain",_a.getTextContent());}}});}exports.registerPlainText=function(i){var _require_Lexical;return require("LexicalUtils").mergeRegister(i.registerCommand((_require_Lexical=require("Lexical")).DELETE_CHARACTER_COMMAND,function(e){var t=require("Lexical").$getSelection();return!!require("Lexical").$isRangeSelection(t)&&(t.deleteCharacter(e),!0);},_require_Lexical.COMMAND_PRIORITY_EDITOR),i.registerCommand(_require_Lexical.DELETE_WORD_COMMAND,function(e){var t=require("Lexical").$getSelection();return!!require("Lexical").$isRangeSelection(t)&&(t.deleteWord(e),!0);},_require_Lexical.COMMAND_PRIORITY_EDITOR),i.registerCommand(_require_Lexical.DELETE_LINE_COMMAND,function(e){var t=require("Lexical").$getSelection();return!!require("Lexical").$isRangeSelection(t)&&(t.deleteLine(e),!0);},_require_Lexical.COMMAND_PRIORITY_EDITOR),i.registerCommand(_require_Lexical.CONTROLLED_TEXT_INSERTION_COMMAND,function(t){var n=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(n))return!1;if("string"==typeof t)n.insertText(t);else{var _r=t.dataTransfer;if(null!=_r)require("LexicalClipboard").$insertDataTransferForPlainText(_r,n);else{var _e=t.data;_e&&n.insertText(_e);}}return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),i.registerCommand(_require_Lexical.REMOVE_TEXT_COMMAND,function(){var e=require("Lexical").$getSelection();return!!require("Lexical").$isRangeSelection(e)&&(e.removeText(),!0);},_require_Lexical.COMMAND_PRIORITY_EDITOR),i.registerCommand(_require_Lexical.INSERT_LINE_BREAK_COMMAND,function(e){var t=require("Lexical").$getSelection();return!!require("Lexical").$isRangeSelection(t)&&(t.insertLineBreak(e),!0);},_require_Lexical.COMMAND_PRIORITY_EDITOR),i.registerCommand(_require_Lexical.INSERT_PARAGRAPH_COMMAND,function(){var e=require("Lexical").$getSelection();return!!require("Lexical").$isRangeSelection(e)&&(e.insertLineBreak(),!0);},_require_Lexical.COMMAND_PRIORITY_EDITOR),i.registerCommand(_require_Lexical.KEY_ARROW_LEFT_COMMAND,function(e){var n=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(n))return!1;var i=e,o=i.shiftKey;return!!require("LexicalSelection").$shouldOverrideDefaultCharacterSelection(n,!0)&&(i.preventDefault(),require("LexicalSelection").$moveCharacter(n,o,!0),!0);},_require_Lexical.COMMAND_PRIORITY_EDITOR),i.registerCommand(_require_Lexical.KEY_ARROW_RIGHT_COMMAND,function(e){var n=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(n))return!1;var i=e,o=i.shiftKey;return!!require("LexicalSelection").$shouldOverrideDefaultCharacterSelection(n,!1)&&(i.preventDefault(),require("LexicalSelection").$moveCharacter(n,o,!1),!0);},_require_Lexical.COMMAND_PRIORITY_EDITOR),i.registerCommand(_require_Lexical.KEY_BACKSPACE_COMMAND,function(e){var t=require("Lexical").$getSelection();return!!require("Lexical").$isRangeSelection(t)&&(!l||"ko-KR"!==navigator.language)&&(e.preventDefault(),i.dispatchCommand(require("Lexical").DELETE_CHARACTER_COMMAND,!0));},_require_Lexical.COMMAND_PRIORITY_EDITOR),i.registerCommand(_require_Lexical.KEY_DELETE_COMMAND,function(e){var t=require("Lexical").$getSelection();return!!require("Lexical").$isRangeSelection(t)&&(e.preventDefault(),i.dispatchCommand(require("Lexical").DELETE_CHARACTER_COMMAND,!1));},_require_Lexical.COMMAND_PRIORITY_EDITOR),i.registerCommand(_require_Lexical.KEY_ENTER_COMMAND,function(e){var t=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(t))return!1;if(null!==e){if((l||s||c)&&a)return!1;e.preventDefault();}return i.dispatchCommand(require("Lexical").INSERT_LINE_BREAK_COMMAND,!1);},_require_Lexical.COMMAND_PRIORITY_EDITOR),i.registerCommand(_require_Lexical.SELECT_ALL_COMMAND,function(){return require("Lexical").$selectAll(),!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),i.registerCommand(_require_Lexical.COPY_COMMAND,function(e){var t=require("Lexical").$getSelection();return!!require("Lexical").$isRangeSelection(t)&&(O(e,i),!0);},_require_Lexical.COMMAND_PRIORITY_EDITOR),i.registerCommand(_require_Lexical.CUT_COMMAND,function(e){var t=require("Lexical").$getSelection();return!!require("Lexical").$isRangeSelection(t)&&(function(e,t){O(e,t),t.update(function(){var e=require("Lexical").$getSelection();require("Lexical").$isRangeSelection(e)&&e.removeText();});}(e,i),!0);},_require_Lexical.COMMAND_PRIORITY_EDITOR),i.registerCommand(_require_Lexical.PASTE_COMMAND,function(t){var o=require("Lexical").$getSelection();return!!require("Lexical").$isRangeSelection(o)&&(function(t,i){t.preventDefault(),i.update(function(){var i=require("Lexical").$getSelection(),o=require("LexicalUtils").objectKlassEquals(t,ClipboardEvent)?t.clipboardData:null;null!=o&&require("Lexical").$isRangeSelection(i)&&require("LexicalClipboard").$insertDataTransferForPlainText(o,i);},{tag:require("Lexical").PASTE_TAG});}(t,i),!0);},_require_Lexical.COMMAND_PRIORITY_EDITOR),i.registerCommand(_require_Lexical.DROP_COMMAND,function(e){var t=require("Lexical").$getSelection();return!!require("Lexical").$isRangeSelection(t)&&(e.preventDefault(),!0);},_require_Lexical.COMMAND_PRIORITY_EDITOR),i.registerCommand(_require_Lexical.DRAGSTART_COMMAND,function(e){var t=require("Lexical").$getSelection();return!!require("Lexical").$isRangeSelection(t)&&(e.preventDefault(),!0);},_require_Lexical.COMMAND_PRIORITY_EDITOR));};}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<173033b6016ff2780accdbfb153889c4>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalSelection.prod",["Lexical"],(function $module_LexicalSelection_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";function t(e){for(var _len=arguments.length,t=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){t[_key-1]=arguments[_key];}var n=new URL("https://lexical.dev/docs/error"),o=new URLSearchParams();o.append("code",e);for(var _e of t)o.append("v",_e);throw n.search=o.toString(),Error("Minified Lexical error #"+e+"; visit "+n.toString()+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.");}var n=new Map();function o(e){var t=e;for(;null!=t;){if(t.nodeType===Node.TEXT_NODE)return t;t=t.firstChild;}return null;}function s(e){var t=e.parentNode;if(null==t)throw new Error("Should never happen");return[t,Array.from(t.childNodes).indexOf(e)];}function r(e){var t={};if(!e)return t;var n=e.split(";");for(var _e2 of n)if(""!==_e2){var _e2$split=_e2.split(/:([^]+)/),_n=_e2$split[0],_o=_e2$split[1];_n&&_o&&(t[_n.trim()]=_o.trim());}return t;}function l(e){var t=n.get(e);return void 0===t&&(t=r(e),n.set(e,t)),t;}function i(e){var t="";for(var _n2 in e)_n2&&(t+=_n2+": "+e[_n2]+";");return t;}function c(t,n,o){var s=n.getNode(),r=o;if(require("Lexical").$isElementNode(s)){var _e3=s.getDescendantByIndex(n.offset);null!==_e3&&(s=_e3);}var _loop=function _loop(){if(require("Lexical").$isElementNode(s)){var _e4=s.getLastDescendant();null!==_e4&&(s=_e4);}var o=s.getPreviousSibling(),l=0;if(null===o){var _e5=s.getParentOrThrow(),_t=_e5.getPreviousSibling();for(;null===_t;){if(_e5=_e5.getParent(),null===_e5){o=null;break;}_t=_e5.getPreviousSibling();}null!==_e5&&(l=_e5.isInline()?0:2,o=_t);}var i=s.getTextContent();""===i&&require("Lexical").$isElementNode(s)&&!s.isInline()&&(i="\n\n");var c=i.length;if(!require("Lexical").$isTextNode(s)||r>=c){var _t2=s.getParent();s.remove(),null==_t2||0!==_t2.getChildrenSize()||require("Lexical").$isRootNode(_t2)||_t2.remove(),r-=c+l,s=o;}else{var _o2=s.getKey(),_l=t.getEditorState().read(function(){var t=require("Lexical").$getNodeByKey(_o2);return require("Lexical").$isTextNode(t)&&t.isSimpleText()?t.getTextContent():null;}),_f=c-r,_a=i.slice(0,_f);if(null!==_l&&_l!==i){var _t3=require("Lexical").$getPreviousSelection();var _n3=s;if(s.isSimpleText())s.setTextContent(_l);else{var _t4=require("Lexical").$createTextNode(_l);s.replace(_t4),_n3=_t4;}if(require("Lexical").$isRangeSelection(_t3)&&_t3.isCollapsed()){var _e6=_t3.anchor.offset;_n3.select(_e6,_e6);}}else if(s.isSimpleText()){var _e7=n.key===_o2;var _t5=n.offset;_t5<r&&(_t5=c);var _l2=_e7?_t5-r:0,_i=_e7?_t5:_f;if(_e7&&0===_l2){var _s$splitText=s.splitText(_l2,_i),_e8=_s$splitText[0];_e8.remove();}else{var _s$splitText2=s.splitText(_l2,_i),_e9=_s$splitText2[1];_e9.remove();}}else{var _t6=require("Lexical").$createTextNode(_a);s.replace(_t6);}r=0;}};for(;r>0&&null!==s;){_loop();}}function f(o,s){(require("Lexical").$isRangeSelection(o)?o.isCollapsed():require("Lexical").$isTextNode(o)||require("Lexical").$isElementNode(o))||t(280);var r=l(require("Lexical").$isRangeSelection(o)?o.style:require("Lexical").$isTextNode(o)?o.getStyle():o.getTextStyle()),c=Object.entries(s).reduce(function(e,_ref){var t=_ref[0],n=_ref[1];return"function"==typeof n?e[t]=n(r[t],o):null===n?delete e[t]:e[t]=n,e;},babelHelpers["extends"]({},r)),f=i(c);require("Lexical").$isRangeSelection(o)||require("Lexical").$isTextNode(o)?o.setStyle(f):o.setTextStyle(f),n.set(f,c);}function a(t){var n=require("Lexical").$getSelection();if(!n)return;var o=new Map(),s=function s(e){return o.get(e.getKey())||[0,e.getTextContentSize()];};if(require("Lexical").$isRangeSelection(n))for(var _t7 of require("Lexical").$caretRangeFromSelection(n).getTextSlices())_t7&&o.set(_t7.caret.origin.getKey(),_t7.getSliceIndices());var r=n.getNodes();for(var _n4 of r){if(!require("Lexical").$isTextNode(_n4)||!_n4.canHaveFormat())continue;var _s=s(_n4),_o3=_s[0],_r=_s[1];if(_r!==_o3)if(require("Lexical").$isTokenOrSegmented(_n4)||0===_o3&&_r===_n4.getTextContentSize())t(_n4);else{t(_n4.splitText(_o3,_r)[0===_o3?0:1]);}}require("Lexical").$isRangeSelection(n)&&"text"===n.anchor.type&&"text"===n.focus.type&&n.anchor.key===n.focus.key&&d(n);}function d(e){if(e.isBackward()){var _t8=e.anchor,_n5=e.focus,_o4=_t8.key,_s2=_t8.offset,_r2=_t8.type;_t8.set(_n5.key,_n5.offset,_n5.type),_n5.set(_o4,_s2,_r2);}}function u(e,t){var n=e.getFormatType(),o=e.getIndent();n!==t.getFormatType()&&t.setFormat(n),o!==t.getIndent()&&t.setIndent(o);}function g(e){return e.getNode().isAttached();}function p(t){var n=t;for(;null!==n&&!require("Lexical").$isRootOrShadowRoot(n);){var _e0=n.getLatest(),_t9=n.getParent();0===_e0.getChildrenSize()&&n.remove(!0),n=_t9;}}function h(n,o,s,r,l){if(l===void 0){l=null;}if(0===o.length)return;var i=o[0],c=new Map(),f=[];var a=require("Lexical").$isElementNode(i)?i:i.getParentOrThrow();a.isInline()&&(a=a.getParentOrThrow());var d=!1;for(;null!==a;){var _t0=a.getPreviousSibling();if(null!==_t0){a=_t0,d=!0;break;}if(a=a.getParentOrThrow(),require("Lexical").$isRootOrShadowRoot(a))break;}var u=new Set();for(var _t1=0;_t1<s;_t1++){var _n6=o[_t1];require("Lexical").$isElementNode(_n6)&&0===_n6.getChildrenSize()&&u.add(_n6.getKey());}var h=new Set();var _loop2=function _loop2(){var s=o[_n7];var l=s.getParent();if(null!==l&&l.isInline()&&(l=l.getParent()),null!==l&&require("Lexical").$isLeafNode(s)&&!h.has(s.getKey())){var _t15=l.getKey();if(void 0===c.get(_t15)){var _n9=r();_n9.setFormat(l.getFormatType()),_n9.setIndent(l.getIndent()),f.push(_n9),c.set(_t15,_n9),l.getChildren().forEach(function(t){_n9.append(t),h.add(t.getKey()),require("Lexical").$isElementNode(t)&&t.getChildrenKeys().forEach(function(e){return h.add(e);});}),p(l);}}else if(u.has(s.getKey())){require("Lexical").$isElementNode(s)||t(179);var _n0=r();_n0.setFormat(s.getFormatType()),_n0.setIndent(s.getIndent()),f.push(_n0),s.remove(!0);}};for(var _n7=0;_n7<s;_n7++){_loop2();}if(null!==l)for(var _e1=0;_e1<f.length;_e1++){var _t10=f[_e1];l.append(_t10);}var $=null;if(require("Lexical").$isRootOrShadowRoot(a)){if(d){if(null!==l)a.insertAfter(l);else for(var _e10=f.length-1;_e10>=0;_e10--){var _t11=f[_e10];a.insertAfter(_t11);}}else{var _t12=a.getFirstChild();if(require("Lexical").$isElementNode(_t12)&&(a=_t12),null===_t12){if(l)a.append(l);else for(var _e11=0;_e11<f.length;_e11++){var _t13=f[_e11];a.append(_t13),$=_t13;}}else if(null!==l)_t12.insertBefore(l);else for(var _e12=0;_e12<f.length;_e12++){var _n8=f[_e12];_t12.insertBefore(_n8),$=_n8;}}}else if(l)a.insertAfter(l);else for(var _e13=f.length-1;_e13>=0;_e13--){var _t14=f[_e13];a.insertAfter(_t14),$=_t14;}var y=require("Lexical").$getPreviousSelection();require("Lexical").$isRangeSelection(y)&&g(y.anchor)&&g(y.focus)?require("Lexical").$setSelection(y.clone()):null!==$?$.selectEnd():n.dirty=!0;}function $(e){var t=y(e);return null!==t&&"vertical-rl"===t.writingMode;}function y(t){var n=t.anchor.getNode(),o=require("Lexical").$isRootNode(n)?n:n.getParentOrThrow(),s=require("Lexical").$getEditor().getElementByKey(o.getKey());if(null===s)return null;var r=s.ownerDocument.defaultView;return null===r?null:r.getComputedStyle(s);}function S(e,t,n,o){e.modify(t?"extend":"move",n,o);}function m(e){var t=y(e);return null!==t&&"rtl"===t.direction;}function N(e,t,n){var o=l(e.getStyle());return null!==o&&o[t]||n;}function x(e,t){var n=e;for(;null!==n&&null!==n.getParent()&&!t(n);)n=n.getParentOrThrow();return t(n)?n:null;}var T=c;exports.$cloneWithProperties=require("Lexical").$cloneWithProperties,exports.$selectAll=require("Lexical").$selectAll,exports.$addNodeStyle=function(e){var t=e.getStyle(),o=r(t);n.set(t,o);},exports.$copyBlockFormatIndent=u,exports.$ensureForwardRangeSelection=d,exports.$forEachSelectedTextNode=a,exports.$getSelectionStyleValueForProperty=function(t,n,o){if(o===void 0){o="";}var s=null;var r=t.getNodes(),i=t.anchor,c=t.focus,f=t.isBackward(),a=f?c.offset:i.offset,d=f?c.getNode():i.getNode();if(require("Lexical").$isRangeSelection(t)&&t.isCollapsed()&&""!==t.style){var _e14=l(t.style);if(null!==_e14&&n in _e14)return _e14[n];}for(var _t16=0;_t16<r.length;_t16++){var _l3=r[_t16];if((0===_t16||0!==a||!_l3.is(d))&&require("Lexical").$isTextNode(_l3)){var _e15=N(_l3,n,o);if(null===s)s=_e15;else if(s!==_e15){s="";break;}}}return null===s?o:s;},exports.$isAtNodeEnd=function(n){if("text"===n.type)return n.offset===n.getNode().getTextContentSize();var o=n.getNode();return require("Lexical").$isElementNode(o)||t(177),n.offset===o.getChildrenSize();},exports.$isParentElementRTL=m,exports.$moveCaretSelection=S,exports.$moveCharacter=function(e,t,n){var o=m(e);var s;s=$(e)||o?!n:n,S(e,t,s,"character");},exports.$patchStyleText=function(t,n){if(require("Lexical").$isRangeSelection(t)&&t.isCollapsed()){f(t,n);var _o5=t.anchor.getNode();require("Lexical").$isElementNode(_o5)&&_o5.isEmpty()&&f(_o5,n);}a(function(e){f(e,n);});},exports.$setBlocksType=function(t,n,o){if(o===void 0){o=u;}if(null===t)return;var s=t.getStartEndPoints(),r=new Map();var l=null;if(s){var _t17=s[0],_n1=s[1];l=require("Lexical").$createRangeSelection(),l.anchor.set(_t17.key,_t17.offset,_t17.type),l.focus.set(_n1.key,_n1.offset,_n1.type);var _o6=x(_t17.getNode(),require("Lexical").INTERNAL_$isBlock),_i2=x(_n1.getNode(),require("Lexical").INTERNAL_$isBlock);require("Lexical").$isElementNode(_o6)&&r.set(_o6.getKey(),_o6),require("Lexical").$isElementNode(_i2)&&r.set(_i2.getKey(),_i2);}for(var _n10 of t.getNodes())if(require("Lexical").$isElementNode(_n10)&&require("Lexical").INTERNAL_$isBlock(_n10))r.set(_n10.getKey(),_n10);else if(null===s){var _t18=x(_n10,require("Lexical").INTERNAL_$isBlock);require("Lexical").$isElementNode(_t18)&&r.set(_t18.getKey(),_t18);}for(var _ref3 of r){var _e16=_ref3[0];var _t19=_ref3[1];{var _s3=n();o(_t19,_s3),_t19.replace(_s3,!0),l&&(_e16===l.anchor.key&&l.anchor.set(_s3.getKey(),l.anchor.offset,l.anchor.type),_e16===l.focus.key&&l.focus.set(_s3.getKey(),l.focus.offset,l.focus.type));}}l&&t.is(require("Lexical").$getSelection())&&require("Lexical").$setSelection(l);},exports.$shouldOverrideDefaultCharacterSelection=function(t,n){var o=$(t)?!n:n;m(t)&&(o=!o);var s=require("Lexical").$caretFromPoint(t.focus,o?"previous":"next");if(require("Lexical").$isExtendableTextPointCaret(s))return!1;for(var _t20 of require("Lexical").$extendCaretToRange(s)){if(require("Lexical").$isChildCaret(_t20))return!_t20.origin.isInline();if(!require("Lexical").$isElementNode(_t20.origin)){if(require("Lexical").$isDecoratorNode(_t20.origin))return!0;break;}}return!1;},exports.$sliceSelectedTextNodeContent=function(t,n){var o=t.getStartEndPoints();if(n.isSelected(t)&&!require("Lexical").$isTokenOrSegmented(n)&&null!==o){var _s4=o[0],_r3=o[1],_l4=t.isBackward(),_i3=_s4.getNode(),_c=_r3.getNode(),_f2=n.is(_i3),_a2=n.is(_c);if(_f2||_a2){var _e$$getCharacterOffse=require("Lexical").$getCharacterOffsets(t),_o7=_e$$getCharacterOffse[0],_s5=_e$$getCharacterOffse[1],_r4=_i3.is(_c),_f3=n.is(_l4?_c:_i3),_a3=n.is(_l4?_i3:_c);var _d,_u=0;if(_r4)_u=_o7>_s5?_s5:_o7,_d=_o7>_s5?_o7:_s5;else if(_f3){_u=_l4?_s5:_o7,_d=void 0;}else if(_a3){_u=0,_d=_l4?_o7:_s5;}n.__text=n.__text.slice(_u,_d);}}return n;},exports.$trimTextContentFromAnchor=c,exports.$wrapNodes=function(t,n,o){if(o===void 0){o=null;}var s=t.getStartEndPoints(),r=s?s[0]:null,l=t.getNodes(),i=l.length;if(null!==r&&(0===i||1===i&&"element"===r.type&&0===r.getNode().getChildrenSize())){var _e17="text"===r.type?r.getNode().getParentOrThrow():r.getNode(),_t21=_e17.getChildren();var _s6=n();return _s6.setFormat(_e17.getFormatType()),_s6.setIndent(_e17.getIndent()),_t21.forEach(function(e){return _s6.append(e);}),o&&(_s6=o.append(_s6)),void _e17.replace(_s6);}var c=null,f=[];for(var _s7=0;_s7<i;_s7++){var _r5=l[_s7];require("Lexical").$isRootOrShadowRoot(_r5)?(h(t,f,f.length,n,o),f=[],c=_r5):null===c||null!==c&&require("Lexical").$hasAncestor(_r5,c)?f.push(_r5):(h(t,f,f.length,n,o),f=[_r5]);}h(t,f,f.length,n,o);},exports.createDOMRange=function(t,n,r,l,i){var _s8,_s9;var c=n.getKey(),f=l.getKey(),a=document.createRange();var d=t.getElementByKey(c),u=t.getElementByKey(f),g=r,p=i;if(require("Lexical").$isTextNode(n)&&(d=o(d)),require("Lexical").$isTextNode(l)&&(u=o(u)),void 0===n||void 0===l||null===d||null===u)return null;"BR"===d.nodeName&&(_s8=s(d),d=_s8[0],g=_s8[1],_s8),"BR"===u.nodeName&&(_s9=s(u),u=_s9[0],p=_s9[1],_s9);var h=d.firstChild;d===u&&null!=h&&"BR"===h.nodeName&&0===g&&0===p&&(p=1);try{a.setStart(d,g),a.setEnd(u,p);}catch(e){return null;}return!a.collapsed||g===p&&c===f||(a.setStart(u,p),a.setEnd(d,g)),a;},exports.createRectsFromDOMRange=function(e,t){var n=e.getRootElement();if(null===n)return[];var o=n.getBoundingClientRect(),s=getComputedStyle(n),r=parseFloat(s.paddingLeft)+parseFloat(s.paddingRight),l=Array.from(t.getClientRects());var i,c=l.length;l.sort(function(e,t){var n=e.top-t.top;return Math.abs(n)<=3?e.left-t.left:n;});for(var _e18=0;_e18<c;_e18++){var _t22=l[_e18],_n11=i&&i.top<=_t22.top&&i.top+i.height>_t22.top&&i.left+i.width>_t22.left,_s0=_t22.width+r===o.width;_n11||_s0?(l.splice(_e18--,1),c--):i=_t22;}return l;},exports.getCSSFromStyleObject=i,exports.getStyleObjectFromCSS=l,exports.trimTextContentFromAnchor=T;}),null);
__d("MAWPreloadSecureMessagesDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MAWPreloadSecureMessages").__setRef("MAWPreloadSecureMessagesDeferred");a=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return h.load().then(function(a){return a.preloadSecureMessagesByThreadKey.apply(a,b)})};g.preloadSecureMessagesByThreadKey=a}),98);
__d("QPLE2ESessionMarkers",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({NONE:"none",START:"start",END:"end"});c=a;f["default"]=c}),66);
__d("QPLE2E",["QuickPerformanceLogger"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(){}var b=a.prototype;b.logPointDeprecated=function(a,b,d,e){var f,g;e===void 0&&(e={});f=(f=e.timestamp)!=null?f:(h||(h=c("QuickPerformanceLogger"))).currentTimestamp();var i=babelHelpers["extends"]({},e.pointData);g=(g=e.action)!=null?g:12524;e.secondaryOrder!=void 0&&(i.string||(i.string={}),i.string.qpl_e2e__secondary_order=e.secondaryOrder);if(e.sessionMarker&&e.sessionMarker!=="none"){var j;i.bool||(i.bool={});i.bool=babelHelpers["extends"]({},i.bool,(j={},j.qpl_e2e__session_marker_start_point=e.sessionMarker==="start",j.qpl_e2e__session_marker_end_point=e.sessionMarker==="end",j))}(h||(h=c("QuickPerformanceLogger"))).markerStart(a,void 0,f,{samplingBasis:d});h.markerPoint(a,b,{data:i,timestamp:f*2});e.annotations&&(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(a,e.annotations);h.markerAnnotate(a,{string:(j={},j.join_id=d,j.qpl__source="client",j),bool:(b={},b.qpl_e2e__align_points=!0,b)});h.markerEnd(a,g,void 0,f)};return a}();b=new a();g["default"]=b}),98);
__d("MWCMChatTabNotificationsQPLLoggingUtils",["QPLE2E","QPLUserFlow","Random","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=c("qpl")._(25298296,"1725"),i=c("qpl")._(25304846,"1726");function a(){var a=d("Random").uint32();return{logCancel:function(b){c("QPLUserFlow").endCancel(i,{annotations:{string:{cancelReason:b}},instanceKey:a})},logEventStreamReceived:function(b){b!=null&&c("QPLE2E").logPointDeprecated(h,"client:receive_event_stream",b,{action:2}),c("QPLUserFlow").start(i,{instanceKey:a})},logOpenChatTab:function(){c("QPLUserFlow").addPoint(i,"open_chat_tab",{instanceKey:a})},logOpenChatTabSuccess:function(){c("QPLUserFlow").endSuccess(i,{instanceKey:a})},logThreadLoaded:function(){c("QPLUserFlow").addPoint(i,"thread_loaded",{instanceKey:a})}}}g.createChatTabQPLLogger=a}),98);
__d("MWChatConfig",["CurrentEnvironment","bx"],(function(a,b,c,d,e,f,g){"use strict";a=c("CurrentEnvironment").messengerdotcom?c("bx").getURL(c("bx")("273041")):c("bx").getURL(c("bx")("273022"));b=c("CurrentEnvironment").messengerdotcom?c("bx").getURL(c("bx")("273042")):c("bx").getURL(c("bx")("273023"));g.soundNotifMp3Url=a;g.soundNotifOggUrl=b}),98);
__d("MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="23885219097739619"}),null);
__d("MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription.graphql",["MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"MessengerChatTabsNotificationSubscribeResponsePayload",kind:"LinkedField",name:"messenger_chat_tabs_notification_subscribe",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"message_timestamp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thread_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"qpl_join_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription",selections:c,type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription",selections:c},params:{id:b("MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription_facebookRelayOperation"),metadata:{subscriptionName:"messenger_chat_tabs_notification_subscribe"},name:"MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription",operationKind:"subscription",text:null}}}();e.exports=a}),null);
__d("MWChatTabsNotificationSubscription",["CometRelay","MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription.graphql");function a(a,b){return d("CometRelay").requestSubscription(a,{onNext:b,subscription:i,variables:{input:{}}})}g.subscribe=a}),98);
__d("MWChatThreadPingCounter",[],(function(a,b,c,d,e,f){"use strict";var g=new Map();function h(a){a=g.get(a);return a!=null?a:0}function a(a){g.set(a,h(a)+1)}function b(){g.clear()}f.getCount=h;f.incrementCount=a;f.clear=b}),66);
__d("MWGetCurrentThreadIDForLSThread",["I64","LSIntEnum","mwCMIsAnyCMThread","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,e){if(e)return{NAME:"Page",VAL:(h||(h=d("I64"))).to_string(a)};else if((h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(7))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(15))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(16)))return{NAME:"UserSecret",VAL:(h||(h=d("I64"))).to_string(a)};else if((h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(1))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(13))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(201)))return{NAME:"User",VAL:(h||(h=d("I64"))).to_string(a)};else if((h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(2))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(5))||c("mwCMIsAnyCMThread")(b)||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(150))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(151))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(154))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(155))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(152))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(153))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(26)))return{NAME:"Group",VAL:(h||(h=d("I64"))).to_string(a)};throw c("unrecoverableViolation")("Unsupported MWMessagingThreadType "+(h||(h=d("I64"))).to_string(b),"messenger_web_messaging")}g.get=a}),98);
__d("MWNotificationRenderer.react",["fbt","I64","LSIntEnum"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;function a(a,b,c,e,f){if((i||(i=d("I64"))).equal(a.senderId,b))return h._(/*BTDS*/"New message");f=(b=(a=f.nickname)!=null?a:e.firstName)!=null?b:e.name;a=c.threadName;if(a!=null)return h._(/*BTDS*/"{senderName} messaged {groupName}",[h._param("senderName",f),h._param("groupName",a)]);else if((i||(i=d("I64"))).equal(c.threadType,(j||(j=d("LSIntEnum"))).ofNumber(2)))return h._(/*BTDS*/"{name} messaged your group",[h._param("name",f)]);else return h._(/*BTDS*/"{name} messaged you",[h._param("name",f)])}g.renderDocumentTitle=a}),226);
__d("MWLSChatPopperCommon",["CometSetBlinkingTitleMessageContext","CurrentEnvironment","CurrentUser","I64","MWChatConfig","MWChatSettingsQuery","MWNotificationRenderer.react","MWPIsThreadUnread","MessengerWebEventsFalcoEvent","ReQL","gkx","react","requireDeferred","useCometRouterState","useMWShowOpenInMessengerToast","useMatchViewport"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=h||d("react");var j=e.useCallback,k=e.useContext,l=c("requireDeferred")("Sound").__setRef("MWLSChatPopperCommon");function m(a){var b=(i||(i=d("I64"))).to_string(a.senderId)!==c("CurrentUser").getID();b&&l.onReady(function(b){b.play([d("MWChatConfig").soundNotifOggUrl,d("MWChatConfig").soundNotifMp3Url],(i||(i=d("I64"))).to_float(a.timestampMs),!1)})}function a(a,b,e){var f,g=k(c("CometSetBlinkingTitleMessageContext")),h=c("useMatchViewport")("max","width",320),l=c("useCometRouterState")();l=l==null||(f=l.main)==null?void 0:f.route;var m=(l==null?void 0:l.tabKey)==="messenger",n=c("useMWShowOpenInMessengerToast")();return j(function(f,j,k,l){k=d("MWNotificationRenderer.react").renderDocumentTitle(f,b,j,k,l);h&&c("CurrentEnvironment").facebookdotcom&&!m&&c("gkx")("15812")&&n((i||(i=d("I64"))).to_string(j.threadKey),k);e.contents!=null&&e.contents();e.contents=d("ReQL").fromTableAscending(a.tables.threads).getKeyRange(j.threadKey).subscribe(function(a,b){if(b.operation==="add"||b.operation==="put"){a=b.value;if(d("MWPIsThreadUnread").isThreadUnread(a))return;e.contents!=null&&e.contents();e.contents=void 0;g(null,(i||(i=d("I64"))).to_float(a.lastReadWatermarkTimestampMs))}});g(k,(i||(i=d("I64"))).to_float(f.timestampMs))},[b,h,m,e,a.tables.threads,g,n])}function b(a){d("MWChatSettingsQuery").areChatTabsSoundsOn(function(b){if(b!=null&&b)return m(a);else c("MessengerWebEventsFalcoEvent").log(function(){return{event_name:"suppress_new_message_sound"}})})}g.useUpdateDocumentTitle=a;g.playChatTabSound=b}),98);
__d("MWLSChatTabPolicy",["$InternalEnum","I64","LSContactBlockedByViewerStatus","LSIntEnum","MWCMThreadTypes.react","MWChatSettingsQuery","MWGenAIUtils","MessagingFolderTag","MessengerWebEventsFalcoEvent","emptyFunction","gkx","qex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=b("$InternalEnum")({ALLOW:0,DENY:1});function k(a,b,c){if(c===j.ALLOW)return a(b)}var l=function(a){return c("MessengerWebEventsFalcoEvent").log(function(){return{event_name:"suppress_new_message",extra_data:{reason:a}}})},m=function(a){a(j.ALLOW)},n=function(a,b,c){(h||(h=d("I64"))).equal(b.senderId,c)?(l("message_outgoing"),a(j.DENY)):a(j.ALLOW)},o=function(a,b,e){if(c("gkx")("23433"))a(j.ALLOW);else{d("MWChatSettingsQuery").areChatTabsTurnedOff(function(c){c!=null&&c?(l("turn_off_chat_tab"),b!=null&&d("MWCMThreadTypes.react").isJoinedCMThread(b.threadType)&&e!=null&&e.logCancel("turn_off_chat_tab"),a(j.DENY)):a(j.ALLOW)});return}},p=function(a,b,c){var e=(h||(h=d("I64"))).to_float(b.muteExpireTimeMs);e>Date.now()||e<0?(l("mention_muted"),d("MWCMThreadTypes.react").isJoinedCMThread(b.threadType)&&c!=null&&c.logCancel("mention_muted"),a(j.DENY)):a(j.ALLOW)},q=function(a,b){b.isAdminMessage?(l("message_non_user_generated"),a(j.DENY)):a(j.ALLOW)},r=function(a,b){b.folderName===c("MessagingFolderTag").INBOX||(h||(h=d("I64"))).equal(b.parentThreadKey,(i||(i=d("LSIntEnum"))).ofNumber(-10))?a(j.ALLOW):(l("message_no_inbox"),a(j.DENY))},s=function(a,b){!(h||(h=d("I64"))).equal(b.blockedByViewerStatus,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED))?(l("message_blocked_participants"),a(j.DENY)):a(j.ALLOW)},t=function(a,b){d("MWCMThreadTypes.react").isJoinedCMThread(b.threadType)?(l("community_messaging_group_blocked"),a(j.DENY)):a(j.ALLOW)},u=function(a,b){b=b.mentionTypes;b!=null&&"s".includes(b)?a(j.DENY):a(j.ALLOW)},v=function(a,b){c("gkx")("23433")&&b?a(j.DENY):a(j.ALLOW)},w=function(a,b){d("MWGenAIUtils").isMetaAIThread(b.threadKey)&&c("qex")._("4970")===!0?a(j.DENY):a(j.ALLOW)},x=function(a,b){if(a.length===0)return function(a){return k(b,c("emptyFunction"),a)};var d=a[0],e=a.slice(1);return function(a){return k(d,x(e,b),a)}},y=function(a,b){var c=a[0];a=a.slice(1);c(x(a,b))};function a(a,b,c,d,e,f){return y([function(){return m.apply(void 0,arguments)},function(){for(var b=arguments.length,c=new Array(b),e=0;e<b;e++)c[e]=arguments[e];return n.apply(void 0,c.concat([a,d]))},function(){return o.apply(void 0,arguments)},function(){for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];return p.apply(void 0,c.concat([b]))},function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];return q.apply(void 0,c.concat([a]))},function(){for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];return r.apply(void 0,c.concat([b]))},function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return s.apply(void 0,b.concat([c]))},function(){for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];return t.apply(void 0,c.concat([b]))},function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];return u.apply(void 0,c.concat([a]))},function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return v.apply(void 0,b.concat([e]))},function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];return w.apply(void 0,c.concat([a]))}],f)}function e(a,b,c,d){return y([function(){return m.apply(void 0,arguments)},function(){for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return o.apply(void 0,d.concat([a,b]))},function(){for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return p.apply(void 0,d.concat([a,b]))},function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return v.apply(void 0,b.concat([c]))}],d)}g.shouldMessageBeAllowed=a;g.shouldCommunityChatThreadPopup=e}),98);
__d("useMWChatOpenTabFromNewMessage",["I64","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadAttributionStore","MAWPreloadSecureMessagesDeferred","MAWStateContext.react","MWChatInteraction","MWChatStateActions","MWChatStateContext","MWChatStateV2.react","MWChatStateV2IsClosed","MWChatStateV2Types","MWChatThreadId","MessengerWebEventsFalcoEvent","ODS","dispatchOpenChatTabTraceLogging","gkx","justknobx","loadChatTabEntryPoint","react","setTimeout","useAsyncReStore","useCometFeedNoRoutingNavigationEventLogger","useCometRelayEntrypointContextualEnvironmentProvider","useLazyShouldShowMessagingEntrypointInCometRoot","useMWChatOpenTabTraceProvider"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;b=h||d("react");var l=b.useCallback,m=b.useContext,n=new Set();function a(a,b){b=b.withChatTabTracing;var e=b===void 0?!1:b,f=c("useCometFeedNoRoutingNavigationEventLogger")(),g=d("MWChatStateV2.react").useDispatch(),h=c("useMWChatOpenTabTraceProvider")(),o=d("MWChatStateContext").useChatState(function(a){return a.tabs}),p=c("useLazyShouldShowMessagingEntrypointInCometRoot")("CHAT"),q=c("useCometRelayEntrypointContextualEnvironmentProvider")(),r=m(d("MAWStateContext.react").MAWDispatchContext),s=c("useAsyncReStore")();return l(function(b,l,m){f(Date.now(),"","messenger");(i||(i=d("ODS"))).bumpEntityKey(3185,"mwchat_tab","open_incoming");c("MessengerWebEventsFalcoEvent").log(function(){return{event_name:"open_chat_tab_from_new_message"}});d("LSThreadAttributionStore").setSource(d("MWChatThreadId").getFBID(b),a);var t=Date.now();if(d("LSMessagingThreadTypeUtil").isArmadilloSecure(l.threadType)){var u=c("gkx")("14315")?8:c("justknobx")._("2038");void s.then(function(a){return d("MAWPreloadSecureMessagesDeferred").preloadSecureMessagesByThreadKey(a,l.threadKey,r,u)})}var v=function(a){var b={clientThreadKey:void 0,threadKey:l.threadKey,threadType:l.threadType},e=c("loadChatTabEntryPoint")(q);c("dispatchOpenChatTabTraceLogging")(a,b,"useMWChatOpenTabFromNewMessage");g(d("MWChatStateActions").openTabOrFlyout(t,{shouldFocus:!1},{threadKeyDescriptor:b,type:d("MWChatStateV2Types").MWChatStateTabType.ChatTab},e),!c("gkx")("24037"))},w=l.threadKey;b=Array.from(o.values()).find(function(a){if(a.tabType.type===d("MWChatStateV2Types").MWChatStateTabType.ChatTab){a=a.tabType.threadKeyDescriptor.threadKey;return(j||(j=d("I64"))).equal(w,a)}});var x=b!=null?d("MWChatStateV2IsClosed").isClosed(b):!1,y=n.has((j||(j=d("I64"))).to_string(w));y=e&&(b==null&&!y||b!=null&&x)&&p();y?(n.add((j||(j=d("I64"))).to_string(w)),h({entrypoint:"notificationInThreadReply",threadKey:l.threadKey,threadType:(k||(k=d("LSIntEnum"))).unwrapIntEnum(l.threadType)},function(a,b){d("MWChatInteraction").set((j||(j=d("I64"))).to_string(l.threadKey),a),b.onComplete(function(){n["delete"]((j||(j=d("I64"))).to_string(w))}),v(b)})):v();c("setTimeout")(function(){return g(d("MWChatStateActions").closeFlyout(t,l.threadKey))},3e3);return m()},[f,a,o,e,g,h,p])}g["default"]=a}),98);
__d("MWLSCommunityChatPopper",["CometRelay","GroupsCometChatsEngagementLogger","I64","MWCMChatTabNotificationsQPLLoggingUtils","MWChatTabsNotificationSubscription","MWChatThreadPingCounter","MWGetCurrentThreadIDForLSThread","MWLSChatPopperCommon","MWLSChatTabPolicy","MWPActor.react","MercuryIDs","ReQL","promiseDone","react","react-compiler-runtime","useMWChatOpenTabFromNewMessage","useMWFamilyCenterContext"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useCallback,k=b.useEffect,l={contents:void 0};function m(a,b){var e=d("MWLSChatPopperCommon").useUpdateDocumentTitle(a,b,l),f=j(function(b){c("promiseDone")(window.Promise.all([a.tables.threads.get(b.threadKey),a.tables.contacts.get(b.senderId),a.tables.participants.get(b.threadKey,b.senderId)]),function(a){var f=a[0],g=a[1];a=a[2];if(g!=null&&a!=null){e(b,f,g,a);g=c("MercuryIDs").getThreadIDFromThreadFBID((i||(i=d("I64"))).to_string(f.threadKey));if(d("MWChatThreadPingCounter").getCount(g)<3){d("MWChatThreadPingCounter").incrementCount(g);d("MWLSChatPopperCommon").playChatTabSound(b);return}}})},[a,e]);return j(function(b,e,g){var h={contents:function(){}};h.contents=d("ReQL").fromTableAscending(a.tables.messages).getKeyRange((i||(i=d("I64"))).of_string(b),i.of_string(g),e).subscribe(function(a,b){if(b.operation==="add"){a=b.value;h.contents();f(a)}});c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.messages).getKeyRange(i.of_string(b),i.of_string(g),e)),function(a){a&&(h.contents(),f(a))})},[a,f])}function a(a){var b=d("react-compiler-runtime").c(9),e=a.storage;a=a.withChatTabTracing;a=a===void 0?!1:a;var f;b[0]!==a?(f={withChatTabTracing:a},b[0]=a,b[1]=f):f=b[1];var g=c("useMWChatOpenTabFromNewMessage")("notificationInThreadReply",f);a=d("MWPActor.react").useActor();var h=c("CometRelay").useRelayEnvironment(),j=m(e,a);f=d("useMWFamilyCenterContext").useMWFamilyCenterEnforcementsContext();var l=f.familyCenterData;b[2]!==h||b[3]!==l.hasActiveMsgrFamilyCenterEnforcement||b[4]!==g||b[5]!==e||b[6]!==j?(a=function(){var a=d("MWChatTabsNotificationSubscription").subscribe(h,function(a){a=(a==null?void 0:a.messenger_chat_tabs_notification_subscribe)||{};var b=a.message_id,f=a.message_timestamp,h=a.qpl_join_id,k=a.thread_id;if(k==null||f==null||b==null)return;var m=d("MWCMChatTabNotificationsQPLLoggingUtils").createChatTabQPLLogger();m.logEventStreamReceived(h);c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.threads).getKeyRange((i||(i=d("I64"))).of_string(k))),function(a){a!=null&&(m.logThreadLoaded(),d("MWLSChatTabPolicy").shouldCommunityChatThreadPopup(a,m,l.hasActiveMsgrFamilyCenterEnforcement,function(){var c=d("MWGetCurrentThreadIDForLSThread").get(a.threadKey,a.threadType,!1);m.logOpenChatTab();g(c,a,function(){m.logOpenChatTabSuccess(),d("GroupsCometChatsEngagementLogger").log({action:"impression",event:"thread_open_auto",source:"auto_open_chat_tabs",surface:"auto_open_chat_tabs_container",thread_id:(i||(i=d("I64"))).to_string(a.threadKey)}),j(k,b,f)})}))})});return function(){a.dispose()}},f=[h,e,g,j,l.hasActiveMsgrFamilyCenterEnforcement],b[2]=h,b[3]=l.hasActiveMsgrFamilyCenterEnforcement,b[4]=g,b[5]=e,b[6]=j,b[7]=a,b[8]=f):(a=b[7],f=b[8]);k(a,f)}g.useOpenCommunityChatTabs=a}),98);
__d("MessengerClockFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 29c6.075 0 11-4.925 11-11S24.075 7 18 7 7 11.925 7 18s4.925 11 11 11zm-1.062-18.002a1.065 1.065 0 0 1 2.124 0l.371 5.938a.5.5 0 0 0 .217.381l3.654 2.502a1.08 1.08 0 0 1-1.077 1.865L17.462 19.4a1.495 1.495 0 0 1-.752-.634 1.49 1.49 0 0 1-.198-.96l.426-6.809z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerLiveFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M6 10a4 4 0 0 0-4 4v8a4 4 0 0 0 4 4h24a4 4 0 0 0 4-4v-8a4 4 0 0 0-4-4H6zm15.575 4.125c.21-.51.794-.76 1.31-.55.514.205.75.79.53 1.301l-2.745 6.998a.986.986 0 0 1-.92.626c-.405 0-.776-.25-.93-.626l-2.745-6.998a1 1 0 0 1 1.85-.75l1.684 4.499a.15.15 0 0 0 .281 0l1.684-4.5zM10 20.495H7.75a.25.25 0 0 1-.25-.25V14.5a1 1 0 1 0-2 0v6.995c0 .55.45 1 1 1H10a1 1 0 1 0 0-2zm4.5-5.99c0-.55-.45-1.005-1-1.005s-1 .45-1 1.005v6.99a1 1 0 1 0 2 0v-6.99zM29.5 19a1 1 0 1 0 0-2h-2.25a.25.25 0 0 1-.25-.25v-1a.25.25 0 0 1 .25-.25h2.25a1 1 0 1 0 0-2H26a1 1 0 0 0-1 1v7c0 .55.45 1 1 1h3.5a1 1 0 1 0 0-2h-2.25a.25.25 0 0 1-.25-.25v-1a.25.25 0 0 1 .25-.25h2.25z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("XMessengerDotComLogoutController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/logout/",{next:{type:"String"}})}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<7436c8dc7367c270e1db7b9c3652e01f>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("useLexicalEditable.prod",["LexicalComposerContext","react"],(function $module_useLexicalEditable_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";var _require_closure_react;var t=_require_closure_react||(_require_closure_react=require("react"));var n="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?t.useLayoutEffect:t.useEffect;function i(e){return{initialValueFn:function initialValueFn(){return e.isEditable();},subscribe:function subscribe(t){return e.registerEditableListener(t);}};}exports.useLexicalEditable=function(){return function(i){var _e$useLexicalComposer=require("LexicalComposerContext").useLexicalComposerContext(),r=_e$useLexicalComposer[0],u=t.useMemo(function(){return i(r);},[r,i]),_t$useState=t.useState(function(){return u.initialValueFn();}),o=_t$useState[0],s=_t$useState[1],c=t.useRef(o);return n(function(){var e=u.initialValueFn,t=u.subscribe,n=e();return c.current!==n&&(c.current=n,s(n)),t(function(e){c.current=e,s(e);});},[u,i]),o;}(i);};}),null);
__d("useMWLSChatPopperUpper",["FBLogger","I64","JSResourceForInteraction","LSContactType","LSIntEnum","MWChatMessagesOnChatTabLoadTracker","MWChatThreadPingCounter","MWGetCurrentThreadIDForLSThread","MWLSChatPopperCommon","MWLSChatTabPolicy","MWPActor.react","MWXacGating","MercuryIDs","ReQL","ServerTime","VisibilityAPI","clearInterval","gkx","isMWXacGroupThread","isMessengerPWA","justknobx","promiseDone","react","react-compiler-runtime","requireDeferred","setInterval","useGlobalEventListener","useMWChatOpenTabFromNewMessage","useMWFamilyCenterContext","useMWNavigation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=h||d("react");var k=b.useEffect,l=b.useRef,m=c("requireDeferred")("MWDesktopNotifications").__setRef("useMWLSChatPopperUpper"),n=c("JSResourceForInteraction")("MWV2ChatTab.react").__setRef("useMWLSChatPopperUpper"),o=c("JSResourceForInteraction")("MWV2ChatTabRoot.react").__setRef("useMWLSChatPopperUpper"),p={contents:void 0};function q(a,b,e,f,g,h,k,l,p,q,r){r===void 0&&(r=d("MWLSChatTabPolicy").shouldMessageBeAllowed);var s=d("MWGetCurrentThreadIDForLSThread").get(f.threadKey,f.threadType,(i||(i=d("I64"))).equal(g.contactType,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactType").PAGE))||(i||(i=d("I64"))).equal(g.contactType,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactType").PAGE_PERSONA)));return r(e,f,g,l,p,function(){var j=c("gkx")("16508");j===!0?c("promiseDone")(o.load()):c("promiseDone")(n.load());var l=d("MercuryIDs").getThreadIDFromThreadFBID((i||(i=d("I64"))).to_string(f.threadKey));d("MWChatMessagesOnChatTabLoadTracker").trackReceivedFor(f.threadKey);return a(s,f,function(){k(e,f,g,h);if(d("VisibilityAPI").isVisibilityHidden()===!0){var a=c("isMessengerPWA")()&&c("justknobx")._("1465");a&&c("promiseDone")(async function(){var a=await m.load();a=a.triggerLocalNotification;await a(b,e,q)}())}if(d("MWChatThreadPingCounter").getCount(l)<3){d("MWChatThreadPingCounter").incrementCount(l);d("MWLSChatPopperCommon").playChatTabSound(e);return}})})}function r(a){var b=a.actor,d=a.hasActiveMsgrFamilyCenterEnforcement,e=a.message,f=a.navigationApi,g=a.openTabFromNewMessage,h=a.shouldBeAllowed,i=a.storage,j=a.updateDocumentTitle;c("promiseDone")(window.Promise.all([i.tables.threads.get(e.threadKey),i.tables.contacts.get(e.senderId),i.tables.participants.get(e.threadKey,e.senderId)]),function(a){var k=a[0],l=a[1];a=a[2];if(k==null){c("FBLogger")("messenger_web_entrypoints").mustfix("Thread is null when receiving a new message");return}if(l!=null&&a!=null)return q(g,i,e,k,l,a,j,b,d,f,h)})}function s(a){var b=a.actor,d=a.hasActiveMsgrFamilyCenterEnforcement,e=a.message,f=a.navigationApi,g=a.openTabFromNewMessage,h=a.shouldBeAllowed,i=a.storage,j=a.updateDocumentTitle;c("promiseDone")(window.Promise.all([i.tables.threads.get(e.threadKey),i.tables.contacts.get(e.senderId),i.tables.participants.get(e.threadKey,e.senderId)]),function(a){var k=a[0],l=a[1];a=a[2];if(k!=null&&l!=null&&a!=null&&!c("isMWXacGroupThread")(k))return q(g,i,e,k,l,a,j,b,d,f,h)})}function t(a){var b=d("react-compiler-runtime").c(11),e=a.storage;a=a.withChatTabTracing;a=a===void 0?!1:a;var f;b[0]!==a?(f={withChatTabTracing:a},b[0]=a,b[1]=f):f=b[1];var g=c("useMWChatOpenTabFromNewMessage")("notificationInThreadReply",f),h=d("MWPActor.react").useActor(),j=d("MWLSChatPopperCommon").useUpdateDocumentTitle(e,h,p);b[2]===Symbol.for("react.memo_cache_sentinel")?(a=d("ServerTime").getMillis(),b[2]=a):a=b[2];var m=l(a),n=c("useMWNavigation")();f=d("useMWFamilyCenterContext").useMWFamilyCenterEnforcementsContext();var o=f.familyCenterData;b[3]!==h||b[4]!==o.hasActiveMsgrFamilyCenterEnforcement||b[5]!==n||b[6]!==g||b[7]!==e||b[8]!==j?(a=function(){return d("ReQL").fromTableAscending(e.tables.messages).subscribe(function(a,b){if(b.operation==="add"){a=b.value;if((i||(i=d("I64"))).to_float(a.timestampMs)<=m.current)return;m.current=(i||(i=d("I64"))).to_float(a.timestampMs);b=d("MWXacGating").isGroupsEnabled()?r:s;return b({actor:h,hasActiveMsgrFamilyCenterEnforcement:o.hasActiveMsgrFamilyCenterEnforcement,message:a,navigationApi:n,openTabFromNewMessage:g,storage:e,updateDocumentTitle:j})}})},f=[h,n,o.hasActiveMsgrFamilyCenterEnforcement,g,e,j],b[3]=h,b[4]=o.hasActiveMsgrFamilyCenterEnforcement,b[5]=n,b[6]=g,b[7]=e,b[8]=j,b[9]=a,b[10]=f):(a=b[9],f=b[10]);k(a,f)}function a(a){var b=d("react-compiler-runtime").c(10),e=a.storage;a=a.withChatTabTracing;a=a===void 0?!1:a;var f;b[0]!==e||b[1]!==a?(f={storage:e,withChatTabTracing:a},b[0]=e,b[1]=a,b[2]=f):f=b[2];t(f);var g=l();b[3]===Symbol.for("react.memo_cache_sentinel")?(e=function(){var a=g.current;if(a!=null){c("clearInterval")(a);return}},b[3]=e):e=b[3];var h=e;b[4]===Symbol.for("react.memo_cache_sentinel")?(a=function(){h(),g.current=c("setInterval")(u,6e5)},b[4]=a):a=b[4];f=a;b[5]===Symbol.for("react.memo_cache_sentinel")?(e=function(){d("MWChatThreadPingCounter").clear();return h()},b[5]=e):e=b[5];a=e;b[6]===Symbol.for("react.memo_cache_sentinel")?(e={},b[6]=e):e=b[6];c("useGlobalEventListener")("blur",f,e);b[7]===Symbol.for("react.memo_cache_sentinel")?(f={},b[7]=f):f=b[7];c("useGlobalEventListener")("focus",a,f);b[8]===Symbol.for("react.memo_cache_sentinel")?(e=function(){return function(){return h()}},a=[],b[8]=e,b[9]=a):(e=b[8],a=b[9]);k(e,a)}function u(){return d("MWChatThreadPingCounter").clear()}g.default=a}),98);/*FB_PKG_DELIM*/
__d("CometHero.react",["hero-tracing-placeholder"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=d("hero-tracing-placeholder").HeroComponent}),98);
__d("CometLightweightVideoAttachmentContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({isLightweightVideoAttachment:!1});g["default"]=b}),98);
__d("CometNotificationsRootContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b={isNotificationsRoute:!1,source:null};c=a.createContext(b);g["default"]=c}),98);
__d("CometVideoPictureInPictureManagerContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;c=(h||d("react")).createContext;e=c({openPipPlayer:function(){},setController:function(){},setPipPortableVideoID:function(){}});f=c({hasNextChainedVideo:!1,isPipEnabled:!1,setHasNextChainedVideo:function(){},setSkippedFromPipPlayer:function(){},skippedFromPipPlayer:!1});function a(){return!1}function b(){return!1}g.CometVideoPictureInPictureManagerAPIContext=e;g.CometVideoPictureInPictureManagerContext=f;g.isInPictureInPictureExp=a;g.isInPictureInPictureExpControlGroup=b}),98);
__d("MessengerChevronLeftFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M21.884 8.866a1.25 1.25 0 0 1 0 1.768l-7.19 7.19a.25.25 0 0 0 0 .353l7.19 7.19a1.25 1.25 0 0 1-1.768 1.767l-8.25-8.25a1.25 1.25 0 0 1 0-1.768l8.25-8.25a1.25 1.25 0 0 1 1.768 0z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("VideoControlsContainerFocusedContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext(!1);g["default"]=b}),98);
__d("VideoHomeTypedLiteLogger",["generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:VideoHomeLoggerConfig")}),null);
__d("VideoPlayerCaptionsDisplayConfigContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({liveCaptionsTextAlignment:null,textSizeMapping:null});g["default"]=b}),98);
__d("VideoPlayerControlsBottomRowAddOnContext",["react","react-compiler-runtime","useStable"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));f=h;var j=f.useContext,k=f.useEffect,l=f.useState,m=i.createContext(null);function a(a){var b=d("react-compiler-runtime").c(3);a=a.children;var e=c("useStable")(n),f;b[0]!==a||b[1]!==e?(f=i.jsx(m.Provider,{value:e,children:a}),b[0]=a,b[1]=e,b[2]=f):f=b[2];return f}function n(){var a=null,b=null,c=null;return{getBottomRowAddOn:function(){return b},initialize:function(d){c=function(a){b=a,d(a)};if(a==null)return;c(a);a=null},setBottomRowAddOn:function(b){if(c==null){a=b;return}c(b)}}}function b(a){var b=d("react-compiler-runtime").c(3),c=j(m);a=l(a);var e=a[0],f=a[1],g;b[0]!==c?(a=function(){if(c==null)return;c.initialize(f)},g=[c],b[0]=c,b[1]=a,b[2]=g):(a=b[1],g=b[2]);k(a,g);return e}function e(a){var b=d("react-compiler-runtime").c(4),c=j(m),e,f;b[0]!==a||b[1]!==c?(e=function(){if(c==null)return;c.setBottomRowAddOn(a)},f=[a,c],b[0]=a,b[1]=c,b[2]=e,b[3]=f):(e=b[2],f=b[3]);k(e,f)}g.VideoPlayerControlsBottomRowAddOnContext=m;g.VideoPlayerControlsBottomRowAddOnContextProvider=a;g.useVideoPlayerControlsBottomRowAddOn=b;g.useSetVideoPlayerControlsBottomRowAddOn=e}),98);
__d("VideoPlayerCaptionsDisplay.react",["VideoPlayerCaptionsDisplayConfigContext","VideoPlayerControlsBottomRowAddOnContext","VideoPlayerHooks","react","react-compiler-runtime","recoverableViolation","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react")),l=i.useContext,m={captionsCenterAlign:{justifyContent:"xl56j7k",textAlign:"x2b8uid",$$css:!0},captionsContainer:{bottom:"xfqi8uc",boxSizing:"x9f619",display:"x78zum5",justifyContent:"xl56j7k",position:"x10l6tqk",textAlign:"x2b8uid",transitionDuration:"xu6gjpd",transitionProperty:"x11xpdln",transitionTimingFunction:"x1r7x56h",width:"xh8yej3",$$css:!0},captionsLeftAlign:{justifyContent:"x1nhvcw1",textAlign:"x1yc453h",$$css:!0},captionsRightAlign:{justifyContent:"x13a6bvl",textAlign:"xp4054r",$$css:!0}},n={BIG:"25px",BIGGER:"30px",BIGGEST:"34px",DEFAULT:"17px",MEDIUM:"21px",SMALL:"13px",SMALLEST:"8px"},o={DARK:.75,DEFAULT:.45,LIGHT:.25,OPAQUE:1,TRANSPARENT:0},p={BLACK:"20, 22, 26",BLUE:"0, 0, 255",CYAN:"0, 255, 255",GREEN:"0, 255, 0",MAGENTA:"255, 0, 255",RED:"255, 0, 0",WHITE:"255, 255, 255",YELLOW:"255, 255, 0"};function q(a){switch(a){case"center":return m.captionsCenterAlign;case"left":return m.captionsLeftAlign;case"right":return m.captionsRightAlign;default:c("recoverableViolation")("Unsupported captions text alignment: "+a,"comet_video_player")}}function r(a,b,c){var d={},e=a.captionsBackgroundColor,f=a.captionsBackgroundOpacity,g=a.captionsTextColor;a=a.captionsTextSize;if(e!==null){f=f!==null?o[f]:1;d.backgroundColor="rgba("+p[e]+","+f+")"}g!==null&&(d.color="rgba("+p[g]+")");a!==null&&(d.fontSize=b!=null?babelHelpers["extends"]({},n,b)[a]:n[a]);c&&(d.marginBottom=35);return d}function a(a){var b,e=d("react-compiler-runtime").c(12),f=a.activeCaptions,g=a.adjustments;a=a.captionDisplayStyle;var i=f==null?void 0:f.rows,n=l(c("VideoPlayerCaptionsDisplayConfigContext")),o=n.liveCaptionsTextAlignment;n=n.textSizeMapping;var p=l(d("VideoPlayerControlsBottomRowAddOnContext").VideoPlayerControlsBottomRowAddOnContext);p=(p==null?void 0:p.getBottomRowAddOn())!=null;var v;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(v={},e[0]=v):v=e[0];v=v;if(a){var w;e[1]!==a||e[2]!==p||e[3]!==n?(w=r(a,n,p),e[1]=a,e[2]=p,e[3]=n,e[4]=w):w=e[4];v=w}a=(j||(j=d("VideoPlayerHooks"))).useIsLive();n=(p=f==null||(b=f.styles)==null?void 0:b.textAlignment)!=null?p:"center";if(i!=null&&i.length>0){if(e[5]!==g||e[6]!==v||e[7]!==n||e[8]!==a||e[9]!==o||e[10]!==i){w=i.map(u).filter(t);f=w.length>0?k.jsx("div",{className:(h||(h=c("stylex")))(m.captionsContainer,q(a?o!=null?o:n:n)),style:{paddingLeft:g.left,paddingRight:g.right,transform:"translateY("+-g.bottom+"px)"},children:k.jsx("div",{className:"x18l40ae x14ctfv x1lkfr7t xk50ysn x37zpob xdj266r x32vodv xat24cr x1v6o4qg xulzisn xoge9qh x1uwfbks xytt9sc",style:v,children:w.map(s)})}):null;e[5]=g;e[6]=v;e[7]=n;e[8]=a;e[9]=o;e[10]=i;e[11]=f}else f=e[11];return f}return null}function s(a,b){return k.jsxs("span",{children:[a,k.jsx("br",{})]},b)}s.displayName=s.name+" [from "+f.id+"]";function t(a){return!!a}function u(a){return a.trim()}b=k.memo(a);e=b;g["default"]=e}),98);
__d("useVideoPlayerCaptionsDisplayAdjustments",["VideoPlayerHooks","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(h||d("react")).useMemo;function a(){var a=d("react-compiler-runtime").c(2),b=(i||(i=d("VideoPlayerHooks"))).useVideoPlayerCaptionsReservations(),c;a[0]!==b?(c={bottom:0,left:0,right:0,top:0},b.length>0&&b.forEach(function(a){c[a.location]=c[a.location]+a.size}),a[0]=b,a[1]=c):c=a[1];b=c;return b}g["default"]=a}),98);
__d("VideoPlayerCaptions.react",["VideoPlayerCaptionsDisplay.react","VideoPlayerHooks","react","react-compiler-runtime","useVideoPlayerCaptionsDisplayAdjustments"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function a(){var a=d("react-compiler-runtime").c(4),b=(i||(i=d("VideoPlayerHooks"))).useActiveCaptions(),e=c("useVideoPlayerCaptionsDisplayAdjustments")(),f=i.useCaptionDisplayStyle(),g;a[0]!==b||a[1]!==e||a[2]!==f?(g=j.jsx(c("VideoPlayerCaptionsDisplay.react"),{activeCaptions:b,adjustments:e,captionDisplayStyle:f}),a[0]=b,a[1]=e,a[2]=f,a[3]=g):g=a[3];return g}g["default"]=a}),98);
__d("VideoPlayerCaptionsArea.react",["VideoPlayerCaptions.react","VideoPlayerContexts","VideoPlayerHooks","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react"));b=h;var l=b.useReducer,m=b.useState;function n(a,b){switch(b.type){case"reserve":return a.concat(b.reservation);case"release":return a.filter(function(a){return a!==b.reservation});default:return a}}function a(a){var b=d("react-compiler-runtime").c(11);a=a.children;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=[],b[0]=e):e=b[0];e=l(n,e);var f=e[0],g=e[1];b[1]===Symbol["for"]("react.memo_cache_sentinel")?(e={release:function(a){g({reservation:a,type:"release"})},reserve:function(a){g({reservation:a,type:"reserve"});return a}},b[1]=e):e=b[1];e=m(e);e=e[0];var h=(i||(i=d("VideoPlayerHooks"))).useCaptionsVisible(),o;b[2]!==h?(o=h?k.jsx(c("VideoPlayerCaptions.react"),{}):null,b[2]=h,b[3]=o):o=b[3];b[4]!==a||b[5]!==f||b[6]!==o?(h=k.jsxs((j||(j=d("VideoPlayerContexts"))).VideoPlayerCaptionsReservationsContext.Provider,{value:f,children:[o,a]}),b[4]=a,b[5]=f,b[6]=o,b[7]=h):h=b[7];b[8]!==e||b[9]!==h?(a=k.jsx((j||(j=d("VideoPlayerContexts"))).VideoPlayerCaptionsReservationActionsContext.Provider,{value:e,children:h}),b[8]=e,b[9]=h,b[10]=a):a=b[10];return a}g["default"]=a}),98);
__d("VideoPlayerControlsHiddenContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext(!1);g["default"]=b}),98);
__d("VideoPlayerControlIcon.react",["BaseFocusRing.react","BaseTooltip.react","CometPressable.react","CometTooltipImpl.react","FDSIcon.react","VideoPlayerControlsHiddenContext","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["tooltipOffsetY","children"],i=["color","disabled","icon","label","tooltip","tooltipAlign","tooltipImpl","tooltipOffsetY"],j,k=j||(j=d("react")),l=j.useContext,m={"default":{backgroundColor:"xjbqb8w",borderTop:"x76ihet",borderInlineEnd:"xtmcdsl",borderBottom:"x112ta8",borderInlineStart:"x4gj9lk",cursor:"x1ypdohk",display:"x1rg5ohu",height:"x1qx5ct2",marginTop:"x1k70j0n",marginInlineEnd:"xbelrpt",marginBottom:"xzueoph",marginInlineStart:"xdzw4kq",opacity:"x1iy03kw",outline:"x1a2a7pz",paddingTop:"xexx8yu",paddingInlineEnd:"xyri2b",paddingBottom:"x18d9i69",paddingInlineStart:"x1c1uobl",":hover_opacity":"x1o7uuvo",$$css:!0},disabled:{cursor:"xt0e3qv",opacity:"xbyyjgo",":hover_opacity":"xj34u2y",$$css:!0},dropShadow:{filter:"x1qo4wvw",$$css:!0}};function n(a){var b=d("react-compiler-runtime").c(21),e,f,g;b[0]!==a?(g=a.tooltipOffsetY,e=a.children,f=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f,b[3]=g):(e=b[1],f=b[2],g=b[3]);a=Math.min(0,g!=null?g:0);b[4]===Symbol["for"]("react.memo_cache_sentinel")?(g="xuk3077 x78zum5 x14atkfc",b[4]=g):g=b[4];var i;b[5]!==a?(i={marginTop:a},b[5]=a,b[6]=i):i=b[6];var j;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(j="xuk3077 x78zum5 x14atkfc",b[7]=j):j=b[7];a=-a;var l;b[8]!==a?(l={paddingTop:a},b[8]=a,b[9]=l):l=b[9];b[10]!==e?(a=typeof e==="function"?e(void 0):e,b[10]=e,b[11]=a):a=b[11];b[12]!==l||b[13]!==a?(e=k.jsx("span",{className:j,style:l,children:a}),b[12]=l,b[13]=a,b[14]=e):e=b[14];b[15]!==f||b[16]!==e?(j=k.jsx(c("BaseTooltip.react"),babelHelpers["extends"]({},f,{children:e})),b[15]=f,b[16]=e,b[17]=j):j=b[17];b[18]!==i||b[19]!==j?(l=k.jsx("span",{className:g,style:i,children:j}),b[18]=i,b[19]=j,b[20]=l):l=b[20];return l}function a(a){var b=d("react-compiler-runtime").c(23),e,f,g,h,j,o,p,q,r;b[0]!==a?(j=a.color,f=a.disabled,g=a.icon,h=a.label,o=a.tooltip,p=a.tooltipAlign,q=a.tooltipImpl,r=a.tooltipOffsetY,e=babelHelpers.objectWithoutPropertiesLoose(a,i),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=h,b[5]=j,b[6]=o,b[7]=p,b[8]=q,b[9]=r):(e=b[1],f=b[2],g=b[3],h=b[4],j=b[5],o=b[6],p=b[7],q=b[8],r=b[9]);var s=j===void 0?"white":j;a=o===void 0?null:o;j=p===void 0?"start":p;var t=l(c("VideoPlayerControlsHiddenContext"));o=q!=null?q:c("CometTooltipImpl.react");b[10]!==e||b[11]!==s||b[12]!==f||b[13]!==g||b[14]!==t||b[15]!==h?(p=k.jsx(c("BaseFocusRing.react"),{children:function(a){return k.jsx(c("CometPressable.react"),babelHelpers["extends"]({},e,{disabled:f,display:"inline",label:h,overlayDisabled:!0,testid:void 0,xstyle:[m["default"],f===!0&&m.disabled,a,t===!0&&m.dropShadow],children:k.jsx(c("FDSIcon.react"),{color:s,icon:g,size:20})}))}}),b[10]=e,b[11]=s,b[12]=f,b[13]=g,b[14]=t,b[15]=h,b[16]=p):p=b[16];b[17]!==o||b[18]!==p||b[19]!==a||b[20]!==j||b[21]!==r?(q=k.jsx(n,{align:j,position:"above",tooltip:a,tooltipImpl:o,tooltipOffsetY:r,children:p}),b[17]=o,b[18]=p,b[19]=a,b[20]=j,b[21]=r,b[22]=q):q=b[22];return q}g["default"]=a}),98);
__d("VideoPlayerControlsContainerOverlay.react",["CometErrorBoundary.react","FocusWithinHandler.react","VideoControlsContainerFocusedContext","VideoPlayerControlsBottomRowAddOnContext","VideoPlayerControlsHiddenContext","VideoPlayerHooks","react","react-compiler-runtime","stylex","useResizeObserver"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react"));b=i;var l=b.useEffect,m=b.useState,n=44,o={backgroundGradient:{backgroundImage:"x11v4dcs",bottom:"x1ey2m1c",position:"x10l6tqk",transitionDuration:"x1d8287x",transitionProperty:"x6o7n8i",transitionTimingFunction:"xl405pv",width:"xh8yej3",zIndex:"x8knxv4",$$css:!0},hidden:{opacity:"xg01cxk",pointerEvents:"x47corl",visibility:"xlshs6z",$$css:!0},visible:{opacity:"x1hc1fzr",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(18),e=a.children,f=a.height,g=a.initialBottomRowAddOn,i=a.isBackgroundVisible,p=a.isVisible,q=a.xstyle;a=g===void 0?null:g;g=m(0);var r=g[0],s=g[1];b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g=function(a){s(a.height)},b[0]=g):g=b[0];var t=c("useResizeObserver")(g),u=d("VideoPlayerControlsBottomRowAddOnContext").useVideoPlayerControlsBottomRowAddOn(a);g=(j||(j=d("VideoPlayerHooks"))).useVideoPlayerCaptionsReservationActions();var v=g.release,w=g.reserve,x=f!=null?f:n;b[1]!==x||b[2]!==i||b[3]!==p||b[4]!==v||b[5]!==w?(a=function(){if(Boolean(p)||Boolean(i)){var a=w({location:"bottom",size:x});return function(){v(a)}}},g=[p,i,w,v,x],b[1]=x,b[2]=i,b[3]=p,b[4]=v,b[5]=w,b[6]=a,b[7]=g):(a=b[6],g=b[7]);l(a,g);var y=i===!1||p===!1,z=i===!0||p===!0;b[8]!==u||b[9]!==r||b[10]!==t||b[11]!==e||b[12]!==x||b[13]!==y||b[14]!==z||b[15]!==p||b[16]!==q?(f=k.jsx(c("FocusWithinHandler.react"),{children:function(a,b){return k.jsx(c("VideoControlsContainerFocusedContext").Provider,{value:b,children:k.jsxs("div",babelHelpers["extends"]({},{0:{className:"x1ey2m1c x1q0g3np x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h"},4:{className:"x1ey2m1c x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h x6s0dn4 xzt5al7 x78zum5 x1q0g3np"},2:{className:"x1ey2m1c x1q0g3np x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h xg01cxk x47corl xlshs6z"},6:{className:"x1ey2m1c x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h x6s0dn4 xzt5al7 x78zum5 x1q0g3np xg01cxk x47corl xlshs6z"},1:{className:"x1ey2m1c x1q0g3np x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h x1hc1fzr"},5:{className:"x1ey2m1c x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h x6s0dn4 xzt5al7 x78zum5 x1q0g3np x1hc1fzr"},3:{className:"x1ey2m1c x1q0g3np x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h x47corl xlshs6z x1hc1fzr"},7:{className:"x1ey2m1c x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h x6s0dn4 xzt5al7 x78zum5 x1q0g3np x47corl xlshs6z x1hc1fzr"}}[!!(u==null)<<2|!!(p===!1)<<1|!!(p===!0)<<0],{"data-testid":void 0,children:[k.jsx("div",{className:(h||(h=c("stylex")))(o.backgroundGradient,y&&o.hidden,z&&o.visible,q),style:{height:x+r}}),k.jsx(c("VideoPlayerControlsHiddenContext").Provider,{value:y,children:u==null?e:k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"x6s0dn4 xzt5al7 x78zum5 x1q0g3np",children:e}),k.jsx(c("CometErrorBoundary.react"),{children:k.jsx("div",{ref:t,children:u})})]})})]}))})}}),b[8]=u,b[9]=r,b[10]=t,b[11]=e,b[12]=x,b[13]=y,b[14]=z,b[15]=p,b[16]=q,b[17]=f):f=b[17];return f}g["default"]=a}),98);
__d("VideoPlayerControlsGroups.react",["VideoControlsContainerFocusedContext","VideoPlayerControlsHiddenContext","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext;function a(a){var b=d("react-compiler-runtime").c(10),e=a.children,f=a.isVisible,g=a.noPaddingEnd;a=a.noPaddingStart;f=f===void 0?!0:f;g=g===void 0?!1:g;a=a===void 0?!1:a;var h=j(c("VideoControlsContainerFocusedContext"));f=f||h;h=j(c("VideoPlayerControlsHiddenContext"));var k;b[0]!==f||b[1]!==g||b[2]!==a?(k={0:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x1gabggj x18d9i69 xaso8d8 x1fmh03i x47corl"},4:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x18d9i69 xaso8d8 xyri2b x1fmh03i x47corl"},2:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x1gabggj x18d9i69 x1c1uobl x1fmh03i x47corl"},6:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x18d9i69 xyri2b x1c1uobl x1fmh03i x47corl"},1:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x1gabggj x18d9i69 xaso8d8 x1hc1fzr"},5:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x18d9i69 xaso8d8 xyri2b x1hc1fzr"},3:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x1gabggj x18d9i69 x1c1uobl x1hc1fzr"},7:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x18d9i69 xyri2b x1c1uobl x1hc1fzr"}}[!!g<<2|!!a<<1|!!f<<0],b[0]=f,b[1]=g,b[2]=a,b[3]=k):k=b[3];g=h||!f;b[4]!==e||b[5]!==g?(a=i.jsx(c("VideoPlayerControlsHiddenContext").Provider,{value:g,children:e}),b[4]=e,b[5]=g,b[6]=a):a=b[6];b[7]!==k||b[8]!==a?(h=i.jsx("div",babelHelpers["extends"]({},k,{children:a})),b[7]=k,b[8]=a,b[9]=h):h=b[9];return h}function b(a){var b=d("react-compiler-runtime").c(8),e=a.children;a=a.isVisible;a=a===void 0?!0:a;var f=j(c("VideoControlsContainerFocusedContext"));a=a||f;f=j(c("VideoPlayerControlsHiddenContext"));var g;b[0]!==a?(g={0:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 x1iyjqo2 x1fmh03i x47corl"},1:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 x1iyjqo2 x1hc1fzr"}}[!!a<<0],b[0]=a,b[1]=g):g=b[1];f=f||!a;b[2]!==e||b[3]!==f?(a=i.jsx(c("VideoPlayerControlsHiddenContext").Provider,{value:f,children:e}),b[2]=e,b[3]=f,b[4]=a):a=b[4];b[5]!==g||b[6]!==a?(e=i.jsx("div",babelHelpers["extends"]({},g,{children:a})),b[5]=g,b[6]=a,b[7]=e):e=b[7];return e}g.Contracted=a;g.Expanded=b}),98);
__d("VideoPlayerDefaultControlsProperties",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["SAME_AS_OTHER_CONTROLS","SEPARATE_FROM_OTHER_CONTROLS"]);c=b("$InternalEnum")({VIDEO_CAPTIONS_MENU:"video_captions_menu",VIDEO_SETTINGS_MENU:"video_settings_menu"});f.MutedButtonVisibility=a;f.VideoMenuType=c}),66);
__d("VideoPlayerInstreamAdsStateHooks",["createVideoStateHook"],(function(a,b,c,d,e,f,g){"use strict";var h=(d=d("createVideoStateHook")).createVideoStateHook(),i=h.stateHook,j=h.valueHook,k=[];function a(){return i(k)}function b(){return j(k)}h=d.createVideoStateHook();var l=h.stateHook,m=h.valueHook,n=null;function c(){return l(n)}function e(){return m(n)}h=d.createVideoStateHook();var o=h.setterHook,p=h.valueHook,q=!0;function f(){return o(q)}function r(){return p(q)}h=d.createVideoStateHook();var s=h.stateHook,t=h.valueHook,u="INIT";function v(){return s(u)}function w(){return t(u)}h=d.createVideoStateHook();var x=h.stateHook,y=h.valueHook,z=!0;function A(){return x(z)}function B(){return y(z)}h=d.createVideoStateHook();var C=h.stateHook,D=h.valueHook,E=null;function F(){return C(E)}function G(){return D(E)}h=d.createVideoStateHook();var H=h.stateHook,I=h.valueHook,J=null;function K(){return H(J)}function L(){return I(J)}h=d.createVideoStateHook();var M=h.stateHook,N=h.valueHook,O=null;function P(){return M(O)}function Q(){return N(O)}h=d.createVideoStateHook();var R=h.stateHook,S=h.valueHook,T=null;function U(){return R(T)}function aa(){return S(T)}h=d.createVideoStateHook();var ba=h.stateHook,ca=h.valueHook,V=null;function da(){return ba(V)}function ea(){return ca(V)}h=d.createVideoStateHook();var fa=h.stateHook,ga=h.valueHook,W=0;function ha(){return fa(W)}function ia(){return ga(W)}h=d.createVideoStateHook();var ja=h.stateHook,ka=h.valueHook,X=!1;function la(){return ja(X)}function ma(){return ka(X)}h=d.createVideoStateHook();var na=h.stateHook,oa=h.valueHook,Y=!1;function pa(){return na(Y)}function qa(){return oa(Y)}h=d.createVideoStateHook();var ra=h.stateHook,sa=h.valueHook,Z=null;function ta(){return ra(Z)}function ua(){return sa(Z)}h=d.createVideoStateHook();var va=h.stateHook,wa=h.valueHook,$=null;function xa(){return va($)}function ya(){return wa($)}function za(){var a=w();return a==="STARTING_INDICATOR"||a==="START"||a==="START_AD"||a==="PLAY_NI_VIDEO"}g.useInstreamAdsMidRollsState=a;g.useInstreamAdsMidRollsValue=b;g.useInstreamAdsPostRollState=c;g.useInstreamAdsPostRollValue=e;g.useInstreamAdsPostRollEndedOrSkippedStateSetter=f;g.useInstreamAdsPostRollEndedOrSkippedStateValue=r;g.useInstreamAdsState=v;g.useInstreamAdsStateValue=w;g.useInstreamAdsIsEmptyState=A;g.useInstreamAdsIsEmptyStateValue=B;g.useInstreamAdsCurrentInsertionState=F;g.useInstreamAdsCurrentInsertionStateValue=G;g.useStartIndicatorBeginningTimeState=K;g.useStartIndicatorBeginningTimeStateValue=L;g.useAdBreaksTimeOffsetBeginningState=P;g.useAdBreaksTimeOffsetBeginningStateValue=Q;g.useInstreamAdsExtraFieldsState=U;g.useInstreamAdsExtraFieldsStateValue=aa;g.useInstreamAdsHideAdBehaviorState=da;g.useInstreamAdsHideAdBehaviorStateValue=ea;g.useUnifiedSchedulerLastFetchTimeState=ha;g.useUnifiedSchedulerLastFetchTimeStateValue=ia;g.useWaitingForAdFetchState=la;g.useWaitingForAdFetchStateValue=ma;g.useInstreamAdsHasCTAState=pa;g.useInstreamAdsHasCTAStateValue=qa;g.useInstreamAdsFeedContextCardState=ta;g.useInstreamAdsFeedContextCardStateValue=ua;g.useInstreamAdsFullScreenContextCardState=xa;g.useInstreamAdsFullScreenContextCardStateValue=ya;g.useInstreamAdsIsStart=za}),98);
__d("VideoPlayerInteractionOverlay.react",["VideoPlayerHooks","react","react-compiler-runtime","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||d("react"),l={hiddenCursor:{cursor:"xjfk50j",$$css:!0},pointer:{cursor:"x1ypdohk",$$css:!0},root:{bottom:"x1ey2m1c",boxSizing:"x9f619",insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",position:"x10l6tqk",top:"x13vifvy",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(13),e=a.children,f=a.pressInteraction,g=a.ref,i=a.style;a=a.xstyle;var m=f==null?void 0:f.handler,n=f==null?void 0:f.onPressStart,o=f==null?void 0:f.onMouseEnter;f=f==null?void 0:f.onMouseLeave;var p=(j||(j=d("VideoPlayerHooks"))).useIsFullscreen(),q=j.useIsMouseIdle(),r=!!m&&l.pointer;p=p&&q&&l.hiddenCursor;b[0]!==r||b[1]!==p||b[2]!==a?(q=(h||(h=c("stylex")))(l.root,r,p,a),b[0]=r,b[1]=p,b[2]=a,b[3]=q):q=b[3];b[4]!==e||b[5]!==o||b[6]!==f||b[7]!==m||b[8]!==n||b[9]!==g||b[10]!==i||b[11]!==q?(r=k.jsx("div",{className:q,onClick:m,onMouseEnter:o,onMouseLeave:f,onPointerDown:n,ref:g,role:"presentation",style:i,children:e}),b[4]=e,b[5]=o,b[6]=f,b[7]=m,b[8]=n,b[9]=g,b[10]=i,b[11]=q,b[12]=r):r=b[12];return r}b=a;g.VideoPlayerInteractionOverlay=b}),98);
__d("VideoPlayerLiveRewindControlContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({cachedLiveRewindTimestamp:null,onLiveRewindControlEvent:function(){}});g["default"]=b}),98);
__d("VideoPlayerPlayButton.react",["fbt","ix","CometImage.react","CometPressable.react","CometTrackingNodeProvider.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react");function l(a){switch(a){case"LARGE":return i("352839");case"MEDIUM":return i("101640");case"SMALL":return i("354763")}}function a(a){var b=d("react-compiler-runtime").c(13),e=a.iconSize,f=a.isVisible;a=a.onClick;e=e===void 0?"LARGE":e;var g;b[0]!==e?(g=l(e),b[0]=e,b[1]=g):g=b[1];var i;b[2]!==g?(i=k.jsx(c("CometImage.react"),{src:g}),b[2]=g,b[3]=i):i=b[3];g=i;b[4]!==g||b[5]!==a?(i=a!=null?k.jsx(c("CometTrackingNodeProvider.react"),{trackingNode:592,children:k.jsx(c("CometPressable.react"),{display:"inline",label:h._(/*BTDS*/"Play Video"),onPress:a,overlayDisabled:!0,testid:void 0,children:g})}):g,b[4]=g,b[5]=a,b[6]=i):i=b[6];g=i;b[7]!==e||b[8]!==f?(a={0:{className:"x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x1hc1fzr x10l6tqk xwa60dl"},8:{className:"xy75621 xafmxuu x14z9mp xat24cr x1ob4rv2 xni59qk x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x1hc1fzr x10l6tqk xwa60dl"},4:{className:"xsdox4t xs9mwh0 x14z9mp xat24cr xwqyzqf x1useyqa x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x1hc1fzr x10l6tqk xwa60dl"},12:{className:"xsdox4t xs9mwh0 x14z9mp xat24cr xwqyzqf x1useyqa x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x1hc1fzr x10l6tqk xwa60dl"},2:{className:"xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x1hc1fzr x10l6tqk xwa60dl"},10:{className:"xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x1hc1fzr x10l6tqk xwa60dl"},6:{className:"xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x1hc1fzr x10l6tqk xwa60dl"},14:{className:"xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x1hc1fzr x10l6tqk xwa60dl"},1:{className:"x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x10l6tqk xwa60dl xg01cxk xlshs6z"},9:{className:"xy75621 xafmxuu x14z9mp xat24cr x1ob4rv2 xni59qk x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x10l6tqk xwa60dl xg01cxk xlshs6z"},5:{className:"xsdox4t xs9mwh0 x14z9mp xat24cr xwqyzqf x1useyqa x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x10l6tqk xwa60dl xg01cxk xlshs6z"},13:{className:"xsdox4t xs9mwh0 x14z9mp xat24cr xwqyzqf x1useyqa x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x10l6tqk xwa60dl xg01cxk xlshs6z"},3:{className:"xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x10l6tqk xwa60dl xg01cxk xlshs6z"},11:{className:"xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x10l6tqk xwa60dl xg01cxk xlshs6z"},7:{className:"xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x10l6tqk xwa60dl xg01cxk xlshs6z"},15:{className:"xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x10l6tqk xwa60dl xg01cxk xlshs6z"}}[!!(e==="LARGE")<<3|!!(e==="MEDIUM")<<2|!!(e==="SMALL")<<1|!!!f<<0],b[7]=e,b[8]=f,b[9]=a):a=b[9];b[10]!==g||b[11]!==a?(i=k.jsx("i",babelHelpers["extends"]({},a,{children:g})),b[10]=g,b[11]=a,b[12]=i):i=b[12];return i}g["default"]=a}),226);
__d("VideoPlayerPlaybackControlBase.react",["fbt","ix","VideoPlayerControlIcon.react","fbicon","react","react-compiler-runtime","unrecoverableViolation"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react");function a(a){var b=d("react-compiler-runtime").c(14),e=a.onPress,f=a.playbackIcon,g=a.showTooltip;a=a.useOutlineIcons;g=g===void 0?!0:g;var j,l;bb0:switch(f){case"pause":var m;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(m=h._(/*BTDS*/"Pause"),b[0]=m):m=b[0];j=m;b[1]!==a?(m=a===!0?d("fbicon")._(i("497677"),20):d("fbicon")._(i("497675"),20),b[1]=a,b[2]=m):m=b[2];l=m;break bb0;case"replay":b[3]===Symbol["for"]("react.memo_cache_sentinel")?(m=h._(/*BTDS*/"Replay"),b[3]=m):m=b[3];j=m;b[4]!==a?(m=a===!0?d("fbicon")._(i("534222"),20):d("fbicon")._(i("534219"),20),b[4]=a,b[5]=m):m=b[5];l=m;break bb0;case"play":b[6]===Symbol["for"]("react.memo_cache_sentinel")?(m=h._(/*BTDS*/"Play"),b[6]=m):m=b[6];j=m;b[7]!==a?(m=a===!0?d("fbicon")._(i("484866"),20):d("fbicon")._(i("484863"),20),b[7]=a,b[8]=m):m=b[8];l=m;break bb0;default:throw c("unrecoverableViolation")("The playback icon is unsupported "+f,"comet_video_player")}a=g?j:null;b[9]!==l||b[10]!==j||b[11]!==e||b[12]!==a?(m=k.jsx(c("VideoPlayerControlIcon.react"),{icon:l,label:j,onPress:e,tooltip:a}),b[9]=l,b[10]=j,b[11]=e,b[12]=a,b[13]=m):m=b[13];return m}g["default"]=a}),226);
__d("useFeedClickEventHandler",["react","react-compiler-runtime","useStoryClickEventLogger"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(a,b){var e=d("react-compiler-runtime").c(4),f=c("useStoryClickEventLogger")(),g;e[0]!==b||e[1]!==f||e[2]!==a?(g=function(c){a&&a(c);var d=c.type;if(d==="click"||d==="contextmenu"||d==="mousedown"&&typeof c.button==="number"&&(c.button===1||c.button===2)||d==="keydown"&&(c.key==="Enter"||c.key===" ")){d=typeof c.button==="number"?c.button:0;f(c.timeStamp,d,b)}},e[0]=b,e[1]=f,e[2]=a,e[3]=g):g=e[3];return g}g["default"]=a}),98);
__d("useVideoPlayerControllerSubscriptionHavingController",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef,k=b.useState;function a(a,b){var c=d("react-compiler-runtime").c(9),e;c[0]!==a||c[1]!==b?(e=function(){return b(a,null)},c[0]=a,c[1]=b,c[2]=e):e=c[2];e=k(e);var f=e[0],g=e[1],h=j(b),l;c[3]!==b?(e=function(){h.current=b},l=[b],c[3]=b,c[4]=e,c[5]=l):(e=c[4],l=c[5]);i(e,l);c[6]!==a?(e=function(){g(function(b){return h.current(a,b)});var b=a.subscribe(function(){g(function(b){return h.current(a,b)})});return function(){b.remove()}},l=[a],c[6]=a,c[7]=e,c[8]=l):(e=c[7],l=c[8]);i(e,l);return f}g["default"]=a}),98);
__d("useVideoPlayerControllerSubscription",["VideoPlayerHooks","useVideoPlayerControllerSubscriptionHavingController"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return c("useVideoPlayerControllerSubscriptionHavingController")((h||(h=d("VideoPlayerHooks"))).useController(),a)}g["default"]=a}),98);
__d("VideoPlayerPlaybackControl.react",["CometTrackingNodeProvider.react","VideoHomeTypedLiteLogger","VideoPlayerHooks","VideoPlayerPlaybackControlBase.react","react","react-compiler-runtime","useFeedClickEventHandler","useMinifiedProductAttribution","useVideoPlayerControllerSubscription"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h.useEffect;function a(a){var b=d("react-compiler-runtime").c(14),e=a.isNPC,f=a.showTooltip,g=a.unmuteOnPlay;a=a.useOutlineIcons;var h=e===void 0?!1:e;e=f===void 0?!0:f;var m=g===void 0?!1:g;b[0]!==h?(f=function(){h&&c("VideoHomeTypedLiteLogger").log({event:"npc_control_playback_button_impression"})},g=[h],b[0]=h,b[1]=f,b[2]=g):(f=b[1],g=b[2]);k(f,g);f=c("useVideoPlayerControllerSubscription")(l);var n=f.showPauseButton;g=f.showReplayButton;var o=(i||(i=d("VideoPlayerHooks"))).useController(),p=c("useMinifiedProductAttribution")();b[3]!==o||b[4]!==h||b[5]!==p||b[6]!==n||b[7]!==m?(f=function(){h&&c("VideoHomeTypedLiteLogger").log({attribution_id_v2:p,click_point:"npc_control_playback_button",event:"click",event_target:"video"}),n?o.pause("user_initiated"):(m&&o.setMuted(!1,"user_initiated"),o.play("user_initiated"))},b[3]=o,b[4]=h,b[5]=p,b[6]=n,b[7]=m,b[8]=f):f=b[8];f=c("useFeedClickEventHandler")(f);g=n?"pause":g?"replay":"play";var q;b[9]!==f||b[10]!==g||b[11]!==e||b[12]!==a?(q=j.jsx(c("CometTrackingNodeProvider.react"),{trackingNode:592,children:j.jsx(c("VideoPlayerPlaybackControlBase.react"),{onPress:f,playbackIcon:g,showTooltip:e,useOutlineIcons:a})}),b[9]=f,b[10]=g,b[11]=e,b[12]=a,b[13]=q):q=b[13];return q}function l(a,b){var c=a.getCurrentState(),d=c.ended,e=c.paused,f=c.playing,g=c.stalling;a=a.getPlayheadPosition();c=c.duration;e=!e&&(f||g);g=!f&&d&&a>=c;return b!=null&&b.showPauseButton===e&&b.showReplayButton===g?b:{showPauseButton:e,showReplayButton:g}}g["default"]=a}),98);
__d("getFormattedTimestamp",["DateConsts"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b="";a=a;isNaN(a)?a=0:a<0&&(a*=-1,b="-");var c=Math.floor(a/d("DateConsts").SEC_PER_HOUR),e=Math.floor((a-c*d("DateConsts").SEC_PER_HOUR)/d("DateConsts").SEC_PER_MIN);a=Math.round(a-c*d("DateConsts").SEC_PER_HOUR-e*d("DateConsts").SEC_PER_MIN);a===d("DateConsts").SEC_PER_MIN&&(a=0,e++);e===d("DateConsts").MIN_PER_HOUR&&(e=0,c++);a=("0"+a).slice(-2);if(c===0)return""+b+e+":"+a;else{e=("0"+e).slice(-2);return""+b+c+":"+e+":"+a}}g["default"]=a}),98);
__d("VideoPlayerPlaybackTimerBase.react",["getFormattedTimestamp","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(11),e=a.currentTime;a=a.duration;var f,g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f={className:"x14ctfv x1rg5ohu x1pg5gke xss6m8b x7h9g57 xf6vk7d xpcyujq x9hgts1 x2b8uid x27saw0 x3ajldb"},g={className:"x1s688f x15hfatp"},b[0]=f,b[1]=g):(f=b[0],g=b[1]);var h;b[2]!==e?(h=c("getFormattedTimestamp")(e),b[2]=e,b[3]=h):h=b[3];b[4]!==h?(e=i.jsx("span",babelHelpers["extends"]({},g,{children:h})),b[4]=h,b[5]=e):e=b[5];b[6]!==a?(g=a!=null&&i.jsxs(i.Fragment,{children:[i.jsx("span",{children:" / "}),i.jsx("span",{children:c("getFormattedTimestamp")(a)})]}),b[6]=a,b[7]=g):g=b[7];b[8]!==e||b[9]!==g?(h=i.jsxs("div",babelHelpers["extends"]({},f,{children:[e,g]})),b[8]=e,b[9]=g,b[10]=h):h=b[10];return h}g["default"]=a}),98);
__d("useLiveRewindUtils",["VideoPlayerHooks","VideoPlayerLiveRewindControlContext","react","react-compiler-runtime","useVideoPlayerControllerSubscription"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");j.useCallback;var k=j.useContext,l=10,m=10;function a(){var a=d("react-compiler-runtime").c(3),b=(i||(i=d("VideoPlayerHooks"))).useController(),e=k(c("VideoPlayerLiveRewindControlContext")),f;a[0]!==e||a[1]!==b?(f=function(){var a=b.getCurrentState().seekableRanges;a=a!=null?(a=a.end(a.length()-1))!=null?a:0:0;var c=Math.min(b.getPlayheadPosition()+l,a);c===a?(b.setIsLiveRewindActive(!1),b.seek(a)):b.seek(c);e.onLiveRewindControlEvent()},a[0]=e,a[1]=b,a[2]=f):f=a[2];return f}function b(){var a=d("react-compiler-runtime").c(3),b=(i||(i=d("VideoPlayerHooks"))).useController(),e=k(c("VideoPlayerLiveRewindControlContext")),f;a[0]!==e||a[1]!==b?(f=function(){var a=b.getCurrentState().seekableRanges;a=(a=a==null?void 0:a.start(0))!=null?a:0;a=Math.max(b.getPlayheadPosition()-m,a);b.seek(a);b.setIsLiveRewindActive(!0);e.onLiveRewindControlEvent()},a[0]=e,a[1]=b,a[2]=f):f=a[2];return f}function e(){var a=d("react-compiler-runtime").c(3),b=(i||(i=d("VideoPlayerHooks"))).useController(),e=k(c("VideoPlayerLiveRewindControlContext")),f;a[0]!==e||a[1]!==b?(f=function(){var a=b.getCurrentState().seekableRanges;a=a!=null?(a=a.end(a.length()-1))!=null?a:0:0;b.seek(a);b.play("user_initiated");b.setIsLiveRewindActive(!1);e.onLiveRewindControlEvent()},a[0]=e,a[1]=b,a[2]=f):f=a[2];return f}function f(){var a=d("react-compiler-runtime").c(3),b=(i||(i=d("VideoPlayerHooks"))).useController(),e=k(c("VideoPlayerLiveRewindControlContext")),f;a[0]!==e||a[1]!==b?(f=function(){var a=b.getCurrentState().seekableRanges;a=(a=a==null?void 0:a.start(0))!=null?a:0;b.seek(a);b.setIsLiveRewindActive(!0);e.onLiveRewindControlEvent()},a[0]=e,a[1]=b,a[2]=f):f=a[2];return f}function n(){var a=d("react-compiler-runtime").c(3),b=(i||(i=d("VideoPlayerHooks"))).useController(),e=k(c("VideoPlayerLiveRewindControlContext")),f;a[0]!==e||a[1]!==b?(f=function(){b.play("user_initiated"),e.onLiveRewindControlEvent()},a[0]=e,a[1]=b,a[2]=f):f=a[2];return f}function o(){var a=d("react-compiler-runtime").c(3),b=(i||(i=d("VideoPlayerHooks"))).useController(),e=k(c("VideoPlayerLiveRewindControlContext")),f;a[0]!==e||a[1]!==b?(f=function(){b.pause("user_initiated"),b.setIsLiveRewindActive(!0),e.onLiveRewindControlEvent()},a[0]=e,a[1]=b,a[2]=f):f=a[2];return f}function p(){var a=d("react-compiler-runtime").c(3),b=(i||(i=d("VideoPlayerHooks"))).useController(),e=k(c("VideoPlayerLiveRewindControlContext")),f;a[0]!==e||a[1]!==b?(f=function(){var a=b.getCurrentState().seekableRanges;a=(a=a==null?void 0:a.start(0))!=null?a:0;b.seek(a);b.setIsLiveRewindActive(!0);b.play("user_initiated");e.onLiveRewindControlEvent()},a[0]=e,a[1]=b,a[2]=f):f=a[2];return f}function q(){var a=d("react-compiler-runtime").c(3),b=(i||(i=d("VideoPlayerHooks"))).useController(),e=k(c("VideoPlayerLiveRewindControlContext")),f;a[0]!==e||a[1]!==b?(f=function(a){var c,d=b.getCurrentState().seekableRanges;c=(c=d==null?void 0:d.start(0))!=null?c:0;d=d!=null?(d=d.end(d.length()-1))!=null?d:0:0;c=Math.min(c+a,d);b.scrubEnd(c);c===d?b.setIsLiveRewindActive(!1):b.setIsLiveRewindActive(!0);e.onLiveRewindControlEvent()},a[0]=e,a[1]=b,a[2]=f):f=a[2];return f}function r(){return c("useVideoPlayerControllerSubscription")(s)}function s(a){return(a=(a=a.getCurrentState().seekableRanges)==null?void 0:a.start(0))!=null?a:0}g.useLiveRewindForward=a;g.useLiveRewindBack=b;g.useLiveRewindLive=e;g.useLiveRewindStart=f;g.useLiveRewindPlay=n;g.useLiveRewindPause=o;g.useLiveRewindReplay=p;g.useLiveRewindScrub=q;g.useLiveRewindSeekableStartTime=r}),98);
__d("VideoPlayerPlaybackTimer.react",["VideoPlayerHooks","VideoPlayerPlaybackTimerBase.react","react","react-compiler-runtime","useLiveRewindUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");b=a;var k=function(a,b){return a-b.duration};function l(){var a=d("react-compiler-runtime").c(2),b=d("useLiveRewindUtils").useLiveRewindSeekableStartTime(),e=(i||(i=d("VideoPlayerHooks"))).useCurrentTimeThrottled(200),f=i.useCurrentTimeThrottled(1e3,k),g=i.useIsLiveRewindActive();g=g?f:e-b;a[0]!==g?(f=j.jsx(c("VideoPlayerPlaybackTimerBase.react"),{currentTime:g,duration:null}),a[0]=g,a[1]=f):f=a[1];return f}function m(){var a=d("react-compiler-runtime").c(3),b=(i||(i=d("VideoPlayerHooks"))).useDuration(),e=i.useCurrentTimeThrottled(200),f;a[0]!==e||a[1]!==b?(f=j.jsx(c("VideoPlayerPlaybackTimerBase.react"),{currentTime:e,duration:b}),a[0]=e,a[1]=b,a[2]=f):f=a[2];return f}function a(){var a=d("react-compiler-runtime").c(2),b=(i||(i=d("VideoPlayerHooks"))).useIsLive();if(b){a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=j.jsx(l,{}),a[0]=b):b=a[0];return b}else{a[1]===Symbol["for"]("react.memo_cache_sentinel")?(b=j.jsx(m,{}),a[1]=b):b=a[1];return b}}e=b;g["default"]=e}),98);
__d("VideoPlayerPointerDrag",["react","react-compiler-runtime","useResizeObserver","useStable"],(function(a,b,c,d,e,f,g){"use strict";var h;f=h||d("react");var i=f.useEffect,j=f.useRef,k=f.useState;function a(){var a=d("react-compiler-runtime").c(5),b=j(null),e=j(null),f;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=function(a,c){b.current=c.getBoundingClientRect(),e.current=c},a[0]=f):f=a[0];f=c("useResizeObserver")(f);var g;a[1]===Symbol["for"]("react.memo_cache_sentinel")?(g=function(){return function(){var a=e.current;a?b.current=a.getBoundingClientRect():b.current=null}},a[1]=g):g=a[1];g=c("useStable")(g);var h;a[2]!==g||a[3]!==f?(h={invalidateRootRect:g,rootRectRef:b,rootSizeRefCallback:f},a[2]=g,a[3]=f,a[4]=h):h=a[4];return h}function b(a,b){if(b==null)return null;var c=Math.max(0,Math.min(b.width,a.clientX-b.left));a=Math.max(0,Math.min(b.height,a.clientY-b.top));return{ratioX:b.width>0?c/b.width:0,ratioY:b.height>0?a/b.height:0}}function l(a,b){a=a.changedTouches;if(b==null||!a)return null;for(var c=0;c<a.length;++c){var d=a[c];if(d.identifier===b)return{clientX:d.clientX,clientY:d.clientY}}return null}function m(a,b){var c=a;switch(b.type){case"start":c=babelHelpers["extends"]({},a,{clientX:b.clientX,clientY:b.clientY,dragState:"dragging",lastEffect:a.dragState==="idle"?"start":a.lastEffect});break;case"move":if(a.dragState!=="dragging")break;c={clientX:b.clientX,clientY:b.clientY,dragState:"dragging",lastEffect:a.dragState==="idle"?"start":"move"};break;case"end":if(a.dragState!=="dragging")break;c={clientX:b.clientX,clientY:b.clientY,dragState:"idle",lastEffect:a.dragState==="idle"?a.lastEffect:"end"};break;case"cancel":if(a.dragState!=="dragging")break;c={clientX:a.clientX,clientY:a.clientY,dragState:"idle",lastEffect:a.dragState==="idle"?a.lastEffect:"cancel"};break;default:break}return c.dragState!==a.dragState||c.lastEffect!==a.lastEffect||c.clientX!==a.clientX||c.clientY!==a.clientY?c:a}var n={clientX:0,clientY:0,dragState:"idle",lastEffect:null},o=function(){return window.navigator.userAgent.indexOf("MSIE")>=0};function p(a,b,c){var d=n,e=null,f=null,g=function(b){d=m(d,b),a(d)},h=function(a){g({clientX:a.clientX,clientY:a.clientY,type:"move"});a=b.current.onDragMoveSync;a==null||a(d)},i=function(a){e&&e();g({clientX:a.clientX,clientY:a.clientY,type:"end"});a=b.current.onDragEndSync;a==null||a(d)},j=function(){e&&e();g({type:"cancel"});var a=b.current.onDragCancelSync;a==null||a(d)},k=function(a){a=l(a,c.current);if(a==null)return;g({clientX:a.clientX,clientY:a.clientY,type:"move"});a=b.current.onDragMoveSync;a==null||a(d)},p=function(a){a=l(a,c.current);if(a==null)return;f&&f();g({clientX:a.clientX,clientY:a.clientY,type:"end"});a=b.current.onDragEndSync;a==null||a(d)},q=p;return{destroy:function(){e&&e(),f&&f()},onMouseDown:function(a){o()||a.preventDefault();g({clientX:a.clientX,clientY:a.clientY,type:"start"});a=b.current.onDragStartSync;a==null||a(d);e||(window.addEventListener("mousemove",h),window.addEventListener("mouseup",i),window.addEventListener("blur",j),window.addEventListener("mouseleave",j),e=function(){e=null,window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",i),window.removeEventListener("blur",j),window.removeEventListener("mouseleave",j)})},onTouchStart:function(a){a.preventDefault();var e=a.changedTouches[0];e!=null&&(c.current=e.identifier);e=l(a,c.current);if(e==null)return;g({clientX:e.clientX,clientY:e.clientY,type:"start"});a=b.current.onDragStartSync;a==null||a(d);f||(window.addEventListener("touchmove",k),window.addEventListener("touchend",p),window.addEventListener("touchcancel",q),window.addEventListener("blur",j),f=function(){f=null,window.removeEventListener("touchmove",k),window.removeEventListener("touchend",p),window.removeEventListener("touchcancel",q),window.removeEventListener("blur",j)})}}}function q(a,b){var c=d("react-compiler-runtime").c(6),e;c[0]!==b.current||c[1]!==a?(e=function(){var c=b.current,d=c.onDragCancel,e=c.onDragEnd,f=c.onDragMove;c=c.onDragStart;switch(a.lastEffect){case"start":c(a);return;case"move":f(a);return;case"end":e(a);return;case"cancel":d(a);return}},c[0]=b.current,c[1]=a,c[2]=e):e=c[2];var f;c[3]!==b||c[4]!==a?(f=[a,b],c[3]=b,c[4]=a,c[5]=f):f=c[5];i(e,f)}function r(a,b,e){var f=d("react-compiler-runtime").c(13),g=k(n),h=g[0],j=g[1];f[0]!==a||f[1]!==b?(g=function(){return p(j,a,b)},f[0]=a,f[1]=b,f[2]=g):g=f[2];g=c("useStable")(g);var l=g.destroy,m=g.onMouseDown;g=g.onTouchStart;var o,q;f[3]!==l?(o=function(){return l},q=[l],f[3]=l,f[4]=o,f[5]=q):(o=f[4],q=f[5]);i(o,q);f[6]!==m||f[7]!==g||f[8]!==(e==null?void 0:e.hasTouchEvents)?(o={onClick:function(a){a.stopPropagation(),a.preventDefault()},onMouseDown:m,onTouchStart:(e==null?void 0:e.hasTouchEvents)===!0?g:void 0},f[6]=m,f[7]=g,f[8]=e==null?void 0:e.hasTouchEvents,f[9]=o):o=f[9];f[10]!==h||f[11]!==o?(q={dragState:h,rootProps:o},f[10]=h,f[11]=o,f[12]=q):q=f[12];return q}function e(a,b){var c=d("react-compiler-runtime").c(7),e=j(a),f=j(null),g,h;c[0]!==a?(g=function(){e.current=a},h=[a],c[0]=a,c[1]=g,c[2]=h):(g=c[1],h=c[2]);i(g,h);g=r(e,f,b);h=g.dragState;f=g.rootProps;q(h,e);b=h.dragState==="dragging";c[3]!==h||c[4]!==f||c[5]!==b?(g={dragState:h,isDragging:b,rootProps:f},c[3]=h,c[4]=f,c[5]=b,c[6]=g):g=c[6];return g}g.usePointerDragResizeObserver=a;g.computePointerOffsetRatio=b;g.usePointerDrag=e}),98);
__d("VideoPlayerSliderNub.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(4);a=a.isVisible;var c;b[0]!==a?(c={0:{className:"x14hiurz x1g7gg9k x16h6fyj x1eoefnw x10eyzkn x1c9tyrk xeusxvb x1pahc9y x1ertn4p x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu xamhcws x1alpsbp xlxy82 xyumdvf x1nqv1ya x1s85apg xdk7pt x1x862rh x1rdy4ex x10l6tqk x3m8u43 x1xc55vz x1vjfegm"},1:{className:"x14hiurz x1g7gg9k x16h6fyj x1eoefnw x10eyzkn x1c9tyrk xeusxvb x1pahc9y x1ertn4p x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu xamhcws x1alpsbp xlxy82 xyumdvf x1nqv1ya xdk7pt x1x862rh x1rdy4ex x10l6tqk x3m8u43 x1xc55vz x1vjfegm x1lliihq"}}[!!a<<0],b[0]=a,b[1]=c):c=b[1];b[2]!==c?(a=i.jsx("div",babelHelpers["extends"]({},c,{"data-testid":void 0})),b[2]=c,b[3]=a):a=b[3];return a}g["default"]=a}),98);
__d("VideoPlayerScrubberBaseContentDefault.react",["CometVisualCompletionAttributes","VideoPlayerSliderNub.react","react","react-compiler-runtime","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={liveRewindTimePlayed:{backgroundColor:"xh1tjdi",$$css:!0},liveTimePlayed:{backgroundColor:"x1ciooss",$$css:!0},timelineBackground:{backgroundColor:"x1rwy58d",borderStartStartRadius:"xr9e8f9",borderStartEndRadius:"x1e4oeot",borderEndEndRadius:"x1ui04y5",borderEndStartRadius:"x6en5u8",boxShadow:"xpdb0fs",height:"xuoj239",textShadow:"xd9u3wd",userSelect:"x87ps6o",$$css:!0},timelineBuffered:{height:"xuoj239",position:"x10l6tqk",$$css:!0},timelineBufferedBackground:{backgroundColor:"x17j41np",$$css:!0},timelinePlayed:{backgroundColor:"x1evw4sf",borderStartStartRadius:"xr9e8f9",borderStartEndRadius:"x1e4oeot",borderEndEndRadius:"x1ui04y5",borderEndStartRadius:"x6en5u8",height:"xuoj239",position:"x10l6tqk",userSelect:"x87ps6o",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(26),e=a.bufferedRatio,f=a.isLive,g=a.isLiveRewindActive,i=a.isNubVisible,l=a.playedRatio,m=a.timelineBackgroundXStyle,n=a.timelineBufferedXStyle;a=a.timelinePlayedXStyle;var o;b[0]!==m?(o=(h||(h=c("stylex"))).props(k.timelineBackground,m),b[0]=m,b[1]=o):o=b[1];m=!f&&k.timelineBufferedBackground;var p;b[2]!==m||b[3]!==n?(p=(h||(h=c("stylex")))(k.timelineBuffered,m,n),b[2]=m,b[3]=n,b[4]=p):p=b[4];m=(100*e).toFixed(5)+"%";b[5]!==m?(n={width:m},b[5]=m,b[6]=n):n=b[6];b[7]!==p||b[8]!==n?(e=j.jsx("div",babelHelpers["extends"]({className:p},c("CometVisualCompletionAttributes").IGNORE,{style:n})),b[7]=p,b[8]=n,b[9]=e):e=b[9];m=f&&!g&&k.liveTimePlayed;p=f&&g&&k.liveRewindTimePlayed;b[10]!==m||b[11]!==p||b[12]!==a?(n=(h||(h=c("stylex")))(k.timelinePlayed,m,p,a),b[10]=m,b[11]=p,b[12]=a,b[13]=n):n=b[13];f=(100*l).toFixed(5)+"%";b[14]!==f?(g={width:f},b[14]=f,b[15]=g):g=b[15];b[16]!==i?(m=j.jsx(c("VideoPlayerSliderNub.react"),{isVisible:i}),b[16]=i,b[17]=m):m=b[17];b[18]!==g||b[19]!==m||b[20]!==n?(p=j.jsx("div",babelHelpers["extends"]({className:n},c("CometVisualCompletionAttributes").IGNORE,{style:g,children:m})),b[18]=g,b[19]=m,b[20]=n,b[21]=p):p=b[21];b[22]!==o||b[23]!==p||b[24]!==e?(a=j.jsxs("div",babelHelpers["extends"]({},o,{children:[e,p]})),b[22]=o,b[23]=p,b[24]=e,b[25]=a):a=b[25];return a}g["default"]=a}),98);
__d("VideoPlayerUserInteractionCounter",["react","react-compiler-runtime","unrecoverableViolation","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h;e=h||d("react");e.useCallback;var i=e.useEffect,j=e.useRef,k=e.useState;function a(a,b,e){var f=d("react-compiler-runtime").c(12),g=j(a),h,k;f[0]!==a?(h=function(){if(a!==g.current)throw c("unrecoverableViolation")("User interaction name should not change between renders ('"+g.current+"' -> '"+a+"').","comet_video_player")},k=[a],f[0]=a,f[1]=h,f[2]=k):(h=f[1],k=f[2]);i(h,k);var l=j(e);f[3]!==e?(h=function(){l.current=e},k=[e],f[3]=e,f[4]=h,f[5]=k):(h=f[4],k=f[5]);i(h,k);var m=c("usePrevious")(b),n=j(!1);f[6]!==b||f[7]!==m?(h=function(){var a=g.current,c=l.current;c&&((m===null||b!==m)&&(b?(n.current=!0,c({name:a,type:"started"})):m!==null&&(n.current=!1,c({name:a,type:"ended"}))))},k=[b,m],f[6]=b,f[7]=m,f[8]=h,f[9]=k):(h=f[8],k=f[9]);i(h,k);f[10]===Symbol["for"]("react.memo_cache_sentinel")?(h=function(){var a=g.current,b=l.current;return function(){b&&n.current&&b({name:a,type:"ended"})}},k=[],f[10]=h,f[11]=k):(h=f[10],k=f[11]);i(h,k)}function b(){var a=d("react-compiler-runtime").c(4),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=new Set(),a[0]=b):b=a[0];var c=j(b);b=k(0);var e=b[0],f=b[1];a[1]===Symbol["for"]("react.memo_cache_sentinel")?(b=function(a){var b=c.current;a.type==="started"||a.type==="happening"?(b.add(a.name),f(b.size)):a.type==="ended"&&(b["delete"](a.name),f(b.size))},a[1]=b):b=a[1];b=b;a[2]!==e?(b={ongoingInteractionsCount:e,onUserInteraction:b},a[2]=e,a[3]=b):b=a[3];return b}g.useVideoPlayerUserInteraction=a;g.useVideoPlayerUserInteractionCounter=b}),98);
__d("useVideoPlayerScrubberState",["VideoPlayerPointerDrag","react","react-compiler-runtime","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useState;function k(a,b){return Math.min(a>0?b/a:0,1)}function a(a){var b=d("react-compiler-runtime").c(41),e=a.bufferEnd,f=a.currentTime,g=a.duration,h=a.onScrubCancel,l=a.onScrubEnd,m=a.onScrubStart;a=a.supportsTouch;var n=d("VideoPlayerPointerDrag").usePointerDragResizeObserver(),o=n.invalidateRootRect,p=n.rootRectRef;n=n.rootSizeRefCallback;var q=j(0),r=q[0],s=q[1];q=j(!1);var t=q[0],u=q[1],v=c("usePrevious")(f),w;b[0]!==f||b[1]!==v?(q=function(){f!==v&&u(!1)},w=[f,v],b[0]=f,b[1]=v,b[2]=q,b[3]=w):(q=b[2],w=b[3]);i(q,w);b[4]!==h?(q=function(a){h()},b[4]=h,b[5]=q):q=b[5];b[6]!==g||b[7]!==h||b[8]!==l||b[9]!==p?(w=function(a){a=d("VideoPlayerPointerDrag").computePointerOffsetRatio(a,p.current);if(!a){h();return}s(a.ratioX);a=a.ratioX*g;l(a)},b[6]=g,b[7]=h,b[8]=l,b[9]=p,b[10]=w):w=b[10];var x;b[11]===Symbol["for"]("react.memo_cache_sentinel")?(x=function(){u(!0)},b[11]=x):x=b[11];var y;b[12]!==p?(y=function(a){a=d("VideoPlayerPointerDrag").computePointerOffsetRatio(a,p.current);if(!a)return;s(a.ratioX)},b[12]=p,b[13]=y):y=b[13];var z;b[14]!==o||b[15]!==m||b[16]!==p?(z=function(a){o();a=d("VideoPlayerPointerDrag").computePointerOffsetRatio(a,p.current);if(!a)return;s(a.ratioX);m()},b[14]=o,b[15]=m,b[16]=p,b[17]=z):z=b[17];b[18]!==q||b[19]!==w||b[20]!==y||b[21]!==z?(x={onDragCancel:q,onDragEnd:w,onDragEndSync:x,onDragMove:y,onDragStart:z},b[18]=q,b[19]=w,b[20]=y,b[21]=z,b[22]=x):x=b[22];q=a===!0;b[23]!==q?(w={hasTouchEvents:q},b[23]=q,b[24]=w):w=b[24];y=d("VideoPlayerPointerDrag").usePointerDrag(x,w);z=y.isDragging;a=y.rootProps;b[25]!==e||b[26]!==g?(q=k(g,e),b[25]=e,b[26]=g,b[27]=q):q=b[27];x=q;b[28]!==f||b[29]!==g?(w=k(g,f),b[28]=f,b[29]=g,b[30]=w):w=b[30];y=w;b[31]!==x||b[32]!==y||b[33]!==o||b[34]!==z||b[35]!==t||b[36]!==r||b[37]!==a||b[38]!==p||b[39]!==n?(e={bufferedRatio:x,currentPlayedRatio:y,invalidateRootRect:o,isDragging:z,isWaitingForSeek:t,pointerOffsetRatio:r,rootProps:a,rootRectRef:p,rootSizeRefCallback:n},b[31]=x,b[32]=y,b[33]=o,b[34]=z,b[35]=t,b[36]=r,b[37]=a,b[38]=p,b[39]=n,b[40]=e):e=b[40];return e}g["default"]=a}),98);
__d("VideoPlayerScrubberBase.react",["fbt","CometComponentWithKeyCommands.react","CometKeys","VideoPlayerScrubberBaseContentDefault.react","VideoPlayerUserInteractionCounter","react","useVideoPlayerScrubberState"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useMemo,m=b.useState;function a(a){var b=a.bufferEnd,e=a.currentTime,f=a.disableKeyCommands,g=a.duration,i=a.hideNub;i=i===void 0?!1:i;var n=a.isLive,o=a.isLiveRewindActive,p=a.keyLeftDescription,q=a.keyRightDescription,r=a.onScrubCancel,s=a.onScrubEnd,t=a.onScrubStart,u=a.onUserInteraction,v=a.playFromBeginningImpl,w=a.renderScrubber,x=a.renderTooltip,y=a.skipBackwardImpl,z=a.skipForwardImpl,A=a.skipToEndImpl,B=a.supportsTouch,C=a.timelineBackgroundXStyle,D=a.timelineBufferedXStyle,E=a.timelinePlayedXStyle;a=a.withoutVerticalPadding;a=a===void 0?!1:a;var F=m(!1),G=F[0],H=F[1];F=m(0);var I=F[0],J=F[1];F=m(null);var K=F[0],L=F[1];F=c("useVideoPlayerScrubberState")({bufferEnd:b,currentTime:e,duration:g,onScrubCancel:r,onScrubEnd:s,onScrubStart:t,supportsTouch:B});b=F.bufferedRatio;r=F.currentPlayedRatio;var M=F.invalidateRootRect;s=F.isDragging;t=F.isWaitingForSeek;B=F.pointerOffsetRatio;var N=F.rootProps,O=F.rootRectRef;F=F.rootSizeRefCallback;var P=k(function(){H(!0)},[]),Q=k(function(){H(!1)},[]),R=k(function(a){M();if(O.current!=null){var b=O.current.left,c=O.current.width,d=Math.max(0,Math.min(c,a.clientX-b));d=c>0?d/c:0;c=Number.isFinite(g)&&g>0?g*d:null;J(a.clientX-b);L(c)}},[g,M,O]),S=G||s;d("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteraction("video_scrubber",S,u);S=G||s||t;u=s||t?B:n&&!o?1:r;s=l(function(){return f===!0?[]:[{command:{key:c("CometKeys").RIGHT},description:q,handler:z},{command:{key:c("CometKeys").LEFT},description:p,handler:y},{command:{key:c("CometKeys").HOME},description:h._(/*BTDS*/"Play from beginning"),handler:v},{command:{key:c("CometKeys").END},description:h._(/*BTDS*/"Skip to end"),handler:A}]},[f,q,z,p,y,v,A]);t={bufferedRatio:b,duration:g,hoveringPositionSec:K,isHovering:G,isLive:n,isLiveRewindActive:o,isNubVisible:!i&&S,playedRatio:u,timelineBackgroundXStyle:C,timelineBufferedXStyle:D,timelinePlayedXStyle:E};return j.jsx(c("CometComponentWithKeyCommands.react"),{commandConfigs:s,children:j.jsxs("div",babelHelpers["extends"]({},N,{"aria-label":h._(/*BTDS*/"Change Position"),"aria-orientation":"horizontal","aria-valuemax":g,"aria-valuemin":"0","aria-valuenow":e,className:{0:"x1ypdohk x1y1aw1k xyri2b xwib8y2 x1c1uobl x1n2onr6 x87ps6o xh8yej3",1:"x1ypdohk xyri2b x1c1uobl x1n2onr6 x87ps6o xh8yej3 x18d9i69 xexx8yu"}[!!a<<0],"data-testid":void 0,onMouseEnter:P,onMouseLeave:Q,onMouseMove:R,ref:F,role:"slider",tabIndex:0,children:[w!=null?w(t):j.jsx(c("VideoPlayerScrubberBaseContentDefault.react"),babelHelpers["extends"]({},t)),x!=null&&K!=null&&G&&j.jsx("div",{className:"xfqi8uc x10l6tqk",style:{left:I},children:x(K)})]}))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("VideoPlayerScrubber.react",["fbt","VideoPlayerHooks","VideoPlayerScrubberBase.react","react","react-compiler-runtime","useLiveRewindUtils"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react"));i.useCallback;function l(){return(j||(j=d("VideoPlayerHooks"))).useCurrentTimeThrottled(200)}function a(a){var b=d("react-compiler-runtime").c(48),e=a.onUserInteraction,f=a.renderScrubber;a=a.renderTooltip;var g=l(),i=(j||(j=d("VideoPlayerHooks"))).useDuration(),m=j.useController(),n=j.useBufferEnd(),o=j.useIsLive(),p=j.useIsLiveRewindActive(),q=d("useLiveRewindUtils").useLiveRewindScrub(),r=d("useLiveRewindUtils").useLiveRewindForward(),s=d("useLiveRewindUtils").useLiveRewindBack(),t=d("useLiveRewindUtils").useLiveRewindStart(),u=d("useLiveRewindUtils").useLiveRewindLive(),v=d("useLiveRewindUtils").useLiveRewindSeekableStartTime();o&&(i=i-v,i,g=g-v);b[0]!==m||b[1]!==i||b[2]!==o||b[3]!==r?(v=function(){if(o)r();else{var a=m.getPlayheadPosition()+5;a>=i?m.seek(i-.01):m.seek(a)}},b[0]=m,b[1]=i,b[2]=o,b[3]=r,b[4]=v):v=b[4];i;v=v;var w;b[5]!==o?(w=o?h._(/*BTDS*/"Fast-forward 10 seconds"):h._(/*BTDS*/"Fast-forward 5 seconds"),b[5]=o,b[6]=w):w=b[6];w=w;var x;b[7]!==m||b[8]!==o||b[9]!==s?(x=function(){if(o)s();else{var a=m.getPlayheadPosition()-5;a<0?m.seek(0):m.seek(a)}},b[7]=m,b[8]=o,b[9]=s,b[10]=x):x=b[10];x=x;var y;b[11]!==o?(y=o?h._(/*BTDS*/"Rewind 10 seconds"):h._(/*BTDS*/"Rewind 5 seconds"),b[11]=o,b[12]=y):y=b[12];y=y;var z;b[13]!==m||b[14]!==o||b[15]!==t?(z=function(){o?t():m.seek(0)},b[13]=m,b[14]=o,b[15]=t,b[16]=z):z=b[16];z=z;var A;b[17]!==m||b[18]!==i||b[19]!==o||b[20]!==u?(A=function(){o?u():m.seek(i-.01)},b[17]=m,b[18]=i,b[19]=o,b[20]=u,b[21]=A):A=b[21];i;A=A;var B;b[22]!==m?(B=function(){m.scrubEnd(null)},b[22]=m,b[23]=B):B=b[23];B=B;var C;b[24]!==m?(C=function(){m.scrubBegin()},b[24]=m,b[25]=C):C=b[25];C=C;var D;b[26]!==m||b[27]!==o||b[28]!==q?(D=function(a){!o?m.scrubEnd(a):q(a)},b[26]=m,b[27]=o,b[28]=q,b[29]=D):D=b[29];D=D;var E;b[30]!==n||b[31]!==g||b[32]!==i||b[33]!==o||b[34]!==p||b[35]!==A||b[36]!==y||b[37]!==w||b[38]!==e||b[39]!==z||b[40]!==f||b[41]!==a||b[42]!==B||b[43]!==D||b[44]!==C||b[45]!==x||b[46]!==v?(E=k.jsx(c("VideoPlayerScrubberBase.react"),{bufferEnd:n,currentTime:g,duration:i,isLive:o,isLiveRewindActive:p,keyLeftDescription:y,keyRightDescription:w,onScrubCancel:B,onScrubEnd:D,onScrubStart:C,onUserInteraction:e,playFromBeginningImpl:z,renderScrubber:f,renderTooltip:a,skipBackwardImpl:x,skipForwardImpl:v,skipToEndImpl:A}),b[30]=n,b[31]=g,b[32]=i,b[33]=o,b[34]=p,b[35]=A,b[36]=y,b[37]=w,b[38]=e,b[39]=z,b[40]=f,b[41]=a,b[42]=B,b[43]=D,b[44]=C,b[45]=x,b[46]=v,b[47]=E):E=b[47];return E}g["default"]=a}),226);
__d("VideoPlayerSmallPlayButton.react",["fbt","CometImage.react","CometPressable.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(8),e=a.isVisible;a=a.onClick;var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=j.jsx(c("CometImage.react"),{src:"/images/video/play_48dp.png"}),b[0]=f):f=b[0];f=f;b[1]!==a?(f=a!=null?j.jsx(c("CometPressable.react"),{display:"inline",label:h._(/*BTDS*/"Play Video"),onPress:a,overlayDisabled:!0,children:f}):f,b[1]=a,b[2]=f):f=b[2];a=f;b[3]!==e?(f={0:{className:"x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xsdox4t xbudbmw xs9mwh0 x14z9mp xat24cr xwqyzqf x1hc1fzr x10l6tqk xwa60dl x1useyqa"},1:{className:"x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xsdox4t xbudbmw xs9mwh0 x14z9mp xat24cr xwqyzqf x10l6tqk xwa60dl x1useyqa xg01cxk xlshs6z"}}[!!!e<<0],b[3]=e,b[4]=f):f=b[4];b[5]!==a||b[6]!==f?(e=j.jsx("i",babelHelpers["extends"]({},f,{children:a})),b[5]=a,b[6]=f,b[7]=e):e=b[7];return e}g["default"]=a}),226);
__d("VideoPlayerSpinner.react",["CometLightweightVideoAttachmentContext","FDSLoadingAnimation.react","gkx","react","react-compiler-runtime","stylex","useDebouncedValue"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i.useContext,l=36,m={spinner:{height:"xc9qbxq",insetInlineStart:"xbudbmw",opacity:"x1hc1fzr",position:"x10l6tqk",top:"xwa60dl",transform:"x11lhmoz",transitionDelay:"x5w5eug",transitionDuration:"x13dflua",transitionProperty:"x19991ni",transitionTimingFunction:"xl405pv",width:"x14qfxbe",$$css:!0},spinnerHidden:{opacity:"xg01cxk",transitionDelay:"x2p8vrm",transitionDuration:"x13dflua",transitionProperty:"x1jl3cmp",transitionTimingFunction:"xl405pv",visibility:"xlshs6z",$$css:!0},spinnerSnappier:{transitionDelay:"x2p8vrm",$$css:!0},spinnerSnappierHidden:{transitionDelay:"x1ahifba",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(8);a=a.isVisible;var e=c("useDebouncedValue")(a,a?200:500),f=k(c("CometLightweightVideoAttachmentContext"));f=f.isLightweightVideoAttachment;var g;b[0]!==a?(g=(h||(h=c("stylex"))).props(m.spinner,c("gkx")("24333")?[m.spinnerSnappier,!a&&m.spinnerHidden,!a&&m.spinnerSnappierHidden]:[!a&&m.spinnerHidden]),b[0]=a,b[1]=g):g=b[1];a=!e;e=f?"media":"default";b[2]!==a||b[3]!==e?(f=j.jsx(c("FDSLoadingAnimation.react"),{animationPaused:a,color:e,size:l}),b[2]=a,b[3]=e,b[4]=f):f=b[4];b[5]!==g||b[6]!==f?(a=j.jsx("div",babelHelpers["extends"]({},g,{children:f})),b[5]=g,b[6]=f,b[7]=a):a=b[7];return a}g["default"]=a}),98);
__d("VideoPlayerVolumeControlBase.react",["fbt","ix","FocusWithinHandler.react","VideoPlayerControlIcon.react","fbicon","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react")),l=j.useState,m=.33,n=.66;function a(a){var b=d("react-compiler-runtime").c(18),e=a.audioAvailabilityUI,f=a.isMuted,g=a.onMouseEnter,j=a.onMouseLeave,o=a.onSetMuted,p=a.onUserInteraction,q=a.renderVolumeSlider,r=a.useOutlineIcons;a=a.volume;r=r===void 0?!1:r;var s=!f&&a>0,t;b[0]!==e||b[1]!==s||b[2]!==r||b[3]!==a?(e!=null&&e.shouldShowNullIcon?t=r?d("fbicon")._(i("944795"),20):d("fbicon")._(i("944792"),20):s?a<=m?t=r?d("fbicon")._(i("1146252"),20):d("fbicon")._(i("1104387"),20):a<=n?t=r?d("fbicon")._(i("1104392"),20):d("fbicon")._(i("1104390"),20):t=r?d("fbicon")._(i("564393"),20):d("fbicon")._(i("564390"),20):t=r?d("fbicon")._(i("564399"),20):d("fbicon")._(i("564396"),20),b[0]=e,b[1]=s,b[2]=r,b[3]=a,b[4]=t):t=b[4];s=l(!1);var u=s[0],v=s[1];b[5]!==f?(r=f?h._(/*BTDS*/"Unmute"):h._(/*BTDS*/"Mute"),b[5]=f,b[6]=r):r=b[6];var w=r;b[7]!==e||b[8]!==t||b[9]!==f||b[10]!==u||b[11]!==w||b[12]!==g||b[13]!==j||b[14]!==o||b[15]!==p||b[16]!==q?(a=k.jsx(c("FocusWithinHandler.react"),{children:function(a,b){return k.jsxs("div",{className:"x1ypdohk x1rg5ohu xhsvlbd xyamay9 x1icxu4v x10b6aqq x25sj25 x1n2onr6",onMouseEnter:g,onMouseLeave:j,children:[e!=null&&e.shouldDisableVolumeControl?null:k.jsx("div",{className:"xk7dvq3 x9f619 x1o0tod x1yrsyyn x1icxu4v x10b6aqq x25sj25 x10l6tqk xh8yej3",children:q({focusVisible:b,onVisibilityChange:v})}),k.jsx(c("VideoPlayerControlIcon.react"),{icon:t,label:w,onPress:function(){e&&e.onVolumeControlPress(),e!=null&&e.shouldDisableVolumeControl||o(!f,"user_initiated"),p&&p({name:"video_mute_button",type:"happened"})},tooltip:e!=null?e.tooltipContent:null,tooltipAlign:"end",tooltipImpl:e!=null?e.tooltipImpl:null,tooltipOffsetY:u?-80:0})]})}}),b[7]=e,b[8]=t,b[9]=f,b[10]=u,b[11]=w,b[12]=g,b[13]=j,b[14]=o,b[15]=p,b[16]=q,b[17]=a):a=b[17];return a}g["default"]=a}),226);
__d("VideoPlayerVolumeSliderBase.react",["fbt","CometComponentWithKeyCommands.react","CometKeys","VideoPlayerPointerDrag","VideoPlayerSliderNub.react","VideoPlayerUserInteractionCounter","react","react-compiler-runtime","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));b=j;var l=b.useEffect;b.useMemo;var m=b.useRef,n=b.useState,o={root:{cursor:"x1ypdohk",height:"xng8ra",opacity:"xg01cxk",pointerEvents:"x47corl",position:"x1n2onr6",transitionDuration:"x1d8287x",transitionProperty:"x19991ni",transitionTimingFunction:"xl405pv",width:"x1td3qas",zIndex:"x1ja2u2z",$$css:!0},rootVisible:{opacity:"x1hc1fzr",pointerEvents:"x67bb7w",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(59),e=a.isHovering,f=a.isMuted,g=a.onChangeVolumeDown,j=a.onChangeVolumeUp,p=a.onSetMuted,q=a.onSetVolume,r=a.onUserInteraction,s=a.onVisibilityChange,t=a.volume;a=d("VideoPlayerPointerDrag").usePointerDragResizeObserver();var u=a.invalidateRootRect,v=a.rootRectRef;a=a.rootSizeRefCallback;var w=m(t),x=m(f),y=f?0:t,z=n(y),A=z[0],B=z[1];b[0]!==f||b[1]!==p||b[2]!==q||b[3]!==v?(z=function(a){a=d("VideoPlayerPointerDrag").computePointerOffsetRatio(a,v.current);if(!a)return;a=Math.max(0,Math.min(1,1-a.ratioY));B(a);q(a);f&&p(!1,"user_initiated")},b[0]=f,b[1]=p,b[2]=q,b[3]=v,b[4]=z):z=b[4];var C=z;b[5]!==p||b[6]!==q?(z=function(a){B(w.current),q(w.current),p(x.current,"user_initiated")},b[5]=p,b[6]=q,b[7]=z):z=b[7];var D,E;b[8]!==C?(D=function(a){C(a)},E=function(a){C(a)},b[8]=C,b[9]=D,b[10]=E):(D=b[9],E=b[10]);var F;b[11]!==u||b[12]!==f||b[13]!==C||b[14]!==t||b[15]!==y?(F=function(a){u(),w.current=t,x.current=f,B(y),C(a)},b[11]=u,b[12]=f,b[13]=C,b[14]=t,b[15]=y,b[16]=F):F=b[16];var G;b[17]!==z||b[18]!==D||b[19]!==E||b[20]!==F?(G={onDragCancel:z,onDragEnd:D,onDragMove:E,onDragStart:F},b[17]=z,b[18]=D,b[19]=E,b[20]=F,b[21]=G):G=b[21];z=d("VideoPlayerPointerDrag").usePointerDrag(G);D=z.isDragging;E=z.rootProps;F=D?A:y;var H=e||D,I=m(H);b[22]!==H||b[23]!==s?(G=function(){I.current!==H&&(s&&s(H)),I.current=H},z=[s,H],b[22]=H,b[23]=s,b[24]=G,b[25]=z):(G=b[24],z=b[25]);l(G,z);A=H;d("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteraction("video_volume_slider",A,r);b[26]===Symbol["for"]("react.memo_cache_sentinel")?(e={key:c("CometKeys").UP},D=h._(/*BTDS*/"Increase volume"),b[26]=e,b[27]=D):(e=b[26],D=b[27]);b[28]!==j?(G={command:e,description:D,handler:function(){j()}},b[28]=j,b[29]=G):G=b[29];b[30]===Symbol["for"]("react.memo_cache_sentinel")?(z={key:c("CometKeys").DOWN},A=h._(/*BTDS*/"Decrease volume"),b[30]=z,b[31]=A):(z=b[30],A=b[31]);b[32]!==g?(r={command:z,description:A,handler:function(){g()}},b[32]=g,b[33]=r):r=b[33];b[34]!==G||b[35]!==r?(e=[G,r],b[34]=G,b[35]=r,b[36]=e):e=b[36];D=e;z=D;b[37]===Symbol["for"]("react.memo_cache_sentinel")?(A=h._(/*BTDS*/"Change volume"),b[37]=A):A=b[37];G=H&&o.rootVisible;b[38]!==G?(r=(i||(i=c("stylex")))(o.root,G),b[38]=G,b[39]=r):r=b[39];b[40]===Symbol["for"]("react.memo_cache_sentinel")?(e={className:"x18fn2jl xjwep3j x1t39747 x1wcsgtt x1pczhz8 x1ey2m1c xng8ra xi5uv41 x10l6tqk x1xc55vz"},D="x1spa7qu xjwep3j x1t39747 x1wcsgtt x1pczhz8 x1ey2m1c x10l6tqk xh8yej3",b[40]=e,b[41]=D):(e=b[40],D=b[41]);G=F*100+"%";b[42]!==G?(F={height:G},b[42]=G,b[43]=F):F=b[43];b[44]===Symbol["for"]("react.memo_cache_sentinel")?(G={className:"x1c7jfne x1f4buv5 x1n2onr6"},b[44]=G):G=b[44];b[45]!==H?(G=k.jsx("div",babelHelpers["extends"]({},G,{children:k.jsx(c("VideoPlayerSliderNub.react"),{isVisible:H})})),b[45]=H,b[46]=G):G=b[46];b[47]!==F||b[48]!==G?(e=k.jsx("div",babelHelpers["extends"]({},e,{children:k.jsx("div",{className:D,style:F,children:G})})),b[47]=F,b[48]=G,b[49]=e):e=b[49];b[50]!==E||b[51]!==a||b[52]!==r||b[53]!==e||b[54]!==t?(D=k.jsx("div",babelHelpers["extends"]({},E,{"aria-label":A,"aria-orientation":"vertical","aria-valuemax":1,"aria-valuemin":0,"aria-valuenow":t,className:r,ref:a,role:"slider",tabIndex:0,children:e})),b[50]=E,b[51]=a,b[52]=r,b[53]=e,b[54]=t,b[55]=D):D=b[55];b[56]!==z||b[57]!==D?(F=k.jsx(c("CometComponentWithKeyCommands.react"),{commandConfigs:z,children:D}),b[56]=z,b[57]=D,b[58]=F):F=b[58];return F}g["default"]=a}),226);
__d("VideoPlayerVolumeSlider.react",["VideoPlayerHooks","VideoPlayerVolumeSliderBase.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));h.useCallback;function a(a){var b=d("react-compiler-runtime").c(20),e=a.isHovering,f=a.onUserInteraction;a=a.onVisibilityChange;var g=(i||(i=d("VideoPlayerHooks"))).useController(),h=i.useMuted(),k=i.useVolume(),l;b[0]!==g?(l=function(a){g.setVolume(a)},b[0]=g,b[1]=l):l=b[1];l=l;var m;b[2]!==g?(m=function(a,b){g.setMuted(a,b)},b[2]=g,b[3]=m):m=b[3];m=m;var n;b[4]!==g?(n=function(a){var b=g.getCurrentState();a=Math.max(0,Math.min(1,b.volume+a));g.setVolume(a);a===0?g.setMuted(!0,"user_initiated"):b.muted&&g.setMuted(!1,"user_initiated")},b[4]=g,b[5]=n):n=b[5];var o=n;b[6]!==o?(n=function(){o(.05)},b[6]=o,b[7]=n):n=b[7];n=n;var p;b[8]!==o?(p=function(){o(-.05)},b[8]=o,b[9]=p):p=b[9];p=p;var q;b[10]!==p||b[11]!==n||b[12]!==e||b[13]!==h||b[14]!==f||b[15]!==a||b[16]!==m||b[17]!==l||b[18]!==k?(q=j.jsx(c("VideoPlayerVolumeSliderBase.react"),{isHovering:e,isMuted:h,onChangeVolumeDown:p,onChangeVolumeUp:n,onSetMuted:m,onSetVolume:l,onUserInteraction:f,onVisibilityChange:a,volume:k}),b[10]=p,b[11]=n,b[12]=e,b[13]=h,b[14]=f,b[15]=a,b[16]=m,b[17]=l,b[18]=k,b[19]=q):q=b[19];return q}g["default"]=a}),98);
__d("VideoPlayerVolumeControl.react",["VideoPlayerHooks","VideoPlayerVolumeControlBase.react","VideoPlayerVolumeSlider.react","cr:1826284","react","react-compiler-runtime","useEmptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));e=h;e.useCallback;var k=e.useState,l=(f=b("cr:1826284"))!=null?f:c("useEmptyFunction");function a(a){var b=d("react-compiler-runtime").c(15),e=a.onUserInteraction;a=a.useOutlineIcons;a=a===void 0?!1:a;var f=k(!1),g=f[0],h=f[1],m=(i||(i=d("VideoPlayerHooks"))).useController();f=i.useMuted();var n=i.useVolume(),o;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(o=function(){h(!0)},b[0]=o):o=b[0];o=o;var p;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(p=function(){h(!1)},b[1]=p):p=b[1];p=p;var q;b[2]!==m?(q=function(a,b){m.setMuted(a,b)},b[2]=m,b[3]=q):q=b[3];q=q;var r=!f&&n>0;r=l({canPlayerProduceSound:r,isHovering:g})||null;var s;b[4]!==g||b[5]!==e?(s=function(a){var b=a.focusVisible;a=a.onVisibilityChange;return j.jsx(c("VideoPlayerVolumeSlider.react"),{isHovering:g||b,onUserInteraction:e,onVisibilityChange:a})},b[4]=g,b[5]=e,b[6]=s):s=b[6];b[7]!==r||b[8]!==f||b[9]!==e||b[10]!==q||b[11]!==s||b[12]!==a||b[13]!==n?(o=j.jsx(c("VideoPlayerVolumeControlBase.react"),{audioAvailabilityUI:r,isMuted:f,onMouseEnter:o,onMouseLeave:p,onSetMuted:q,onUserInteraction:e,renderVolumeSlider:s,useOutlineIcons:a,volume:n}),b[7]=r,b[8]=f,b[9]=e,b[10]=q,b[11]=s,b[12]=a,b[13]=n,b[14]=o):o=b[14];return o}g["default"]=a}),98);
__d("useAudioAvailabilityAtPlayhead",["VideoPlayerAudioAvailabilityInfo","VideoPlayerHooks","react-compiler-runtime","useVideoPlayerControllerSubscription"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("react-compiler-runtime").c(2),b=(h||(h=d("VideoPlayerHooks"))).useAudioAvailabilityInfo(),e;a[0]!==b?(e=function(a,c){a=a.getPlayheadPosition();a=d("VideoPlayerAudioAvailabilityInfo").makeVideoPlayerAudioAvailabilityAtPlayheadInfo(b,{playheadPosition:a});return c!=null&&c.isPlayheadWithinMutedSegment===a.isPlayheadWithinMutedSegment&&c.isSilentAtPlayhead===a.isSilentAtPlayhead&&c.volumeControlState===a.volumeControlState?c:a},a[0]=b,a[1]=e):e=a[1];a=e;return c("useVideoPlayerControllerSubscription")(a)}g["default"]=a}),98);
__d("useParentRoute",["CometRouterParentRouteContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(){return i(c("CometRouterParentRouteContext"))}g["default"]=a}),98);
__d("usePlayerOriginRouteTracePolicy",["CometNotificationsRootContext","CometRouteRenderType","react","useCometRouteTracePolicy","useCometRouterState","useParentRoute","useRoutePassthroughProps"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(){var a=i(c("CometNotificationsRootContext"));a=a.isNotificationsRoute;var b=c("useCometRouteTracePolicy")(),e=d("CometRouteRenderType").useIsPushView(),f=c("useParentRoute")(),g=c("useCometRouterState")(),h=c("useRoutePassthroughProps")();if((h==null?void 0:h.isARLTW)===!0)return"comet.watch.arltw";h=b==="comet.videos.tahoe";var j=b==="comet.stories.viewer",k=b==="comet.reels.home"||b==="comet.reels.unified.player";if(e){if(h)return"unknown";if(j)return b;if(k&&(f==null?void 0:f.tracePolicy)==null&&g!=null){e=g.main;j=g.pushViewStack;k=j&&j.length>1?j[j.length-2]:e;g=k.route;return(j=g.tracePolicy)!=null?j:b}}return a&&!h?b:(e=f==null?void 0:f.tracePolicy)!=null?e:b}g["default"]=a}),98);
__d("useVideoPlayerHasStartedPlayingAtLeastOnce",["VideoPlayerHooks","createVideoStateHook","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useEffect;b=d("createVideoStateHook").createVideoStateHook(null);var k=b.stateHook;function a(){var a=d("react-compiler-runtime").c(4),b=k(!1),c=b[0],e=b[1],f=(i||(i=d("VideoPlayerHooks"))).usePlaying(),g;a[0]!==f||a[1]!==e?(b=function(){f&&e(!0)},g=[f,e],a[0]=f,a[1]=e,a[2]=b,a[3]=g):(b=a[2],g=a[3]);j(b,g);return c}g["default"]=a}),98);
__d("useVideoPlayerBigPlayButtonOverlay",["VideoPlayerHooks","VideoPlayerPlayButton.react","VideoPlayerSmallPlayButton.react","react","react-compiler-runtime","useVideoPlayerHasStartedPlayingAtLeastOnce"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));h.useCallback;function a(a){var b=d("react-compiler-runtime").c(13),e;b[0]!==a?(e=a===void 0?{}:a,b[0]=a,b[1]=e):e=b[1];a=e;e=a.buttonSize;var f=a.forceVisible,g=a.overrideInteraction,h=a.shouldUnmute;a=e===void 0?"large":e;e=c("useVideoPlayerHasStartedPlayingAtLeastOnce")();var k=(i||(i=d("VideoPlayerHooks"))).usePaused(),l=i.useLastMuteReason(),m=i.useController(),n;b[2]!==m||b[3]!==l||b[4]!==h?(n=function(){m.play("user_initiated"),h===!0&&l!=="user_initiated"&&m.setMuted(!1,"product_initiated")},b[2]=m,b[3]=l,b[4]=h,b[5]=n):n=b[5];n=n;g=g!=null?g.handler:n;n=f===!0||f===!1?f:!e&&k;b[6]!==n||b[7]!==a||b[8]!==g?(f=a==="small"?j.jsx(c("VideoPlayerSmallPlayButton.react"),{isVisible:n,onClick:g}):j.jsx(c("VideoPlayerPlayButton.react"),{isVisible:n,onClick:g}),b[6]=n,b[7]=a,b[8]=g,b[9]=f):f=b[9];e=f;b[10]!==e||b[11]!==n?(k={bigPlayButtonElement:e,bigPlayButtonIsVisible:n},b[10]=e,b[11]=n,b[12]=k):k=b[12];return k}g["default"]=a}),98);
__d("useVideoPlayerVolumeControlAudioAvailabilityUI",["fbt","CometTooltipImpl.react","VideoPlayerControlsHiddenContext","clearTimeout","emptyFunction","react","setTimeout","useAudioAvailabilityAtPlayhead","usePrevious","useStable"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useContext,l=b.useEffect,m=b.useRef,n=b.useState,o=3e3;function a(a){var b=a.canPlayerProduceSound,d=a.isHovering;a=c("useAudioAvailabilityAtPlayhead")();var e=a.isSilentAtPlayhead;a=a.volumeControlState;var g=null;switch(a){case"VOLUME_SILENT":g=h._(/*BTDS*/"Video has no sound");break;case"VOLUME_COPYRIGHT_FULL":g=h._(/*BTDS*/"Muted due to copyright claim");break;case"VOLUME_COPYRIGHT_PARTIAL_SILENCED":g=h._(/*BTDS*/"Partially muted due to copyright claim");break;case"VOLUME_COPYRIGHT_PARTIAL_NOT_SILENCED":break;case"VOLUME_DEFAULT":break;default:a}var i=c("usePrevious")(e),p=n(!1),q=p[0],r=p[1],s=m(c("emptyFunction")),t=m(!1);p=n(!1);var u=p[0],v=p[1],w=c("useStable")(function(){return function(a){t.current=a,v(a),s.current(a),a||r(!1)}}),x=k(c("VideoPlayerControlsHiddenContext"));l(function(){x?w(!1):g==null?w(!1):d||q?w(!0):e!==i&&e&&b&&w(!0)},[g,b,x,d,q,e,i,w]);l(function(){if(u){var a=c("setTimeout")(function(){w(!1)},o);return function(){c("clearTimeout")(a)}}},[u,w]);p=c("useStable")(function(){return function(){r(function(a){return!a})}});var y=c("useStable")(function(){function a(a){var b=n(!1),d=b[0],e=b[1];l(function(){s.current=e;return function(){s.current=c("emptyFunction")}},[e]);l(function(){a.isVisible||w(!1)},[a.isVisible]);return j.jsx(c("CometTooltipImpl.react"),babelHelpers["extends"]({},a,{isVisible:d}))}a.displayName=a.name+" [from "+f.id+"]";return a}),z=a==="VOLUME_COPYRIGHT_FULL"||a==="VOLUME_SILENT",A=b?e:z;return g==null?null:{onVolumeControlPress:p,shouldDisableVolumeControl:z,shouldShowNullIcon:A,tooltipContent:g,tooltipImpl:y,volumeControlState:a}}g["default"]=a}),226);/*FB_PKG_DELIM*/
__d("EBAPI",["MAWEBCombinedSwitch","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=(a=c("requireDeferred"))("EBAPIMinosVerifySingleEpoch").__setRef("EBAPI"),i=a("EBAPIWriteMinosPublicKeysForRecipient").__setRef("EBAPI"),j=a("EBGetContactEpochHead").__setRef("EBAPI"),k=a("EBGetMessageKeys").__setRef("EBAPI"),l=a("EBIsEbEnabled").__setRef("EBAPI"),m=a("EBMessageBulkPointQuery").__setRef("EBAPI"),n=a("EBMessageRangeQueryForIndexing").__setRef("EBAPI"),o=a("EBMinosWriteKeyChangeAdminMessage").__setRef("EBAPI"),p=a("EBMinosWriteSecureStorageAlert").__setRef("EBAPI"),q=a("EBUploadDeletedMessage").__setRef("EBAPI"),r=a("EBUploadReceivedMessages").__setRef("EBAPI"),s=a("EBUploadReceivedMessagesProtobufOnly").__setRef("EBAPI"),t=a("EBUploadSentMessage").__setRef("EBAPI");b={getContactEpochHead:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return j.load().then(function(a){return a.getContactEpochHead.apply(a,b)})},getMessageKeys:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return k.load().then(function(a){return a.getMessageKeys.apply(a,b)})},isEBEnabled:function(){return d("MAWEBCombinedSwitch").MAWEBCombinedSwitch.isEnabled()},isEbEnabledEbSwitch:function(){return l.load().then(function(a){return a.isEbEnabledEbSwitch()})},messageBulkPointQuery:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return m.load().then(function(a){return a.messageBulkPointQuery.apply(a,b)})},messageRangeQueryForIndexing:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return n.load().then(function(a){return a.messageRangeQueryForIndexing.apply(a,b)})},minosVerifySingleEpoch:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return h.load().then(function(a){return a.minosVerifySingleEpoch.apply(a,b)})},uploadDeletedMessage:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return q.load().then(function(a){return a.uploadDeletedMessage.apply(a,b)})},uploadReceivedMessages:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return r.load().then(function(a){return a.uploadReceivedMessages.apply(a,b)})},uploadReceivedMessagesProtobufOnly:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return s.load().then(function(a){return a.uploadReceivedMessagesProtobufOnly.apply(a,b)})},uploadSentMessage:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return t.load().then(function(a){return a.uploadSentMessage.apply(a,b)})},writeMinosKeyChangeAdminMessage:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return o.load().then(function(a){return a.writeMinosKeyChangeAdminMessage.apply(a,b)})},writeMinosMailboxKeysForRecipientAPI:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return i.load().then(function(a){return a.writeMinosMailboxKeysForRecipientAPI.apply(a,b)})},writeMinosSecureStorageAlert:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return p.load().then(function(a){return a.writeMinosSecureStorageAlert.apply(a,b)})}};e=b;g["default"]=e}),98);
__d("EBAPIQPLPoints",["QPLUserFlow"],(function(a,b,c,d,e,f,g){"use strict";e={CREATE_WORKER_NETWORK_EXECUTE_END:"create_worker_network_execute_end",CREATE_WORKER_NETWORK_EXECUTE_START:"create_worker_network_execute_start",GRAPHQL_QUERY_END:"graphql_query_end",GRAPHQL_QUERY_START:"graphql_query_start"};f={CLIENT_STATE_RETRIEVED:"client_state_retrieved",EB_NOT_ENABLED:"eb_not_enabled",EBLS_NOT_INITIALIZED:"ebls_not_initialized",EMPTY_DECRYPTION_RESPONSE:"empty_decryption_response",INVALID_CLIENT_STATE:"invalid_client_state",INVALID_GRAPHQL_RESPONSE:"invalid_graphql_response",INVALID_PARAMETERS:"invalid_parameters",LSDB_SINGLETON_RETRIEVED:"lsdb_singleton_retrieved",NO_CLIENT_STATE:"no_client_state",NULL_CHAT_JID:"null_chat_jid",RUNTIME_ERROR:"runtime_error",UNSUPPORTED_CONTEXT:"unsupported_context"};var h=babelHelpers["extends"]({},e),i=babelHelpers["extends"]({},e,f,{BACKUP_ID_NULL:"backup_id_null",BATCH_RESTORE_AND_DECRYPT_FAILURE:"batch_restore_and_decrypt_failure",DECRYPT_MESSAGES_ECHO_AND_PROTOBUF_END:"decrypt_messages_echo_and_protobuf_end",DECRYPT_MESSAGES_ECHO_AND_PROTOBUF_START:"decrypt_messages_echo_and_protobuf_start",DECRYPT_MESSAGES_ECHO_END:"decrypt_messages_echo_end",DECRYPT_MESSAGES_ECHO_START:"decrypt_messages_echo_start",DECRYPT_MESSAGES_MINOS_PROTOBUF_END:"decrypt_messages_minos_protobuf_end",DECRYPT_MESSAGES_MINOS_PROTOBUF_START:"decrypt_messages_minos_protobuf_start",DECRYPT_MESSAGES_PROTOBUF_END:"decrypt_messages_protobuf_end",DECRYPT_MESSAGES_PROTOBUF_START:"decrypt_messages_protobuf_start",DECRYPTED_PROTOBUFS_NULL:"decrypted_protobufs_null",DELETE_MAILBOX:"delete_mailbox",DERIVE_AND_STORE_EPOCHS_END:"derive_and_store_epochs_end",DERIVE_AND_STORE_EPOCHS_START:"derive_and_store_epochs_start",ECHO_DECODE_END:"echo_decode_end",ECHO_DECODE_START:"echo_decode_start",ECHO_DECRYPTION_FAILURE:"echo_decryption_failure",ECHO_TO_PROTOBUF_CONVERSION_END:"echo_to_protobuf_conversion_end",ECHO_TO_PROTOBUF_CONVERSION_FAILURE:"echo_to_protobuf_conversion_failure",ECHO_TO_PROTOBUF_CONVERSION_START:"echo_to_protobuf_conversion_start",GRAPHQL_QUERY_EXCEPTION:"graphql_query_exception",MISSING_RANGE_INFO:"missing_range_info",NO_MESSAGES_TO_RESTORE:"no_messages_to_restore",NULL_MESSAGES:"null_messages",PROCESS_AND_DECRYPT_MESSAGES_END:"process_and_decrypt_messages_end",PROCESS_AND_DECRYPT_MESSAGES_FAILURE:"process_and_decrypt_messages_failure",PROCESS_AND_DECRYPT_MESSAGES_START:"process_and_decrypt_messages_start",PROTOBUF_DECRYPTION_FAILURE:"protobuf_decryption_failure",RESTORING_MIXED_ECHO_PROTOBUF_PAYLOAD:"restoring_mixed_echo_protobuf_payload",SERVER_SIDE_EXCEPTION:"server_side_exception",THREAD_NOT_FOUND_ON_SERVER:"thread_not_found_on_server"}),j={ADDED_ATTACHMENT_CONTEXT:"added_attachment_context",ADDED_ATTACHMENT_CONTEXT_LEGACY:"added_attachment_context_legacy",DEQUEUE:"added_to_queue_end",ENQUEUE:"added_to_queue_start",ENQUEUE_FAILURE:"enqueue_failure",GENERATE_BACKUP_DIRECTIVE_END:"generate_backup_directive_end",GENERATE_BACKUP_DIRECTIVE_START:"generate_backup_directive_start",GENERATE_REPORTING_META_END:"generate_reporting_meta_end",GENERATE_REPORTING_META_START:"generate_reporting_meta_start",GET_ATTACHMENT_CONTEXT_END:"get_attachment_context_end",GET_ATTACHMENT_CONTEXT_START:"get_attachment_context_start",MESSAGE_RESULT_FAILURE_OR_NULL:"message_result_failure_or_null",NO_INCOMING_MESSAGES:"no_incoming_messages",NO_PROCESSED_MESSAGES:"no_processed_messages",PROCESSED_MESSAGES:"processed_messages",RUNTIME_ERROR:"runtime_error",SUCCESSFULLY_PROCESSED_MESSAGE:"successfully_processed_message",UKNOWN_MESSAGE_VERSION_OR_PROTOCOL:"unknown_message_version_or_protocol",UNABLE_TO_CREATE_BACKUP_DIRECTIVE:"unable_to_create_backup_directive",UNKNOWN_MESSAGE_TYPE:"unknown_message_type",UNSUPPORTED_MESSAGE_TYPE:"unsupported_message_type",UPLOAD_DELETED_MESSAGE:"upload_deleted_message",UPLOAD_PAYLOAD_CREATED:"upload_payload_creation_success",UPLOAD_PAYLOAD_CREATION_FAILURE:"upload_payload_creation_failure",UPLOAD_PAYLOAD_CREATION_START:"upload_payload_creation_start"},k={ADD_DEVICE_CHECK_RC_STATUS:"add_device_check_rc_status",ADD_DEVICE_COULD_NOT_FIND_BACKUP:"add_device_could_not_find_backup",ADD_DEVICE_FAILED_DEVICE_REGISTRATION_ID_NULL:"add_device_failed_device_registration_id_null",ADD_DEVICE_FAILED_TO_GET_RC_STATUS:"add_device_failed_to_get_rc_status",ADD_DEVICE_FAILURE_BACKUP_NOT_FOUND:"add_device_failure_backup_not_found",ADD_DEVICE_OPTIMISTIC_STATUS:"add_device_optimistic_status",ADD_DEVICE_RUNTIME_ERROR:"add_device_runtime_error",ADD_DEVICE_SPROC_END:"add_device_sproc_end",ADD_DEVICE_SPROC_FAILURE:"add_device_sproc_failure",ADD_DEVICE_SPROC_START:"add_device_sproc_start",ADD_DEVICE_SUBSCRIPTION_END:"add_device_subscription_end",ADD_DEVICE_SUBSCRIPTION_START:"add_device_subscription_start",ADD_DEVICE_TASK_END:"add_device_task_end",ADD_DEVICE_TASK_START:"add_device_task_start",ADD_DEVICE_TIMEOUT:"add_device_timeout",INVALID_RECOVERY_CODE:"invalid_recovery_code",ON_START_BEGIN:"on_start_start",ON_START_SUCCESS:"on_start_end"},l={ADD_DEVICE_FETCH_VD_GRAPHQL_END:"add_device_fetch_vd_graphql_end",ADD_DEVICE_FETCH_VD_GRAPHQL_FAIL:"add_device_fetch_vd_graphql_fail",ADD_DEVICE_FETCH_VD_GRAPHQL_START:"add_device_fetch_vd_graphql_start",ADD_DEVICE_GQL_END:"add_device_gql_end",ADD_DEVICE_GQL_FAIL:"add_device_gql_fail",ADD_DEVICE_GQL_START:"add_device_gql_start",ADD_DEVICE_MISSING_GRAPHQL_FIELDS:"add_device_missing_graphql_fields",ADD_DEVICE_PARSE_RECOVERY_CODE_END:"add_device_parse_recovery_code_end",ADD_DEVICE_PARSE_RECOVERY_CODE_FAIL:"add_device_parse_recovery_code_fail",ADD_DEVICE_PARSE_RECOVERY_CODE_START:"add_device_parse_recovery_code_start",ADD_DEVICE_VIRTUAL_DEVICE_EXISTS:"add_device_virtual_device_exists",ADD_DEVICE_VIRTUAL_DEVICE_KEY_SPROC_END:"add_device_vd_key_sproc_end",ADD_DEVICE_VIRTUAL_DEVICE_KEY_SPROC_FAIL:"add_device_vd_key_sproc_fail",ADD_DEVICE_VIRTUAL_DEVICE_KEY_SPROC_START:"add_device_vd_key_sproc_start"},m={FETCH_BACKUP_IDS_END:"fetch_backup_ids_end",FETCH_BACKUP_IDS_START:"fetch_backup_ids_start",INITIALIZE_BACKUP_END:"initialize_backup_end",INITIALIZE_BACKUP_SPROC_END:"initialize_backup_sproc_end",INITIALIZE_BACKUP_SPROC_FAIL:"initialize_backup_sproc_fail",INITIALIZE_BACKUP_SPROC_START:"initialize_backup_sproc_start",INITIALIZE_BACKUP_START:"initialize_backup_start",OPTIMISTIC_CLIENT_STATE:"optimistic_client_state"},n={DELETE_EB_NON_DELETE_OPERATION:"delete_eb_non_delete_operation",DELETE_EB_NON_PUT_OPERATION:"delete_eb_non_put_operation",DELETE_EB_SPROC_FAIL:"delete_eb_sproc_fail",DELETE_EB_SPROC_START:"delete_eb_sproc_start",DELETE_EB_SPROC_SUCCESS:"delete_eb_sproc_success",DELETE_EB_TASK_FAIL:"delete_eb_task_fail",DELETE_EB_TASK_START:"delete_eb_task_start",DELETE_EB_TASK_SUCCESS:"delete_eb_task_success",FETCH_BACKUP_IDS_END:"fetch_backup_ids_end",FETCH_BACKUP_IDS_START:"fetch_backup_ids_start"},o={FETCH_BACKUP_IDS_END:"fetch_backup_ids_end",FETCH_BACKUP_IDS_START:"fetch_backup_ids_start",OPT_OUT_BACKUP_ROW_EXISTS:"opt_out_backup_row_exists",OPT_OUT_BACKUP_ROW_NULL:"opt_out_backup_row_null",OPT_OUT_BACKUP_SPROC_END:"opt_out_backup_sproc_end",OPT_OUT_BACKUP_SPROC_FAIL:"opt_out_backup_sproc_fail",OPT_OUT_BACKUP_SPROC_START:"opt_out_backup_sproc_start",OPT_OUT_BACKUP_TASK_END:"opt_out_backup_task_end",OPT_OUT_BACKUP_TASK_FAIL:"opt_out_backup_task_fail",OPT_OUT_BACKUP_TASK_START:"opt_out_backup_task_start"};function a(a,b,d,e,f){c("QPLUserFlow").addPoint(b,d,{data:babelHelpers["extends"]({},e,{bool:{runningInWorker:a}}),instanceKey:f})}function b(a,b,d,e,f){c("QPLUserFlow").endFailure(b,d,{annotations:babelHelpers["extends"]({},f,{bool:{runningInWorker:a}}),instanceKey:e})}function d(a,b,d,e){c("QPLUserFlow").endSuccess(b,{annotations:babelHelpers["extends"]({},e,{bool:{runningInWorker:a}}),instanceKey:d})}g.EBAPIQPLCommonPoints=e;g.EBAPIQPLCommonErrorPoints=f;g.EBMessageMetadataQPLPoints=h;g.EBMessageRestoreQueryQPLPoints=i;g.EBUploadQueueQPLPoints=j;g.EBAddDeviceQPLPoints=k;g.EBAddDeviceGraphqlQPLPoints=l;g.EBBackupInitQPLPoints=m;g.EBDeleteEBQPLPoints=n;g.EBOptOutQPLPoints=o;g.ebAPIAddQPLPoint=a;g.ebAPIEndFailure=b;g.ebAPIEndSuccess=d}),98);
__d("createWorkerMutation",["FBLogger","WorkerRelayNetwork","executeGraphQLQuery","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=d("relay-runtime").getRequest(a);if(b.params.operationKind!=="mutation")throw c("FBLogger")("messenger_web").mustfixThrow("createWorkerMutation: Expected mutation operation");var e=d("WorkerRelayNetwork").getWorkerNetworkExecute();b=async function(b){var c=await e;return d("executeGraphQLQuery").executeGraphQLQuery(c,a,b).then(function(a){return a.toPromise()}).then(function(a){if(Array.isArray(a)){return(a=a[0])==null?void 0:a.data}else return null})};return[b]}g.default=a}),98);
__d("WorkerRelay",["WorkerRelayNetwork","createWorkerMutation","createWorkerQuery","executeGraphQLQuery","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";f.exports={createWorkerMutation:c("createWorkerMutation"),createWorkerQuery:c("createWorkerQuery"),executeGraphQLQuery:d("executeGraphQLQuery").executeGraphQLQuery,getWorkerRelayEnvironment:d("WorkerRelayNetwork").getWorkerNetworkExecute,graphql:d("relay-runtime").graphql}}),34);
__d("EBMessageMetadataQueryQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9456956994433373"}),null);
__d("EBMessageMetadataQueryQuery.graphql",["EBMessageMetadataQueryQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"data"}],c={alias:null,args:null,concreteType:"XFBEncryptedBackupMailbox",kind:"LinkedField",name:"mailbox",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"data",variableName:"data"}],concreteType:"XFBTDeanonMessagesResponse",kind:"LinkedField",name:"deanon_messages_metadata",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"offline_threading_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sort_order_ms",storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"EBMessageMetadataQueryQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[c],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"EBMessageMetadataQueryQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[c,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("EBMessageMetadataQueryQuery_facebookRelayOperation"),metadata:{},name:"EBMessageMetadataQueryQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("XFBLSEncryptedBackupsMessagesRangeQueryDirection.facebook",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["AFTER","BEFORE"]);c=a;f["default"]=c}),66);
__d("EBMessageMetadataQuery",["EBAPIQPLPoints","EBAPIWorkerCheck","EBCreateGraphQLFetchFnUnified","EBMessageMetadataQueryQuery.graphql","EBMessageRangeQueryUtils","FBLogger","I64","LSDatabaseSingleton","QPLUserFlow","ReQL","WAHashStringToNumber","WAJids","WAResultOrError","XPlatRelayEnvironment","gkx","qpl","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=c("gkx")("10665"),l=h!==void 0?h:h=b("EBMessageMetadataQueryQuery.graphql"),m=new Map();async function n(a){if(m.has(a))return m.get(a);var b=await (i||(i=d("LSDatabaseSingleton"))).getLSDatabaseSingletonPromiseOrValue();b=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.tables.mi_act_mapping_table.index("jid")).getKeyRange((j||(j=d("I64"))).of_string(a)));if((b==null?void 0:b.serverThreadKey)!=null){m.set(a,(j||(j=d("I64"))).to_float(b.serverThreadKey));return j.to_float(b.serverThreadKey)}return}var o=0;async function a(a){var b=a.direction,e=a.fetchPolicy,f=a.includeAnonymizedMessages;f=f===void 0?!1:f;var g=a.instanceKey,h=a.networkCacheConfig,i=a.numberOfMessages,j=a.referenceTimestamp;j=j===void 0?null:j;a=a.threadId;if(d("EBAPIWorkerCheck").runningInWorker())return d("WAResultOrError").makeError("unsupported-context");if(!k&&!c("gkx")("16464"))return d("WAResultOrError").makeError("unsupported-mailbox");var m=g!=null?d("WAHashStringToNumber").hashStringToNumber(g):++o;try{var p;c("QPLUserFlow").start(c("qpl")._(521476771,"2454"),{annotations:{int:{number_of_messages:i}},instanceKey:m});var q=d("XPlatRelayEnvironment").getRelayEnvironment();b=b==="after"?"AFTER":"BEFORE";c("QPLUserFlow").addPoint(c("qpl")._(521476771,"2454"),d("EBAPIQPLPoints").EBMessageMetadataQPLPoints.GRAPHQL_QUERY_START,{instanceKey:m});var r=await n(a);q=await d("relay-runtime").fetchQuery(q,l,{data:{act_thread_id:a,direction:b,include_anonymized_messages:f,reference_timestamp:j==null?j:d("EBMessageRangeQueryUtils").safeTimestampMsNumber(j),requested_messages:i,server_thread_key:r}},{fetchPolicy:e!=null?e:void 0,networkCacheConfig:h!=null?h:void 0}).toPromise();c("QPLUserFlow").addPoint(c("qpl")._(521476771,"2454"),d("EBAPIQPLPoints").EBMessageMetadataQPLPoints.GRAPHQL_QUERY_END,{instanceKey:m});b=(a=q==null||(p=q.viewer)==null||(p=p.encrypted_backup)==null||(p=p.mailbox)==null?void 0:p.deanon_messages_metadata)!=null?a:[];f=b.map(function(a){var b=a.offline_threading_id;a=a.sort_order_ms;return{offlineThreadingId:b,sortOrderMs:a}});c("QPLUserFlow").endSuccess(c("qpl")._(521476771,"2454"),{instanceKey:m});return d("WAResultOrError").makeResult({instanceKey:g,messages:f})}catch(a){c("FBLogger")("wmi_eb").catching(a).mustfix("Error querying messaging metadata from EBMessageMetadataQuery");c("QPLUserFlow").endFailure(c("qpl")._(521476771,"2454"),"error",{error:a,instanceKey:m});return d("WAResultOrError").DEPRECATED_makeError("error",a)}}function e(a){var b=a.chatJid,e=a.direction,f=a.numberOfMessages;a=a.referenceTimestamp;return p({chatJid:b,direction:e,numberOfMessages:f,referenceTimestamp:a}).catch(function(a){c("FBLogger")("wmi_eb").catching(a).mustfix("Error querying messaging metadata from EBMessageMetadataQuery");return d("WAResultOrError").makeError("runtime-error")})}async function p(a){var b,e=a.chatJid,f=a.direction,g=a.numberOfMessages;a=a.referenceTimestamp;if(!k&&!c("gkx")("16464"))return d("WAResultOrError").makeError("unsupported-mailbox");e=d("WAJids").threadIdForChatJid(e);var h=await d("EBCreateGraphQLFetchFnUnified").createGraphQlFetchFnUnified();h=await h(l,{data:{act_thread_id:e,direction:q(f),include_anonymized_messages:!1,reference_timestamp:a==null?a:d("EBMessageRangeQueryUtils").safeTimestampMsNumber(a),requested_messages:g}});f=(e=h==null||(b=h.viewer)==null||(b=b.encrypted_backup)==null||(b=b.mailbox)==null||(b=b.deanon_messages_metadata)==null?void 0:b.map(function(a){var b=a.offline_threading_id;a=a.sort_order_ms;return{offlineThreadingId:b,sortOrderMs:a}}))!=null?e:[];return d("WAResultOrError").makeResult(f)}function q(a){switch(a){case"before":return"BEFORE";case"after":return"AFTER"}}g.messageMetadataQueryForMainThreadMAWDeanon=a;g.messageMetadataQuery=e}),98);
__d("EBSMDBAPI",["EBDB","EBSMProperties","FBLogger","gkx"],(function(a,b,c,d,e,f,g){"use strict";async function a(a){a=a.hasUserGivenAutoRestoreConsent;var b=a?["secure_encrypted_backups_epochs","secure_encrypted_backups_client_state"]:[];c("gkx")("5229")&&b.push("auto_restore_opt_out");var e=Array.from(c("EBSMProperties").persistedTables).filter(function(a){return!b.includes(a)});try{var f=a?[]:["device_state"];f=f.concat(e);if(f.length>0){a=await d("EBDB").getEBDB();await a.runInTransaction(f,"readwrite",function(a){return Promise.all(f.map(function(b){return a.stores[b].clear()}))},"EBDB - clear on logout")}}catch(a){c("FBLogger")("wmi_eb").mustfix(a)}}g.clearEBIDBNonPersistedRows=a}),98);
__d("EBWorkerODSEntityName.enum",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({MW_EBSM_HYDRATION:"mw_ebsm_hydration",MW_EBSM_IDB:"mw_eb_ebsm_idb",MW_EBSM_CORRUPTION:"mw_ebsm_corruption",MW_EBSM_RESTORE_PERSISTENCE_ERROR:"mw_ebsm_restore_persistence",MW_EBSM_IDB_TABLE_DELETION:"mw_ebsm_idb_table_deletion",MW_EB_AUTO_RESTORE_MAIN_THREAD:"mw_eb_auto_restore_main_thread",MW_EB_AUTO_RESTORE_WORKER:"mw_eb_auto_restore_worker",MW_EB_DEVICE_MIGRATION_WORKER:"mw_eb_device_migration_worker",MW_EB_OTC_MAIN_THREAD:"mw_eb_otc_main_thread",EB_WORKER_ADD_DEVICE_WITH_KEYS:"eb_worker_add_device_with_keys",EB_WORKER_ADD_DEVICE_WITH_RC:"eb_worker_add_device_with_rc",EB_WORKER_OPT_OUT:"eb_worker_opt_out"});c=a;f["default"]=c}),66);
__d("MAWBridgeTraceEvent",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["ReceivedReceipt","ReceivedSent","FlowEndForFailure","FlowEndForSuccess"]);c=a;f["default"]=c}),66);
__d("MAWEncryptedBackupsClearRecoveryCode",["Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return(h||(h=b("Promise"))).all([d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.secure_recovery_code_data)),d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.secure_encrypted_backups_recovery_code_status))]).then(function(c){var d=c[0],e=c[1];if(d!=null||e!=null)return a.runInTransaction(function(a){return(h||(h=b("Promise"))).all([(d==null?void 0:d.taskId)!=null?a.secure_recovery_code_data["delete"](d.taskId):(h||(h=b("Promise"))).resolve(),(e==null?void 0:e.pk)!=null?a.secure_encrypted_backups_recovery_code_status["delete"](e.pk):(h||(h=b("Promise"))).resolve()])},"readwrite",void 0,void 0,f.id+":27")})}g.encryptedBackupsClearRecoveryCode=a}),98);
__d("MAWMessageDropError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){function b(b){var c;c=a.call(this,b)||this;c.name="MAWMessageDropError";c.message=b;return c}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));f.MAWMessageDropError=a}),66);
__d("MAWMessageParseError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){function b(b){var c;c=a.call(this,b)||this;c.name="MAWMessageParseError";c.message=b;return c}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));f.MAWMessageParseError=a}),66);
__d("WAMessageKey",["WAGlobals","WAJids","WAStanzaUtils","err"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a===d("WAJids").AUTHOR_ME||a==d("WAGlobals").getMyUserJid()}function a(a,b,e){if(e==null)throw c("err")("messageKey is null");var f=e.id,g=e.remoteJid;if(f==null)throw c("err")("messageKey.id is null");else if(g==null)throw c("err")("messageKey.remoteJid is null");g=d("WAJids").interpretAndValidateJid(g);if(g.jidType==="unknown")throw c("err")("messageKey.remoteJid is invalid");var i,j=d("WAJids").AUTHOR_ME;if(g.jidType==="group"){i=g.groupJid;if(h(b)&&e.fromMe===!0)j=d("WAJids").AUTHOR_ME;else if(e.fromMe==!0)j=b;else{var k=e.participant;if(k==null)throw c("err")("key.participant is null");k=d("WAJids").interpretAndValidateJid(k);if(k.jidType==="msgrUser")j=k.userJid;else throw c("err")("key.participant is invalid")}}else if(g.jidType==="msgrUser"||g.jidType==="msgrDevice"){k=d("WAJids").interpretAndValidateJid(a);if(k.jidType!=="msgrUser")throw c("err")("expected user type jid.");i=k.userJid;h(b)?e.fromMe===!0?j=d("WAJids").AUTHOR_ME:j=k.userJid:e.fromMe===!0&&(j=k.userJid)}else throw c("err")("Unsupported jidtype type");return{chat:i,author:h(j)?d("WAJids").AUTHOR_ME:j,externalId:d("WAStanzaUtils").toStanzaId(f)}}g.extractProtocolMessageId=a}),98);
__d("WAParseConsumerMessagePollCreation",["WAGlobals","WAHex","WAMsgType"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){a={unstoredMsg:{type:d("WAMsgType").MSG_TYPE.FUTUREPROOF,msgContent:{protobuf:d("WAHex").bytesToBuffer(a),subtype:"pollCreationMessage"},id:b.id,ts:b.ts,sentTs:b.sentTs,serverTs:b.serverTs,ack:b.ack,reportingMeta:c},unstoredMedia:null,unstoredQuotedMedia:null};if(!e||!d("WAGlobals").getConfig().isPollsEnabled())return a;c=e.encKey;var f=e.options,g=e.name;e=e.selectableOptionsCount;var h=b.id,i=b.ts;b=b.ack;if(c==null||g==null||e==null)return a;a=f.map(function(a){return a.optionName}).filter(Boolean);return{unstoredMsg:{ack:b,id:h,ts:i,type:d("WAMsgType").MSG_TYPE.GROUP_POLL_CREATE},unstoredGroupPollCreateInfo:{encKey:c,name:g,selectableOptionsCount:e,options:a},unstoredMedia:null,unstoredQuotedMedia:null}}g["default"]=a}),98);
__d("WAParseConsumerMessagePollUpdate",["WAGlobals","WAMsgType"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){a=b.id;c=b.ts;b=b.ack;return e==null||!d("WAGlobals").getConfig().isPollsEnabled()?{unstoredMsg:null,unstoredMedia:null,unstoredQuotedMedia:null}:{unstoredMsg:{ack:b,id:a,ts:c,type:d("WAMsgType").MSG_TYPE.GROUP_POLL_UPDATE},unstoredGroupPollUpdateInfo:{pollUpdateMessage:e,type:d("WAMsgType").MSG_TYPE.GROUP_POLL_UPDATE},unstoredMedia:null,unstoredQuotedMedia:null}}g["default"]=a}),98);
__d("WAParseProtocolUtils",["WAGlobals","WALogger","WALongInt","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){b=i(b,a.serverTs);a=b==null?void 0:b.expirationTs;var c=b==null?void 0:b.deleteTs;b=b==null?void 0:b.ephemeralSetting;return{expirationTs:a,deleteTs:c,ephemeralSetting:b}}function b(a,b){b=j(b);b!=null&&(a.reportingMeta=b);return b}function i(a,b){var c,e,f=a==null||(c=a.chatEphemeralSetting)==null?void 0:c.ephemeralExpiration;a=a==null||(e=a.chatEphemeralSetting)==null?void 0:e.ephemeralSettingTimestamp;if(f==null||a==null||f===0||!d("WAGlobals").getConfig().isEphemeralMessagesEnabled())return null;b=d("WATimeUtils").castToUnixTime(b+d("WAGlobals").getDependencies().ephemeralMaxDeletionWindowForUnseenMessage());var g=b,h=null;try{a=d("WALongInt").numberOrThrowIfTooLarge(a)/1e3;h=d("WATimeUtils").castToUnixTime(a)}catch(a){return null}return{expirationTs:b,deleteTs:g,ephemeralSetting:{expirationTs:f,updatedTs:h}}}function j(a){a=a==null?void 0:a.frankingVersion;a!=null&&a!==0&&d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Unsupported franking version ",""])),a);return{frankingKey:void 0,frankingTag:void 0,frankingVersion:a,reportingContent:void 0,reportingTag:void 0}}g.parseEphemerality=a;g.enhanceReportingMeta=b}),98);
__d("WAParseConsumerMessageProtocol",["WACommon.pb","WAConsumerApplication.pb","WAGlobals","WAHex","WAJids","WALogger","WAMediaTransport.pb","WAMessageKey","WAMsgType","WAParseConsumerMessagePollCreation","WAParseConsumerMessagePollUpdate","WAParseMediaTransportProtocol","WAParseProtocolUtils","WAParseReadOnlyMetadataDataclassUtils","WAResultOrError","WAStanzaUtils","WATimeUtils","decodeProtobuf","err","maybeConvertMessageTextMentionsV2ToV1"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=90*d("WATimeUtils").DAY_SECONDS;b=1;e=0;f=1;f=d("WAGlobals").getConfig().armadilloWebProcessFutureproof()?f+1:f;function a(a,b,e,f,g,k){var l;b=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAConsumerApplication.pb").ConsumerApplicationSpec,b);l=(l=b.payload)==null||(l=l.applicationData)==null||(l=l.revoke)==null||(l=l.key)==null?void 0:l.id;if(l!=null)return{unstoredMsg:{type:d("WAMsgType").MSG_TYPE.REVOKED,id:e.id,ts:e.ts,sentTs:e.sentTs,serverTs:e.serverTs,ack:e.ack,reportingMeta:e.reportingMeta,revokedExternalId:d("WAStanzaUtils").toStanzaId(l),unsendMsgContentDeleteTs:null,msgContent:null,ebTimestampMs:k},unstoredMedia:null,unstoredQuotedMedia:null};var m=(g==null?void 0:g.isForwarded)||!1;l=d("WAParseProtocolUtils").parseEphemerality(e,g);var v=l.expirationTs,w=l.deleteTs,x=l.ephemeralSetting;if(x!=null&&(x.expirationTs<0||x.expirationTs>j)){l=d("WAJids").interpretAndValidateJid(a);l=l.jidType;var y=x.expirationTs;d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["WAParseConsumerMessageProtocol - ephemeralSetting duration is invalid ",", jidType: ",""])),y,l)}var z=d("WAParseProtocolUtils").enhanceReportingMeta(e,g),A=(y=o(g))!=null?y:void 0,B=(l=b.payload)==null?void 0:l.content;if(!B)return{unstoredMsg:null,unstoredMedia:null,unstoredQuotedMedia:null};var C=(y=b.metadata)==null?void 0:y.specialTextSize,D=t(B),E={contentTypeForLogging:D,unstoredMsg:{type:d("WAMsgType").MSG_TYPE.FUTUREPROOF,msgContent:{protobuf:d("WAHex").bytesToBuffer(f),subtype:null},id:e.id,ts:e.ts,sentTs:e.sentTs,serverTs:e.serverTs,ack:e.ack,reportingMeta:z},unstoredMedia:null,unstoredQuotedMedia:null},F=function(a){return babelHelpers["extends"]({},E,{unstoredMsg:babelHelpers["extends"]({},E.unstoredMsg,{msgContent:babelHelpers["extends"]({},E.unstoredMsg.msgContent,{subtype:a})})})};l=function(){try{switch(D){case"messageText":var b,h=B[D]&&c("maybeConvertMessageTextMentionsV2ToV1")(B[D]);if(h==null)throw c("err")("consumerMessage has no messageText");b=((b=h.commands)==null?void 0:b.some(function(a){return a.commandType===d("WACommon.pb").COMMAND_COMMAND_TYPE.AI}))===!0;if(b&&!d("WAGlobals").getConfig().isMetaAiInvocationMessageRenderEnabled())return F("metaAiMessage");if(d("WAParseReadOnlyMetadataDataclassUtils").isNoteMention(g))return F("noteMention");if(h.text==null)throw c("err")("consumerMessage has no messageText");return{unstoredMsg:babelHelpers["extends"]({type:d("WAMsgType").MSG_TYPE.TEXT,msgContent:{content:h.text,mentionedJids:h.mentionedJid.map(d("WAJids").validateUserJid).filter(Boolean),commands:h.commands},quote:A,expirationTs:v,deleteTs:w,ephemeralSetting:x,isForwarded:m},e,{specialTextSize:C,ebTimestampMs:k}),unstoredMedia:null,unstoredQuotedMedia:null};case"reactionMessage":return{unstoredMsg:n(a,e,B[D]),unstoredMedia:null,unstoredQuotedMedia:null};case"imageMessage":b=p(B,e.ts);return{unstoredMsg:babelHelpers["extends"]({type:d("WAMsgType").MSG_TYPE.IMAGE,quote:A,expirationTs:v,deleteTs:w,ephemeralSetting:x,isForwarded:m,mediaId:b.plaintextHash},e,{ebTimestampMs:k}),unstoredMedia:b,unstoredQuotedMedia:null};case"videoMessage":var j,l,o,t;h=B[D];if(h==null)throw c("err")("consumerMessage has no videoMessage");b=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAMediaTransport.pb").VideoTransportSpec,h==null||(j=h.video)==null?void 0:j.payload);var y=b==null||(l=b.integral)==null||(l=l.transport)==null||(l=l.ancillary)==null?void 0:l.mimetype;y=(b==null||(o=b.ancillary)==null?void 0:o.gifPlayback)===!0&&y==="image/gif";if(y&&!d("WAGlobals").getConfig().isGifEnabled())return E;b=d("WAParseMediaTransportProtocol").parseVideoMsg(b,e.ts,y);if(b==null)throw c("err")("consumerMessage has no video media info");if(d("WAParseReadOnlyMetadataDataclassUtils").isPowerUp(g)&&((t=h.caption)==null?void 0:t.text)!=null){return{unstoredMsg:babelHelpers["extends"]({type:d("WAMsgType").MSG_TYPE.TEXT,msgContent:{content:(t=h.caption)==null?void 0:t.text,mentionedJids:h.caption.mentionedJid.map(d("WAJids").validateUserJid).filter(Boolean)},quote:A,expirationTs:v,deleteTs:w,ephemeralSetting:x,isForwarded:m},e,{specialTextSize:C,ebTimestampMs:k}),unstoredMedia:null,unstoredQuotedMedia:null}}return{unstoredMsg:y?babelHelpers["extends"]({type:d("WAMsgType").MSG_TYPE.GIF},e,{quote:A,expirationTs:v,deleteTs:w,ephemeralSetting:x,isForwarded:m,reportingMeta:z,mediaId:b.plaintextHash}):babelHelpers["extends"]({type:d("WAMsgType").MSG_TYPE.VIDEO},e,{quote:A,expirationTs:v,deleteTs:w,ephemeralSetting:x,isForwarded:m,mediaId:b.plaintextHash}),unstoredMedia:b,unstoredQuotedMedia:null};case"audioMessage":t=q(B,e.ts);return{unstoredMsg:babelHelpers["extends"]({type:d("WAMsgType").MSG_TYPE.PTT,quote:A,expirationTs:v,deleteTs:w,ephemeralSetting:x,isForwarded:m,mediaId:t.plaintextHash},e,{ebTimestampMs:k}),unstoredMedia:t,unstoredQuotedMedia:null};case"stickerMessage":if(d("WAGlobals").getConfig().isStickerEnabled()){h=r(B);y=d("WAParseMediaTransportProtocol").parseStickerMsg(h,e.ts);b=((b=h.integral)==null?void 0:b.receiverFetchId)!=null||((t=h.ancillary)==null?void 0:t.receiverFetchId)!=null;t=d("WAGlobals").getConfig().isStickerReceiverFetchEnabled();if(y==null){if(b){if(t){b=d("WAParseMediaTransportProtocol").parseStickerReceiverFetchInfo(h);if(b==null)throw c("err")("consumerMessage has no sticker receiver fetch info");return{unstoredMsg:babelHelpers["extends"]({type:d("WAMsgType").MSG_TYPE.RECEIVER_FETCH,quote:A,expirationTs:v,deleteTs:w,ephemeralSetting:x,isForwarded:m,reportingMeta:z},e,{ebTimestampMs:k}),unstoredMedia:null,unstoredQuotedMedia:null,unstoredReceiverFetchInfo:b}}return F("stickerReceiverFetchMessage")}throw c("err")("consumerMessage has no sticker media info")}return{unstoredMsg:babelHelpers["extends"]({type:d("WAMsgType").MSG_TYPE.STICKER,quote:A,expirationTs:v,deleteTs:w,ephemeralSetting:x,isForwarded:m,reportingMeta:z,mediaId:y.plaintextHash},e,{ebTimestampMs:k}),unstoredMedia:y,unstoredQuotedMedia:null}}return E;case"documentMessage":if(d("WAGlobals").getConfig().isDocumentReceiveEnabled()){t=s(B,e.ts);return{unstoredMsg:babelHelpers["extends"]({type:d("WAMsgType").MSG_TYPE.DOCUMENT_FILE,quote:A,expirationTs:v,deleteTs:w,ephemeralSetting:x,isForwarded:m,reportingMeta:z,mediaId:t.plaintextHash},e,{ebTimestampMs:k}),unstoredMedia:t,unstoredQuotedMedia:null}}return E;case"groupInviteMessage":return{unstoredMsg:null,unstoredMedia:null,unstoredQuotedMedia:null,unstoredIncomingGroupInvite:u(e,B)};case"editMessage":var G;h=B[D];b=h==null?void 0:h.message;y=b==null?void 0:b.text;t=h==null||(G=h.key)==null?void 0:G.id;if(h==null||b==null||y==null)throw c("err")("consumerMessage with editMessage type has no editMessage");if(t==null)throw c("err")("consumerMessage with editMessage type has no original Msg External Id.");h=d("WAStanzaUtils").toStanzaId(t);return{unstoredEditMsg:{type:d("WAMsgType").MSG_TYPE.EDIT_ACTION,editMsgContent:{content:y,mentionedJids:b.mentionedJid.map(d("WAJids").validateUserJid).filter(Boolean),commands:b.commands},originalMsgExternalId:h,id:e.id,ts:e.ts,sentTs:e.sentTs,serverTs:e.serverTs,ack:e.ack,reportingMeta:z,specialTextSize:C},unstoredMsg:null,unstoredMedia:null,unstoredQuotedMedia:null};case"pollCreationMessage":return c("WAParseConsumerMessagePollCreation")(f,e,z,B[D]);case"pollUpdateMessage":return c("WAParseConsumerMessagePollUpdate")(f,e,z,B[D]);case"contactMessage":case"locationMessage":case"extendedTextMessage":case"statusTextMessage":case"contactsArrayMessage":case"liveLocationMessage":case"viewOnceMessage":default:return E}}catch(a){d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["parseConsumerMessageProtocol error :",""])),a);return{unstoredMsg:null,unstoredMedia:null,unstoredQuotedMedia:null}}}();return babelHelpers["extends"]({},l,{contentTypeForLogging:D})}function k(a){if(d("WAJids").isAuthorSystem(a))throw c("err")("Got system author");return a}var l=30;function m(a){if(a==null)return d("WAResultOrError").makeResult(null);return a.length>l?d("WAResultOrError").makeError("invalid-reaction-text-length"):d("WAResultOrError").makeResult(a)}function n(a,b,e){if(e==null)throw c("err")("consumerMessage has no reactionMessage");var f=k(b.id.author);a=d("WAMessageKey").extractProtocolMessageId(a,f,e.key);f=e.text;var g=e.groupingKey;e=e.senderTimestampMs;var h=m(f);if(!h.success)throw c("err")('"'+(f!=null?f:"")+'" is not a valid reaction ['+h.error+"]");return{type:d("WAMsgType").MSG_TYPE.REACTION,ack:b.ack,id:b.id,reactToExternalId:a.externalId,reactToAuthor:a.author,reaction:h.value,groupingKey:g,ts:b.ts,senderTimestampMs:e}}function o(a){var b,e,f,g=a==null||(b=a.quotedMessage)==null?void 0:b.stanzaId,h=a==null||(e=a.quotedMessage)==null?void 0:e.participant;a=a==null||(f=a.quotedMessage)==null?void 0:f.remoteJid;h=h!=null?d("WAJids").interpretAndValidateJid(h):null;var i;(h==null?void 0:h.jidType)==="msgrUser"&&h.userJid===d("WAGlobals").getMyUserJid()?i=d("WAJids").AUTHOR_ME:(h==null?void 0:h.jidType)==="msgrUser"?i=h.userJid:i=d("WAJids").AUTHOR_ME;if(g==null)return null;h={type:d("WAMsgType").MSG_TYPE.UNAVAILABLE,author:i,externalId:d("WAStanzaUtils").toStanzaId(g),ts:null};if(a!=null){i=d("WAJids").interpretAndValidateJid(a);if(i.jidType==="group")return{remoteJid:i.groupJid,content:h};else throw c("err")("not supported")}else return{remoteJid:null,content:h}}function p(a,b){var e;a=a.imageMessage;if(a==null)throw c("err")("consumerMessage has no imageMessage");return d("WAParseMediaTransportProtocol").decodeImageTransport(a==null||(e=a.image)==null?void 0:e.payload,b,"image")}function q(a,b){var e;a=a.audioMessage;if(a==null)throw c("err")("consumerMessage has no audioMessage");var f=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAMediaTransport.pb").AudioTransportSpec,a==null||(e=a.audio)==null?void 0:e.payload);f=d("WAParseMediaTransportProtocol").parseAudioMsg(f,(a==null?void 0:a.ptt)||!1,b);if(f==null)throw c("err")("consumerMessage has no audio media info");return f}function r(a){var b;a=a.stickerMessage;if(a==null)throw c("err")("consumerMessage has no stickerMessage");return d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAMediaTransport.pb").StickerTransportSpec,a==null||(b=a.sticker)==null?void 0:b.payload)}function s(a,b){var e;a=a.documentMessage;if(a==null)throw c("err")("consumerMessage has no documentMessage");var f=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAMediaTransport.pb").DocumentTransportSpec,a==null||(e=a.document)==null?void 0:e.payload);a=a==null?void 0:a.fileName;f=d("WAParseMediaTransportProtocol").parseDocumentMsg(f,a,b);if(f==null)throw c("err")("consumerMessage has no document media info");return f}function t(a){var b=Object.keys(a).filter(function(a){return a!=="$$unknownFieldCount"});if(b.length!==1)throw c("err")(JSON.stringify(a)+" consumerMessage payload content should have exactly one field, instead found "+JSON.stringify(b));return b[0]}function u(a,b){b=b.groupInviteMessage;if(b==null)throw c("err")("consumerMessage has no GroupInvite Data");return babelHelpers["extends"]({ack:a.ack,author:a.id.author,externalId:a.id.externalId,ts:a.ts},b)}g.MINIMAL_MEDIA_DURATION=b;g.DEFAULT_FILE_SIZE=e;g.SUPPORTED_TYPES_VERSION=f;g.parseConsumerMessageProtocol=a;g.interpretAsNonSystemAuthor=k;g.validReactionMessageText=m;g.parseReactionMessage=n;g.parsedQuotedConsumerMessage=o;g.parseOneOfContentType=t}),98);
__d("WAParseMediaTransportProtocol",["WAHashUtils","WALogger","WALongInt","WAMedia","WAMediaHdType","WAMediaTransport.pb","WAMediaUtils","WAMsgMap","WAParseConsumerMessageProtocol","WAProgressiveJpegGetScanLengths","WATimeUtils","decodeProtobuf","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,b,c,e){var f,g,k;if(!((f=a.integral)!=null&&f.transport))return null;f=(f=a.integral)==null?void 0:f.transport;if(d("decodeProtobuf").getUnknownFields(f.integral)!=null){d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["There is unknown fileds in integral of VideoTransport"])));return null}g=(g=f.integral)==null?void 0:g.fileSha256;if(!g){c||d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["protobuf msg with no plaintext hash"])));return null}c=null;if(((k=a.ancillary)==null?void 0:k.scansSidecar)!=null&&((k=a.ancillary)==null?void 0:k.scanLengths)!=null){c={sidecar:(k=a.ancillary)==null?void 0:k.scansSidecar,scanLengths:(k=a.ancillary)==null||(k=k.scanLengths)==null?void 0:k.map(d("WAProgressiveJpegGetScanLengths").asProgressiveJpegScanLength)}}if(((a=f.integral)==null?void 0:a.fileSha256)==null||((k=f.integral)==null?void 0:k.fileEncSha256)==null||((a=f.integral)==null?void 0:a.mediaKey)==null||((k=f.integral)==null?void 0:k.directPath)==null||((a=f.integral)==null?void 0:a.mediaKeyTimestamp)==null||((k=f.ancillary)==null?void 0:k.objectId)==null){d("WALogger").ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["cannot compose mediaEntry with the media message"])));return null}k=(a=f.ancillary)==null?void 0:a.fileLength;a=(a=f.ancillary.thumbnail)==null?void 0:a.downloadableThumbnail;f=d("WAMediaUtils").rawDataToMediaEntry({fileSha256:f.integral.fileSha256,fileEncSha256:f.integral.fileEncSha256,mediaKey:f.integral.mediaKey,directPath:f.integral.directPath,mediaKeyTimestamp:d("WATimeUtils").castLongIntToUnixTime(f.integral.mediaKeyTimestamp),serverMediaType:b,objectId:(b=f.ancillary)==null?void 0:b.objectId,fbid:void 0,downloadableThumbnail:{directPath:a==null?void 0:a.directPath,fileEncSha256:a==null?void 0:a.fileEncSha256,fileSha256:a==null?void 0:a.fileSha256,mediaKey:a==null?void 0:a.mediaKey,mediaKeyTimestamp:(a==null?void 0:a.mediaKeyTimestamp)==null?null:d("WATimeUtils").castLongIntToUnixTime(a==null?void 0:a.mediaKeyTimestamp),objectId:a==null?void 0:a.objectId},filename:e,progressiveJpegDetails:c,size:k==null?k:d("WALongInt").numberOrThrowIfTooLarge(k)});return{size:k==null?d("WAParseConsumerMessageProtocol").DEFAULT_FILE_SIZE:d("WALongInt").numberOrThrowIfTooLarge(k),plaintextHash:d("WAHashUtils").toPlaintextHash(new Uint8Array(g)),mediaEntry:f}}function l(a){switch(a){case d("WAMediaTransport.pb").IMAGE_TRANSPORT_ANCILLARY_HD_TYPE.NONE:return d("WAMediaHdType").HD_TYPE_NONE;case d("WAMediaTransport.pb").IMAGE_TRANSPORT_ANCILLARY_HD_TYPE.LQ_4K:return d("WAMediaHdType").HD_TYPE_LQ_4K;case d("WAMediaTransport.pb").IMAGE_TRANSPORT_ANCILLARY_HD_TYPE.HQ_4K:return d("WAMediaHdType").HD_TYPE_HQ_4K;default:a;return d("WAMediaHdType").HD_TYPE_NONE}}function m(a,b,c){var e;c=k(a,c,!1);if(!c)return null;c=p(c,b);b=(b=a.ancillary)==null?void 0:b.width;e=(e=a.ancillary)==null?void 0:e.height;a.ancillary!=null&&(a.ancillary.width!=null&&a.ancillary.width===4294967295&&(b=void 0),a.ancillary.height!=null&&a.ancillary.height===4294967295&&(e=void 0));b=babelHelpers["extends"]({},c,{mediaType:d("WAMedia").MEDIA_TYPE.IMAGE,validatedVideoInfo:null,validatedImageInfo:{width:b,height:e,jpegThumbnail:(c=a.integral)==null||(c=c.transport)==null||(c=c.ancillary)==null||(c=c.thumbnail)==null?void 0:c.jpegThumbnail,jpegThumbnailHeight:(b=a.integral)==null||(b=b.transport)==null||(b=b.ancillary)==null||(b=b.thumbnail)==null?void 0:b.thumbnailHeight,jpegThumbnailWidth:(e=a.integral)==null||(e=e.transport)==null||(e=e.ancillary)==null||(e=e.thumbnail)==null?void 0:e.thumbnailWidth,hdType:l((c=a.ancillary)==null?void 0:c.hdType)},validatedAudioInfo:null,validatedDocumentFileInfo:null});return b}function a(a,b,e){a=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAMediaTransport.pb").ImageTransportSpec,a);a=m(a,b,e);if(a==null)throw c("err")("consumerMessage has no image media info");return a}function b(a,b,c){var e,f,g,h,i,j,l;if(!((e=a.integral)!=null&&e.transport))return null;e=k(a,c?"gif":"video",!1);if(!e)return null;e=p(e,b);c=babelHelpers["extends"]({},e,{accessibilitySummaryText:(b=a.ancillary)==null?void 0:b.accessibilityLabel,mediaType:c?d("WAMedia").MEDIA_TYPE.GIF:d("WAMedia").MEDIA_TYPE.VIDEO,validatedVideoInfo:c?null:{duration:(a==null||(f=a.ancillary)==null?void 0:f.seconds)!=null&&(a==null||(g=a.ancillary)==null?void 0:g.seconds)>d("WAParseConsumerMessageProtocol").MINIMAL_MEDIA_DURATION?a==null||(h=a.ancillary)==null?void 0:h.seconds:d("WAParseConsumerMessageProtocol").MINIMAL_MEDIA_DURATION,width:a==null||(i=a.ancillary)==null?void 0:i.width,height:a==null||(j=a.ancillary)==null?void 0:j.height,mimetype:a==null||(l=a.integral)==null||(l=l.transport)==null||(l=l.ancillary)==null?void 0:l.mimetype,jpegThumbnail:(e=a.integral)==null||(e=e.transport)==null||(e=e.ancillary)==null||(e=e.thumbnail)==null?void 0:e.jpegThumbnail,jpegThumbnailHeight:(b=a.integral)==null||(b=b.transport)==null||(b=b.ancillary)==null||(b=b.thumbnail)==null?void 0:b.thumbnailHeight,jpegThumbnailWidth:(e=a.integral)==null||(e=e.transport)==null||(e=e.ancillary)==null||(e=e.thumbnail)==null?void 0:e.thumbnailWidth},validatedImageInfo:c?{width:(b=a.ancillary)==null?void 0:b.width,height:(e=a.ancillary)==null?void 0:e.height,jpegThumbnail:(c=a.integral)==null||(c=c.transport)==null||(c=c.ancillary)==null||(c=c.thumbnail)==null?void 0:c.jpegThumbnail,jpegThumbnailHeight:(b=a.integral)==null||(b=b.transport)==null||(b=b.ancillary)==null||(b=b.thumbnail)==null?void 0:b.thumbnailHeight,jpegThumbnailWidth:(e=a.integral)==null||(e=e.transport)==null||(e=e.ancillary)==null||(e=e.thumbnail)==null?void 0:e.thumbnailWidth}:null,validatedAudioInfo:null,validatedDocumentFileInfo:null});return c}function e(a,b,c){var e,f,g,h;if(!((b=a.integral)!=null&&b.transport))return null;b=k(a,"ptt",!1);if(!b)return null;b=p(b,c);c=babelHelpers["extends"]({},b,{mediaType:d("WAMedia").MEDIA_TYPE.PTT,validatedVideoInfo:null,validatedImageInfo:null,validatedDocumentFileInfo:null,validatedAudioInfo:{duration:(a==null||(e=a.ancillary)==null?void 0:e.seconds)!=null&&(a==null||(f=a.ancillary)==null?void 0:f.seconds)>d("WAParseConsumerMessageProtocol").MINIMAL_MEDIA_DURATION?a==null||(g=a.ancillary)==null?void 0:g.seconds:d("WAParseConsumerMessageProtocol").MINIMAL_MEDIA_DURATION,mimetype:a==null||(h=a.integral)==null||(h=h.transport)==null||(h=h.ancillary)==null?void 0:h.mimetype,played:!1}});return c}function f(a,b){var c;if(!((c=a.integral)!=null&&c.transport))return null;c=((c=a.integral)==null?void 0:c.receiverFetchId)!=null;c=k(a,"sticker",c);if(!c)return null;c=p(c,b);b=babelHelpers["extends"]({},c,{accessibilitySummaryText:(b=a.ancillary)==null?void 0:b.accessibilityLabel,mediaType:d("WAMedia").MEDIA_TYPE.STICKER,validatedVideoInfo:null,validatedImageInfo:{width:(c=a.ancillary)==null?void 0:c.width,height:(b=a.ancillary)==null?void 0:b.height,jpegThumbnail:(c=a.integral)==null||(c=c.transport)==null||(c=c.ancillary)==null||(c=c.thumbnail)==null?void 0:c.jpegThumbnail,jpegThumbnailHeight:(b=a.integral)==null||(b=b.transport)==null||(b=b.ancillary)==null||(b=b.thumbnail)==null?void 0:b.thumbnailHeight,jpegThumbnailWidth:(c=a.integral)==null||(c=c.transport)==null||(c=c.ancillary)==null||(c=c.thumbnail)==null?void 0:c.thumbnailWidth},validatedAudioInfo:null,validatedDocumentFileInfo:null});return b}function n(a){var b,c,d,e;if(!((b=a.integral)!=null&&b.transport))return null;b=(b=a.ancillary)==null?void 0:b.width;c=(c=a.ancillary)==null?void 0:c.height;d=(d=(d=a.integral)==null?void 0:d.receiverFetchId)!=null?d:(d=a.ancillary)==null?void 0:d.receiverFetchId;a=a==null||(e=a.integral)==null||(e=e.transport)==null||(e=e.ancillary)==null?void 0:e.mimetype;if(b==null||c==null||d==null||a==null)return null;d={receiverFetchId:d,previewWidth:b,previewHeight:c,mimetype:a,type:"sticker"};return d}function o(a,b,c){var e,f;if(!((e=a.integral)!=null&&e.transport))return null;e=k(a,"document",!1,b);if(!e)return null;e=p(e,c);return babelHelpers["extends"]({},e,{mediaType:d("WAMedia").MEDIA_TYPE.DOCUMENT_FILE,validatedVideoInfo:null,validatedImageInfo:null,validatedAudioInfo:null,validatedDocumentFileInfo:{mimetype:a==null||(f=a.integral)==null||(f=f.transport)==null||(f=f.ancillary)==null?void 0:f.mimetype,filename:b!=null?b:void 0}})}function p(a,b){return{mediaEntry:a.mediaEntry,plaintextHash:a.plaintextHash,size:a.size,msgIds:[],mediaEntries:new(d("WAMsgMap").MsgMap)(),ts:b}}g.getMediaMeta=k;g.decodeImageTransport=a;g.parseVideoMsg=b;g.parseAudioMsg=e;g.parseStickerMsg=f;g.parseStickerReceiverFetchInfo=n;g.parseDocumentMsg=o}),98);
__d("MAWParseBumpExistingMessageMsg",["FBLogger","WAMessageKey","WAParseConsumerMessageProtocol","WAParseProtocolUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.chat,e=a.content,f=a.meta;a=a.metadata;e=e.bumpExistingMessage;if(e==null)throw c("FBLogger")("messenger_web").mustfixThrow("bumpExistingMessage has no content");e=e.key;if(e==null)throw c("FBLogger")("messenger_web").mustfixThrow("bumpExistingMessage has no message key");var g=d("WAParseConsumerMessageProtocol").interpretAsNonSystemAuthor(f.id.author);g=d("WAMessageKey").extractProtocolMessageId(b,g,e);e=g.author;g=g.externalId;a=d("WAParseProtocolUtils").parseEphemerality(f,a);var h=a.deleteTs,i=a.ephemeralSetting;a=a.expirationTs;h={ack:f.ack,deleteTs:h,ephemeralSetting:i,expirationTs:a,id:{author:f.id.author,chat:f.id.chat,externalId:f.id.externalId},quote:{content:{author:e,externalId:g,ts:null,type:"Unavailable"},remoteJid:b},reportingMeta:f.reportingMeta,sentTs:f.sentTs,serverTs:f.serverTs,ts:f.serverTs,type:"BumpExistingMessage"};return{contentTypeForLogging:"bumpExistingMessage",unstoredMedia:null,unstoredMsg:h,unstoredQuotedMedia:null,unstoredXMA:null}}g["default"]=a}),98);
__d("MAWParseNetworkVerificationMsg",["MAWMessageDropError","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){d("WALogger").EXPECTED_ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Web does not support network verification code"])));throw new(d("MAWMessageDropError").MAWMessageDropError)("Web does not support network verification")}g.parseNetworkVerificationMsg=a}),98);
__d("MAWParseNoteReplyMsg",["FBLogger","MAWJids","MAWMsgType","WAGlobals","WAJids","WALongInt","WAMediaTransport.pb","WAMsgType","WAParseMediaTransportProtocol","WAParseProtocolUtils","WAParseReadOnlyMetadataDataclassUtils","WATimeUtils","decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b,e=a.content,f=a.ebTimestampMs,g=a.meta;a=a.metadata;e=e.noteReplyMessage;if(d("WAParseReadOnlyMetadataDataclassUtils").isNoteMention(a))return"noteMention";if(e==null)throw c("FBLogger")("messenger_web").mustfixThrow("noteReplyMessage has no content");b=(b=e.noteText)==null?void 0:b.text;if(b==null)throw c("FBLogger")("messenger_web").mustfixThrow("noteReplyMessage has no note text");var h=e.noteTimestampMs!=null?d("WATimeUtils").castMilliSecondsToUnixTime(d("WALongInt").numberOrThrowIfTooLarge(e.noteTimestampMs)):void 0,i=d("MAWJids").toUserJid(g.id.author),j=d("MAWJids").toUserJid(g.id.chat);i=j===i?d("WAJids").AUTHOR_ME:j;j=d("WAParseProtocolUtils").parseEphemerality(g,a);a=j.deleteTs;var k=j.ephemeralSetting;j=j.expirationTs;a={ack:g.ack,deleteTs:a,ebTimestampMs:f,ephemeralSetting:k,expirationTs:j,forwardingScore:g.forwardingScore,id:{author:g.id.author,chat:g.id.chat,externalId:g.id.externalId},quote:{content:{author:i,expirationTs:h,externalId:g.id.externalId,msgContent:{content:b},ts:g.serverTs,type:d("WAMsgType").NOTE_REPLY},remoteJid:g.id.chat},ts:g.serverTs};var l,m;k=(f=e.textContent)==null?void 0:f.text;j=e.stickerContent;i=e.videoContent;if(k!=null){h=babelHelpers["extends"]({msgContent:{content:k},type:d("MAWMsgType").MSG_TYPE.TEXT},a);b=h}else if(j!=null){f=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").StickerTransportSpec,j==null?void 0:j.payload);l=d("WAParseMediaTransportProtocol").parseStickerMsg(f,g.ts);if(l){e=babelHelpers["extends"]({mediaId:l.plaintextHash,type:d("MAWMsgType").MSG_TYPE.STICKER},a);b=e}else{if(((k=f.integral)==null?void 0:k.receiverFetchId)!=null)if(d("WAGlobals").getConfig().isStickerReceiverFetchEnabled()){m=d("WAParseMediaTransportProtocol").parseStickerReceiverFetchInfo(f);if(m==null)throw c("FBLogger")("messenger_web").mustfixThrow("consumerMessage has no sticker receiver fetch info");h=babelHelpers["extends"]({type:d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH},a);b=h}else throw c("FBLogger")("messenger_web").mustfixThrow("noteReplyMessage sticker receiver fetch is not enabled");else throw c("FBLogger")("messenger_web").mustfixThrow("noteReplyMessage sticker has no media")}}else if(i!=null){var n,o;j=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").VideoTransportSpec,i==null?void 0:i.payload);e=j==null||(n=j.integral)==null||(n=n.transport)==null||(n=n.ancillary)==null?void 0:n.mimetype;k=(j==null||(o=j.ancillary)==null?void 0:o.gifPlayback)===!0&&e==="image/gif";l=d("WAParseMediaTransportProtocol").parseVideoMsg(j,g.ts,k);if(l&&k){f=babelHelpers["extends"]({mediaId:l.plaintextHash,type:d("MAWMsgType").MSG_TYPE.GIF},a);b=f}else if(!l)throw c("FBLogger")("messenger_web").mustfixThrow("noteReplyMessage video has no media");else throw c("FBLogger")("messenger_web").mustfixThrow("noteReplyMessage video is not a gif")}else throw c("FBLogger")("messenger_web").mustfixThrow("noteReplyMessage has no valid content");return{contentTypeForLogging:"noteReplyMessage",unstoredMedia:l,unstoredMsg:b,unstoredQuotedMedia:null,unstoredReceiverFetchInfo:m,unstoredXMA:null}}g["default"]=a}),98);
__d("MAWParseRavenActionNotificationMsg",["FBLogger","MAWMsg","WAStanzaUtils","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b,e,f=a.content;a=a.meta;b=(b=f.ravenActionNotifMessage)==null?void 0:b.actionType;b=d("MAWMsg").MAWRavenActionNotifType.cast(b);e=(e=f.ravenActionNotifMessage)==null?void 0:e.actionTimestamp;var g;if(e!=null){e=Number(e);e>d("WATimeUtils").MAX_INT?g=d("WATimeUtils").castMilliSecondsToUnixTime(e):g=d("WATimeUtils").castToUnixTime(e)}f=((e=f.ravenActionNotifMessage)==null||(e=e.key)==null?void 0:e.id)!=null?d("WAStanzaUtils").toStanzaId((e=f.ravenActionNotifMessage)==null||(e=e.key)==null?void 0:e.id):null;if(b==null)throw c("FBLogger")("messenger_web").mustfixThrow("Error when getting actionType for RavenNotificationMessage "+a.id.externalId);if(g==null)throw c("FBLogger")("messenger_web").mustfixThrow("Error when getting actionTimestamp for RavenNotificationMessage "+a.id.externalId);if(f==null)throw c("FBLogger")("messenger_web").mustfixThrow("Error when getting ravenActionToMsgExternalId for RavenNotificationMessage "+a.id.externalId);e={ack:a.ack,actionTimestamp:g,actionType:b,id:a.id,ravenActionToMsgExternalId:f,sentTs:a.sentTs,serverTs:a.serverTs,ts:a.serverTs,type:"RavenAction"};return{unstoredMedia:null,unstoredMsg:e,unstoredQuotedMedia:null,unstoredXMA:null}}g.parseRavenActionNotificationMessage=a}),98);
__d("MAWParseSubprotocolVersionConsts",[],(function(a,b,c,d,e,f){"use strict";a=2;b=2;c=1;d=2;e=1;var g=1;f.ASSOCIATED_MESSAGE_SUBPROTOCOL_VERSION=a;f.XMA_PREVIEW_SUBPROTOCOL_VERSION=b;f.XMA_FAVICON_SUBPROTOCOL_VERSION=c;f.XMA_HEADER_SUBPROTOCOL_VERSION=d;f.RAVEN_IMAGE_MESSAGE_SUBPROTOCOL_VERSION=e;f.RAVEN_VIDEO_MESSAGE_SUBPROTOCOL_VERSION=g}),66);
__d("MAWParseRavenMsg",["FBLogger","MAWMsg","MAWMsgType","MAWParseSubprotocolVersionConsts","WALogger","WAMediaTransport.pb","WAParseMediaTransportProtocol","WAParseProtocolUtils","decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=a.content,e=a.ebTimestampMs,f=a.meta;a=a.metadata;b=b.ravenMessageMsgr;if(b==null)throw c("FBLogger")("messenger_web").mustfixThrow("Raven message payload has no content");var g=d("MAWMsg").MAWRavenMsgEphemeralType.cast(b.ephemeralType);if(g==null)throw c("FBLogger")("messenger_web").mustfixThrow("Error when casting ephemeralType for Raven message");var j=void 0,k=void 0;if(b.imageMessage)(b.imageMessage.version==null||b.imageMessage.version<d("MAWParseSubprotocolVersionConsts").RAVEN_IMAGE_MESSAGE_SUBPROTOCOL_VERSION)&&d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["\n        received image messsage version is older than expected ",". "])),d("MAWParseSubprotocolVersionConsts").RAVEN_IMAGE_MESSAGE_SUBPROTOCOL_VERSION),j=d("WAParseMediaTransportProtocol").decodeImageTransport(b.imageMessage.payload,f.ts,"image"),k=d("MAWMsg").MAWRavenMsgMediaType.IMAGE;else if(b.videoMessage){(b.videoMessage.version==null||b.videoMessage.version<d("MAWParseSubprotocolVersionConsts").RAVEN_VIDEO_MESSAGE_SUBPROTOCOL_VERSION)&&d("WALogger").WARN(i||(i=babelHelpers.taggedTemplateLiteralLoose(["\n        received video messsage version is older than expected ",". "])),d("MAWParseSubprotocolVersionConsts").RAVEN_VIDEO_MESSAGE_SUBPROTOCOL_VERSION);b=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAMediaTransport.pb").VideoTransportSpec,b.videoMessage.payload);j=d("WAParseMediaTransportProtocol").parseVideoMsg(b,f.ts,!1);k=d("MAWMsg").MAWRavenMsgMediaType.VIDEO}else throw c("FBLogger")("messenger_web").mustfixThrow("Error unsupported Raven message type");if(j==null)throw c("FBLogger")("messenger_web").mustfixThrow("Error Raven message has no associated image or video");b=d("WAParseProtocolUtils").parseEphemerality(f,a);a=b.deleteTs;var l=b.ephemeralSetting;b=b.expirationTs;a={ack:f.ack,deleteTs:a,ebTimestampMs:e,ephemeralSetting:l,expirationTs:b,id:f.id,mediaId:j.plaintextHash,ravenEphemeralMediaState:g===d("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT?d("MAWMsg").MAWRavenMsgEphemeralMediaState.PERMANENT:d("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN,ravenEphemeralType:g,ravenMediaType:k,reportingMeta:f.reportingMeta,sentTs:f.sentTs,serverTs:f.serverTs,ts:f.ts,type:d("MAWMsgType").MSG_TYPE.RAVEN};return{unstoredMedia:j,unstoredMsg:a,unstoredQuotedMedia:null,unstoredXMA:null}}g.parseRavenMessage=a}),98);
__d("MAWParseScreenshotActionMsg",["FBLogger","MAWExternalId","MAWMsgType","WAAckLevel","WAArmadilloApplication.pb","WAJids"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.content;a=a.meta;b=b.screenshotAction;if(b==null)throw c("FBLogger")("messenger_web").mustfixThrow("screenshotAction has no content");b=b.screenshotType;if(b==null)throw c("FBLogger")("messenger_web").mustfixThrow("Missing screenshot type in payload");if(![d("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREENSHOT_IMAGE,d("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREEN_RECORDING].includes(b))throw c("FBLogger")("messenger_web").mustfixThrow("Received unexpected screenshot action type");b={ack:d("WAAckLevel").ACK.SENT,id:{author:d("WAJids").AUTHOR_SYSTEM,chat:a.id.chat,externalId:d("MAWExternalId").generateExternalId()},msgContent:{adminMsgContent:[],adminType:"youEphemeralTakeScreenshot",screenshotActionType:b},ts:a.serverTs,type:d("MAWMsgType").EPHEMERAL_SCREENSHOT_ACTION};return{contentTypeForLogging:"screenshotAction",unstoredMedia:null,unstoredMsg:b,unstoredQuotedMedia:null,unstoredXMA:null}}g.parseEphemeralScreenshotActionProtocol=a}),98);
__d("MAWParseArmadilloProtocol",["FBLogger","MAWMessageParseError","MAWMsgType","MAWParseBumpExistingMessageMsg","MAWParseNetworkVerificationMsg","MAWParseNoteReplyMsg","MAWParseRavenActionNotificationMsg","MAWParseRavenMsg","MAWParseScreenshotActionMsg","MAWParseXMAProtocol","WAArmadilloApplication.pb","WAHex","WALogger","decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b={unstoredMedia:null,unstoredMsg:null,unstoredQuotedMedia:null,unstoredXMA:null};var j=new Map([["screenshotAction",d("MAWParseScreenshotActionMsg").parseEphemeralScreenshotActionProtocol],["extendedContentMessage",d("MAWParseXMAProtocol").parseXMAProtocol],["paymentsTransactionMessage",d("MAWParseXMAProtocol").parseXMAProtocol],["noteReplyMessage",c("MAWParseNoteReplyMsg")],["bumpExistingMessage",c("MAWParseBumpExistingMessageMsg")],["ravenMessageMsgr",d("MAWParseRavenMsg").parseRavenMessage],["ravenActionNotifMessage",d("MAWParseRavenActionNotificationMsg").parseRavenActionNotificationMessage],["networkVerificationMessage",d("MAWParseNetworkVerificationMsg").parseNetworkVerificationMsg]]);function a(a,b,c,e,f,g){b=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAArmadilloApplication.pb").ArmadilloSpec,b);b=(b=b.payload)==null?void 0:b.content;if(!b)throw new(d("MAWMessageParseError").MAWMessageParseError)("parse_armadillo_protocol_error:: empty_payload_content");var m=l(b);try{var n=j.get(m),o=null;if(n!=null){n=n({chat:a,content:b,ebTimestampMs:g,meta:c,metadata:f,protobuf:e});if(typeof n!=="string")return n;else o=n}d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["MAWParseArmadilloProtocol - handling futureproof message for contentType: ",""])),m);return{contentTypeForLogging:m,unstoredMedia:null,unstoredMsg:{ack:c.ack,id:c.id,msgContent:{protobuf:d("WAHex").bytesToBuffer(e),subtype:o!=null?o:k(m)},reportingMeta:c.reportingMeta,sentTs:c.sentTs,serverTs:c.serverTs,ts:c.ts,type:d("MAWMsgType").MSG_TYPE.FUTUREPROOF},unstoredQuotedMedia:null,unstoredXMA:null}}catch(a){d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["MAWParseArmadilloProtocol - Dropping message. contentType: ",", reason: ",""])),m,a);throw new(d("MAWMessageParseError").MAWMessageParseError)("parse_armadillo_protocol_error:: contentType:: "+m+" reason:: "+a)}}function k(a){switch(a){case"bumpExistingMessage":return"bumpMessage";default:return null}}function l(a){var b=Object.keys(a).filter(function(a){return a!=="$$unknownFieldCount"});if(b.length!==1)throw c("FBLogger")("messenger_web").mustfixThrow(JSON.stringify(a)+" armadillo payload content should only have one field");a=b[0];return a}g.EMPTY_CONTENT=b;g.parseArmadilloProtocol=a;g.parseOneOfContentType=l}),98);
__d("MAWParseCollapsibleIdFromXMADataClass",["FBLogger","MWXMAV2IsDataclassLiveLocationXMA"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a==null)throw c("FBLogger")("messenger_web").mustfixThrow("xmaDataclass is missing or invalid");var b=d("MWXMAV2IsDataclassLiveLocationXMA").isDataclassLiveLocationXMA(a);if(b)return h(a);b=JSON.parse(a);a=b.layout_config;if(a==null||typeof a.collapsible_id!=="number")throw c("FBLogger")("messenger_web").mustfixThrow("Layout config or collapsible_id is missing or invalid");return a.collapsible_id}function h(a){a=JSON.parse(a);a=(a=a.content)==null?void 0:a.custom_template_data;if((a==null?void 0:a.__typename)!=="XMSGXmaLocationTemplateData"||a==null)throw c("FBLogger")("messenger_web").mustfixThrow("Live location metadata or session_id is missing");return parseInt(a.location_metadata.session_id,10)}g.parseCollapsibleIdFromXMADataClass=a}),98);
__d("MAWXMALoggingUtils",["WAArmadilloXMA.pb","objectEntries"],(function(a,b,c,d,e,f,g){"use strict";var h=c("objectEntries")(d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE).reduce(function(a,b){var c=b[0];b=b[1];a.set(b,c);return a},new Map());function a(a){return a!=null?h.get(a):void 0}g.getXmaTargetTypeStringFromEnum=a}),98);
__d("MWXMAV2IsCollapsibleXMA",["FBLogger","MWXMAV2IsDataclassLiveLocationXMA"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a==null)return!1;var b;try{b=JSON.parse(a)}catch(a){c("FBLogger")("messenger_web_sharing").mustfix("Error parsing xma dataclass");return!1}if(b==null)return!1;var e=b.layout_config;return(e==null?void 0:e.collapsible_id)==null&&!d("MWXMAV2IsDataclassLiveLocationXMA").isDataclassLiveLocationXMA(a)?!1:!0}g.isCollapsibleXMA=a}),98);
__d("WAGetPlatformFromStanzaId",["WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){try{var b=(1<<5)-1;b=BigInt(b<<17);var c=BigInt(0),e=BigInt(1<<17);b=BigInt(a)&b;if(b===c)return"web";return b===e?"mobile":"unknown"}catch(b){d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Failed to parse stanza id "," for platform: ",""])),a,b);return"error"}}g.getPlatformFromStanzaId=a}),98);
__d("MAWParseXMAProtocol",["FBLogger","MAWMsgType","MAWODSProxy","MAWParseArmadilloProtocol","MAWParseCollapsibleIdFromXMADataClass","MAWParseSubprotocolVersionConsts","MAWParseXMAFBConfig","MAWParseXMAUnsupportedMessageType","MAWXMALoggingUtils","MWXMAV2IsCollapsibleXMA","WAArmadilloXMA.pb","WAGetPlatformFromStanzaId","WAHex","WAJids","WALogger","WAMedia","WAMsgApplication.pb","WAOdsEnums","WAParseConsumerMessageProtocol","WAParseMediaTransportProtocol","WAParseMessageApplication","WAParseProtocolUtils","WAStanzaUtils","WATimeUtils","decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";var aa=["actionContentBlob"],h,i,j,k,l,m,n,o,p,q,r,s,t,u=new Set([d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY]);function v(a,b){return a==null||a.payload==null?void 0:d("WAParseMediaTransportProtocol").decodeImageTransport(a.payload,b,"xma-image")}function ba(a,b,e,f,g){if(b==null||b.payload==null)return null;b.version!==d("MAWParseSubprotocolVersionConsts").ASSOCIATED_MESSAGE_SUBPROTOCOL_VERSION&&d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[XMA] received associated message with incorrect version ",""])),b.version);b=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAMsgApplication.pb").MessageApplicationSpec,b.payload);b=d("WAParseMessageApplication").parseMessageApplication(b);if(b.type==="error")throw c("FBLogger")("messenger_web").mustfixThrow("XMA contains unparseable message application.");b=b;if(b.subprotocolType!=="consumerMessage")throw c("FBLogger")("messenger_web").mustfixThrow("XMA contains incorrect message application type: "+b.subprotocolType);return d("WAParseConsumerMessageProtocol").parseConsumerMessageProtocol(a,b.payload,e,f,g)}var w="https://www.instagram.com/stories/",x="https://www.instagram.com/reel/",y="https://www.instagram.com/tv/",z="https://www.instagram.com/_n/profile_shop?",A="https://www.instagram.com/",B="https://www.alpha.facebook.com/share/",C="https://m.facebook.com/share/",D="https://www.facebook.com/share/",E="https://m.alpha.facebook.com/share/",F="https://facebook.com/share/",G="https://www.alpha.facebook.com/stories/",H="https://www.facebook.com/stories/",I="https://fb.gg/",J="https://www.facebook.com/",K="https://m.facebook.com/",L="https://www.alpha.facebook.com/",M="https://m.alpha.facebook.com/",N="https://facebook.com/",O="https://fb.watch/",P="https://www.facebook.com/l.php",Q="https://m.facebook.com/l.php",R="https://www.alpha.facebook.com/l.php",S="https://m.alpha.facebook.com/l.php",T="https://facebook.com/l.php",U="https://l.facebook.com/l.php",V="https://facebook.com/events/",W="https://www.facebook.com/events/",X="https://www.alpha.facebook.com/events/",Y="https://m.facebook.com/events/",ca="https://m.alpha.facebook.com/events/",da="fb-messenger://payments/receipt?product_id=",ea="messenger://location_share",fa="http://m.me/",ga=":",ha="http://",ia="https://";function a(a){var b=a.chat,e=a.content,f=a.ebTimestampMs,g=a.meta,h=a.metadata;a=a.protobuf;var n=d("MAWParseArmadilloProtocol").parseOneOfContentType(e);n=n==="paymentsTransactionMessage";var o=null;if(n){var p;o=(p=e.paymentsTransactionMessage)==null?void 0:p.extendedContentMessage}else o=e.extendedContentMessage;if(o==null&&n)return"paymentsTransactionMessage";if(o==null)throw c("FBLogger")("messenger_web").mustfixThrow("extendedContentMessage has no content");p=o;e=p.targetType;p=p.xmaDataclass;var q=d("WAGetPlatformFromStanzaId").getPlatformFromStanzaId(g.id.externalId);p!=null&&d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_XMA_PROTOCOL_PARSING,key:"xma_dataclass.exists."+(e!=null?e:"null")});if(e==null||!d("MAWParseXMAFBConfig").isFBSupportedTargetType({fbTargetType:e,xmaDataclass:p}))return{contentTypeForLogging:"extendedContentMessage",unstoredMedia:null,unstoredMsg:{ack:g.ack,id:g.id,msgContent:{protobuf:d("WAHex").bytesToBuffer(a),subtype:d("MAWParseXMAUnsupportedMessageType").getXMAUnsupportedMessageType(e,p,n)},reportingMeta:g.reportingMeta,sentTs:g.sentTs,serverTs:g.serverTs,ts:g.ts,type:d("MAWMsgType").MSG_TYPE.FUTUREPROOF},unstoredQuotedMedia:null,unstoredXMA:null,xmaTargetTypeForLogging:e};n=d("WAParseProtocolUtils").parseEphemerality(g,h);var r=n.deleteTs,s=n.ephemeralSetting;n=n.expirationTs;var t=d("WAParseProtocolUtils").enhanceReportingMeta(g,h),w=o,x=w.associatedMessage,y=w.commands,z=w.contentRef,A=w.ctas,B=w.favicon,C=w.headerImage,D=w.headerTitle,E=w.maxSubtitleNumOfLines,F=w.maxTitleNumOfLines,G=w.mentionedJid,H=w.messageText,I=w.overlayDescription,J=w.overlayIconGlyph,K=w.overlayTitle,L=w.previews,M=w.sentWithMessageId,N=w.subtitleText,O=w.targetId,P=w.targetUsername,Q=w.titleText;w=w.xmaLayoutType;x!=null&&(x.version==null||x.version<d("MAWParseSubprotocolVersionConsts").ASSOCIATED_MESSAGE_SUBPROTOCOL_VERSION)&&d("WALogger").WARN(i||(i=babelHelpers.taggedTemplateLiteralLoose(["\n      received associatedMessage version is older than expected "," as expected. "])),d("MAWParseSubprotocolVersionConsts").ASSOCIATED_MESSAGE_SUBPROTOCOL_VERSION);C!=null&&(C.version==null||C.version<d("MAWParseSubprotocolVersionConsts").XMA_HEADER_SUBPROTOCOL_VERSION)&&d("WALogger").WARN(j||(j=babelHelpers.taggedTemplateLiteralLoose(["\n    received headerImage version is older than expected ",". "])),d("MAWParseSubprotocolVersionConsts").XMA_HEADER_SUBPROTOCOL_VERSION);B!=null&&(B.version==null||B.version<d("MAWParseSubprotocolVersionConsts").XMA_FAVICON_SUBPROTOCOL_VERSION)&&d("WALogger").WARN(k||(k=babelHelpers.taggedTemplateLiteralLoose(["\n    received favicon version is older than expected ",". "])),d("MAWParseSubprotocolVersionConsts").XMA_FAVICON_SUBPROTOCOL_VERSION);L.every(function(a){(a.version==null||a.version<d("MAWParseSubprotocolVersionConsts").XMA_PREVIEW_SUBPROTOCOL_VERSION)&&d("WALogger").WARN(l||(l=babelHelpers.taggedTemplateLiteralLoose(["\n      received previews version is older than expected ",". "])),d("MAWParseSubprotocolVersionConsts").XMA_PREVIEW_SUBPROTOCOL_VERSION)});o=o.targetExpiringAtSec!=null?d("WATimeUtils").castLongIntToUnixTime(o.targetExpiringAtSec):void 0;var R=x!=null&&M!=null?[d("WAStanzaUtils").toStanzaId(M),g.id.externalId]:[g.id.externalId,void 0],S=R[0];R=R[1];var T=[];if(L!=null)for(var U=0;U<L.length;U++){var V,W=v(L[U],g.ts);W!=null&&!((e===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE||e===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE)&&W.mediaType===d("WAMedia").MEDIA_TYPE.IMAGE&&((V=W.validatedImageInfo)==null?void 0:V.height)===1&&((V=W.validatedImageInfo)==null?void 0:V.width)===1)&&T.push(W)}V=v(C,g.ts);W=v(B,g.ts);L=(U=d("WAParseConsumerMessageProtocol").parsedQuotedConsumerMessage(h))!=null?U:void 0;var X;if(d("MWXMAV2IsCollapsibleXMA").isCollapsibleXMA(p))try{X=d("MAWParseCollapsibleIdFromXMADataClass").parseCollapsibleIdFromXMADataClass(p)}catch(a){d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_XMA_PROTOCOL_PARSING,key:"xma_validation."+q+"."+(e||0)+".error"});throw c("FBLogger")("messenger_web").mustfixThrow("Unexpected error trying to parse collapsible ID: "+a.message)}C=babelHelpers["extends"]({collapsibleId:X,deleteTs:r,ebTimestampMs:f,ephemeralSetting:s,expirationTs:n,id:babelHelpers["extends"]({},g.id,{externalId:S}),quote:L,reportingMeta:t,type:d("MAWMsgType").MSG_TYPE.XMA},g);B=A.map(function(a){a.actionContentBlob;a=babelHelpers.objectWithoutPropertiesLoose(a,aa);return a});U=B.slice(1);e===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE&&A.length===1&&(U=B);q=e===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT;r={author:g.id.author,commands:y,contentRef:z,ctas:U,defaultCTA:B[0],externalId:S,faviconMediaId:q?V==null?void 0:V.plaintextHash:W==null?void 0:W.plaintextHash,headerMediaId:q?W==null?void 0:W.plaintextHash:V==null?void 0:V.plaintextHash,headerTitle:D,isTombstoned:o!=null?d("WATimeUtils").unixTime()>o:!1,maxSubtitleNumOfLines:E,maxTitleNumOfLines:F,mentionedJids:G.map(d("WAJids").validateUserJid).filter(Boolean),overlayDescription:I,overlayIconGlyph:J,overlayTitle:K,previewMediaIds:T.length>0?T.map(function(a){return a.plaintextHash}):void 0,sentWithMessage:H,subtitleText:N,targetExpiringAtSec:o,targetId:O,targetType:e,targetUsername:P,threadJid:b,titleText:Q,xmaDataclass:p,xmaLayoutType:w};var Y;if(x!=null&&M==null)throw c("FBLogger")("messenger_web").mustfixThrow("XMA associatedMessage cannot be received without sentWithMessageId field");x!=null&&R!=null&&(Y=ba(b,x,g,a,h));n=(s=(f=Y)==null?void 0:f.unstoredMedia)!=null?s:null;L=u.has(e);if(n!=null&&!L){t=d("MAWXMALoggingUtils").getXmaTargetTypeStringFromEnum(e);d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_XMA_PROTOCOL_PARSING,key:"assoc_msg_media_"+(t!=null?t:"unknown")});throw c("FBLogger")("messenger_web").mustfixThrow("XMA associated msg cannot have additioinal dbMedia")}z=(y=(A=Y)==null?void 0:A.unstoredMsg)!=null?y:null;R!=null&&z!=null&&(d("WALogger").DEV(m||(m=babelHelpers.taggedTemplateLiteralLoose(["ExternalId: "," textId: ",""])),S,R),z.id=babelHelpers["extends"]({},z.id,{externalId:R}),C.id=babelHelpers["extends"]({},z.id,{externalId:S}),r.externalId=S);if(L&&n!=null&&((z==null?void 0:z.type)==="Gif"||(z==null?void 0:z.type)==="Sticker"))return{contentTypeForLogging:"extendedContentMessage",unstoredMedia:null,unstoredMsg:C,unstoredQuotedMedia:null,unstoredXMA:{unstoredAssociatedMedia:n,unstoredAssociatedMsg:z,unstoredFavicon:q?T[0]:W,unstoredHeaderMedia:V,unstoredPreviews:T.length>0?T:void 0,xma:r},xmaTargetTypeForLogging:e};if(z!=null&&z.type!=="Text")throw c("FBLogger")("messenger_web").mustfixThrow('XMA associated msg cannot have type different from "Text". Received type: '+z.type);return{contentTypeForLogging:"extendedContentMessage",unstoredMedia:null,unstoredMsg:C,unstoredQuotedMedia:null,unstoredXMA:{unstoredAssociatedMedia:void 0,unstoredAssociatedMsg:z,unstoredFavicon:q?T[0]:W,unstoredHeaderMedia:V,unstoredPreviews:T.length>0&&!q?T:void 0,xma:r},xmaTargetTypeForLogging:e}}function ja(a){var b=a.ebRestore,c=a.hasActionUrl,e=a.hasNativeUrl,f=a.isActionUrlValid,g=a.isNativeUrlValid;a=a.targetType;!g&&!f?d("WALogger").ERROR(n||(n=babelHelpers.taggedTemplateLiteralLoose([""," XMA has invalid action and native URL for target type: ",". hasNativeUrl: ",". hasActionUrl: ","."])),b!=null&&b?"[labyrinth_web]":"[S410301][transport]",a,e,c):g&&!f?d("WALogger").ERROR(o||(o=babelHelpers.taggedTemplateLiteralLoose([""," XMA has invalid action URL for target type: ",". hasNativeUrl: ",". hasActionUrl: ","."])),b!=null&&b?"[labyrinth_web]":"[S410301][transport]",a,e,c):f&&!g&&d("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose([""," XMA has invalid native URL for target type: ",". hasNativeUrl: ",". hasActionUrl: ","."])),b!=null&&b?"[labyrinth_web]":"[S410301][transport]",a,e,c)}function b(a,b,c){var d=a.nativeUrl;a=a.actionUrl;var e=Z(d,b,c),f=Z(a,b,c);ja({ebRestore:c,hasActionUrl:a!=null,hasNativeUrl:d!=null,isActionUrlValid:f,isNativeUrlValid:e,targetType:b});return e&&f}function Z(a,b,c,e){e===void 0&&(e=!1);if(a==null)return!0;if(na(a,b)===!1){c!=null&&c&&!e&&d("WALogger").ERROR(q||(q=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Invalid url prefix during XMA restore"])));return!1}if(!oa(a)){c!=null&&c&&!e&&d("WALogger").ERROR(r||(r=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Invalid message text during XMA restore"])));return!1}return!0}function ka(a){return a.startsWith(B)||a.startsWith(C)||a.startsWith(D)||a.startsWith(E)||a.startsWith(F)}function la(a){return a.startsWith(P)||a.startsWith(Q)||a.startsWith(R)||a.startsWith(S)||a.startsWith(T)||a.startsWith(U)}function $(a){return a.startsWith(J)||a.startsWith(K)||a.startsWith(L)||a.startsWith(M)||a.startsWith(N)}function ma(a){return a.startsWith(V)||a.startsWith(W)||a.startsWith(X)||a.startsWith(Y)||a.startsWith(ca)}function na(a,b){if(a==null)return!0;switch(b){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_HIGHLIGHT_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_HIGHLIGHT_REACTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:return a.startsWith(w);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:return a.startsWith(x);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_IGTV_SHARE:return a.startsWith(y);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SHOP_SHARE:return a.startsWith(z);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_PROFILE_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_IG_MEDIA_SHARE:return a.startsWith(A);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return a.startsWith(H)||a.startsWith(G)||ka(a);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PROFILE_DIRECTORY_ITEM:return $(a);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:return a.startsWith(I);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_VIDEO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:return($(a)||a.startsWith(O))&&!la(a);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:return a.startsWith(ea);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:return ma(a);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT:return ma(a)||ka(a);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:return $(a)||a.startsWith(fa);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_EXTERNAL_LINK:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_VIDEO_CALL:if(a.includes(ga)&&(!a.startsWith(ha)&&!a.startsWith(ia))){b=a.indexOf("://");b===-1&&d("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(['S410301 The url is invalid. It contains a colon separator, but not "://"'])));return!1}break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_RECEIVER_FETCH:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.DATACLASS_SENDER_COPY:return!0;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_P2P_PAYMENT:return a.startsWith(da)}return!0}function oa(a){for(var b=0;b<a.length;b++){var c=a.charAt(b);switch(c){case"\u202c":case"\u202d":case"\u202e":d("WALogger").ERROR(t||(t=babelHelpers.taggedTemplateLiteralLoose(["S410301 The url contains RTL characters"])));return!1;default:break}}return!0}g.SUPPORTED_XMA_ASSOC_MEDIA_TARGET_TYPES=u;g.kIGStoryCtaPrefix=w;g.kIGClipsCtaPrefix=x;g.kIGTVCtaPrefix=y;g.kIGShopCtaPrefix=z;g.kIGDefaultCtaPrefix=A;g.kFBStoryCtaPrefix=H;g.kFBGamingCustomUpdateCtaPrefix=I;g.kFBDefaultWWWCtaPrefix=J;g.kFBEventCtaPrefix=V;g.kMSGP2PPaymentUrlPrefix=da;g.kMessengerLocationSharePrefix=ea;g.kHttpPrefix=ha;g.parseXMAProtocol=a;g.isValidCTA=b;g.isURLValid=Z}),98);
__d("MAWSupportedDocumentTypes",[],(function(a,b,c,d,e,f){"use strict";var g=["apk","pyc","7z","z","gz","xz","rar","zip","zipx","ace","arc","zpaq","quad","balz","cab","arj","lzh","uue","bz","bz2","bzip2","jar","iso","tar","ade","adp","air","app","application","bas","bat","chm","cmd","com","command","cpl","crt","dll","dmg","dpkg","exe","hlp","hta","inf","ins","isp","jnlp","js","jse","lib","lnk","lua","mde","msc","msi","msp","mst","ocx","pcd","pif","pkg","ps1","reg","scr","sct","sh","shb","shs","sys","term","url","vb","vbe","vbs","vxd","webarchive","wsc","wsf","wsh","xbap"];function a(a){if(a==null)return!1;a=a.includes(".")?a.split(".").pop():null;return a!=null&&!g.includes(a)}f.isAllowedType=a}),66);
__d("MessagesRangesV2ExternalIds",[],(function(a,b,c,d,e,f){"use strict";a="";b="9999999999999999";f.MIN_EXTERNAL_ID=a;f.MAX_EXTERNAL_ID=b}),66);
__d("RavenMessagingState",[],(function(a,b,c,d,e,f){a=Object.freeze({PERMANENT:0,UNSEEN:1,SEEN:2,REPLAYED:3,EXPIRED:4});f["default"]=a}),66);
__d("WAIsOgg",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a.length<4)return!1;return a[0]!==79||a[1]!==103||a[2]!==103||a[3]!==83?!1:!0}f.isOgg=a}),66);
__d("WASortedLists",[],(function(a,b,c,d,e,f){"use strict";function a(){return[]}function b(){return[]}function c(a,b){return a.filter(b)}function d(a,b){return l(a.map(b))}function e(a,b){var c=a.length===b.length;for(var d=0;c&&d<a.length;d++)a[d]!==b[d]&&(c=!1);return c}function g(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return a;return a.concat([b]).sort()}function h(a,b){if(a.length<b.length)return!1;var c=!0;for(var d=0,e=0;c&&e<b.length;e++)do c=a[d]===b[e];while(!c&&++d<a.length);return c}function i(a,b){var c=[];for(var d=0,e=0;d<a.length;d++){var f=a[d];while(e<b.length&&f>b[e])e++;(e===b.length||f<b[e])&&c.push(f)}return c}function j(a,b){var c=[],d=0,e=0;while(d<a.length&&e<b.length){var f=a[d],g=b[e];f<g?d++:f===g?(c.push(f),d++,e++):e++}return c}function k(a,b){var c=[],d=0,e=0;while(d<a.length&&e<b.length)a[d]<b[e]?c.push(a[d++]):a[d]===b[e]?(c.push(a[d++]),e++):c.push(b[e++]);while(d<a.length)c.push(a[d++]);while(e<b.length)c.push(b[e++]);return c}function l(a){return m(a.slice().sort())}function m(a){var b=!1;for(var c=0;c<a.length-1;c++)a[c]===a[c+1]&&(b=!0);if(!b)return a;c=[];for(b=0;b<a.length-1;b++)a[b]!==a[b+1]&&c.push(a[b]);c.push(a[a.length-1]);return c}function n(a){return Array.from(a).sort()}function o(a){return a.slice().sort()}function p(a,b,c){var d=null;for(var e=0;!d&&e<a.length;e++)a[e]===b&&(d=a.slice(),d[e]=c,d=m(d.sort()));return d||a}function q(a){return[a]}function r(a){return a.length<1}function s(a,b,c){return a.slice(b,c)}f.emptySet=a;f.emptyList=b;f.filter=c;f.map=d;f.areEqual=e;f.addToSet=g;f.contains=h;f.subtract=i;f.intersect=j;f.joinUniq=k;f.sortAndDedupe=l;f.asSortedSet=n;f.sort=o;f.swapIn=p;f.singleElement=q;f.isEmpty=r;f.slice=s}),66);
__d("WAStartMediaDownloadQplFlow",["WAGetPlatformFromStanzaId","WAGetStorageQplAnnotations","WAJids","WAMediaUtils","WAPREList","WAPREMetrics"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.downloadEntry,c=a.msgType,e=a.triggerUIView,f=a.protocolMsgId,g=a.isPreview;a=a.xmaMediaType;var h=d("WAPREMetrics").startMetric(d("WAPREList").PRE_METRIC.MEDIA_DOWNLOAD,{bool:{isTransformStreamSupported:d("WAMediaUtils").isTransformStreamSupported()},string:{chat_type:f==null?null:d("WAJids").switchOnMsgrChatJidType(f.chat,{group:function(){return"group"},user:function(){return"user"}}),downloadEntry:g===!0?b+"-preview":b,e2eePlatform:f==null?null:d("WAGetPlatformFromStanzaId").getPlatformFromStanzaId(f.externalId),msgType:c,trigger_ui_view:e,xmaMediaType:a!=null?a:void 0}},void 0,d("WAPREMetrics").QPL_MEDIA_DOWNLOAD_TIMEOUT_IN_MS);void d("WAGetStorageQplAnnotations").getStorageQplAnnotations().then(function(a){h.addAnnotations(a)});return babelHelpers["extends"]({},h,{downloadEntry:b,triggerUIView:e})}g.startMediaDownloadQplFlow=a}),98);/*FB_PKG_DELIM*/
__d("CrossWindowEventEmitter",["CacheStorage","EventEmitter","cr:8958"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function d(d){var e;e=a.call(this)||this;e.$CrossWindowEventEmitter$p_2=d;e.$CrossWindowEventEmitter$p_1=new(c("CacheStorage"))("localstorage",d+":");e.$CrossWindowEventEmitter$p_1.addValueChangeCallback(function(c,d,f){d=c.split(":")[1];try{c=b("cr:8958").parse(f)}catch(a){c=void 0}if(c&&c.__v){(f=a.prototype.emit).call.apply(f,[e,d].concat(c.__v))}});return e}babelHelpers.inheritsLoose(d,a);var e=d.prototype;e.emit=function(b){var c;for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];this.emitRemote.apply(this,[b].concat(e));(c=a.prototype.emit).call.apply(c,[this,b].concat(e))};e.emitRemote=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.$CrossWindowEventEmitter$p_1.set(a,c)};return d}(c("EventEmitter"));g["default"]=a}),98);
__d("IrisSubscribeCheckerUtils",[],(function(a,b,c,d,e,f){"use strict";function a(){if(typeof window!=="undefined"){var a;a=(a=window.location)==null?void 0:a.hostname;if(a==="m.facebook.com"||a==="mobile.facebook.com"||a==="mtouch.facebook.com")return!1}return!0}f.getIrisSubscribeCheckerInitialRunningState=a}),66);
__d("MqttEnvWebSocket",[],(function(a,b,c,d,e,f){"use strict";function a(a){return new WebSocket(a)}f.createWebSocket=a}),66);
__d("MqttEnv",["MqttEnvWebSocket","clearTimeout","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";b=Object.freeze({mqtt_waterfall_log_client_sampling:1,mqtt_ws_polling_enabled:3,mqtt_lp_use_fetch:9,mqtt_fast_lp:11,mqtt_lp_no_delay:12,mqtt_enable_publish_over_polling:13,mqttweb_global_connection_counter:15});e=function(){function a(){this.$1=null,this.$2=null,this.$3=null,this.$4=null,this.$5=null,this.$6=null,this.$7=null,this.$8=null,this.$9=null,this.$10=null,this.$11=null}var b=a.prototype;b.random=function(){return this.$1!=null?this.$1():Math.random()};b.isUserLoggedInNow=function(){return this.$2!=null?this.$2():!0};b.setIsUserLoggedInNow=function(a){this.$2=a};b.clearTimeout=function(a){if(this.$3!=null){this.$3(a);return}c("clearTimeout")(a)};b.setTimeout=function(a,b){for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];return this.$4!=null?this.$4.apply(null,arguments):c("setTimeout").apply(null,arguments)};b.getLoggerInstance=function(){return this.$5!=null?this.$5():h.getInstance()};b.genGk=function(a){return this.$6!=null?this.$6(a):!1};b.createSocket=function(a,b){return this.$7!=null?this.$7(a,b):d("MqttEnvWebSocket").createWebSocket(a)};b.scheduleCallback=function(a){return this.$8!=null?this.$8(a):a()};b.scheduleLoggingCallback=function(a){return this.$9!=null?this.$9(a):a()};b.configRead=function(a,b){return this.$10!=null?this.$10(a,b):b};b.configWrite=function(a,b){this.$11!=null&&this.$11(a,b)};b.initialize=function(a,b,c,d,e,f,g,h,i,j,k){this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$5=e,this.$6=f,this.$7=g,this.$8=h,this.$9=i,this.$10=j,this.$11=k};return a}();var h=function(){function a(){}a.getInstance=function(){return new a()};var b=a.prototype;b.setAppId=function(a){};b.eventLogConnect=function(a){};b.eventLogPull=function(a){};b.eventLogPullFinish=function(a){};b.eventLogDisconnect=function(a){};b.eventLogOutgoingPublish=function(a){};b.eventLogIncomingPublish=function(a){};b.eventLogPublishTimeout=function(a){};b.eventLogMiscellaneousError=function(a){};b.logIfLoggedOut=function(){};b.logError=function(a){};b.logErrorWarn=function(a){};b.logWarn=function(a){};b.debugTrace=function(a){};b.bumpCounter=function(a){};b.getBrowserConnectivity=function(){return!0};return a}(),i=new e();function a(a){i.setIsUserLoggedInNow(a)}g.MqttGkNames=b;g.Env=i;g.setIsUserLoggedInNow=a}),98);
__d("IrisSubscribeChecker",["IrisSubscribeCheckerUtils","MqttEnv"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=d("MqttEnv").Env.getLoggerInstance(),this.$2=null,this.$3=!1,this.$4=!1,this.$5=!1,this.$6=d("IrisSubscribeCheckerUtils").getIrisSubscribeCheckerInitialRunningState(),this.$7=0,this.$8=a}var b=a.prototype;b.start=function(){this.$6=!0};b.stop=function(){this.$6=!1,this.$9()};b.onConnectAttempt=function(){};b.onConnectFailure=function(){this.$9()};b.onConnected=function(){var a=this;this.$7++;this.$9();this.$3=!1;this.$4=!1;this.$5=!1;this.$6&&(this.$2=d("MqttEnv").Env.setTimeout(function(){a.$10()},8e3))};b.onConnectSuccess=function(){};b.onConnectionLost=function(){this.$9()};b.onConnectionDisconnect=function(){};b.onSubscribe=function(a){a==="/t_ms"&&(this.$3=!0)};b.onUnsubscribe=function(a){};b.onPublish=function(a){(a==="/messenger_sync_get_diffs"||a==="/messenger_sync_create_queue")&&(this.$4=!0,this.$3&&(this.$5=!0,this.$9()))};b.onMessage=function(a){};b.onWSFatal=function(){};b.$9=function(){this.$2&&(d("MqttEnv").Env.clearTimeout(this.$2),this.$2=null)};b.$10=function(){if(this.$4===!1){var a=this.$7==1?"no_iris_session_initialConnect":"no_iris_session";this.$1.bumpCounter(a);this.$8()?this.$1.bumpCounter(a+".withProvider"):this.$1.bumpCounter(a+".withoutProvider");this.$3===!0?this.$1.bumpCounter(a+".withTopicSubscribe"):this.$1.bumpCounter(a+".withoutTopicSubscribe")}this.$3===!1&&this.$1.bumpCounter("no_iris_topic_subscribe");this.$3===!0&&this.$4===!0&&this.$5===!1&&this.$1.bumpCounter("session_before_topic_subscribe")};return a}();g["default"]=a}),98);
__d("MqttGlobalStreamCounter",["CrossWindowEventEmitter","MqttEnv","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){var a=this;this.isTabClosed=!1;this.otherTabs=new Map();this.thisTab={totalConnectionStreams:0};this.broadcastChannel=new(c("CrossWindowEventEmitter"))("MqttGlobalStreamCounter");this.broadcastChannel.addListener("count-updated",function(b){b=JSON.parse(String(b));var c=!1;a.otherTabs.has(b.key)||(c=!0);b.event==="DELETE"?a.otherTabs["delete"](b.key):b.event==="UPDATE"&&b.value!=null&&(a.otherTabs.set(b.key,b.value),c&&a.$1())});this.tabID=c("uuidv4")()}var b=a.prototype;b.streamRequested=function(){this.thisTab.totalConnectionStreams++,this.$1()};b.streamClosed=function(){this.thisTab.totalConnectionStreams>0&&(this.thisTab.totalConnectionStreams--,this.$1())};b.tabClosed=function(){if(this.isTabClosed)return;this.isTabClosed=!0;var a={key:this.tabID,event:"DELETE"};this.broadcastChannel.emitRemote("count-updated",JSON.stringify(a))};b.getGlobalState=function(){var a={totalConnectionStreams:this.thisTab.totalConnectionStreams};this.otherTabs.forEach(function(b){a.totalConnectionStreams+=b.totalConnectionStreams});return a};b.$1=function(){var a={key:this.tabID,event:"UPDATE",value:this.thisTab};this.broadcastChannel.emitRemote("count-updated",JSON.stringify(a))};b.isEnabled=function(){return!0};return a}();var h=d("MqttEnv").Env.genGk(d("MqttEnv").MqttGkNames.mqttweb_global_connection_counter)?new a():{streamRequested:function(){},streamClosed:function(){},tabClosed:function(){},getGlobalState:function(){return{totalConnectionStreams:-1}},isEnabled:function(){return!1}};b=function(){return h};g.getInstance=b}),98);
__d("MqttAnalyticsHook",["MqttEnv","MqttGlobalStreamCounter"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=d("MqttEnv").Env.getLoggerInstance(),this.$2=d("MqttGlobalStreamCounter").getInstance(),this.$3=0,this.$4=0,this.$5=0,this.$6=0,this.$1.bumpCounter("session_start"),d("MqttEnv").Env.isUserLoggedInNow()||this.$1.bumpCounter("session_start.logout")}var b=a.prototype;b.onConnectAttempt=function(){this.$1.bumpCounter("ws_connect_attempt"),this.$2.streamRequested()};b.onConnectFailure=function(){this.$4++,this.$1.bumpCounter("ws_connect_failure"),this.$1.debugTrace("connect","Connect failed existing streams count "+this.$2.getGlobalState().totalConnectionStreams),this.$2.streamClosed()};b.onConnected=function(){this.$1.bumpCounter("ws_connect_connected")};b.onConnectSuccess=function(){this.$3===0&&this.$1.bumpCounter("ws_connect_first_success"),this.$3++,this.$1.bumpCounter("ws_connect_success")};b.onConnectionLost=function(){this.$1.bumpCounter("ws_disconnect")};b.onConnectionDisconnect=function(){this.$2.streamClosed()};b.onSubscribe=function(a){};b.onUnsubscribe=function(a){};b.onPublish=function(a){this.$1.bumpCounter("ws_publish."+a)};b.onMessage=function(a){this.$1.bumpCounter("message_arrived."+a)};b.onWSFatal=function(){this.$1.bumpCounter("ws_fatal")};b.onPollRequestSent=function(){this.$1.bumpCounter("polling_request_send"),this.$2.streamRequested()};b.onPollRequestSuccess=function(){this.$1.bumpCounter("polling_request_succeed"),this.$5===0&&this.$1.bumpCounter("polling_first_success"),this.$5++};b.onPollResponse=function(a){this.$1.bumpCounter("lp.message_arrived."+a)};b.onPollFinish=function(){this.$1.bumpCounter("polling_request_finish"),this.$2.streamRequested()};b.onPollRequestFailed=function(a){this.$1.bumpCounter("polling_request_failed"),this.$1.bumpCounter("polling_request_failed_"+a),this.$6++,this.$1.debugTrace("PollRequest","Request failed existing streams count "+this.$2.getGlobalState().totalConnectionStreams),this.$2.streamClosed()};b.onPollShutdownAbort=function(){this.$2.streamClosed()};b.onTabClose=function(){this.$2.tabClosed()};return a}();g["default"]=a}),98);
__d("MqttConnectionHookCollection",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=new Set()}var b=a.prototype;b.addHook=function(a){this.$1.add(a)};b.removeHook=function(a){this.$1["delete"](a)};b.onConnectAttempt=function(){this.$1.forEach(function(a){a.onConnectAttempt==null||a.onConnectAttempt()})};b.onConnectFailure=function(){this.$1.forEach(function(a){a.onConnectFailure==null||a.onConnectFailure()})};b.onConnected=function(){this.$1.forEach(function(a){a.onConnected==null||a.onConnected()})};b.onConnectSuccess=function(){this.$1.forEach(function(a){a.onConnectSuccess==null||a.onConnectSuccess()})};b.onConnectionLost=function(){this.$1.forEach(function(a){a.onConnectionLost==null||a.onConnectionLost()})};b.onConnectionDisconnect=function(){this.$1.forEach(function(a){a.onConnectionDisconnect==null||a.onConnectionDisconnect()})};b.onSubscribe=function(a){this.$1.forEach(function(b){b.onSubscribe==null||b.onSubscribe(a)})};b.onUnsubscribe=function(a){this.$1.forEach(function(b){b.onUnsubscribe==null||b.onUnsubscribe(a)})};b.onPublish=function(a){this.$1.forEach(function(b){b.onPublish==null||b.onPublish(a)})};b.onMessage=function(a){this.$1.forEach(function(b){b.onMessage==null||b.onMessage(a)})};b.onWSFatal=function(){this.$1.forEach(function(a){a.onWSFatal==null||a.onWSFatal()})};return a}();f["default"]=a}),66);
__d("MqttProtocolUtils",["MqttEnv"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(a==null)return b;var c=new Uint8Array(a.length+b.length);c.set(a);c.set(b,a.length);return c}function b(a,b){b=b;var c=0,d=1,e;do{if(b===a.length)return null;e=a[b++];c+=(e&127)*d;d*=128}while((e&128)!==0);return{offset:b,value:c}}function c(a){a=a;var b=new Array(1);for(var c=0;c<4;c++){var d=a%128;a>>=7;if(a>0)b[c]=d|128;else{b[c]=d;break}}return b}function h(a,b,c){c=c;b[c++]=a>>8;b[c++]=a%256;return c}function e(a,b){return 256*a[b]+a[b+1]}function f(a){var b=0;for(var c=0,d=a.length;c<d;c++){var e=a.charCodeAt(c);e<128?b+=1:e<2048?b+=2:e>=55296&&e<=56319?(b+=4,c++):b+=3}return b}function i(a,b,c,d){d=h(b,c,d);j(a,c,d);return d+b}function j(a,b,c){c=c;for(var d=0,e=a.length;d<e;d++){var f=a.charCodeAt(d);f<128?b[c++]=f:f<2048?(b[c++]=192|f>>6,b[c++]=128|f&63):f<55296||f>=57344?(b[c++]=224|f>>12,b[c++]=128|f>>6&63,b[c++]=128|f&63):(f=65536+((f&1023)<<10|a.charCodeAt(++d)&1023),b[c++]=240|f>>18,b[c++]=128|f>>12&63,b[c++]=128|f>>6&63,b[c++]=128|f&63)}}function k(a,b,c){var d=[],e=b,f=0;while(e<b+c){var g=a[e++];if(g<128)d[f++]=String.fromCharCode(g);else if(g>191&&g<224){var h=a[e++];d[f++]=String.fromCharCode((g&31)<<6|h&63)}else if(g>239&&g<365){h=a[e++];var i=a[e++],j=a[e++];h=((g&7)<<18|(h&63)<<12|(i&63)<<6|j&63)-65536;d[f++]=String.fromCharCode(55296+(h>>10));d[f++]=String.fromCharCode(56320+(h&1023))}else{i=a[e++];j=a[e++];d[f++]=String.fromCharCode((g&15)<<12|(i&63)<<6|j&63)}}return d.join("")}var l=function(){function a(a,b,c,d){this.$1=a,this.$2=b,this.$5=c,this.$6=d,this.$4=!1}var b=a.prototype;b.$7=function(){var a=this;this.$4?(this.$4=!1,this.$5(),this.$3=d("MqttEnv").Env.setTimeout(function(){a.$7()},this.$2()*1e3)):this.$6()};b.reset=function(){var a=this;this.$4=!0;this.$3&&(d("MqttEnv").Env.clearTimeout(this.$3),this.$3=null);var b=this.$1()*1e3;b>0&&(this.$3=d("MqttEnv").Env.setTimeout(function(){a.$7()},b))};b.cancel=function(){this.$3&&(d("MqttEnv").Env.clearTimeout(this.$3),this.$3=null)};return a}();g.UTF8Length=f;g.convertStringToUTF8=j;g.concatBuffers=a;g.decodeMultiByteInt=b;g.convertUTF8ToString=k;g.encodeMultiByteInt=c;g.writeUInt16BE=h;g.readUInt16BE=e;g.writeString=i;g.Pinger=l}),98);
__d("MqttUtils",["MqttEnv"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h(a,"sid",b.toString())}function b(a,b){var c=a;b.forEach(function(a,b){c=h(c,b,a)});return c}function h(a,b,c){if(a.indexOf("?")>0)return a+"&"+b+"="+c;else return a+"?"+b+"="+c}function c(){return Math.floor(d("MqttEnv").Env.random()*Number.MAX_SAFE_INTEGER)}function i(a,b,c){var e=arguments.length>1?a.then(b,c):a;e.then(null,function(a){d("MqttEnv").Env.setTimeout(function(){if(a instanceof Error)throw a;else throw new Error("promiseDone")},0)})}function e(a,b,c,e){var f=!1;d("MqttEnv").Env.setTimeout(function(){f||(f=!0,c(new Error("promise timeout")))},e);i(a,function(a){f||(f=!0,b(a))},function(a){f||(f=!0,c(a))})}function f(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e=0;return a.replace(/%s/g,function(){return String(c[e++])})}g.endpointWithSessionId=a;g.endpointWithExtraParameters=b;g.endpointWithExtraParameter=h;g.generateSessionId=c;g.promiseDone=i;g.promiseDoneWithTimeout=e;g.sprintf=f}),98);
__d("MqttProtocolCodec",["MqttProtocolUtils","MqttUtils","err"],(function(a,b,c,d,e,f,g){"use strict";var h=Object.freeze({CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14}),i=[0,6,77,81,73,115,100,112,3];function j(a,b){b=b;var e=b,f=a[b],g=f>>4;b+=1;var i=d("MqttProtocolUtils").decodeMultiByteInt(a,b);if(i==null)return{position:e,wireMessage:null};b=i.offset;i=b+i.value;if(i>a.length)return{position:e,wireMessage:null};var j;switch(g){case h.CONNACK:e=a[b++];e=!!(e&1);var o=a[b++];j=new m(e,o);break;case h.PUBLISH:e=f&15;o=e>>1&3;f=d("MqttProtocolUtils").readUInt16BE(a,b);b+=2;var r=d("MqttProtocolUtils").convertUTF8ToString(a,b,f);b+=f;f=null;o===1&&(f=d("MqttProtocolUtils").readUInt16BE(a,b),b+=2);var s=p.createWithBytes(a.subarray(b,i)),t=(e&1)===1;e=(e&8)===8;j=new q(r,s,o,f,t,e);break;case h.PINGREQ:j=new k("PINGREQ");break;case h.PINGRESP:j=new k("PINGRESP");break;case h.PUBACK:case h.UNSUBACK:r=d("MqttProtocolUtils").readUInt16BE(a,b);j=new n(g===h.PUBACK?"PUBACK":"UNSUBACK",r);break;case h.SUBACK:s=d("MqttProtocolUtils").readUInt16BE(a,b);b+=2;o=a.subarray(b,i);j=new l(s,o);break;default:throw c("err")(d("MqttUtils").sprintf("Invalid MQTT message type %s.",g))}return{position:i,wireMessage:j}}function a(a){var b=[],c=0;while(c<a.length){var d=j(a,c),e=d.wireMessage;c=d.position;if(e)b.push(e);else break}d=null;c<a.length&&(d=a.subarray(c));return{messages:b,remaining:d}}b=function(){function a(a){this.messageType=h[a]}var b=a.prototype;b.encode=function(){throw new TypeError("Cannot abstract class WireMessage")};return a}();var k=function(a){function b(b){return a.call(this,b)||this}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.encode=function(){var a=new ArrayBuffer(2),b=new Uint8Array(a);b[0]=(this.messageType&15)<<4;return a};return b}(b);e=function(a){function b(){return a.call(this,"DISCONNECT")||this}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=new ArrayBuffer(2),c=new Uint8Array(b);c[0]=a;c.set(d("MqttProtocolUtils").encodeMultiByteInt(0),1);return b};return b}(b);var l=function(a){function b(b,c){var d;d=a.call(this,"SUBACK")||this;d.messageIdentifier=b;d.returnCode=c;return d}babelHelpers.inheritsLoose(b,a);return b}(b),m=function(a){function b(b,c){var d;d=a.call(this,"CONNACK")||this;d.sessionPresent=b;d.returnCode=c;return d}babelHelpers.inheritsLoose(b,a);return b}(b),n=function(a){function b(b,c){b=a.call(this,b)||this;b.messageIdentifier=c;return b}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=2,c=d("MqttProtocolUtils").encodeMultiByteInt(b),e=c.length+1;b=new ArrayBuffer(b+e);var f=new Uint8Array(b);f[0]=a;f.set(c,1);e=d("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,f,e);return b};return b}(b);f=function(a){function b(b,c){var d;d=a.call(this,"CONNECT")||this;d.clientId=b;d.connectOptions=c;return d}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.encode=function(){var a,b=(this.messageType&15)<<4,c=i.length+3;c+=(a=d("MqttProtocolUtils")).UTF8Length(this.clientId)+2;c+=a.UTF8Length(this.connectOptions.userName)+2;var e=a.encodeMultiByteInt(c);c=new ArrayBuffer(1+e.length+c);var f=new Uint8Array(c);f[0]=b;b=1;f.set(e,1);b+=e.length;f.set(i,b);b+=i.length;e=2|128;f[b++]=e;b=a.writeUInt16BE(this.connectOptions.getKeepAliveIntervalSeconds(),f,b);b=a.writeString(this.clientId,a.UTF8Length(this.clientId),f,b);b=a.writeString(this.connectOptions.userName,a.UTF8Length(this.connectOptions.userName),f,b);return c};return b}(b);var o=function(a){function b(b,c,e,f){var g;g=a.call(this,b)||this;g.topic=c;if(e<0&&e>1||e===1&&f==null)throw new TypeError(d("MqttUtils").sprintf("Argument Invalid. qos: %s messageType: %s.",e,b));g.qos=e;g.messageIdentifier=f;return g}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.encode=function(){var a=(this.messageType&15)<<4;a|=2;var b=d("MqttProtocolUtils").UTF8Length(this.topic),c=2+b+2;this.messageType===h.SUBSCRIBE&&(c+=1);var e=d("MqttProtocolUtils").encodeMultiByteInt(c);c=new ArrayBuffer(1+e.length+c);var f=new Uint8Array(c);f[0]=a;a=1;f.set(e,1);a+=e.length;this.messageIdentifier!=null&&(a=d("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,f,a));a=d("MqttProtocolUtils").writeString(this.topic,b,f,a);this.messageType===h.SUBSCRIBE&&this.qos!=null&&(f[a++]=this.qos);return c};return b}(b),p=function(){function a(a,b){this.payloadString=a,this.payloadBytes=b}a.createWithString=function(b){var c=new Uint8Array(new ArrayBuffer(d("MqttProtocolUtils").UTF8Length(b)));d("MqttProtocolUtils").convertStringToUTF8(b,c,0);return new a(b,c)};a.createWithBytes=function(b){var c=d("MqttProtocolUtils").convertUTF8ToString(b,0,b.length);return new a(c,b)};var b=a.prototype;b.string=function(){return this.payloadString};b.bytes=function(){return this.payloadBytes};return a}(),q=function(a){function b(b,c,d,e,f,g){var h;h=a.call(this,"PUBLISH")||this;h.topic=b;h.payloadMessage=c;h.qos=d;h.messageIdentifier=e;h.retained=f!=null?f:!1;h.duplicate=g!=null?g:!1;if(h.qos===1&&h.messageIdentifier==null)throw new TypeError("Argument Invalid. messageIdentifier: null and qos: 1");return h}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.encode=function(){var a=(this.messageType&15)<<4;this.duplicate&&(a|=8);a=a|=this.qos<<1;this.retained&&a!=1;var b=d("MqttProtocolUtils").UTF8Length(this.topic),c=b+2,e=this.qos===0?0:2;c+=e;e=this.payloadMessage.bytes();c+=e.byteLength;var f=d("MqttProtocolUtils").encodeMultiByteInt(c);c=new ArrayBuffer(1+f.length+c);var g=new Uint8Array(c);g[0]=a;g.set(f,1);a=1+f.length;a=d("MqttProtocolUtils").writeString(this.topic,b,g,a);this.qos!==0&&this.messageIdentifier!=null&&(a=d("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,g,a));g.set(e,a);return c};return b}(b),r=p.createWithString,s=p.createWithBytes;b={Base:b,ConnAck:m,Connect:f,Disconnect:e,Ping:k,PubAckUnsubAck:n,Publish:q,Subscription:o};g.MESSAGE_TYPE=h;g.decodeMessage=j;g.decodeByteMessages=a;g.Message=p;g.createMessageWithString=r;g.createMessageWithBytes=s;g.WireMessage=b}),98);
__d("MqttTypes",[],(function(a,b,c,d,e,f){"use strict";a=function(a,b,c){this.errorCode=a,this.errorName=b,this.errorMessage=c};b=Object.freeze({APP_DISCONNECT:new a(7,"APP_DISCONNECT","Disconnect initiated by app"),BROWSER_CLOSE:new a(11,"BROWSER_CLOSE","Browser closed"),CONNACK_FAILURE:new a(5,"CONNACK_FAILURE","Connection failure due to connack"),CONNECT_TIMEOUT:new a(4,"CONNECT_TIMEOUT","Connect timed out"),INVALID_DATA_TYPE:new a(3,"INVALID_DATA_TYPE","Received non-arraybuffer from socket."),PING_TIMEOUT:new a(6,"PING_TIMEOUT","Ping timeout"),RECONNECT:new a(10,"RECONNECT","Reconnecting"),SERVER_DISCONNECT:new a(8,"SERVER_DISCONNECT","Disconnect message sent my server"),SOCKET_CLOSE:new a(9,"SOCKET_CLOSE","Socket connection closed"),SOCKET_ERROR:new a(1,"SOCKET_ERROR","Socket error"),SOCKET_MESSAGE:new a(2,"SOCKET_MESSAGE","Unable to parse invalid socket message")});c=function(a,b){this.mqttError=a,this.connAck=b};d=function(a){function b(b,c,d){d===void 0&&(d=null);c=a.call(this,c)||this;c.isRecoverable=b;c.originalError=d;return c}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));f.MqttError=a;f.MqttErrors=b;f.ConnectFailure=c;f.MqttChannelError=d}),66);
__d("MqttProtocolClient",["ErrorSerializer","MqttEnv","MqttProtocolCodec","MqttProtocolUtils","MqttTypes","err","getErrorSafe"],(function(a,b,c,d,e,f,g){"use strict";var h=20,i=6e4;a=function(){function a(a){var b=this;this.$12=function(a,c,e){c===void 0&&(c=null);b.$9.bumpCounter("protocol.debug.disconnect.internal."+a.errorName);b.$9.bumpCounter("protocol.debug.disconnect.internal");var f=b.$5,g=b.$2,h=g.onConnectFailure,i=g.onConnectionLost;b.setConnected(!1);b.$14();f?d("MqttEnv").Env.scheduleCallback(function(){i(a,c)}):d("MqttEnv").Env.scheduleCallback(function(){h(b.$11,new(d("MqttTypes").ConnectFailure)(a,e!=null?e:-1),c)})};this.$13=function(a){var c=b.$6;if(c==null){b.$9.bumpCounter("protocol.socket_send.failed.socket_null.<message type>");return 0}if(c.readyState!==c.OPEN){b.$9.bumpCounter("protocol.socket_send.failed.socket_not_open.<message type>");return 0}a=a.encode();var d=a.byteLength;c.send(a);return d};this.$3=a;this.$2={getKeepAliveIntervalSeconds:function(){return 10},getKeepAliveTimeoutSeconds:function(){return 10},ignoreSubProtocol:!1,mqttVersion:3,onConnectFailure:function(a,b,c){},onConnection:function(){},onConnectionLost:function(a,b){},onConnectSuccess:function(a){},onMessageArrived:function(a,b,c){},onMessageDelivered:function(a){},userName:""};this.$1="mqttwsclient";this.$4=0;this.$5=!1;this.$9=d("MqttEnv").Env.getLoggerInstance();this.$11=0}var b=a.prototype;b.connect=function(a){var b=this;if(this.$5)throw c("err")("Invalid state: connect - already connected");this.$2=a;this.setConnected(!1);this.$7!=null&&(d("MqttEnv").Env.clearTimeout(this.$7),this.$7=null);this.$7=d("MqttEnv").Env.setTimeout(function(){b.$9.bumpCounter("protocol.error.connect.timeout"),b.$12(d("MqttTypes").MqttErrors.CONNECT_TIMEOUT)},h*1e3);this.$6=d("MqttEnv").Env.createSocket(this.$3);this.$6.binaryType="arraybuffer";this.$6.onopen=function(){b.setConnected(!0),b.$9.debugTrace("Socket-Open","MQTTProtocolClient Socket Open"),b.$11=b.$13(new(d("MqttProtocolCodec").WireMessage.Connect)(b.$1,a)),a.onConnection()};this.$6.onmessage=function(a){a=a.data;if(!(a instanceof ArrayBuffer)){b.$9.bumpCounter("protocol.error.onmessage.type");b.$12(d("MqttTypes").MqttErrors.INVALID_DATA_TYPE);return}try{a=new Uint8Array(a);b.$10!=null&&(a=d("MqttProtocolUtils").concatBuffers(b.$10,a),b.$9.bumpCounter("protocol.debug.usingMessagesBuffer"),delete b.$10,b.$10=null);a=d("MqttProtocolCodec").decodeByteMessages(a);var c=a.messages;b.$10=a.remaining;for(a=0;a<c.length;a++)b.handleMessage(c[a])}catch(a){b.$10=null,b.$9.logError(a,d("MqttTypes").MqttErrors.SOCKET_MESSAGE.errorMessage),b.$9.bumpCounter("protocol.error.onmessage.parse"),b.$12(d("MqttTypes").MqttErrors.SOCKET_MESSAGE,a.message)}};this.$6.onerror=function(a){b.$9.bumpCounter("protocol.error.socket");b.$9.debugTrace("Socket-Error","MQTTProtocolClient Socket Error");a=typeof a==="object"&&a!=null&&"error"in a&&!("message"in a)?a.error:a;b.$12(d("MqttTypes").MqttErrors.SOCKET_ERROR,c("ErrorSerializer").toReadableMessage(c("getErrorSafe")(a)))};this.$6.onclose=function(a){b.$9.bumpCounter("protocol.socket.close"),a.wasClean||b.$9.debugTrace("Socket-Unclean-Close","MQTTProtocolClient error code: "+a.code+" reason: "+a.reason),b.$12(d("MqttTypes").MqttErrors.SOCKET_CLOSE,a.code+" : "+a.reason)};this.$8!=null&&this.$8.cancel();this.$8=new(d("MqttProtocolUtils").Pinger)(a.getKeepAliveIntervalSeconds,a.getKeepAliveTimeoutSeconds,this.$13.bind(this,new(d("MqttProtocolCodec").WireMessage.Ping)("PINGREQ")),function(a,c){return b.$12(d("MqttTypes").MqttErrors.PING_TIMEOUT,a,c)})};b.$14=function(){var a=this;this.setConnected(!1);this.$8!=null&&this.$8.cancel();this.$7!=null&&(d("MqttEnv").Env.clearTimeout(this.$7),this.$7=null);this.$6!=null&&(this.$6.onopen=function(b){a.$9.debugTrace("Socket Open After Teardown","Socket opening after teardown")},this.$6.onmessage=function(a){},this.$6.onerror=function(a){},this.$6.onclose=function(b){a.$9.debugTrace("Socket Close After Teardown","code: "+b.code+", reason: "+b.reason)},this.$6.close(),this.$6=null);this.$2.onConnectSuccess=function(a){};this.$2.onConnectFailure=function(a,b){};this.$2.onConnection=function(){};this.$2.onConnectionLost=function(a){};this.$2.onMessageArrived=function(a,b,c){};this.$2.onMessageDelivered=function(a){}};b.disconnect=function(a){if(this.$6==null||this.$6.readyState!==this.$6.OPEN||!this.$5){this.$14();return}this.$13(new(d("MqttProtocolCodec").WireMessage.Disconnect)());this.$9.bumpCounter("protocol.debug.disconnect");this.$12(a)};b.isConnected=function(){return this.$5};b.setConnected=function(a){this.$5=a};b.subscribe=function(a){if(!this.$5){this.$9.bumpCounter("protocol.error.subscribe.notconnected");throw c("err")("Invalid state: subscribe - not connected")}this.$9.bumpCounter("protocol.subscribe."+a);a=new(d("MqttProtocolCodec").WireMessage.Subscription)("SUBSCRIBE",a,0,this.$15());this.$13(a)};b.unsubscribe=function(a){if(!this.$5){this.$9.bumpCounter("protocol.error.unsubscribe.notconnected");throw c("err")("Invalid state: unsubscribe - not connected")}this.$9.bumpCounter("protocol.unsubscribe."+a);a=new(d("MqttProtocolCodec").WireMessage.Subscription)("UNSUBSCRIBE",a,0,this.$15());this.$13(a)};b.publish=function(a,b,c){return this.$16(a,d("MqttProtocolCodec").createMessageWithString(b),c)};b.publishBinary=function(a,b,c){return this.$16(a,d("MqttProtocolCodec").createMessageWithBytes(b),c)};b.$16=function(a,b,c){this.$5||this.$9.bumpCounter("protocol.error.publish.notconnected");this.$9.bumpCounter("protocol.publish."+a);var e=this.$15();a=new(d("MqttProtocolCodec").WireMessage.Publish)(a,b,c,e);this.$13(a);return e};b.$15=function(){++this.$4===i&&(this.$4=1);return this.$4};b.handleMessage=function(a){var b=this;switch(a.messageType){case d("MqttProtocolCodec").MESSAGE_TYPE.CONNACK:this.$7!=null&&(d("MqttEnv").Env.clearTimeout(this.$7),this.$7=null);if(a instanceof d("MqttProtocolCodec").WireMessage.ConnAck){var e=a;if(e.returnCode!==0){this.$9.bumpCounter("protocol.error.connack.invalidreturncode");this.setConnected(!1);this.$12(d("MqttTypes").MqttErrors.CONNACK_FAILURE,"connack code="+e.returnCode,e.returnCode);return}d("MqttEnv").Env.scheduleCallback(function(){b.$2.onConnectSuccess(b.$11)});this.$8!=null&&this.$8.reset()}break;case d("MqttProtocolCodec").MESSAGE_TYPE.PUBLISH:if(a instanceof d("MqttProtocolCodec").WireMessage.Publish){var f=a;d("MqttEnv").Env.scheduleCallback(function(){b.$2.onMessageArrived(f.topic,f.payloadMessage,f.qos)});e=f.messageIdentifier;this.$9.bumpCounter("protocol.publish.received");if(f.qos===1&&e!=null){e=new(d("MqttProtocolCodec").WireMessage.PubAckUnsubAck)("PUBACK",e);this.$13(e)}}break;case d("MqttProtocolCodec").MESSAGE_TYPE.PUBACK:if(a instanceof d("MqttProtocolCodec").WireMessage.PubAckUnsubAck){e=a;var g=e.messageIdentifier;this.$9.bumpCounter("protocol.puback.received");d("MqttEnv").Env.scheduleCallback(function(){b.$2.onMessageDelivered(g)})}break;case d("MqttProtocolCodec").MESSAGE_TYPE.PINGRESP:this.$8!=null&&this.$8.reset();break;case d("MqttProtocolCodec").MESSAGE_TYPE.DISCONNECT:this.$12(d("MqttTypes").MqttErrors.SERVER_DISCONNECT);break;case d("MqttProtocolCodec").MESSAGE_TYPE.SUBACK:this.$9.bumpCounter("protocol.suback.received");break;case d("MqttProtocolCodec").MESSAGE_TYPE.UNSUBACK:this.$9.bumpCounter("protocol.unsuback.received");break;default:this.$9.logError(c("err")("MqttProtocolClient: Received unhandled message type: "+a.messageType),"Received unhandled message type");this.$9.bumpCounter("protocol.error.handlemessage.unsupportedtype");break}};return a}();g["default"]=a}),98);
__d("MqttPublishListener",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({NOT_CONNECTED:"NOT_CONNECTED",PUBLISH_ERROR:"PUBLISH_ERROR",QUEUED:"QUEUED",SENT:"SENT",ACKED:"ACKED",NOT_ACKED:"NOT_ACKED"});f.MqttPublishEvent=a}),66);
__d("MqttUserNameUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a!=null?a:typeof document==="object"&&document&&document.hasFocus&&document.hasFocus()}function b(){return navigator.userAgent}f.getMqttForegroundStatus=a;f.getUserAgent=b}),66);
__d("MqttUserName",["MqttUserNameUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,e,f,g,h,i,j,k,l,m){h===void 0&&(h=null),i===void 0&&(i=""),j===void 0&&(j="websocket"),k===void 0&&(k=null),l===void 0&&(l=null),m===void 0&&(m=null),this.$1=a,this.$2=b,this.$3=c,this.$4=e,this.$5=f,this.$6=g,this.$7=d("MqttUserNameUtils").getMqttForegroundStatus(),this.$8=h,this.$9=i,this.$10=j,this.$11=k,this.$12=l,this.$13=m}var b=a.prototype;b.gen=function(a,b,c,e){e===void 0&&(e=[]);var f=d("MqttUserNameUtils").getMqttForegroundStatus(this.$7);c=c.map(function(a){a={isBase64Publish:!1,messageId:a.messageId,payload:a.payload,qos:a.qos,topic:a.topic};typeof a.payload!=="string"&&(a.payload=btoa(String.fromCharCode.apply(null,a.payload)),a.isBase64Publish=!0);return a});f={a:d("MqttUserNameUtils").getUserAgent(),asi:this.$13,aid:this.$5,aids:this.$12!=null?Object.fromEntries(this.$12):null,chat_on:this.$6,cp:this.$3,ct:this.$10,d:this.$4,dc:"",ecp:this.$2,fg:f,gas:this.$8,mqtt_sid:"",no_auto_fg:!0,p:this.$11,pack:e,php_override:this.$9,pm:c,s:a,st:b,u:this.$1};return JSON.stringify(f)};b.setForegroundState=function(a){this.$7=a};b.setChatVisibility=function(a){this.$6=a};b.getEndpointCapabilities=function(){return this.$2};b.getDeviceId=function(){return this.$4};b.setEndpointCapabilities=function(a){this.$2=a};b.getIsGuestAuthStringPresent=function(){return this.$8!==null};return a}();g["default"]=a}),98);
__d("MqttConnection",["MqttConnectionHookCollection","MqttEnv","MqttProtocolClient","MqttPublishListener","MqttTypes","MqttUserName","MqttUtils","Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i=15,j=15,k=1,l=1,m=64,n="publish",o="subscribe",p="unsubscribe",q=function(a){},r=18e4,s=5*1e3,t=15,u=21;a=function(){function a(){var a=this;this.$38=function(){return a.$20};this.$39=function(){return a.$21};this.$8=!1;this.$10=d("MqttEnv").Env.getLoggerInstance();this.$11="Disconnected";this.$17=new Set();this.$24=new Map();this.$12=0;this.$13=0;this.$14=0;this.$15=0;this.$16=0;this.$8=!1;this.$5="";this.$6=new(c("MqttUserName"))("",0,1,"",0,!0);this.$9=0;this.$18=0;this.$19=!1;this.$7=null;var b=function(){};this.$1=b;this.$2=b;this.$3=b;this.$25=!1;this.$26=!1;this.$27=new(c("MqttConnectionHookCollection"))();this.$4=function(){return[]};this.$20=i;this.$21=j;this.$22=null;this.$23=0}var e=a.prototype;e.run=function(a){var b=this,c=a.endpoint,d=a.extraConnectMessageProvider,e=a.mqttUserName,f=a.onJSError,g=a.onMessageReceived,h=a.onStateChange;a=a.subscribedTopics;if(this.$8){this.$10.debugTrace("run","Run called while in running state.");return}this.$1=h;this.$3=g;this.$5=c;this.$6=e;this.$8=!0;this.$18=Date.now();this.$12=0;this.$13=0;this.$2=f||q;a&&a.forEach(function(a){return b.$17.add(a)});this.$4=d;this.$20=i;this.$21=j;this.$28()};e.shutdown=function(a){this.$29(a),this.$30("shutdown"),this.$8=!1,this.$10.debugTrace("shutdown","Shutdown")};e.subscribe=function(a){this.$17.add(a);this.ensureConnected(o)&&this.$31(a);return!0};e.publish=function(a,b,c,d){return this.$32(a,b,c,d)};e.publishBinary=function(a,b,c,d){return this.$32(a,b,c,d)};e.$32=function(a,e,f,g){var i={reject:function(a){},resolve:function(){}};g!=null&&(i.listener=g);var j=new(h||(h=b("Promise")))(function(a,b){i.resolve=a,i.reject=b}),k=this.ensureConnected(n);!k?(g==null||g.onEvent(d("MqttPublishListener").MqttPublishEvent.NOT_CONNECTED),i.reject(c("err")("Client disconnected"))):this.$33(a,e,f,i);return j};e.unsubscribe=function(a){this.$17["delete"](a);this.ensureConnected(p)&&this.$34(a);return!0};e.addHook=function(a){this.$27.addHook(a)};e.removeHook=function(a){this.$27.removeHook(a)};e.isRunning=function(){return this.$8};e.getSessionId=function(){return this.$9};e.hasFatal=function(){return this.$25};e.hasConnectSuccess=function(){return this.$26};e.canPublish=function(){return this.ensureConnected("canPublish")};e.ensureConnected=function(a){return!this.$8||this.$7==null||!this.$7.isConnected()?!1:!0};e.connectionState=function(){return this.$11};e.mqttStateFromConnectionState=function(a){switch(a){case"Connecting":case"TransportConnected":return"Connecting";case"Connected":return"Connected";case"Disconnected":return"Disconnected"}throw c("err")("Unknown state "+a)};e.testOnlyGetSubscribedTopics=function(){return this.$17};e.getDisconnectCount=function(){return this.$23};e.$29=function(a){this.$8&&this.$7!=null&&(this.$35("Disconnected"),this.$7!=null&&(this.$7.disconnect(a),this.$27.onConnectionDisconnect()),this.$7=null)};e.$36=function(a){if(this.$11==="Connected"&&a==="Disconnected"&&this.$18===0){this.$18=Date.now();return}if(a==="Connecting"&&this.$18!==0&&!this.$19){this.$10.bumpCounter("protocol.reconnectstarted");this.$19=!0;return}if(a==="Connected"&&this.$18!==0){a=Date.now()-this.$18;switch(Math.floor(a/3e4)){case 0:this.$10.bumpCounter("protocol.reconnectedwithin30s");break;case 1:this.$10.bumpCounter("protocol.reconnectedwithin60s");break;case 2:this.$10.bumpCounter("protocol.reconnectedwithin90s");break;case 3:this.$10.bumpCounter("protocol.reconnectedwithin120s");break;default:this.$10.bumpCounter("protocol.reconnectedmorethan120s");break}this.$18=0;this.$19=!1;return}};e.$35=function(a){a!==this.$11&&(this.$10.debugTrace("MQTTConnection-updateState","State changed to: "+a),this.$36(a),this.$11=a,this.$1(a))};e.$28=function(){var a=this;if(!this.$8)return;this.$11!=="Disconnected"&&this.$10.debugTrace("Reconnect","Current State not disconnected: "+this.$11);this.$35("Connecting");var b=Date.now(),e=this.$10.getBrowserConnectivity();this.$9=d("MqttUtils").generateSessionId();var f=Array.from(this.$17),g=d("MqttUtils").endpointWithSessionId(this.$5,this.$9);g=d("MqttUtils").endpointWithExtraParameter(g,"cid",this.$6.getDeviceId());try{this.$7=new(c("MqttProtocolClient"))(g);var h=this.$37(),i=h.map(function(a){return a.topic});g=this.$6.gen(this.$9,f,h);this.$7!=null&&(this.$13+=1,this.$7.connect({getKeepAliveIntervalSeconds:this.$38,getKeepAliveTimeoutSeconds:this.$39,ignoreSubProtocol:!0,mqttVersion:3,onConnectFailure:function(c,d,g){return a.$40(d,b,a.$18,f,i,e,c,g)},onConnection:function(){return a.$41(h,f)},onConnectionLost:function(b,c){return a.$42(b,c)},onConnectSuccess:function(c){return a.$43(b,a.$18,f,i,e,c)},onMessageArrived:function(b,c,d){return a.$44(b,c,d)},onMessageDelivered:function(b){return a.$45(b)},userName:g}),this.$10.bumpCounter("protocol.connectattempt"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.connectattempt"),this.$27.onConnectAttempt())}catch(a){this.$10.bumpCounter("js_error_in_init_exception"),this.$35("Disconnected"),this.$46(!1,!1,b,this.$18,f,[],e,null,14,"init error - "+a.message),a&&this.$10.logErrorWarn(a,"ws_js_error"),this.$27.onWSFatal(),this.$47(new(d("MqttTypes").MqttChannelError)(!1,"ws_js_error",a),"client_init")}};e.$37=function(){var a=this.$4(),b=65536;return a.map(function(a){a.messageId=b--;return a})};e.$31=function(a){try{if(this.$7!=null){this.$7.subscribe(a);this.$10.debugTrace("#doSubscribe","Subscribing to "+a);this.$27.onSubscribe(a);this.$10.bumpCounter("protocol.subscribe");return!0}}catch(b){this.$10.logError(b,"Exception subscribing"),this.$10.bumpCounter("subscribe_exception."+a),this.$10.bumpCounter("protocol.subscribe.error")}return!1};e.$34=function(a){try{if(this.$7!=null){this.$7.unsubscribe(a);this.$10.debugTrace("#doUnsubscribe","Unsubscribing to "+a);this.$27.onUnsubscribe(a);this.$10.bumpCounter("protocol.unsubscribe");return!0}}catch(b){this.$10.logError(b,"Exception unsubscribing"),this.$10.bumpCounter("unsubscribe_exception."+a),this.$10.bumpCounter("protocol.unsubscribe.error")}return!1};e.$33=function(a,b,c,e){if(this.$7!=null)try{var f;typeof b==="string"?f=this.$7.publish(a,b,c):f=this.$7.publishBinary(a,b,c);this.$10.bumpCounter("protocol.publish");b=f!=null?f:"null";this.$10.debugTrace("#doPublish","publish "+a+" with messageId:"+b+" qos:"+c);this.$27.onPublish(a);(b=e.listener)==null||b.onEvent(d("MqttPublishListener").MqttPublishEvent.SENT);f!=null?(this.$10.bumpCounter("publish.ack_expected"),this.$24.set(f,e)):e.resolve();return!0}catch(b){this.$10.logError(b,"Exception publishing");this.$10.bumpCounter("publish_exception."+a);e.reject(b);this.$10.bumpCounter("protocol.publish.error");return!1}else return!1};e.$48=function(a){var b=this;a===void 0&&(a=null);if(!this.$8)return;this.$29(d("MqttTypes").MqttErrors.RECONNECT);this.$30("reconnect");this.$49();this.$9=-1;this.$16=0;a=a;a==null&&(a=k*Math.pow(2,this.$12));a=Math.max(a,l);a=Math.min(a,m);a=a*(1e3+d("MqttEnv").Env.random()*200);this.$10.debugTrace("#scheduleReconnect","Reconnect in "+a+" ms");this.$22=d("MqttEnv").Env.setTimeout(function(){b.$28()},a);this.$12+=1};e.$49=function(){var a=Date.now()-this.$16,b=this.$16!==0&&a>s,c=this.$12>t;(b||c)&&(this.$12=0);this.$16!==0&&a<=s&&this.$10.bumpCounter("short_lived_session");c&&this.$10.bumpCounter("connection_attempt_limit")};e.$46=function(a,b,c,d,e,f,g,h,i,j){a?this.$14++:this.$15++;var k=Date.now();this.$10.eventLogConnect({ackReceived:b,attemptNumber:this.$13,connectionState:this.mqttStateFromConnectionState(this.$11),connectionStatus:a,disconnectCount:this.$23,duration:k-c,errorCode:i,errorMessage:j,failTotal:this.$15,hostname:this.$5,messageSizeBytes:h,osConnectivity:g,publishes:f,sessionID:this.$9,subscribedTopics:e,successTotal:this.$14,total_duration:k-d});a&&(this.$13=0)};e.$40=function(a,b,c,d,e,f,g,h){var i=a.mqttError;h=h!=null?i.errorMessage+" - "+h:i.errorMessage;this.$10.debugTrace("connect","Connect failed "+h);this.$10.bumpCounter("protocol.onconnectfailure");this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectfailure");this.$27.onConnectFailure();this.$46(!1,a.connAck!==-1,b,c,d,e,f,g,i.errorCode,h);if(a.connAck!=null){this.$10.bumpCounter("protocol.connect_failure."+a.connAck);if(a.connAck===u){this.$48(r);return}}this.$48()};e.$41=function(a,b){var c=this;this.$10.bumpCounter("protocol.onconnection");this.$10.debugTrace("Connect","Socket established");this.$27.onConnected();this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnection");b.forEach(function(a){c.$27.onSubscribe(a)});a.forEach(function(a){c.$27.onPublish(a.topic)});this.$35("TransportConnected")};e.$43=function(a,b,c,d,e,f){this.$10.bumpCounter("protocol.onconnectsuccess"),this.$10.debugTrace("connect","Connect success"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectsucess"),this.$27.onConnectSuccess(),this.$26=!0,this.$35("Connected"),this.$46(!0,!0,a,b,c,d,e,f),this.$50(c),this.$16=Date.now()};e.$42=function(a,b){this.$10.bumpCounter("protocol.onconnectionlost");this.$23++;if(a.errorCode){b=b!=null?a.errorMessage+" - "+b:a.errorMessage;this.$10.eventLogDisconnect({disconnectCount:this.$23,duration:Date.now()-this.$16,errorCode:a.errorCode,errorMessage:b,sessionID:this.$9})}this.$10.debugTrace("connect","connection lost");this.$27.onConnectionLost();this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectionlost");this.$48()};e.$44=function(a,b,c){this.$10.bumpCounter("protocol.onmessagearrived");this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onmessagearrived");this.$10.debugTrace("onMessageArrived","Message received on "+a);this.$27.onMessage(a);try{this.$3(a,b,c)}catch(b){this.$10.logError(b,"Listener threw error"),this.$10.bumpCounter("listener_error."+a)}};e.$45=function(a){this.$10.bumpCounter("protocol.onmessagedelivered");var b=a!=null?a:"null";this.$10.debugTrace("onMessageDelivered","Delivered Message {ID: "+b+"}");if(a==null)return;b=this.$24.get(a);if(b==null){this.$10.bumpCounter("protocol.message_with_unknown_id");return}this.$24["delete"](a);(a=b.listener)==null||a.onEvent(d("MqttPublishListener").MqttPublishEvent.ACKED);b.resolve();this.$10.bumpCounter("publish.ack_received")};e.$30=function(a){this.$10.bumpCounter("protocol.fail_all_unacked_publishes."+a),this.$24.forEach(function(b,e,f){(e=b.listener)==null||e.onEvent(d("MqttPublishListener").MqttPublishEvent.NOT_ACKED);b.reject(c("err")(a))}),this.$24.clear()};e.$50=function(a){var b=this,c=new Set(a);c.forEach(function(a){b.$17.has(a)||b.unsubscribe(a)});a=new Set(this.$17);a.forEach(function(a){c.has(a)||b.subscribe(a)})};e.$47=function(a,b){try{this.$10.bumpCounter("js_error_in_init");this.$10.bumpCounter(b+".error");this.$25=!0;var c=a?a.message:"error";this.$10.debugTrace("onError",b+": "+c);this.$2(a)}catch(a){this.$10.bumpCounter("js_error_in_error_logging"),this.$10.logError(a,"JS error while trying to log previous error")}};e.setRunning_OnlyForTests=function(a){this.$8=a};return a}();g["default"]=a}),98);
__d("MqttWebSocketUtils",[],(function(a,b,c,d,e,f){"use strict";function b(){return"WebSocket"in a&&a.WebSocket!=null&&"CLOSING"in a.WebSocket.prototype}f.hasWSSupport=b}),66);
__d("isFastRefreshEnabledForCurrentDomain",[],(function(a,b,c,d,e,f){"use strict";function a(){return!1}f["default"]=a}),66);
__d("MqttChannel",["ChannelClientID","IrisSubscribeChecker","MetaConfig","MqttAnalyticsHook","MqttConnection","MqttEnv","MqttPublishListener","MqttTypes","MqttUserName","MqttUtils","MqttWebSocketUtils","Promise","Run","err","isFastRefreshEnabledForCurrentDomain","promiseDone","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=29125;a=function(){function a(a){var b=this,e=a.endpoint,f=a.pollingEndpoint,g=a.userFbid,h=a.appId,i=a.initialSubscribedTopics,j=a.capabilities,k=a.clientCapabilities,l=a.chatVisibility;l=l===void 0?!0:l;var m=a.guestAuthString;m=m===void 0?null:m;var n=a.phpOverride;n=n===void 0?"":n;var o=a.clientType;o=o===void 0?"websocket":o;var p=a.deviceId;p=p===void 0?c("ChannelClientID").getID():p;var q=a.pageId;q=q===void 0?null:q;var r=a.assetIds;r=r===void 0?null:r;a=a.appSpecificInfo;a=a===void 0?null:a;this.$11=d("MqttEnv").Env.getLoggerInstance();this.$11.setAppId(h);this.$12=new(c("MqttUserName"))(g,j,k,p,h,l,m,n,o,q,r,a);this.$1=e;this.$2=f;this.$5="Disconnected";this.$7="LPInactive";this.$6="Disconnected";this.$3=[];this.$4=new Set();this.$8=new Map();this.$9=new Map();this.$10=new(c("MqttConnection"))();this.$13=null;this.$16=new(c("MqttAnalyticsHook"))();this.$15=new Map();this.$14=[];if(!d("MqttEnv").Env.isUserLoggedInNow()&&!c("isFastRefreshEnabledForCurrentDomain")()&&(m==null||m=="")){this.$11.bumpCounter("logged_out_init");return}this.$10.addHook(this.$16);this.$10.addHook(new(c("IrisSubscribeChecker"))(function(){return b.$4.size>0}));this.$17(i);this.$18()}var e=a.prototype;e.$17=function(a){var b=this;if(this.$10.isRunning()){this.$19("run","Connection started calling run again");return}if(d("MqttEnv").Env.genGk(d("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled))if(c("MetaConfig")._("15")){this.$19("MqttChannel","Websocket disabled, will do long polling only");return}else if(!d("MqttWebSocketUtils").hasWSSupport()){this.$19("MqttChannel","Websocket Unavailable, will do long polling only");this.$11.bumpCounter("ws_unavailable_polling");return}this.$10.run({endpoint:this.$1,extraConnectMessageProvider:function(){return b.$20()},mqttUserName:this.$12,onJSError:function(a){b.$21(a)},onMessageReceived:function(a,c,d){b.$22(a,c,d)},onStateChange:function(a){b.$23(a)},subscribedTopics:a});this.$24()};e.$24=function(){var a=this;d("Run").onUnload(function(){a.$25(d("MqttTypes").MqttErrors.BROWSER_CLOSE)})};e.shutdown=function(){this.$25(d("MqttTypes").MqttErrors.APP_DISCONNECT)};e.$25=function(a){this.$10&&this.$10.shutdown(a),this.$13&&this.$13.shutdown(),this.$16.onTabClose()};e.publish=function(a,b,c){c===void 0&&(c={qos:1,skipBuffer:!1});return this.$26(a,b,c)};e.publishBinary=function(a,b,c){c===void 0&&(c={qos:1,skipBuffer:!1});return this.$26(a,b,c)};e.$26=function(a,b,c){c===void 0&&(c={qos:1,skipBuffer:!1});var e;c.qos===0?e=this.$27(a,b,c.listener):e=this.$28(a,b,c);d("MqttUtils").promiseDone(e,function(){},function(a){(a=c.listener)==null||a.onEvent(d("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR)});return e};e.$27=function(a,b,c){return this.$29(a,b,0,c,1,null)};e.$28=function(a,c,e){var f={reject:function(a){},resolve:function(){}},g=new(h||(h=b("Promise")))(function(a,b){f.resolve=a,f.reject=b}),i=d("MqttEnv").Env.random();c={ack:f,attempt:0,options:e,payload:c,publishToken:i,startTime:Date.now(),timeoutId:null,topic:a};if(e.skipBuffer)if(this.$10.connectionState()==="Connecting"){this.$14.push(c);(a=e.listener)==null||a.onEvent(d("MqttPublishListener").MqttPublishEvent.QUEUED)}else this.$30(c);else{c.timeoutId=this.$31(i);this.$15.set(i,c);(a=e.listener)==null||a.onEvent(d("MqttPublishListener").MqttPublishEvent.QUEUED);this.$32(c)}return g};e.$30=function(a){a.attempt+=1,d("MqttUtils").promiseDone(this.$29(a.topic,a.payload,a.options.qos,a.options.listener,a.attempt,a.startTime),function(){a.ack.resolve()},function(b){a.ack.reject(b)})};e.$32=function(a){var b=this;a.attempt+=1;d("MqttUtils").promiseDone(this.$29(a.topic,a.payload,a.options.qos,a.options.listener,a.attempt,a.startTime),function(){return b.$33(a)},function(a){})};e.$29=function(a,b,e,f,g,h){var i=this,j,k,l=this.getConnectionState(),m=Date.now();!this.$10.canPublish()&&this.$13&&this.$13.canPublish()?(typeof b==="string"?j=this.$13.publish(a,b,e):j=this.$13.publishBinary(a,b,e),k="lp",f!=null&&(j=j.then(function(){return f.onEvent(d("MqttPublishListener").MqttPublishEvent.SENT)})),this.$11.bumpCounter("try_publish_lp")):(typeof b==="string"?j=this.$10.publish(a,b,e,f):j=this.$10.publishBinary(a,b,e,f),k="ws",this.$11.bumpCounter("try_publish_ws"));c("promiseDone")(j,function(){i.$11.eventLogOutgoingPublish({attempt:g,connectionState:l,disconnectCount:i.$10.getDisconnectCount(),errorMessage:null,firstAttemptStartTime:h,payloadSizeBytes:b.length*2,protocol:k,qos:e,sessionID:i.$10.getSessionId(),success:!0,thisAttemptStartTime:m,topic:a})},function(c){i.$11.eventLogOutgoingPublish({attempt:g,connectionState:l,disconnectCount:i.$10.getDisconnectCount(),errorMessage:c!=null?c.toString():null,firstAttemptStartTime:h,payloadSizeBytes:b.length*2,protocol:k,qos:e,sessionID:i.$10.getSessionId(),success:!1,thisAttemptStartTime:m,topic:a})});return j};e.subscribe=function(a,b){var c=this;this.$10.subscribe(a);var d=this.$8.get(a);!d?(d=[b],this.$8.set(a,d)):d.push(b);return function(){var d=c.$8.get(a)||[];d=d.filter(function(a){return a!==b});c.$8.set(a,d);d.length===0&&c.unsubscribeAll(a)}};e.subscribeBinary=function(a,b){var c=this;this.$10.subscribe(a);var d=this.$9.get(a);!d?(d=[b],this.$9.set(a,d)):d.push(b);return function(){var d=c.$9.get(a)||[];d=d.filter(function(a){return a!==b});c.$9.set(a,d);d.length===0&&c.unsubscribeAll(a)}};e.subscribeChannelEvents=function(a){var b=this;this.$3.push(a);return function(){b.unsubscribeChannelEvents(a)}};e.unsubscribeChannelEvents=function(a){a=this.$3.indexOf(a);a>-1&&this.$3.splice(a,1)};e.registerExtraConnectPayloadProvider=function(a){var b=this;this.$19("MqttChannel","registerExtraConnectPayloadProvider called");this.$4.add(a);if(this.$10.isRunning()){a=a.getPublishMessages();a.forEach(function(a){typeof a.payload==="string"?b.publish(a.topic,a.payload,{qos:a.qos,skipBuffer:!0}):b.publishBinary(a.topic,a.payload,{qos:a.qos,skipBuffer:!0})})}};e.unregisterExtraConnectPayloadProvider=function(a){this.$4["delete"](a)};e.unsubscribeAll=function(a){this.$10.unsubscribe(a),this.$8["delete"](a),this.$9["delete"](a)};e.getConnectionState=function(){return this.$5};e.getLongPollingStatus=function(){return this.$7};e.getEndpoint=function(){return this.$1};e.addHook=function(a){this.$10.addHook(a)};e.removeHook=function(a){this.$10.removeHook(a)};e.testOnlyMessageReceived=function(a,b){this.$22(a,b,-1)};e.$34=function(a){var b=this.$15.get(a);b!=null&&b.timeoutId!=null&&d("MqttEnv").Env.clearTimeout(b.timeoutId);this.$15["delete"](a)};e.$31=function(a){var b=this;return d("MqttEnv").Env.setTimeout(function(a){var d=b.$15.get(a);if(!d)return;var e=d.topic;b.$11.bumpCounter("publish_timeout."+e);b.$11.debugTrace("publish_timeout","Timeout publishing topic: "+e+" publishToken: "+a);b.$34(a);d.ack.reject(c("err")("Publish Timed Out"))},i,a)};e.$33=function(a){var b=a.publishToken,c=this.$15.get(b);if(!c)return;this.$34(b);a.ack.resolve();this.$11.debugTrace("publish_success","Topic: "+a.topic+" publishToken: "+a.publishToken);this.$11.bumpCounter("publish_success."+a.topic)};e.$22=function(a,b,c){var d=this.$8.get(a);this.$11.eventLogIncomingPublish({connectionState:this.getConnectionState(),disconnectCount:this.$10.getDisconnectCount(),payloadSizeBytes:b.payloadString.length*2,qos:c,sessionID:this.$10.getSessionId(),topic:a});if(!d)this.$11.debugTrace("_onMessageReceived",a+" being dropped, no listeners");else for(d of d)try{d(b.payloadString)}catch(a){this.$11.logError(a,"Listener exception"),this.$11.bumpCounter("listener_error")}d=this.$9.get(a);this.$11.eventLogIncomingPublish({connectionState:this.getConnectionState(),disconnectCount:this.$10.getDisconnectCount(),payloadSizeBytes:b.payloadBytes.length,qos:c,sessionID:this.$10.getSessionId(),topic:a});if(!d)this.$11.debugTrace("_onMessageReceived",a+" being dropped, no binary listeners");else for(c of d)try{c(b.payloadBytes)}catch(a){this.$11.logError(a,"Binary Listener exception"),this.$11.bumpCounter("listener_error")}};e.$21=function(a){if(d("MqttEnv").Env.genGk(d("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled)){a.isRecoverable?this.$11.bumpCounter("recoverable_error_skipped"):this.$11.bumpCounter("unrecoverable_error_skipped");return}a.isRecoverable?this.$11.bumpCounter("recoverable_error_not_skipped"):this.$11.bumpCounter("unrecoverable_error_not_skipped");this.$35(a)};e.$36=function(a){this.$35(a)};e.$35=function(a){for(var b of this.$3)b.onJSError&&b.onJSError(a)};e.$37=function(){var a=this;this.$14.forEach(function(b){a.$30(b),a.$11.bumpCounter("publish_from_temp_buffer."+b.topic)});this.$14=[];this.$15.forEach(function(b,c,d){a.$32(b),a.$11.bumpCounter("publish_from_buffer."+b.topic)})};e.$23=function(a){a==="Connecting"?(this.$14.forEach(function(a){a.ack.reject(c("err")("Client Reconnecting - "+a.topic))}),this.$14=[]):a==="TransportConnected"&&this.$37(),this.$19("_changeState","Connection state = "+a),this.$38(a,this.$7)};e.$39=function(a,b){this.$13&&this.$13.canPublish()&&this.$37(),this.$19("_changeLPStatus","LP status = "+a+", LP Request status = "+b),this.$38(this.$6,a)};e.$38=function(a,b){var c=this.$10.mqttStateFromConnectionState(a);this.$13&&this.$13.canPublish()&&(c="Connected");this.$6=a;(c!==this.$5||b!=this.$7)&&(this.$5=c,this.$7=b,this.$40(c))};e.$40=function(a){for(var b of this.$3)b.onMQTTStateChanged(a)};e.$20=function(){var a=this,b=[];this.$4.forEach(function(c){try{c=c.getPublishMessages();Array.prototype.push.apply(b,c)}catch(b){a.$11.logError(b,"ConnectPayload provider exception"),a.$11.bumpCounter("connectPayloadProvider_error")}});return b};e.$18=function(){var a=this;d("MqttEnv").Env.genGk(d("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled)&&this.$2&&this.$2!=""&&c("requireDeferred")("MqttLongPollingRunner").__setRef("MqttChannel").onReady(function(b){b=new b(a.$2,a.$12,a.$10.hasFatal(),a.$10.hasConnectSuccess(),function(b,c,d){return a.$22(b,c,d)},function(){var b=Array.from(a.$8.keys()),c=Array.from(a.$9.keys());return Array.from(new Set(b.concat(c)))},function(){return a.$20()},function(b){a.$36(b)},function(b,c){a.$39(b,c)});b.start();a.$10.addHook(b);b.addHook(a.$16);a.$13=b;a.$11.debugTrace("MqttChannel","longPollingRunner loaded")})};e.$19=function(a,b){this.$11.debugTrace(a,"Mqtt channel: "+b)};e.setForegroundState=function(a){this.$12&&this.$12.setForegroundState(a)};e.setChatVisibility=function(a){this.$12&&this.$12.setChatVisibility(a)};e.getEndpointCapabilities=function(){return this.$12.getEndpointCapabilities()};e.setEndpointCapabilities=function(a){this.$12.setEndpointCapabilities(a)};e.getConnection_OnlyForTests=function(){return this.$10};return a}();g["default"]=a}),98);
__d("MqttConfig",["MqttWebConfig"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("MqttWebConfig")}),98);
__d("MqttEnvConfigStorage",["WebStorage"],(function(a,b,c,d,e,f,g){var h,i="mqtt:";function a(a,b){var d=(h||(h=c("WebStorage"))).getLocalStorage();if(d){d=d.getItem(i+a);if(d!=null)return d}return b}function b(a,b){var d=(h||(h=c("WebStorage"))).getLocalStorage();d&&(b==null?d.removeItem(i+a):(h||(h=c("WebStorage"))).setItemGuarded(d,i+a,b))}g.configRead=a;g.configWrite=b}),98);
__d("MqttUnifiedClientConnectFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744057");b=d("FalcoLoggerInternal").create("mqtt_unified_client_connect",a);e=b;g["default"]=e}),98);
__d("MqttUnifiedClientDisconnectFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744058");b=d("FalcoLoggerInternal").create("mqtt_unified_client_disconnect",a);e=b;g["default"]=e}),98);
__d("MqttUnifiedClientIncomingPublishFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744059");b=d("FalcoLoggerInternal").create("mqtt_unified_client_incoming_publish",a);e=b;g["default"]=e}),98);
__d("MqttUnifiedClientOutgoingPublishFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744060");b=d("FalcoLoggerInternal").create("mqtt_unified_client_outgoing_publish",a);e=b;g["default"]=e}),98);
__d("MqttWsClientTypedLoggerLite",["generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:MqttWsClientLoggerConfig")}),null);
__d("MqttLogger",["ChannelClientID","FBLogger","LogHistory","MetaConfig","MqttEnv","MqttGlobalStreamCounter","MqttUnifiedClientConnectFalcoEvent","MqttUnifiedClientDisconnectFalcoEvent","MqttUnifiedClientIncomingPublishFalcoEvent","MqttUnifiedClientOutgoingPublishFalcoEvent","MqttWsClientTypedLoggerLite","NetworkStatus","ODS","Random"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("MetaConfig")._("99"),j="mqtt_client",k=100,l="WEBSOCKET",m=typeof window!=="undefined"?window:self,n=null,o={CLIENT_ERROR:"mqtt_client_error",CONNECT:"mqtt_client_connect",DISCONNECT:"mqtt_client_disconnect",PUBLISH:"mqtt_client_publish",PUBLISH_TIMEOUT:"mqtt_qos1_publish_timeout",SOCKET_DISCONNECT:"mqtt_protocol_error"},p={CONNECT:"connect",DISCONNECT:"disconnect",INCOMING_PUBLISH:"incoming_publish",OUTGOING_PUBLISH:"outgoing_publish"};a=function(){function a(a){this.$1=d("LogHistory").getInstance(j),this.$2=0,this.$3=Date.now(),this.$4=c("ChannelClientID").getID(),this.$7(),this.$5=d("MqttGlobalStreamCounter").getInstance(),this.$5.isEnabled()||(this.$5=null),this.$6=a}a.getInstance=function(b){n||(n=new a(b));return n};var b=a.prototype;b.setAppId=function(a){this.$2===0&&(this.$2=a)};b.eventLogConnect=function(a){var b=a.ackReceived,d=a.attemptNumber,e=a.connectionState,f=a.connectionStatus,g=a.disconnectCount,h=a.duration,i=a.errorMessage,j=a.failTotal,k=a.hostname,m=a.messageSizeBytes,n=a.osConnectivity,q=a.sessionID,r=a.successTotal;a=a.total_duration;var s=f?"success":"failed";this.bumpCounter(o.CONNECT+"."+s);s=r/(r+j);r=n&&this.getBrowserConnectivity();var t={acked:b,attempt_number:d.toString(),client_type:l,connection_state:e,disconnect_count:g.toString(),duration:h.toString(),error:i,event_type:p.CONNECT,extra_data:{connect_success_rate:s.toString(),device_id:this.$4,hostname:k,connectionStatus:f.toString(),exposure:(j=this.$6)!=null?j:""},os_connectivity:r,payload_size:m==null?void 0:m.toString(),session_id:q.toString(),total_duration:a.toString(),ws_count:(n=this.$5)==null?void 0:n.getGlobalState().totalConnectionStreams.toString()};this.$8(function(){c("MqttUnifiedClientConnectFalcoEvent").log(function(){return t})})};b.eventLogPull=function(a){var b=a.duration,c=a.errorMessage,e=a.hostname,f=a.pullEventName,g=a.sessionID;a=a.status;a={connection_status:a,device_id:this.$4,duration:b,error_message:c,hostname:e,href:m.location.hostname,logged_in:d("MqttEnv").Env.isUserLoggedInNow(),session_id:g};this.$9(f,a)};b.eventLogPullFinish=function(a){var b=a.duration,c=a.errorMessage,e=a.publishReceived,f=a.publishSent,g=a.pullEventName;a=a.sessionID;b={device_id:this.$4,duration:b,error_message:c,href:m.location.hostname,logged_in:d("MqttEnv").Env.isUserLoggedInNow(),publish_received:e,publish_sent:f,session_id:a};this.$9(g,b)};b.eventLogDisconnect=function(a){var b=a.disconnectCount,d=a.duration,e=a.errorMessage;a=a.sessionID;this.bumpCounter(o.DISCONNECT);var f={client_type:l,connection_state:"Disconnected",disconnect_count:b.toString(),duration:d.toString(),error:e,event_type:p.DISCONNECT,extra_data:{device_id:this.$4,exposure:(b=this.$6)!=null?b:""},os_connectivity:this.getBrowserConnectivity(),session_id:a.toString(),ws_count:(d=this.$5)==null?void 0:d.getGlobalState().totalConnectionStreams.toString()};this.$8(function(){c("MqttUnifiedClientDisconnectFalcoEvent").log(function(){return f})})};b.eventLogOutgoingPublish=function(a){var b=a.attempt,d=a.connectionState,e=a.disconnectCount,f=a.errorMessage,g=a.firstAttemptStartTime,h=a.payloadSizeBytes,i=a.protocol,j=a.qos,k=a.sessionID,m=a.success,n=a.thisAttemptStartTime;a=a.topic;this.bumpCounter(o.PUBLISH+"."+a);var q=Date.now(),r={acked:j===1?m:null,attempt_number:b.toString(),client_type:l,connection_state:d,disconnect_count:e.toString(),duration:(q-n).toString(),error:f,event_type:p.OUTGOING_PUBLISH,extra_data:{device_id:this.$4,protocol:i},os_connectivity:this.getBrowserConnectivity(),payload_size:h.toString(),qos:j.toString(),session_id:k.toString(),topic:a,total_duration:g!=null?(q-g).toString():null};this.$8(function(){c("MqttUnifiedClientIncomingPublishFalcoEvent").log(function(){return r})})};b.eventLogIncomingPublish=function(a){var b=a.connectionState,d=a.disconnectCount,e=a.payloadSizeBytes,f=a.qos,g=a.sessionID;a=a.topic;var h={client_type:l,connection_state:b,disconnect_count:d.toString(),event_type:p.INCOMING_PUBLISH,extra_data:{device_id:this.$4},os_connectivity:this.getBrowserConnectivity(),payload_size:e.toString(),qos:f.toString(),session_id:g.toString(),topic:a};b=a=="/webrtc"||a=="/rtc_multi";this.$10(function(){c("MqttUnifiedClientOutgoingPublishFalcoEvent").log(function(){return h})},50,b)};b.logError=function(a,b){d("MqttEnv").Env.scheduleLoggingCallback(function(){try{c("FBLogger")(j).catching(a).mustfix(b)}catch(a){}})};b.logErrorWarn=function(a,b){d("MqttEnv").Env.scheduleLoggingCallback(function(){try{c("FBLogger")(j).catching(a).warn(b)}catch(a){}})};b.logWarn=function(a,b){var c=this;d("MqttEnv").Env.scheduleLoggingCallback(function(){try{c.$1.warn(a,b)}catch(a){}})};b.debugTrace=function(a,b){var c=this;d("MqttEnv").Env.scheduleLoggingCallback(function(){try{c.$1.debug(a,b)}catch(a){}})};b.bumpCounter=function(a){var b=this;if(!d("Random").coinflip(k))return;d("MqttEnv").Env.scheduleLoggingCallback(function(){b.$2!==0&&(h||(h=d("ODS"))).bumpEntityKey(2966,"mqtt_ws_client",b.$2+"."+a,k),(h||(h=d("ODS"))).bumpEntityKey(2966,"mqtt_ws_client",a,k)})};b.$9=function(a,b,e){var f=this;d("MqttEnv").Env.scheduleLoggingCallback(function(){b.event_type=a;b.app_id=f.$2;b.online=f.$11();var d=JSON.stringify(b);f.$1.log(a,d,{weight:e});a!==o.DISCONNECT&&c("MqttWsClientTypedLoggerLite").log(b)})};b.$10=function(a,b,c){i&&b!==0?c=c||d("Random").coinflip(b):c=!0;c&&d("MqttEnv").Env.scheduleCallback(a)};b.$8=function(a){this.$10(a,0,!1)};b.$11=function(){return m.navigator&&m.navigator.onLine!==void 0?m.navigator.onLine:!1};b.getBrowserConnectivity=function(){return c("NetworkStatus").isOnline()};b.$7=function(){var a=this;if(m.navigator&&m.navigator.onLine!==void 0){var b=function(b){b=b.online;b||a.bumpCounter("browser_disconnect")};c("NetworkStatus").onChange(b)}};return a}();g["default"]=a}),98);
__d("MqttEnvGk",["MqttEnv","MqttLogger","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a){case d("MqttEnv").MqttGkNames.mqtt_waterfall_log_client_sampling:return c("gkx")("21119");case d("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled:return!0;case d("MqttEnv").MqttGkNames.mqtt_lp_use_fetch:return c("gkx")("21120");case d("MqttEnv").MqttGkNames.mqtt_fast_lp:return c("gkx")("21121");case d("MqttEnv").MqttGkNames.mqtt_lp_no_delay:return c("gkx")("21122");case d("MqttEnv").MqttGkNames.mqtt_enable_publish_over_polling:return c("gkx")("21123");case d("MqttEnv").MqttGkNames.mqttweb_global_connection_counter:return c("gkx")("21124");default:c("MqttLogger").getInstance().logError(new Error("unknown gk"),"Unknown GK value "+a);return!1}}g["default"]=a}),98);
__d("MqttEnvInitializer",["CurrentMessengerUser","MqttEnv","MqttEnvConfigStorage","MqttEnvGk","MqttLogger","Random","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";function a(a){d("MqttEnv").Env.initialize(c("Random").random,d("CurrentMessengerUser").isLoggedInNow,c("clearTimeout"),c("setTimeoutAcrossTransitions"),function(){return c("MqttLogger").getInstance()},c("MqttEnvGk"),a!=null?a:null,null,null,d("MqttEnvConfigStorage").configRead,d("MqttEnvConfigStorage").configWrite)}b={genGk:c("MqttEnvGk"),initialize:a};g["default"]=b}),98);
__d("FBMqttChannel",["MqttChannel","MqttConfig","MqttEnvInitializer"],(function(a,b,c,d,e,f,g){"use strict";c("MqttEnvInitializer").initialize();b=new(c("MqttChannel"))({appId:(a=c("MqttConfig")).appID,capabilities:a.capabilities,chatVisibility:!1,clientCapabilities:a.clientCapabilities,endpoint:a.endpoint,initialSubscribedTopics:a.subscribedTopics,phpOverride:a.hostNameOverride,pollingEndpoint:a.pollingEndpoint,userFbid:a.fbid});g["default"]=b}),98);
__d("TWriteBuffer",[],(function(a,b,c,d,e,f){a=function(){function a(b){b===void 0&&(b=a.DEFAULT_BYTE_BUFFER_SIZE),this.$1=new DataView(new ArrayBuffer(b)),this.$2=0}var b=a.prototype;b.write=function(a){this.$2+a.length>this.$1.byteLength&&this.$3(this.$2+a.length);for(var b=0;b<a.length;b++)this.$1.setUint8(this.$2+b,a[b]);this.$2+=a.length;return a.length};b.writeByte=function(a){this.$2+1>this.$1.byteLength&&this.$3(this.$2+1);this.$1.setUint8(this.$2,a);this.$2++;return 1};b.writeFloatBE=function(a){this.$2+Float32Array.BYTES_PER_ELEMENT>this.$1.byteLength&&this.$3(this.$2+Float32Array.BYTES_PER_ELEMENT);this.$1.setFloat32(this.$2,a);this.$2+=Float32Array.BYTES_PER_ELEMENT;return Float32Array.BYTES_PER_ELEMENT};b.writeDoubleBE=function(a){this.$2+Float64Array.BYTES_PER_ELEMENT>this.$1.byteLength&&this.$3(this.$2+Float64Array.BYTES_PER_ELEMENT);this.$1.setFloat64(this.$2,a);this.$2+=Float64Array.BYTES_PER_ELEMENT;return Float64Array.BYTES_PER_ELEMENT};b.toByteArray=function(){var a=new Uint8Array(this.$1.buffer,0,this.$2);return a};b.currentSize=function(){return this.$2};b.getUnderlyingDataView=function(){return this.$1};b.$3=function(a){a=a*2;if(!Number.isSafeInteger(a))throw new Error("unable to resize");a=new DataView(new ArrayBuffer(a));for(var b=0;b<this.$2;b++)a.setUint8(b,this.$1.getUint8(b));this.$1=a};b.readByte=function(){throw new Error("operation not supported")};b.readBytes=function(a){throw new Error("operation not supported")};b.readFloatBE=function(){throw new Error("operation not supported")};b.readDoubleBE=function(){throw new Error("operation not supported")};return a}();a.DEFAULT_BYTE_BUFFER_SIZE=16;f["default"]=a}),66);
__d("StringToUtf8",["TWriteBuffer"],(function(a,b,c,d,e,f,g){a=function(a){var b=new(c("TWriteBuffer"))(a.length),d;for(var e=0;e<a.length;e++){d=a.charCodeAt(e);if(d<128)b.writeByte(d);else if(d<2048)b.writeByte(d>>6|192),b.writeByte(d&63|128);else if((d&64512)==55296){if(e+1>=a.length)throw new Error("UTF-16 string is truncated: ["+d.toString(16)+"]");if((a.charCodeAt(e+1)&64512)!==56320)throw new Error("Invalid UTF-16 string: ["+d.toString(16)+", "+a.charCodeAt(e+1).toString(16)+"]");d=65536+((d&1023)<<10)+(a.charCodeAt(++e)&1023);b.writeByte(d>>18|240);b.writeByte(d>>12&63|128);b.writeByte(d>>6&63|128);b.writeByte(d&63|128)}else b.writeByte(d>>12|224),b.writeByte(d>>6&63|128),b.writeByte(d&63|128)}return b.toByteArray()};g.StringToUtf8=a}),98);
__d("TNoOpWriteBuffer",[],(function(a,b,c,d,e,f){a=function(){function a(){this.$1=0}var b=a.prototype;b.write=function(a){this.$1+=a.length;return a.length};b.writeByte=function(a){this.$1++;return 1};b.writeFloatBE=function(a){this.$1+=Float32Array.BYTES_PER_ELEMENT;return Float32Array.BYTES_PER_ELEMENT};b.writeDoubleBE=function(a){this.$1+=Float64Array.BYTES_PER_ELEMENT;return Float64Array.BYTES_PER_ELEMENT};b.toByteArray=function(){throw new Error("operation not supported")};b.currentSize=function(){return this.$1};b.readByte=function(){throw new Error("operation not supported")};b.readBytes=function(a){throw new Error("operation not supported")};b.readFloatBE=function(){throw new Error("operation not supported")};b.readDoubleBE=function(){throw new Error("operation not supported")};return a}();f["default"]=a}),66);
__d("TReadBuffer",[],(function(a,b,c,d,e,f){a=function(){function a(a){this.$1=a,this.$2=0}var b=a.prototype;b.readByte=function(){if(this.$2<this.$1.length)return this.$1[this.$2++];throw new Error("no available byte to read")};b.readBytes=function(a){if(a<0)throw new Error("cannot readBytes of negative length: "+a);if(a+this.$2>this.$1.length)throw new Error("not enough bytes to read");var b=new Uint8Array(this.$1.buffer,this.$3(),a);this.$2+=a;return b};b.readFloatBE=function(){if(Float32Array.BYTES_PER_ELEMENT+this.$2>this.$1.length)throw new Error("not enough bytes to read");var a=new DataView(this.$1.buffer).getFloat32(this.$3());this.$2+=Float32Array.BYTES_PER_ELEMENT;return a};b.readDoubleBE=function(){if(Float64Array.BYTES_PER_ELEMENT+this.$2>this.$1.length)throw new Error("not enough bytes to read");var a=new DataView(this.$1.buffer).getFloat64(this.$3());this.$2+=Float64Array.BYTES_PER_ELEMENT;return a};b.$3=function(){return this.$2+this.$1.byteOffset};b.getCurrentCursor=function(){return this.$2};b.writeByte=function(a){throw new Error("operation not supported")};b.write=function(a){throw new Error("operation not supported")};b.toByteArray=function(){throw new Error("operation not supported")};b.writeFloatBE=function(a){throw new Error("operation not supported")};b.writeDoubleBE=function(a){throw new Error("operation not supported")};return a}();f["default"]=a}),66);
__d("ThriftTypes",[],(function(a,b,c,d,e,f){a=Object.freeze({STOP:0,VOID:1,BOOL:2,BYTE:3,I08:3,DOUBLE:4,I16:6,I32:8,I64:10,STRING:11,STRUCT:12,MAP:13,SET:14,LIST:15,FLOAT:19});b=a;f["default"]=b}),66);
__d("Utf8ToString",[],(function(a,b,c,d,e,f){var g=function(a,b){throw new Error(a+": ["+b.map(function(a){return a.toString(16)}).toString()+"]")},h=function(a){g("Invalid UTF-8 sequence",a)},i=function(a,b){g("Not enough bytes for "+a+"-byte sequence",b)};a=function(a){var b=0,c=[];while(b<a.length){var d=a[b++];if(d<128)c.push(String.fromCharCode(d));else if(d>=128&&d<194)h([d]);else if(d>=194&&d<224){b>=a.length&&i(2,[d]);var e=a[b++];(e&192)!==128&&h([d,e]);c.push(String.fromCharCode((d&31)<<6|e&63))}else if(d>=240&&d<245){b+2>=a.length&&i(4,[d]);e=a[b++];var f=a[b++],g=a[b++];(d==240&&(!(e>=144&&e<192)||(f&192)!==128||(g&192)!==128)||d>=241&&d<244&&((e&192)!==128||(f&192)!==128||(g&192)!==128)||d==244&&(!(e>=128&&e<144)||(f&192)!==128||(g&192)!==128))&&h([d,e,f,g]);e=((d&7)<<18|(e&63)<<12|(f&63)<<6|g&63)-65536;c.push(String.fromCharCode(55296+(e>>10)));c.push(String.fromCharCode(56320+(e&1023)))}else if(d>=245)h([d]);else{b+1>=a.length&&i(3,[d]);f=a[b++];g=a[b++];d==224?f>=160&&f<192||h([d,f,g]):d>=225&&d<237?f>=128&&f<192||h([d,f,g]):d==237?f>=128&&f<160||h([d,f,g]):d>=238&&d<240&&(f>=128&&f<192||h([d,f,g]));g>=128&&g<192||h([d,f,g]);c.push(String.fromCharCode((d&15)<<12|(f&63)<<6|g&63))}}return c.join("")};f.Utf8ToString=a}),66);/*FB_PKG_DELIM*/
__d("CometDismissFBNuxMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9877615415639160"}),null);
__d("CometDismissFBNuxMutation.graphql",["CometDismissFBNuxMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"nux_id_input"}],c=[{kind:"Variable",name:"nux_id",variableName:"nux_id_input"}],d={alias:null,args:null,kind:"ScalarField",name:"should_show",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometDismissFBNuxMutation",selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"nux_dismiss",plural:!1,selections:[d],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometDismissFBNuxMutation",selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"nux_dismiss",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},d,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:b("CometDismissFBNuxMutation_facebookRelayOperation"),metadata:{},name:"CometDismissFBNuxMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("encodeNUXIDForRelay",[],(function(a,b,c,d,e,f){"use strict";var g="NUX_ID:";function a(a){return typeof a==="string"&&a.startsWith(g)?{nuxID:Number(a.replace(g,"")),relayID:a}:{nuxID:Number(a),relayID:g+a}}f["default"]=a}),66);
__d("CometDismissFBNuxMutation",["CometDismissFBNuxMutation.graphql","CometRelay","encodeNUXIDForRelay"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("CometDismissFBNuxMutation.graphql");function a(a,b,e,f){b=c("encodeNUXIDForRelay")(b);var g=b.nuxID;b=b.relayID;return d("CometRelay").commitMutation(a,{mutation:i,onCompleted:e,onError:f,optimisticResponse:{nux_dismiss:{__typename:"NUX",id:b,should_show:!1}},variables:{nux_id_input:g}})}g.commit=a}),98);
__d("CometLogImpressionFBNuxMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9723864714359536"}),null);
__d("CometLogImpressionFBNuxMutation.graphql",["CometLogImpressionFBNuxMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"nux_id"}],c=[{kind:"Variable",name:"nux_id",variableName:"nux_id"}],d={alias:null,args:null,kind:"ScalarField",name:"nux_id",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometLogImpressionFBNuxMutation",selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"log_nux_view",plural:!1,selections:[d],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometLogImpressionFBNuxMutation",selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"log_nux_view",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},d,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:b("CometLogImpressionFBNuxMutation_facebookRelayOperation"),metadata:{},name:"CometLogImpressionFBNuxMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("CometLogImpressionFBNuxMutationWithNoImpressionLimitMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="29635405182772969"}),null);
__d("CometLogImpressionFBNuxMutationWithNoImpressionLimitMutation.graphql",["CometLogImpressionFBNuxMutationWithNoImpressionLimitMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"nux_id"}],c=[{kind:"Variable",name:"nux_id",variableName:"nux_id"}],d={alias:null,args:null,kind:"ScalarField",name:"nux_id",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometLogImpressionFBNuxMutationWithNoImpressionLimitMutation",selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"log_nux_view_and_increment_view_count",plural:!1,selections:[d],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometLogImpressionFBNuxMutationWithNoImpressionLimitMutation",selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"log_nux_view_and_increment_view_count",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},d,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:b("CometLogImpressionFBNuxMutationWithNoImpressionLimitMutation_facebookRelayOperation"),metadata:{},name:"CometLogImpressionFBNuxMutationWithNoImpressionLimitMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("CometLogImpressionFBNuxMutation",["CometLogImpressionFBNuxMutation.graphql","CometLogImpressionFBNuxMutationWithNoImpressionLimitMutation.graphql","CometRelay","encodeNUXIDForRelay"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h!==void 0?h:h=b("CometLogImpressionFBNuxMutation.graphql");function a(a,b,e,f){b=c("encodeNUXIDForRelay")(b);b=b.nuxID;return d("CometRelay").commitMutation(a,{mutation:j,onCompleted:e,onError:f,variables:{nux_id:b}})}var k=i!==void 0?i:i=b("CometLogImpressionFBNuxMutationWithNoImpressionLimitMutation.graphql");function e(a,b,e,f){b=c("encodeNUXIDForRelay")(b);b=b.nuxID;return d("CometRelay").commitMutation(a,{mutation:k,onCompleted:e,onError:f,variables:{nux_id:b}})}g.commit=a;g.commitNuxWithNoImpressionLimit=e}),98);
__d("FDSDots3HorizontalFilled16PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("484386"),16);b=a;g["default"]=b}),98);
__d("FDSUnitHeader.react",["BaseView.react","CometColumn.react","CometColumnItem.react","CometFocusTableContext","CometPressable.react","FDSIcon.react","FDSText.react","FDSTextPairing.react","IconSource","SVGIcon","react","react-compiler-runtime","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var aa=["action_DEPRECATED","actionAccessibilityLabel","actionDisabled","actionHidden","actionIcon","actionLabel","actionLinkProps","actionRef","actiontestid","actionWrapper","addOn_DEPRECATED","body","bodyColor","bodyLineLimit","disabled","hasTopDivider","headline","headlineColor","headlineId","iconColor","iconSize","isSemanticHeading","level","linkProps","meta","metaColor","metaLocation","metaTestID","onActionHoverIn","onActionHoverOut","onActionPress","onActionPressIn","onActionPressOut","onPress","onPressIn","onPressOut","paddingHorizontal","paddingTop","showActionOnHover","testOnly_actionPressed","testOnly_pressed","useFocusCell"],h,i=h||(h=d("react"));b=h;var ba=b.useContext,ca=b.useState,da=8,j={action:{backgroundColor:null,borderTopStyle:"x1ejq31n",borderInlineEndStyle:"x18oe1m7",borderBottomStyle:"x1sy0etr",borderInlineStartStyle:"xstzfhl",display:"x1rg5ohu",marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",paddingTop:"xexx8yu",paddingInlineEnd:"xyri2b",paddingBottom:"x18d9i69",paddingInlineStart:"x1c1uobl",position:"x1n2onr6",verticalAlign:"x3ajldb",$$css:!0},actionButton:{color:"x1fey0fg",cursor:"x1ypdohk",$$css:!0},actionHidden:{opacity:"xg01cxk",$$css:!0},hairline:{backgroundColor:"x14nfmen",height:"xjm9jq1",marginBottom:"x1jyxor1",$$css:!0},root:{paddingBottom:"xjkvuk6",$$css:!0},showActionOnHover:{visibility:"xlshs6z","@media (pointer: coarse)_visibility":"xwtlbus",$$css:!0}},ea={0:{paddingTop:"xexx8yu",$$css:!0},8:{paddingTop:"x1y1aw1k",$$css:!0},12:{paddingTop:"xz9dl7a",$$css:!0},16:{paddingTop:"xyamay9",$$css:!0},20:{paddingTop:"x1cnzs8",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(142),e,f,g,h,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W;b[0]!==a?(m=a.action_DEPRECATED,e=a.actionAccessibilityLabel,H=a.actionDisabled,N=a.actionHidden,f=a.actionIcon,g=a.actionLabel,h=a.actionLinkProps,k=a.actionRef,n=a.actiontestid,l=a.actionWrapper,o=a.addOn_DEPRECATED,p=a.body,O=a.bodyColor,P=a.bodyLineLimit,r=a.disabled,Q=a.hasTopDivider,s=a.headline,R=a.headlineColor,t=a.headlineId,S=a.iconColor,T=a.iconSize,U=a.isSemanticHeading,u=a.level,v=a.linkProps,w=a.meta,I=a.metaColor,x=a.metaLocation,y=a.metaTestID,z=a.onActionHoverIn,A=a.onActionHoverOut,B=a.onActionPress,C=a.onActionPressIn,D=a.onActionPressOut,E=a.onPress,F=a.onPressIn,G=a.onPressOut,J=a.paddingHorizontal,K=a.paddingTop,L=a.showActionOnHover,V=a.testOnly_actionPressed,W=a.testOnly_pressed,M=a.useFocusCell,q=babelHelpers.objectWithoutPropertiesLoose(a,aa),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=h,b[5]=k,b[6]=l,b[7]=m,b[8]=n,b[9]=o,b[10]=p,b[11]=q,b[12]=r,b[13]=s,b[14]=t,b[15]=u,b[16]=v,b[17]=w,b[18]=x,b[19]=y,b[20]=z,b[21]=A,b[22]=B,b[23]=C,b[24]=D,b[25]=E,b[26]=F,b[27]=G,b[28]=H,b[29]=I,b[30]=J,b[31]=K,b[32]=L,b[33]=M,b[34]=N,b[35]=O,b[36]=P,b[37]=Q,b[38]=R,b[39]=S,b[40]=T,b[41]=U,b[42]=V,b[43]=W):(e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],l=b[6],m=b[7],n=b[8],o=b[9],p=b[10],q=b[11],r=b[12],s=b[13],t=b[14],u=b[15],v=b[16],w=b[17],x=b[18],y=b[19],z=b[20],A=b[21],B=b[22],C=b[23],D=b[24],E=b[25],F=b[26],G=b[27],H=b[28],I=b[29],J=b[30],K=b[31],L=b[32],M=b[33],N=b[34],O=b[35],P=b[36],Q=b[37],R=b[38],S=b[39],T=b[40],U=b[41],V=b[42],W=b[43]);a=H===void 0?!1:H;H=N===void 0?!1:N;N=O===void 0?"secondary":O;O=P===void 0?3:P;P=Q===void 0?!1:Q;Q=R===void 0?"primary":R;R=S===void 0?"primary":S;S=T===void 0?16:T;T=U===void 0?!0:U;U=I===void 0?"secondary":I;I=J===void 0?16:J;J=K===void 0?20:K;K=L===void 0?!1:L;L=M===void 0?!1:M;M=ca(!1);var X=M[0];M=M[1];var Y=ba(c("CometFocusTableContext"));Y=Y.FocusCell;var Z;V=V!=null?V:!1;var $;b[44]!==a||b[45]!==h||b[46]!==n||b[47]!==z||b[48]!==A||b[49]!==B||b[50]!==C||b[51]!==D||b[52]!==V?($={disabled:a,linkProps:h,onHoverIn:z,onHoverOut:A,onPress:B,onPressIn:C,onPressOut:D,testid:n,testOnly_pressed:V},b[44]=a,b[45]=h,b[46]=n,b[47]=z,b[48]=A,b[49]=B,b[50]=C,b[51]=D,b[52]=V,b[53]=$):$=b[53];h=$;if(f!=null){b[54]!==e||b[55]!==f||b[56]!==h||b[57]!==k||b[58]!==R?(n=i.jsx(c("FDSIcon.react"),babelHelpers["extends"]({},h,{"aria-label":e,color:R,icon:f,ref:k})),b[54]=e,b[55]=f,b[56]=h,b[57]=k,b[58]=R,b[59]=n):n=b[59];Z=n}else if(g!=null){z=e!=null?e:g;A=H&&!X&&j.actionHidden;B=K&&j.showActionOnHover;b[60]!==A||b[61]!==B?(C=[j.actionButton,j.action,A,B],b[60]=A,b[61]=B,b[62]=C):C=b[62];D=a?"disabled":"blueLink";V=u===2?"body2":"body3";b[63]!==g||b[64]!==D||b[65]!==V?($=i.jsx(c("FDSText.react"),{color:D,numberOfLines:1,type:V,children:g}),b[63]=g,b[64]=D,b[65]=V,b[66]=$):$=b[66];b[67]!==h||b[68]!==k||b[69]!==z||b[70]!==C||b[71]!==$?(f=i.jsx(c("CometPressable.react"),babelHelpers["extends"]({},h,{"aria-label":z,onFocusVisibleChange:M,overlayOffset:da,overlayRadius:4,ref:k,xstyle:C,children:$})),b[67]=h,b[68]=k,b[69]=z,b[70]=C,b[71]=$,b[72]=f):f=b[72];Z=f}else if(m!=null)if(m instanceof c("IconSource")){b[73]!==e||b[74]!==h||b[75]!==k||b[76]!==m||b[77]!==R?(n=i.jsx(c("FDSIcon.react"),babelHelpers["extends"]({},h,{"aria-label":e,color:R,icon:m,ref:k})),b[73]=e,b[74]=h,b[75]=k,b[76]=m,b[77]=R,b[78]=n):n=b[78];Z=n}else if(m instanceof d("SVGIcon").SVGIcon){b[79]!==e||b[80]!==h||b[81]!==k||b[82]!==m||b[83]!==R||b[84]!==S?(A=i.jsx(c("FDSIcon.react"),babelHelpers["extends"]({},h,{"aria-label":e,color:R,icon:m,ref:k,size:S})),b[79]=e,b[80]=h,b[81]=k,b[82]=m,b[83]=R,b[84]=S,b[85]=A):A=b[85];Z=A}else{B=e!=null?e:m;g=H&&!X&&j.actionHidden;D=K&&j.showActionOnHover;b[86]!==g||b[87]!==D?(V=[j.actionButton,j.action,g,D],b[86]=g,b[87]=D,b[88]=V):V=b[88];z=a?"disabled":"blueLink";C=u===2?"body2":"body3";b[89]!==m||b[90]!==z||b[91]!==C?($=i.jsx(c("FDSText.react"),{color:z,numberOfLines:1,type:C,children:m}),b[89]=m,b[90]=z,b[91]=C,b[92]=$):$=b[92];b[93]!==h||b[94]!==k||b[95]!==B||b[96]!==V||b[97]!==$?(f=i.jsx(c("CometPressable.react"),babelHelpers["extends"]({},h,{"aria-label":B,onFocusVisibleChange:M,overlayOffset:da,overlayRadius:4,ref:k,xstyle:V,children:$})),b[93]=h,b[94]=k,b[95]=B,b[96]=V,b[97]=$,b[98]=f):f=b[98];Z=f}else if(o!=null){b[99]!==o?(n=i.jsx(d("react-strict-dom").html.div,{style:j.action,children:o}),b[99]=o,b[100]=n):n=b[100];Z=n}if(l!=null){R=l.component;b[101]!==R||b[102]!==Z||b[103]!==l.props?(S=i.jsx(R,babelHelpers["extends"]({},l.props,{children:Z})),b[101]=R,b[102]=Z,b[103]=l.props,b[104]=S):S=b[104];Z=S}if(L===!0&&Y!=null){b[105]!==Y||b[106]!==Z?(A=i.jsx(Y,{children:Z}),b[105]=Y,b[106]=Z,b[107]=A):A=b[107];Z=A}e=x!=null?x:"below";b[108]!==Z||b[109]!==p||b[110]!==N||b[111]!==O||b[112]!==s||b[113]!==Q||b[114]!==t||b[115]!==T||b[116]!==u||b[117]!==w||b[118]!==U||b[119]!==y||b[120]!==e?(H=i.jsx(c("FDSTextPairing.react"),{body:p,bodyColor:N,bodyLineLimit:O,headline:s,headlineAddOn:Z,headlineColor:Q,headlineId:t,headlineLineLimit:2,isSemanticHeading:T,level:u,meta:w,metaColor:U,metaLineLimit:1,metaLocation:e,metaTestID:y}),b[108]=Z,b[109]=p,b[110]=N,b[111]=O,b[112]=s,b[113]=Q,b[114]=t,b[115]=T,b[116]=u,b[117]=w,b[118]=U,b[119]=y,b[120]=e,b[121]=H):H=b[121];X=H;K=P?0:I;g=ea[J];b[122]!==g?(D=[j.root,g],b[122]=g,b[123]=D):D=b[123];b[124]!==k||b[125]!==r||b[126]!==X||b[127]!==v||b[128]!==E||b[129]!==F||b[130]!==G||b[131]!==W?(a=i.jsx(c("CometColumnItem.react"),{children:E!=null?i.jsx(c("CometPressable.react"),{disabled:r,linkProps:v,onPress:E,onPressIn:F,onPressOut:G,overlayDisabled:!0,ref:k,testOnly_pressed:W!=null?W:!1,children:X}):X}),b[124]=k,b[125]=r,b[126]=X,b[127]=v,b[128]=E,b[129]=F,b[130]=G,b[131]=W,b[132]=a):a=b[132];b[133]!==q||b[134]!==K||b[135]!==D||b[136]!==a?(m=i.jsx(c("CometColumn.react"),babelHelpers["extends"]({},q,{paddingHorizontal:K,xstyle:D,children:a})),b[133]=q,b[134]=K,b[135]=D,b[136]=a,b[137]=m):m=b[137];z=m;if(P){b[138]===Symbol["for"]("react.memo_cache_sentinel")?(C=i.jsx(c("CometColumnItem.react"),{children:i.jsx(c("BaseView.react"),{xstyle:j.hairline})}),b[138]=C):C=b[138];b[139]!==z||b[140]!==I?(M=i.jsxs(c("CometColumn.react"),{paddingHorizontal:I,children:[C,z]}),b[139]=z,b[140]=I,b[141]=M):M=b[141];return M}return z}g["default"]=a}),98);
__d("LSClearCommunityMembersRangeTable",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return a[1]!==void 0?c[0]=a[1]:c[0]="",b.i64.neq(a[0],void 0)?c[1]=!1:c[1]=!0,b.forEach(b.filter(b.db.table(189).fetch(),function(d){return(c[1]||b.i64.eq(d.source,a[0]))&&d.requestId===c[0]}),function(a){return a["delete"]()})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxClearCommunityMembersRangeTableStoredProcedure";a.__tables__=["community_members_ranges_v2__generated"];e.exports=a}),null);
__d("LSClearCommunityMembersTable",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return a[1]!==void 0?c[0]=a[1]:c[0]="",b.i64.neq(a[0],void 0)?c[1]=!1:c[1]=!0,b.i64.neq(a[2],void 0)?b.forEach(b.filter(b.db.table(170).fetch(),function(d){return(c[1]||b.i64.eq(d.source,a[0]))&&b.i64.eq(d.groupThreadId,a[2])&&d.requestId===c[0]}),function(a){return a["delete"]()}):b.forEach(b.filter(b.db.table(170).fetch(),function(d){return(c[1]||b.i64.eq(d.source,a[0]))&&d.requestId===c[0]}),function(a){return a["delete"]()})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxClearCommunityMembersTableStoredProcedure";a.__tables__=["community_members"];e.exports=a}),null);
__d("LSClearCommunityMembersAndRange",["LSClearCommunityMembersRangeTable","LSClearCommunityMembersTable"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[];return c.sequence([function(d){return c.sequence([function(d){return c.storedProcedure(b("LSClearCommunityMembersTable"),a[0],a[1],a[2])},function(d){return c.storedProcedure(b("LSClearCommunityMembersRangeTable"),a[0],a[1])}])},function(a){return c.resolve(d)}])}a.__sproc_name__="LSMailboxClearCommunityMembersAndRangeStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSClearCommunityMembersAndRangeStoredProcedure",["LSClearCommunityMembersAndRange","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){e===void 0&&(e={});a=a.storedProcedure(c("LSClearCommunityMembersAndRange"),e.source,e.requestId,e.threadId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSDatabaseSingletonLazyWrapper",["LSDatabaseSingleton"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return(h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton}g["default"]=a}),98);
__d("LSUpsertCommunityMemberRanges",["LSArrayGetObjectAt"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=c.createArray(),d[3]=(d[0].push(c.i64.cast([0,0])),d[0]),a[2]===!0?c.resolve(d[1]=!0):c.sequence([function(e){return d[3]=!1,d[4]=c.i64.of_int32(a[1].length),c.i64.gt(d[4],c.i64.cast([0,0]))?c.loopAsync(d[4],function(e){return d[5]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[1],d[5]).then(function(a){return a=a,d[6]=a[0],d[7]=a[1],a})},function(a){return d[3]=d[3]||c.i64.eq(c.i64.cast([0,1]),d[6])}])}):c.resolve()},function(a){return d[1]=d[3]}])},function(b){return a[9]!==void 0?d[2]=a[9]:d[2]="",c.db.table(189).put({communityId:a[0],isAdmin:d[1],minName:"",source:a[7],requestId:d[2],maxName:a[6],isLoadingBefore:!1,isLoadingAfter:a[4],hasMoreBefore:!1,hasMoreAfter:a[3],nextPageCursor:a[5]})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxUpsertCommunityMemberRangesStoredProcedure";a.__tables__=["community_members_ranges_v2__generated"];e.exports=a}),null);
__d("LSIssueCommunityMemberListFetch",["LSIssueNewTaskWithExtraOperations","LSUpsertCommunityMemberRanges"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=c.createArray(),d[4]=(d[0].push(c.i64.cast([0,0])),d[0]),d[1]=c.createArray(),c.storedProcedure(b("LSUpsertCommunityMemberRanges"),a[0],a[1],a[2],!1,!0,"",a[5],a[6],a[9],a[11])},function(e){return d[2]=new c.Map(),d[2].set("community_id",a[0]),d[2].set("roles",a[1]),d[2].set("fetch_admins_only",a[2]),d[2].set("cursor",a[4]),d[2].set("source",a[6]),d[2].set("thread_key",a[7]),d[2].set("search_text",a[8]),d[2].set("thread_roles",a[9]),d[2].set("group_thread_id",a[10]),d[2].set("request_id",a[11]),d[3]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),"fetch_community_member_list",c.i64.cast([0,355]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxIssueCommunityMemberListFetchStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSIssueCommunityMemberListFetchStoredProcedure",["LSIssueCommunityMemberListFetch","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSIssueCommunityMemberListFetch"),e.communityId,e.roles,e.fetchAdminsOnly,e.fetchFriendMembersOnly,e.nextPageCursor,e.maxName,e.source,e.threadKey,e.searchText,e.threadRoles,e.groupThreadId,e.requestId,e.maxTimestampMs);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWEndToEndEncryptionKeysDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){return{queries:{}}},root:c("JSResourceForInteraction")("MAWEndToEndEncryptionKeysDialog.react").__setRef("MAWEndToEndEncryptionKeysDialog.entrypoint")};g["default"]=a}),98);
__d("MAWOptimisticCreateOrDeleteReactionLSDB",["I64","LSAuthorityLevel","MAWTimeUtils","QPLUserFlow","ReQL","WATimeUtils","err","qpl","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useCallback;function a(){return j(function(a,b,e,g,h,j){return h.runInTransaction(async function(f){try{var h=await f.reactions.get(a,b,j);await f.reactions.upsert([a,b,j],{actorId:j,authorityLevel:(i||(i=d("I64"))).of_int32(c("LSAuthorityLevel").OPTIMISTIC),messageId:b,reaction:e!=null?e:"",threadKey:a,timestampMs:d("MAWTimeUtils").toTimestamp(d("WATimeUtils").unixTime()),transportKey:"WhatsApp"});return h}catch(a){c("QPLUserFlow").addPoint(c("qpl")._(1056843664,"1465"),"fail_create_optimistic_reaction",{instanceKey:g});throw c("err")("Failed to send or unsend optimistic reaction: "+a+" ")}finally{c("QPLUserFlow").addPoint(c("qpl")._(1056843664,"1465"),"create_optimistic_reaction_end",{instanceKey:g})}},"readwrite",void 0,void 0,f.id+":51")},[])}function b(a,b,e,g,h){return a.runInTransaction(function(f){return h.then(function(h){if(h!=null)return f.reactions.upsert([h.threadKey,h.messageId,h.actorId],babelHelpers.extends({},h));else{h=d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.reactions).getKeyRange(b,e,g).filter(function(a){return(i||(i=d("I64"))).equal(a.authorityLevel,i.of_int32(c("LSAuthorityLevel").OPTIMISTIC))}));return h.then(function(a){if(a==null)return;return f.reactions.delete(a.threadKey,a.messageId,a.actorId)})}})},"readwrite",void 0,void 0,f.id+":101")}g.useOptimisticReactionLSDB=a;g.markOptimisticReactionAsFailedLSDB=b}),98);
__d("MAWSendOrRemoveReaction.react",["FBLogger","Int64Hooks","MAWBridgeSendAndReceive","MAWDbMsg","MAWGetProtocolMsgIdByMsgIdInUI","MAWLoggerUtils","MAWMessageSendReporter","MAWMiActOnActThreadReady","MAWOptimisticCreateOrDeleteReactionLSDB","MWPActor.react","QPLUserFlow","WAResultOrError","err","promiseDone","qpl","react-compiler-runtime","sendToSentQPLLogger","useMWLSDefaultThreadSourceAndResetAttribution","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e=d("react-compiler-runtime").c(9),f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=d("MAWLoggerUtils").getInstanceKey(),e[0]=f):f=e[0];var g=f,i=d("MWPActor.react").useActor(),j=(h||(h=c("useReStore")))(),k=d("MAWOptimisticCreateOrDeleteReactionLSDB").useOptimisticReactionLSDB(),l=c("useMWLSDefaultThreadSourceAndResetAttribution")(),m;e[1]!==i||e[2]!==k||e[3]!==j||e[4]!==l||e[5]!==b||e[6]!==a?(f=async function(e,f,h,m){var n=d("MAWDbMsg").toMsgId(e);if(b==null||n==null)return d("WAResultOrError").makeError({isRetriable:!1,type:"msg-id-null"});c("QPLUserFlow").start(c("qpl")._(1056843664,"1465"),{instanceKey:g});c("QPLUserFlow").addPoint(c("qpl")._(1056843664,"1465"),"create_optimistic_reaction_start",{instanceKey:g});var o=l(a),p=k(a,n,f,g,j,i);c("promiseDone")(p);e=await d("MAWMiActOnActThreadReady").waitForACTThreadReady(j.tables,a,"MAWSendOrRemoveReaction.react");var q=e.chatJid;return d("MAWGetProtocolMsgIdByMsgIdInUI").getProtocolMsgIdByMsgIdUI(n).then(async function(e){if(e==null)return d("WAResultOrError").makeError({isRetriable:!1,type:"protocol-msg-id-null"});e=d("MAWBridgeSendAndReceive").sendAndReceive("backend","sendReactionMsg",{args:{groupingKey:"",reaction:f,reactToAuthor:b,reactToProtocolMsgId:e,source:o},chatJid:q,externalId:m,qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:h}).catch(function(b){c("promiseDone")(d("MAWOptimisticCreateOrDeleteReactionLSDB").markOptimisticReactionAsFailedLSDB(j,a,n,i,p));throw b});return d("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:q,externalId:m},e,{qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:h},j)}).then(function(a){c("QPLUserFlow").endSuccess(c("qpl")._(1056843664,"1465"),{instanceKey:g});d("sendToSentQPLLogger").markSendToSentSuccess(h);return(a==null?void 0:a.success)===!1?d("WAResultOrError").makeError(a.error):(a==null?void 0:a.value)!=null?a:d("WAResultOrError").makeResult({description:"removal pending rollout of MAWMessageSendReporterV2",messageType:"fixMe"})}).catch(function(a){c("FBLogger")("messenger_web").catching(a).mustfix("Failed to send or unsend optimistic reaction: %s.",a);c("QPLUserFlow").endFailure(c("qpl")._(1056843664,"1465"),"failure",{instanceKey:g});d("sendToSentQPLLogger").markSendToSentFail(h,"failed_to_send_remove_reaction",a);throw c("err")("Failed to send or unsend optimistic reaction: "+a+" ")})},m=[b,g,l,a,k,j,i],e[1]=i,e[2]=k,e[3]=j,e[4]=l,e[5]=b,e[6]=a,e[7]=f,e[8]=m):(f=e[7],m=e[8]);return d("Int64Hooks").useCallbackInt64(f,m)}g.useSendOrRemoveReaction=a}),98);
__d("MDSEntryPointPopoverTrigger.react",["CometEntryPointPopoverTrigger.react","MDSPopoverLoadingState.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["fallback"],i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(8),e,f;b[0]!==a?(e=a.fallback,f=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f):(e=b[1],f=b[2]);b[3]!==e?(a=e!=null?e:j.jsx(c("MDSPopoverLoadingState.react"),{withArrow:!0}),b[3]=e,b[4]=a):a=b[4];b[5]!==f||b[6]!==a?(e=j.jsx(c("CometEntryPointPopoverTrigger.react"),babelHelpers["extends"]({fallback:a},f)),b[5]=f,b[6]=a,b[7]=e):e=b[7];return e}g["default"]=a}),98);
__d("MDSTooltipGroup.react",["BaseTooltipGroup.react","MDSTooltipImpl.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(2);a=a.children;var e;b[0]!==a?(e=i.jsx(d("BaseTooltipGroup.react").Container,{tooltipImpl:c("MDSTooltipImpl.react"),children:a}),b[0]=a,b[1]=e):e=b[1];return e}g["default"]=a}),98);
__d("MWCMStandaloneJoinDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{}},root:c("JSResourceForInteraction")("MWCMStandaloneJoinDialog.react").__setRef("MWCMStandaloneJoinDialog.entrypoint")};g["default"]=a}),98);
__d("MWCommandsComposerPluginCommandList",["fbt","ix","FBLogger","fbicon"],(function(a,b,c,d,e,f,g,h,i){"use strict";function a(a,b,c,d,e){b=b.toString();return{data:{decorType:"regular",handle:b,key:a,label:b,rawData:{icon:d,subtitle:c.toString()},type:"entry"},rangeType:e}}e=[a("silent",h._(/*BTDS*/"silent"),h._(/*BTDS*/"Send message without a notification"),d("fbicon")._(i("549627"),16),"s")];f=e.map(function(a){return a.data});var j=e.reduce(function(a,b){var c;a[(c=b.data.handle)!=null?c:b.data.key]=b.rangeType;return a},{});function b(a){var b=j[a];if(b==null){c("FBLogger")("messenger_web").mustfix("Unregisted messenger composer command %s used. Please add the command to the mapping in MWCommandsComposerPluginCommandList",a);return"n"}return b}g.commands=f;g.commandToRangeType=b}),226);
__d("messengerCommandsLexicalCreateNodeStrategy",["MWCommandsComposerPluginCommandList","MWCommandsComposerPluginTextNode","cometBaseMentionsLexicalCreateNodeStrategy","cometMentionsDataEntryText"],(function(a,b,c,d,e,f,g){"use strict";a=c("cometBaseMentionsLexicalCreateNodeStrategy")(function(a){var b;return d("MWCommandsComposerPluginTextNode").$createMessengerLexicalCommandNode({commandId:"0",commandPrefix:"/",handle:c("cometMentionsDataEntryText")(a),rangeType:d("MWCommandsComposerPluginCommandList").commandToRangeType((b=a.handle)!=null?b:a.key)})});b=a;g["default"]=b}),98);
__d("MWCommandsComposerPlugin.react",["CometMentionsForLexical.react","CometMentionsLayoutStrategy.react","MWChatComposerMentionsViewItem.react","MWCommandsComposerPluginCommandList","Promise","createCometMentionMatchStrategy","messengerCommandsLexicalCreateNodeStrategy","react","react-compiler-runtime","useCometMentionsDataSourceResolverConfig","useCometTypeaheadViewListStrategy"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));i.useMemo;var k={view:{minWidth:"x1jzhcrs",$$css:!0}},l=function(){function a(){}var c=a.prototype;c.bootstrap=function(){return};c.fetchCache=function(a){return{entries:a.query.length===0?d("MWCommandsComposerPluginCommandList").commands:d("MWCommandsComposerPluginCommandList").commands.filter(function(b){return(b=b.handle)==null?void 0:b.startsWith(a.query)}),params:a}};c.fetchNetwork=function(a){return(h||(h=b("Promise"))).resolve(this.fetchCache(a))};return a}();function a(a){var b=d("react-compiler-runtime").c(6);a=a.editor;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=[{dataSource:new l(),matchStrategy:c("createCometMentionMatchStrategy")({minMatchLength:0,name:"MessengerCommandsMatchStrategy",triggers:"/"})}],b[0]=e):e=b[0];e=e;e=c("useCometMentionsDataSourceResolverConfig")(e,!0);var f;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(f={viewItemStrategyRenderer:c("MWChatComposerMentionsViewItem.react"),viewXStyle:k.view},b[1]=f):f=b[1];f=c("useCometTypeaheadViewListStrategy")(f);var g;b[2]!==e||b[3]!==a||b[4]!==f?(g=j.jsx(c("CometMentionsForLexical.react"),{createNodeStrategy:c("messengerCommandsLexicalCreateNodeStrategy"),dataSourceResolverConfig:e,editor:a,layoutStrategyRenderer:c("CometMentionsLayoutStrategy.react"),position:"above",viewStrategyRenderer:f}),b[2]=e,b[3]=a,b[4]=f,b[5]=g):g=b[5];return g}g["default"]=a}),98);
__d("MWJumpToMessageLogger",["CometHeroLogging","I64","LSIntEnum","LSMessagingInitiatingSource","MWChatInteraction"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,e,f){var g=c("CometHeroLogging").genHeroInteractionUUIDAndMarkStart(a.getTraceId());d("MWChatInteraction").set(b,g);e!=null&&((h||(h=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingInitiatingSource").FACEBOOK_CHAT))?a.addMetadata("entrypoint","chat"):(h||(h=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingInitiatingSource").FACEBOOK_INBOX))&&a.addMetadata("entrypoint","inbox"));a.addMetadata("mw_version",(h||(h=d("I64"))).to_string(f));return a.onComplete(function(){delete d("MWChatInteraction").interactions[b]})}g.startHeroInteractionTrace=a}),98);
__d("MWReactionUtils",["LSMessagingThreadTypeUtil","MWCMThreadTypes.react","ReQL","ReQLSuspense","useIsMultiReactionEnabled","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e,g=(h||(h=c("useReStore")))(),i=d("useIsMultiReactionEnabled").useIsMultiReactEnabled(b);e=(e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(g.tables.threads,["threadSubtype","threadType"]).getKeyRange(b)},[g,b],f.id+":30"))!=null?e:{};var j=e.threadSubtype;e=e.threadType;if(!(e!=null&&d("LSMessagingThreadTypeUtil").isDiscoverableChannel(e))&&!(e!=null&&d("MWCMThreadTypes.react").isBroadcastThread(e))&&!(j!=null&&d("MWCMThreadTypes.react").isIGBroadcastChannelThread(j)))return;if(i)return;a.sort(function(a,b){return a.count===b.count&&a.reactionLiteral!=null&&b.reactionLiteral!=null?a.reactionLiteral.localeCompare(b.reactionLiteral):b.count-a.count})}g.useSortReactionsForBroadcastChat=a}),98);
__d("MWXIconExclamationMarkCircle",["MWXSvgIcon","SVGIcon","cr:22309","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22309")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconFaceHappyOutline",["MWXSvgIcon","SVGIcon","cr:22312","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22312")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXMessageBaseMessageListText.react",["MWChatTextTransform","MWXMessageTextWithEntities.react","MWXText.react","react","react-compiler-runtime","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={incoming:{color:"x18lvrbx",$$css:!0},outgoing:{color:"xyk4ms5",$$css:!0},regular:{marginTop:"x1gslohp",marginInlineEnd:"x14z9mp",marginBottom:"x12nagc",marginInlineStart:"x1lziwak",textAlign:"x1yc453h",whiteSpace:"x126k92a",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(14),e=a.outgoing,f=a.text,g=a.xstyle,h=a.ranges,k=a.renderers;a=a.transforms;if(f==null)return null;var l=e?"white":"primary";e=e?j.outgoing:j.incoming;var m;b[0]!==e||b[1]!==g?(m=[j.regular,e,g],b[0]=e,b[1]=g,b[2]=m):m=b[2];e=a!=null?a:d("MWChatTextTransform").textTransforms;b[3]!==h||b[4]!==k||b[5]!==e||b[6]!==f?(g=i.jsx(c("MWXMessageTextWithEntities.react"),{ranges:h,renderers:k,text:f,transforms:e,withParagraphs:!1}),b[3]=h,b[4]=k,b[5]=e,b[6]=f,b[7]=g):g=b[7];b[8]!==m||b[9]!==g?(a=i.jsx(d("react-strict-dom").html.div,{dir:"auto",style:m,children:g}),b[8]=m,b[9]=g,b[10]=a):a=b[10];b[11]!==l||b[12]!==a?(h=i.jsx(c("MWXText.react"),{color:l,type:"body3",children:a}),b[11]=l,b[12]=a,b[13]=h):h=b[13];return h}g["default"]=a}),98);
__d("MessengerBadgeCheckmarkFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M7.818 18.378c-1.176 1.307-1.645 2.915-1.077 4.286.567 1.37 2.036 2.176 3.792 2.268.287.015.52.248.535.535.092 1.756.897 3.225 2.268 3.793 1.371.567 2.979.098 4.286-1.078a.568.568 0 0 1 .756 0c1.307 1.177 2.915 1.645 4.286 1.078 1.37-.568 2.176-2.037 2.268-3.793a.568.568 0 0 1 .535-.535c1.756-.092 3.225-.897 3.793-2.268.567-1.371.098-2.979-1.078-4.286a.568.568 0 0 1 0-.756c1.177-1.307 1.645-2.915 1.078-4.286-.568-1.37-2.037-2.176-3.793-2.268a.569.569 0 0 1-.535-.535c-.092-1.756-.897-3.225-2.268-3.792-1.371-.568-2.979-.1-4.286 1.077a.568.568 0 0 1-.756 0c-1.307-1.176-2.915-1.645-4.286-1.077-1.37.567-2.176 2.036-2.268 3.792a.568.568 0 0 1-.535.535c-1.756.092-3.225.897-3.792 2.268-.568 1.371-.1 2.979 1.077 4.286a.568.568 0 0 1 0 .756zm15.547-4.376a1 1 0 0 0-1.73-1.004l-4.41 7.595a.25.25 0 0 1-.393.051l-2.625-2.625a1 1 0 0 0-1.414 1.414l3.774 3.774a1 1 0 0 0 1.572-.205l5.226-9z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerDots3VerticalFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{d:"M18 12.5A2.25 2.25 0 1 1 18 8a2.25 2.25 0 0 1 0 4.5zM18 20.25a2.25 2.25 0 1 1 0-4.5 2.25 2.25 0 0 1 0 4.5zM15.75 25.75a2.25 2.25 0 1 0 4.5 0 2.25 2.25 0 0 0-4.5 0z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerExclamationMarkCircleFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 29c6.075 0 11-4.925 11-11S24.075 7 18 7 7 11.925 7 18s4.925 11 11 11zm-1.425-16.502a1.427 1.427 0 1 1 2.85 0l-.375 7.503a1.051 1.051 0 0 1-2.1 0l-.375-7.503zM19.25 23.75a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerInboxTrayConversionClickEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3905");b=d("FalcoLoggerInternal").create("messenger_inbox_tray_conversion_click_event",a);e=b;g["default"]=e}),98);
__d("MessengerInboxTrayEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3476");b=d("FalcoLoggerInternal").create("messenger_inbox_tray_event",a);e=b;g["default"]=e}),98);
__d("MessengerInboxTrayClickImpressionEventsLoggerImpl",["MessengerClickImpressionEventsLoggerUtils","MessengerInboxTrayConversionClickEventFalcoEvent","MessengerInboxTrayEventFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";function a(a){h(a,d("MessengerClickImpressionEventsLoggerUtils").EventTypeEnum.CLICK)}function b(a,b){h(a,d("MessengerClickImpressionEventsLoggerUtils").EventTypeEnum.CONVERSION,b)}function e(a){h(a,d("MessengerClickImpressionEventsLoggerUtils").EventTypeEnum.IMPRESSION)}function h(a,b,e){var f=a.id,g=a.isOnline,h=a.messageThreadId,i=a.position,j=a.storyIds,k=a.surface;a=a.targetType;var l;if(b===d("MessengerClickImpressionEventsLoggerUtils").EventTypeEnum.CLICK)l="single_click";else if(b===d("MessengerClickImpressionEventsLoggerUtils").EventTypeEnum.CONVERSION)l="single_click";else if(b===d("MessengerClickImpressionEventsLoggerUtils").EventTypeEnum.IMPRESSION)l="one_px_impression";else return;var m={event_type:l,surface:{entry_point:k.entry_point,major_surface:k.major_surface,minor_surface:k.minor_surface},target:{ranking:{absolute_position:i!=null?i.toString():"-1"},type:a,user:{id:f}}};g!=null&&(m=babelHelpers["extends"]({},m,{target:babelHelpers["extends"]({},m.target,{presence:{status:g?1:0}})}));if((j==null?void 0:j.firstCardId)!=null&&(j==null?void 0:j.bucketId)!=null){l=atob(j.firstCardId);k=null;l!=null&&l.includes("S:_ISC:")&&(k=l.split("S:_ISC:")[1]);m=babelHelpers["extends"]({},m,{target:babelHelpers["extends"]({},m.target,{story:{bucket_id:(i=j.bucketId)!=null?i:null,first_card_id:k!=null?k:null}})})}b===d("MessengerClickImpressionEventsLoggerUtils").EventTypeEnum.CLICK?c("MessengerInboxTrayEventFalcoEvent").log(function(){return m}):b===d("MessengerClickImpressionEventsLoggerUtils").EventTypeEnum.CONVERSION?(m=babelHelpers["extends"]({},m,{target:babelHelpers["extends"]({},m.target,{button:e!=null?{type:e}:void 0,message_thread:h!=null?{consistent_thread_fbid:h}:void 0})}),c("MessengerInboxTrayConversionClickEventFalcoEvent").log(function(){return m})):b===d("MessengerClickImpressionEventsLoggerUtils").EventTypeEnum.IMPRESSION&&c("MessengerInboxTrayEventFalcoEvent").log(function(){return m})}g.logClickEvent=a;g.logConversionClickEvent=b;g.logImpressionEvent=e}),98);
__d("MessengerReplyFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18.001 24.4c0 1.278-1.335 2.04-2.333 1.332l-9.004-6.399c-.891-.633-.89-2.028 0-2.661l9.004-6.398c.998-.71 2.333.053 2.333 1.33l.001 3.147c0 .138.114.25.252.251 6.999.076 11.74 3.317 11.742 10.986 0 .594-.411 1.012-1.033 1.012-.46 0-.844-.265-1.114-1.083-1.129-3.409-4.431-4.87-9.595-4.916a.25.25 0 0 0-.252.249v3.15z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("XmaEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5680");b=d("FalcoLoggerInternal").create("xma_events",a);e=b;g["default"]=e}),98);
__d("MessengerWebUXLoggerXMAEventLoggingImpl",["CometPassiveGetRouterStateContext","CometProductAttribution","I64","LSIntEnum","LSMessagingThreadTypeUtil","LSXmaContentType","LsThreadType","WebUXLoggingEntryPointContextProvider","XmaEventsE2eeFalcoEvent","XmaEventsFalcoEvent","castToEnum","react","react-compiler-runtime","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;f=h||d("react");f.useCallback;var k=f.useContext,l=f.useInsertionEffect,m=f.useRef;function a(){var a=d("react-compiler-runtime").c(2),b=n("xma_redirect_to_fb"),c;a[0]!==b?(c=function(a){b(a)},a[0]=b,a[1]=c):c=a[1];return c}function b(a){var b=d("react-compiler-runtime").c(3),e=n("xma_impression"),f;b[0]!==a||b[1]!==e?(f={onImpressionStart:function(){e(a)}},b[0]=a,b[1]=e,b[2]=f):f=b[2];return c("useSinglePartialViewImpression")(f)}function e(){var a=d("react-compiler-runtime").c(2),b=n("xma_click"),c;a[0]!==b?(c=function(a){b(a)},a[0]=b,a[1]=c):c=a[1];return c}function n(a){var b=d("react-compiler-runtime").c(5),e=k(d("WebUXLoggingEntryPointContextProvider").WebUXEntryPointLoggingContext),f=m(e),g;b[0]!==e?(g=function(){f.current=e},b[0]=e,b[1]=g):g=b[1];l(g,void 0);var h=k(c("CometPassiveGetRouterStateContext"));b[2]!==a||b[3]!==h?(g=function(b){var e,g=b.attachment.messageId;e=c("castToEnum")((i||(i=d("I64"))).to_int32((e=b.threadType)!=null?e:(i||(i=d("I64"))).zero),c("LsThreadType"),null);var k=b.threadType?d("LSMessagingThreadTypeUtil").isArmadilloSecure(b.threadType):!1,l=b.attachment.threadKey,m=i.to_string(l),n=f.current,r=p(b.attachment),s=d("CometProductAttribution").getMinifiedTopMostRouteProductAttribution(h),t=b.attachment.xmaContentType,u=q(t),v={click_category:b==null?void 0:b.clickCategory,click_target_type:r,entrypoint:n,event:(b==null?void 0:b.isDirectToExternal)===!0?"xma_redirect_to_external_app":a,is_facebook_installed:null,is_fb_content:u,tam_xma_content_type:t!=null?(i||(i=d("I64"))).to_int32(t):null,thread_id:m,thread_type:e};if(k===!0&&c("XmaEventsE2eeFalcoEvent")!=null){var w=o(b.message),x=b.message!=null&&(i||(i=d("I64"))).equal((r=b.message)==null?void 0:r.displayedContentTypes,(j||(j=d("LSIntEnum"))).ofNumber(536870912));c("XmaEventsE2eeFalcoEvent").log(function(){return babelHelpers["extends"]({},v,w,{is_receiver_fetch:x,navigation_chain:s,thread_key:(i||(i=d("I64"))).to_string(l)})})}else c("XmaEventsFalcoEvent").log(function(){return babelHelpers["extends"]({},v,{attribution_id_v2:s,message_id:g})})},b[2]=a,b[3]=h,b[4]=g):g=b[4];return g}function o(a){return a==null?{}:{forward:a.isForwarded,message_sender_id:(i||(i=d("I64"))).to_string(a.senderId),message_sent_time:i.to_string(i.div(a.timestampMs,i.of_string("1000")))}}function p(a){var b=a.defaultCtaType,c=a.attachmentLoggingType;a=a.cta1Type;var d=35;b==="xma_rtc_missed_audio"?d=37:b==="xma_rtc_missed_video"?d=36:b==="xma_rtc_missed_group_audio"?d=67:b==="xma_rtc_missed_group_video"?d=66:b==="xma_rtc_audio"?d=17:b==="xma_rtc_video"?d=18:b==="xma_rtc_ended_audio"?d=57:b==="xma_rtc_ended_video"?d=56:b==="xma_rtc_new_audio_default"?d=68:b==="xma_live_location_sharing"?(d=38,a==="xma_live_location_sharing"&&(d=39)):b==="xma_shops_pdp"?d=61:b==="xma_open_native"?d=41:b==="xma_web_url"?d=35:c==="xma_open_contact_share"?d=64:b==="xma_customer_information"?d=65:c==="xma_appointment_confirmed"?d=70:b==="xma_montage_share"&&(d=82);return d}function q(a){if(a==null)return null;a=(i||(i=d("I64"))).to_int32(a);return a===c("LSXmaContentType").FB_FEED_SHARE||a===c("LSXmaContentType").FB_STORY_REPLY||a===c("LSXmaContentType").FB_STORY_SHARE||a===c("LSXmaContentType").FB_STORY_MENTION||a===c("LSXmaContentType").FB_FEED_VIDEO_SHARE||a===c("LSXmaContentType").FB_GAMING_CUSTOM_UPDATE||a===c("LSXmaContentType").FB_PRODUCER_STORY_REPLY||a===c("LSXmaContentType").FB_EVENT||a===c("LSXmaContentType").FB_FEED_POST_PRIVATE_REPLY||a===c("LSXmaContentType").FB_SHORT||a===c("LSXmaContentType").MSG_MEMORIES_SHARE||a===c("LSXmaContentType").LIVE_LOCATION||a===c("LSXmaContentType").MSG_RECEIVER_FETCH}g.useXMAEventsRedirectDefaultToFBLogger=a;g.useXMAEventsImpressionLoggerRef=b;g.useXMAEventsClickLogger=e}),98);
__d("getOpacityStyleName",[],(function(a,b,c,d,e,f){var g=!1,h=null;function a(){if(!g){if(document.body&&"opacity"in document.body.style)h="opacity";else{var a=document.createElement("div");a.style.filter="alpha(opacity=100)";a.style.filter&&(h="filter")}g=!0}return h}f["default"]=a}),66);
__d("StyleCore",["invariant","camelize","containsNode","err","getOpacityStyleName","getStyleProperty","hyphenate"],(function(a,b,c,d,e,f,g,h){function i(a,b){a=o.get(a,b);return a==="auto"||a==="scroll"}var j=new RegExp("\\s*([^\\s:]+)\\s*:\\s*([^;('\"]*(?:(?:\\([^)]*\\)|\"[^\"]*\"|'[^']*')[^;(?:'\"]*)*)(?:;|$)","g");function k(a){var b={};a.replace(j,function(a,c,d){b[c]=d;return d});return b}function l(a){var b="";for(var c in a)a[c]&&(b+=c+":"+a[c]+";");return b}function m(a){return a!==""?"alpha(opacity="+a*100+")":""}function n(a,b,d){switch(c("hyphenate")(b)){case"font-weight":case"line-height":case"opacity":case"z-index":case"animation-iteration-count":case"-webkit-animation-iteration-count":break;case"width":case"height":var e=parseInt(d,10)<0;e&&h(0,11849,a,b,d);default:isNaN(d)||!d||d==="0"||h(0,11850,a,b,d,d+"px");break}}var o={set:function(a,b,d){n("Style.set",b,d);if(a==null)return;a=a.style;switch(b){case"opacity":c("getOpacityStyleName")()==="filter"?a.filter=m(d):a.opacity=d;break;case"float":a.cssFloat=a.styleFloat=d||"";break;default:try{a[c("camelize")(b)]=d}catch(a){throw c("err")('Style.set: "%s" argument is invalid: %s',b,d)}}},apply:function(a,b){var d;for(d in b)n("Style.apply",d,b[d]);"opacity"in b&&c("getOpacityStyleName")()==="filter"&&(b.filter=m(b.opacity),delete b.opacity);var e=k(a.style.cssText);for(d in b){var f=b[d];delete b[d];var g=c("hyphenate")(d);for(var h in e)(h===g||h.indexOf(g+"-")===0)&&delete e[h];b[g]=f}Object.assign(e,b);a.style.cssText=l(e)},get:c("getStyleProperty"),getFloat:function(a,b){return parseFloat(o.get(a,b),10)},getOpacity:function(a){if(c("getOpacityStyleName")()==="filter"){var b=o.get(a,"filter");if(b){b=/(\d+(?:\.\d+)?)/.exec(b);if(b)return parseFloat(b.pop())/100}}return o.getFloat(a,"opacity")||1},isFixed:function(a){while(c("containsNode")(document.body,a)){if(o.get(a,"position")==="fixed")return!0;a=a.parentNode}return!1},getScrollParent:function(a){if(!a)return null;while(a&&a!==document.body){if(i(a,"overflow")||i(a,"overflowY")||i(a,"overflowX"))return a;a=a.parentNode}return window}};a=o;g["default"]=a}),98);
__d("Style",["$","StyleCore"],(function(a,b,c,d,e,f,g){a=babelHelpers["extends"]({},c("StyleCore"),{get:function(a,b){typeof a==="string"&&(a=c("$")(a));return c("StyleCore").get(a,b)},getFloat:function(a,b){typeof a==="string"&&(a=c("$")(a));return c("StyleCore").getFloat(a,b)}});b=a;g["default"]=b}),98);
__d("XThisControllerNoLongerExistsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/dcb/tcnle/",{t:{type:"String"}})}),null);
__d("ThisControllerNoLongerExists",["XControllerURIBuilder","XThisControllerNoLongerExistsController","jsRouteBuilder"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){function b(b){var c;c=a.call(this,"/dcb/tcnle/",{})||this;c.$XControllerURIBuilderNoOpDead$p_1=b;return c}babelHelpers.inheritsLoose(b,a);var d=b.prototype;d.__validateRequiredParamsExistence=function(){};d.__assertParamExists=function(a){};d.__setParam=function(a,b,c){return this};d.__setParamInt=function(a,b){};d.getRequest_LEGACY_UNTYPED=function(a){return a.setURI(this.getURI())};d.getURI=function(){return c("XThisControllerNoLongerExistsController").getURIBuilder().setString("t",this.$XControllerURIBuilderNoOpDead$p_1).getURI()};d.getLookasideURI=function(){return this.getURI()};return b}(c("XControllerURIBuilder"));function a(a){return c("XThisControllerNoLongerExistsController").getURIBuilder().setString("t",a).getURI()}function b(a){return new h(a)}function d(a){var b=c("jsRouteBuilder")("/dcb/tcnle/",{}),d={t:a};return{buildUri:function(){return b.buildUri(d)},buildUriNullable:function(){return b.buildUriNullable(d)},buildURL:function(){return b.buildURL(d)},buildURLStringDEPRECATED:function(){return b.buildURLStringDEPRECATED(d)},getPath:function(){return b.getPath()}}}g.__DEADURI__=a;g.__DEADBUILDER__=b;g.__DEADROUTEBUILDER__=d}),98);
__d("XAsyncRequestWWW",["AsyncRequest"],(function(a,b,c,d,e,f,g){a=function(){function a(a){var b=this;this.setAllowCrossPageTransition=function(a){b.$1.setAllowCrossPageTransition(a);return b};this.$1=new(c("AsyncRequest"))(a)}var b=a.prototype;b.setURI=function(a){this.$1.setURI(a);return this};b.setTimeoutHandler=function(a,b){this.$1.setTimeoutHandler(a,b);return this};b.setOption=function(a,b){this.$1.setOption(a,b);return this};b.setMethod=function(a){this.$1.setMethod(a);return this};b.setAutoProcess=function(a){this.$1.setOption("suppressEvaluation",a);return this};b.setData=function(a){this.$1.setData(a);return this};b.setHandler=function(a){this.$1.setHandler(a);return this};b.setPayloadHandler=function(a){this.setHandler(function(b){return a(b.payload)});return this};b.setErrorHandler=function(a){this.$1.setErrorHandler(a);return this};b.send=function(){this.$1.send();return this};b.abort=function(){this.$1.abort()};b.setReadOnly=function(a){this.$1.setReadOnly(a);return this};b.setAllowCrossOrigin=function(a){this.$1.setAllowCrossOrigin(a);return this};b.setAllowCredentials=function(a){this.$1.setAllowCredentials(a);return this};return a}();g["default"]=a}),98);
__d("XComposerPhotoUploaderImmediate",["Promise","XComposerPhotoUploader","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h;a={load:function(){return(h||(h=b("Promise"))).resolve(c("XComposerPhotoUploader"))},preload:c("emptyFunction")};g["default"]=a}),98);
__d("XMDSIconButton.react",["CDSIconButton.react"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("CDSIconButton.react"),Object.keys(d("CDSIconButton.react")).forEach(function(a){if(a==="default"||a==="__esModule")return;g[a]=d("CDSIconButton.react")[a]})}),98);
__d("isMessageUnsentInLastTenSeconds",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return Date.now()-(h||(h=d("I64"))).to_float((a=a.unsentTimestampMs)!=null?a:(h||(h=d("I64"))).zero)<=1e4}g["default"]=a}),98);
__d("useCommunityMembers",["I64","Int64Hooks","LSClearCommunityMembersAndRangeStoredProcedure","LSFactory","LSIntEnum","LSIssueCommunityMemberListFetchStoredProcedure","LSVec","MWCMThreadTypes.react","ReQL","ReQLSuspense","promiseDone","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;(k||d("react")).useCallback;function a(a,b,e){var g=d("react-compiler-runtime").c(6),k=(h||(h=c("useReStore")))(),l,m;g[0]!==a||g[1]!==k||g[2]!==b||g[3]!==e?(l=function(){var g=async function(){await k.runInTransaction(function(f){return c("LSIssueCommunityMemberListFetchStoredProcedure")(c("LSFactory")(f),{communityId:a,fetchAdminsOnly:!1,fetchFriendMembersOnly:!1,maxName:"",maxTimestampMs:(i||(i=d("I64"))).zero,nextPageCursor:"",requestId:b,roles:c("LSVec").ofArray([(j||(j=d("LSIntEnum"))).ofNumber(0)]),source:j.ofNumber(13),threadKey:e!=null?e:void 0,threadRoles:c("LSVec").ofArray([])})},"readwrite",void 0,void 0,f.id+":44")};c("promiseDone")(g())},m=[a,k,b,e],g[0]=a,g[1]=k,g[2]=b,g[3]=e,g[4]=l,g[5]=m):(l=g[4],m=g[5]);d("Int64Hooks").useEffectInt64(l,m)}function b(a,b,e){var g=d("react-compiler-runtime").c(10),i=(h||(h=c("useReStore")))(),j;g[0]!==a||g[1]!==i.tables.community_members_ranges_v2__generated||g[2]!==e||g[3]!==b?(j=function(){return d("ReQL").fromTableAscending(i.tables.community_members_ranges_v2__generated).getKeyRange(a).filter(function(a){if(a.requestId!==b)return!1;return e!=null?a.isAdmin===e:!0})},g[0]=a,g[1]=i.tables.community_members_ranges_v2__generated,g[2]=e,g[3]=b,g[4]=j):j=g[4];var k;g[5]!==a||g[6]!==i||g[7]!==e||g[8]!==b?(k=[i,a,e,b],g[5]=a,g[6]=i,g[7]=e,g[8]=b,g[9]=k):k=g[9];return d("ReQLSuspense").useFirst(j,k,f.id+":76")}function e(a){var b=d("react-compiler-runtime").c(3),e=a===void 0?7:a,g=(h||(h=c("useReStore")))();b[0]!==g||b[1]!==e?(a=function(a){return g.runInTransaction(function(b){return c("LSClearCommunityMembersAndRangeStoredProcedure")(c("LSFactory")(b),{requestId:a,source:(j||(j=d("LSIntEnum"))).ofNumber(e)})},"readwrite",void 0,void 0,f.id+":98")},b[0]=g,b[1]=e,b[2]=a):a=b[2];return a}function l(a){var b=d("react-compiler-runtime").c(12),e=a.communityIdOrThreadKey,g=a.thread,k=a.showAdmodsOnly,l=a.showHostsOnly,m=a.source,n=a.requestId,o=k===void 0?!1:k,p=l===void 0?!1:l;b[0]!==m?(a=m===void 0?(i||(i=d("I64"))).of_int32(7):m,b[0]=m,b[1]=a):a=b[1];var q=a,r=(h||(h=c("useReStore")))(),s=g.threadKey,t=g.threadType;b[2]!==e||b[3]!==r||b[4]!==n||b[5]!==o||b[6]!==p||b[7]!==q||b[8]!==s||b[9]!==t?(k=function(){var a=c("LSVec").ofArray(o?[(j||(j=d("LSIntEnum"))).ofNumber(1),(j||(j=d("LSIntEnum"))).ofNumber(2)]:p?[(j||(j=d("LSIntEnum"))).ofNumber(3)]:[(j||(j=d("LSIntEnum"))).ofNumber(0)]),b=d("MWCMThreadTypes.react").isBroadcastThread(t)?[(j||(j=d("LSIntEnum"))).ofNumber(0)]:[],g=async function(){await r.runInTransaction(function(f){return c("LSIssueCommunityMemberListFetchStoredProcedure")(c("LSFactory")(f),{communityId:e,fetchAdminsOnly:!1,fetchFriendMembersOnly:!1,maxName:"",maxTimestampMs:(i||(i=d("I64"))).zero,nextPageCursor:"",requestId:n,roles:a,source:q,threadKey:(i||(i=d("I64"))).equal(q,(i||(i=d("I64"))).of_int32(0))?void 0:s,threadRoles:c("LSVec").ofArray(b)})},"readwrite",void 0,void 0,f.id+":149")};c("promiseDone")(g())},l=[r,e,s,t,o,q,n,p],b[2]=e,b[3]=r,b[4]=n,b[5]=o,b[6]=p,b[7]=q,b[8]=s,b[9]=t,b[10]=k,b[11]=l):(k=b[10],l=b[11]);d("Int64Hooks").useEffectInt64(k,l)}g.useFetchBannedMemberList=a;g.useCommunityMembersRanges=b;g.useClearMemberList=e;g.useFetchCommunityMembers=l}),98);
__d("useMAWPDeleteMessageForMe",["MAWBridgeSendAndReceive","MAWDbMsg","MAWGetProtocolMsgIdByMsgIdInUI","MAWJobDefinitions","MAWTimedJob","MessengerWebUXLogger","Promise","QPLUserFlow","Random","WAJobOrchestratorTypes","WebUserFlowLoggingDataContextProvider.react","gkx","promiseDone","qpl","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=i||d("react");var j=e.useContext;e.useMemo;function a(){var a=d("react-compiler-runtime").c(3),e=j(d("WebUserFlowLoggingDataContextProvider.react").WebUserFlowLoggingDataContext),f=e.loggingDataRef,g=c("MessengerWebUXLogger").useInteractionLogger();a[0]!==g||a[1]!==f?(e=function(a,d){var e=[];d!=null?e.push.apply(e,d.messagesAndAttachments.map(k)):e.push(a);c("promiseDone")((h||(h=b("Promise"))).allSettled([e.map(function(a){return l(a,f,g)})]))},a[0]=g,a[1]=f,a[2]=e):e=a[2];a=e;return a}function k(a){return a.message}function l(a,b,e){var f=c("qpl")._(25308285,"2002"),g=Date.now()+(Math.round(d("Random").random()*1e4)+1e4);c("QPLUserFlow").start(f,{annotations:{string:{isEphemeralMessage:a.ephemeralDurationInSec!=null||a.ephemeralExpirationTs!=null?"true":"false",type:"secureDeleteMessageForMe"}},instanceKey:g});a=d("MAWDbMsg").toMsgId(a.messageId);if(a==null){c("QPLUserFlow").endFailure(f,"missing_msg_id",{instanceKey:g});return}return d("MAWGetProtocolMsgIdByMsgIdInUI").getProtocolMsgIdByMsgIdUI(a).then(function(a){if(a==null){e==null||e(babelHelpers["extends"]({},b.current,{eventName:"message_remove_failure",eventType:"backend",extraData:babelHelpers["extends"]({},b.current.extraData,{error:"missing_msg_id"})}));c("QPLUserFlow").endFailure(f,"missing_protocolMsgId",{instanceKey:g});return}var h;c("gkx")("1800")?h=d("MAWBridgeSendAndReceive").sendAndReceive("backend","deleteMsgsForMe",{msgIds:[a]}):h=d("MAWTimedJob").TimedUIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").jobSerializers.deleteMsgsForMe([a],{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}));return h.then(function(){e==null||e(babelHelpers["extends"]({},b.current,{eventName:"message_remove_success",eventType:"backend"})),c("QPLUserFlow").endSuccess(f,{instanceKey:g})})})}g["default"]=a}),98);
__d("useMWCMPollsV2Enabled",["LSThreadBitOffset","MWLSThread"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=(a=d("MWLSThread").useThread(a,h))!=null?a:!1;return a}function h(a){return d("LSThreadBitOffset").has(159,a)}g["default"]=a}),98);
__d("useMWJumpToMessage",["MWJumpToMessageLogger","MWPVisibleMessageContext.react","MWVersion","qpl","react","react-compiler-runtime","useCometInteractionTracing","useLSMessagingInitiatingSource"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(a){var b=d("react-compiler-runtime").c(6),e=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext(),f=e.setVisibleMessage,g=c("useLSMessagingInitiatingSource")();b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=c("qpl")._(25301087,"7779"),b[0]=e):e=b[0];var h=c("useCometInteractionTracing")(e,"fast","INTERACTION");b[1]!==g||b[2]!==f||b[3]!==a||b[4]!==h?(e=function(b,c,e,i){var j=e!=null?e:"",k=i!=null?i:[];h(function(e){f({contextLine:j,highlights:k,messageId:b,source:a,timestamp:c});return d("MWJumpToMessageLogger").startHeroInteractionTrace(e,b,g,d("MWVersion").v2)})},b[1]=g,b[2]=f,b[3]=a,b[4]=h,b[5]=e):e=b[5];return e}g["default"]=a}),98);
__d("useMessengerUnsendNUXQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9581169425252316"}),null);
__d("useMessengerUnsendNUXQuery.graphql",["useMessengerUnsendNUXQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],c=[{kind:"Variable",name:"nux_id",variableName:"id"}],d={alias:null,args:null,kind:"ScalarField",name:"should_show",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"useMessengerUnsendNUXQuery",selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[d],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useMessengerUnsendNUXQuery",selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},d,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:b("useMessengerUnsendNUXQuery_facebookRelayOperation"),metadata:{},name:"useMessengerUnsendNUXQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("useMessengerUnsendNUX",["CometDismissFBNuxMutation","CometLogImpressionFBNuxMutation","CometRelay","RelayHooks","promiseDone","react","react-compiler-runtime","useMessengerUnsendNUXQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useCallback;var j=h!==void 0?h:h=b("useMessengerUnsendNUXQuery.graphql");function a(a){var b=d("react-compiler-runtime").c(13),e=d("RelayHooks").useRelayEnvironment(),f;b[0]!==e||b[1]!==a?(f=function(b){c("promiseDone")(d("CometRelay").fetchQuery(e,j,{id:a}).toPromise(),function(a){var c;a=(a=a==null||(c=a.nux)==null?void 0:c.should_show)!=null?a:!1;b(a)},null)},b[0]=e,b[1]=a,b[2]=f):f=b[2];f=f;var g;b[3]!==e||b[4]!==a?(g=function(){d("CometDismissFBNuxMutation").commit(e,a)},b[3]=e,b[4]=a,b[5]=g):g=b[5];g=g;var h;b[6]!==e||b[7]!==a?(h=function(){d("CometLogImpressionFBNuxMutation").commit(e,a)},b[6]=e,b[7]=a,b[8]=h):h=b[8];h=h;var i;b[9]!==h||b[10]!==g||b[11]!==f?(i=[f,g,h],b[9]=h,b[10]=g,b[11]=f,b[12]=i):i=b[12];return i}g["default"]=a}),98);
__d("useXMAPreviewsDisabledSetting",["MWPActor.react","MessengerWebPrivacySettings","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("react-compiler-runtime").c(6),b=(h||(h=c("useReStore")))(),e=d("MWPActor.react").useActor(),g;a[0]!==e||a[1]!==b.tables.messaging_privacy_settings?(g=function(){return d("ReQL").fromTableAscending(b.tables.messaging_privacy_settings).getKeyRange(e)},a[0]=e,a[1]=b.tables.messaging_privacy_settings,a[2]=g):g=a[2];var i;a[3]!==e||a[4]!==b?(i=[b,e],a[3]=e,a[4]=b,a[5]=i):i=a[5];a=d("ReQLSuspense").useFirst(g,i,f.id+":26");return a==null?c("MessengerWebPrivacySettings").e2ee_xma_previews_disabled:(g=a==null?void 0:a.e2eeXmaPreviewsDisabled)!=null?g:!1}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("BaseCalloutImpl.react",["BaseContextualLayer.react","BaseContextualLayerAnchorRootContext","BasePopoverReflowSheet.react","LayoutAnimationBoundaryContext","react","react-compiler-runtime","useCometDisplayTimingTrackerForInteraction","useMatchViewport"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useEffect;function a(a){var b=d("react-compiler-runtime").c(18),e=a.anchorRef,f=a.anchorRefOverride,g=a.anchorRootRefContext,h=a.animationContext,l=a.children,m=a.contextualLayerProps,n=a.imperativeRef,o=a.scrollableAreaContext;a=f===void 0?!1:f;f=c("useCometDisplayTimingTrackerForInteraction")("FDSCalloutManager");var p=c("useMatchViewport")("max","width",600)?c("BasePopoverReflowSheet.react"):i.Fragment,q,r;b[0]!==n||b[1]!==o?(q=function(){var a=o.map(k).filter(Boolean),b=function(){var a;return(a=n.current)==null?void 0:a.reposition()};if(a.length>0){a.forEach(function(a){return a.addEventListener("scroll",b,{passive:!0})});return function(){a.forEach(function(a){return a.removeEventListener("scroll",b,{passive:!0})})}}},r=[n,o],b[0]=n,b[1]=o,b[2]=q,b[3]=r):(q=b[2],r=b[3]);j(q,r);if(m==null||e==null)return null;b[4]!==p||b[5]!==e||b[6]!==a||b[7]!==l||b[8]!==m||b[9]!==n||b[10]!==f?(q=m!=null?i.jsx(p,{children:i.jsx(c("BaseContextualLayer.react"),{align:m.align,anchorRef:a?e:void 0,contextRef:e,disableAutoAlign:m.disableAutoAlign,disableAutoFlip:m.disableAutoFlip,imperativeRef:n,position:m.position,ref:f,reflowToPosition:p!==i.Fragment,children:l})}):null,b[4]=p,b[5]=e,b[6]=a,b[7]=l,b[8]=m,b[9]=n,b[10]=f,b[11]=q):q=b[11];b[12]!==g||b[13]!==q?(r=i.jsx(c("BaseContextualLayerAnchorRootContext").Provider,{value:g,children:q}),b[12]=g,b[13]=q,b[14]=r):r=b[14];b[15]!==h||b[16]!==r?(p=i.jsx(c("LayoutAnimationBoundaryContext").Provider,{value:h,children:r}),b[15]=h,b[16]=r,b[17]=p):p=b[17];return p}function k(a){return a.getDOMNode()}g["default"]=a}),98);
__d("CometRouterUIComponentsDefaultErrorRoot.react",["cr:12338","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");g["default"]=b("cr:12338")}),98);
__d("FDSCalloutEdgeArrow.svg.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=["children","xstyle"],i,j,k=j||d("react");function a(a){var b=a.children,d=a.xstyle;a=babelHelpers.objectWithoutPropertiesLoose(a,h);return k.jsxs("svg",babelHelpers["extends"]({"aria-hidden":!0,className:(i||(i=c("stylex")))(d),height:"12px",viewBox:"0 0 21 12",width:"21px"},a,{children:[a.title!=null&&k.jsx("title",{children:a.title}),b!=null&&k.jsx("defs",{children:b}),k.jsx("path",{d:"M20.685.12c-2.229.424-4.278 1.914-6.181 3.403L5.4 10.94c-2.026 2.291-5.434.62-5.4-2.648V.12h20.684z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;g["default"]=a}),98);
__d("FDSCalloutEdge.react",["BaseContextualLayerContextSizeContext","BaseContextualLayerLayerAdjustmentContext","BaseContextualLayerOrientationContext","BaseRow.react","BaseView.react","CometHideLayerOnEscape.react","FDSCalloutEdgeArrow.svg.react","FocusRegionStrictMode.react","Locale","focusScopeQueries","react","react-compiler-runtime","useOnOutsideClick"],(function(a,b,c,d,e,f,g){"use strict";var h=["children","disableAutoFocus","id","onClose","onOutsideClick","type","xstyle"],i,j=i||(i=d("react")),k=i.useContext,l={arrow:{position:"x10l6tqk",$$css:!0},container:{display:"x78zum5",$$css:!0},content:{backgroundColor:"x1h0vfkc",borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",boxShadow:"xofhs1l",paddingTop:"xyamay9",paddingBottom:"x1l90r2v",paddingInlineStart:"x1g0dm76",paddingInlineEnd:"xpdmqnj",paddingLeft:null,paddingRight:null,$$css:!0}},m={accent:{backgroundColor:"xdk9wry",$$css:!0},"default":{backgroundColor:"x9bbmet",$$css:!0}},n={end:{borderEndEndRadius:"x16uus16",marginBottom:"xieb3on",$$css:!0},middle:{marginBottom:"x12nagc",$$css:!0},start:{borderEndStartRadius:"xbiv7yw",marginBottom:"xieb3on",$$css:!0}},o={end:{borderStartEndRadius:"x1ga7v0g",marginTop:"x1sy10c2",$$css:!0},middle:{marginTop:"x1gslohp",$$css:!0},start:{borderStartStartRadius:"x15mokao",marginTop:"x1sy10c2",$$css:!0}},p={end:{bottom:"x7ofzsv",insetInlineEnd:"xtijo5x",left:null,right:null,transform:"xpk2tj9",$$css:!0},middle:{bottom:"x7ofzsv",insetInlineEnd:"xtijo5x",left:null,right:null,$$css:!0},start:{bottom:"x7ofzsv",insetInlineStart:"x1o0tod",left:null,right:null,$$css:!0}},q={end:{$$css:!0},middle:{$$css:!0},start:{$$css:!0}},r={end:{bottom:"x7ofzsv",insetInlineEnd:"xtijo5x",left:null,right:null,transform:"xpk2tj9",$$css:!0},middle:{bottom:"x7ofzsv",insetInlineEnd:"xtijo5x",left:null,right:null,$$css:!0},start:{bottom:"x7ofzsv",insetInlineStart:"x1o0tod",left:null,right:null,$$css:!0}},s={end:{$$css:!0},middle:{$$css:!0},start:{$$css:!0}},t={end:{insetInlineEnd:"xtijo5x",left:null,right:null,top:"x1nl0pjx",transform:"x19jd1h0",$$css:!0},middle:{insetInlineEnd:"xtijo5x",left:null,right:null,top:"x1nl0pjx",transform:"x1oihik5",$$css:!0},start:{insetInlineStart:"x1o0tod",left:null,right:null,top:"x1nl0pjx",transform:"x1oihik5",$$css:!0}},u={end:{transform:"x19jd1h0",$$css:!0},middle:{transform:"x1oihik5",$$css:!0},start:{transform:"x1oihik5",$$css:!0}},v={end:{insetInlineEnd:"xtijo5x",left:null,right:null,top:"x1nl0pjx",transform:"x19jd1h0",$$css:!0},middle:{insetInlineEnd:"xtijo5x",left:null,right:null,top:"x1nl0pjx",transform:"x1oihik5",$$css:!0},start:{insetInlineStart:"x1o0tod",left:null,right:null,top:"x1nl0pjx",transform:"x1oihik5",$$css:!0}},w={end:{transform:"x19jd1h0",$$css:!0},middle:{transform:"x1oihik5",$$css:!0},start:{transform:"x1oihik5",$$css:!0}};function x(a){if(a==="start")return"end";return a==="end"?"start":a}function a(a){var b,e=d("react-compiler-runtime").c(41),f,g,i,p,q,r,s,t;e[0]!==a?(g=a.children,r=a.disableAutoFocus,i=a.id,p=a.onClose,q=a.onOutsideClick,s=a.type,t=a.xstyle,f=babelHelpers.objectWithoutPropertiesLoose(a,h),e[0]=a,e[1]=f,e[2]=g,e[3]=i,e[4]=p,e[5]=q,e[6]=r,e[7]=s,e[8]=t):(f=e[1],g=e[2],i=e[3],p=e[4],q=e[5],r=e[6],s=e[7],t=e[8]);a=r===void 0?!1:r;r=s===void 0?"default":s;s=k(c("BaseContextualLayerOrientationContext"));var u=s.align;s=s.position;u=u==="stretch"?"start":u;s=s==="start"?"above":s==="end"?"below":s;var v=k(c("BaseContextualLayerContextSizeContext"));b=(b=k(c("BaseContextualLayerLayerAdjustmentContext")))!=null?b:0;var w;e[9]!==u||e[10]!==b?(w=b!==0?x(u):u,e[9]=u,e[10]=b,e[11]=w):w=e[11];u=w;v=(w=v==null?void 0:v.width)!=null?w:0;e[12]!==u||e[13]!==b||e[14]!==v?(w=A(u,v,b),e[12]=u,e[13]=b,e[14]=v,e[15]=w):w=e[15];b=w;v=c("useOnOutsideClick")(q);w=i!=null?i:void 0;q=a?void 0:d("focusScopeQueries").tabbableScopeQuery;i=m[r];a=s==="above"&&n[u];var y=s==="below"&&o[u],B;e[16]!==y||e[17]!==i||e[18]!==a||e[19]!==t?(B=[l.content,i,a,y,t],e[16]=y,e[17]=i,e[18]=a,e[19]=t,e[20]=B):B=e[20];e[21]!==g||e[22]!==v||e[23]!==B?(y=j.jsx(c("BaseRow.react"),{ref:v,xstyle:B,children:g}),e[21]=g,e[22]=v,e[23]=B,e[24]=y):y=e[24];e[25]!==u||e[26]!==s||e[27]!==r?(i=j.jsx(z,{align:u,position:s,type:r}),e[25]=u,e[26]=s,e[27]=r,e[28]=i):i=e[28];e[29]!==p||e[30]!==y||e[31]!==i?(a=j.jsxs(c("CometHideLayerOnEscape.react"),{onHide:p,children:[y,i]}),e[29]=p,e[30]=y,e[31]=i,e[32]=a):a=e[32];e[33]!==a||e[34]!==q?(t=j.jsx(d("FocusRegionStrictMode.react").FocusRegion,{autoFocusQuery:q,children:a}),e[33]=a,e[34]=q,e[35]=t):t=e[35];e[36]!==f||e[37]!==b||e[38]!==t||e[39]!==w?(g=j.jsx(c("BaseView.react"),babelHelpers["extends"]({},f,{id:w,role:"dialog",style:b,xstyle:l.container,children:t})),e[36]=f,e[37]=b,e[38]=t,e[39]=w,e[40]=g):g=e[40];return g}var y=c("Locale").isRTL();function z(a){var b=d("react-compiler-runtime").c(8),e=a.align,f=a.position;a=a.type;var g=a==="default"?"var(--popover-background)":"var(--callout-background-color-accent, var(--accent))",h=f==="above"&&a==="default"&&(y?q[e]:p[e]),i=f==="above"&&a==="accent"&&(y?s[e]:r[e]),k=f==="below"&&a==="default"&&(y?u[e]:t[e]);f=f==="below"&&a==="accent"&&(y?w[e]:v[e]);b[0]!==h||b[1]!==i||b[2]!==k||b[3]!==f?(a=[l.arrow,h,i,k,f],b[0]=h,b[1]=i,b[2]=k,b[3]=f,b[4]=a):a=b[4];b[5]!==g||b[6]!==a?(e=j.jsx(c("FDSCalloutEdgeArrow.svg.react"),{fill:g,xstyle:a}),b[5]=g,b[6]=a,b[7]=e):e=b[7];return e}function A(a,b,c){c=c===0?b/2:0;if(c===0)return void 0;if(a==="start")return{transform:"translateX("+(y?-1*c:c)+"px)"};return a==="end"?{transform:"translateX("+(y?c:-1*c)+"px)"}:void 0}g["default"]=a}),98);
__d("FDSCalloutInsetArrow.svg.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=["children","xstyle"],i,j,k=j||d("react");function a(a){var b=a.children,d=a.xstyle;a=babelHelpers.objectWithoutPropertiesLoose(a,h);return k.jsxs("svg",babelHelpers["extends"]({"aria-hidden":!0,className:(i||(i=c("stylex")))(d),height:"12px",viewBox:"0 0 21 12",width:"21px"},a,{children:[a.title!=null&&k.jsx("title",{children:a.title}),b!=null&&k.jsx("defs",{children:b}),k.jsx("path",{d:"M20.685.12c-2.229.424-4.278 1.914-6.181 3.403L5.4 10.94c-2.026 2.291-5.434.62-5.4-2.648V.12h20.684z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;g["default"]=a}),98);
__d("FDSCalloutInset.react",["BaseContextualLayerContextSizeContext","BaseContextualLayerLayerAdjustmentContext","BaseContextualLayerOrientationContext","BaseRow.react","BaseView.react","CometHideLayerOnEscape.react","FDSCalloutInsetArrow.svg.react","FocusRegionStrictMode.react","Locale","focusScopeQueries","react","react-compiler-runtime","useOnOutsideClick"],(function(a,b,c,d,e,f,g){"use strict";var h=["children","disableAutoFocus","id","onClose","onOutsideClick","type","xstyle"],i,j=i||(i=d("react")),k=i.useContext,l={arrow:{position:"x10l6tqk",$$css:!0},container:{display:"x78zum5",$$css:!0},content:{backgroundColor:"x1h0vfkc",borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",boxShadow:"xofhs1l",paddingTop:"xyamay9",paddingBottom:"x1l90r2v",paddingInlineStart:"x1g0dm76",paddingInlineEnd:"xpdmqnj",paddingLeft:null,paddingRight:null,$$css:!0}},m={accent:{backgroundColor:"xdk9wry",$$css:!0},"default":{backgroundColor:"x9bbmet",$$css:!0}},n={above:{marginBottom:"x1yztbdb",$$css:!0},below:{marginTop:"xw7yly9",$$css:!0},end:{marginInlineStart:"xyqm7xq",$$css:!0}},o={above:{bottom:"x1wa3icf",$$css:!0},below:{top:"x1jzctok",transform:"x1oihik5",$$css:!0},end:{$$css:!0}},p={above:{bottom:"x1wa3icf",$$css:!0},below:{top:"x1jzctok",transform:"x1oihik5",$$css:!0},end:{$$css:!0}};function a(a){var b,e=d("react-compiler-runtime").c(38),f,g,i,o,p,r,t,u;e[0]!==a?(g=a.children,r=a.disableAutoFocus,i=a.id,o=a.onClose,p=a.onOutsideClick,t=a.type,u=a.xstyle,f=babelHelpers.objectWithoutPropertiesLoose(a,h),e[0]=a,e[1]=f,e[2]=g,e[3]=i,e[4]=o,e[5]=p,e[6]=r,e[7]=t,e[8]=u):(f=e[1],g=e[2],i=e[3],o=e[4],p=e[5],r=e[6],t=e[7],u=e[8]);a=r===void 0?!1:r;r=t===void 0?"default":t;t=k(c("BaseContextualLayerOrientationContext"));var v=t.align;t=t.position;v=v==="stretch"?"start":v;t=t==="start"?"above":t==="end"?"below":t;var w=k(c("BaseContextualLayerContextSizeContext"));b=(b=k(c("BaseContextualLayerLayerAdjustmentContext")))!=null?b:0;w=(w=w==null?void 0:w.width)!=null?w:0;var x;e[9]!==v||e[10]!==b||e[11]!==t||e[12]!==w?(x=s(v,t,w,b),e[9]=v,e[10]=b,e[11]=t,e[12]=w,e[13]=x):x=e[13];v=x;b=v[0];w=v[1];x=c("useOnOutsideClick")(p);v=i!=null?i:void 0;p=a?void 0:d("focusScopeQueries").tabbableScopeQuery;i=m[r];a=n[t];var y;e[14]!==i||e[15]!==a||e[16]!==u?(y=[l.content,i,a,u],e[14]=i,e[15]=a,e[16]=u,e[17]=y):y=e[17];e[18]!==g||e[19]!==x||e[20]!==y?(i=j.jsx(c("BaseRow.react"),{ref:x,xstyle:y,children:g}),e[18]=g,e[19]=x,e[20]=y,e[21]=i):i=e[21];e[22]!==w||e[23]!==t||e[24]!==r?(a=j.jsx(q,{arrowStyles:w,position:t,type:r}),e[22]=w,e[23]=t,e[24]=r,e[25]=a):a=e[25];e[26]!==o||e[27]!==i||e[28]!==a?(u=j.jsxs(c("CometHideLayerOnEscape.react"),{onHide:o,children:[i,a]}),e[26]=o,e[27]=i,e[28]=a,e[29]=u):u=e[29];e[30]!==u||e[31]!==p?(g=j.jsx(d("FocusRegionStrictMode.react").FocusRegion,{autoFocusQuery:p,children:u}),e[30]=u,e[31]=p,e[32]=g):g=e[32];e[33]!==f||e[34]!==b||e[35]!==g||e[36]!==v?(x=j.jsx(c("BaseView.react"),babelHelpers["extends"]({},f,{id:v,role:"dialog",style:b,xstyle:l.container,children:g})),e[33]=f,e[34]=b,e[35]=g,e[36]=v,e[37]=x):x=e[37];return x}function q(a){var b=d("react-compiler-runtime").c(7),e=a.arrowStyles,f=a.position;a=a.type;var g=a==="default"?"var(--popover-background)":"var(--callout-background-color-accent, var(--accent))",h=o[f];a=a==="accent"&&p[f];b[0]!==h||b[1]!==a?(f=[l.arrow,h,a],b[0]=h,b[1]=a,b[2]=f):f=b[2];b[3]!==e||b[4]!==g||b[5]!==f?(h=j.jsx(c("FDSCalloutInsetArrow.svg.react"),{fill:g,style:e,xstyle:f}),b[3]=e,b[4]=g,b[5]=f,b[6]=h):h=b[6];return h}var r=c("Locale").isRTL();function s(a,b,c,d){var e=Math.max(c/2-8,16)+Math.abs(d),f=c/2-8<16;c=24-c/2;if(b==="above")if(a==="start"){var g;b=r?"right":"left";return[f?{transform:"translateX("+(r?c:-c)+"px)"}:void 0,(g={},g[b]="min(calc(100% - 32px), "+e+"px)",g)]}else if(a==="end"){b=r?"left":"right";return[f?{transform:"translateX("+(r?-c:c)+"px)"}:void 0,(g={},g[b]="min(calc(100% - 32px), "+e+"px)",g)]}else{var h;b=r?"left":"right";g=(r?-d:d)-8;return[void 0,(h={},h[b]="calc(50% + "+g+"px)",h)]}else if(a==="start"){b=r?"right":"left";return[f?{transform:"translateX("+(r?c:-c)+"px)"}:void 0,(g={},g[b]="min(calc(100% - 32px), "+e+"px)",g)]}else if(a==="end"){h=r?"left":"right";return[f?{transform:"translateX("+(r?-c:c)+"px)"}:void 0,(b={},b[h]="min(calc(100% - 32px), "+e+"px)",b)]}else{g=r?"left":"right";a=(r?-d:d)-8;return[void 0,(f={},f[g]="calc(50% + "+a+"px)",f)]}}g["default"]=a}),98);
__d("FDSCallout.react",["fbt","ix","BaseContextualLayerOrientationContext","BasePopoverReflowSheetContext","BaseRow.react","BaseRowItem.react","BaseView.react","CometColumn.react","CometColumnItem.react","CometErrorBoundary.react","CometHideLayerOnEscape.react","FDSCalloutEdge.react","FDSCalloutInset.react","FDSIcon.react","FDSTextPairing.react","FocusRegionStrictMode.react","fbicon","focusScopeQueries","react","react-compiler-runtime","unrecoverableViolation","useOnOutsideClick","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react"));b=j;var l=b.useContext;b.useMemo;var m={container:{display:"x78zum5",$$css:!0},content:{backgroundColor:"x1h0vfkc",borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",boxShadow:"xofhs1l",paddingTop:"xyamay9",paddingBottom:"x1l90r2v",paddingInlineStart:"x1g0dm76",paddingInlineEnd:"xpdmqnj",paddingLeft:null,paddingRight:null,$$css:!0},crossoutButton:{marginInlineEnd:"x1lxpwgx",marginTop:"x9otpla",$$css:!0},fitContent:{width:"xeq5yr9",$$css:!0},item:{paddingTop:"x1yrsyyn",paddingBottom:"x10b6aqq",paddingInlineStart:"x25sj25",paddingInlineEnd:"x1icxu4v",paddingLeft:null,paddingRight:null,$$css:!0}},n={accent:{backgroundColor:"xdk9wry",$$css:!0},"default":{backgroundColor:"x9bbmet",$$css:!0}},o={above:{marginBottom:"x12nagc",$$css:!0},below:{marginTop:"x1gslohp",$$css:!0},end:{marginInlineStart:"xdwrcjd",$$css:!0},start:{$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(66),e=a.arrowStyle,f=a.calloutID,g=a.content,j=a.contentID,q=a.disableAutoFocus,r=a.onClose,s=a.onHide,t=a.onOutsideClick,u=a.onShow,v=a.titleID,w=a.type,x=a.xstyle,y=a.addOn,z=a["aria-label"],A=a.hasCloseButton;a=a.title;e=e===void 0?"none":e;q=q===void 0?!1:q;w=w===void 0?"default":w;A=A===void 0?!0:A;var B=l(c("BaseContextualLayerOrientationContext"));B=B.position;var C=c("useOnOutsideClick")(t),D=l(c("BasePopoverReflowSheetContext"));D=D.isReflowSheet;var E;b[0]!==s||b[1]!==u?(E={onHidden:s,onVisible:u},b[0]=s,b[1]=u,b[2]=E):E=b[2];s=c("useVisibilityObserver")(E);u=w==="default"?"primary":"white";if(B==="end"&&(e==="inset"||e==="edge"))throw c("unrecoverableViolation")('"end" position with arrow is not supported yet',"comet_ui");b[3]!==z||b[4]!==j||b[5]!==a||b[6]!==v?(E=a!=null?{"aria-describedby":j,"aria-labelledby":v}:{"aria-describedby":j,"aria-label":z},b[3]=z,b[4]=j,b[5]=a,b[6]=v,b[7]=E):E=b[7];z=E;E=z;b[8]!==u||b[9]!==g||b[10]!==j||b[11]!==a||b[12]!==v?(z=k.jsx(c("FDSTextPairing.react"),{body:g,bodyColor:u,bodyId:j,headline:a,headlineColor:u,headlineId:v,isSemanticHeading:!0,level:3}),b[8]=u,b[9]=g,b[10]=j,b[11]=a,b[12]=v,b[13]=z):z=b[13];b[14]!==z||b[15]!==s?(u=k.jsx(c("BaseRowItem.react"),{expanding:!0,ref:s,verticalAlign:"center",xstyle:m.item,children:z}),b[14]=z,b[15]=s,b[16]=u):u=b[16];b[17]!==A||b[18]!==r||b[19]!==w?(g=A&&k.jsx(c("BaseRowItem.react"),{xstyle:[m.crossoutButton,m.item],children:k.jsx(c("FDSIcon.react"),{"aria-label":h._(/*BTDS*/"Close"),color:w==="default"?"secondary":"white",focusable:!0,icon:d("fbicon")._(i("478232"),16),onPress:r,size:16})}),b[17]=A,b[18]=r,b[19]=w,b[20]=g):g=b[20];b[21]!==g||b[22]!==u?(j=k.jsx(c("CometColumnItem.react"),{children:k.jsxs(c("BaseRow.react"),{children:[u,g]})}),b[21]=g,b[22]=u,b[23]=j):j=b[23];b[24]!==y?(a=y!=null&&k.jsx(c("CometColumnItem.react"),{paddingTop:12,children:k.jsx(c("BaseRow.react"),{children:k.jsx(c("BaseRowItem.react"),{expanding:!0,verticalAlign:"center",xstyle:m.item,children:y})})}),b[24]=y,b[25]=a):a=b[25];b[26]!==j||b[27]!==a?(v=k.jsxs(c("CometColumn.react"),{children:[j,a]}),b[26]=j,b[27]=a,b[28]=v):v=b[28];z=v;if(!D&&e==="inset"){b[29]!==E||b[30]!==f||b[31]!==z||b[32]!==q||b[33]!==r||b[34]!==t||b[35]!==w||b[36]!==x?(s=k.jsx(c("FDSCalloutInset.react"),babelHelpers["extends"]({},E,{disableAutoFocus:q,id:f,onClose:r,onOutsideClick:t,type:w,xstyle:x,children:z})),b[29]=E,b[30]=f,b[31]=z,b[32]=q,b[33]=r,b[34]=t,b[35]=w,b[36]=x,b[37]=s):s=b[37];return s}if(!D&&e==="edge"){b[38]!==E||b[39]!==f||b[40]!==z||b[41]!==q||b[42]!==r||b[43]!==t||b[44]!==w||b[45]!==x?(A=k.jsx(c("FDSCalloutEdge.react"),babelHelpers["extends"]({},E,{disableAutoFocus:q,id:f,onClose:r,onOutsideClick:t,type:w,xstyle:x,children:z})),b[38]=E,b[39]=f,b[40]=z,b[41]=q,b[42]=r,b[43]=t,b[44]=w,b[45]=x,b[46]=A):A=b[46];return A}g=f!=null?f:void 0;u=q?void 0:d("focusScopeQueries").tabbableScopeQuery;y=n[w];j=e==="none"&&o[B];a=D&&m.fitContent;b[47]!==y||b[48]!==j||b[49]!==a||b[50]!==x?(v=[m.content,y,j,x,a],b[47]=y,b[48]=j,b[49]=a,b[50]=x,b[51]=v):v=b[51];b[52]!==z||b[53]!==C||b[54]!==v?(s=k.jsx(c("BaseRow.react"),{ref:C,xstyle:v,children:z}),b[52]=z,b[53]=C,b[54]=v,b[55]=s):s=b[55];b[56]!==r||b[57]!==s?(t=k.jsx(c("CometHideLayerOnEscape.react"),{onHide:r,children:s}),b[56]=r,b[57]=s,b[58]=t):t=b[58];b[59]!==u||b[60]!==t?(A=k.jsx(d("FocusRegionStrictMode.react").FocusRegion,{autoFocusQuery:u,children:t}),b[59]=u,b[60]=t,b[61]=A):A=b[61];b[62]!==E||b[63]!==g||b[64]!==A?(f=k.jsx(c("CometErrorBoundary.react"),{fallback:p,children:k.jsx(c("BaseView.react"),babelHelpers["extends"]({},E,{id:g,role:"dialog",xstyle:m.container,children:A}))}),b[62]=E,b[63]=g,b[64]=A,b[65]=f):f=b[65];return f}function p(){return k.jsx("div",{})}p.displayName=p.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("FDSCalloutImpl.react",["BaseCalloutImpl.react","FDSCallout.react","FDSCalloutContext","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["disableOutsideClick","onClose"],i,j=i||(i=d("react")),k=i.useContext;function a(a){var b=d("react-compiler-runtime").c(23),e=a.calloutID,f=a.calloutProps,g=a.contentID,i=a.titleID,l=k(c("FDSCalloutContext"));if(l==null||f==null)return null;var m,n,o;b[0]!==f?(n=f.disableOutsideClick,o=f.onClose,m=babelHelpers.objectWithoutPropertiesLoose(f,h),b[0]=f,b[1]=m,b[2]=n,b[3]=o):(m=b[1],n=b[2],o=b[3]);b[4]!==l||b[5]!==e||b[6]!==o?(f=function(){l.removeCallout(e),o==null||o()},b[4]=l,b[5]=e,b[6]=o,b[7]=f):f=b[7];var p;b[8]!==l||b[9]!==e||b[10]!==n||b[11]!==o?(p=function(){n!==!0&&(l.removeCallout(e),o==null||o())},b[8]=l,b[9]=e,b[10]=n,b[11]=o,b[12]=p):p=b[12];var q;b[13]!==e||b[14]!==m||b[15]!==g||b[16]!==f||b[17]!==p||b[18]!==i?(q=j.jsx(c("FDSCallout.react"),babelHelpers["extends"]({},m,{calloutID:e,contentID:g,onClose:f,onOutsideClick:p,titleID:i})),b[13]=e,b[14]=m,b[15]=g,b[16]=f,b[17]=p,b[18]=i,b[19]=q):q=b[19];b[20]!==a||b[21]!==q?(m=j.jsx(c("BaseCalloutImpl.react"),babelHelpers["extends"]({},a,{children:q})),b[20]=a,b[21]=q,b[22]=m):m=b[22];return m}g["default"]=a}),98);
__d("addToMap",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){if(a.get(b)===c)return a;a=new Map(a);a.set(b,c);return a}f["default"]=a}),66);
__d("removeFromMap",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){if(a.has(b)){var c=new Map(a);c["delete"](b);return c}return a}f["default"]=a}),66);
__d("GlobalVideoPortsManager",["addToMap","emptyFunction","gkx","removeFromMap"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var d=a.get(b);d!=null&&(d.portablePlaceContainer=null);return c("removeFromMap")(a,b)}a=c("emptyFunction");function i(a){return a.unlinkedAtTimestampMs!==null}var j=1e4;b=function(){function a(a){var b=this;this.$1=function(c){var d=function(a){return c(b.$2(a))};a(d)}}var b=a.prototype;b.addOrUpdatePlace=function(a){var b=this,d=a.coreVideoPlayerMetaData,e=a.fullscreenController,f=a.implementations,g=a.injectCoreVideoStatesRef,j=a.isFullscreen,k=a.portablePlaceContainer,l=a.portablePlaceID,m=a.portablePlaceMetaData,n=a.portableVideoID,o=a.renderComponents,p=a.renderPlaceholder,q=a.trackingDataEncrypted,r=a.trackingNodes,s=a.viewportMarginsForViewability;this.$1(function(a){var t,u=b.getPortableVideoState(a,n),v=(t=a.places.get(l))!=null?t:null;t=v!=null&&!i(v)?v.sequenceNumber:a.placesSequenceNumberNext;var w=t===a.placesSequenceNumberNext?a.placesSequenceNumberNext+1:a.placesSequenceNumberNext,x=m||{},y=a.places;if(n!=null){var z=b.getPlacesBorrowingThisVideo(y,n);z.forEach(function(a){i(a)&&a.portablePlaceID!==(v==null?void 0:v.portablePlaceID)&&(y=h(y,a.portablePlaceID))})}y=c("addToMap")(y,l,babelHelpers["extends"]({},v,{coreVideoPlayerMetaData:d,currentVideoID:n,fullscreenController:e,implementations:f,injectCoreVideoStatesRef:g,isFullscreen:j,portablePlaceContainer:k,portablePlaceID:l,portablePlaceMetaData:x,renderComponents:o,renderPlaceholder:p!=null?p:null,sequenceNumber:t,trackingDataEncrypted:q,trackingNodes:r,unlinkedAtTimestampMs:null,viewportMarginsForViewability:s}));z=v!==null&&n===null?v.currentVideoID:null;x=a.videos;if(z!==null){t=b.getPlacesBorrowingThisVideo(y,z);t=0===t.length;t&&(x=c("removeFromMap")(a.videos,z))}if(n!==null){t=b.updatePreviousPlaceMetaDataInfoForVideo({existingVideoState:u,places:a.places,setPreferredPlaceForVideo:!1,updatedPlaces:y,videoID:n});z=t.nextPreviousPlaceMetaData;x=c("addToMap")(x,n,u?babelHelpers["extends"]({},u,{portableVideoID:n,previousPlaceMetaData:z}):{portableVideoID:n,preferredPlaceID:null,previousPlaceMetaData:z})}return y===a.places&&w===a.placesSequenceNumberNext&&x===a.videos?a:babelHelpers["extends"]({},a,{places:y,placesSequenceNumberNext:w,videos:x})})};b.removePlace=function(a){var b=this,d=a.portablePlaceID,e=Date.now();this.$1(function(a){var f;f=(f=a.places.get(d))!=null?f:null;var g=f!==null?f.currentVideoID:null;if(f===null)return a;var i=a.places,j=g!==null?b.skipUnlinkedPlaces(b.getPlacesBorrowingThisVideo(i,g)).filter(function(a){return a.portablePlaceID!==d}):[];g!==null&&j.length===0?i=c("addToMap")(i,d,babelHelpers["extends"]({},f,{unlinkedAtTimestampMs:e})):i=h(i,d);j=a.videos;if(g!==null){f=b.getPlacesBorrowingThisVideo(i,g);f=0===f.length;if(f)j=c("removeFromMap")(j,g);else{f=b.getPortableVideoState(a,g);var k=b.updatePreviousPlaceMetaDataInfoForVideo({existingVideoState:f,places:a.places,setPreferredPlaceForVideo:!1,updatedPlaces:i,videoID:g}),l=k.nextPreviousPlaceMetaData;k=k.shouldUpdatePreviousPlaceMetaDataForVideo;f!=null&&k&&(j=c("addToMap")(j,g,babelHelpers["extends"]({},f,{portableVideoID:g,previousPlaceMetaData:l})))}}return i===a.places&&j===a.videos?a:babelHelpers["extends"]({},a,{places:i,videos:j})})};b.setPreferredPlaceForVideo=function(a){var b=this,d=a.portablePlaceID,e=a.portableVideoID;this.$1(function(a){var f=b.getPortableVideoState(a,e),g=d!=null?a.places.get(d):null,h=b.updatePreviousPlaceMetaDataInfoForVideo({existingPlaceStateForSetPreferredPlaceForVideo:g,existingVideoState:f,places:a.places,preferredPlaceID:d,setPreferredPlaceForVideo:!0,updatedPlaces:a.places,videoID:e});h=h.nextPreviousPlaceMetaData;f=f!=null?c("addToMap")(a.videos,e,babelHelpers["extends"]({},f,{preferredPlaceID:g!=null&&d!=null?d:null,previousPlaceMetaData:h})):a.videos;return f===a.videos?a:babelHelpers["extends"]({},a,{videos:f})})};b.getPlacesBorrowingThisVideo=function(a,b){var c=[];a.forEach(function(a){a.currentVideoID===b&&c.push(a)});return c};b.skipUnlinkedPlaces=function(a){return a.filter(function(a){return!i(a)})};b.selectCurrentPlaceFromThesePlaces=function(a,b){var c;a=a.slice().sort(function(a,b){return a.sequenceNumber-b.sequenceNumber});c=(c=a.find(function(a){return a.portablePlaceID===b}))!=null?c:null;a=a.length>0?a[a.length-1]:null;return(c=c!=null?c:a)!=null?c:null};b.getCurrentPlaceStateForVideo=function(a,b){var c=this.getPortableVideoState(a,b);if(c!=null&&b!=null){a=this.selectCurrentPlaceFromThesePlaces(this.skipUnlinkedPlaces(this.getPlacesBorrowingThisVideo(a.places,b)),c.preferredPlaceID);return a!=null?a:null}else return null};b.getPortableVideoState=function(a,b){if(b!=null){a=a.videos.get(b);return a!=null?a:null}return null};b.updatePreviousPlaceMetaDataInfoForVideo=function(a){var b=this,c=a.existingPlaceStateForSetPreferredPlaceForVideo,d=a.existingVideoState,e=a.places,f=a.preferredPlaceID,g=a.setPreferredPlaceForVideo,h=a.updatedPlaces,i=a.videoID;a=function(a,c){return b.selectCurrentPlaceFromThesePlaces(b.skipUnlinkedPlaces(b.getPlacesBorrowingThisVideo(a,i)),c!=null?c:null)};var j=a(e,d==null?void 0:d.preferredPlaceID);g?g=c!=null?a(e,f):null:g=a(h,d==null?void 0:d.preferredPlaceID);e=j!=null&&(j==null?void 0:j.portablePlaceID)!==((c=g)==null?void 0:c.portablePlaceID);return{nextPreviousPlaceMetaData:e&&j!=null?j.portablePlaceMetaData:(f=d==null?void 0:d.previousPlaceMetaData)!=null?f:null,shouldUpdatePreviousPlaceMetaDataForVideo:e}};b.collectGarbage=function(){this.$1(function(a){return a})};b.$2=function(a){var b=Date.now(),d=new Set(),e=a.places;a.places.forEach(function(a){a.unlinkedAtTimestampMs!==null&&b-a.unlinkedAtTimestampMs>=j?e=h(e,a.portablePlaceID):a.currentVideoID!==null&&d.add(a.currentVideoID)});var f=a.videos;a.videos.forEach(function(a){d.has(a.portableVideoID)||(f=c("removeFromMap")(f,a.portableVideoID))});return e===a.places&&f===a.videos?a:babelHelpers["extends"]({},a,{places:e,videos:f})};return a}();g.isUnlinkedGlobalVideoPortsPlace=i;g.UNLINKED_PLACE_TIMEOUT_MS=j;g.GlobalVideoPortsManager=b}),98);
__d("GlobalVideoPortsPortalerErrorBoundary.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.state={errorRaw:null},b.suppressReactDefaultErrorLoggingIUnderstandThisWillMakeBugsHarderToFindAndFix=!0,babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);b.getDerivedStateFromError=function(a){return{errorRaw:a}};var c=b.prototype;c.componentDidCatch=function(a,b){b=this.props.onError;b!=null&&b(a)};c.render=function(){var a=this.props,b=a.children;a=a.fallback;var c=this.state.errorRaw;return c!=null?typeof a==="function"?a(b):a:b};return b}(a.PureComponent);g["default"]=b}),98);
__d("everySet",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){var d=a.entries(),e=d.next();while(!e.done){var f=e.value;if(!b.call(c,f[1],f[0],a))return!1;e=d.next()}return!0}f["default"]=a}),66);
__d("equalsSet",["everySet"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return a.size!==b.size?!1:c("everySet")(a,function(a){return b.has(a)})}g["default"]=a}),98);
__d("GlobalVideoPortsPortaler.react",["CoreVideoPlayerFitParentContainer.react","GlobalVideoPortsPortalerErrorBoundary.react","GlobalVideoPortsRenderers.react","ReactDOM","equalsSet","react","react-compiler-runtime","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.useRef,m=b.useState;function n(a,b,e,f,g){var h=d("react-compiler-runtime").c(6),i=l(null),j;h[0]!==b||h[1]!==e||h[2]!==f||h[3]!==g||h[4]!==a?(j=function(){var d,h=i.current;d=new Set((d=a.map(o))!=null?d:[]);if(h==null||!c("equalsSet")(h,d)){i.current=d;h=b.current;d=e.current;h!=null&&f(h);d!=null&&g(d)}},h[0]=b,h[1]=e,h[2]=f,h[3]=g,h[4]=a,h[5]=j):j=h[5];k(j,void 0)}function o(a){return a.portablePlaceID}function a(a){var b=a.globalVideoPortsManager,e=a.globalVideoPortsState,f=a.thisVideoID;a=m(function(){return d("CoreVideoPlayerFitParentContainer.react").createFitParentContainerDiv({debugRole:null})});var g=a[0],i=l(null),k=(h||(h=c("useUnsafeRef_DEPRECATED")))(null),o=(a=e.videos.get(f))!=null?a:null,p=b.getPlacesBorrowingThisVideo(e.places,f);a=p.length<=0;e=a?null:b.selectCurrentPlaceFromThesePlaces(p,o?o.preferredPlaceID:null);var q=a?null:b.selectCurrentPlaceFromThesePlaces(b.skipUnlinkedPlaces(p),o?o.preferredPlaceID:null);b=function(a){k.current=a,p.forEach(function(b){b=b.injectCoreVideoStatesRef.current;b&&b(i.current,a)})};var r=function(){return null},s=function(a){i.current=a,p.forEach(function(a){a=a.injectCoreVideoStatesRef.current;a&&a(i.current,k.current)})};n(p,k,i,b,s);return a?null:j.jsxs(j.Fragment,{children:[d("ReactDOM").createPortal(e?j.jsx(c("GlobalVideoPortsPortalerErrorBoundary.react"),{description:"GlobalVideoPortsPortaler",fallback:r,onError:s,children:j.jsx(d("GlobalVideoPortsRenderers.react").GlobalVideoPortsPlayerRenderer,{coreVideoPlayerMetaData:e.coreVideoPlayerMetaData,currentPlaceID:e.portablePlaceID,currentVideoID:f,fullscreenController:e.fullscreenController,implementations:e.implementations,isFullscreen:e.isFullscreen,onCoreVideoStatesChanged:b,previousPlaceMetaData:(a=o==null?void 0:o.previousPlaceMetaData)!=null?a:null,trackingDataEncrypted:e.trackingDataEncrypted,trackingNodes:e.trackingNodes,viewportMarginsForViewability:e.viewportMarginsForViewability})}):null,g),p.map(function(a){var b;return d("ReactDOM").createPortal(a.portablePlaceID===(q==null?void 0:q.portablePlaceID)?j.jsx(d("CoreVideoPlayerFitParentContainer.react").CoreVideoPlayerFitParentDOMContainer,{debugRole:null,domElement:g}):j.jsx(d("GlobalVideoPortsRenderers.react").GlobalVideoPortsPlaceholderRenderer,{currentPlaceID:(b=q==null?void 0:q.portablePlaceID)!=null?b:null,currentVideoID:f,previousPlaceMetaData:(b=o==null?void 0:o.previousPlaceMetaData)!=null?b:null,renderPlaceholder:a.renderPlaceholder,thisPlaceID:a.portablePlaceID,videoPixelsAspectRatio:(b=a.coreVideoPlayerMetaData.videoPixelsAspectRatio)!=null?b:null}),a.portablePlaceContainer)})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("GlobalVideoPortsImpl.react",["CometErrorBoundary.react","GlobalVideoPortsContexts","GlobalVideoPortsManager","GlobalVideoPortsPortaler.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useEffect;function a(a){var b=d("react-compiler-runtime").c(3),e=a.setGlobalVideoPortsManager,f;b[0]!==e?(a=function(){var a=k;e(a)},f=[e],b[0]=e,b[1]=a,b[2]=f):(a=b[1],f=b[2]);j(a,f);var g=[],h=d("GlobalVideoPortsContexts").useGlobalVideoPortsManager(),l=d("GlobalVideoPortsContexts").useGlobalVideoPortsState();h&&l&&l.videos.forEach(function(a,b){g.push(i.jsx(c("CometErrorBoundary.react"),{children:i.jsx(c("GlobalVideoPortsPortaler.react"),{globalVideoPortsManager:h,globalVideoPortsState:l,thisVideoID:b})},b))});return i.jsx(i.Fragment,{children:g})}function k(a){return new(d("GlobalVideoPortsManager").GlobalVideoPortsManager)(a)}g["default"]=a}),98);
__d("LSBeginHandlingSyncForSyncGroup",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(1).fetch([[[a[0]]]]).next().then(function(a,d){var e=a.done;a=a.value;return e?c[0]=void 0:(d=a.item,c[9]=new b.Map(),c[9].set("group_id",d.groupId),c[9].set("current_cursor",d.currentCursor),c[9].set("sync_status",d.syncStatus),c[9].set("sync_params",d.syncParams),c[9].set("send_sync_params",d.sendSyncParams),c[9].set("min_time_to_sync_timestamp_ms",d.minTimeToSyncTimestampMs),c[9].set("can_ignore_timestamp",d.canIgnoreTimestamp),c[9].set("sync_channel",d.syncChannel),c[9].set("last_sync_request_timestamp_ms",d.lastSyncRequestTimestampMs),c[0]=c[9])})},function(d){return c[0]?c[2]=!1:c[2]=!0,c[2]?b.resolve((d=[a[0],void 0,b.i64.cast([0,4]),void 0,!1],c[3]=d[0],c[4]=d[1],c[5]=d[2],c[6]=d[3],c[7]=d[4],d)):b.sequence([function(a){return c[9]=c[0].get("group_id"),b.filter(b.db.table(3).fetch(),function(a){return b.i64.neq(a.epochId,void 0)&&b.i64.eq(a.syncDatabaseId,c[9])}).next().then(function(a,b){b=a.done;a=a.value;return b?c[10]=!1:(a.item,c[10]=!0)})},function(d){return c[10]?b.resolve((c[17]=c[0].get("group_id"),d=[c[17],void 0,b.i64.cast([0,4]),void 0,!1],c[12]=d[0],c[13]=d[1],c[14]=d[2],c[15]=d[3],c[16]=d[4])):b.sequence([function(d){return c[17]=b.i64.of_float(Date.now()),c[18]=c[0].get("min_time_to_sync_timestamp_ms"),c[19]=c[0].get("last_sync_request_timestamp_ms"),c[20]=c[0].get("can_ignore_timestamp"),c[20]&&a[1]||b.i64.ge(c[17],c[18])?b.sequence([function(d){return a[1]?b.resolve(c[28]=b.i64.cast([0,0])):b.sequence([function(a){return c[29]=c[0].get("group_id"),b.db.table(3).fetch([[["",c[29]]]]).next().then(function(a,d){var e=a.done;a=a.value;return e?c[30]=b.i64.cast([0,0]):(d=a.item,c[30]=d.failureCount)})},function(a){return c[32]=b.i64.mul(b.i64.sub(b.i64.lsl_(b.i64.cast([0,1]),b.i64.to_int32(b.i64.lt(b.i64.cast([0,15]),c[30])?b.i64.cast([0,15]):c[30])),b.i64.cast([0,1])),b.i64.cast([0,500])),c[33]=b.i64.sub(b.i64.add(c[19]==null?b.i64.cast([0,0]):c[19],b.i64.lt(c[32],b.i64.cast([0,3e4]))?c[32]:b.i64.cast([0,3e4])),c[17]),c[28]=b.i64.gt(c[33],b.i64.cast([0,0]))?c[33]:b.i64.cast([0,0])}])},function(a){return c[21]=c[28]}]):b.resolve(c[21]=b.i64.sub(c[18],c[17]))},function(a){return c[22]=c[0].get("group_id"),b.i64.gt(c[21],b.i64.cast([0,0]))?b.sequence([function(a){return c[28]=b.i64.of_float(Date.now()),b.forEach(b.filter(b.db.table(3).fetch(),function(a){return b.i64.eq(a.syncDatabaseId,c[22])}),function(a){var b=a.update;a.item;return b({lastDelayedRequestTimestampMs:c[28]})})},function(a){return a=[c[22],c[21],b.i64.cast([0,3]),void 0,!1],c[23]=a[0],c[24]=a[1],c[25]=a[2],c[26]=a[3],c[27]=a[4],a}]):b.sequence([function(a){return c[28]=b.i64.of_float(Date.now()),b.forEach(b.db.table(1).fetch([[[c[22]]]]),function(a){var b=a.update;a.item;return b({lastSyncRequestTimestampMs:c[28]})})},function(a){return c[29]=b.i64.of_float(Date.now()),b.forEach(b.filter(b.db.table(3).fetch(),function(a){return b.i64.eq(a.syncDatabaseId,c[22])}),function(a){var b=a.update;a.item;return b({lastSyncRequestTimestampMs:c[29]})})},function(a){return c[30]=c[0].get("group_id"),c[31]=b.i64.of_float(Date.now()),c[32]=b.i64.random(),c[45]=b.i64.and_(b.i64.or_(b.i64.lsl_(c[31],b.i64.to_int32(b.i64.cast([0,22]))),b.i64.and_(c[32],b.i64.cast([0,4194303]))),b.i64.cast([2147483647,4294967295])),b.db.table(3).fetch([[["",c[30]]]]).next().then(function(a,d){d=a.done;a=a.value;return d?b.db.table(3).add({syncDatabaseId:c[30],taskQueueName:"",failureCount:b.i64.cast([0,0]),lastSentTimestampMs:b.i64.cast([0,0]),lastSyncRequestTimestampMs:b.i64.cast([0,0]),epochId:c[45]}):(a.item,b.forEach(b.db.table(3).fetch([[["",c[30]]]]),function(a){var b=a.update;a.item;return b({epochId:c[45]})}))})},function(a){return c[34]=c[0].get("group_id"),b.db.table(3).fetch([[["",c[34]]]]).next().then(function(a,d){var e=a.done;a=a.value;return e?c[35]=b.i64.cast([0,0]):(d=a.item,c[35]=d.failureCount)})},function(a){return c[37]=c[0].get("send_sync_params"),c[38]=c[0].get("sync_params"),c[39]=c[0].get("current_cursor"),c[40]=new b.Map(),c[40].set("database",c[34]),c[40].set("version",b.i64.cast([-1,4294967295])),c[40].set("epoch_id",c[45]),c[40].set("last_applied_cursor",c[39]),c[40].set("sync_params",c[37]?c[38]:void 0),c[40].set("failure_count",b.i64.gt(c[35],b.i64.cast([0,0]))?c[35]:void 0),c[41]=c[0].get("current_cursor"),void 0===c[41]?c[42]=b.i64.cast([0,1]):c[42]=b.i64.cast([0,2]),c[43]=new b.Map(),c[43].set("type",c[42]),c[43].set("request_payload",c[40]),c[44]=c[0].get("sync_channel"),a=[c[30],void 0,b.i64.cast([0,1]),c[43],b.i64.eq(c[44],b.i64.cast([0,2]))],c[23]=a[0],c[24]=a[1],c[25]=a[2],c[26]=a[3],c[27]=a[4]}])},function(a){return a=[c[23],c[24],c[25],c[26],c[27]],c[12]=a[0],c[13]=a[1],c[14]=a[2],c[15]=a[3],c[16]=a[4],a}])},function(a){return a=[c[12],c[13],c[14],c[15],c[16]],c[3]=a[0],c[4]=a[1],c[5]=a[2],c[6]=a[3],c[7]=a[4],a}])},function(a){return c[8]=new b.Map(),c[8].set("sync_group_id",c[3]),c[8].set("next_sync_ms",c[4]),c[8].set("work_item_type",c[5]),c[8].set("network_payload",c[6]),c[8].set("skip_realtime_gateway",c[7]),d[0]=c[8]}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreBeginHandlingSyncForSyncGroupStoredProcedure";a.__tables__=["sync_groups","network_requests"];e.exports=a}),null);
__d("LSBeginHandlingSync",["LSBeginHandlingSyncForSyncGroup"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.createArray(),c.forEach(c.db.table(1).fetch(),function(e){var f=e.item;return c.sequence([function(e){return c.storedProcedure(b("LSBeginHandlingSyncForSyncGroup"),f.groupId,a[0]).then(function(a){return a=a,d[1]=a[0],a})},function(a){return d[2]=(d[0].push(d[1]),d[0])}])})},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSCoreBeginHandlingSyncStoredProcedure";a.__tables__=["sync_groups"];e.exports=a}),null);
__d("LSBeginHandlingSyncForSyncGroupStoredProcedure",["LSBeginHandlingSyncForSyncGroup","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSBeginHandlingSyncForSyncGroup"),e.syncGroupId,e.ignoreSoftDelay);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSBeginHandlingSyncStoredProcedure",["LSBeginHandlingSync","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSBeginHandlingSync"),e.ignoreSoftDelay);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSPlatformDGWTransport",["DGWClient","DGWLoggingContext","DGWStream","DGWStreamGroupCallbacks","FBLogger","LSIntEnum","LSLogHistory","LSPlatformDGWHostnameOverride","LSPlatformRealtimeTransport","LSStreamGroupRef","MWPBumpEntityKey","MessengerWebRegion","MqttConfig","NetworkStatus","QuickPerformanceLogger","Random","gkx","promiseDone","qex","qpl","setTimeout","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("gkx")("3218"),k=c("gkx")("12101"),l=(b=c("qex")._("2084"))!=null?b:!1,m=(e=c("qex")._("2085"))!=null?e:!1,n=(f=c("qex")._("2088"))!=null?f:!1,o=(b=c("qex")._("2090"))!=null?b:!1,p=(e=c("qex")._("2092"))!=null?e:!1,q=c("qpl")._(701246226,"1285"),r=15,s=0,t=!1,u=new Map(),v=null,w=!1,x=!1,y=null;function z(a){a=1*Math.pow(2,a);a=Math.max(a,1);a=Math.min(a,64);return Math.ceil(a*(1e3+d("Random").random()*200))}function A(a,b,e,f){var g;if(w){var h;(h=d("LSStreamGroupRef").streamGroupRef.current)==null||h.streamGroupLoggingContext.logWarn(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"SkipReconnectAttempt","","deviceId:"+a);return}w=!0;h=z(s++);n&&s>r&&(s=0);var i="deviceId:"+a+", reconnectMs:"+h+", attempt:"+s+", isClosedLocally:"+String(x);(g=d("LSStreamGroupRef").streamGroupRef.current)==null||g.streamGroupLoggingContext.logWarn(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"ScheduleReconnect","",i);d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"scheduleReconnect");y=c("setTimeout")(function(){B(a,b,e,f),w=!1},h)}function B(a,b,e,f){var g=c("uuidv4")();d("LSStreamGroupRef").streamGroupRef.currentStreamGroupId=g;var h={authToken:e,authType:f,deviceId:a,keepAliveMs:15e3,loggingId:g,serviceId:"lightspeed",streamGroupAppHeaders:{},verboseLoggingEnabled:j};k&&(h.trafficTracing=g);d("MessengerWebRegion").regionNullable!=null&&(h.regionHint=d("MessengerWebRegion").regionNullable);var i={onStreamGroupError:function(b){if(d("LSStreamGroupRef").streamGroupRef.currentStreamGroupId!==g){var c;(c=d("LSStreamGroupRef").streamGroupRef.current)==null||c.streamGroupLoggingContext.logError(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"onStreamGroupError_StaleCallback","Ignored stale callback","deviceId:"+a+", callbackLoggingId:"+g);return}d("LSStreamGroupRef").streamGroupRef.status!=="Disconnected"&&(d("LSStreamGroupRef").streamGroupRef.status="Disconnected",d("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler&&d("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler("Disconnected","Stream Group Error"));(c=d("LSStreamGroupRef").streamGroupRef.current)==null||c.streamGroupLoggingContext.logError(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"onStreamGroupError",d("DGWStreamGroupCallbacks").DGWStreamGroupError.getName(b),"deviceId:"+a);d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,d("DGWStreamGroupCallbacks").DGWStreamGroupError.getName(b));d("DGWStreamGroupCallbacks").isRetryableError(b)?(d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamGroupError.isRetryableError"),A(a,"reconnect_on_streamgrouperror."+d("DGWStreamGroupCallbacks").DGWStreamGroupError.getName(b),e,f)):d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamGroupError.isNotRetryableError")},onStreamGroupMustDrain:function(b){if(d("LSStreamGroupRef").streamGroupRef.currentStreamGroupId!==g){var c;(c=d("LSStreamGroupRef").streamGroupRef.current)==null||c.streamGroupLoggingContext.logError(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"onStreamGroupMustDrain_StaleCallback","Ignored stale callback","deviceId:"+a+", callbackLoggingId:"+g);return}d("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed","LSPlatformDGWTransport.onStreamGroupMustDrain."+b);(c=d("LSStreamGroupRef").streamGroupRef.current)==null||c.streamGroupLoggingContext.logError(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"onStreamGroupMustDrain",b,"deviceId:"+a);A(a,"reconnect_on_streamgroupmustdrain",e,f)},onStreamGroupTransportClose:function(){if(d("LSStreamGroupRef").streamGroupRef.currentStreamGroupId!==g){var b;(b=d("LSStreamGroupRef").streamGroupRef.current)==null||b.streamGroupLoggingContext.logError(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"onStreamGroupTransportClose_StaleCallback","Ignored stale callback","deviceId:"+a+", callbackLoggingId:"+g);return}d("LSStreamGroupRef").streamGroupRef.status!=="Disconnected"&&(d("LSStreamGroupRef").streamGroupRef.status="Disconnected",d("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler&&d("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler("Disconnected","Stream Group Close"));(b=d("LSStreamGroupRef").streamGroupRef.current)==null||b.streamGroupLoggingContext.logError(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"onStreamGroupTransportClose","","deviceId:"+a);A(a,"onStreamGroupTransportClose",e,f)}};u.clear();d("LSStreamGroupRef").streamGroupRef.status="Connecting";i=c("DGWClient")().createStreamGroup(i,h);h="deviceId:"+a+", runtime_site_is_comet_fb_web:"+String(c("gkx")("2116"))+", endpoint:"+c("MqttConfig").endpoint+", reason:"+b;i.streamGroupLoggingContext.logWarn(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"CreatingStreamGroupTransport","",h);c("promiseDone")(i.initTransport(),function(c){if(d("LSStreamGroupRef").streamGroupRef.currentStreamGroupId!==g){(c=d("LSStreamGroupRef").streamGroupRef.current)==null||c.streamGroupLoggingContext.logError(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamGroupTransportOnOpen_StaleCallback","Ignored stale callback","deviceId:"+a+", callbackLoggingId:"+g);return}d("LSLogHistory").log("StreamGroupTransport Connected","debug");d("LSStreamGroupRef").streamGroupRef.status!=="Connected"&&(d("LSStreamGroupRef").streamGroupRef.status="Connected",d("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler&&d("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler("Connected"));t&&(d("LSStreamGroupRef").streamGroupRef.reconnectHandler&&d("LSStreamGroupRef").streamGroupRef.reconnectHandler(3));t=!0;(c=d("LSStreamGroupRef").streamGroupRef.current)==null||c.streamGroupLoggingContext.logWarn(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamGroupTransportOnOpen","","deviceId:"+a+", reason:"+b);(c=d("LSStreamGroupRef").streamGroupRef.current)==null||c.streamGroupLoggingContext.logWarn(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"BufferFlushed","",String(d("LSStreamGroupRef").streamGroupRef.publishBuffer.size));s=0;d("LSStreamGroupRef").streamGroupRef.publishBuffer.forEach(function(a,b,c){a.resolve(),d("LSStreamGroupRef").streamGroupRef.publishBuffer.delete(b)})},function(b){if(d("LSStreamGroupRef").streamGroupRef.currentStreamGroupId!==g){var c;(c=d("LSStreamGroupRef").streamGroupRef.current)==null||c.streamGroupLoggingContext.logError(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamGroupTransportOnError_StaleCallback","Ignored stale callback","deviceId:"+a+", callbackLoggingId:"+g);return}d("LSLogHistory").log("StreamGroupTransport onError","debug");d("LSStreamGroupRef").streamGroupRef.publishBuffer.clear();d("LSStreamGroupRef").streamGroupRef.status!=="Disconnected"&&(d("LSStreamGroupRef").streamGroupRef.status="Disconnected",d("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler&&d("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler("Disconnected",b));(c=d("LSStreamGroupRef").streamGroupRef.current)==null||c.streamGroupLoggingContext.logError(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamGroupTransportOnError",String(b),"deviceId:"+a);d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"WebSocketOnError");b!==d("DGWStream").StreamError.UNAUTHORIZED&&A(a,"reconnect_on_streamgrouptransportonerror."+String(b),e,f)});d("LSStreamGroupRef").streamGroupRef.current=i;return d("LSStreamGroupRef").streamGroupRef.current}async function C(a,b,e,f){e===void 0&&(e=!0);var g=d("LSStreamGroupRef").streamGroupRef.current;if(g==null)throw c("FBLogger")("ls_web_init").mustfixThrow("LS Stream Group not initialized");var h=new TextDecoder(),i={};d("LSPlatformDGWHostnameOverride").useHostNameOverride&&d("LSPlatformDGWHostnameOverride").hostNameOverride!=null&&(i["javascript-sandbox"]=d("LSPlatformDGWHostnameOverride").hostNameOverride);try{var k=c("uuidv4")();g=await g.establishStream({groupedStreamHeaders:i,loggingId:k,verboseLoggingEnabled:j},{onClose:function(){d("LSLogHistory").log("Stream closed","debug")},onDataReceived:function(a){var b=h.decode(a);b.length>0&&d("LSStreamGroupRef").streamGroupRef.subscribers.forEach(function(a){a(b)})},onError:function(a){d("LSLogHistory").log("Stream onError. Disconnected","debug")},onServerHasFinishedSendingData:function(a){d("LSLogHistory").log("Stream finished sending data","debug"),a.loggingContext().logEvent(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"onServerHasFinishedSendingData"),a.close()},onStreamMustDrain:function(a){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed","LSPlatformDGWTransport.onStreamMustDrain"),d("LSLogHistory").log("Stream must drain","debug"),a.loggingContext().logEvent(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"onStreamMustDrain"),a.close()}},b,e,f);d("LSLogHistory").log("Stream Connected","debug");return g}catch(b){d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"initStreamFailure."+a);d("LSLogHistory").log("Error Establishing Stream. Disconnected","debug");throw b}}var D="Disconnected";f=function(){return D};function a(a,b,c,d){v||(v=E(a,b,"init_single_transport_instance",c,d));return v}function E(a,b,e,f,g){var j=new TextEncoder();B(b,e,f,g);var k=c("NetworkStatus").onChange(function(a){a=a.online;m&&a&&(y!=null&&(window.clearTimeout(y),y=null,w=!1,s=0,A(b,"network_status_change",f,g)))});return{cleanup:function(){var a;x=!0;k.remove();(a=d("LSStreamGroupRef").streamGroupRef.current)==null||a.close();d("LSStreamGroupRef").streamGroupRef.reconnectHandler=null;d("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler=null;d("LSStreamGroupRef").streamGroupRef.publishBuffer.clear();d("LSStreamGroupRef").streamGroupRef.subscribers.clear()},logEvent:function(a){var b;(b=d("LSStreamGroupRef").streamGroupRef.current)==null||b.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,a)},onConnectionStatusChange:function(a){d("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler=a;return function(){d("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler=null}},onReconnect:function(a){d("LSStreamGroupRef").streamGroupRef.reconnectHandler=a;return function(){d("LSStreamGroupRef").streamGroupRef.reconnectHandler=null}},publish:async function(a,e,k){var m=Date.now()+(Math.round(d("Random").random()*1e4)+1e4);(i||(i=c("QuickPerformanceLogger"))).markerStart(q,m);i.markerAnnotate(q,{int:{database:k},string:{streamGroupId:d("LSStreamGroupRef").getTransportId()}},{instanceKey:m});var n=(h||(h=d("LSIntEnum"))).toNumber(e);try{d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"initStream."+(h||(h=d("LSIntEnum"))).toNumber(e));d("LSStreamGroupRef").streamGroupRef.status!=="Connected"&&(p&&d("LSStreamGroupRef").streamGroupRef.status==="Disconnected"&&(y!=null&&(window.clearTimeout(y),y=null,s=0,w=!1),(i||(i=c("QuickPerformanceLogger"))).markerPoint(q,"reconnect",{instanceKey:m}),B(b,"reconnect_when_publish",f,g)),(i||(i=c("QuickPerformanceLogger"))).markerPoint(q,"wait_for_connection",{instanceKey:m}),await F().then(function(){}).catch(function(){var a;d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"ConnectionTimeout."+n);(a=d("LSStreamGroupRef").streamGroupRef.current)==null||a.streamGroupLoggingContext.logError(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"Publish","ConnectionTimeout",String(n));return Promise.reject({RE_EXN_ID:d("LSPlatformRealtimeTransport").NotConnected})}));(i||(i=c("QuickPerformanceLogger"))).markerPoint(q,"send_message",{instanceKey:m});var r=1===(h||(h=d("LSIntEnum"))).unwrapIntEnum(e)||2===(h||(h=d("LSIntEnum"))).unwrapIntEnum(e);if(r&&u.has(k)){var t=u.get(k);await (t==null?void 0:t.send(j.encode(a)))}else{t=4!==(h||(h=d("LSIntEnum"))).unwrapIntEnum(e);var v={int:{databaseType:k,requestType:n}};a=await C(n,j.encode(a),t,v);t&&(i||(i=c("QuickPerformanceLogger"))).markerPoint(q,"send_message_acked",{instanceKey:m});(i||(i=c("QuickPerformanceLogger"))).markerEnd(q,2,m);r&&u.set(k,a)}}catch(a){a===d("DGWStream").StreamError.ACK_TIMEOUT&&(i||(i=c("QuickPerformanceLogger"))).markerPoint(q,"ack_timeout",{instanceKey:m});(i||(i=c("QuickPerformanceLogger"))).markerEnd(q,3,m);if(a.message==="Max number of stream IDs reached"){d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamIdLimitExceeded."+n);(v=d("LSStreamGroupRef").streamGroupRef.current)==null||v.streamGroupLoggingContext.logError(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"initStream","StreamIdLimitExceeded",n.toString())}d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"initStreamError."+n);(t=d("LSStreamGroupRef").streamGroupRef.current)==null||t.streamGroupLoggingContext.logError(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"Publish","Failed to publish payload",n.toString());r=l&&3===(h||(h=d("LSIntEnum"))).unwrapIntEnum(e);if(r)return Promise.resolve();else{o&&a===d("DGWStream").StreamError.ACK_TIMEOUT&&(d("LSStreamGroupRef").streamGroupRef.status="Disconnected",y!=null&&(window.clearTimeout(y),y=null,s=0,w=!1),B(b,"stream_ack_timeout",f,g));return Promise.reject(a)}}},subscribe:function(a){d("LSStreamGroupRef").streamGroupRef.subscribers.set(a,a);return function(){d("LSStreamGroupRef").streamGroupRef.subscribers.delete(a)}}}}function F(){var a={reject:function(){},resolve:function(){}},b=d("Random").uint32(),c=new Promise(function(b,c){a.resolve=b,a.reject=c});d("LSStreamGroupRef").streamGroupRef.publishBuffer.set(b,a);return c}g.getStatusForDebugging=f;g.LSPlatformDGWTransport=a}),98);
__d("LSPlatformSyncSystem",["FBLogger","I64","LSBeginHandlingSyncForSyncGroupStoredProcedure","LSBeginHandlingSyncStoredProcedure","LSDatabaseProviderType","LSFactory","LSIntEnum","LSJson","LSMailboxInitialSyncCursor","LSPlatformGraphQLTransport","LSPlatformRealtimeTransport","LSPlatformRequestId","LSPlatformRequestScheduler","LSPlatformServerResponseHandler","LSShape","LSVec","MWPBumpEntityKey","MessengerLogHistory","ReQL","gkx","promiseDone","qex","throttle"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,e,g,j,k){var l=d("MessengerLogHistory").getInstance("client_sync"),m=new(c("LSPlatformServerResponseHandler"))(e),n=d("LSDatabaseProviderType").isProviderPersisted(a),o=function(b){return a.runInTransaction(async function(a){var c=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.network_requests).getKeyRange("",b));c!=null&&await a.network_requests.put({epochId:void 0,failureCount:(h||(h=d("I64"))).add(c.failureCount,h.one),lastDelayedRequestTimestampMs:c.lastDelayedRequestTimestampMs,lastSentTimestampMs:c.lastSentTimestampMs,lastSyncRequestTimestampMs:c.lastSyncRequestTimestampMs,networkTaskIdentifier:c.networkTaskIdentifier,syncDatabaseId:c.syncDatabaseId,taskQueueName:c.taskQueueName})},"readwrite",void 0,void 0,f.id+":78")},p=new(c("LSPlatformRequestScheduler"))(),q=async function(f,l){l=d("LSShape").toRecord(l);var o=d("LSShape").toRecord(l.request_payload);l=l.type;var p=c("LSPlatformRequestId").generate(),q=d("LSJson").stringify(d("LSShape").ofRecord({database:o.database,epoch_id:o.epoch_id,failure_count:o.failure_count,last_applied_cursor:o.last_applied_cursor,sync_params:o.sync_params,version:(h||(h=d("I64"))).of_string(g)})),r=(h||(h=d("I64"))).equal(f.sync_group_id,(i||(i=d("LSIntEnum"))).ofNumber(1))&&c("gkx")("26386")===!0;if(!r&&f.skip_realtime_gateway){r=await d("LSPlatformGraphQLTransport").publish(j,p,l,q,k);var s=r[0],t=r[1],u=r[2];r=r[3];u={experiments:u,syncScript:t,target:r};return n?m.maybeEvalInOrderReceived(s,u):e(u)}else{t=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.sync_groups).getKeyRange(f.sync_group_id));r=t!=null&&(h||(h=d("I64"))).equal(t.syncChannel,(i||(i=d("LSIntEnum"))).ofNumber(2))?(i||(i=d("LSIntEnum"))).ofNumber(2):d("LSMailboxInitialSyncCursor").syncChannel;s=c("qex")._("2071");if(t!=null&&s!=null&&s!=="default"){u=(i||(i=d("LSIntEnum"))).unwrapIntEnum(l);if(1===u||2===u||5===u){f=s+"."+(i||(i=d("LSIntEnum"))).toNumber(r)+"."+i.toNumber(l)+"."+i.toNumber(t.groupId);d("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",f)}}u=(h||(h=d("I64"))).to_int32(o.database);return b.publish({databaseType:u,payload:q,queueName:void 0,requestId:p,syncChannel:r,type_:l}).then(function(){return Promise.resolve()})}},r=function(b){var e=function(b){return a.runInTransaction(function(a){return c("LSBeginHandlingSyncForSyncGroupStoredProcedure")(c("LSFactory")(a),{ignoreSoftDelay:!1,syncGroupId:b})},"readwrite",void 0,void 0,f.id+":206").then(function(a){return r(a[0])})},g=function(a,b){p.schedule(function(){c("promiseDone")(e(a))},(h||(h=d("I64"))).to_string(a),h.to_float(b))},j=d("LSShape").toRecord(b);b=j.work_item_type;if((h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(1))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(5))){var k=c("qex")._("2071");if(k!=null&&k!=="default"){var m=k+"."+(i||(i=d("LSIntEnum"))).toNumber(d("LSMailboxInitialSyncCursor").syncChannel);d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync",m)}var n=j.network_payload;if(n!=null)return q(j,n).catch(function(a){if(k!=null&&k!=="default"){var b=k+"."+(i||(i=d("LSIntEnum"))).toNumber(d("LSMailboxInitialSyncCursor").syncChannel);d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync",b+".exception");a.RE_EXN_ID===d("LSPlatformRealtimeTransport").Timeout?d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync",b+".exception.timeout"):a.RE_EXN_ID===d("LSPlatformRealtimeTransport").NotConnected&&d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync",b+".exception.notconnected")}if(a.message===d("LSPlatformGraphQLTransport").ServerError)d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","send_sync_request_graphql_error");else if(a.RE_EXN_ID===d("LSPlatformRealtimeTransport").Timeout||a.RE_EXN_ID===d("LSPlatformRealtimeTransport").NotConnected)d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","send_sync_request_timeout_or_disc"),l.debug("Publish timed out");else{d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","send_sync_request_other_error");if(a instanceof Error)c("FBLogger")("messenger_web").catching(a).mustfix("Encountered an JS error while publishing a LS sync request");else{b="";try{b=JSON.stringify(a)}catch(a){}c("FBLogger")("messenger_web").mustfix("Encountered an JS error while publishing a LS sync request %s",b)}}d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","handleSyncFailure."+(i||(i=d("LSIntEnum"))).toNumber(d("LSShape").toRecord(n).type)+"."+i.toNumber(j.sync_group_id));return o(j.sync_group_id).then(function(){return e(j.sync_group_id)})});else{c("FBLogger")("ls_web_init").mustfix("Expected networkpayload for sync request but didn't get any");return Promise.resolve()}}if(!(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(3)))if((h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(4))||!(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(2)))return Promise.resolve();else{c("FBLogger")("ls_web_init").mustfix("Native handling for sync group not implemented yet");return Promise.resolve()}m=j.next_sync_ms;if(m!=null){g(j.sync_group_id,m);return Promise.resolve()}else{c("FBLogger")("ls_web_init").mustfix("Expected delay for delayed sync request but didn't get any");return Promise.resolve()}},s=function(a){return Promise.all(c("LSVec").toArray(a[0]).map(function(a){return r(a)}))},t=function(){c("promiseDone")(a.runInTransaction(function(a){return c("LSBeginHandlingSyncStoredProcedure")(c("LSFactory")(a),{ignoreSoftDelay:!1})},"readwrite",void 0,void 0,f.id+":384").then(s))},u=c("throttle")(t,500);t=function(){return d("ReQL").fromTableAscending(a.tables.sync_groups).subscribe(function(){return u()})};var v=function(){return b.subscribeToNonTaskResponses(function(a,b){var f=b.ex,g=b.payload;f={experiments:f,sp:b.sp,syncScript:g,target:b.target};c("promiseDone")(n?m.maybeEvalInOrderReceived(a,f):c("gkx")("10470")?m.maybeEvalInOrderReceived(a,f):e(f),function(){return u()},function(a){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","handle_sync_response_failure");if(a instanceof Error)c("FBLogger")("messenger_web").catching(a).mustfix("JS error encountered handling response from MQTT (pdb=%s): %s",n,a.message);else{var b="";try{b=JSON.stringify(a)}catch(a){}c("FBLogger")("messenger_web").mustfix("JS error encountered handling response from MQTT (pdb=%s): %s",n,b)}})})},w=function(){return b.onReconnect(function(b){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","resume_sync_reconnect");if(d("LSMailboxInitialSyncCursor").isWebApp&&1===b&&c("qex")._("2072")===!0&&c("qex")._("2080")===!0)return;l.debug("Sync System reconnecting");c("promiseDone")(a.runInTransaction(async function(b){var e;e=await (e=d("ReQL")).toArrayAsync(e.mergeJoin(e.fromTableAscending(a.tables.sync_groups),e.fromTableAscending(a.tables.network_requests).getKeyRange("")));await Promise.all(e.map(function(a){a=a[1];return b.network_requests.put({epochId:void 0,failureCount:a.failureCount,lastDelayedRequestTimestampMs:a.lastDelayedRequestTimestampMs,lastSentTimestampMs:a.lastSentTimestampMs,lastSyncRequestTimestampMs:a.lastSyncRequestTimestampMs,networkTaskIdentifier:a.networkTaskIdentifier,syncDatabaseId:a.syncDatabaseId,taskQueueName:a.taskQueueName})}));return c("LSBeginHandlingSyncStoredProcedure")(c("LSFactory")(b),{ignoreSoftDelay:!1})},"readwrite",void 0,void 0,f.id+":487").then(s))})},x=t(),y=v(),z=w();u();return{cleanup:function(){x(),z(),y()}}}g.default=a}),98);/*FB_PKG_DELIM*/
__d("ALT_PLACEHOLDER_FIXME",[],(function(a,b,c,d,e,f){"use strict";a=null;f["default"]=a}),66);
__d("FDSCamcorderFilled20Icon",["cr:14631"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:14631")}),98);
__d("FDSCamcorderFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("493174"),20);b=a;g["default"]=b}),98);
__d("FDSPhoneFilled20Icon",["cr:15391"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:15391")}),98);
__d("FDSPhoneFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("558161"),20);b=a;g["default"]=b}),98);
__d("FDSPressableFacepileProfilePhoto.react",["CometPressable.react","FDSProfilePhoto.react","react","react-compiler-runtime","useIntersectionObserver"],(function(a,b,c,d,e,f,g){"use strict";var h=["Container","FocusItemComponent","divClassName","parentRef","pressableProps"],i,j=i||(i=d("react"));b=i;b.useCallback;var k=b.useState;function a(a){var b=d("react-compiler-runtime").c(25),e,f,g,i,l,m;b[0]!==a?(m=a.Container,e=a.FocusItemComponent,f=a.divClassName,g=a.parentRef,i=a.pressableProps,l=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=i,b[5]=l,b[6]=m):(e=b[1],f=b[2],g=b[3],i=b[4],l=b[5],m=b[6]);a=m===void 0?j.Fragment:m;m=k(!1);var n=m[0],o=m[1];b[7]===Symbol["for"]("react.memo_cache_sentinel")?(m=function(a){a=a.intersectionRatio;o(a<.5)},b[7]=m):m=b[7];m=m;var p;b[8]!==g?(p={root:function(){var a;return(a=g.current)!=null?a:null},threshold:.5},b[8]=g,b[9]=p):p=b[9];m=c("useIntersectionObserver")(m,p);b[10]!==n||b[11]!==i||b[12]!==l?(p=i!=null?j.jsx(c("CometPressable.react"),babelHelpers["extends"]({},i,{disabled:n,children:j.jsx(c("FDSProfilePhoto.react"),babelHelpers["extends"]({},l,{overlayDisabled:!0}))})):j.jsx(c("FDSProfilePhoto.react"),babelHelpers["extends"]({},l,{overlayDisabled:!0})),b[10]=n,b[11]=i,b[12]=l,b[13]=p):p=b[13];b[14]!==a||b[15]!==p?(i=j.jsx(a,{children:p}),b[14]=a,b[15]=p,b[16]=i):i=b[16];b[17]!==e||b[18]!==n||b[19]!==i?(l=j.jsx(e,{disabled:n,children:i}),b[17]=e,b[18]=n,b[19]=i,b[20]=l):l=b[20];b[21]!==f||b[22]!==m||b[23]!==l?(a=j.jsx("div",{className:f,ref:m,role:"listitem",children:l}),b[21]=f,b[22]=m,b[23]=l,b[24]=a):a=b[24];return a}g["default"]=a}),98);
__d("FDSPressableFacepile.react",["fbt","ix","BaseContainerQueryElement.react","CometComponentWithKeyCommands.react","CometKeys","CometPressable.react","FDSIcon.react","FDSPressableFacepileProfilePhoto.react","FDSText.react","FDSTooltip.react","FocusGroup.react","ReactDOM","fbicon","focusScopeQueries","react","react-compiler-runtime","useIntersectionObserver"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=["addOn","alt","containerComponent","isDecorative","source","testid"],k=["FocusItemComponent","ellipsisTooltip","parentRef","size","spacing"],l,m=l||(l=d("react"));b=l;b.useCallback;var n=b.useId,o=b.useRef,p=b.useState;e=d("FocusGroup.react").createFocusGroup(d("focusScopeQueries").tabbableScopeQuery);var q=e[0],r=e[1],s=4,t=6,u=-4,v={overflow24:{height:"xxk0z11",width:"xvy4d1p",$$css:!0},overflow28:{height:"x1fgtraw",width:"xgd8bvy",$$css:!0},overflow32:{height:"x10w6t97",width:"x1td3qas",$$css:!0},overflow40:{height:"x1vqgdyp",width:"x100vrsf",$$css:!0},overflow48:{height:"xsdox4t",width:"x1useyqa",$$css:!0},overflowItem:{alignItems:"x6s0dn4",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",display:"x78zum5",flexShrink:"x2lah0s",justifyContent:"xl56j7k",pointerEvents:"x71s49j",$$css:!0},pressableItem:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",display:"x1lliihq",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(41),e=a.count,f=a.ellipsisTooltip,g=a.isOverlapping,i=a.isTextInline,k=a.items,l=a.linkProps,p=a.onPress,C=a.size,D=a.testid,E=a.testOnly_pressed,F=a.text;a=a.withWrapper;var G=g===void 0?!1:g;g=i===void 0?!1:i;var H=E===void 0?!1:E,I=e!=null?e:k.length;b[0]!==k?(i=k.some(z),b[0]=k,b[1]=i):i=b[1];E=i;var J=k.some(y),K=G?u:J?t:s,L=Math.min(I,k.length,g?3:Infinity),M=o(null),N=n();e=n();b[2]===Symbol["for"]("react.memo_cache_sentinel")?(i=[{command:{key:c("CometKeys").LEFT},description:h._(/*BTDS*/"Previous item"),handler:x},{command:{key:c("CometKeys").RIGHT},description:h._(/*BTDS*/"Next item"),handler:w}],b[2]=i):i=b[2];i=i;var O;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(O={className:"x78zum5 x1q0g3np xhsvlbd x16pr9af x6ikm8r x889kno x1a8lsjc x1n2onr6"},b[3]=O):O=b[3];e=F!=null?e:void 0;var P="list",Q=k.slice(0,L).map(function(a,b){var d=a.addOn,e=a.alt,f=a.containerComponent,g=a.isDecorative,h=a.source,i=a.testid;i=babelHelpers.objectWithoutPropertiesLoose(a,j);g===void 0?!1:g;return m.jsxs(m.Fragment,{children:[m.jsx(c("BaseContainerQueryElement.react"),{breakpoint:(b+1)*(C+K)-K,inverseToContainer:!0,maxWidth:"100%",minWidth:0}),m.jsx(c("FDSPressableFacepileProfilePhoto.react"),{Container:f,FocusItemComponent:r,addOn:d,alt:e,divClassName:{0:"x1n2onr6",4:"x1n2onr6 xdwrcjd",2:"x1n2onr6 xdzw4kq",6:"x1n2onr6 xdzw4kq",1:"x1n2onr6 x165d6jo",5:"x1n2onr6 x165d6jo",3:"x1n2onr6 x165d6jo",7:"x1n2onr6 x165d6jo"}[!!(b>0)<<2|!!(b>0&&J)<<1|!!(b>0&&G)<<0],isOverlapped:G&&b>0,parentRef:M,pressableProps:i.onPress||i.linkProps?babelHelpers["extends"]({},i,{display:"inline",overlayDisabled:G,overlayRadius:C/2,xstyle:v.pressableItem}):null,role:"listitem",shape:"circle",size:C,source:h,testid:void 0})]},b)}),R;b[4]!==I||b[5]!==f||b[6]!==E||b[7]!==G||b[8]!==k||b[9]!==l||b[10]!==N||b[11]!==L||b[12]!==p||b[13]!==C||b[14]!==K||b[15]!==H||b[16]!==D?(R=!E&&(p||l)&&m.jsxs("div",{className:"x1jn9clo x78zum5 x1q0g3np xtijo5x x1o0tod x47corl x10l6tqk x1eu8d0j",role:"listitem",children:[k.slice(0,Math.min(k.length,L<I?L:I)).map(function(a,b){return b===0&&I>1?null:m.jsx(c("BaseContainerQueryElement.react"),{breakpoint:(b+1)*(C+K)-K,maxWidth:b===I-1?"100%":C+K,minWidth:0},"overflowPusher"+b)}),m.jsx(B,{FocusItemComponent:r,"aria-label":h._(/*BTDS*/"See everyone"),ellipsisTooltip:f,linkProps:l,onPress:p,overlayDisabled:!0,parentRef:M,size:C,spacing:K,testid:void 0,xstyle:[v.overflowItem,C===24&&v.overflow24,C===28&&v.overflow28,C===32&&v.overflow32,C===40&&v.overflow40,C===48&&v.overflow48],children:function(a){var b=a.hovered;a=a.pressed;return m.jsxs(m.Fragment,{children:[m.jsxs("svg",{"aria-hidden":!0,className:"x1ey2m1c xtijo5x x1o0tod x10l6tqk x13vifvy",height:C,viewBox:"0 0 "+C+" "+C,width:C,children:[G&&L>1&&m.jsxs("mask",{id:N,suppressHydrationWarning:!0,children:[m.jsx("circle",{cx:C/2,cy:C/2,fill:"white",r:C/2}),m.jsx("circle",{cx:-C/2+4,cy:C/2,fill:"black",r:C/2+2})]}),m.jsx("circle",babelHelpers["extends"]({className:"x1wnuiir",cx:C/2,cy:C/2,r:C/2,suppressHydrationWarning:!0},G&&L>1?{mask:"url(#"+N+")"}:null)),m.jsx("circle",babelHelpers["extends"]({className:{0:"x1wnuiir xg01cxk x1ebt8du x19991ni x1dhq9h",2:"x19991ni x1dhq9h x4bmajx x1hc1fzr x1mq3mr6",1:"x19991ni x1dhq9h x1tgjyoi x1hc1fzr x1mq3mr6",3:"x19991ni x1dhq9h x1tgjyoi x1hc1fzr x1mq3mr6"}[!!b<<1|!!(a||H)<<0],cx:C/2,cy:C/2,r:C/2,suppressHydrationWarning:!0},G&&L>1?{mask:"url(#"+N+")"}:null))]}),m.jsx(c("FDSIcon.react"),{color:"white",icon:A(C)})]})}})]}),b[4]=I,b[5]=f,b[6]=E,b[7]=G,b[8]=k,b[9]=l,b[10]=N,b[11]=L,b[12]=p,b[13]=C,b[14]=K,b[15]=H,b[16]=D,b[17]=R):R=b[17];b[18]!==Q||b[19]!==R||b[20]!==O||b[21]!==e?(f=m.jsxs("div",babelHelpers["extends"]({},O,{"aria-describedby":e,ref:M,role:P,children:[Q,R]})),b[18]=Q,b[19]=R,b[20]=O,b[21]=e,b[22]=f):f=b[22];E=f;b[23]!==g?(k={0:{className:"x78zum5 xdt5ytf"},1:{className:"x78zum5 x6s0dn4 x1q0g3np"}}[!!g<<0],b[23]=g,b[24]=k):k=b[24];b[25]!==E?(l=m.jsx(q,{orientation:"horizontal",tabScopeQuery:d("focusScopeQueries").tabbableScopeQuery,wrap:!0,children:E}),b[25]=E,b[26]=l):l=b[26];b[27]!==i||b[28]!==l?(p=m.jsx(c("CometComponentWithKeyCommands.react"),{commandConfigs:i,children:l}),b[27]=i,b[28]=l,b[29]=p):p=b[29];b[30]!==g||b[31]!==F?(P=F!=null?m.jsx("div",babelHelpers["extends"]({},{0:{className:"xz9dl7a"},1:{className:"x135b78x xexx8yu"}}[!!g<<0],{children:m.jsx(c("FDSText.react"),{color:"secondary",type:"body3",children:F})})):null,b[30]=g,b[31]=F,b[32]=P):P=b[32];b[33]!==k||b[34]!==p||b[35]!==P||b[36]!==D?(Q=m.jsxs("div",babelHelpers["extends"]({},k,{"data-testid":void 0,children:[p,P]})),b[33]=k,b[34]=p,b[35]=P,b[36]=D,b[37]=Q):Q=b[37];R=Q;b[38]!==R||b[39]!==a?(O=a?m.jsx("div",{className:"xpdmqnj xf7dkkf xyamay9",children:R}):R,b[38]=R,b[39]=a,b[40]=O):O=b[40];return O}function w(){}function x(){}function y(a){return((a=a.addOn)==null?void 0:a.type)==="activityBadge"}function z(a){return a.addOn!=null}function A(a){switch(a){case 32:return d("fbicon")._(i("484386"),16);case 40:case 48:return d("fbicon")._(i("484388"),24);default:return d("fbicon")._(i("484385"),12)}}function B(a){var b=d("react-compiler-runtime").c(26),e,f,g,h,i,j;b[0]!==a?(e=a.FocusItemComponent,f=a.ellipsisTooltip,g=a.parentRef,i=a.size,j=a.spacing,h=babelHelpers.objectWithoutPropertiesLoose(a,k),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=h,b[5]=i,b[6]=j):(e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6]);a=p(!1);var l=a[0],n=a[1];a=p(null);var o=a[0],q=a[1];b[7]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(a){var b=a.intersectionRatio;d("ReactDOM").flushSync(function(){n(b<.5)})},b[7]=a):a=b[7];a=a;var r;b[8]!==g?(r={root:function(){var a;return(a=g.current)!=null?a:null},threshold:.5},b[8]=g,b[9]=r):r=b[9];a=c("useIntersectionObserver")(a,r);b[10]!==g||b[11]!==i||b[12]!==j?(r=function(a){if(!a)return;a=g.current;if(!a)return;a=a.getBoundingClientRect();a=a.width;a=Math.floor((a+j)/(i+j));q(a-1)},b[10]=g,b[11]=i,b[12]=j,b[13]=r):r=b[13];r=r;var s;b[14]!==a||b[15]!==h?(s=m.jsx(c("CometPressable.react"),babelHelpers["extends"]({},h,{ref:a})),b[14]=a,b[15]=h,b[16]=s):s=b[16];a=s;b[17]!==a||b[18]!==f||b[19]!==o||b[20]!==r?(h=f?m.jsx(c("FDSTooltip.react"),{align:"middle",onVisibilityChange:r,position:"below",tooltip:o!=null?f(o):"",children:a}):a,b[17]=a,b[18]=f,b[19]=o,b[20]=r,b[21]=h):h=b[21];b[22]!==e||b[23]!==l||b[24]!==h?(s=m.jsx(e,{disabled:l,children:h}),b[22]=e,b[23]=l,b[24]=h,b[25]=s):s=b[25];return s}g["default"]=a}),226);
__d("MDSCautionTriangleSvgIcon.react",["MDSSvgIcon.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3),e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx("path",{clipRule:"evenodd",d:"M19.747 8.027c-.764-1.367-2.73-1.367-3.494 0L6.757 25.025C6.012 26.358 6.977 28 8.504 28h18.992c1.528 0 2.492-1.642 1.747-2.975L19.747 8.027zm-3.159 5.97a1.414 1.414 0 112.824 0l-.353 6.005a1.06 1.06 0 01-2.118 0l-.353-6.005zm2.662 9.753a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0z",fillRule:"evenodd"}),b[0]=e):e=b[0];b[1]!==a?(e=i.jsx(c("MDSSvgIcon.react"),babelHelpers["extends"]({},a,{children:e})),b[1]=a,b[2]=e):e=b[2];return e}g["default"]=a}),98);
__d("MDSMenuBaseWithPopover.react",["BaseContextualLayerAvailableHeightContext","BaseMultiPageView.react","FDSMenuBase.react","MDSPopover.react","MDSPopoverLoadingStateContent.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["ref","aria-labelledby","aria-label","arrowAlignment","children","fallback","id","maxHeight","role","testid","truncate","withArrow","maxWidth"],i,j=i||(i=d("react")),k=i.useContext,l=15,m="calc(100vw - 2 * var(--menu-item-base-padding-horizontal))";function a(a){var b=d("react-compiler-runtime").c(29),e,f,g,i,n,o,p,q,r,s,t,u,v,w;b[0]!==a?(r=a.ref,o=a["aria-labelledby"],e=a["aria-label"],f=a.arrowAlignment,g=a.children,i=a.fallback,n=a.id,p=a.maxHeight,s=a.role,t=a.testid,u=a.truncate,v=a.withArrow,w=a.maxWidth,q=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=i,b[5]=n,b[6]=o,b[7]=p,b[8]=q,b[9]=r,b[10]=s,b[11]=t,b[12]=u,b[13]=v,b[14]=w):(e=b[1],f=b[2],g=b[3],i=b[4],n=b[5],o=b[6],p=b[7],q=b[8],r=b[9],s=b[10],t=b[11],u=b[12],v=b[13],w=b[14]);a=s===void 0?"menu":s;s=t===void 0?"comet-menu":t;t=u===void 0?!1:u;u=v===void 0?!1:v;v=w===void 0?m:w;w=k(c("BaseContextualLayerAvailableHeightContext"));u&&w!=null&&(w=w-l);w=Math.min(w!=null?w:Infinity,p!=null?p:Infinity);t=t?w===Infinity?0:w:p;b[15]!==e||b[16]!==f||b[17]!==g||b[18]!==i||b[19]!==n||b[20]!==o||b[21]!==v||b[22]!==t||b[23]!==q||b[24]!==r||b[25]!==a||b[26]!==s||b[27]!==u?(w=j.Children.count(g)>0?j.jsx(c("MDSPopover.react"),{"aria-label":e,"aria-labelledby":o!=null?o:void 0,arrowAlignment:f,id:n,ref:r,role:a,testid:void 0,withArrow:u,children:j.jsx(c("BaseMultiPageView.react"),{disableAutoFocus:!0,disableFocusContainment:!0,fallback:i!=null?i:j.jsx(c("MDSPopoverLoadingStateContent.react"),{}),children:j.jsx(c("FDSMenuBase.react"),babelHelpers["extends"]({},q,{children:g,maxHeight:t,maxWidth:v,role:a}))})}):null,b[15]=e,b[16]=f,b[17]=g,b[18]=i,b[19]=n,b[20]=o,b[21]=v,b[22]=t,b[23]=q,b[24]=r,b[25]=a,b[26]=s,b[27]=u,b[28]=w):w=b[28];return w}b=j.memo(a);g["default"]=b}),98);
__d("MDSMenu.react",["BaseTheme.react","MDSMenuBaseWithPopover.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["ref"],i,j=i||d("react"),k={dark:{"menu-base-padding-vertical":"4px","menu-item-base-margin-horizontal":"4px","menu-item-icon-container-size":"28px","menu-item-icon-default-size":"28px"},light:{"menu-base-padding-vertical":"4px","menu-item-base-margin-horizontal":"4px","menu-item-icon-container-size":"28px","menu-item-icon-default-size":"28px"},type:"VARIABLES"};function a(a){var b=d("react-compiler-runtime").c(6),e,f;b[0]!==a?(f=a.ref,e=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f):(e=b[1],f=b[2]);b[3]!==e||b[4]!==f?(a=j.jsx(c("BaseTheme.react"),{config:k,children:j.jsx(c("MDSMenuBaseWithPopover.react"),babelHelpers["extends"]({},e,{ref:f}))}),b[3]=e,b[4]=f,b[5]=a):a=b[5];return a}g["default"]=a}),98);
__d("MWChatIsMessageRequest",["CurrentUser"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a!=null)if(a==="pending")return!0;else if(a==="other")return!c("CurrentUser").isWorkUser();else return!1;else return!1}g.fn=a}),98);
__d("MessengerDesktopPresenceInfo",["FBLogger","WebStorage"],(function(a,b,c,d,e,f,g){"use strict";var h,i="__fb_messenger_desktop_presence_info";function a(){var a=(h||(h=c("WebStorage"))).getLocalStorageForRead();return JSON.parse((a=a==null?void 0:a.getItem(i))!=null?a:"null")}function b(){var a=(h||(h=c("WebStorage"))).getLocalStorage();if(a==null){c("FBLogger")("desktop_messenger_deeplink_presence","local_storage_not_found").warn("Messenger Desktop Presence Token cannot be created if local storage doesn't exist");return null}var b={lastActiveTimestamp:Date.now()};a=h.setItemGuarded(a,i,JSON.stringify(b));a!=null&&c("FBLogger")("desktop_messenger_deeplink_presence","create_presence_info_error").warn(a.toString());return b}g.getPresenceInfo=a;g.createPresenceInfo=b}),98);
__d("MessengerDesktopLocalServerRequest",["ConstUriUtils","MessengerDesktopPresenceInfo"],(function(a,b,c,d,e,f,g){"use strict";var h=2e3;a=function(){function a(a,b){var c=this;this.$1=function(){c.request.status===200&&d("MessengerDesktopPresenceInfo").createPresenceInfo()};b="http://localhost:"+b+a;this.uri=(a=(a=d("ConstUriUtils").getUri(b))==null?void 0:a.toString())!=null?a:b;this.request=new XMLHttpRequest();this.request.timeout=h;this.request.onloadend=this.$1}var b=a.prototype;b.setOnLoadEndHandler=function(a){var b=this;this.request.onloadend=function(){b.$1(),a(b.request.status)};return this};b.setErrorHandler=function(a){var b=this;this.request.onerror=function(){b.request.status===500&&d("MessengerDesktopPresenceInfo").createPresenceInfo(),a(b.request.status)};return this};b.setTimeoutHandler=function(a){this.request.ontimeout=a;return this};b.send=function(){this.request.open("GET",this.uri),this.request.send()};return a}();g["default"]=a}),98);
__d("XMessengerDotComDesktopControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/desktop/",Object.freeze({start_download:!1,m:!1,is_mcom_redirect:!1}),new Set(["m"]));b=a;g["default"]=b}),98);
__d("XMessengerDotComDesktopLaunchAppInterstitialControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/desktop/launch/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("MessengerDesktopDeepLinkUtils",["fbt","MessengerDesktopLocalServerRequest","MessengerDesktopPresenceInfo","Promise","UserAgent","XMessengerDotComDesktopControllerRouteBuilder","XMessengerDotComDesktopLaunchAppInterstitialControllerRouteBuilder","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j="messenger",k=3103,l=1e3*60*60*24*28,m="https://www.messenger.com/desktop/";function a(a){return j+"://room?joinurl="+a}function e(a){return new(i||(i=b("Promise")))(function(b){new(c("MessengerDesktopLocalServerRequest"))("/ping",a).setOnLoadEndHandler(function(a){return b(a)}).setTimeoutHandler(function(a){return b(!1)}).setErrorHandler(function(a){return b(!1)}).send()})}function f(){var a=d("MessengerDesktopPresenceInfo").getPresenceInfo();return a==null?!1:Date.now()-a.lastActiveTimestamp<=l}function n(){var a=c("gkx")("23666"),b=c("gkx")("23667");if(b){b=c("gkx")("23668");return a||b}else return a}function o(){return c("gkx")("23669")}function p(){if(c("gkx")("23670")||!n())return!1;switch(r()){case"Windows":return!1;case"Mac":return c("gkx")("23671");default:return!1}}var q={openMessengerForDesktop:h._(/*BTDS*/"Open Messenger for Desktop"),openMessengerForMac:h._(/*BTDS*/"Open Messenger for Mac"),openMessengerForWindows:h._(/*BTDS*/"Open Messenger for Windows"),tryMessengerForDesktop:h._(/*BTDS*/"Try Messenger for Desktop"),tryMessengerForMac:h._(/*BTDS*/"Try Messenger for Mac"),tryMessengerForWindows:h._(/*BTDS*/"Try Messenger for Windows")};function r(){if(c("UserAgent").isPlatform("Windows"))return"Windows";else if(c("UserAgent").isPlatform("Mac OS X"))return"Mac";return"Desktop"}function s(a){return(a=c("XMessengerDotComDesktopControllerRouteBuilder").buildUri({funnel_session_id:a}).setDomain("www.messenger.com"))==null||(a=a.setProtocol("https"))==null?void 0:a.toString()}function t(a){return(a=c("XMessengerDotComDesktopLaunchAppInterstitialControllerRouteBuilder").buildUri(a).setDomain("messenger.com"))==null||(a=a.setProtocol("https"))==null?void 0:a.toString()}function u(){var a=n()?"open":"try",b=r();return q[a+"MessengerFor"+b]}function v(a){var b;return n()?(b=t(a))!=null?b:m:(b=s(a.funnel_session_id))!=null?b:m}g.PORT=k;g.getRoomDeepLink=a;g.isMessengerDesktopRunning=e;g.isMessengerDesktopProbablyInstalled=f;g.isMessengerDesktopDeeplinkEligible=n;g.isMessengerDesktopPromoEligible=o;g.isMessengerDesktopDeeplinkEnabled=p;g.getDownloadURI=s;g.getDeeplinkButtonLabel=u;g.getDeeplinkButtonURI=v}),226);
__d("MessengerDesktopDeeplinkEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1856945");b=d("FalcoLoggerInternal").create("messenger_desktop_deeplink_event",a);e=b;g["default"]=e}),98);
__d("logCallAttemptViaLocalhost",["MessengerDesktopDeeplinkEventFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.funnelSessionId;c("MessengerDesktopDeeplinkEventFalcoEvent").logImmediately(function(){return{event:"attempt_localhost_deeplink",eventLocation:"browser",eventType:"call",funnelSessionId:b,mobile_app_source:"unknown"}})}g["default"]=a}),98);
__d("MWStartRTCCallUtils",["$InternalEnum","I64","Int64Hooks","LSContactBitOffset","LSContactBlockedByViewerStatus","LSContactReachabilityStatusType","LSContactType","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWChatIsMessageRequest","MWPActor.react","MessengerDesktopDeepLinkUtils","MessengerDesktopLocalServerRequest","ODS","Promise","ReQL","ReQLSuspense","ZenonRTWebBrowserFeatureSupport","gkx","isFeatureLimitEnabled","logCallAttemptViaLocalhost","promiseDone","react","react-compiler-runtime","useIsReadOnlyFeatureLimitedWithThreadType","useMWGetOtherUserContact","useReStore","useStable","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m;(j||d("react")).useCallback;var n=b("$InternalEnum").Mirrored(["SECURE_VIDEO_UNSUPPORTED","SECURE_VOICE_UNSUPPORTED","VIDEO_SUPPORTED","VOICE_SUPPORTED","VIDEO_UNSUPPORTED","VOICE_UNSUPPORTED"]);function a(a){var e=d("react-compiler-runtime").c(3),f=c("useStable")(p),g;e[0]!==a||e[1]!==f?(g=function(e,g,h){var j="/call?threadid="+g+"&isvideocall="+(e?1:0)+"&funnel_id="+f;(m||(m=d("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","initiating_dapp_call");c("logCallAttemptViaLocalhost")({funnelSessionId:f});c("promiseDone")((i||(i=b("Promise"))).all([new(c("MessengerDesktopLocalServerRequest"))(j,d("MessengerDesktopDeepLinkUtils").PORT).setOnLoadEndHandler(o).setErrorHandler(function(b){(m||(m=d("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","call_failed_with_error_"+b),a(e,g,h)}).setTimeoutHandler(function(){(m||(m=d("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","call_timed_out"),a(e,g,h)}).send()]))},e[0]=a,e[1]=f,e[2]=g):g=e[2];return g}function o(){}function p(){return c("uuidv4")()}function e(a,e,f){var g=d("react-compiler-runtime").c(6),h=c("useStable")(r),j,l;g[0]!==e||g[1]!==f||g[2]!==h||g[3]!==a?(j=function(g){var j=(k||(k=d("I64"))).to_string(a),l=e==="video"?1:0;j="/call?threadid="+j+"&isvideocall="+l+"&funnel_id="+h;(m||(m=d("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","initiating_dapp_call");c("logCallAttemptViaLocalhost")({funnelSessionId:h});c("promiseDone")((i||(i=b("Promise"))).all([new(c("MessengerDesktopLocalServerRequest"))(j,d("MessengerDesktopDeepLinkUtils").PORT).setOnLoadEndHandler(q).setErrorHandler(function(a){(m||(m=d("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","call_failed_with_error_"+a),f(g)}).setTimeoutHandler(function(){(m||(m=d("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","call_timed_out"),f(g)}).send()]))},l=[e,h,a,f],g[0]=e,g[1]=f,g[2]=h,g[3]=a,g[4]=j,g[5]=l):(j=g[4],l=g[5]);return d("Int64Hooks").useCallbackInt64(j,l)}function q(){(m||(m=d("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","call_loaded_successfully")}function r(){return c("uuidv4")()}function s(a,b,e){var f=d("react-compiler-runtime").c(12);a=v(a);var g,h=!1;if(a.length!==1)g=!1;else{var i,j=a[0];b=d("LSMessagingThreadTypeUtil").isOneToOne(b)&&j!=null&&!(k||(k=d("I64"))).equal(j.blockedByViewerStatus,(l||(l=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED));if(b){f[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=[!1,!1],f[0]=b):b=f[0];return b}g=j!=null?(k||(k=d("I64"))).equal(j.contactType,(l||(l=d("LSIntEnum"))).ofNumber(c("LSContactType").PAGE)):!1;b=j!=null?(b=d("LSContactBitOffset").has(0,j))!=null?b:!0:!0;i=j!=null?(i=d("LSContactBitOffset").has(1,j))!=null?i:!0:!0;h=e&&j!=null&&j.blockedSinceTimestampMs==null&&!g&&(!b||!i)}if(!g){e=!h;j=!h;f[1]!==e||f[2]!==j?(b=[e,j],f[1]=e,f[2]=j,f[3]=b):b=f[3];return b}if(c("gkx")("23431")){f[4]!==a?(i=a.every(u),f[4]=a,f[5]=i):i=f[5];f[6]!==a?(g=a.every(t),f[6]=a,f[7]=g):g=f[7];f[8]!==i||f[9]!==g?(h=[i,g],f[8]=i,f[9]=g,f[10]=h):h=f[10];return h}f[11]===Symbol["for"]("react.memo_cache_sentinel")?(e=[!1,!1],f[11]=e):e=f[11];return e}function t(a){return a==null?!0:d("LSContactBitOffset").has(16,a)}function u(a){return a==null?!0:d("LSContactBitOffset").has(17,a)}function v(a){var b=d("react-compiler-runtime").c(9),e=(h||(h=c("useReStore")))(),g=d("MWPActor.react").useActor(),i;b[0]!==g||b[1]!==e.tables.contacts||b[2]!==e.tables.participants||b[3]!==a?(i=function(){return d("ReQL").fromTableAscending(e.tables.participants,["contactId"]).getKeyRange(a).take(2).filter(function(a){return!(k||(k=d("I64"))).equal(a.contactId,g)}).map(function(a){return d("ReQLSuspense").first(d("ReQL").fromTableAscending(e.tables.contacts,["contactType","blockedSinceTimestampMs"].concat(d("LSContactBitOffset").contactCapabilityFields,["blockedByViewerStatus"])).getKeyRange(a.contactId),f.id+":302")})},b[0]=g,b[1]=e.tables.contacts,b[2]=e.tables.participants,b[3]=a,b[4]=i):i=b[4];var j;b[5]!==g||b[6]!==e||b[7]!==a?(j=[e,a,g],b[5]=g,b[6]=e,b[7]=a,b[8]=j):j=b[8];return d("ReQLSuspense").useArray(i,j,f.id+":291")}function w(a){var b=d("react-compiler-runtime").c(16),e=a.folderName,g=a.threadKey,i=a.threadType,j=(h||(h=c("useReStore")))(),m=d("MWPActor.react").useActor(),o;b[0]!==m||b[1]!==j.tables.participants||b[2]!==g?(o=function(){return d("ReQL").fromTableAscending(j.tables.participants,["threadKey","contactId"]).getKeyRange(g,m)},b[0]=m,b[1]=j.tables.participants,b[2]=g,b[3]=o):o=b[3];var p;b[4]!==m||b[5]!==j||b[6]!==g?(p=[j,g,m],b[4]=m,b[5]=j,b[6]=g,b[7]=p):p=b[7];o=d("ReQLSuspense").useFirst(o,p,f.id+":322")!=null;b[8]===Symbol["for"]("react.memo_cache_sentinel")?(p=["contactReachabilityStatusType"].concat(d("LSContactBitOffset").contactCapabilityFields),b[8]=p):p=b[8];p=c("useMWGetOtherUserContact")(g,i,p);var q=d("LSThreadBitOffset").has(25,a),r=d("LSThreadBitOffset").has(24,a),t;b[9]!==i?(t=d("LSMessagingThreadTypeUtil").isArmadilloSecure(i),b[9]=i,b[10]=t):t=b[10];t=t;var u=c("useIsReadOnlyFeatureLimitedWithThreadType")(i)&&(!t||c("isFeatureLimitEnabled")()),v=s(g,a.threadType,t),w=v[0];v=v[1];if(t&&(!d("ZenonRTWebBrowserFeatureSupport").isInsertableStreamsSupported()||!c("gkx")("23430"))){b[11]===Symbol["for"]("react.memo_cache_sentinel")?(t=[n.SECURE_VOICE_UNSUPPORTED,n.SECURE_VIDEO_UNSUPPORTED],b[11]=t):t=b[11];return t}t=(p==null?void 0:p.contactReachabilityStatusType)!=null?(k||(k=d("I64"))).equal(p.contactReachabilityStatusType,(l||(l=d("LSIntEnum"))).ofNumber(c("LSContactReachabilityStatusType").REACHABLE)):!0;var x=p!=null&&d("LSContactBitOffset").has(64,p);p=p==null&&(k||(k=d("I64"))).equal(i,(l||(l=d("LSIntEnum"))).ofNumber(15));o=((k||(k=d("I64"))).equal(i,(l||(l=d("LSIntEnum"))).ofNumber(2))||(k||(k=d("I64"))).equal(i,(l||(l=d("LSIntEnum"))).ofNumber(16)))&&o||(k||(k=d("I64"))).equal(i,(l||(l=d("LSIntEnum"))).ofNumber(1))||(k||(k=d("I64"))).equal(i,(l||(l=d("LSIntEnum"))).ofNumber(15));i=d("MWChatIsMessageRequest").fn(e);e=(k||(k=d("I64"))).equal(a.parentThreadKey,(l||(l=d("LSIntEnum"))).ofNumber(-10));a=!p&&!i&&!u&&o&&t&&!x&&!e;if(a){p=w&&q?n.VOICE_SUPPORTED:n.VOICE_UNSUPPORTED;i=v&&r?n.VIDEO_SUPPORTED:n.VIDEO_UNSUPPORTED;b[12]!==p||b[13]!==i?(u=[p,i],b[12]=p,b[13]=i,b[14]=u):u=b[14];return u}b[15]===Symbol["for"]("react.memo_cache_sentinel")?(o=[n.VOICE_UNSUPPORTED,n.VIDEO_UNSUPPORTED],b[15]=o):o=b[15];return o}g.CanCallResult=n;g.useStartDesktopCall=a;g.useStartMessengerDesktopCall=e;g.useCanCall=w}),98);
__d("MWV2MessageProfilePhotoMenuQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9370810589694752"}),null);
__d("MWXIconReply",["MWXSvgIcon","SVGIcon","cr:22460","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22460")),c("gkx")("23219"));g["default"]=a}),98);
__d("MessengerCamcorderFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{d:"M9 9.5a4 4 0 0 0-4 4v9a4 4 0 0 0 4 4h10a4 4 0 0 0 4-4v-9a4 4 0 0 0-4-4H9zM25.829 21.532l3.723 1.861A1 1 0 0 0 31 22.5V13.5a1 1 0 0 0-1.448-.894l-3.723 1.861A1.5 1.5 0 0 0 25 15.81v4.38a1.5 1.5 0 0 0 .829 1.342z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerCreateVideoMeetupLinkMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9685249484907022"}),null);
__d("MessengerCreateVideoMeetupLinkMutation.graphql",["MessengerCreateVideoMeetupLinkMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"CreateVideoMeetupLinkResponsePayload",kind:"LinkedField",name:"create_video_meetup_link",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerCallInviteLink",kind:"LinkedField",name:"meetup_link",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link_hash",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_audio_only",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MessengerCreateVideoMeetupLinkMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MessengerCreateVideoMeetupLinkMutation",selections:c},params:{id:b("MessengerCreateVideoMeetupLinkMutation_facebookRelayOperation"),metadata:{},name:"MessengerCreateVideoMeetupLinkMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("MessengerCreateVideoMeetupLinkMutation",["MessengerCreateVideoMeetupLinkMutation.graphql","Promise","cr:1012418","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,d,e){return new(i||(i=b("Promise")))(function(f,g){var i;b("cr:1012418").commitMutation(a,{mutation:h!==void 0?h:h=b("MessengerCreateVideoMeetupLinkMutation.graphql"),onCompleted:function(a){var b,c,d,e,h=a==null||(b=a.create_video_meetup_link)==null||(b=b.meetup_link)==null?void 0:b.is_audio_only,i=a==null||(c=a.create_video_meetup_link)==null||(c=c.meetup_link)==null?void 0:c.link_url,j=a==null||(d=a.create_video_meetup_link)==null||(d=d.meetup_link)==null?void 0:d.link_hash;a=a==null||(e=a.create_video_meetup_link)==null||(e=e.meetup_link)==null?void 0:e.id;return i!=null&&j!=null&&h!=null?f({isAudioOnly:h,linkHash:j,linkId:a,linkUrl:i}):g({error:"Failed to create linkurl."})},onError:function(a){g(a)},optimisticUpdater:null,variables:{input:{client_mutation_id:"",funnel_session_id:e,link_options:{availability_settings_options:(d==null?void 0:d.linkSurface)==="MESSENGER_V2"?{join_permission:d==null?void 0:d.joinPermission,visibility_mode:(i=d==null?void 0:d.visibilityMode)!=null?i:"NONE"}:void 0,chat_mode:(i=d==null?void 0:d.chatMode)!=null?i:null,is_audio_only:(i=d==null?void 0:d.isAudioOnly)!=null?i:null,is_live_enabled:(i=d==null?void 0:d.isLiveEnabled)!=null?i:null,is_room_join_requestable:(i=d==null?void 0:d.joinRequestable)!=null?i:null,link_surface:(i=d==null?void 0:d.linkSurface)!=null?i:c("gkx")("20836")?"WORKPLACE":void 0,revocation_behavior:(i=d==null?void 0:d.revocationBehavior)!=null?i:null,should_allow_anonymous_guests:(i=d==null?void 0:d.allowAnonymousGuests)!=null?i:!0,supports_pages:(i=d==null?void 0:d.supportsPages)!=null?i:!1,supports_profile_plus:(i=d==null?void 0:d.supportsProfilePlus)!=null?i:!1,visibility_mode:(d==null?void 0:d.linkSurface)==="MESSENGER_V2"?void 0:(i=d==null?void 0:d.visibilityMode)!=null?i:"NONE"}}}})})}g["default"]=a}),98);
__d("MessengerPhoneFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{d:"M25.753 28.2c1.07-.357 1.816-1.275 2.423-2.225a2.05 2.05 0 0 0 .037-2.151 4.998 4.998 0 0 0-.723-.963 11.594 11.594 0 0 0-2.888-2.112c-.58-.299-1.272-.212-1.808.159l-2.098 1.452a.472.472 0 0 1-.437.055 11.557 11.557 0 0 1-4.045-2.63 11.554 11.554 0 0 1-2.63-4.044.472.472 0 0 1 .056-.437l1.453-2.098c.37-.536.457-1.228.158-1.807A11.587 11.587 0 0 0 13.14 8.51a4.995 4.995 0 0 0-.963-.723 2.05 2.05 0 0 0-2.15.037c-.951.607-1.87 1.353-2.225 2.424-1.174 3.527 1.187 8.461 5.338 12.613 4.152 4.151 9.086 6.512 12.614 5.338z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("RTWebDropInUtils",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";var h="drop_in_metadata";a=function(a){var b;return b={},b[h]=JSON.stringify({is_drop_in:a?"1":"0"}),b};b=function(a){a=i(a);a=a.isDropIn;return a};var i=function(a){a=a==null?void 0:a[h];if(a!=null)try{a=JSON.parse(a);return{isDropIn:a.is_drop_in==="1"}}catch(a){c("FBLogger")("rtc_www").catching(a).warn("Failed to parse drop_in_metadata app message");return{isDropIn:!1}}return{isDropIn:!1}};g.getDropInAppMessages=a;g.isDropInFromAppMessages=b}),98);
__d("RoomsLinkUtils",["ConstUriUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b;a=d("ConstUriUtils").getUri(a);var c=a==null?void 0:a.getDomain();a=a==null||(b=a.stripTrailingSlash())==null?void 0:b.getPath();if(a==null)return null;if(c==="msngr.com")return a.substring(1);var e=/^\/v(id)?\//;if(c==="m.me"&&e.test(a))return a.replace(e,"");c=/^\/groupcall\/LINK:/;return c.test(a)?a.replace(c,""):null}g.getRoomsLinkHash=a}),98);
__d("XGroupCallControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/groupcall/{?call_context}/",Object.freeze({users_to_ring:[],has_video:!0,initialize_video:!0,auto_join:!1,use_joining_context:!1,has_seen_interstitial:!1,use_dapp:!1,is_e2ee_mandated:!1,use_www:!1}),void 0);b=a;g["default"]=b}),98);
__d("ZenonCallIdentifiersUtil",["Random"],(function(a,b,c,d,e,f,g){"use strict";function a(){return String(d("Random").uint32()+1)}g.generateZenonClientSessionID=a}),98);
__d("ZenonCallWindowErrors",[],(function(a,b,c,d,e,f){"use strict";a=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.name="ZenonOpeningAnotherCallError",babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));b=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.name="ZenonConferenceNameMutationFailedError",babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));c=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.name="ZenonIncompleteControllerParamsError",babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));d=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.name="ZenonUnsupportedThreadTypeError",babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));e=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.name="ZenonCannotAcceptInviteError",babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));var g=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.name="ZenonInviteNotFoundError",babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error)),h=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.name="ZenonUninitializedError",babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));f.OpeningAnotherCallError=a;f.ConferenceNameMutationFailedError=b;f.IncompleteControllerParamsError=c;f.UnsupportedThreadTypeError=d;f.CannotAcceptInviteError=e;f.InviteNotFoundError=g;f.UninitializedError=h}),66);
__d("randomZenonNonce",["Random"],(function(a,b,c,d,e,f,g){"use strict";var h=2,i=6,j=36,k=2176782336;function a(){var a="";for(var b=0;b<h;b++){var c=Math.floor(d("Random").random()*k).toString(j);while(c.length<i)c="0"+c;a+=c}return a}g["default"]=a}),98);
__d("ZenonPreCallHookBuilderHelper",["ConstUriUtils","FBLogger","MessengerCreateVideoMeetupLinkMutation","RoomsLinkUtils","VideoChatLinksUserActionsMultiplexLogger","XGroupCallControllerRouteBuilder","ZenonActorHooks","ZenonCallIdentifiersUtil","ZenonCallWindowErrors","ZenonPeerID","ZenonSignalingProtocol","gkx","nullthrows","randomZenonNonce"],(function(a,b,c,d,e,f,g){"use strict";async function a(a,b){if(a===null)throw new(d("ZenonCallWindowErrors").UninitializedError)();var e=a.callInviteModel;a=a.callWindowController;var f=e.getCurrentInvite();if(f===null)throw new(d("ZenonCallWindowErrors").InviteNotFoundError)();if(f.type!=="ringing"||f.context.type!=="thread")throw new(d("ZenonCallWindowErrors").CannotAcceptInviteError)();var g=c("randomZenonNonce")(),h=f.context.thread;a=a.initCall({context:{controllerParams:f.controllerParams,intent:"accept invite"},hideE2eeAttributions:b,isE2eeMandated:f.isE2eeMandated,joinContext:{thread:h!=null?h:{id:"0",type:2},type:"thread"},mediaType:f.requestingVideo?"video":"audio",nonce:g,representedID:f.receiverUserId});b=a[0];h=a[1];e.accept(g,{isPopupBlocked:b===null});await h}async function b(a,b,e,f,g,h){h===void 0&&(h={allowAnonymousGuests:!c("gkx")("20836")});if(a===null)throw new(d("ZenonCallWindowErrors").UninitializedError)();j(g,e,f).setEvent("meetup_attempt_create_meetup").log();try{a=await c("MessengerCreateVideoMeetupLinkMutation")(b,h,g);b=a.linkUrl;if(b!=null){j(g,e,f).setEvent("meetup_create_success").setVideoCallLinkURLRaw(b).log();return b}else j(g,e,f).setEvent("meetup_create_failed").log();return b}catch(a){j(g,e,f).setEvent("meetup_create_failed").log();j(g,e,f).setEvent("error").setErrorType("LinkCreationError "+a.name).setErrorDetails(a.description).log();throw a}}async function e(a){var b=a.actorID,e=a.callback_users,f=a.context,g=a.forceSkipChildLobby;g=g===void 0?!1:g;var j=a.funnelSessionID;j=j===void 0?null:j;var k=a.hasVideo;k=k===void 0?!0:k;var l=a.linkUrl,m=a.referrerContext;m=m===void 0?null:m;var n=a.skipLinkUrlRewrite;n=n===void 0?!1:n;var o=a.startCallImmediately;o=o===void 0?!1:o;a=a.trigger;if(f===null)throw new(d("ZenonCallWindowErrors").UninitializedError)();var p=f.callWindowController;f=f.incomingRingSDK;var q=c("randomZenonNonce")(),r=d("ZenonCallIdentifiersUtil").generateZenonClientSessionID(),s=l;if(!n){n=(n=d("ConstUriUtils").getUri(l))==null?void 0:n.getQueryParam("funnel_session_id");l=h(l);s=i(l,o?q:null,e,n!=null?String(n):j,g,m,b,a,k)}if(s==null)return Promise.reject("An invalid URI was provided");l=p.initCall({context:{existingCall:null,intent:"start or join",invitees:[],signalingID:r},joinContext:{linkUrl:s,type:"link"},mediaType:"video",nonce:q,representedID:d("ZenonActorHooks").ZenonActor.getID()});o=l[0];e=l[1];f.startCallIntent(q,{callTrigger:a!=null?a:"meetup_join",isE2eeMandated:!1,isPopupBlocked:o===null,isVideo:k,peerID:d("ZenonPeerID").ZenonMWPeerID,protocol:c("ZenonSignalingProtocol").MW,signalingID:r});await e}async function f(a,b){var e=b.existingCall,f=b.extra,g=b.hideE2eeAttributions,h=b.invitees,i=b.isE2eeMandated,j=b.mediaType,k=b.representedID,l=b.thread;b=b.trigger;if(a===null)throw new(d("ZenonCallWindowErrors").UninitializedError)();var m=a.callWindowController;a=a.incomingRingSDK;var n=d("ZenonCallIdentifiersUtil").generateZenonClientSessionID(),o=c("randomZenonNonce")();m=m.initCall({context:{existingCall:e,intent:"start or join",invitees:h,signalingID:n},extra:f,hideE2eeAttributions:g,isE2eeMandated:i,joinContext:{thread:l,type:"thread"},mediaType:j,nonce:o,representedID:k!=null?k:d("ZenonActorHooks").ZenonActor.getID()});e=m[0];h=m[1];a.startCallIntent(o,{callTrigger:b,isE2eeMandated:i!=null?i:!1,isPopupBlocked:e===null,isVideo:j==="video",peerID:l.type===1?l.id:d("ZenonPeerID").ZenonMWPeerID,protocol:c("ZenonSignalingProtocol").MW,signalingID:n});await h}function h(a){var b=d("RoomsLinkUtils").getRoomsLinkHash(a);b==null&&c("FBLogger")("rtc_www").mustfix('Could not extract LinkHash from Video Chat Link. Link = "%s"',a);return b}function i(a,b,d,e,f,g,h,i,j){if(a==null)return"";a={call_context:"LINK:"+a,call_trigger:i!=null?i:"",has_video:j,users_to_ring:d!=null?d:[]};b!=null&&(a.nonce=b);e!=null&&(a.funnel_session_id=e);f===!0&&(a.auto_join=!0);g!=null&&(a.referrer_context=g);h!=null&&(a.av=h);return c("nullthrows")(c("XGroupCallControllerRouteBuilder").buildUri(a).getQualifiedUri()).toString()}function j(a,b,d){return new(c("VideoChatLinksUserActionsMultiplexLogger"))().setFunnelSessionIDRaw(a).setSurface(b).setComponent(d)}g.acceptCall=a;g.createMeetup=b;g.joinMeetup=e;g.startCall=f}),98);
__d("useZenonCallInvite",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useState;function a(a){var b=d("react-compiler-runtime").c(5),c;b[0]!==a?(c=function(){return a?a.getCurrentInvite():null},b[0]=a,b[1]=c):c=b[1];c=j(c);var e=c[0],f=c[1],g;b[2]!==a?(c=function(){if(a){var b=a.addListener("callInvite",f);return function(){b.remove()}}else f(null)},g=[a],b[2]=a,b[3]=c,b[4]=g):(c=b[3],g=b[4]);i(c,g);return e}g["default"]=a}),98);
__d("ZenonPreCallHookBuilder",["CometRelay","FBLogger","Promise","ZenonPreCallHookBuilderHelper","err","gkx","promiseDone","react","react-compiler-runtime","useZenonCallInvite"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");j.useCallback;var k=j.useContext,l=j.useDebugValue,m=j.useEffect,n=6e4;function a(a){function b(b){var c=d("react-compiler-runtime").c(3),e=k(a),f;c[0]!==e||c[1]!==b?(f=function(){return d("ZenonPreCallHookBuilderHelper").acceptCall(e,b)},c[0]=e,c[1]=b,c[2]=f):f=c[2];return f}return b}function e(a){function b(){var b=k(a);b=c("useZenonCallInvite")(b?b.callInviteModel:null);l(b);return b}return b}function f(a,b){return function(e,f,g){function h(){var h=d("react-compiler-runtime").c(6),i=k(a),j=e(),l=f(),m=g(),n=b(),o;h[0]!==i||h[1]!==j||h[2]!==l||h[3]!==m||h[4]!==n?(o=function(a){if(!c("gkx")("24231"))return;var b=a.existingCall,d=a.thread;if(!i||!i.incomingRingSDK.isCallSupported({threadType:d.type,type:"thread"}))m(a);else bb8:switch(d.type){case 1:c("promiseDone")(n(babelHelpers["extends"]({},a,{invitees:[d.id]})));break bb8;case 15:if(d.secureOneToOneThreadPeerId==null)throw c("err")("secureOneToOneThreadPeerId should be defined when starting a call from a secure 1:1 thread");c("promiseDone")(n(babelHelpers["extends"]({},a,{invitees:[d.secureOneToOneThreadPeerId]})));break bb8;case 2:case 16:b===null||b.call_state==="NO_ONGOING_CALL"?j(a,function(b){c("promiseDone")(n(babelHelpers["extends"]({},a,{invitees:b})))}):c("gkx")("13856")?l(a,function(){c("promiseDone")(n(babelHelpers["extends"]({},a,{invitees:[]})))}):c("promiseDone")(n(babelHelpers["extends"]({},a,{invitees:[]})));break bb8;default:c("FBLogger")("rtc_www").blameToPreviousFrame().mustfix("Attempted to start RTC call for unsupported thread type %d",d.type)}},h[0]=i,h[1]=j,h[2]=l,h[3]=m,h[4]=n,h[5]=o):o=h[5];return o}return h}}function o(a,b){function c(){var c=d("react-compiler-runtime").c(4),e=k(a),f=b(),g,h;c[0]!==e||c[1]!==f?(g=function(){if(e&&f&&f.type==="ringing"){var a=window.setTimeout(function(){e.callInviteModel.decline("NoAnswerTimeout")},n);return function(){window.clearTimeout(a)}}},h=[e,f],c[0]=e,c[1]=f,c[2]=g,c[3]=h):(g=c[2],h=c[3]);m(g,h)}return c}function p(a){function e(){var e=d("react-compiler-runtime").c(2),f=k(a),g;e[0]!==f?(g=function(a){var e=a.existingCall,g=a.extra,i=a.hideE2eeAttributions,j=a.invitees,k=a.isE2eeMandated,l=a.mediaType,m=a.representedID,n=a.thread;a=a.trigger;return!c("gkx")("24231")?(h||(h=b("Promise"))).resolve():d("ZenonPreCallHookBuilderHelper").startCall(f,{existingCall:e,extra:g,hideE2eeAttributions:i,invitees:j,isE2eeMandated:k,mediaType:l,representedID:m,thread:n,trigger:a})},e[0]=f,e[1]=g):g=e[1];return g}return e}function q(a){function e(){var e=d("react-compiler-runtime").c(3),f=k(a),g=d("CometRelay").useRelayEnvironment(),i;e[0]!==f||e[1]!==g?(i=function(a,e,i,j){return!c("gkx")("24231")?(h||(h=b("Promise"))).resolve(null):d("ZenonPreCallHookBuilderHelper").createMeetup(f,g,a,e,i,j)},e[0]=f,e[1]=g,e[2]=i):i=e[2];return i}return e}function r(a){function e(){var e=d("react-compiler-runtime").c(2),f=k(a),g;e[0]!==f?(g=function(a,e){e=e===void 0?{}:e;if(!c("gkx")("24231"))return(h||(h=b("Promise"))).resolve();e=e!=null?e:{};var g=e.actorID,i=e.callbackUsers,j=e.mediaType,k=e.referrerContext,l=e.startCallImmediately;e=e.trigger;return d("ZenonPreCallHookBuilderHelper").joinMeetup({actorID:g,callback_users:i,context:f,forceSkipChildLobby:!1,hasVideo:j!=null?j==="video":!0,linkUrl:a,referrerContext:k,startCallImmediately:l,trigger:e})},e[0]=f,e[1]=g):g=e[1];return g}return e}g.createAcceptCallCallbackHook=a;g.createCallInviteHook=e;g.createInviteAndStartCallCallbackHookFactory=f;g.createNoAnswerTimeoutHook=o;g.createStartCallCallbackHook=p;g.createCreateMeetupCallbackHook=q;g.createJoinMeetupCallbackHook=r}),98);
__d("RTWebPreCallHooks",["RTWebPreCallContext","ZenonPreCallHookBuilder"],(function(a,b,c,d,e,f,g){"use strict";e=(a=d("ZenonPreCallHookBuilder")).createAcceptCallCallbackHook(b=c("RTWebPreCallContext"));f=a.createCallInviteHook(b);d=a.createNoAnswerTimeoutHook(b,f);c=a.createStartCallCallbackHook(b);var h=a.createCreateMeetupCallbackHook(b),i=a.createJoinMeetupCallbackHook(b);a=a.createInviteAndStartCallCallbackHookFactory(b,c);g.useAcceptCallCallback=e;g.useCallInvite=f;g.useNoAnswerTimeout=d;g.useStartCallCallback=c;g.useCreateMeetupCallback=h;g.useJoinMeetupCallback=i;g.createInviteAndStartCallCallbackHook=a}),98);
__d("getRTCCallStateOfLSRTCCallState",["FBLogger","LSRtcCallState"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a===2?!0:a===8}function a(a,b){switch(a){case c("LSRtcCallState").AUDIO_1TO1_CALL:return"AUDIO_1TO1_CALL";case c("LSRtcCallState").VIDEO_1TO1_CALL:return"VIDEO_1TO1_CALL";case c("LSRtcCallState").NO_ONGOING_CALL:return"NO_ONGOING_CALL";case c("LSRtcCallState").AUDIO_GROUP_CALL:return h(b)?"AUDIO_GROUP_CALL":"AUDIO_1TO1_CALL";case c("LSRtcCallState").VIDEO_GROUP_CALL:return h(b)?"VIDEO_GROUP_CALL":"VIDEO_1TO1_CALL";default:c("FBLogger")("messenger_web_calling").mustfix("Unknown RTCCallState: %sL and threadType %sL",a,b);return"NO_ONGOING_CALL"}}g["default"]=a}),98);
__d("useGroupCallBlockedUserWarningInterstitial",["I64","JSResourceForInteraction","MAWMiActMappingTableAPI","Promise","ReQL","WAJids","nullthrows","react","react-compiler-runtime","useBlockedUserInterstitial","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;(k||d("react")).useCallback;var l=function(a,c,e){return c===!0?a.runInTransaction(function(a){return d("MAWMiActMappingTableAPI").getThreadKeyForChatJid(a,d("WAJids").unsafeCoerceToChatJid(e+"@g.us"))},"readonly",void 0,void 0,f.id+":41"):(i||(i=b("Promise"))).resolve((j||(j=d("I64"))).of_string(e))};function m(a,b,e){return d("useBlockedUserInterstitial").getBlockedUserQuery(a,b,c("nullthrows")(e)).then(function(a){return a==null?[]:d("ReQL").toArrayAsync(a).then(function(a){return a})})}function a(){var a=d("react-compiler-runtime").c(6),b=(h||(h=c("useReStore")))(),e;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=c("JSResourceForInteraction")("MWReceivedGroupCallBlockedUserInGroupInterstitialDialog.react").__setRef("useGroupCallBlockedUserWarningInterstitial"),a[0]=e):e=a[0];e=c("useMWXLazyDialog")(e);var f=e[0];a[1]===Symbol["for"]("react.memo_cache_sentinel")?(e=c("JSResourceForInteraction")("MWGroupCallBlockedUserInGroupInterstitialDialog.react").__setRef("useGroupCallBlockedUserWarningInterstitial"),a[1]=e):e=a[1];e=c("useMWXLazyDialog")(e);var g=e[0];a[2]!==b||a[3]!==g||a[4]!==f?(e=function(a){var d=a.callType,e=a.isE2eeMandated,h=a.onContinue,i=a.threadID,j=a.threadType;l(b,e,i).then(function(a){return a==null?h():m(b,a,c("nullthrows")(j)).then(function(b){if(b.length===0)return h();d==="start"?g({blockedUsers:b,onContinue:h,threadKey:a}):f({blockedUsers:b,onContinue:h,threadKey:a})})})},a[2]=b,a[3]=g,a[4]=f,a[5]=e):e=a[5];return e}g.fetchThreadKeyFromID=l;g.getBlockedUsers=m;g.useGroupCallBlockedUserWarningInterstitial=a}),98);
__d("useRTWebOutgoingGroupCallDialog",["JSResourceForInteraction","react","react-compiler-runtime","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.useRef,j=c("JSResourceForInteraction")("RTWebCometOutgoingGroupCallContentLS.react").__setRef("useRTWebOutgoingGroupCallDialog");function a(){var a=d("react-compiler-runtime").c(2),b=i(!1),e=c("useMWXLazyDialog")(j),f=e[0];a[0]!==f?(e=function(a){b.current||(b.current=!0,f(a,function(){b.current=!1}))},a[0]=f,a[1]=e):e=a[1];return e}g["default"]=a}),98);
__d("useRTWebOutgoingUnsupportedBrowserDialog",["JSResourceForInteraction","react","react-compiler-runtime","useCometLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;var i=c("JSResourceForInteraction")("RTWebOutgoingUnsupportedBrowserDialogWrapper.react").__setRef("useRTWebOutgoingUnsupportedBrowserDialog");function a(){var a=d("react-compiler-runtime").c(2),b=c("useCometLazyDialog")(i),e=b[0];a[0]!==e?(b=function(a){e(a)},a[0]=e,a[1]=b):b=a[1];return b}g["default"]=a}),98);
__d("useRTWebCometStartCallCallback",["Actor","I64","RTWebPreCallHooks","nullthrows","react","react-compiler-runtime","useGroupCallBlockedUserWarningInterstitial","useRTWebOutgoingGroupCallDialog","useRTWebOutgoingUnsupportedBrowserDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(h||d("react")).useCallback;f=d("RTWebPreCallHooks").createInviteAndStartCallCallbackHook(a,b,e);function a(){var a=d("react-compiler-runtime").c(3),b=d("Actor").useActor(),e=b[0],f=c("useRTWebOutgoingGroupCallDialog")();a[0]!==f||a[1]!==e?(b=function(a,b){var c=a.isE2eeMandated,d=a.thread;a=a.trigger;var g=d.id;d=d.type;f({isE2eeMandated:c,onCall:b,threadID:g,threadType:d,trigger:a,viewer:e})},a[0]=f,a[1]=e,a[2]=b):b=a[2];return b}function b(){var a=d("react-compiler-runtime").c(2),b=d("useGroupCallBlockedUserWarningInterstitial").useGroupCallBlockedUserWarningInterstitial(),e;a[0]!==b?(e=function(a,e){var f=a.isE2eeMandated;a=a.thread;var g=a.id;a=a.type;b({callType:"start",isE2eeMandated:f,onContinue:e,threadID:g,threadType:(i||(i=d("I64"))).of_int32(c("nullthrows")(a))})},a[0]=b,a[1]=e):e=a[1];return e}function e(){var a=d("react-compiler-runtime").c(3),b=d("Actor").useActor(),e=b[0],f=c("useRTWebOutgoingUnsupportedBrowserDialog")();a[0]!==e||a[1]!==f?(b=function(a){a=a.thread;var b=a.id;a=a.type;f({actorID:e,threadID:b,threadType:a})},a[0]=e,a[1]=f,a[2]=b):b=a[2];return b}g["default"]=f}),98);/*FB_PKG_DELIM*/
__d("FtsFetchEbMessagesEndFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("6752");b=d("FalcoLoggerInternal").create("fts_fetch_eb_messages_end",a);e=b;g["default"]=e}),98);
__d("FtsFetchEbMessagesPageEndFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("6753");b=d("FalcoLoggerInternal").create("fts_fetch_eb_messages_page_end",a);e=b;g["default"]=e}),98);
__d("FtsFetchEbMessagesPageStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("6754");b=d("FalcoLoggerInternal").create("fts_fetch_eb_messages_page_start",a);e=b;g["default"]=e}),98);
__d("FtsFetchEbMessagesStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("6755");b=d("FalcoLoggerInternal").create("fts_fetch_eb_messages_start",a);e=b;g["default"]=e}),98);
__d("FtsFetchOccamThreadsEndFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("6776");b=d("FalcoLoggerInternal").create("fts_fetch_occam_threads_end",a);e=b;g["default"]=e}),98);
__d("FtsFetchOccamThreadsPageEndFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("6777");b=d("FalcoLoggerInternal").create("fts_fetch_occam_threads_page_end",a);e=b;g["default"]=e}),98);
__d("FtsFetchOccamThreadsPageStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("6778");b=d("FalcoLoggerInternal").create("fts_fetch_occam_threads_page_start",a);e=b;g["default"]=e}),98);
__d("FtsFetchOccamThreadsStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("6779");b=d("FalcoLoggerInternal").create("fts_fetch_occam_threads_start",a);e=b;g["default"]=e}),98);
__d("LSFetchFtsThreads",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("timestamp",a[0]),d[0].set("session_id",a[1]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"fts_thread_fetch",c.i64.cast([0,760]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSFTSThreadsFetchFtsThreadsStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSFetchFtsThreadsStoredProcedure",["LSFetchFtsThreads","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSFetchFtsThreads"),e.timestamp,e.sessionId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSIssueFetchAndIndexMessageRangeTask",["LSArrayGetObjectAt","LSBase64Encode.nop","LSIsEncryptionVersionSecure","LSIssueNewTask","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsIssueFetchAndIndexMessageRangeTaskStoredProcedure] Beginning execution."),c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[13]=new c.Map(),d[13].set("error_msg","Expected a nonempty query result"),d[13].set("code",c.i64.cast([0,3])),d[13].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[14]=c.createArray(),d[15]=(d[14].push(d[13]),d[14]),e=[void 0,d[14]],d[1]=e[0],d[2]=e[1]):(b=a.item,d[13]=new c.Map(),d[13].set("backup_id",b.backupId),d[13].set("device_public_key_blob",b.devicePublicKeyBlob),d[13].set("device_private_key_blob",b.devicePrivateKeyBlob),d[13].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[13].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[13].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[13].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[13].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[13].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[13].set("orf_client_state_v2_blob",void 0),d[13].set("orf_v2_authority_level",void 0),d[13].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[13].set("device_id",b.deviceId),d[13].set("backup_tenancy",b.backupTenancy),d[13].set("encryption_version",b.encryptionVersion),d[13].set("revision_version",b.revisionVersion),d[13].set("initialize_restore_result",void 0),d[13].set("device_creation_timestamp_sec",void 0),d[13].set("authority_level",b.authorityLevel),e=[d[13],void 0],d[1]=e[0],d[2]=e[1])})},function(e){return d[4]=new c.Map(),d[4].set("value",d[1]),d[4].set("errors",d[2]),d[5]=d[4].get("value"),d[5]!==void 0?c.sequence([function(e){return d[13]=d[5].get("backup_id"),d[14]=d[5].get("device_public_key_blob"),d[15]=d[5].get("device_private_key_blob"),d[16]=d[5].get("epoch_storage_public_key_blob"),d[17]=d[5].get("epoch_storage_private_key_blob"),d[18]=d[5].get("epoch_auth_public_key_blob"),d[19]=d[5].get("epoch_auth_private_key_blob"),d[20]=d[5].get("mailbox_root_key_blob"),d[21]=d[5].get("ocmf_client_state_blob"),d[22]=d[5].get("orf_client_state_v2_blob"),d[23]=d[5].get("orf_v2_authority_level"),d[24]=d[5].get("oblivious_validation_token_blob"),d[25]=d[5].get("device_id"),d[26]=d[5].get("backup_tenancy"),d[27]=d[5].get("encryption_version"),d[28]=d[5].get("revision_version"),d[29]=d[5].get("initialize_restore_result"),d[30]=d[5].get("device_creation_timestamp_sec"),d[31]=d[5].get("authority_level"),c.i64.neq(d[25],void 0)?c.sequence([function(a){return d[33]=void 0,c.i64.neq(d[33],void 0)?c.resolve(d[34]=d[33]):c.sequence([function(a){return d[53]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[54]=a[0],a})},function(a){return d[54]?d[63]=(d[53].push(c.i64.cast([0,0])),d[53]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[55]=a[0],a})},function(a){return d[55]?d[63]=(d[53].push(c.i64.cast([0,2])),d[53]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[56]=a[0],a})},function(a){return d[56]?d[63]=(d[53].push(c.i64.cast([0,3])),d[53]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[57]=a[0],a})},function(a){return d[57]?d[63]=(d[53].push(c.i64.cast([0,4])),d[53]):0,d[58]=c.createArray(),d[59]=c.i64.of_int32(d[53].length),c.i64.gt(d[59],c.i64.cast([0,0]))?c.loopAsync(d[59],function(a){return d[63]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[53],d[63]).then(function(a){return a=a,d[64]=a[0],d[65]=a[1],a})},function(a){return d[66]=(d[58].push(d[64]),d[58])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[63]=c.createArray(),d[64]=c.i64.of_int32(d[58].length),c.i64.gt(d[64],c.i64.cast([0,0]))?c.loopAsync(d[64],function(a){return d[66]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[58],d[66]).then(function(a){return a=a,d[67]=a[0],d[68]=a[1],a})},function(a){return d[69]=(d[63].push(c.i64.to_string(d[67])),d[63])}])}):c.resolve()},function(a){return d[65]=d[63].join(","),d[60]=d[65]}])},function(a){return d[58].some(function(a){return c.i64.eq(d[27],a)})?d[61]=d[27]:d[61]=void 0,c.i64.neq(d[61],void 0)?d[62]=d[61]:d[62]=void 0,d[34]=d[62]}])},function(a){return c.i64.neq(d[34],void 0)?d[35]=d[34]:d[35]=c.i64.cast([0,0]),c.i64.neq(d[26],void 0)?d[36]=d[26]:d[36]=c.i64.cast([0,1]),c.i64.eq(d[36],c.i64.cast([0,3]))?d[37]=c.i64.cast([0,4]):d[37]=c.i64.cast([0,0]),c.nativeOperation(b("LSBase64Encode.nop"),d[21]).then(function(a){return a=a,d[38]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[20]).then(function(a){return a=a,d[39]=a[0],a})},function(a){return d[40]=new c.Map(),d[40].set("ocmf_client_state_blob",d[38]==null?"":d[38]),d[40].set("mailbox_root_key",d[39]==null?"":d[39]),d[41]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[53]=(d[41].push(a.epochId),d[41])})},function(a){return d[51]="Queried locally available epochs. Count: ",d[42]=c.i64.of_int32(d[41].length),d[52]=c.i64.to_string(d[42]),d[43]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBEpochClientUtils] ",d[43],d[51],d[43],d[52]].join("")),c.resolve()},function(e){return d[44]=new c.Map(),d[44].set("device_id",d[25]),d[44].set("raw_tokens",d[40]),d[44].set("locally_available_epochs",d[41]),d[45]=new c.Map(),d[45].set("act_thread_id",a[0]),d[45].set("request_id",a[3]),d[45].set("tam_thread_subtype",d[37]),d[45].set("source",c.i64.cast([0,43])),d[46]=new c.Map(),d[46].set("reference_timestamp",a[2]),d[46].set("direction",c.i64.cast([0,1])),d[46].set("server_thread_key",void 0),d[46].set("device_context",d[44]),d[46].set("source",c.i64.cast([0,43])),d[47]=new c.Map(),d[47].set("restore_context",d[45]),d[47].set("success",d[46]),d[48]=d[47].get("queue_name"),d[48]!==void 0?d[49]=d[48]:(d[53]=d[47].get("restore_context"),d[54]=d[53].get("act_thread_id"),d[49]=["encrypted_backups_restore",":",d[54]].join("")),d[50]=c.toJSON(d[47]),c.storedProcedure(b("LSIssueNewTask"),d[49],c.i64.cast([0,50030]),d[50],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return d[32]=!0}]):c.sequence([function(e){return d[33]=new c.Map(),d[33].set("error_code",c.i64.cast([0,1])),d[33].set("error_message",void 0==null?"":void 0),d[33].set("stored_procedure","issueFetchAndIndexMessageRangeTask"),d[34]=new c.Map(),d[34].set("act_thread_id",a[0]),d[34].set("source",c.i64.cast([0,43])),d[34].set("restore_operation_type",c.i64.cast([0,2])),d[34].set("request_id",void 0),d[34].set("device_id",void 0),d[35]=new c.Map(),d[35].set("restore_context",d[34]),d[35].set("failure",d[33]),d[36]=d[35].get("queue_name"),d[36]!==void 0?d[37]=d[36]:(d[40]=d[35].get("restore_context"),d[41]=d[40].get("act_thread_id"),d[37]=["encrypted_backups_restore",":",d[41]].join("")),d[38]=c.toJSON(d[35]),c.storedProcedure(b("LSIssueNewTask"),d[37],c.i64.cast([0,50030]),d[38],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return d[39]="backup not found",d[39]!==void 0?(function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueFetchAndIndexMessageRangeTaskStoredProcedure] ","",d[39]].join("")),d[40]=c.createArray(),void 0!==void 0?d[41]=(d[40].push(void 0),d[40]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueFetchAndIndexMessageRangeTaskStoredProcedure",d[39],d[40],c.i64.cast([0,3]))):c.resolve()},function(a){return d[32]=!1}])},function(a){return d[6]=d[32]}]):c.sequence([function(e){return d[13]=d[4].get("errors"),d[14]=d[4].get("errors"),d[15]=new c.Map(),d[15].set("error_code",c.i64.cast([0,1])),d[15].set("error_message",void 0==null?"":void 0),d[15].set("stored_procedure","issueFetchAndIndexMessageRangeTask"),d[16]=new c.Map(),d[16].set("act_thread_id",a[0]),d[16].set("source",c.i64.cast([0,43])),d[16].set("restore_operation_type",c.i64.cast([0,2])),d[16].set("request_id",void 0),d[16].set("device_id",void 0),d[17]=new c.Map(),d[17].set("restore_context",d[16]),d[17].set("failure",d[15]),d[18]=d[17].get("queue_name"),d[18]!==void 0?d[19]=d[18]:(d[22]=d[17].get("restore_context"),d[23]=d[22].get("act_thread_id"),d[19]=["encrypted_backups_restore",":",d[23]].join("")),d[20]=c.toJSON(d[17]),c.storedProcedure(b("LSIssueNewTask"),d[19],c.i64.cast([0,50030]),d[20],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return d[21]="backup not found",d[21]!==void 0?(function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueFetchAndIndexMessageRangeTaskStoredProcedure] ","",d[21]].join("")),d[22]=c.createArray(),void 0!==void 0?d[23]=(d[22].push(void 0),d[22]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueFetchAndIndexMessageRangeTaskStoredProcedure",d[21],d[22],c.i64.cast([0,3]))):c.resolve()},function(a){return d[6]=!1}])},function(a){return d[7]=c.i64.of_float(Date.now()),d[8]=c.i64.random(),d[10]="Finishing execution. Execution time: ",d[11]=c.i64.to_string(c.i64.sub(d[7],d[0])),d[12]=" ms",d[9]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueFetchAndIndexMessageRangeTaskStoredProcedure] ",d[9],d[10],d[9],d[11],d[9],d[12]].join("")),c.i64.eq(c.i64.mod_(d[8],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[13]=",",d[14]=c.createArray(),void 0!==void 0?d[15]=(d[14].push(void 0),d[14]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueFetchAndIndexMessageRangeTaskStoredProcedure",[d[10],d[13],d[11],d[13],d[12]].join(""),d[14],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsIssueFetchAndIndexMessageRangeTaskStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs"];e.exports=a}),null);
__d("LSIssueFetchAndIndexMessageRangeTaskStoredProcedure",["LSIssueFetchAndIndexMessageRangeTask","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSIssueFetchAndIndexMessageRangeTask"),e.threadId,e.numMessages,e.startSortKey,e.traceId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MWEncryptedBackUpEBNotEnabledError",[],(function(a,b,c,d,e,f){"use strict";a="EB not enabled";f.EB_NOT_ENABLED=a}),66);
__d("MAWFTSEncryptedBackupLightweightRestore",["EBIsEbEnabled","LSFactory","LSIssueFetchAndIndexMessageRangeTaskStoredProcedure","LSMEBTaskCreationSource","MAWAsyncEBPendingQueryPromise","MAWBridgeSendAndReceive","MAWEBRestoreTrackingUtils","MAWMainTraceUtils","MAWMpsGating","MWEncryptedBackUpEBNotEnabledError","Promise","emptyFunction","err","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e,f,g,j,k){j===void 0&&(j=c("emptyFunction"));if(!c("gkx")("23914"))return null;var l=d("MAWMainTraceUtils").createTraceId();c("promiseDone")(d("EBIsEbEnabled").isEbEnabledLS(a.tables).then(function(m){if(!m){d("MAWAsyncEBPendingQueryPromise").rejectPendingQueryIfPresent(l,c("err")(d("MWEncryptedBackUpEBNotEnabledError").EB_NOT_ENABLED));return(h||(h=b("Promise"))).resolve()}return i(l,a,e,f,g,j,k)}));return l}function i(a,e,g,i,j,k,l){k===void 0&&(k=c("emptyFunction"));k();return c("gkx")("5431")||d("MAWMpsGating").isFullMpsEnabled()?d("MAWBridgeSendAndReceive").sendAndReceive("backend","issueGraphQLRangeRestoreRequest",{chatJid:l,direction:"before",sortOrderMs:i!=null?i:void 0,source:c("LSMEBTaskCreationSource").FTS_INDEX_EB_MESSAGES_WEB,threadId:g,traceId:a}).then(function(e){if(e.loadMessagesResponse!=null)d("MAWAsyncEBPendingQueryPromise").resolvePendingQueryIfPresent(a,e.loadMessagesResponse);else{d("MAWAsyncEBPendingQueryPromise").rejectPendingQueryIfPresent(a,c("err")((e=e.error)!=null?e:"Error restoring from EB over graphQL in worker"))}return(h||(h=b("Promise"))).resolve()}):e.runInTransaction(function(b){d("MAWEBRestoreTrackingUtils").markEBRestoreSearch({querySource:"LS",traceId:a});return c("LSIssueFetchAndIndexMessageRangeTaskStoredProcedure")(c("LSFactory")(b),{numMessages:j,startSortKey:i==null?void 0:i,threadId:g,traceId:a})},"readwrite",void 0,void 0,f.id+":108")}g.runQuery=a}),98);
__d("MAWAsyncEBIssueFetchAndIndexFTSQuery",["I64","MAWAsyncEBPendingQueryPromise","MAWEBUnstoredDbMsgUtils","MAWFTSEncryptedBackupLightweightRestore","MAWJobDefinitions","MAWMpsGating","MAWUserJidWrapper","MpsOverBridge","MpsTypes","WAJids","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e,f,g,i){g===void 0&&(g=function(){});var j=d("WAJids").threadIdForChatJid(b);if(d("MAWMpsGating").isSearchOnMpsEnabled()||d("MAWMpsGating").isFullMpsEnabled()){var k=e==null?Date.now()+6e4:Number(e);g();return d("MpsOverBridge").mps().loadMessages({config:{persistToReverb:"no-persist",shouldFetchSupplementals:!1,shouldFetchTags:!1,shouldIgnoreLocalOnly:!0,strategy:"remote-only"},debug:{purpose:"MAWAsyncEBIssueFetchAndIndexFTSQuery_"+i},direction:"desc",from:[d("MpsTypes").toTimestamp(k),null],numMessages:(h||(h=d("I64"))).to_int32(f),threadId:d("MpsTypes").toThreadId(b)}).then(function(a){var e;if(a.success===!1)throw a.payload||c("err")(a.error);var f=a.value.messages.map(d("MAWJobDefinitions").mpsMessageToEncryptedBackupsMessage);e=a.value.cursorInfo.hasNext?(e=a.value.cursorInfo.endCursor)==null?void 0:e[0]:0;return{echoMessages:[],hasMoreAfter:a.value.cursorInfo.hasPrevious,hasMoreBefore:a.value.cursorInfo.hasNext,isPointQuery:!1,messages:d("MAWEBUnstoredDbMsgUtils").getUnstoredDbMsgFromProtobuf(f,void 0,b,d("MAWUserJidWrapper").getMyUserJid()),nextMessageTimestampMsBefore:e==null?void 0:(h||(h=d("I64"))).of_float(e),protobufMessages:f,referenceTimestamp:k.toString(),requestId:void 0,restoreType:"protobuf",threadId:j}})}i=d("MAWFTSEncryptedBackupLightweightRestore").runQuery(a,j,e,f,g,b);if(i==null)return null;d("MAWAsyncEBPendingQueryPromise").setJidFromThreadId(j,b);return d("MAWAsyncEBPendingQueryPromise").getPendingQueryPromiseFromTrace(i)}g.issueQueryAsPromise=a}),98);
__d("MAWMediaGalleryBufferAndRestore",[],(function(a,b,c,d,e,f){"use strict";var g=null,h=[],i=[],j=[],k=null,l=2e3,m=10;function a(a,b,c,d,e,f,n,o,p,q){q==null||q.addPoint("buffer_and_restore_protobuf_start");var r=function(){h=h.concat(b),i=i.concat(c!=null?c:[]),q!=null&&j.push(q),h.length>=m?(j.forEach(function(a){return a.addPoint("buffer_and_restore_protobuf_end",{string:{reason:"max_buffer_size"}})}),void p(a,h,i,d,e,f,n,o,j),h=[],i=[],j=[]):k=window.setTimeout(function(){var b=[].concat(h),c=[].concat(i),g=[].concat(j);g.forEach(function(a){return a.addPoint("buffer_and_restore_protobuf_end",{string:{reason:"timeout"}})});void p(a,b,c,d,e,f,n,o,g);h=[];i=[];j=[]},l)},s=function(){window.clearTimeout(k);var a=h.map(function(a){return a}),b=i.map(function(a){return a}),c=[].concat(j),l=g;l!=null&&(c.forEach(function(a){return a.addPoint("buffer_and_restore_protobuf_end",{string:{reason:"immediately"}})}),void p(l,a,b,d,e,f,n,o,c));h=[];i=[];j=[]};if(a!==g){s();g=a;r();return}h.length===0?r():(h=h.concat(b),i=i.concat(c!=null?c:[]),q!=null&&j.push(q),h.length>=m&&s())}f.bufferAndRestoreProtobuf=a}),66);
__d("MWMediaRestoreStatus",["I64","LSDatabaseSingleton","MAWChatJid"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j={mediaCount:0,messageCount:0,threadId:(h||(h=d("I64"))).zero};async function a(a,b,c){var e=await (i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton;e=await e.runInTransaction(function(b){return d("MAWChatJid").toThreadKeyMaybeForChatJidInteger(b,(h||(h=d("I64"))).of_string(a))},"readwrite",void 0,void 0,f.id+":35");j.threadId===e?(j.messageCount+=b,j.mediaCount+=c):(j.messageCount=b,j.mediaCount=c,j.threadId=e!=null?e:(h||(h=d("I64"))).zero)}function b(){return j}g.updateRestoreStatus=a;g.getRestoreStatus=b}),98);
__d("MAWMediaGalleryRestoreSync",["CurrentUser","EchoMessage","EchoMessageMediaFieldUtils","I64","LSDatabaseSingleton","LSIntEnum","LSMEBTaskCreationSource","LSThreadMediaGalleryGroup","MAWChatJid","MAWFTSRestoreSync","MAWHandleEchoProtobufsRestoreApi","MAWJids","MAWJobDefinitions","MAWMediaGalleryBufferAndRestore","MAWMediaGalleryEBTaggingUtils","MAWRestoreMessagesFromEncryptedBackupsDeferred","MAWRestoreProtobufsFromEncryptedBackupsDeferred","MWMediaRestoreStatus","ReQL","WAJobOrchestratorTypes","WALogger","WAMsgType","justknobx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p;async function a(a,b){var e=a.echoMessages,g=a.hasMoreAfter,p=a.hasMoreBefore,r=a.isPointQuery,s=a.protobufMessages,t=a.referenceTimestamp,u=a.requestId,v=a.restoreType,w=a.threadId;if(w==null){b==null||b.endFail("threadId is null");d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["MediaRestore: threadId is null"])));return}b==null||b.addAnnotations({string:{restore_type:v}});b==null||b.addPoint("handle_media_restore_sync_start");var x=!d("MAWMediaGalleryEBTaggingUtils").isMediaGalleryEBTaggingRestoreEnabled();if(v==="echo"){var y;if(e==null){b==null||b.endFail("echoMessages is null");d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["MediaRestore: echoMessages is null"])));return}b==null||b.addPoint("messages_decoding_and_filtering_start");a=e.filter(function(a){var b;a=d("EchoMessage").decodeEchoMessage(a);return x?(a==null?void 0:a.contentType)===d("EchoMessage").EchoMessageContentType.MEDIA:(a==null||(b=a.mediaData)==null?void 0:b.attachmentType)===d("EchoMessageMediaFieldUtils").AttachmentType.DOCUMENT});b==null||b.addPoint("messages_decoding_and_filtering_end");a.length>0&&d("MAWFTSRestoreSync").MAWGalleryEventEmitter.emit("isPersisting",!0);b==null||b.addAnnotations({int:{media_count:a.length,message_count:e.length}});b==null||b.addPoint("update_media_restore_status_start");await d("MWMediaRestoreStatus").updateRestoreStatus(w,e.length,a.length);b==null||b.addPoint("update_media_restore_status_end");b==null||b.addPoint("restore_messages_in_worker_start",{int:{echo_msg_count:(y=e==null?void 0:e.length)!=null?y:0,protobuf_msg_count:a.length}});c("promiseDone")(d("MAWRestoreMessagesFromEncryptedBackupsDeferred").call("AdvancedCrypto",d("MAWJobDefinitions").toThreadJidPrimaryId(w),a.map(d("MAWJobDefinitions").toEncodedEchoMessage),p,void 0,g,void 0,r,u,t,c("LSMEBTaskCreationSource").MEDIA_GALLERY_RESTORE,d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW).catch(function(a){b==null||b.endFail(a),d("WALogger").ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["MediaRestore Echo error: ",""])),a)}),function(){b==null||b.addPoint("restore_messages_in_worker_end"),b==null||b.addPoint("restore_messages_update_ranges_start"),c("promiseDone")((n||(n=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(async function(a){b==null||b.addPoint("update_range_get_thread_key_start");var e=await a.runInTransaction(function(a){return d("MAWChatJid").toThreadKeyMaybeForChatJidInteger(a,(o||(o=d("I64"))).of_string(w))},"readonly",void 0,void 0,f.id+":152");b==null||b.addPoint("update_range_get_thread_key_end");if(e==null){b==null||b.addPoint("restore_messages_update_ranges_end",{bool:{is_updated:!1}});return}return Promise.all([q(a,e,c("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS),q(a,e,c("LSThreadMediaGalleryGroup").FILES_ONLY)])}).then(function(){d("MAWFTSRestoreSync").MAWGalleryEventEmitter.emit("isPersisting",!1),b==null||b.addPoint("restore_messages_update_ranges_end",{bool:{is_updated:!0}}),b==null||b.addPoint("handle_media_restore_sync_end"),b==null||b.endSuccess()}))})}else if(v==="protobuf"){if(s==null){b==null||b.endFail("protobufMessages is null");d("WALogger").ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["MediaRestore: protobufMessages is null"])));return}b==null||b.addPoint("get_user_jid_start");var z=d("MAWJids").toUserJid(c("CurrentUser").getAccountID());b==null||b.addPoint("get_user_jid_end");b==null||b.addPoint("messages_decoding_and_filtering_start");y=s.filter(function(a){a=d("MAWHandleEchoProtobufsRestoreApi").decodeDecryptedMessageProtobuf(a,z,void 0,new Set(),new Set(),new Map(),new Map(),new Map(),!0);return x&&[d("WAMsgType").MSG_TYPE.IMAGE,d("WAMsgType").MSG_TYPE.VIDEO].includes(a.msgType)||a.msgType===d("WAMsgType").MSG_TYPE.DOCUMENT_FILE});b==null||b.addPoint("messages_decoding_and_filtering_end");y.length>0&&d("MAWFTSRestoreSync").MAWGalleryEventEmitter.emit("isPersisting",!0);b==null||b.addAnnotations({int:{media_count:y.length,message_count:s.length}});b==null||b.addPoint("update_media_restore_status_start");await d("MWMediaRestoreStatus").updateRestoreStatus(w,s.length,y.length);b==null||b.addPoint("update_media_restore_status_end");a=function(a,b,e,g,h,i,j,k,m){var p;if(((p=e==null?void 0:e.length)!=null?p:0)===0&&b.length===0){m.forEach(function(a){a.addPoint("restore_messages_in_worker_skipped"),a.endSuccess()});return}m.forEach(function(a){return a.addPoint("restore_messages_in_worker_start",{int:{echo_msg_count:(a=e==null?void 0:e.length)!=null?a:0,protobuf_msg_count:b.length}})});c("promiseDone")(d("MAWRestoreProtobufsFromEncryptedBackupsDeferred").call("AdvancedCrypto",d("MAWJobDefinitions").toThreadJidPrimaryId(a),b,g,void 0,h,void 0,i,j,k,void 0,e,(o||(o=d("I64"))).of_int32(c("LSMEBTaskCreationSource").MEDIA_GALLERY_RESTORE),c("justknobx")._("3213")?d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION,void 0).catch(function(a){m.forEach(function(b){return b.endFail(a)}),d("WALogger").ERROR(l||(l=babelHelpers.taggedTemplateLiteralLoose(["MediaRestore Protobuf error: ",""])),a)}),function(){m.forEach(function(a){return a.addPoint("restore_messages_in_worker_end")}),m.forEach(function(a){return a.addPoint("restore_messages_update_ranges_start")}),c("promiseDone")((n||(n=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(async function(a){m.forEach(function(a){return a.addPoint("update_range_get_thread_key_start")});var b=await a.runInTransaction(function(a){return d("MAWChatJid").toThreadKeyMaybeForChatJidInteger(a,(o||(o=d("I64"))).of_string(w))},"readonly",void 0,void 0,f.id+":315");m.forEach(function(a){return a.addPoint("update_range_get_thread_key_end")});if(b==null){m.forEach(function(a){return a.addPoint("restore_messages_update_ranges_end",{bool:{is_updated:!1}})});return}return Promise.all([q(a,b,c("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS),q(a,b,c("LSThreadMediaGalleryGroup").FILES_ONLY)])}).then(function(){d("MAWFTSRestoreSync").MAWGalleryEventEmitter.emit("isPersisting",!1),m.forEach(function(a){return a.addPoint("restore_messages_update_ranges_end",{bool:{is_updated:!0}})}),m.forEach(function(a){return a.addPoint("handle_media_restore_sync_end")}),m.forEach(function(a){return a.endSuccess()})}))})};d("MAWMediaGalleryBufferAndRestore").bufferAndRestoreProtobuf(w,y,e,p,g,r,u,t,a,b)}else b==null||b.endFail("RestoreType is none"),d("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["MediaRestore RestoreType is none"])))}function q(a,b,c){return d("MAWMediaGalleryEBTaggingUtils").isMediaGalleryEBTaggingRestoreEnabled()&&d("MAWMediaGalleryEBTaggingUtils").isMediaGalleryGroupSupportedForTaggedRestore(c)?Promise.resolve():a.runInTransaction(async function(e){var f=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.attachments_ranges_v2__generated).getKeyRange(b).filter(function(a){return(o||(o=d("I64"))).equal(a.mediaGroup,(p||(p=d("LSIntEnum"))).ofNumber(c))}));if(f==null||(f==null?void 0:f.hasMoreBefore)===!0)return;var g=babelHelpers.extends({},f,{hasMoreBefore:!0});return e.attachments_ranges_v2__generated.upsert([f.threadKey,f.mediaGroup,f.minTimestampMs],g)},"readwrite","ui",void 0,f.id+":396")}g.handleMediaRestoreSync=a}),98);
__d("MAWFTSRestoreSyncLogger",["FtsFetchEbMessagesEndFalcoEvent","FtsFetchEbMessagesPageEndFalcoEvent","FtsFetchEbMessagesPageStartFalcoEvent","FtsFetchEbMessagesStartFalcoEvent","FtsFetchOccamThreadsEndFalcoEvent","FtsFetchOccamThreadsPageEndFalcoEvent","FtsFetchOccamThreadsPageStartFalcoEvent","FtsFetchOccamThreadsStartFalcoEvent","MAWBridgeSendAndReceive"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set(),i=new Set(),j=null,k=!1,l=0,m=0;async function a(){if(j!=null&&j!=="")return;j=await d("MAWBridgeSendAndReceive").sendAndReceive("backend","searchGetFTSRestoreSessionId")}function b(a,b,d){if(!b||i.has(a)){i.add(a);return}h.has(a)||(h.add(a),d&&c("FtsFetchEbMessagesStartFalcoEvent").log(function(){return{app_name:"",session_id:j!=null?j:""}}));c("FtsFetchEbMessagesPageStartFalcoEvent").log(function(){return{app_name:"",session_id:j!=null?j:""}})}function e(a,b,d){if(i.has(a)||!h.has(a))return;c("FtsFetchEbMessagesPageEndFalcoEvent").log(function(){return{app_name:"",messages_count:b.toString(),session_id:j!=null?j:""}});d||(i.add(a),c("FtsFetchEbMessagesEndFalcoEvent").log(function(){return{app_name:"",duration:0,session_id:j!=null?j:"",total_messages_count:"0"}}))}function f(a){if(i.has(a)||!h.has(a))return;c("FtsFetchEbMessagesPageEndFalcoEvent").log(function(){return{app_name:"",messages_count:"0",session_id:j!=null?j:""}})}function n(){c("FtsFetchOccamThreadsEndFalcoEvent").log(function(){return{app_name:"",duration:0,remaining_threads_count:m.toString(),session_id:j!=null?j:"",total_threads_count:l.toString()}})}function o(){k||(k=!0,c("FtsFetchOccamThreadsStartFalcoEvent").log(function(){return{app_name:"",session_id:j!=null?j:""}})),c("FtsFetchOccamThreadsPageStartFalcoEvent").log(function(){return{app_name:"",session_id:j!=null?j:""}})}function p(a){c("FtsFetchOccamThreadsPageEndFalcoEvent").log(function(){return{app_name:"",session_id:j!=null?j:"",thread_count:a.toString()}})}function q(a){l++,a||m++}g.initLoggingSessionId=a;g.onFetchMessagePageStart=b;g.onFetchMessagePageComplete=e;g.onFetchMessagePageFailed=f;g.onFetchThreadsComplete=n;g.onFetchThreadsPageStart=o;g.onFetchThreadsPageComplete=p;g.incrementTotalResultCount=q}),98);
__d("MWMediaRestoreQplUtils",["QPLFlow","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=18e4;function a(){var a=c("qpl")._(25304794,"2287");return d("QPLFlow").startQPLFlow(a,{timeoutInMs:h})}function b(){var a=c("qpl")._(25306381,"2492");return d("QPLFlow").startQPLFlow(a,{timeoutInMs:h})}g.startMediaRestoreBatchQPLFlow=a;g.startMediaRestoreLoadAllQPLFlow=b}),98);
__d("isEbEnabledWithIGDEligibilityCheck",["EBIsEbEnabled","Promise","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return!c("gkx")("23914")?(h||(h=b("Promise"))).resolve(!1):d("EBIsEbEnabled").isEbEnabledLS(a.tables)}g.isEbEnabledWithIGDEligibilityCheck=a}),98);
__d("MAWFTSRestoreSync",["EventEmitter","FBLogger","I64","LSDatabaseSingleton","MAWAsyncEBIssueFetchAndIndexFTSQuery","MAWBridgeFireAndForget","MAWBridgeSearchMsg","MAWBridgeSendAndReceive","MAWDbMsg","MAWFTSIsMessageValidForSearch","MAWFTSRestoreCap","MAWFTSRestoreSyncLogger","MAWLoggerUtils","MAWMediaGalleryRestoreSync","MWEncryptedBackUpEBNotEnabledError","MWMediaRestoreQplUtils","QPLFlow","WAPromiseDelays","WAResultOrError","cr:19810","err","getErrorSafe","isEbEnabledWithIGDEligibilityCheck","justknobx","qpl","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=new(c("EventEmitter"))(),k=(h||(h=d("I64"))).of_int32(c("justknobx")._("2477")),l=c("justknobx")._("2606"),m=c("uuidv4")();function n(a){return new Promise(function(b,d){return globalThis.setTimeout(function(){return d(c("err")("timeout"))},a)})}function o(){window.setInterval(function(){d("MAWBridgeFireAndForget").fireAndForget("backend","searchFTSReportTabAlive",{hasFocus:document.hasFocus(),tabId:m},!0)},1e3)}async function p(a){await d("MAWBridgeSendAndReceive").sendAndReceive("backend","searchFTSReportTabTaskComplete",{error:a,tabId:m})}async function q(){await d("MAWBridgeSendAndReceive").sendAndReceive("backend","searchFTSReportTabDestroy",{tabId:m})}var r=function(){function a(a){a===void 0&&(a="search"),this.$1=!1,this.$2=!0,this.$3=!1,this.$4=!0,this.$5=void 0,this.$6={},this.$7=new Set(),this.$8=new Set(),this.$9=new Set(),this.$10=a,c("FBLogger")("fts_worker").info("New MAWFTSRestoreSync instance: "+a)}var e=a.prototype;e.setIsStarted=function(a){this.$1=a,this.$10==="media"&&j.emit("isSyncStarted",a)};e.setIsEBMaybeAvailable=function(a){this.$4=a,this.$10==="media"&&j.emit("isEBMaybeAvailable",a)};e.setActiveThreadId=function(a,c){c===void 0&&(c=!0),b("cr:19810")!=null&&c&&(a!=null&&b("cr:19810").getInstance().insertIntoHead(a)),this.$5=a,this.$10==="media"&&j.emit("activeThreadJid",a)};e.setShouldPauseRestore=function(a){this.$3=a};e.removeFromQueue=function(a){b("cr:19810")!=null&&a!=null&&b("cr:19810").getInstance().removeThread(a)};e.getActiveThreadId=function(){return this.$5};e.getNextThreadIdToFetch=function(){if(b("cr:19810")!=null){var a;return(a=b("cr:19810").getInstance().getThreadsHead())!=null?a:this.getActiveThreadId()}return this.getActiveThreadId()};e.getDoneThreads=function(){return this.$7};e.getDoneThreadsAfterReset=function(){return this.$9};e.getResetThreads=function(){return this.$8};e.isStarted=function(){return this.$1};e.isEBMaybeAvailable=function(){return this.$4};e.resetEBAvailability=function(){this.setIsEBMaybeAvailable(!0)};e.resetRestoreStatus=function(){var a=this,b=this.getActiveThreadId();return b!=null&&!this.$8.has(b)?d("MAWBridgeSendAndReceive").sendAndReceive("backend","searchFTSClearThreadRestoreStatus",{threadId:b},{isLoggingDisabled:!0}).then(function(){a.$8.add(b)}):Promise.resolve()};e.$11=function(a,b){var c=this;Object.keys(this.$6).forEach(function(d){c.$6[d](a,b)})};e.$12=function(a,c,e){return a!==c&&b("cr:19810")!=null?e==null||d("MAWFTSRestoreCap").isRestoreTimeWithinCap(parseInt(e,10)):e!=="0"};e.$13=async function(){this.setIsStarted(!0),this.setShouldPauseRestore(!1),await d("MAWBridgeSendAndReceive").sendAndReceive("backend","searchFTSReportTabForeground",{tabId:m},{isLoggingDisabled:!0}),window.addEventListener("focus",async function(){await d("MAWBridgeSendAndReceive").sendAndReceive("backend","searchFTSReportTabForeground",{tabId:m},{isLoggingDisabled:!0})}),o()};e.shouldLoop=async function(a){if(this.$1||this.$4===!1)return!1;await this.$13();a=await d("isEbEnabledWithIGDEligibilityCheck").isEbEnabledWithIGDEligibilityCheck(a);if(!a){this.setIsEBMaybeAvailable(!1);this.setIsStarted(!1);return!1}return!0};e.loadMessages=async function(a,b,e,f,g,h,i,j){var o=await d("MAWBridgeSendAndReceive").sendAndReceive("backend","searchFTSRequestRestoreTask",{tabId:m,threadJid:b});if(!o){await d("WAPromiseDelays").delayMs(200);return"CONTINUE"}var r=d("MAWAsyncEBIssueFetchAndIndexFTSQuery").issueQueryAsPromise(a,b,e,k,f,i);if(r==null){this.setIsEBMaybeAvailable(!1);this.setIsStarted(!1);return"STOP"}var s=h();s.addAnnotations({int:{retryCount:g},string:{restoreUntilMs:e!=null?e:""}});try{o=function(){return Promise.race([r,n(l)])};var t=await d("QPLFlow").QplSubspan.wrapInSubspan(s,"fetch_request",o);s.addAnnotations({int:{numMessages:t.messages.length}});await d("QPLFlow").QplSubspan.wrapInSubspan(s,"process_data",function(){return j(t,s)});s.endSuccess();await p();return"CONTINUE"}catch(e){a=c("getErrorSafe")(e);if(a&&a.message===d("MWEncryptedBackUpEBNotEnabledError").EB_NOT_ENABLED){s.addPoint("eb_not_enabled");s.endCancel();this.setIsEBMaybeAvailable(!1);this.setIsStarted(!1);await q();return"STOP"}if(a.message==="invalid-client-state")return"FAIL";c("FBLogger")("fts_worker").catching(a).mustfix("Fail to fetch a new batch of messages");s.endFail((b=a.message)!=null?b:"unknown");await p(a);return"FAIL"}};e.startSyncingLoopNew=async function(){var a=this;this.setShouldPauseRestore(!1);var e=await (i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton;if(!await this.shouldLoop(e))return;await d("MAWFTSRestoreSyncLogger").initLoggingSessionId();var f=0,g=null,j=async function(){var i,j=a.getNextThreadIdToFetch(),k=a.getActiveThreadId();g!==j&&(g=j,f=0);if(j==null||b("cr:19810")==null&&a.$7.has(j)){await d("WAPromiseDelays").delayMs(200);return 0}if(a.$3){await d("WAPromiseDelays").delayMs(200);return 0}var l=await d("MAWBridgeSendAndReceive").sendAndReceive("backend","searchFTSGetThreadRestoreStatus",{threadId:j},{isLoggingDisabled:!0}),m=(i=l==null?void 0:l.restoredUntilSortOrderMs)!=null?i:null,n=l==null||l.restoredUntilSortOrderMs===l.maxRestoredUntilSortOrderMs||l.restoredUntilSortOrderMs==null;i=a.$12(j,k,m);if(!i){m==="0"&&(a.$7.add(j),a.$8.has(j)&&a.$9.add(j));a.removeFromQueue(j);await d("WAPromiseDelays").delayMs(200);return 0}l=await a.loadMessages(e,j,m,function(){d("MAWFTSRestoreSyncLogger").onFetchMessagePageStart(j,m==null||d("MAWFTSRestoreCap").isRestoreTimeWithinCap(parseInt(m,10)),n)},f,function(){return d("QPLFlow").startQPLFlow(c("qpl")._(25300854,"2397"))},"fts",async function(b){var c=b.messages;b=b.nextMessageTimestampMsBefore;b=b!=null?(h||(h=d("I64"))).to_string(b):"0";var e=d("MAWFTSRestoreCap").isRestoreTimeWithinCap(parseInt(b,10));d("MAWFTSRestoreSyncLogger").onFetchMessagePageComplete(j,c.length,e);a.$11(j,c);e=c.map(function(a){var b=d("MAWFTSIsMessageValidForSearch").verifyMessageValidity(a);return b==null?null:d("MAWBridgeSearchMsg").createBridgeSearchMsg(babelHelpers.extends({author:a.author,canonicalTs:d("MAWDbMsg").getCanonicalTsFromMsg(a),externalId:a.externalId,threadJid:j},b),!1)}).filter(Boolean);await d("MAWBridgeSendAndReceive").sendAndReceive("backend","searchIndexUpdate",{newSortOrderMs:b,threadId:j,unvaultedBridgeSearchMessages:e})});$$gen$m0:{if(l==="CONTINUE"){f=0;break $$gen$m0}if(l==="FAIL"){d("MAWFTSRestoreSyncLogger").onFetchMessagePageFailed(j);k=200;i=1e4;k=Math.min(k*Math.pow(2,f),i);await d("WAPromiseDelays").delayMs(k);f++;break $$gen$m0}if(l==="STOP"){return{v:void 0};break $$gen$m0}throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+l)}},k;while(this.$2){k=await j();if(k===0)continue;if(k)return k.v}};e.startSyncingLoop=async function(){var a=this;if(c("justknobx")._("2435"))return this.startSyncingLoopNew();this.setShouldPauseRestore(!1);if(this.$1||this.$4===!1)return;await this.$13();var e=await (i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton,f=await d("isEbEnabledWithIGDEligibilityCheck").isEbEnabledWithIGDEligibilityCheck(e);if(!f){this.setIsEBMaybeAvailable(!1);this.setIsStarted(!1);return}await d("MAWFTSRestoreSyncLogger").initLoggingSessionId();var g=0,j=null;f=async function(){var f,i=a.getNextThreadIdToFetch(),n=a.getActiveThreadId();j!==i&&(j=i,g=0);if(i==null||b("cr:19810")==null&&a.$7.has(i)){await d("WAPromiseDelays").delayMs(200);return 0}if(a.$3){await d("WAPromiseDelays").delayMs(200);return 0}var o=await d("MAWBridgeSendAndReceive").sendAndReceive("backend","searchFTSGetThreadRestoreStatus",{threadId:i},{isLoggingDisabled:!0}),r=(f=o==null?void 0:o.restoredUntilSortOrderMs)!=null?f:null,s=o==null||o.restoredUntilSortOrderMs===o.maxRestoredUntilSortOrderMs||o.restoredUntilSortOrderMs==null;f=a.$12(i,n,r);if(!f){r==="0"&&(a.$7.add(i),a.$8.has(i)&&a.$9.add(i));a.removeFromQueue(i);await d("WAPromiseDelays").delayMs(200);return 0}o=await d("MAWBridgeSendAndReceive").sendAndReceive("backend","searchFTSRequestRestoreTask",{tabId:m,threadJid:i});if(!o){await d("WAPromiseDelays").delayMs(200);return 0}n=d("MAWAsyncEBIssueFetchAndIndexFTSQuery").issueQueryAsPromise(e,i,r,k,function(){d("MAWFTSRestoreSyncLogger").onFetchMessagePageStart(i,r==null||d("MAWFTSRestoreCap").isRestoreTimeWithinCap(parseInt(r,10)),s)},"fts");if(n==null){a.setIsEBMaybeAvailable(!1);a.setIsStarted(!1);return{v:Promise.resolve()}}f=d("MAWLoggerUtils").getInstanceKey();o=d("QPLFlow").startQPLFlow(c("qpl")._(25300854,"2397"),{annotations:{int:{retryCount:g},string:{restoreUntilMs:r!=null?r:""}},instanceKey:f});f=n.then(function(a){return d("WAResultOrError").makeResult(a)});try{n=await Promise.race([f,new Promise(function(a){return window.setTimeout(function(){return a(d("WAResultOrError").makeError("timeout"))},l)})]);if(n.success===!1){g++;o.endFail("timeout");d("MAWFTSRestoreSyncLogger").onFetchMessagePageFailed(i);c("FBLogger")("fts_worker").mustfix("Fail to fetch a new batch of messages due to timeout");return 0}g=0;o.endSuccess();f=n.value;n=f.messages;f=f.nextMessageTimestampMsBefore;f=f!=null?(h||(h=d("I64"))).to_string(f):"0";var t=d("MAWFTSRestoreCap").isRestoreTimeWithinCap(parseInt(f,10));d("MAWFTSRestoreSyncLogger").onFetchMessagePageComplete(i,n.length,t);a.$11(i,n);t=n.map(function(a){var b=d("MAWFTSIsMessageValidForSearch").verifyMessageValidity(a);return b==null?null:d("MAWBridgeSearchMsg").createBridgeSearchMsg(babelHelpers.extends({author:a.author,canonicalTs:d("MAWDbMsg").getCanonicalTsFromMsg(a),externalId:a.externalId,threadJid:i},b),!1)}).filter(Boolean);await d("MAWBridgeSendAndReceive").sendAndReceive("backend","searchIndexUpdate",{newSortOrderMs:f,threadId:i,unvaultedBridgeSearchMessages:t})}catch(b){if(b&&(b==null?void 0:b.message)===d("MWEncryptedBackUpEBNotEnabledError").EB_NOT_ENABLED){o.addPoint("eb_not_enabled");o.endCancel();a.setIsEBMaybeAvailable(!1);a.setIsStarted(!1);await q();return{v:Promise.resolve()}}if((b==null?void 0:b.message)==="invalid-client-state")return 0;d("MAWFTSRestoreSyncLogger").onFetchMessagePageFailed(i);c("FBLogger")("fts_worker").mustfix("Fail to fetch a new batch of messages with error %s",b==null?void 0:b.message);o.endFail((n=b==null?void 0:b.message)!=null?n:"unknown");await p(b);return 0}await p()};var n;while(this.$2){n=await f();if(n===0)continue;if(n)return n.v}};e.startMediaSyncingLoopNew=async function(){var a=this,b=await (i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton;if(!await this.shouldLoop(b))return;var c=0,e=async function(){var e=a.getActiveThreadId();if(e==null||a.$7.has(e)){await d("WAPromiseDelays").delayMs(200);return 0}if(a.$3){await d("WAPromiseDelays").delayMs(200);return 0}var f=await d("MAWBridgeSendAndReceive").sendAndReceive("backend","getThreadMediaRestoreStatus",{threadId:e},{isLoggingDisabled:!0});f=(f=f==null?void 0:f.restoredUntilSortOrderMs)!=null?f:null;j.emit("restoredUntilMs",f!=null?parseInt(f,10):-1);var g=a.$12(e,e,f);if(!g){f==="0"&&a.$7.add(e);await d("WAPromiseDelays").delayMs(200);return 0}g=await a.loadMessages(b,e,f,void 0,c,d("MWMediaRestoreQplUtils").startMediaRestoreBatchQPLFlow,"fts",async function(a,b){var c=a.nextMessageTimestampMsBefore!=null?(h||(h=d("I64"))).to_string(a.nextMessageTimestampMsBefore):"0";await d("MAWMediaGalleryRestoreSync").handleMediaRestoreSync(a,b);await d("MAWBridgeSendAndReceive").sendAndReceive("backend","setThreadMediaRestoreStatus",{newSortOrderMs:c,threadId:e},{isLoggingDisabled:!0})});$$gen$m1:{if(g==="CONTINUE"){c=0;break $$gen$m1}if(g==="FAIL"){f=200;var i=1e4;f=Math.min(f*Math.pow(2,c),i);await d("WAPromiseDelays").delayMs(f);c++;break $$gen$m1}if(g==="STOP"){return{v:void 0};break $$gen$m1}throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+g)}},f;while(this.$2){f=await e();if(f===0)continue;if(f)return f.v}};e.startMediaSyncingLoop=async function(){if(c("justknobx")._("2435"))return this.startMediaSyncingLoopNew();if(this.$1||this.$4===!1)return;await this.$13();var a=await (i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton,b=await d("isEbEnabledWithIGDEligibilityCheck").isEbEnabledWithIGDEligibilityCheck(a);if(!b){this.setIsEBMaybeAvailable(!1);this.setIsStarted(!1);return}b=0;while(this.$2){var e=this.getActiveThreadId();if(e==null||this.$7.has(e)){await d("WAPromiseDelays").delayMs(200);continue}if(this.$3){await d("WAPromiseDelays").delayMs(200);continue}var f=await d("MAWBridgeSendAndReceive").sendAndReceive("backend","getThreadMediaRestoreStatus",{threadId:e},{isLoggingDisabled:!0});f=(f=f==null?void 0:f.restoredUntilSortOrderMs)!=null?f:null;j.emit("restoredUntilMs",f!=null?parseInt(f,10):-1);var g=this.$12(e,e,f);if(!g){f==="0"&&this.$7.add(e);await d("WAPromiseDelays").delayMs(200);continue}g=await d("MAWBridgeSendAndReceive").sendAndReceive("backend","searchFTSRequestRestoreTask",{tabId:m,threadJid:e});if(!g){await d("WAPromiseDelays").delayMs(200);continue}g=d("MAWAsyncEBIssueFetchAndIndexFTSQuery").issueQueryAsPromise(a,e,f,k,void 0,"media");if(g==null){this.setIsEBMaybeAvailable(!1);this.setIsStarted(!1);return Promise.resolve()}f=d("MWMediaRestoreQplUtils").startMediaRestoreBatchQPLFlow();f.addAnnotations({int:{retry_count:b}});g=g.then(function(a){return d("WAResultOrError").makeResult(a)});try{f.addPoint("fetch_request_start");g=await Promise.race([g,new Promise(function(a){return window.setTimeout(function(){return a(d("WAResultOrError").makeError("timeout"))},l)})]);f.addPoint("fetch_request_end",{bool:{is_success:g.success===!0}});if(g.success===!1){b++;f.endFail("timeout");continue}b=0;var n=g.value.nextMessageTimestampMsBefore;n=n!=null?(h||(h=d("I64"))).to_string(n):"0";f.addPoint("handle_media_restore_start");await d("MAWMediaGalleryRestoreSync").handleMediaRestoreSync(g.value,f);f.addPoint("handle_media_restore_end");await d("MAWBridgeSendAndReceive").sendAndReceive("backend","setThreadMediaRestoreStatus",{newSortOrderMs:n,threadId:e},{isLoggingDisabled:!0})}catch(a){if(a&&(a==null?void 0:a.message)===d("MWEncryptedBackUpEBNotEnabledError").EB_NOT_ENABLED){f.addPoint("eb_not_enabled");f.endCancel();this.setIsEBMaybeAvailable(!1);this.setIsStarted(!1);await q();return Promise.resolve()}c("FBLogger")("fts_worker").mustfix("Fail to fetch a new batch of messages with error %s",a==null?void 0:a.message);f.endFail((g=a==null?void 0:a.message)!=null?g:"unknown");await p(a);continue}await p()}};a.getInstance=function(){var b=a.instance;if(b!=null)return b;b=new a();a.instance=b;return b};a.getMediaInstance=function(){var b=a.mediaInstance;if(b!=null)return b;b=new a("media");a.mediaInstance=b;return b};a.resetInstance=function(){a.instance=null};e.setKeepWhileLoop_FOR_TESTING_ONLY=function(a){this.$2=a};return a}();r.instance=null;r.mediaInstance=null;function a(){return r.getInstance()}function e(){return r.getMediaInstance()}g.MAWGalleryEventEmitter=j;g.MAWFTSRestoreSync=r;g.getFTSRestoreSync=a;g.getMediaRestoreSync=e}),98);
__d("ThreadsDoublyLinkedList",[],(function(a,b,c,d,e,f){"use strict";var g=function(a){this.value=a};a=function(){function a(){this.$1=new Map(),this.$2=null,this.$3=null}var b=a.prototype;b.getHead=function(){if(this.$2!=null)return this.$2.value};b.has=function(a){return this.$1.has(a)};b.size=function(){return this.$1.size};b.insertToHead=function(a){if(this.getHead()===a)return;this.has(a)&&this.remove(a);this.$2==null?this.add(a):(this.$2.prev=new g(a),this.$2.prev.next=this.$2,this.$2=this.$2.prev,this.$1.set(a,this.$2))};b.add=function(a){if(this.has(a))return;if(!this.$2){this.$2=new g(a);this.$3=this.$2;this.$1.set(a,this.$2);return}this.$3!=null&&(this.$3.next=new g(a),this.$3.next.prev=this.$3,this.$3=this.$3.next,this.$1.set(a,this.$3))};b.remove=function(a){var b=this.$1.get(a);if(b==null)return;b.prev!=null&&(b.prev.next=b.next);b.next!=null&&(b.next.prev=b.prev);b===this.$2&&(this.$2=b.next);b===this.$3&&(this.$3=b.prev);this.$1["delete"](a)};return a}();f["default"]=a}),66);
__d("MAWFTSThreadsRestore",["FBLogger","I64","LSDatabaseSingleton","LSFactory","LSFetchFtsThreadsStoredProcedure","LSMessagingThreadTypeUtil","MAWBridgeSendAndReceive","MAWFTSRestoreCap","MAWFTSRestoreSyncLogger","MAWJids","ReQL","ThreadsDoublyLinkedList","WAJids","emptyFunction","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=function(){function a(){this.$1=new Map(),this.$4=!1,this.$5=(h||(h=d("I64"))).zero,this.$6=!1,this.$7=new Set(),c("FBLogger")("messenger_web").info("New MAWFTSThreadsRestore instance"),this.$2=new(c("ThreadsDoublyLinkedList"))()}var b=a.prototype;b.startThreadsRestore=async function(){if(this.$4)return;this.$4=!0;this.$6=!0;await d("MAWFTSRestoreSyncLogger").initLoggingSessionId();await this.$8();await this.$9()};b.isThreadQueryInProgress=function(){return this.$6||this.$7.size>0};b.getInitialLastActivityTimeForThreadMs=function(a){return this.$1.get(a)};b.getThreadsHead=function(){return this.$2.getHead()};b.hasThread=function(a){return this.$2.has(a)};b.insertIntoHead=function(a){this.$2.insertToHead(a)};b.removeThread=function(a){this.$2.remove(a)};b.$10=function(a,b){d("MAWFTSRestoreSyncLogger").onFetchThreadsPageStart(),void a.runInTransaction(function(a){return c("LSFetchFtsThreadsStoredProcedure")(c("LSFactory")(a),{sessionId:"",timestamp:b})},"readwrite",void 0,void 0,f.id+":123")};b.$11=function(a,b,e){e===void 0&&(e=c("emptyFunction"));this.$6=!0;var f=b.hasNextPage,g=b.nextPageCursor;b=b.resultCount;b=(h||(h=d("I64"))).to_int32(b);var i=!h.equal(g,this.$5),j=d("MAWFTSRestoreCap").isRestoreTimeWithinCap(h.to_float(g));i&&d("MAWFTSRestoreSyncLogger").onFetchThreadsPageComplete(b);f&&j?i&&(this.$5=g,this.$10(a,g)):(this.$6=!1,this.$7.size===0&&d("MAWFTSRestoreSyncLogger").onFetchThreadsComplete(),e())};b.$8=async function(){var a=this,b=await this.$12(),c=d("ReQL").fromTableAscending(b.tables.messenger_fts_threads_queries,["hasNextPage","nextPageCursor","resultCount"]),e={contents:function(){}};e.contents=c.subscribe(function(c,d){if(d.operation==="delete")return;a.$11(b,d.value,e.contents)});c=await d("ReQL").firstAsync(c);c?this.$11(b,c):this.$10(b,(h||(h=d("I64"))).max_int)};b.$13=function(a){var b=this,e=a.nextMessageTimestamp,f=a.threadId;a=a.threadType;f=(h||(h=d("I64"))).to_string(f);a=d("LSMessagingThreadTypeUtil").isGroup(a);var g=a?d("WAJids").toGroupJid(f):d("MAWJids").toUserJid(f);this.$7.add(g);c("promiseDone")(d("MAWBridgeSendAndReceive").sendAndReceive("backend","searchGetFTSNextTimestamp",{threadId:g}).then(function(a){var c=(h||(h=d("I64"))).to_float(e);if(!d("MAWFTSRestoreCap").isRestoreTimeWithinCap(c))return;if(!b.$1.has(g)){b.$1.set(g,c);c=a!=null&&!d("MAWFTSRestoreCap").isRestoreTimeWithinCap(parseInt(a,10));d("MAWFTSRestoreSyncLogger").incrementTotalResultCount(c)}if(a==="0")return;b.$2.add(d("WAJids").unsafeCoerceToChatJid(g));return d("MAWBridgeSendAndReceive").sendAndReceive("backend","searchSetFTSNextTimestamp",{newSortOrderMs:h.to_string(e),threadId:g})}).finally(function(){b.$7.delete(g),b.$7.size===0&&!b.$6&&d("MAWFTSRestoreSyncLogger").onFetchThreadsComplete()}))};b.$9=async function(){var a=this,b=await this.$12();b=d("ReQL").fromTableAscending(b.tables.messenger_fts_threads,["threadId","nextMessageTimestamp","threadType"]);b.subscribe(function(b,c){c.operation==="add"&&a.$13(c.value)});b=await d("ReQL").toArrayAsync(b);b.forEach(function(b){a.$13(b)})};b.$12=async function(){this.$3==null&&(this.$3=await (i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton);return this.$3};return a}();function a(){j==null&&(j=new k());return j}g.MAWFTSThreadsRestore=k;g.getInstance=a}),98);
__d("MWEBRestoreUpsellTrigger.react",["MAWEncryptedBackupsRestoreDialog.entrypoint","MWChatEncryptedBackupsQPLEvents","MWEncryptedBackupsRetrieveQplLoggingAnnotations","QPLUserFlow","react","react-compiler-runtime","useLabyrinthLogging","useMWXEntryPointDialog","useReStore","useVisibilityObserver"],(function(a,b,c,d,e,f,g){"use strict";var h,i;i||d("react");function a(a){var b=d("react-compiler-runtime").c(17),e=a.children,f=a.markerPrefix,g=a.qplSource,i=(h||(h=c("useReStore")))();b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a={},b[0]=a):a=b[0];a=c("useMWXEntryPointDialog")(c("MAWEncryptedBackupsRestoreDialog.entrypoint"),a);var j=a[0];a=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var k=a.startFlow;b[1]!==i||b[2]!==g||b[3]!==k?(a=function(a){d("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:i,onFetch:function(b){var e=b.ebsmWiped,f=b.firstUpsellTime,h=b.hasEbKeysLocally,i=b.hasEBSM,j=b.hasPDB,l=b.hasUserRestoredBefore;b=b.hasUserRestoredBeforeTemp;k({additionalAnnotations:{eb_session_identifier:f,ebsm_wiped:e,has_eb_keys_locally:h,has_ebsm:i,has_pdb:j,has_user_restored_before:l,has_user_restored_before_temp:b,restore_upsell_first_impression_time:f},event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,source:g});c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,a)}})},b[1]=i,b[2]=g,b[3]=k,b[4]=a):a=b[4];var l=a;b[5]!==f||b[6]!==l?(a={onVisible:function(){l(f+"_IMPRESSION")}},b[5]=f,b[6]=l,b[7]=a):a=b[7];a=c("useVisibilityObserver")(a);var m;b[8]!==f||b[9]!==g||b[10]!==j||b[11]!==l?(m=function(){l(f+"_CLICKED"),j({source:g})},b[8]=f,b[9]=g,b[10]=j,b[11]=l,b[12]=m):m=b[12];m=m;var n;b[13]!==e||b[14]!==m||b[15]!==a?(n=e(m,a),b[13]=e,b[14]=m,b[15]=a,b[16]=n):n=b[16];return n}g["default"]=a}),98);
__d("MWInboxMessageSearchEBRestoreUpsell.react",["fbt","MWChatEncryptedBackupsQPLSource.enum","MWEBRestoreUpsellTrigger.react","MWXCard.react","MWXLink.react","MWXText.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){var a=d("react-compiler-runtime").c(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=j.jsx(c("MWEBRestoreUpsellTrigger.react"),{markerPrefix:"RESTORE_INBOX_MESSAGE_SEARCH",qplSource:c("MWChatEncryptedBackupsQPLSource.enum").INBOX_MESSAGE_SEARCH,children:k}),a[0]=b):b=a[0];return b}function k(a,b){return j.jsx(c("MWXCard.react"),{background:"card-flat",children:j.jsx("div",{className:"xyamay9 x1l90r2v x1g0dm76 xpdmqnj",ref:b,children:j.jsxs(c("MWXText.react"),{align:"center",color:"primary",type:"body4",children:[h._(/*BTDS*/"Messages are missing.")," ",j.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:j.jsx(c("MWXLink.react"),{onClick:a,children:h._(/*BTDS*/"Restore now")})})]})})})}k.displayName=k.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("useMWMediaGalleryRestoreStatus",["Int64Hooks","LSMessagingThreadTypeUtil","MAWFTSRestoreSync","MAWMiActOnActThreadReady","MWEBEntrypointsKillswitch.enum","MWMessageSearchStatusTypes","cr:11999","justknobx","promiseDone","react","react-compiler-runtime","useMWEBBackupState","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useState;function a(a){var e=d("react-compiler-runtime").c(12),f=a.threadKey;a=a.threadType;var g=(h||(h=c("useReStore")))(),i=j(null),l=i[0],m=i[1];e[0]===Symbol.for("react.memo_cache_sentinel")?(i={entrypoint:c("MWEBEntrypointsKillswitch.enum").MEDIA_GALLERY_RESTORE},e[0]=i):i=e[0];i=c("useMWEBBackupState")(i);var n=b("cr:11999")(l,"media"),o;e[1]!==a?(o=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a),e[1]=a,e[2]=o):o=e[2];var p=o;e[3]===Symbol.for("react.memo_cache_sentinel")?(a=d("MAWFTSRestoreSync").getMediaRestoreSync(),e[3]=a):a=e[3];var q=a;e[4]===Symbol.for("react.memo_cache_sentinel")?(o=function(){return q.isStarted()},e[4]=o):o=e[4];a=j(o);o=a[0];var r=a[1];e[5]===Symbol.for("react.memo_cache_sentinel")?(a=function(){return q.isEBMaybeAvailable()},e[5]=a):a=e[5];a=j(a);var s=a[0],t=a[1];e[6]===Symbol.for("react.memo_cache_sentinel")?(a=function(){return q.getActiveThreadId()},e[6]=a):a=e[6];a=j(a);var u=a[0],v=a[1];a=j(-1);var w=a[0],x=a[1];a=j(!1);var y=a[0],z=a[1],A;e[7]!==g.tables||e[8]!==p||e[9]!==f?(a=function(){var a;(a=d("MAWFTSRestoreSync")).MAWGalleryEventEmitter.addListener("isSyncStarted",function(a){return r(a)});a.MAWGalleryEventEmitter.addListener("isEBMaybeAvailable",function(a){return t(a)});a.MAWGalleryEventEmitter.addListener("activeThreadJid",function(a){return v(a)});a.MAWGalleryEventEmitter.addListener("isPersisting",function(a){return z(a)});a.MAWGalleryEventEmitter.addListener("restoredUntilMs",function(a){x(a)});a=async function(){await d("MAWMiActOnActThreadReady").onActThreadReady(g.tables,f,"useMWMediaGalleryRestoreStatus",function(a,b){m(b);return Promise.resolve()})};p?c("promiseDone")(a()):m(null);return k},A=[g.tables,p,f],e[7]=g.tables,e[8]=p,e[9]=f,e[10]=a,e[11]=A):(a=e[10],A=e[11]);d("Int64Hooks").useEffectInt64(a,A);if(l!=null&&q.getDoneThreads().has(l))return d("MWMessageSearchStatusTypes").RestoreStatus.COMPLETE;e=l!=null&&u===l;if(!p)return d("MWMessageSearchStatusTypes").RestoreStatus.NOT_REQUIRED;if(i!==3)return d("MWMessageSearchStatusTypes").RestoreStatus.NOT_RUNNING;if(o){if(!s||!e)return d("MWMessageSearchStatusTypes").RestoreStatus.NOT_RUNNING;a=c("justknobx")._("3245")?w===0:n===0;return a&&!y?d("MWMessageSearchStatusTypes").RestoreStatus.COMPLETE:d("MWMessageSearchStatusTypes").RestoreStatus.IN_PROGRESS}else return d("MWMessageSearchStatusTypes").RestoreStatus.NOT_RUNNING}function k(){d("MAWFTSRestoreSync").MAWGalleryEventEmitter.removeAllListeners()}g.default=a}),98);/*FB_PKG_DELIM*/
__d("ChannelShareDialogLoggingContext",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["BROADCAST_CHANNEL_CREATION","THREAD_DETAILS_SHARE_ITEM","THREAD_DETAILS_QUICK_ACTION","CONTEXT_BANNER_QUICK_ACTION"]);c=a;f["default"]=c}),66);
__d("CometStickerPickerFlyoutTagSelectorRootQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9341116515996575"}),null);
__d("CometStickerPickerGeneratedStickersFlyoutTagSelectorRootQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="30784663477785581"}),null);
__d("CometStickerPickerStickerGeneratedCardQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="23948132428170987"}),null);
__d("FDSContextualMessage.react",["fbt","ix","CometRow.react","CometRowItem.react","FDSIcon.react","FDSTextPairing.react","FbtResultBase","fbicon","react","react-compiler-runtime","react-strict-dom"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=["ref","xstyle"],k,l=k||d("react"),m={closeButton:{marginInlineEnd:"x1lxpwgx",marginTop:"x9otpla",$$css:!0},icon:{marginTop:"x1rdy4ex",$$css:!0},root:{borderStartStartRadius:"xw5cjc7",borderStartEndRadius:"x1dmpuos",borderEndEndRadius:"x1vsv7so",borderEndStartRadius:"xau1kf4",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"x1iorvi4",paddingInlineEnd:"x11lfxj5",paddingInlineStart:"x135b78x",paddingBottom:"x1l90r2v",$$css:!0}},n={highlight:{backgroundColor:"xwnonoy",$$css:!0},"highlight-bg":{backgroundColor:"xfmpgtx",$$css:!0},primary:{backgroundColor:"x1jx94hy",$$css:!0},secondary:{backgroundColor:"xlhe6ec",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(36),e,f,g;b[0]!==a?(f=a.ref,g=a.xstyle,e=babelHelpers.objectWithoutPropertiesLoose(a,j),b[0]=a,b[1]=e,b[2]=f,b[3]=g):(e=b[1],f=b[2],g=b[3]);a=e;var k=a.addOnPrimary,o=a.addOnSecondary,p=a.body,q=a.headline,r=a.headlineLineLimit,s=a.icon,t=a.level,u=a.meta,v=a.paddingTop,w=a.testid;a=a.type;t=t===void 0?3:t;a=a===void 0?"primary":a;var x=e.onClose!=null?e.onClose:null;e=e.headlineAriaLabel!=null?e.headlineAriaLabel:typeof q==="string"||q instanceof c("FbtResultBase")?q:null;var y=n[a],z;b[4]!==y||b[5]!==g?(z=[m.root,y,g],b[4]=y,b[5]=g,b[6]=z):z=b[6];b[7]!==s?(y=s!=null?l.jsx(c("CometRowItem.react"),{verticalAlign:"top",children:l.jsx(d("react-strict-dom").html.div,{style:[m.icon],children:s})}):null,b[7]=s,b[8]=y):y=b[8];g=a==="highlight"?"white":"secondary";s=a==="highlight"?"white":"primary";r=r!=null?r:2;var A;b[9]!==p||b[10]!==q||b[11]!==t||b[12]!==g||b[13]!==s||b[14]!==r?(A=l.jsx(c("CometRowItem.react"),{expanding:!0,children:l.jsx(c("FDSTextPairing.react"),{body:p,bodyColor:g,headline:q,headlineColor:s,headlineLineLimit:r,isSemanticHeading:!0,level:t})}),b[9]=p,b[10]=q,b[11]=t,b[12]=g,b[13]=s,b[14]=r,b[15]=A):A=b[15];b[16]!==e||b[17]!==x||b[18]!==a?(p=x!=null?l.jsx(c("CometRowItem.react"),{verticalAlign:"top",children:l.jsx(d("react-strict-dom").html.div,{style:[m.closeButton],children:l.jsx(c("FDSIcon.react"),{"aria-label":e!=null?h._(/*BTDS*/"Dismiss {card name} card",[h._param("card name",e)]):h._(/*BTDS*/"Dismiss card"),color:a==="highlight"?"white":"secondary",icon:d("fbicon")._(i("478232"),16),onPress:x,size:16,testid:void 0})})}):null,b[16]=e,b[17]=x,b[18]=a,b[19]=p):p=b[19];b[20]!==v||b[21]!==p||b[22]!==y||b[23]!==A?(q=l.jsxs(c("CometRow.react"),{paddingTop:v,verticalAlign:"center",children:[y,A,p]}),b[20]=v,b[21]=p,b[22]=y,b[23]=A,b[24]=q):q=b[24];b[25]!==t||b[26]!==u?(g=u!=null&&l.jsx(c("CometRow.react"),{paddingTop:12,children:l.jsx(c("CometRowItem.react"),{children:l.jsx(c("FDSTextPairing.react"),{level:t,meta:u})})}),b[25]=t,b[26]=u,b[27]=g):g=b[27];b[28]!==k||b[29]!==o||b[30]!==f||b[31]!==q||b[32]!==g||b[33]!==z||b[34]!==w?(s=l.jsxs(d("react-strict-dom").html.div,{"data-testid":void 0,ref:f,style:z,children:[q,k,o,g]}),b[28]=k,b[29]=o,b[30]=f,b[31]=q,b[32]=g,b[33]=z,b[34]=w,b[35]=s):s=b[35];return s}g["default"]=a}),226);
__d("FDSCrossFilled12Icon",["cr:13992"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:13992")}),98);
__d("FDSCrossFilled12PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("478231"),12);b=a;g["default"]=b}),98);
__d("GroupsCometChatEditChatDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9627401294020921"}),null);
__d("getLSContactHref",["CurrentEnvironment","I64","LSContactBlockedByViewerStatus","LSContactTypeExact","LSIntEnum","MWLSContactTypeExactUtils","XCometVanityURLControllerRouteBuilder"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=a.blockedByViewerStatus,e=a.contactTypeExact,f=a.id;a=a.secondaryName;if((h||(h=d("I64"))).to_int32(b)===c("LSContactBlockedByViewerStatus").FULLY_BLOCKED)return;if((h||(h=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").MESSENGER_ONLY_NOT_ALLOWED_ON_FB)))return;b=d("MWLSContactTypeExactUtils").isIgContact(e);return a!=null&&b?"https://www.instagram.com/"+a:(c("CurrentEnvironment").facebookdotcom?"":"https://www.facebook.com")+c("XCometVanityURLControllerRouteBuilder").buildUri({vanity:(h||(h=d("I64"))).to_string(f)}).toString()}g["default"]=a}),98);
__d("LSContactLink.react",["CurrentEnvironment","MWLSContactTypeExactUtils","MWXLink.react","MWXPressable.react","getLSContactHref","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={shrinking:{flexShrink:"xs83m0k",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(19),e=a.children,f=a.contact,g=a.isText,h=a.label;a=a.testid;g=g===void 0?!0:g;var k=f.blockedByViewerStatus,l=f.contactTypeExact,m=f.id;f=f.secondaryName;var n;b[0]!==k||b[1]!==l||b[2]!==m||b[3]!==f?(n=c("getLSContactHref")({blockedByViewerStatus:k,contactTypeExact:l,id:m,secondaryName:f}),b[0]=k,b[1]=l,b[2]=m,b[3]=f,b[4]=n):n=b[4];k=n;m=d("MWLSContactTypeExactUtils").isIgContact(l);f=!c("CurrentEnvironment").facebookdotcom||m?"_blank":void 0;if(k==null)return e;if(g){b[5]!==e||b[6]!==h||b[7]!==f||b[8]!==a||b[9]!==k?(n=i.jsx(c("MWXLink.react"),{href:k,label:h,target:f,testid:void 0,children:e}),b[5]=e,b[6]=h,b[7]=f,b[8]=a,b[9]=k,b[10]=n):n=b[10];return n}b[11]!==f||b[12]!==k?(l={target:f,url:k},b[11]=f,b[12]=k,b[13]=l):l=b[13];b[14]!==e||b[15]!==h||b[16]!==l||b[17]!==a?(m=i.jsx(c("MWXPressable.react"),{expanding:!0,label:h,linkProps:l,overlayRadius:"normal",testid:void 0,xstyle:j.shrinking,children:e}),b[14]=e,b[15]=h,b[16]=l,b[17]=a,b[18]=m):m=b[18];return m}g["default"]=a}),98);
__d("LSFetchBanners",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"in_thread_banner_fetch_activity_banners_queue",c.i64.cast([0,72]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSInThreadBannerFetchBannersStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSFriendshipStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({CANNOT_REQUEST:0,ARE_FRIENDS:1,INCOMING_REQUEST:2,OUTGOING_REQUEST:3,CAN_REQUEST:4,UNKNOWN:5});f["default"]=a}),66);
__d("LSMoveThreadToInboxAndUpdateParent",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({folderName:"inbox",parentThreadKey:a[1]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxMoveThreadToInboxAndUpdateParentStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSMuteCallsFromThread",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[6]=b.syncGroup,c.i64.neq(d[6],void 0)?d[5]=d[6]:d[5]=c.i64.cast([0,1]),d[0]=d[5])})},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("mailbox_type",a[1]),d[2].set("mute_calls_expire_time_ms",a[2]),d[2].set("request_id",a[3]),d[2].set("sync_group",d[0]),d[3]=d[2].get("thread_key"),d[4]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[3]),c.i64.cast([0,229]),d[4],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxMuteCallsFromThreadStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSMuteCallsFromThreadStoredProcedure",["LSMuteCallsFromThread","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSMuteCallsFromThread"),e.threadKey,e.mailboxType,e.muteCallsExpireTimeMs,e.requestId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSOptimisticMuteThread",["LSIssueNewTaskWithExtraOperationsAndGetTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({muteExpireTimeMs:a[2]})})},function(e){return c.storedProcedure(b("LSIssueNewTaskWithExtraOperationsAndGetTaskID"),c.i64.to_string(a[0]),c.i64.cast([0,144]),"",void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,1]),void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[0]=a[0],a})},function(b){return c.db.table(32).add({taskId:d[0],threadKey:a[0]})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticMuteThreadStoredProcedure";a.__tables__=["threads","threads_optimistic_context"];e.exports=a}),null);
__d("LSOptimisticMuteThreadStoredProcedure",["LSOptimisticMuteThread","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticMuteThread"),e.threadKey,e.mailboxType,e.muteExpireTimeMs);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSRemoveParticipantFromThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(14).fetch([[[a[0],a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(c.contactId,a[1])}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxRemoveParticipantFromThreadStoredProcedure";a.__tables__=["participants"];e.exports=a}),null);
__d("LSOptimisticRemoveParticipantsFromGroupThread",["LSArrayGetObjectAt","LSIssueNewError","LSIssueNewTaskWithExtraOperations","LSLocalize","LSRemoveParticipantFromThread"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=c.i64.of_int32(a[1].length),c.i64.gt(d[0],c.i64.cast([0,0]))?c.loopAsync(d[0],function(e){return d[1]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[1],d[1]).then(function(a){return a=a,d[2]=a[0],d[3]=a[1],a})},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[4]=c.i64.cast([0,1]):(b=a.item,d[13]=b.syncGroup,c.i64.neq(d[13],void 0)?d[12]=d[13]:d[12]=c.i64.cast([0,1]),d[4]=d[12])})},function(e){return c.storedProcedure(b("LSRemoveParticipantFromThread"),a[0],d[2])},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[6]=c.i64.cast([0,1]):(b=a.item,d[13]=b.syncGroup,c.i64.neq(d[13],void 0)?d[12]=d[13]:d[12]=c.i64.cast([0,1]),d[6]=d[12])})},function(a){return c.sortBy(c.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[8]=!1:(b=a.item,d[8]=b.errorShouldBeShown)})},function(a){return d[8]===!0?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2285622730]),void 0).then(function(a){return d[12]=a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1919524925]),void 0).then(function(a){return d[13]=a})},function(a){return c.storedProcedure(b("LSIssueNewError"),void 0,c.i64.cast([0,1545093]),d[12],d[13],void 0,void 0)}]):c.resolve()},function(e){return d[10]=new c.Map(),d[10].set("thread_id",a[0]),d[10].set("contact_id",d[2]),d[10].set("sync_group",d[6]),d[11]=c.toJSON(d[10]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),"remove_participant_v2",c.i64.cast([0,140]),d[11],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))}])}):c.resolve()},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticRemoveParticipantsFromGroupThreadStoredProcedure";a.__tables__=["threads","user_visible_network_connectivity_error"];e.exports=a}),null);
__d("LSOptimisticRemoveParticipantsFromGroupThreadStoredProcedure",["LSOptimisticRemoveParticipantsFromGroupThread","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticRemoveParticipantsFromGroupThread"),e.threadKey,e.contactIds);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSOptimisticRemoveThreadStoredProcedure",["LSOptimisticRemoveThread","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticRemoveThread"),e.threadKey,e.removeType);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSOptimisticUnarchiveThread",["LSIssueNewError","LSIssueNewTask","LSLocalize","LSMoveThreadToInboxAndUpdateParent"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(e,f){f=e.done;e=e.value;return f?0:(e.item,c.sequence([function(d){return c.storedProcedure(b("LSMoveThreadToInboxAndUpdateParent"),a[0],c.i64.cast([0,0]))},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[7]=b.syncGroup,c.i64.neq(d[7],void 0)?d[6]=d[7]:d[6]=c.i64.cast([0,1]),d[0]=d[6])})},function(a){return c.sortBy(c.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[2]=!1:(b=a.item,d[2]=b.errorShouldBeShown)})},function(a){return d[2]===!0?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2285622730]),void 0).then(function(a){return d[6]=a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1919524925]),void 0).then(function(a){return d[7]=a})},function(a){return c.storedProcedure(b("LSIssueNewError"),void 0,c.i64.cast([0,1545093]),d[6],d[7],void 0,void 0)}]):c.resolve()},function(e){return d[4]=new c.Map(),d[4].set("thread_id",a[0]),d[4].set("sync_group",d[0]),d[5]=c.toJSON(d[4]),c.storedProcedure(b("LSIssueNewTask"),"unarchive_thread",c.i64.cast([0,242]),d[5],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}]))})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticUnarchiveThreadStoredProcedure";a.__tables__=["threads","user_visible_network_connectivity_error"];e.exports=a}),null);
__d("LSOptimisticUnarchiveThreadStoredProcedure",["LSOptimisticUnarchiveThread","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticUnarchiveThread"),e.threadKey);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSThreadRemoveType",[],(function(a,b,c,d,e,f){a=Object.freeze({DELETE_THREAD:0,ARCHIVE_THREAD:1,IGNORE_THREAD:2});f["default"]=a}),66);
__d("MAWChatLiveLocationDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9800226046700666"}),null);
__d("MAWLoadingStateOutstandingOfflineQueueSelector",["MAWSharedProtocolQueueConst"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return function(b){var c=b.offlineQueueCount,e=b.offlineQueueSyncState;b=b.offlineQueueThreadStatus;if(a!=null&&Object.keys(b).length>0){return b[a]!=null&&((b=b[a])==null?void 0:b.snippetStatus)!==d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete}return c>0&&e!==d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete}};g.outstandingOfflineQueueSelector=a}),98);
__d("MAWReceiverFetchQPLLogger",["I64","MAWLoggerUtils","QPLUserFlow","QuickPerformanceLogger","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=60*1e3,k=c("qpl")._(973799425,"190"),l="error_message",m={PREVIEW_FETCH_START:"preview_fetch_start",PREVIEW_FETCH_TASK_COMPLETED:"preview_fetch_task_completed",RECEIVER_FETCH_XMA_IN_VIEW:"receiver_fetch_xma_in_view"},n={ERROR_PARSING_XMA_DATACLASS_CONTENT:"error_parsing_xma_dataclass_content",EXISTING_ATTACHMENT_IS_NULL:"existing_attachment_is_null",EXISTING_MESSAGE_IS_NULL:"existing_message_is_null",RECEIVER_FECH_PARAMS_IS_NULL:"receiver_fech_params_is_null",RECEIVER_FETCH_TASK_FAILURE:"receiver_fetch_task_failure",TYPENAME_IS_NOT_XMA_SINGLE_CONTENT:"typename_is_not_xma_single_content",XMA_DATACLASS_IS_NULL:"xma_dataclass_is_null"};function o(a,b){a=d("MAWLoggerUtils").getInstanceKeyFromId(a);a!=null&&c("QPLUserFlow").addPoint(k,b,{instanceKey:a})}function a(a,b){a=d("MAWLoggerUtils").getInstanceKeyFromId(a);a!=null&&c("QPLUserFlow").addAnnotations(k,b,{instanceKey:a})}function b(a){var b=d("MAWLoggerUtils").getInstanceKeyFromId(a);if((i||(i=c("QuickPerformanceLogger"))).isMarkerOn(k,b))return;c("QPLUserFlow").start(k,{instanceKey:b,timeoutInMs:j});o(a,m.RECEIVER_FETCH_XMA_IN_VIEW)}function e(a){o(a,m.PREVIEW_FETCH_START)}function f(a){var b=d("MAWLoggerUtils").getInstanceKeyFromId(a);o(a,m.PREVIEW_FETCH_TASK_COMPLETED);c("QPLUserFlow").endSuccess(k,{instanceKey:b})}function p(a,b,e,f){b=n[b];a=d("MAWLoggerUtils").getInstanceKeyFromId(a);c("QPLUserFlow").endFailure(k,b,{annotations:{"int":f!=null?{error_code:(h||(h=d("I64"))).to_int32(f)}:{},string:e!=null?(b={},b[l]=e,b):{}},instanceKey:a})}g.MARKER_POINTS=m;g.FAILURE_REASONS=n;g.logReceiverFetchPoint=o;g.logReceiverFetchAnnotation=a;g.logReceiverFetchXMAStartQPL=b;g.logPreviewFetchStart=e;g.logSuccess=f;g.logFailure=p}),98);
__d("MAWWasmFeatureSupport",["Promise","react","react-compiler-runtime","wasm-feature-detect"],(function(a,b,c,d,e,f,g){"use strict";var h,i;c=i||d("react");var j=c.useEffect,k=c.useState,l=null;function a(){var a=d("react-compiler-runtime").c(2),c=k(l),e=c[0],f=c[1],g;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(c=function(){(h||(h=b("Promise"))).all([d("wasm-feature-detect").bulkMemory(),d("wasm-feature-detect").bigInt(),d("wasm-feature-detect").referenceTypes()]).then(function(a){var b=a[0],c=a[1];a=a[2];f({bigInt:c,bulkMemory:b,referenceTypes:a});l={bigInt:c,bulkMemory:b,referenceTypes:a}})},g=[f],a[0]=c,a[1]=g):(c=a[0],g=a[1]);j(c,g);return e}g.useWasmFeatureSupport=a}),98);
__d("MWCMBulkInviteDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{}},root:c("JSResourceForInteraction")("MWCMBulkInviteDialog.react").__setRef("MWCMBulkInviteDialog.entrypoint")};g["default"]=a}),98);
__d("XGroupsC4GThreadViewControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/groups/{idorvanity}/chats/{thread_id}/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("MWCMLinkShare.react",["fbt","C4gEngagementFalcoEvent","CommunityMessagingEnableState","I64","LSIntEnum","LSThreadBitOffset","MWCMThreadTypes.react","URI","XGroupsC4GThreadViewControllerRouteBuilder","react","react-compiler-runtime","useCommunityFolder","useCopyText","useMWXPushToast"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=j||(j=d("react")),n=j.useMemo;function o(a){var b=a.children,e=a.folder;a=a.thread;var f=(l||(l=d("I64"))).to_string(e.fbGroupId),g=l.to_string(e.folderId),j=l.to_string(a.threadKey),k=c("useMWXPushToast")();e=n(function(){return new(i||(i=c("URI")))(c("XGroupsC4GThreadViewControllerRouteBuilder").buildURL({idorvanity:f,thread_id:j})).setDomain("www.facebook.com").toString()},[f,j]);a=c("useCopyText")({value:e});a[0];e=a[1];var m=a[2];a=function(){m(),c("C4gEngagementFalcoEvent").log(function(){return{action:"tap",community_id:g,event:"thread_user_copy_invite_link",group_id:f,source:"copy_link",surface:"thread_settings",thread_id:j}}),k({body:h._(/*BTDS*/"Link copied")})};return b(e,a)}o.displayName=o.name+" [from "+f.id+"]";function p(a){return(l||(l=d("I64"))).equal(a!=null?a:(k||(k=d("LSIntEnum"))).ofNumber(c("CommunityMessagingEnableState").ENABLED),(k||(k=d("LSIntEnum"))).ofNumber(c("CommunityMessagingEnableState").DISABLE_REQUESTED))}function a(a){var b=c("useCommunityFolder")(a);a=d("LSThreadBitOffset").has(108,a);bb0:{if(b!=null&&a){a=!p(b.enableState);break bb0}a=!1}return a}function b(a){var b=d("react-compiler-runtime").c(4),e=a.children;a=a.thread;var f=c("useCommunityFolder")(a),g=d("MWCMThreadTypes.react").isBroadcastThread(a.threadType);g=d("LSThreadBitOffset").has(108,a)||g;if(f!=null&&g){b[0]!==e||b[1]!==f||b[2]!==a?(g=m.jsx(o,{folder:f,thread:a,children:e}),b[0]=e,b[1]=f,b[2]=a,b[3]=g):g=b[3];return g}return null}g.useShouldShowInviteLink=a;g.MWCMLinkShare=b}),226);
__d("MWCMMemberRequestsDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{}},root:c("JSResourceForInteraction")("MWCMMemberRequestsDialog.react").__setRef("MWCMMemberRequestsDialog.entrypoint")};g["default"]=a}),98);
__d("MWCMShortLinkShare.react",["fbt","C4gEngagementFalcoEvent","I64","MWCMLinkShare.react","MetaConfig","ReQL","ReQLSuspense","react","react-compiler-runtime","useCommunityFolder","useCopyText","useMWXPushToast","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=j||d("react");function m(a){var b=d("react-compiler-runtime").c(12),e=a.children,f=a.communityId,g=a.groupId,i=a.threadKey;a=a.url;var j;b[0]!==a?(j={value:a},b[0]=a,b[1]=j):j=b[1];a=c("useCopyText")(j);j=a[1];var k=a[2],l=c("useMWXPushToast")();b[2]!==f||b[3]!==g||b[4]!==k||b[5]!==l||b[6]!==i?(a=function(){k(),c("C4gEngagementFalcoEvent").log(function(){return{action:"tap",community_id:f,event:"thread_user_copy_invite_link",group_id:g,source:"copy_link",surface:"thread_settings",thread_id:i}}),l({body:h._(/*BTDS*/"Link copied")})},b[2]=f,b[3]=g,b[4]=k,b[5]=l,b[6]=i,b[7]=a):a=b[7];a=a;var m;b[8]!==e||b[9]!==a||b[10]!==j?(m=e(j,a),b[8]=e,b[9]=a,b[10]=j,b[11]=m):m=b[11];return m}function n(a){var b=d("react-compiler-runtime").c(9),c=a.children;a=a.folder;var e=a.inviteLink,f;b[0]!==a.fbGroupId?(f=(k||(k=d("I64"))).to_string(a.fbGroupId),b[0]=a.fbGroupId,b[1]=f):f=b[1];f=f;var g;b[2]!==a.folderId?(g=(k||(k=d("I64"))).to_string(a.folderId),b[2]=a.folderId,b[3]=g):g=b[3];a=g;if(e==null)return null;b[4]!==c||b[5]!==a||b[6]!==f||b[7]!==e?(g=l.jsx(m,{children:c,communityId:a,groupId:f,url:e}),b[4]=c,b[5]=a,b[6]=f,b[7]=e,b[8]=g):g=b[8];return g}function o(a){var b=d("react-compiler-runtime").c(3),e=c("useCommunityFolder")(a.thread),f;b[0]!==e||b[1]!==a?(f=e?l.jsx(p,babelHelpers["extends"]({},a,{folder:e})):null,b[0]=e,b[1]=a,b[2]=f):f=b[2];return f}function p(a){var b=d("react-compiler-runtime").c(11),e=a.folder,g=a.children,h=a.thread,j=(i||(i=c("useReStore")))();a=(a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(j.tables.threads,["threadInviteLink","threadInvitesEnabledV2"]).getKeyRange(h.threadKey)},[j,h.threadKey],f.id+":116"))!=null?a:{};var n=a.threadInviteLink;a=a.threadInvitesEnabledV2;a=a!=null&&(k||(k=d("I64"))).equal(a,(k||(k=d("I64"))).of_int32(1));var o;b[0]!==e.fbGroupId?(o=(k||(k=d("I64"))).to_string(e.fbGroupId),b[0]=e.fbGroupId,b[1]=o):o=b[1];o=o;var p;b[2]!==e.folderId?(p=(k||(k=d("I64"))).to_string(e.folderId),b[2]=e.folderId,b[3]=p):p=b[3];e=p;b[4]!==g||b[5]!==e||b[6]!==o||b[7]!==a||b[8]!==h||b[9]!==n?(p=a&&n!=null&&n!==""&&c("MetaConfig")._("63")?l.jsx(m,{children:g,communityId:e,groupId:o,url:n}):l.jsx(d("MWCMLinkShare.react").MWCMLinkShare,{children:g,thread:h}),b[4]=g,b[5]=e,b[6]=o,b[7]=a,b[8]=h,b[9]=n,b[10]=p):p=b[10];return p}function a(a){var b=d("react-compiler-runtime").c(7),c=a.children,e=a.folder;a=a.thread;if(a==null&&e!=null){var f;b[0]!==c||b[1]!==e?(f=l.jsx(n,{children:c,folder:e}),b[0]=c,b[1]=e,b[2]=f):f=b[2];return f}if(a!=null){b[3]!==c||b[4]!==e||b[5]!==a?(f=e!=null?l.jsx(p,{children:c,folder:e,thread:a}):l.jsx(o,{children:c,thread:a}),b[3]=c,b[4]=e,b[5]=a,b[6]=f):f=b[6];return f}return null}g["default"]=a}),226);
__d("MWCallingRestrictionDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){return{}},root:c("JSResourceForInteraction")("MWCallingRestrictionDialog.react").__setRef("MWCallingRestrictionDialog.entrypoint")};g["default"]=a}),98);
__d("MsgrFaceRecognitionEntryClientEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4057");b=d("FalcoLoggerInternal").create("msgr_face_recognition_entry_client_events",a);e=b;g["default"]=e}),98);
__d("MsgrMessagingRestrictionsFaceRecognitionClientEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1524");b=d("FalcoLoggerInternal").create("msgr_messaging_restrictions_face_recognition_client_events",a);e=b;g["default"]=e}),98);
__d("MWCallingRestrictionLogger",["MsgrFaceRecognitionEntryClientEventsFalcoEvent","MsgrMessagingRestrictionsFaceRecognitionClientEventsFalcoEvent","Promise","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");j.useCallback;var k=j.useEffect,l=j.useRef;function a(a,b){var c=d("react-compiler-runtime").c(4),e=b===void 0?"messaging_restriction_face_rec_appeal_dialog":b,f=l(!1),g;c[0]!==e||c[1]!==a?(b=function(){f.current||(f.current=!0,m(e,a))},g=[e,a],c[0]=e,c[1]=a,c[2]=b,c[3]=g):(b=c[2],g=c[3]);k(b,g)}function e(){var a=d("react-compiler-runtime").c(1),b=l(!1),c;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(c=function(){b.current||(b.current=!0,m("msgr_face_rec_composer_block"))},a[0]=c):c=a[0];return c}function m(a,d){if(a==="msgr_face_rec_appeal_dialog"){c("MsgrFaceRecognitionEntryClientEventsFalcoEvent").logAsync(function(){return new(h||(h=b("Promise")))(function(a,b){a({current_module:"msgr_face_rec_appeal_dialog",event_name:"impression"})})});return}c("MsgrMessagingRestrictionsFaceRecognitionClientEventsFalcoEvent").logAsync(function(){return new(h||(h=b("Promise")))(function(b,c){b({current_module:a,event_name:"impression",trigger:d})})})}function f(){var a=d("react-compiler-runtime").c(1),e=l(!1),f;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=function(a,d){e.current||(e.current=!0,c("MsgrMessagingRestrictionsFaceRecognitionClientEventsFalcoEvent").logAsync(function(){return new(h||(h=b("Promise")))(function(b,c){b({current_module:"messaging_restriction_face_rec_appeal_dialog",event_name:a,trigger:d})})}))},a[0]=f):f=a[0];return f}g.useLogDialogImpression=a;g.useLogComposerBlockImpression=e;g.useLogButtonClick=f}),98);
__d("MWChannelInviteDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{}},root:c("JSResourceForInteraction")("MWChannelInviteDialog.react").__setRef("MWChannelInviteDialog.entrypoint")};g["default"]=a}),98);
__d("MWContactDetails",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a!=null)return a.name}function b(a){if(a==null)return;var b=a.firstName;if(b!=null)return b;else return a.name}function c(a){if(a!=null)return a.secondaryName}f.getName=a;f.getShortName=b;f.getSecondaryName=c}),66);
__d("MWGetLSThreadReportingTokenFromThread",["I64","LSMessagingThreadTypeUtil","LSThreadBitOffset"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=d("LSThreadBitOffset").has(17,a);if(b)return d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType)?window.btoa("message_thread:encrypted"):window.btoa("message_thread:"+(h||(h=d("I64"))).to_string(a.threadKey))}g["default"]=a}),98);
__d("MWJoinChannelComposerPlaceholder.react",["fbt","$InternalEnum","JSResourceForInteraction","MWXColumn.react","MWXColumnItem.react","MWXGlimmer.react","MWXText.react","lazyLoadComponent","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWBroadcastChannelMemberComposer.react").__setRef("MWJoinChannelComposerPlaceholder.react")),l={buttonGlimmer:{borderStartStartRadius:"x14ldlfn",borderStartEndRadius:"x1b1wa69",borderEndEndRadius:"xws8118",borderEndStartRadius:"x5fzff1",height:"x10w6t97",maxWidth:"x1e4dklr",width:"xh8yej3",$$css:!0},root:{borderTopColor:"x1exxf4d",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",$$css:!0}},m=b("$InternalEnum").Mirrored(["Broadcast","Social"]);function a(a){var b=d("react-compiler-runtime").c(8),e=a.channelType;a=a.threadKey;bb0:{switch(e){case m.Broadcast:b[0]!==a?(e=j.jsx(k,{isJoined:!1,threadKey:a}),b[0]=a,b[1]=e):e=b[1];a=e;break bb0;case m.Social:b[2]===Symbol["for"]("react.memo_cache_sentinel")?(e=h._(/*BTDS*/"Anyone can find and join this channel. If you join, it will be shown in your inbox. Members can see info such as your Active Status and when you've read messages."),b[2]=e):e=b[2];a=e;break bb0}a=void 0}e=a;b[3]!==e?(a=j.jsx(c("MWXColumnItem.react"),{children:j.jsx(c("MWXText.react"),{align:"center",type:"meta3",children:e})}),b[3]=e,b[4]=a):a=b[4];b[5]===Symbol["for"]("react.memo_cache_sentinel")?(e=j.jsx(c("MWXColumnItem.react"),{align:"center",children:j.jsx(c("MWXGlimmer.react"),{index:0,xstyle:l.buttonGlimmer})}),b[5]=e):e=b[5];b[6]!==a?(e=j.jsxs(c("MWXColumn.react"),{paddingHorizontal:16,paddingVertical:16,spacing:16,xstyle:l.root,children:[a,e]}),b[6]=a,b[7]=e):e=b[7];return e}g.ChannelType=m;g.MWJoinChannelComposerPlaceholder=a}),226);
__d("MWLSGroupMembershipDialogQuery$Parameters",["MWLSGroupMembershipDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWLSGroupMembershipDialogQuery_facebookRelayOperation"),metadata:{},name:"MWLSGroupMembershipDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWLSGroupMembershipDialog.entrypoint",["JSResourceForInteraction","MWLSGroupMembershipDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){a=a.groupID;return{queries:{queryRef:{parameters:c("MWLSGroupMembershipDialogQuery$Parameters"),variables:{groupID:a}}}}},root:c("JSResourceForInteraction")("MWLSGroupMembershipDialog.react").__setRef("MWLSGroupMembershipDialog.entrypoint")};g["default"]=a}),98);
__d("MWMessageRequestSharedTexts.react",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){return h._(/*BTDS*/"If you reply, {FBFullName} will also be able to call you and see info such as your Active Status and when you've read messages.",[h._param("FBFullName",a)])}function b(a){return h._(/*BTDS*/"If you reply, {FBFullName} will be able to message and call you.",[h._param("FBFullName",a)])}function c(a){return h._(/*BTDS*/"I Don't Want to Hear from {name}",[h._param("name",a)])}function d(a){return h._(/*BTDS*/"You can permanently delete the conversation or block {FBShortName} from sending you messages or calls. We won't tell them that you've taken these actions.",[h._param("FBShortName",a)])}function e(){return h._(/*BTDS*/"You can open a message request for more info on who sent it. They won't be notified that you opened it.")}function f(){return h._(/*BTDS*/"Requests")}g.getFBUserInfoTextMessage=a;g.getFBUserInfoTextMessageForMSplit=b;g.getDefaultInfoTextFooter=c;g.getDeclineUserDialogText=d;g.getMessageRequestHeaderInfoText=e;g.getMessageRequestHeaderTitleText=f}),226);
__d("MWThreadLiveLocationSessionsSetterContext.react",["emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");h||(h=c("react"));e=b.createContext;var j=b.useContext,k=e({addOrUpdateSession:c("emptyFunction")});function a(){return j(k)}g.MAWThreadLiveLocationSessionsSetterContext=k;g.useThreadMAWLiveLocationSessionsSetterContext=a}),98);
__d("MWThreadLiveLocationSessionsStateContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");h||(h=c("react"));e=b.createContext;var j=b.useContext,k=e({sessions:{}});function a(){return j(k)}g.MAWThreadLiveLocationSessionsStateContext=k;g.useThreadMAWLiveLocationSessionsStateContext=a}),98);
__d("MWWorkForeignEntityTypeUtils",["I64","LSContactWorkForeignEntityType","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactWorkForeignEntityType").NOT_FOREIGN))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactWorkForeignEntityType").UNKNOWN)))return"NOT_FOREIGN";else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactWorkForeignEntityType").NOT_FOREIGN_LIMITED)))return"LIMITED";else return"FOREIGN"}g.getWorkForeignEntityType=a}),98);
__d("MWXIconBell",["MWXSvgIcon","SVGIcon","cr:22225","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22225")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconCheckmarkCircle",["MWXSvgIcon","SVGIcon","cr:22261","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22261")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconForListCell.react",["MWXIconStrict.react","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("gkx")("23219")?16:20,k=c("gkx")("23219")?28:36;function a(a){var b=d("react-compiler-runtime").c(7),e=a.alt,f=a.color,g=a.hasBackground,h=a.icon,l=a.isDecorative;a=a.size;g=g===void 0?!0:g;a=a===void 0?"medium":a;a==="medium"?a=g?k:j:a=g?36:20;var m;b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==h||b[4]!==a||b[5]!==l?(m=i.jsx(c("MWXIconStrict.react"),{alt:e,backgroundEnabled:g,color:f,icon:h,isDecorative:l,size:a}),b[0]=e,b[1]=f,b[2]=g,b[3]=h,b[4]=a,b[5]=l,b[6]=m):m=b[6];return m}g["default"]=a}),98);
__d("MWXIconLink",["MWXSvgIcon","SVGIcon","cr:22385","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22385")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconPencil",["MWXSvgIcon","SVGIcon","cr:22423","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22423")),c("gkx")("23219"));g["default"]=a}),98);
__d("MessengerBellFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{d:"M18 7a6.569 6.569 0 0 1 6.467 5.414l1.367 7.658a3 3 0 0 0 .832 1.594l.92.92a1.414 1.414 0 0 1-1 2.414H9.414a1.414 1.414 0 0 1-1-2.414l.92-.92a3 3 0 0 0 .832-1.594l1.367-7.658A6.569 6.569 0 0 1 18 7zM15.5 27c-.276 0-.504.226-.459.498a3 3 0 0 0 5.918 0c.045-.273-.183-.498-.459-.498h-5z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerCheckmarkCircleFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 29c6.075 0 11-4.925 11-11S24.075 7 18 7 7 11.925 7 18s4.925 11 11 11zm4.865-14.498a1 1 0 0 0-1.73-1.004l-3.829 6.595a.25.25 0 0 1-.393.05l-2.206-2.205a1 1 0 1 0-1.414 1.414l3.355 3.355a1 1 0 0 0 1.572-.205l4.645-8z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerChevronDownFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M8.866 14.116a1.25 1.25 0 0 1 1.768 0l7.19 7.19a.25.25 0 0 0 .353 0l7.19-7.19a1.25 1.25 0 0 1 1.767 1.768l-8.25 8.25a1.25 1.25 0 0 1-1.768 0l-8.25-8.25a1.25 1.25 0 0 1 0-1.768z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerFriendGenericAddFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{d:"M17.25 12.305C17.25 16.207 19.446 18 22 18s4.75-1.793 4.75-5.695C26.75 9.123 24.75 7 22 7s-4.75 2.123-4.75 5.305zM29.94 28c.69 0 1.06-.595 1.06-1.335C31 22.985 26.835 20 22 20s-9 2.985-9 6.665c0 .74.37 1.335 1.06 1.335h15.88zM8 12a1 1 0 1 1 2 0v2.75c0 .138.112.25.25.25H13a1 1 0 1 1 0 2h-2.75a.25.25 0 0 0-.25.25V20a1 1 0 1 1-2 0v-2.75a.25.25 0 0 0-.25-.25H5a1 1 0 1 1 0-2h2.75a.25.25 0 0 0 .25-.25V12z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerMessageFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M29 17.504c0 6.103-4.606 10.57-11 10.57-1.065 0-2.08-.095-3.032-.327a4.26 4.26 0 0 0-2.39.09L8.91 28.962c-.59.202-1.164-.372-.964-.985l.729-2.411a3.007 3.007 0 0 0-.291-2.5C7.414 21.484 7 19.596 7 17.504v-.002c0-6.103 4.607-10.498 11-10.498S29 11.399 29 17.502v.002z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("RecoverableViolation.react",["FBLogger","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef;function a(a){var b=d("react-compiler-runtime").c(4),e=a.errorMessage,f=a.errorObject,g=a.projectName,h=j(!1);b[0]!==e||b[1]!==f||b[2]!==g?(a=function(){if(!h.current){var a=c("FBLogger")(g);(f==null?void 0:f.error)!=null?a.catching(f.error):a.blameToPreviousFrame();a.mustfix(e);h.current=!0}},b[0]=e,b[1]=f,b[2]=g,b[3]=a):a=b[3];i(a,void 0);return null}g["default"]=a}),98);
__d("XCometSettingsControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/settings/",Object.freeze({show_dialog:!1,show_recommendable_nux:!1}),void 0);b=a;g["default"]=b}),98);
__d("getMWV2HeaderSettingsPopoverTooltip",["fbt","LSMessagingThreadTypeUtil"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){a=a.threadType;a=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a);return a?h._(/*BTDS*/"_j[\"Channel settings\",\"f580546da084946da3d6f61e3cc636da\",1]"):h._(/*BTDS*/"Chat settings")}g["default"]=a}),226);
__d("useMAWHasUserVisibleErrors",["ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("react-compiler-runtime").c(4),b=(h||(h=c("useReStore")))(),e;a[0]!==b.tables.user_visible_errors?(e=function(){return d("ReQL").fromTableDescending(b.tables.user_visible_errors).filter(i)},a[0]=b.tables.user_visible_errors,a[1]=e):e=a[1];var g;a[2]!==b?(g=[b],a[2]=b,a[3]=g):g=a[3];a=d("ReQLSuspense").useFirst(e,g,f.id+":24");return a!=null}function i(a){a=a.presentationStyle;return a==="banner"}g["default"]=a}),98);
__d("useMAWOfflineQueueLoadingIndicatorThreadJid",["I64","Int64Hooks","LSMessagingThreadTypeUtil","MAWJids","ReQL","WAJids","promiseDone","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useState;function a(a,b){var e=d("react-compiler-runtime").c(7),f=(h||(h=c("useReStore")))(),g=k(null),j=g[0],l=g[1];e[0]!==b?(g=b!=null?d("LSMessagingThreadTypeUtil").isGroup(b):!1,e[0]=b,e[1]=g):g=e[1];var m=g;e[2]!==f||e[3]!==m||e[4]!==a?(b=function(){if(a==null)return;c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(f.tables.mi_act_mapping_table).getKeyRange(a)),function(a){if(a!=null){a=(i||(i=d("I64"))).to_string(a.jid);a=m===!0?d("WAJids").toGroupJid(a):d("MAWJids").toUserJid(a);l(a)}})},g=[f,l,a,m],e[2]=f,e[3]=m,e[4]=a,e[5]=b,e[6]=g):(b=e[5],g=e[6]);d("Int64Hooks").useEffectInt64(b,g);return j}g["default"]=a}),98);
__d("useMAWOfflineQueueLoadingIndicator",["Int64Hooks","MAWLoadingStateOutstandingOfflineQueueSelector","MAWStateContext.react","react-compiler-runtime","useCometRouterState","useMAWOfflineQueueLoadingIndicatorThreadJid"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e){var f=d("react-compiler-runtime").c(4);a=a===void 0?!1:a;var g=e===void 0?d("MAWLoadingStateOutstandingOfflineQueueSelector").outstandingOfflineQueueSelector:e,h=c("useMAWOfflineQueueLoadingIndicatorThreadJid")(b==null?void 0:b.threadKey,b==null?void 0:b.threadType);e=c("useCometRouterState")();var i;f[0]!==g||f[1]!==h?(b=function(){return g(h)},i=[g,h],f[0]=g,f[1]=h,f[2]=b,f[3]=i):(b=f[2],i=f[3]);f=d("Int64Hooks").useMemoInt64(b,i);b=d("MAWStateContext.react").useMAWSelector(f);i=e==null?void 0:e.main.route.tabKey;return b&&(i==="messenger"||!a)}g["default"]=a}),98);
__d("useMAWUnsupportedBrowserNUX",["MAWIsIDBOperational","MAWWasmFeatureSupport","WebStorage","gkx","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("react-compiler-runtime").c(3),b=d("MAWIsIDBOperational").useIsIDBOperational(),e=d("MAWWasmFeatureSupport").useWasmFeatureSupport();e=e==null||e.bigInt&&e.bulkMemory&&e.referenceTypes;b=!b||!e||(h||(h=c("WebStorage"))).getLocalStorage()==null;e=c("gkx")("1778")||b;var f;a[0]!==b||a[1]!==e?(f={shouldHideEBFlow:b,shouldShowQP:e},a[0]=b,a[1]=e,a[2]=f):f=a[2];return f}g.useMAWUnsupportedBrowserNUX=a}),98);
__d("useMWChatUnmuteThread",["I64","LSFactory","LSIntEnum","LSMailboxType","LSMuteCallsFromThreadStoredProcedure","LSOptimisticMuteThreadStoredProcedure","promiseDone","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;(k||d("react")).useCallback;function a(){var a=d("react-compiler-runtime").c(2),b=(h||(h=c("useReStore")))(),e=(i||(i=d("I64"))).zero,g;a[0]!==b?(g=function(a){(i||(i=d("I64"))).equal(a.muteExpireTimeMs,e)||c("promiseDone")(b.runInTransaction(function(b){return c("LSOptimisticMuteThreadStoredProcedure")(c("LSFactory")(b),{mailboxType:(j||(j=d("LSIntEnum"))).ofNumber(c("LSMailboxType").MESSENGER),muteExpireTimeMs:(i||(i=d("I64"))).zero,threadKey:a.threadKey})},"readwrite",void 0,void 0,f.id+":36"));if(!(i||(i=d("I64"))).equal(a.muteCallsExpireTimeMs,e)){c("promiseDone")(b.runInTransaction(function(b){return c("LSMuteCallsFromThreadStoredProcedure")(c("LSFactory")(b),{mailboxType:(j||(j=d("LSIntEnum"))).ofNumber(c("LSMailboxType").MESSENGER),muteCallsExpireTimeMs:(i||(i=d("I64"))).zero,threadKey:a.threadKey})},"readwrite",void 0,void 0,f.id+":49"));return}},a[0]=b,a[1]=g):g=a[1];return g}g["default"]=a}),98);
__d("useMWHasAppealableMessageSendFeatureLimit",["I64","LSFeatureLimitsType","LSIntEnum","ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;(k||d("react")).useCallback;function a(){var a=d("react-compiler-runtime").c(6),b=(h||(h=c("useReStore")))(),e;a[0]!==b.tables.feature_limits?(e=function(){return d("ReQL").fromTableAscending(b.tables.feature_limits).filter(l)},a[0]=b.tables.feature_limits,a[1]=e):e=a[1];var g;a[2]!==b?(g=[b],a[2]=b,a[3]=g):g=a[3];var i=d("ReQLSuspense").useFirst(e,g,f.id+":25");a[4]!==i?(e=function(){return i!=null},a[4]=i,a[5]=e):e=a[5];return e}function l(a){return(i||(i=d("I64"))).equal(a.type_,(j||(j=d("LSIntEnum"))).ofNumber(c("LSFeatureLimitsType").MESSENGER_APPEALABLE_MESSAGE_SEND))}g["default"]=a}),98);
__d("useMWJumpToMessageWrapper",["useMWJumpToMessage"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("useMWJumpToMessage")(a.source)}g["default"]=a}),98);
__d("useMWLSUnarchiveThread",["LSFactory","LSOptimisticUnarchiveThreadStoredProcedure","promiseDone","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useCallback;function a(){var a=d("react-compiler-runtime").c(2),b=(h||(h=c("useReStore")))(),e;a[0]!==b?(e=function(a){c("promiseDone")(b.runInTransaction(function(b){return c("LSOptimisticUnarchiveThreadStoredProcedure")(c("LSFactory")(b),{threadKey:a})},"readwrite",void 0,void 0,f.id+":25"))},a[0]=b,a[1]=e):e=a[1];return e}g["default"]=a}),98);
__d("useMWV2StartGroupCall",["I64","Int64Hooks","JSResourceForInteraction","LSIntEnum","LSMessagingThreadTypeUtil","MWCallingRestrictionDialog.entrypoint","ZenonProductConnectFunnel","getRTCCallStateOfLSRTCCallState","react-compiler-runtime","useMWXEntryPointDialog","useMWXLazyDialog","useRTWebCometStartCallCallback"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,e){var f=d("react-compiler-runtime").c(12),g=c("useRTWebCometStartCallCallback")(),j;f[0]===Symbol["for"]("react.memo_cache_sentinel")?(j=c("JSResourceForInteraction")("MWChatRestrictedUserInGroupInterstitialDialog.react").__setRef("useMWV2StartGroupCall"),f[0]=j):j=f[0];j=c("useMWXLazyDialog")(j);var k=j[0];f[1]===Symbol["for"]("react.memo_cache_sentinel")?(j=c("JSResourceForInteraction")("MWGroupCallBlockedUserInGroupInterstitialDialog.react").__setRef("useMWV2StartGroupCall"),f[1]=j):j=f[1];j=c("useMWXLazyDialog")(j);var l=j[0];f[2]===Symbol["for"]("react.memo_cache_sentinel")?(j={},f[2]=j):j=f[2];j=c("useMWXEntryPointDialog")(c("MWCallingRestrictionDialog.entrypoint"),j);var m=j[0],n;f[3]!==b||f[4]!==a||f[5]!==l||f[6]!==m||f[7]!==k||f[8]!==g||f[9]!==e?(j=function(f){var j,n=f.jid,o=f.ongoingCallServerInfoData,p=f.otherParticipantId,q=f.restrictedUsers,r=f.blockedUsers,s=f.partialThread;f=f.hasAppealableMessageSendFeatureLimit;q=q===void 0?[]:q;r=r===void 0?[]:r;var t=s.ongoingCallState,u=s.threadKey;s=s.threadType;f=f===void 0?!1:f;a();j=(j=d("LSMessagingThreadTypeUtil").isGroup(s))!=null?j:!1;var v=j&&q.length>0;j=j&&r.length>0;var w={existingCall:o!=null?{call_state:c("getRTCCallStateOfLSRTCCallState")((h||(h=d("LSIntEnum"))).unwrapIntEnum(t),(h||(h=d("LSIntEnum"))).unwrapIntEnum(s)),initiator_fbid:null,server_info_data:o}:null,isE2eeMandated:d("LSMessagingThreadTypeUtil").isArmadilloSecure(s),mediaType:b,thread:{e2eeThreadID:n!=null?(i||(i=d("I64"))).to_string(n):void 0,id:(i||(i=d("I64"))).to_string(u),secureOneToOneThreadPeerId:p!=null&&(i||(i=d("I64"))).equal(s,(h||(h=d("LSIntEnum"))).ofNumber(15))?(i||(i=d("I64"))).to_string(p):void 0,type:(h||(h=d("LSIntEnum"))).unwrapIntEnum(s)},trigger:e};if(j)return l({blockedUsers:r,onContinue:function(){return g(w)},threadKey:u});if(v)return k({onContinue:function(){return g(w)},restrictedUsers:q});if(f)return m({trigger:b==="audio"?"in_thread_voice_call":"in_thread_video_call"});c("ZenonProductConnectFunnel").setUITriggered();return g(w)},n=[a,b,e,g,l,k,m],f[3]=b,f[4]=a,f[5]=l,f[6]=m,f[7]=k,f[8]=g,f[9]=e,f[10]=j,f[11]=n):(j=f[10],n=f[11]);return d("Int64Hooks").useCallbackInt64(j,n)}g["default"]=a}),98);
__d("useMWReQLStartGroupCall",["Actor","I64","Int64Hooks","LSContactBitOffset","ReQL","promiseDone","react-compiler-runtime","useAsyncReStore","useBlockedUserInterstitial","useMWHasAppealableMessageSendFeatureLimit","useMWV2StartGroupCall"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e,f){var g=d("react-compiler-runtime").c(9),h=a.ongoingCallState,m=a.threadKey,n=a.threadType,o=c("useAsyncReStore")();a=d("Actor").useActor();var p=a[0],q=c("useMWV2StartGroupCall")(b,e,f),r=c("useMWHasAppealableMessageSendFeatureLimit")();g[0]!==r||g[1]!==p||g[2]!==o||g[3]!==h||g[4]!==q||g[5]!==m||g[6]!==n?(a=function(){c("promiseDone")(o,async function(a){var b;b=await Promise.all([(b=d("ReQL")).firstAsync(b.fromTableAscending(a.tables.mi_act_mapping_table).getKeyRange(m).map(i)),b.firstAsync(k(a,m,p)),b.firstAsync(l(a,m)),b.toArrayAsync(j(a,m)),b.toArrayAsync(await d("useBlockedUserInterstitial").getBlockedUserQuery(a,m,n)),r()]);a=b[0];var c=b[1],e=b[2],f=b[3],g=b[4];b=b[5];q({blockedUsers:g,hasAppealableMessageSendFeatureLimit:b,jid:a,ongoingCallServerInfoData:e,otherParticipantId:c,partialThread:{ongoingCallState:h,threadKey:m,threadType:n},restrictedUsers:f})})},b=[o,m,p,n,r,q,h],g[0]=r,g[1]=p,g[2]=o,g[3]=h,g[4]=q,g[5]=m,g[6]=n,g[7]=a,g[8]=b):(a=g[7],b=g[8]);return d("Int64Hooks").useCallbackInt64(a,b)}function i(a){return a.jid}var j=function(a,b){return d("ReQL").mergeJoin(d("ReQL").fromTableAscending(a.tables.participants).getKeyRange(b).take(20),d("ReQL").fromTableAscending(a.tables.contacts)).filter(function(a){a[0];a=a[1];return(a=d("LSContactBitOffset").has(66,a))!=null?a:!1}).map(function(a){a[0];a=a[1];return a})},k=function(a,b,c){return d("ReQL").fromTableAscending(a.tables.participants).getKeyRange(b).filter(function(a){return!(h||(h=d("I64"))).equal(a.contactId,h.of_string(c))}).map(function(a){return a.contactId})},l=function(a,b){return d("ReQL").fromTableAscending(a.tables.rtc_ongoing_calls_on_threads_v2).getKeyRange(b).map(function(a){return a.ongoingCallServerInfoData})};g.default=a}),98);/*FB_PKG_DELIM*/
__d("CometObjectFitContainer.react",["cr:964538","isStringNullOrEmpty","react","react-compiler-runtime","stylex","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={inner:{height:"x5yr21d",position:"x1n2onr6",width:"xh8yej3",$$css:!0},innerWithAspectRatio:{bottom:"x1ey2m1c",boxSizing:"x9f619",insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",left:null,right:null,position:"x10l6tqk",top:"x13vifvy",$$css:!0},outer:{height:"x5yr21d",position:"x1n2onr6",width:"xh8yej3",$$css:!0},outerWithAspectRatio:{height:"xt7dq6l",$$css:!0}};function l(a){var b=d("react-compiler-runtime").c(21),e=a.children,f=a.debugRole,g=a.innerInlineStyle,i=a.innerXStyle,l=a.outerInlineStyle,m=a.outerRef,n=a.outerXStyle;a=a.testid;var o=c("isStringNullOrEmpty")(a)?void 0:a+"-outer";a=c("isStringNullOrEmpty")(a)?void 0:a+"-inner";var p;b[0]!==f?(p={},b[0]=f,b[1]=p):p=b[1];var q;b[2]!==n?(q=(h||(h=c("stylex")))(k.outer,n),b[2]=n,b[3]=q):q=b[3];b[4]!==f?(n={},b[4]=f,b[5]=n):n=b[5];b[6]!==i?(f=(h||(h=c("stylex")))(k.inner,i),b[6]=i,b[7]=f):f=b[7];b[8]!==e||b[9]!==g||b[10]!==n||b[11]!==f||b[12]!==a?(i=j.jsx("div",babelHelpers["extends"]({},n,{className:f,"data-testid":void 0,style:g,children:e})),b[8]=e,b[9]=g,b[10]=n,b[11]=f,b[12]=a,b[13]=i):i=b[13];b[14]!==l||b[15]!==m||b[16]!==p||b[17]!==q||b[18]!==i||b[19]!==o?(e=j.jsx("div",babelHelpers["extends"]({},p,{className:q,"data-testid":void 0,ref:m,style:l,children:i})),b[14]=l,b[15]=m,b[16]=p,b[17]=q,b[18]=i,b[19]=o,b[20]=e):e=b[20];return e}function a(a){var b=d("react-compiler-runtime").c(13),e=a.children,f=a.contentAspectRatio,g=a.debugRole,h=a.objectFitMode,i=a.ref;a=a.testid;h=h===void 0?"CONTAINER_SIZE":h;f=f!=null&&isFinite(f)&&f>0?f:1.7777777777777777;if(h==="CONTAINER_WIDTH_BASED_ASPECT_RATIO"){f=isFinite(f)&&f>0?100/f:100;f=f.toFixed(5)+"%";var m;b[0]!==f?(m={paddingBottom:f},b[0]=f,b[1]=m):m=b[1];f=m;b[2]!==e||b[3]!==g||b[4]!==f||b[5]!==i||b[6]!==a?(m=j.jsx(l,{children:e,debugRole:g,innerXStyle:k.innerWithAspectRatio,outerInlineStyle:f,outerRef:i,outerXStyle:k.outerWithAspectRatio,testid:void 0}),b[2]=e,b[3]=g,b[4]=f,b[5]=i,b[6]=a,b[7]=m):m=b[7];return m}else if(h==="CONTAINER_SIZE"){b[8]!==e||b[9]!==g||b[10]!==i||b[11]!==a?(f=j.jsx(l,{children:e,debugRole:g,outerRef:i,testid:void 0}),b[8]=e,b[9]=g,b[10]=i,b[11]=a,b[12]=f):f=b[12];return f}else throw c("unrecoverableViolation")("Unsupported objectFitMode "+h,"comet_ui")}g["default"]=a}),98);
__d("VideoPlayerAudioAvailabilityInfo",["recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.audioAvailability;a=a.mutedSegmentsUnsanitized;a=a.map(function(a){return a.muteStartTimeInSec!=null&&a.muteEndTimeInSec!=null&&a.muteEndTimeInSec>a.muteStartTimeInSec?{muteEndTimeInSec:a.muteEndTimeInSec,muteStartTimeInSec:a.muteStartTimeInSec}:null}).filter(Boolean);return{audioAvailability:b,mutedSegments:a}}function b(a,b){var d=a.audioAvailability;a=a.mutedSegments;var e=b.playheadPosition,f;b=!1;var g=!1;switch(d){case"AVAILABLE_BUT_MUTED":a.length>0?(b=e!=null&&a.some(function(a){return a.muteStartTimeInSec<=e&&e<=a.muteEndTimeInSec}),b?(f="VOLUME_COPYRIGHT_PARTIAL_SILENCED",g=!0):f="VOLUME_COPYRIGHT_PARTIAL_NOT_SILENCED"):(f="VOLUME_COPYRIGHT_FULL",g=!0);break;case"AVAILABLE_BUT_SILENT":case"UNAVAILABLE":f="VOLUME_SILENT";g=!0;break;case"AVAILABLE":case"UNKNOWN":case"AVAILABLE_BUT_MISSING_LOUDNESS_DATA":case null:case void 0:f="VOLUME_DEFAULT";break;default:c("recoverableViolation")("Unhandled audio availability: "+d,"comet_video_player");f="VOLUME_DEFAULT";break}return{isPlayheadWithinMutedSegment:b,isSilentAtPlayhead:g,volumeControlState:f}}d=a({audioAvailability:null,mutedSegmentsUnsanitized:[]});g.makeVideoPlayerAudioAvailabilityInfo=a;g.makeVideoPlayerAudioAvailabilityAtPlayheadInfo=b;g.VideoPlayerAudioAvailabilityInfoDefault=d}),98);
__d("CoreVideoPlayerImplementationCallbacks",["VideoPlayerAudioAvailabilityInfo","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.useEffect,j=b.useRef;function a(a){var b=d("react-compiler-runtime").c(30),c=a.coreVideoPlayerMetaData,e=a.dimensions,f=a.instanceKey,g=a.isFullscreen,h=a.onCoreVideoStatesChanged,k=a.renderWithCoreVideoStates,l=a.videoPlayerPassiveViewabilityInfo;b[0]!==c.adClientToken||b[1]!==c.audioAvailabilityInfo||b[2]!==c.autoplayGatingResult||b[3]!==c.autoplaySetting||b[4]!==c.broadcastStatus||b[5]!==c.canAutoplay||b[6]!==c.initialTracePolicy||b[7]!==c.isNCSR||b[8]!==c.isPremiumMusicVideo||b[9]!==c.videoFBID||b[10]!==c.videoPixelsAspectRatio||b[11]!==c.volumeSetting||b[12]!==e||b[13]!==f||b[14]!==g||b[15]!==l?(a=function(a){var b,h=a.implementationController;a=a.implementationExposedState;b={adClientToken:c.adClientToken,audioAvailabilityInfo:(b=c.audioAvailabilityInfo)!=null?b:d("VideoPlayerAudioAvailabilityInfo").VideoPlayerAudioAvailabilityInfoDefault,autoplayGatingResult:c.autoplayGatingResult!=null?c.autoplayGatingResult:"unknown",autoplaySetting:c.autoplaySetting,broadcastStatus:c.broadcastStatus,canAutoplay:c.canAutoplay!=null?c.canAutoplay:"allow",controller:h,dimensions:e,duration:a.duration,initialTracePolicy:c.initialTracePolicy,instanceKey:f,isDesktopPictureInPicture:a.isDesktopPictureInPicture,isFullscreen:g,isNCSR:Boolean(c.isNCSR),isPremiumMusicVideo:Boolean(c.isPremiumMusicVideo),lastMuteReason:a.lastMuteReason,lastPauseReason:a.lastPauseReason,lastPlayReason:a.lastPlayReason,loopCount:a.loopCount,loopCurrent:a.loopCurrent,videoFBID:c.videoFBID,videoPixelsAspectRatio:c.videoPixelsAspectRatio,videoPlayerPassiveViewabilityInfo:l,videoState:a,volumeSetting:c.volumeSetting};return b},b[0]=c.adClientToken,b[1]=c.audioAvailabilityInfo,b[2]=c.autoplayGatingResult,b[3]=c.autoplaySetting,b[4]=c.broadcastStatus,b[5]=c.canAutoplay,b[6]=c.initialTracePolicy,b[7]=c.isNCSR,b[8]=c.isPremiumMusicVideo,b[9]=c.videoFBID,b[10]=c.videoPixelsAspectRatio,b[11]=c.volumeSetting,b[12]=e,b[13]=f,b[14]=g,b[15]=l,b[16]=a):a=b[16];var m=a;b[17]!==m||b[18]!==k?(a=function(a){a=m(a);return k(a)},b[17]=m,b[18]=k,b[19]=a):a=b[19];a=a;var n=j(null),o;b[20]!==m||b[21]!==h?(o=function(a){n.current=a.implementationController;if(h){a=m(a);h(a)}},b[20]=m,b[21]=h,b[22]=o):o=b[22];o=o;var p,q;b[23]!==m||b[24]!==h?(p=function(){var a=n.current;if(h&&a){a=m({implementationController:a,implementationExposedState:a.getCurrentState()});h(a)}},q=[h,m],b[23]=m,b[24]=h,b[25]=p,b[26]=q):(p=b[25],q=b[26]);i(p,q);b[27]!==o||b[28]!==a?(p={onExposedStateChanged:o,renderWithExposedState:a},b[27]=o,b[28]=a,b[29]=p):p=b[29];return p}g.useImplementationCallbacks=a}),98);
__d("VideoPlayerOnViewability.react",["DOMRectIsEqual","DOMRectReadOnly","VideoPlayerViewabilityConstants","emptyFunction","react","useIntersectionObserver","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useMemo,m=b.useRef,n=10,o=[.25,.75,.99,1].concat(new Array(10).fill().map(function(a,b){return b/10}));function a(a){var b=a.viewportMargins,d=m(-1),e=m(-1),f=m(c("DOMRectReadOnly").fromRect({height:0,width:0,x:0,y:0})),g=m(null),i=m(null);b=-b.top+"px "+-b.right+"px "+-b.bottom+"px "+-b.left+"px";var p=a.onVideoPlayerViewabilityInfoChange||c("emptyFunction"),q=n,r=k(function(a){if(a.time>e.current&&!c("DOMRectIsEqual")(a.boundingClientRect,f.current)){var b=a.boundingClientRect,d=b.height,h=b.width,i=b.x;b=b.y;var j=g.current;d=c("DOMRectReadOnly").fromRect({height:d,width:h,x:i,y:b});f.current=d;e.current=a.time;if(j===null||j<=0)return;if(j<=c("VideoPlayerViewabilityConstants").DEFAULT_VIEWABILITY_PERCENTAGE_FOR_PAUSE)return;p({positionToViewport:d,visiblePercentage:j})}},[f,g,p]),s=k(function(a){if(a.time>d.current&&(a.intersectionRatio!==g.current||!c("DOMRectIsEqual")(a.boundingClientRect,f.current))){var b=a.boundingClientRect,h=b.height,j=b.width,k=b.x;b=b.y;var l=a.intersectionRatio;h=c("DOMRectReadOnly").fromRect({height:h,width:j,x:k,y:b});j=i.current;k=j;b=!1;var m=Math.abs((j||0)*100-(l||0)*100);(l!==null&&m>=1||m>0&&l<(j||0))&&(k=l,i.current=l,b=!0);g.current=l;d.current=a.time;m=f.current;f.current=h;e.current=a.time;if(!b&&c("DOMRectIsEqual")(m,h))return;k!==null&&p({positionToViewport:h,visiblePercentage:k})}},[e,f,g,p,d]),t=l(function(){var b=[];for(var a=1;a<=q;a++)b.push("-"+(100-a/q*100)+"% 0% 0% 0%");return b},[q]),u=(h||(h=c("useUnsafeRef_DEPRECATED")))([]);u.current=[];for(var v=0;v<t.length;v++)u.current.push(k(c("useIntersectionObserver")(r,{root:null,rootMargin:t[v],threshold:o}),[t[v],o,c("useIntersectionObserver")]));var w=u.current.length,x=k(function(a){for(var b=0;b<w;b++)u.current[b](a)},[w,u]),y=k(c("useIntersectionObserver")(s,{root:null,rootMargin:b,threshold:o}),[s,b,o,c("useIntersectionObserver")]);v=k(function(a){y(a),x(a)},[y,x]);return j.jsx("div",{className:"x5yr21d x1uhb9sk xh8yej3",ref:v,children:j.Children.only(a.children)})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerViewabilityContexts",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("react")).createContext;b=a(null);c=a(!1);e=a(!1);f=a(null);g.VideoPlayerPassiveViewabilityInfoContext=b;g.VideoPlayerDesktopPictureInPictureContext=c;g.VideoPlayerFullscreenContext=e;g.VideoPlayerExtendedPassiveViewabilityInfoContext=f}),98);
__d("VideoPlayerContexts",["VideoPlayerAudioAvailabilityInfo","react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("react")).createContext;b=a(null);c=a(!1);e=a("");f=a(null);var i=a(0),j=a(0),k=a(!1),l=a(!1),m=a(!0),n=a(!1),o=a(!1),p=a(null),q=a(!1),r=a(!1),s=a(null),t=a(null),u=a(null),v=a(null),w=a([]),x=a("notselected"),y=a([]),z=a(null),A=a(null),B=a(null),C=a(""),D=a([]),E=a(null),F=a(!1),G=a(!1),H=a(null),I=a(1),J=a(!1),K=a(0),L=a(0),M=a(null),N=a(null),O=a(null),P=a(null),Q=a(!1),R=a(!1),S=a(null),T=a("deny"),U=a(null),V=a("unknown"),W=a(!1),X=a({release:function(a){},reserve:function(a){return a}}),Y=a([]),Z=a(!1),$=a(0),aa=a(0),ba=a(null),ca=a(!1),da=a(!1);d=a(d("VideoPlayerAudioAvailabilityInfo").VideoPlayerAudioAvailabilityInfoDefault);var ea=a(1),fa=a(!1),ga=a(!1),ha=a(null),ia=a("normal");a=a([]);g.VideoFBIDContext=b;g.IsAbrEnabledContext=c;g.TargetVideoQualityContext=e;g.AdClientTokenContext=f;g.LoopCountContext=i;g.LoopCurrentContext=j;g.PlayingContext=k;g.StallingContext=l;g.PausedContext=m;g.EndedContext=n;g.InPlayStallingContext=o;g.ErrorContext=p;g.IsLiveContext=q;g.SeekingContext=r;g.ControllerContext=s;g.LastMuteReasonContext=t;g.LastPlayReasonContext=u;g.LastPauseReasonContext=v;g.AvailableVideoQualitiesContext=w;g.SelectedVideoQualityContext=x;g.AvailableAudioTracksContext=y;g.TargetAudioTrackContext=z;g.CurrentAudioTrackIDContext=A;g.CurrentVideoTrackIDContext=B;g.CurrentVideoQualityContext=C;g.AvailableVideoTracksContext=D;g.ActiveCaptionsContext=E;g.CaptionsVisibleContext=F;g.CaptionsLoadedContext=G;g.CaptionDisplayStyleContext=H;g.VolumeContext=I;g.MutedContext=J;g.DurationContext=K;g.BufferEndContext=L;g.InstanceKeyContext=M;g.VideoPixelsAspectRatioContext=N;g.DimensionsContext=O;g.PlayerVersionContext=P;g.VideoPlayerMouseHoverContext=Q;g.VideoPlayerMouseIdleContext=R;g.BroadcastStatusContext=S;g.CanAutoplayContext=T;g.VolumeSettingContext=U;g.AutoplayGatingResultContext=V;g.InbandCaptionsAutogeneratedContext=W;g.VideoPlayerCaptionsReservationActionsContext=X;g.VideoPlayerCaptionsReservationsContext=Y;g.StreamInterruptedContext=Z;g.WatchTimeContext=$;g.LastPlayedTimeContext=aa;g.SeekableRangesContext=ba;g.IsLiveRewindActiveContext=ca;g.IsLiveRewindAvailableContext=da;g.AudioAvailabilityInfoContext=d;g.PlaybackRateContext=ea;g.IsNCSRContext=fa;g.IsPremiumMusicVideoContext=ga;g.InitialTracePolicyContext=ha;g.LatencyLevelContext=ia;g.ActiveEmsgBoxesContext=a}),98);
__d("VideoPlayerVideoPixelsFitContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("react")).createContext;b=a(null);c=b;g["default"]=c}),98);
__d("VideoPlayerHooks",["DOMRectIsEqual","VideoPlayerContexts","VideoPlayerVideoPixelsFitContext","VideoPlayerViewabilityContexts","clearTimeout","emptyObject","react","react-compiler-runtime","removeFromArray","setTimeout","unrecoverableViolation","useStable"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react"),k=j.useContext,l=j.useEffect,m=j.useRef,n=j.useState;function a(a){var b=d("react-compiler-runtime").c(3),c=m(a),e,f;b[0]!==a?(e=function(){c.current=a},f=[a],b[0]=a,b[1]=e,b[2]=f):(e=b[1],f=b[2]);l(e,f);return c}function o(){var a=k((i||(i=d("VideoPlayerContexts"))).ControllerContext);if(a==null)throw c("unrecoverableViolation")("Empty ControllerContext. Are you rendering useController outside of VideoPlayerRelay/VideoPlayerX?","comet_video_player");return a}function b(){var a=k((i||(i=d("VideoPlayerContexts"))).InstanceKeyContext);if(a==null)throw c("unrecoverableViolation")("Empty InstanceKeyContext. Are you rendering useInstanceKey outside of VideoPlayerRelay/VideoPlayerX?","comet_video_player");return a}function p(){var a=T();return a==="LIVE"}function e(){var a=T();return a==="LIVE"||a==="VOD_READY"}function f(){return k((i||(i=d("VideoPlayerContexts"))).BufferEndContext)}function q(){return k((i||(i=d("VideoPlayerContexts"))).DurationContext)}function r(){return k((i||(i=d("VideoPlayerContexts"))).SeekingContext)}function s(){return k((i||(i=d("VideoPlayerContexts"))).EndedContext)}function t(){return k((i||(i=d("VideoPlayerContexts"))).ErrorContext)}function u(){return k((i||(i=d("VideoPlayerContexts"))).PlayingContext)}function v(){var a=d("react-compiler-runtime").c(3),b=n(0),c=b[0],e=b[1],f=o(),g;a[0]!==f?(b=function(){var a=f.subscribe(function(){e(f.getPlayheadPosition())});e(f.getPlayheadPosition());return function(){return a.remove()}},g=[f],a[0]=f,a[1]=b,a[2]=g):(b=a[1],g=a[2]);l(b,g);return c}function w(a,b,c){b=b.current;b=b?b(a.getPlayheadPosition(),a.getCurrentState()):a.getPlayheadPosition();c.current=b;return b}function x(a,b,d,e,f,g){var h=d.current;a=w(a,b,d);a===h?f.current!=null&&(c("clearTimeout")(f.current),f.current=null):f.current==null&&g>0&&(f.current=c("setTimeout")(function(){f.current=null,d.current!=null&&e(d.current)},g))}function y(a,b){var e=d("react-compiler-runtime").c(16),f=o(),g=m(null),h=m(null),i=m(b),j=m(a),k;e[0]!==f?(k=function(){return w(f,i,h)},e[0]=f,e[1]=k):k=e[1];k=n(k);var p=k[0],q=k[1],r;e[2]!==f||e[3]!==b?(k=function(){b!==i.current&&(i.current=b,x(f,i,h,q,g,j.current))},r=[f,b],e[2]=f,e[3]=b,e[4]=k,e[5]=r):(k=e[4],r=e[5]);l(k,r);e[6]!==a?(k=function(){j.current=a},e[6]=a,e[7]=k):k=e[7];e[8]!==f||e[9]!==a?(r=[f,a],e[8]=f,e[9]=a,e[10]=r):r=e[10];l(k,r);e[11]!==f?(k=function(){var a=function(){x(f,i,h,q,g,j.current)},b=f.subscribe(a);return function(){b.remove()}},r=[f],e[11]=f,e[12]=k,e[13]=r):(k=e[12],r=e[13]);l(k,r);e[14]===Symbol["for"]("react.memo_cache_sentinel")?(k=function(){return function(){g.current!=null&&(c("clearTimeout")(g.current),g.current=null)}},r=[],e[14]=k,e[15]=r):(k=e[14],r=e[15]);l(k,r);return p}function z(a){var b=d("react-compiler-runtime").c(7),e=a===void 0?200:a;a=n(0);var f=a[0],g=a[1],h=o(),i=p(),j=m(null),k=m(f),q;b[0]!==e||b[1]!==i||b[2]!==h?(a=function(){if(!i)return;var a=h.subscribe(function(){if(j.current!=null)return;j.current=c("setTimeout")(function(){h.getCurrentState().paused||(k.current=k.current+e/1e3,g(k.current)),j.current=null},e)});g(0);return function(){return a.remove()}},q=[h,e,i],b[0]=e,b[1]=i,b[2]=h,b[3]=a,b[4]=q):(a=b[3],q=b[4]);l(a,q);b[5]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(){return function(){j.current!==null&&(c("clearTimeout")(j.current),j.current=null)}},q=[],b[5]=a,b[6]=q):(a=b[5],q=b[6]);l(a,q);return!i?null:f}function A(){var a=d("react-compiler-runtime").c(8),b=o(),e;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=[],a[0]=e):e=a[0];var f=m(e);a[1]!==b?(e=b.isFrozen(),a[1]=b,a[2]=e):e=a[2];var g=m(e);a[3]!==b?(e=function(){return{getCurrentState:function(){return b.isFrozen()},subscribeToChanges:function(a){var b=f.current;b.push(a);return{remove:function(){return c("removeFromArray")(b,a)}}}}},a[3]=b,a[4]=e):e=a[4];e=c("useStable")(e);var h,i;a[5]!==b?(h=function(){var a=b.subscribe(function(){var a=g.current,c=b.isFrozen();g.current=c;if(c!==a){a=f.current;a.forEach(function(a){return a(c)})}});return function(){a.remove()}},i=[b],a[5]=b,a[6]=h,a[7]=i):(h=a[6],i=a[7]);l(h,i);return e}function B(){return k((i||(i=d("VideoPlayerContexts"))).WatchTimeContext)}function C(){return k((i||(i=d("VideoPlayerContexts"))).LastPlayedTimeContext)}function D(){return k((i||(i=d("VideoPlayerContexts"))).PausedContext)}function E(){return k((i||(i=d("VideoPlayerContexts"))).StallingContext)}function F(){return k((i||(i=d("VideoPlayerContexts"))).InPlayStallingContext)}function G(){return k((i||(i=d("VideoPlayerContexts"))).LastMuteReasonContext)}function H(){return k((i||(i=d("VideoPlayerContexts"))).LastPauseReasonContext)}function I(){return k((i||(i=d("VideoPlayerContexts"))).LastPlayReasonContext)}function J(){return k((i||(i=d("VideoPlayerContexts"))).AvailableVideoQualitiesContext)}function K(){return k((i||(i=d("VideoPlayerContexts"))).AvailableAudioTracksContext)}function L(){return k((i||(i=d("VideoPlayerContexts"))).AvailableVideoTracksContext)}function M(){return k((i||(i=d("VideoPlayerContexts"))).CaptionsVisibleContext)}function N(){return k((i||(i=d("VideoPlayerContexts"))).CaptionDisplayStyleContext)}function O(){return k((i||(i=d("VideoPlayerContexts"))).ActiveCaptionsContext)}function P(){return k((i||(i=d("VideoPlayerContexts"))).CurrentAudioTrackIDContext)}function Q(){return k((i||(i=d("VideoPlayerContexts"))).CurrentVideoQualityContext)}function R(){return k((i||(i=d("VideoPlayerContexts"))).CurrentVideoTrackIDContext)}function aa(){return k((i||(i=d("VideoPlayerContexts"))).SelectedVideoQualityContext)}function ba(){return k((i||(i=d("VideoPlayerContexts"))).TargetAudioTrackContext)}function ca(){return k((i||(i=d("VideoPlayerContexts"))).MutedContext)}function da(){return k((i||(i=d("VideoPlayerContexts"))).VolumeContext)}function ea(){return k(d("VideoPlayerViewabilityContexts").VideoPlayerDesktopPictureInPictureContext)}function fa(){return k(d("VideoPlayerViewabilityContexts").VideoPlayerFullscreenContext)}function ga(){return k((i||(i=d("VideoPlayerContexts"))).DimensionsContext)}function ha(){return k((i||(i=d("VideoPlayerContexts"))).VideoPixelsAspectRatioContext)}function ia(){return k((i||(i=d("VideoPlayerContexts"))).PlayerVersionContext)}function ja(){return k((i||(i=d("VideoPlayerContexts"))).CaptionsLoadedContext)}function ka(){return k((i||(i=d("VideoPlayerContexts"))).IsAbrEnabledContext)}function la(){return k((i||(i=d("VideoPlayerContexts"))).TargetVideoQualityContext)}function ma(){return k((i||(i=d("VideoPlayerContexts"))).VideoPlayerMouseHoverContext)}function na(){return k((i||(i=d("VideoPlayerContexts"))).VideoPlayerMouseIdleContext)}function S(){return k(d("VideoPlayerViewabilityContexts").VideoPlayerPassiveViewabilityInfoContext)}function oa(){return k(d("VideoPlayerViewabilityContexts").VideoPlayerExtendedPassiveViewabilityInfoContext)}function pa(){var a=d("react-compiler-runtime").c(6),b=S(),e=n(null),f=e[0],g=e[1],h=m(f),i;a[0]!==f?(e=function(){h.current=f},i=[f],a[0]=f,a[1]=e,a[2]=i):(e=a[1],i=a[2]);l(e,i);a[3]!==b?(e=function(){if(b){var a=function(){var a=b.getCurrent();if(a){var d=a.positionToViewport;a=a.visiblePercentage;var e=h.current;(e==null||a!==e.visiblePercentage||!c("DOMRectIsEqual")(d,e.positionToViewport))&&g({positionToViewport:d,visiblePercentage:a})}},d=b.subscribe(function(){a()});return function(){return d.remove()}}},i=[g,b],a[3]=b,a[4]=e,a[5]=i):(e=a[4],i=a[5]);l(e,i);return f}function T(){return k((i||(i=d("VideoPlayerContexts"))).BroadcastStatusContext)}function qa(){return k((i||(i=d("VideoPlayerContexts"))).CanAutoplayContext)}function ra(){return k((i||(i=d("VideoPlayerContexts"))).VolumeSettingContext)}function sa(){return k((i||(i=d("VideoPlayerContexts"))).AutoplayGatingResultContext)}function ta(){return k((i||(i=d("VideoPlayerContexts"))).VideoFBIDContext)}function U(){return k((i||(i=d("VideoPlayerContexts"))).AdClientTokenContext)}function V(){return k((i||(i=d("VideoPlayerContexts"))).LoopCurrentContext)}function W(){return k((i||(i=d("VideoPlayerContexts"))).LoopCountContext)}function ua(){return k((i||(i=d("VideoPlayerContexts"))).InbandCaptionsAutogeneratedContext)}function va(){return k((i||(i=d("VideoPlayerContexts"))).VideoPlayerCaptionsReservationsContext)}function wa(){return k((i||(i=d("VideoPlayerContexts"))).VideoPlayerCaptionsReservationActionsContext)}function xa(){return k((i||(i=d("VideoPlayerContexts"))).StreamInterruptedContext)}function ya(){return k((i||(i=d("VideoPlayerContexts"))).SeekableRangesContext)}function X(){return k((i||(i=d("VideoPlayerContexts"))).IsLiveRewindActiveContext)}function Y(){var a=s(),b=V(),c=W();a=a&&(c===-1||c>0&&b<c);return a}function za(){var a=s(),b=Y();return a&&!b}function Aa(){return k((i||(i=d("VideoPlayerContexts"))).PlaybackRateContext)}function Ba(){return k((i||(i=d("VideoPlayerContexts"))).IsNCSRContext)}function Z(){return k((i||(i=d("VideoPlayerContexts"))).IsPremiumMusicVideoContext)}function Ca(){var a=U()!=null,b=p(),c=Z(),d=X();if(a||c)return!1;if(b)return d;else return!0}function Da(){return k((i||(i=d("VideoPlayerContexts"))).InitialTracePolicyContext)}function Ea(){return k((i||(i=d("VideoPlayerContexts"))).LatencyLevelContext)}function Fa(){return k((i||(i=d("VideoPlayerContexts"))).AudioAvailabilityInfoContext)}function Ga(){var a=U()!=null,b=p(),c=Z();return a||c||b?!1:!0}function $(a){var b=d("react-compiler-runtime").c(4),c=a===void 0?!0:a,e=o(),f;b[0]!==e||b[1]!==c?(a=function(){if(c){var a=e.registerEmsgObserver();return function(){e.unregisterEmsgObserver(a)}}},f=[e,c],b[0]=e,b[1]=c,b[2]=a,b[3]=f):(a=b[2],f=b[3]);l(a,f)}function Ha(){$();return k((i||(i=d("VideoPlayerContexts"))).ActiveEmsgBoxesContext)}function Ia(){return k(c("VideoPlayerVideoPixelsFitContext"))}function Ja(){var a=d("react-compiler-runtime").c(4),b=n(c("emptyObject")),e=b[0],f=b[1],g=m(c("emptyObject"));a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=function(){return function(a){g.current=a!=null?a:c("emptyObject"),f(a!=null?a:c("emptyObject"))}},a[0]=b):b=a[0];b=c("useStable")(b);b=b;var h;a[1]!==e||a[2]!==b?(h=[b,e,g],a[1]=e,a[2]=b,a[3]=h):h=a[3];return h}g.useLatestValueRef=a;g.useController=o;g.useInstanceKey=b;g.useIsLive=p;g.useIsVideoBroadcast=e;g.useBufferEnd=f;g.useDuration=q;g.useSeeking=r;g.useEnded=s;g.useError=t;g.usePlaying=u;g.useCurrentTime_DO_NOT_USE=v;g.useCurrentTimeThrottled=y;g.useLiveTimeElapsedThrottled=z;g.useIsFrozenPassive=A;g.useWatchTime=B;g.useLastPlayedTime=C;g.usePaused=D;g.useStalling=E;g.useInPlayStalling=F;g.useLastMuteReason=G;g.useLastPauseReason=H;g.useLastPlayReason=I;g.useAvailableVideoQualities=J;g.useAvailableAudioTracks=K;g.useAvailableVideoTracks=L;g.useCaptionsVisible=M;g.useCaptionDisplayStyle=N;g.useActiveCaptions=O;g.useCurrentAudioTrackID=P;g.useCurrentVideoQuality=Q;g.useCurrentVideoTrackID=R;g.useSelectedVideoQuality=aa;g.useTargetAudioTrack=ba;g.useMuted=ca;g.useVolume=da;g.useIsDesktopPictureInPicture=ea;g.useIsFullscreen=fa;g.useDimensions=ga;g.useVideoPixelsAspectRatio=ha;g.usePlayerVersion=ia;g.useCaptionsLoaded=ja;g.useIsAbrEnabled=ka;g.useTargetVideoQuality=la;g.useIsHovering=ma;g.useIsMouseIdle=na;g.useVideoPlayerPassiveViewabilityInfo=S;g.useVideoPlayerExtendedPassiveViewabilityInfo=oa;g.useVideoPlayerViewabilityInfo=pa;g.useBroadcastStatus=T;g.useCanAutoplay=qa;g.useVolumeSetting=ra;g.useAutoplayGatingResult=sa;g.useVideoFbid=ta;g.useAdClientToken=U;g.useVideoPlayerCurrentLoop=V;g.useVideoPlayerTotalLoops=W;g.useInbandCaptionsAutogenerated=ua;g.useVideoPlayerCaptionsReservations=va;g.useVideoPlayerCaptionsReservationActions=wa;g.useStreamInterrupted=xa;g.useSeekableRanges_DO_NOT_USE=ya;g.useIsLiveRewindActive=X;g.useIsTransitioningToNextLoop=Y;g.useVideoPlaybackEnded=za;g.usePlaybackRate=Aa;g.useIsNCSR=Ba;g.useIsPremiumMusicVideo=Z;g.useShouldShowPlaybackRateControl=Ca;g.useVideoPlayerInitialTracePolicy=Da;g.useLatencyLevel=Ea;g.useAudioAvailabilityInfo=Fa;g.useShouldPersistPlaybackRate=Ga;g.useEmsgObserver=$;g.useActiveEmsgBoxes=Ha;g.useVideoPlayerVideoPixelsFit=Ia;g.useVideoPlayerXAPIOutsideVideoPlayerSurface=Ja}),98);
__d("createVideoStateHook",["VideoPlayerHooks","emptyFunction","gkx","react","react-compiler-runtime","useStable"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useEffect;b.useMemo;var k=b.useSyncExternalStore,l=new Set();e=function(a){var b=new Map();l.add(b);var e=c("emptyFunction");function f(a,c){var d=b.get(a);d||(d={consumers:new Set(),key:a,lastValue:c},b.set(a,d));return d}function g(a,c){return{getSnapshot:function(){var d=b.get(a);return d==null?c:d.lastValue},setValue:function(b){var d=f(a,c),e;typeof b==="function"?e=b(d.lastValue):e=b;d.lastValue=e;d.consumers.forEach(function(a){a(e)})},subscribe:function(b){var d=f(a,c);d.consumers.add(b);return function(){d.consumers["delete"](b)}}}}function a(a){var b=d("react-compiler-runtime").c(10),e;b[0]!==a?(e=function(){return a},b[0]=a,b[1]=e):e=b[1];var f=c("useStable")(e);e=(i||(i=d("VideoPlayerHooks"))).useInstanceKey();var h;b[2]!==f||b[3]!==e?(h=g(e,f),b[2]=f,b[3]=e,b[4]=h):h=b[4];e=h;h=e;e=h.getSnapshot;var j=h.setValue;h=h.subscribe;var l;b[5]!==f?(l=function(){return f},b[5]=f,b[6]=l):l=b[6];h=k(h,e,l);b[7]!==j||b[8]!==h?(e=[h,j],b[7]=j,b[8]=h,b[9]=e):e=b[9];return e}function h(a){var b=d("react-compiler-runtime").c(5),e;b[0]!==a?(e=function(){return a},b[0]=a,b[1]=e):e=b[1];e=c("useStable")(e);var f=(i||(i=d("VideoPlayerHooks"))).useInstanceKey(),h;b[2]!==e||b[3]!==f?(h=g(f,e),b[2]=e,b[3]=f,b[4]=h):h=b[4];e=h;f=e;b=f.setValue;return b}function j(a){var b=d("react-compiler-runtime").c(7),e;b[0]!==a?(e=function(){return a},b[0]=a,b[1]=e):e=b[1];var f=c("useStable")(e);e=(i||(i=d("VideoPlayerHooks"))).useInstanceKey();var h;b[2]!==f||b[3]!==e?(h=g(e,f),b[2]=f,b[3]=e,b[4]=h):h=b[4];e=h;h=e;e=h.getSnapshot;h=h.subscribe;var j;b[5]!==f?(j=function(){return f},b[5]=f,b[6]=j):j=b[6];return k(h,e,j)}return{setterHook:h,stateHook:a,valueHook:j}};function a(a){var b=d("react-compiler-runtime").c(3),c,e;b[0]!==a?(c=function(){return function(){l.forEach(function(b){b["delete"](a)})}},e=[a],b[0]=a,b[1]=c,b[2]=e):(c=b[1],e=b[2]);j(c,e)}f=e;b=a;g.createVideoStateHookImpl_SafeForConcurrentRendering=e;g.createVideoStateHook=f;g.useCleanupVideoStateHooks_INTERNAL=b}),98);
__d("getVideoShareDownstreamSignalTracking",["VideoShareDownstreamSignalTrackingTypes","WebStorage","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i=1e3*60*60*4;function j(){var a;if(!c("gkx")("24"))return null;a=(a=(h||(h=c("WebStorage"))).getSessionStorage())==null?void 0:a.getItem(d("VideoShareDownstreamSignalTrackingTypes").DOWNSTREAM_VIDEO_SHARE_SESSION_STORAGE_KEY);if(a==null)return null;a=JSON.parse(a);return!a||a.downstream_share_session_start_time+i<Date.now()?null:a}function a(){var a=j();return!a?null:{downstream_share_session_id:a==null?void 0:a.downstream_share_session_id,downstream_share_session_origin_uri:a==null?void 0:a.downstream_share_session_origin_uri,downstream_share_session_start_time:a==null?void 0:a.downstream_share_session_start_time.toString()}}g.getVideoShareDownstreamSignalTrackingWithNumberStartTime=j;g.getVideoShareDownstreamSignalTracking=a}),98);
__d("renderVideoPlayerImplementation",["react","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a,b){if(a.typename==="VideoPlayerEmptyImplementation")return i.jsx(a.Component,babelHelpers["extends"]({},b,a.data));else if(a.typename==="VideoPlayerOzImplementation")return i.jsx(a.Component,babelHelpers["extends"]({},b,a.data));else if(a.typename==="VideoPlayerProgressiveImplementation")return i.jsx(a.Component,babelHelpers["extends"]({},b,a.data));else if(a.typename==="VideoPlayerNextgendashImplementation")return i.jsx(a.Component,babelHelpers["extends"]({},b,a.data));else{a.typename;throw c("unrecoverableViolation")('CoreVideoPlayer: Unrecognized implementation typename "'+a.typename+'".',"comet_video_player")}}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useCometSize_DO_NOT_USE",["CometThrottle","ExecutionEnvironment","FBLogger","HiddenSubtreePassiveContext","react","useResizeObserver","useStable","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=j||d("react");var k=b.useContext,l=b.useEffect,m=b.useLayoutEffect,n=b.useRef,o=b.useState;function p(a){var b=a.setBoxStateStable,d=null,e=function(a){var c;if(((c=d)==null?void 0:c.height)===a.height&&((c=d)==null?void 0:c.width)===a.width)return;d=a;b(a)};a=function(a){a=a.getBoundingClientRect();var b=a.height;a=a.width;e({height:b,width:a})};var f=c("CometThrottle")(function(a){var b=a.height;a=a.width;if(b===0&&a===0)return;e({height:b,width:a})},200,{leading:!0,trailing:!0});return{measure:a,onResizeThrottled:f}}function a(a){a===void 0&&(a=!1);if(!(h||(h=c("ExecutionEnvironment"))).canUseDOM&&!a)throw c("FBLogger")("comet_ssr").blameToPreviousFile().mustfixThrow("useCometSize is not compatible with Server Rendering. This will break SSR! See https://fburl.com/wiki/xrzohrqb");var b=n(null);a=o(null);var d=a[0],e=a[1],f=k(c("HiddenSubtreePassiveContext")),g=c("useStable")(function(){return p({setBoxStateStable:e})}),j=c("useResizeObserver")(g.onResizeThrottled),q=n(j);m(function(){q.current=j},[j]);a=(i||(i=c("useUnsafeRef_DEPRECATED")))(function(a){a!==b.current&&(b.current=a,a!=null&&g.measure(a)),q.current(b.current)});l(function(){if(!f.getCurrentState().hidden)return;var a=f.subscribeToChanges(function(c){!c.hidden&&b.current!=null&&(g.measure(b.current),a.remove())});return function(){return a.remove()}},[f,g]);l(function(){return function(){g.onResizeThrottled.cancel()}},[g]);return[a.current,d]}g["default"]=a}),98);
__d("useCreateVideoPlayerPassiveViewabilityInfo",["removeFromArray","useStable"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("useStable")(h)}function h(){var a=[],b=null;return{setVideoPlayerPassiveViewabilityInfo:function(c){b=c,a.forEach(i)},videoPlayerPassiveViewabilityInfo:{getCurrent:function(){return b},subscribe:function(b){a.push(b);return{remove:function(){c("removeFromArray")(a,b)}}}}}}function i(a){return a()}g["default"]=a}),98);
__d("videoPlayerUniqueID",["guid"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return"id-vpuid-"+(a!=null?a:c("guid")())}g["default"]=a}),98);
__d("CoreVideoPlayer.react",["CometObjectFitContainer.react","CoreVideoPlayerImplementationCallbacks","ErrorMetadata","FBLogger","VideoPlayerOnViewability.react","VideoPlayerViewabilityContexts","cr:9824","createVideoStateHook","err","getVideoShareDownstreamSignalTracking","react","react-compiler-runtime","renderVideoPlayerImplementation","useCometSize_DO_NOT_USE","useCreateVideoPlayerPassiveViewabilityInfo","useStable","videoPlayerUniqueID"],(function(a,b,c,d,e,f,g){"use strict";var h=["implementation","accessToken","expiredVideoUrlRefreshHandler","fullscreenController","isFullscreen","onCoreVideoStatesChanged","productAttribution","renderWithCoreVideoStates","trackingDataEncrypted","trackingNodes","videoPlayerUniqueIDOverride","viewportMarginsForViewability"],i=["implementations"],j,k=j||(j=d("react"));e=j;var l=e.useCallback,m=e.useRef,n=584;function o(a){return a!=null&&isFinite(a)&&a>0?a:0}function p(a){if(a==="video_home_inline"||a==="inline")return{height:n,width:n};else return{height:1080,width:1920}}function q(a,b){var e=d("react-compiler-runtime").c(8);b=c("useCometSize_DO_NOT_USE")(b!=null?b:!1);var f=b[0];b=b[1];var g;e[0]!==b||e[1]!==a?(g=b!=null?b:p(a),e[0]=b,e[1]=a,e[2]=g):g=e[2];b=g;e[3]!==f?(a=function(a){return k.jsx(c("CometObjectFitContainer.react"),{debugRole:null,objectFitMode:"CONTAINER_SIZE",ref:f,children:a})},e[3]=f,e[4]=a):a=e[4];e[5]!==b||e[6]!==a?(g=[b,a],e[5]=b,e[6]=a,e[7]=g):g=e[7];return g}function r(a){var b=a.implementation,e=a.accessToken,f=a.expiredVideoUrlRefreshHandler,g=a.fullscreenController,i=a.isFullscreen,j=a.onCoreVideoStatesChanged,n=a.productAttribution,p=a.renderWithCoreVideoStates,r=a.trackingDataEncrypted,s=a.trackingNodes,t=a.videoPlayerUniqueIDOverride,u=a.viewportMarginsForViewability;a=babelHelpers.objectWithoutPropertiesLoose(a,h);var v=c("useStable")(function(){return c("videoPlayerUniqueID")(t)});d("createVideoStateHook").useCleanupVideoStateHooks_INTERNAL(v);var w=m(0),x=c("useCreateVideoPlayerPassiveViewabilityInfo")(),y=x.setVideoPlayerPassiveViewabilityInfo;x=x.videoPlayerPassiveViewabilityInfo;var z=q(a.subOrigin,a.bypassUseCometSizeError),A=z[0];z=z[1];var B=l(function(a){y(a)},[y]);j=d("CoreVideoPlayerImplementationCallbacks").useImplementationCallbacks({coreVideoPlayerMetaData:a,dimensions:A,instanceKey:v,isFullscreen:i,onCoreVideoStatesChanged:j,renderWithCoreVideoStates:p,videoPlayerPassiveViewabilityInfo:x});p=j.onExposedStateChanged;j=j.renderWithExposedState;var C=d("getVideoShareDownstreamSignalTracking").getVideoShareDownstreamSignalTrackingWithNumberStartTime();e={accessToken:e,coreVideoPlayerMetaData:a,dimensions:A,downstreamShareSignalTracking:C,instanceKey:v,playerImplementationInstanceCountRef:w,productAttribution:n,trackingDataEncrypted:r,trackingNodes:s};C=a.sideLoadCaptionsExpected===!0||a.sideLoadCaptionsUrl!=null;v=a.isLiveStreaming===!0;r={VideoPlayerShakaPerformanceLoggerClass:a.VideoPlayerShakaPerformanceLoggerClass,alt:a.alt,alwaysShowCaptions:a.alwaysShowCaptions,areCaptionsAutogenerated:a.areCaptionsAutogenerated,audioOnly:a.audioOnly,broadcastLatencySensitivity:a.broadcastLatencySensitivity,bufferEndLimit:a.bufferEndLimit,captionDisplayStyle:a.captionDisplayStyle,crossOrigin_DO_NOT_USE_UNLESS_YOU_KNOW_WHAT_YOURE_DOING:a.crossOrigin_DO_NOT_USE_UNLESS_YOU_KNOW_WHAT_YOURE_DOING,dimensions:A,expiredVideoUrlRefreshHandler:f,fullscreenController:g,graphQLVideoDRMInfo:(w=a.graphQLVideoDRMInfo)!=null?w:null,graphQLVideoP2PSettings:(n=a.graphQLVideoP2PSettings)!=null?n:null,inbandCaptionsExpected:v,initialDesiredLatencyMs:a.desiredLatencyMs,initialLatencyToleranceMs:a.latencyToleranceMs,initialRepresentationIds:a.initialRepresentationIds,isClientTriggeredTraceEnabled:a.isClientTriggeredTraceEnabled,isSpatial:a.isSpatial,isSpherical:a.isSpherical,loadSequence:a.loadSequence,loggingConfig:a.loggingConfig,loggingMetaData:e,loopCount:a.loopCount,onExposedStateChanged:p,poster:a.poster,preloadForProgressiveDisabled:a.preloadForProgressiveDisabled,renderVideoPixelsFit:a.renderVideoPixelsFit,renderWithExposedState:j,seoWebCrawlerLookasideUrl:a.seoWebCrawlerLookasideUrl,seoWebCrawlerVideoTracks:a.seoWebCrawlerVideoTracks,sideLoadCaptionsExpected:C,sideLoadCaptionsUrl:a.sideLoadCaptionsUrl,startTimestamp:o(a.startTimestamp),videoElementHDRPatchEnabled_EXPERIMENTAL:a.videoElementHDRPatchEnabled_EXPERIMENTAL,videoFBID:a.videoFBID,videoPixelsAspectRatio:a.videoPixelsAspectRatio,videoPlayerPassiveViewabilityInfo:x,videoPlayerShakaPerformanceLoggerBuilder:a.videoPlayerShakaPerformanceLoggerBuilder,wrapVideoPixels_EXPERIMENTAL:a.wrapVideoPixels_EXPERIMENTAL};return z(k.jsx(d("VideoPlayerViewabilityContexts").VideoPlayerFullscreenContext.Provider,{value:i,children:k.jsx(c("VideoPlayerOnViewability.react"),{onVideoPlayerViewabilityInfoChange:B,viewportMargins:u,children:c("renderVideoPlayerImplementation")(b,r)})}))}r.displayName=r.name+" [from "+f.id+"]";function a(a){var e=d("react-compiler-runtime").c(6),f,g;e[0]!==a?(g=a.implementations,f=babelHelpers.objectWithoutPropertiesLoose(a,i),e[0]=a,e[1]=f,e[2]=g):(f=e[1],g=e[2]);if(g.length===0){var h;a=c("err")("No implementations given to CoreVideoPlayer");a.name="VideoPlayerNoImplementations";a.project="comet_video_player";h=(h=a.metadata)!=null?h:new(c("ErrorMetadata"))();a.metadata=h;var j=f.videoFBID;j!=null&&h.addEntry("COMET_VIDEO","VIDEO_ID",j);throw(h=c("FBLogger")("comet_video_player").catching(a)).mustfixThrow.apply(h,[(j=a.messageFormat)!=null?j:a.message].concat(a.messageFormat!=null?(h=a.messageParams)!=null?h:[]:[]))}e[3]!==f||e[4]!==g?(j=b("cr:9824")?k.jsx(b("cr:9824"),{CoreVideoPlayerWithOneImplementation:r,coreVideoPlayerProps:f,implementations:g}):k.jsx(r,babelHelpers["extends"]({},f,{implementation:g[0]})),e[3]=f,e[4]=g,e[5]=j):j=e[5];return j}g["default"]=a}),98);
__d("DOMContainer.react",["invariant","isNode","react"],(function(a,b,c,d,e,f,g,h){var i=["display"],j,k=j||d("react");a=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.containerNode=null,b.setContainerNode=function(a){b.containerNode=a;var c=b.props.containerRef;typeof c==="function"&&c(a)},babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);var d=b.prototype;d.getDOMChild=function(){var a=this.props.children;c("isNode")(a)||h(0,1533);return a};d.shouldComponentUpdate=function(a){return a.children!==this.props.children};d.componentDidMount=function(){var a=this.containerNode;a!=null&&a.appendChild(this.getDOMChild())};d.componentDidUpdate=function(a){a=this.containerNode;if(a==null)return;while(a.lastChild)a.removeChild(a.lastChild);a.appendChild(this.getDOMChild())};d.render=function(){var a=this.props,b=a.display;a=babelHelpers.objectWithoutPropertiesLoose(a,i);b=b==="block"?"div":"span";return k.jsx(b,babelHelpers["extends"]({},a,{ref:this.setContainerNode,children:void 0}))};return b}(k.Component);a.defaultProps={display:"inline"};g["default"]=a}),98);
__d("CoreVideoPlayerFitParentContainer.react",["DOMContainer.react","cr:964538","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(8),c=a.ref,e=a.children,f=a.debugRole;a=a.testid;var g;b[0]!==f?(g=null,b[0]=f,b[1]=g):g=b[1];b[2]===Symbol["for"]("react.memo_cache_sentinel")?(f="x1lliihq x5yr21d x1n2onr6 xh8yej3 x1ja2u2z",b[2]=f):f=b[2];b[3]!==e||b[4]!==c||b[5]!==g||b[6]!==a?(f=i.jsx("div",babelHelpers["extends"]({},g,{className:f,"data-testid":void 0,ref:c,children:e})),b[3]=e,b[4]=c,b[5]=g,b[6]=a,b[7]=f):f=b[7];return f}function b(a){var b=d("react-compiler-runtime").c(7),e=a.ref,f=a.debugRole;a=a.domElement;var g;b[0]!==f?(g=null,b[0]=f,b[1]=g):g=b[1];b[2]===Symbol["for"]("react.memo_cache_sentinel")?(f="x1lliihq x5yr21d x1n2onr6 xh8yej3 x1ja2u2z",b[2]=f):f=b[2];b[3]!==a||b[4]!==e||b[5]!==g?(f=i.jsx(c("DOMContainer.react"),babelHelpers["extends"]({},g,{className:f,display:"block",ref:e,children:a})),b[3]=a,b[4]=e,b[5]=g,b[6]=f):f=b[6];return f}function e(a){a=a.debugRole;a=document.createElement("div");a.className="x1lliihq x5yr21d x1n2onr6 xh8yej3 x1ja2u2z";return a}g.CoreVideoPlayerFitParentContainer=a;g.CoreVideoPlayerFitParentDOMContainer=b;g.createFitParentContainerDiv=e}),98);
__d("VideoPlayerPortalingPlaceInfoProvider.react",["react","react-compiler-runtime","recoverableViolation","useEmptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;f=e.createContext;var j=e.useContext,k=e.useEffect;e.useMemo;var l=f(null);function a(a){var b=d("react-compiler-runtime").c(9),c=a.children,e=a.currentPlaceID,f=a.currentVideoID,g=a.portalingEnabled,h=a.previousPlaceMetaData;a=a.thisPlaceID;var j;b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==h||b[4]!==a?(j={currentPlaceID:e,currentVideoID:f,portalingEnabled:g,previousPlaceMetaData:h,thisPlaceID:a},b[0]=e,b[1]=f,b[2]=g,b[3]=h,b[4]=a,b[5]=j):j=b[5];e=j;f=e;b[6]!==c||b[7]!==f?(g=i.jsx(l.Provider,{value:f,children:c}),b[6]=c,b[7]=f,b[8]=g):g=b[8];return g}var m=c("useEmptyFunction");function b(){var a=d("react-compiler-runtime").c(1),b=j(l);m(b);if(b==null){var c;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(c={currentPlaceID:null,currentVideoID:null,portalingEnabled:!1,previousPlaceMetaData:null,thisPlaceID:null},a[0]=c):c=a[0];return c}return b}g.VideoPlayerPortalingPlaceInfoProvider=a;g.useVideoPlayerPortalingPlaceInfo=b}),98);
__d("GlobalVideoPortsRenderers.react",["CoreVideoPlayer.react","VideoPlayerContexts","VideoPlayerPortalingPlaceInfoProvider.react","emptyFunction","fb-error","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h,l=k.useEffect,m=k.useState,n=c("emptyFunction").thatReturns(null);function a(a){var b=d("react-compiler-runtime").c(14),e=a.coreVideoPlayerMetaData,f=a.currentPlaceID,g=a.currentVideoID,h=a.fullscreenController,i=a.implementations,k=a.isFullscreen,l=a.onCoreVideoStatesChanged,m=a.previousPlaceMetaData,o=a.trackingDataEncrypted,p=a.trackingNodes;a=a.viewportMarginsForViewability;var q;b[0]!==e||b[1]!==h||b[2]!==i||b[3]!==k||b[4]!==l||b[5]!==o||b[6]!==p||b[7]!==a?(q=j.jsx(c("CoreVideoPlayer.react"),babelHelpers["extends"]({},e,{fullscreenController:h,implementations:i,isFullscreen:k,onCoreVideoStatesChanged:l,renderWithCoreVideoStates:n,trackingDataEncrypted:o,trackingNodes:p,viewportMarginsForViewability:a})),b[0]=e,b[1]=h,b[2]=i,b[3]=k,b[4]=l,b[5]=o,b[6]=p,b[7]=a,b[8]=q):q=b[8];b[9]!==f||b[10]!==g||b[11]!==m||b[12]!==q?(e=j.jsx(d("VideoPlayerPortalingPlaceInfoProvider.react").VideoPlayerPortalingPlaceInfoProvider,{currentPlaceID:f,currentVideoID:g,portalingEnabled:!0,previousPlaceMetaData:m,thisPlaceID:f,children:q}),b[9]=f,b[10]=g,b[11]=m,b[12]=q,b[13]=e):e=b[13];return e}function b(a){var b=d("react-compiler-runtime").c(11),c=a.currentPlaceID,e=a.currentVideoID,f=a.previousPlaceMetaData,g=a.renderPlaceholder,h=a.thisPlaceID;a=a.videoPixelsAspectRatio;var k;b[0]!==g?(k=g!=null?g():null,b[0]=g,b[1]=k):k=b[1];b[2]!==k||b[3]!==a?(g=j.jsx((i||(i=d("VideoPlayerContexts"))).VideoPixelsAspectRatioContext.Provider,{value:a,children:k}),b[2]=k,b[3]=a,b[4]=g):g=b[4];b[5]!==c||b[6]!==e||b[7]!==f||b[8]!==g||b[9]!==h?(k=j.jsx(d("VideoPlayerPortalingPlaceInfoProvider.react").VideoPlayerPortalingPlaceInfoProvider,{currentPlaceID:c,currentVideoID:e,portalingEnabled:!0,previousPlaceMetaData:f,thisPlaceID:h,children:g}),b[5]=c,b[6]=e,b[7]=f,b[8]=g,b[9]=h,b[10]=k):k=b[10];return k}function e(a){var b=a.currentPlaceID,e=a.currentVideoID,f=a.injectCoreVideoStatesRef,g=a.previousPlaceMetaData,h=a.renderComponents;a=a.thisPlaceID;var i=m(null),k=i[0],n=i[1];i=m(null);var o=i[0],p=i[1];l(function(){f.current=function(a,b){if(a!=null){var d,e=c("fb-error").getErrorSafe(a);d=c("fb-error").err.apply(c("fb-error"),[(d=e.messageFormat)!=null?d:e.message].concat(e.messageFormat!=null?(d=e.messageParams)!=null?d:[]:[]));d.name=d.errorName=e.name;d.metadata=e.metadata;d.stack=e.stack;d.taalOpcodes=e.taalOpcodes;d.cause=a;p(d)}n(b)};return function(){f.current=null}},[f]);if(a===b)if(o!=null)throw o;else if(k!=null)return j.jsx(d("VideoPlayerPortalingPlaceInfoProvider.react").VideoPlayerPortalingPlaceInfoProvider,{currentPlaceID:b,currentVideoID:e,portalingEnabled:!0,previousPlaceMetaData:g,thisPlaceID:a,children:h(k)});else return null;else return null}e.displayName=e.name+" [from "+f.id+"]";g.GlobalVideoPortsPlayerRenderer=a;g.GlobalVideoPortsPlaceholderRenderer=b;g.GlobalVideoPortsVideoComponentsRenderer=e}),98);
__d("MWThumbnailDurationPill",["getFormattedTimestamp","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(7),e=a.spacing;a=a.videoDuration;var f;b[0]!==e?(f={0:{className:"x6s0dn4 x18l40ae xqbdsaf xpf24wh x14a4ghu x1a4jp9x x14ctfv x1ncwhqj x1nn3v0j x1icxu4v x1120s5i x25sj25 x10l6tqk xxymvpz xqo3gd x11dcrhx"},1:{className:"x6s0dn4 x18l40ae xqbdsaf xpf24wh x14a4ghu x1a4jp9x x14ctfv x1ncwhqj x1nn3v0j x1icxu4v x1120s5i x25sj25 x10l6tqk xxymvpz xbfrwjf xxx7yvo"}}[!!(e==="TIGHT")<<0],b[0]=e,b[1]=f):f=b[1];b[2]!==a?(e=c("getFormattedTimestamp")(a),b[2]=a,b[3]=e):e=b[3];b[4]!==f||b[5]!==e?(a=i.jsx("div",babelHelpers["extends"]({},f,{children:e})),b[4]=f,b[5]=e,b[6]=a):a=b[6];return a}g["default"]=a}),98);
__d("WebSessionExtender",["WebSession","clearInterval","cr:13141","cr:913","setInterval"],(function(a,b,c,d,e,f,g){"use strict";var h=2e4,i=new Set(),j=null;function a(a,e){e===void 0&&(e="extender"),i.add(a),j==null&&(d("WebSession").extend(Date.now()+h+2e3),b("cr:13141")==null||b("cr:13141").extend(),j=c("setInterval")(function(){d("WebSession").extend(Date.now()+h+2e3),b("cr:13141")==null||b("cr:13141").extend(),b("cr:913")&&new(b("cr:913"))().setClientTime(Date.now()).setWebsessionID(d("WebSession").getId()).setReason(e).log()},h))}function e(a){i["delete"](a);a=i.size;a===0&&j!=null&&(c("clearInterval")(j),j=null)}g.subscribe=a;g.unsubscribe=e}),98);
__d("fbs",["fbt","invariant","FbtHooks","FbtPureStringResult"],(function(a,b,c,d,e,f,g,h){var i;a={};c=babelHelpers["extends"]({},g,{_param:function(a,c,d){typeof c==="string"||c instanceof b("FbtPureStringResult")||h(0,11709,c,typeof c);return g._param(a,c,d)},_plural:function(a,c,d){d==null||typeof d==="string"||d instanceof b("FbtPureStringResult")||h(0,47119,d,typeof d);return g._plural(a,c,d)},_wrapContent:function(a,c,d,e){a=typeof a==="string"?[a]:a;var f=(i||(i=b("FbtHooks"))).getErrorListener({hash:d,translation:c});return i.getFbsResult({contents:a,errorListener:f,extraOptions:e,patternHash:d,patternString:c})},cachedResults:a});d=c;e.exports=d}),null);
__d("getJSEnumSafe",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){if(b==null)return null;if(!Object.prototype.hasOwnProperty.call(a,b))return null;b=b;return a[b]}f["default"]=a}),66);
__d("getOwnObjectValues",[],(function(a,b,c,d,e,f){function a(a){return Object.keys(a).map(function(b){return a[b]})}f["default"]=a}),66);
__d("shallowEqual",[],(function(a,b,c,d,e,f){"use strict";var g=Object.prototype.hasOwnProperty;function h(a,b){if(a===b)return a!==0||b!==0||1/a===1/b;else return a!==a&&b!==b}function a(a,b){if(h(a,b))return!0;if(typeof a!=="object"||a===null||typeof b!=="object"||b===null)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!g.call(b,c[d])||!h(a[c[d]],b[c[d]]))return!1;return!0}f["default"]=a}),66);/*FB_PKG_DELIM*/
__d("EBEpochChangeListener",["EBIsEbEnabled","EBIsEbEnabledSubscriber","ReQL","WAPubSub","err"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a){this.$1=d("WAPubSub").simplePubSub(),this.$3=a}var b=a.prototype;b.initialize=async function(){var a=this;await d("EBIsEbEnabled").isEbEnabledLS(this.$3.tables)&&this.$4(this.$3);await d("EBIsEbEnabledSubscriber").isEbEnabledSubscriber().then(function(b){b.subscribe(function(b){b?a.$4(a.$3):a.$2==null||a.$2()})})};b.$4=function(a){var b=this;this.$2==null&&(this.$2=d("ReQL").fromTableAscending(a.tables.secure_encrypted_backups_epochs).subscribe(function(a,c){b.$1.publish(c)}));return this.$2};b.subscribe=function(a){return this.$1.subscribe(a)};return a}(),i;async function a(a){if(i!=null)return Promise.resolve();i=new h(a);await i.initialize()}function b(a){if(i==null)throw c("err")("EBEpochChangeListener is not initialized");return i.subscribe(a)}g.initEBEpochChangeListener=a;g.subscribeToEpochChanges=b}),98);
__d("EBWorkerAddDeviceUtils",["EBDB","EBDBEbsmApi","EBSMProperties","I64","LSAuthorityLevel","LSIntEnum","LSJSEBInMemoryStorage","LSMetadata","LSReStoreWrapper","MAWLSVaultingHooks","ReQL","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i;async function a(a,b){var e=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.tables.secure_encrypted_backups_client_state));if(e!=null)return"dest_table_not_empty";e={clearEbStores:d("EBDB").clearEbStores,flushEBSMtoEBDB:d("EBDBEbsmApi").flushEBSMtoEBDB,rehydrateEBSMFromEBDB:d("EBDBEbsmApi").rehydrateEBSMFromEBDB,updateEBSM:function(){return Promise.resolve()}};e=await d("LSJSEBInMemoryStorage").makeReStorePersistence(e);if(e==null)throw c("err")("persistence is null");e=d("LSReStoreWrapper").createLSReStore(e,d("LSMetadata").schema,[c("MAWLSVaultingHooks")],void 0);var g=await d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(e.tables.secure_encrypted_backups_epochs));return g.filter(function(a){return(h||(h=d("I64"))).equal(a.authorityLevel,(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))}).length===0?"source_epoch_not_authoritative":e.runInTransaction(function(c){return b.runInTransaction(async function(b){var d=await Promise.all(a.map(async function(a){var d=c[a];d=d.entries(new WeakMap());var e=await d.next();if(e.done)return"source_table_empty";a=b[a];while(!e.done){var f=e.value,g=f[0];f=f[1];await a.upsert(g,f);e=await d.next()}return"success"}));d=new Set(d);if(d.has("source_table_empty"))return"source_table_empty";else if(d.has("success")&&d.size===1)return"success";return"fail"},"readwrite",void 0,void 0,f.id+":91")},"readonly",void 0,void 0,f.id+":89")}async function b(a){await a.runInTransaction(function(a){return Promise.all(c("EBSMProperties").persistedTablesArray.map(async function(b){b=a[b];var c=b.entries(new WeakMap()),d=await c.next();while(!d.done)await b.delete.apply(b,d.value[0]),d=await c.next()}))},"readwrite",void 0,void 0,f.id+":132")}g.copyEBStateTablesFromMainthreadToWorker=a;g.clearLSEBSMTables=b}),98);
__d("LSFetchBackupIds",["LSIssueNewEbTaskAndGetTaskIDV2","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsFetchBackupIdsStoredProcedure] Beginning execution."),d[11]=c.i64.cast([0,0]),d[7]=d[11],d[8]=new c.Map(),d[8].set("backup_tenancy",a[0]),d[8].set("trace_id",void 0),d[9]=c.toJSON(d[8]),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),"encrypted_backups_setup",c.i64.cast([0,50008]),d[9],c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.cast([0,0]),void 0,d[7]).then(function(a){return a=a,d[10]=a[0],a})},function(a){return d[1]=c.i64.of_float(Date.now()),d[2]=c.i64.random(),d[4]="Finishing execution. Execution time: ",d[5]=c.i64.to_string(c.i64.sub(d[1],d[0])),d[6]=" ms",d[3]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsFetchBackupIdsStoredProcedure] ",d[3],d[4],d[3],d[5],d[3],d[6]].join("")),c.i64.eq(c.i64.mod_(d[2],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[7]=",",d[8]=c.createArray(),void 0!==void 0?d[9]=(d[8].push(void 0),d[8]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsFetchBackupIdsStoredProcedure",[d[4],d[7],d[5],d[7],d[6]].join(""),d[8],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsFetchBackupIdsStoredProcedure";a.__tables__=["encrypted_backups"];e.exports=a}),null);
__d("LSFetchBackupIdsStoredProcedure",["LSFetchBackupIds","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSFetchBackupIds"),e.backupTenancy,e.traceId,e.isUiBlocking);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSIssueMessageRangeQueryTask",["LSArrayGetObjectAt","LSBase64Encode.nop","LSIsEncryptionVersionSecure","LSIssueNewTask","LSLoadThreadPkFromThreadId","LSLogMebClientEvent.nop","LSQplAnnotateString.nop","LSQplMarkPoint.nop","LSQplStartTrace.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][issueMessageRangeQueryTask] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[11]=c.i64.gt(a[1],c.i64.cast([0,0]))&&c.i64.gt(a[5],c.i64.cast([0,0])),c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[15]=new c.Map(),d[15].set("error_msg","Expected a nonempty query result"),d[15].set("code",c.i64.cast([0,3])),d[15].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[16]=c.createArray(),d[17]=(d[16].push(d[15]),d[16]),e=[void 0,d[16]],d[2]=e[0],d[3]=e[1]):(b=a.item,d[15]=new c.Map(),d[15].set("backup_id",b.backupId),d[15].set("device_public_key_blob",b.devicePublicKeyBlob),d[15].set("device_private_key_blob",b.devicePrivateKeyBlob),d[15].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[15].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[15].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[15].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[15].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[15].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[15].set("orf_client_state_v2_blob",void 0),d[15].set("orf_v2_authority_level",void 0),d[15].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[15].set("device_id",b.deviceId),d[15].set("backup_tenancy",b.backupTenancy),d[15].set("encryption_version",b.encryptionVersion),d[15].set("revision_version",b.revisionVersion),d[15].set("initialize_restore_result",void 0),d[15].set("device_creation_timestamp_sec",void 0),d[15].set("authority_level",b.authorityLevel),e=[d[15],void 0],d[2]=e[0],d[3]=e[1])})},function(e){return d[5]=new c.Map(),d[5].set("value",d[2]),d[5].set("errors",d[3]),d[6]=d[5].get("value"),d[6]!==void 0?c.sequence([function(e){return d[15]=d[6].get("backup_id"),d[16]=d[6].get("device_public_key_blob"),d[17]=d[6].get("device_private_key_blob"),d[18]=d[6].get("epoch_storage_public_key_blob"),d[19]=d[6].get("epoch_storage_private_key_blob"),d[20]=d[6].get("epoch_auth_public_key_blob"),d[21]=d[6].get("epoch_auth_private_key_blob"),d[22]=d[6].get("mailbox_root_key_blob"),d[23]=d[6].get("ocmf_client_state_blob"),d[24]=d[6].get("orf_client_state_v2_blob"),d[25]=d[6].get("orf_v2_authority_level"),d[26]=d[6].get("oblivious_validation_token_blob"),d[27]=d[6].get("device_id"),d[28]=d[6].get("backup_tenancy"),d[29]=d[6].get("encryption_version"),d[30]=d[6].get("revision_version"),d[31]=d[6].get("initialize_restore_result"),d[32]=d[6].get("device_creation_timestamp_sec"),d[33]=d[6].get("authority_level"),c.i64.neq(d[27],void 0)?c.sequence([function(a){return d[35]=void 0,c.i64.neq(d[35],void 0)?c.resolve(d[36]=d[35]):c.sequence([function(a){return d[41]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[42]=a[0],a})},function(a){return d[42]?d[51]=(d[41].push(c.i64.cast([0,0])),d[41]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[43]?d[51]=(d[41].push(c.i64.cast([0,2])),d[41]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[44]=a[0],a})},function(a){return d[44]?d[51]=(d[41].push(c.i64.cast([0,3])),d[41]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[45]=a[0],a})},function(a){return d[45]?d[51]=(d[41].push(c.i64.cast([0,4])),d[41]):0,d[46]=c.createArray(),d[47]=c.i64.of_int32(d[41].length),c.i64.gt(d[47],c.i64.cast([0,0]))?c.loopAsync(d[47],function(a){return d[51]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[41],d[51]).then(function(a){return a=a,d[52]=a[0],d[53]=a[1],a})},function(a){return d[54]=(d[46].push(d[52]),d[46])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[51]=c.createArray(),d[52]=c.i64.of_int32(d[46].length),c.i64.gt(d[52],c.i64.cast([0,0]))?c.loopAsync(d[52],function(a){return d[54]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[46],d[54]).then(function(a){return a=a,d[55]=a[0],d[56]=a[1],a})},function(a){return d[57]=(d[51].push(c.i64.to_string(d[55])),d[51])}])}):c.resolve()},function(a){return d[53]=d[51].join(","),d[48]=d[53]}])},function(a){return d[46].some(function(a){return c.i64.eq(d[29],a)})?d[49]=d[29]:d[49]=void 0,c.i64.neq(d[49],void 0)?d[50]=d[49]:d[50]=void 0,d[36]=d[50]}])},function(e){return c.i64.neq(d[36],void 0)?d[37]=d[36]:d[37]=c.i64.cast([0,0]),c.i64.neq(d[28],void 0)?d[38]=d[28]:d[38]=c.i64.cast([0,1]),c.storedProcedure(b("LSLoadThreadPkFromThreadId"),a[0]).then(function(a){return a=a,d[39]=a[0],d[40]=a[1],a})},function(e){return c.i64.neq(d[39],void 0)?d[11]?c.sequence([function(a){return d[41]=c.i64.random(),d[42]=void 0==null?c.i64.to_string(d[41]):void 0,d[42]!==void 0?c.nativeOperation(b("LSQplStartTrace.nop"),c.i64.cast([0,679677570]),d[42],!0,void 0):c.resolve()},function(a){return d[42]!==void 0?c.nativeOperation(b("LSQplMarkPoint.nop"),c.i64.cast([0,679677570]),d[42],"issue_task"):c.resolve()},function(a){return d[42]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,679677570]),d[42],"request_type","ENCRYPTED_BACKUPS_MESSAGE_SURROUNDING_QUERY"):c.resolve()},function(e){return c.i64.eq(d[38],c.i64.cast([0,3]))?d[43]=c.i64.cast([0,4]):d[43]=c.i64.cast([0,0]),d[44]=new c.Map(),d[44].set("act_thread_id",a[0]),d[44].set("request_id",d[42]),d[44].set("tam_thread_subtype",d[43]),d[44].set("source",a[6]),c.nativeOperation(b("LSBase64Encode.nop"),d[23]).then(function(a){return a=a,d[45]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[22]).then(function(a){return a=a,d[46]=a[0],a})},function(a){return d[47]=new c.Map(),d[47].set("ocmf_client_state_blob",d[45]==null?"":d[45]),d[47].set("mailbox_root_key",d[46]==null?"":d[46]),d[48]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[59]=(d[48].push(a.epochId),d[48])})},function(a){return d[57]="Queried locally available epochs. Count: ",d[49]=c.i64.of_int32(d[48].length),d[58]=c.i64.to_string(d[49]),d[50]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBEpochClientUtils] ",d[50],d[57],d[50],d[58]].join("")),c.resolve()},function(e){return d[51]=new c.Map(),d[51].set("device_id",d[27]),d[51].set("raw_tokens",d[47]),d[51].set("locally_available_epochs",d[48]),d[52]=new c.Map(),d[52].set("reference_timestamp",a[2]),d[52].set("server_thread_key",void 0),d[52].set("device_context",d[51]),d[52].set("source",a[6]),d[53]=new c.Map(),d[53].set("restore_context",d[44]),d[53].set("success",d[52]),d[54]=d[53].get("restore_context"),d[55]=d[54].get("act_thread_id"),d[56]=c.toJSON(d[53]),c.storedProcedure(b("LSIssueNewTask"),["encrypted_backups_restore",":",d[55]].join(""),c.i64.cast([0,50031]),d[56],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}]):c.i64.gt(a[1],c.i64.cast([0,0]))?c.sequence([function(e){return a[4]!==void 0?c.sequence([function(e){return c.i64.eq(a[6],c.i64.cast([0,21]))?c.resolve(d[59]=a[4]):c.sequence([function(a){return d[60]=c.i64.random(),d[61]=void 0==null?c.i64.to_string(d[60]):void 0,d[61]!==void 0?c.nativeOperation(b("LSQplStartTrace.nop"),c.i64.cast([0,679677570]),d[61],!0,void 0):c.resolve()},function(a){return d[61]!==void 0?c.nativeOperation(b("LSQplMarkPoint.nop"),c.i64.cast([0,679677570]),d[61],"issue_task"):c.resolve()},function(a){return d[61]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,679677570]),d[61],"request_type","ENCRYPTED_BACKUPS_MESSAGE_RANGE_QUERY"):c.resolve()},function(a){return d[59]=d[61]}])},function(a){return d[41]=d[59]}]):c.sequence([function(a){return d[59]=c.i64.random(),d[60]=void 0==null?c.i64.to_string(d[59]):void 0,d[60]!==void 0?c.nativeOperation(b("LSQplStartTrace.nop"),c.i64.cast([0,679677570]),d[60],!0,void 0):c.resolve()},function(a){return d[60]!==void 0?c.nativeOperation(b("LSQplMarkPoint.nop"),c.i64.cast([0,679677570]),d[60],"issue_task"):c.resolve()},function(a){return d[60]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,679677570]),d[60],"request_type","ENCRYPTED_BACKUPS_MESSAGE_RANGE_QUERY"):c.resolve()},function(a){return d[41]=d[60]}])},function(e){return c.i64.eq(d[38],c.i64.cast([0,3]))?d[42]=c.i64.cast([0,4]):d[42]=c.i64.cast([0,0]),a[7]===!0?d[43]=!0:d[43]=!1,d[44]=new c.Map(),d[44].set("act_thread_id",a[0]),d[44].set("request_id",d[41]),d[44].set("tam_thread_subtype",d[42]),d[44].set("reference_id",void 0),d[44].set("source",a[6]),c.nativeOperation(b("LSBase64Encode.nop"),d[23]).then(function(a){return a=a,d[45]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[22]).then(function(a){return a=a,d[46]=a[0],a})},function(a){return d[47]=new c.Map(),d[47].set("ocmf_client_state_blob",d[45]==null?"":d[45]),d[47].set("mailbox_root_key",d[46]==null?"":d[46]),d[48]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[59]=(d[48].push(a.epochId),d[48])})},function(a){return d[57]="Queried locally available epochs. Count: ",d[49]=c.i64.of_int32(d[48].length),d[58]=c.i64.to_string(d[49]),d[50]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBEpochClientUtils] ",d[50],d[57],d[50],d[58]].join("")),c.resolve()},function(e){return d[51]=new c.Map(),d[51].set("device_id",d[27]),d[51].set("raw_tokens",d[47]),d[51].set("locally_available_epochs",d[48]),d[52]=new c.Map(),d[52].set("reference_timestamp",a[2]),d[52].set("direction",c.i64.cast([0,1])),d[52].set("server_thread_key",void 0),d[52].set("device_context",d[51]),d[52].set("source",a[6]),d[52].set("include_offset",d[43]),d[53]=new c.Map(),d[53].set("restore_context",d[44]),d[53].set("success",d[52]),d[53].set("queue_name",void 0),d[54]=d[53].get("queue_name"),d[54]!==void 0?d[55]=d[54]:(d[59]=d[53].get("restore_context"),d[60]=d[59].get("act_thread_id"),d[55]=["encrypted_backups_restore",":",d[60]].join("")),d[56]=c.toJSON(d[53]),c.storedProcedure(b("LSIssueNewTask"),d[55],c.i64.cast([0,50030]),d[56],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}]):c.sequence([function(e){return a[4]!==void 0?c.sequence([function(e){return c.i64.eq(a[6],c.i64.cast([0,21]))?c.resolve(d[59]=a[4]):c.sequence([function(a){return d[60]=c.i64.random(),d[61]=void 0==null?c.i64.to_string(d[60]):void 0,d[61]!==void 0?c.nativeOperation(b("LSQplStartTrace.nop"),c.i64.cast([0,679677570]),d[61],!0,void 0):c.resolve()},function(a){return d[61]!==void 0?c.nativeOperation(b("LSQplMarkPoint.nop"),c.i64.cast([0,679677570]),d[61],"issue_task"):c.resolve()},function(a){return d[61]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,679677570]),d[61],"request_type","ENCRYPTED_BACKUPS_MESSAGE_RANGE_QUERY"):c.resolve()},function(a){return d[59]=d[61]}])},function(a){return d[41]=d[59]}]):c.sequence([function(a){return d[59]=c.i64.random(),d[60]=void 0==null?c.i64.to_string(d[59]):void 0,d[60]!==void 0?c.nativeOperation(b("LSQplStartTrace.nop"),c.i64.cast([0,679677570]),d[60],!0,void 0):c.resolve()},function(a){return d[60]!==void 0?c.nativeOperation(b("LSQplMarkPoint.nop"),c.i64.cast([0,679677570]),d[60],"issue_task"):c.resolve()},function(a){return d[60]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,679677570]),d[60],"request_type","ENCRYPTED_BACKUPS_MESSAGE_RANGE_QUERY"):c.resolve()},function(a){return d[41]=d[60]}])},function(e){return c.i64.eq(d[38],c.i64.cast([0,3]))?d[42]=c.i64.cast([0,4]):d[42]=c.i64.cast([0,0]),a[7]===!0?d[43]=!0:d[43]=!1,d[44]=new c.Map(),d[44].set("act_thread_id",a[0]),d[44].set("request_id",d[41]),d[44].set("tam_thread_subtype",d[42]),d[44].set("reference_id",void 0),d[44].set("source",a[6]),c.nativeOperation(b("LSBase64Encode.nop"),d[23]).then(function(a){return a=a,d[45]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[22]).then(function(a){return a=a,d[46]=a[0],a})},function(a){return d[47]=new c.Map(),d[47].set("ocmf_client_state_blob",d[45]==null?"":d[45]),d[47].set("mailbox_root_key",d[46]==null?"":d[46]),d[48]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[59]=(d[48].push(a.epochId),d[48])})},function(a){return d[57]="Queried locally available epochs. Count: ",d[49]=c.i64.of_int32(d[48].length),d[58]=c.i64.to_string(d[49]),d[50]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBEpochClientUtils] ",d[50],d[57],d[50],d[58]].join("")),c.resolve()},function(e){return d[51]=new c.Map(),d[51].set("device_id",d[27]),d[51].set("raw_tokens",d[47]),d[51].set("locally_available_epochs",d[48]),d[52]=new c.Map(),d[52].set("reference_timestamp",a[2]),d[52].set("direction",c.i64.cast([0,2])),d[52].set("server_thread_key",void 0),d[52].set("device_context",d[51]),d[52].set("source",a[6]),d[52].set("include_offset",d[43]),d[53]=new c.Map(),d[53].set("restore_context",d[44]),d[53].set("success",d[52]),d[53].set("queue_name",void 0),d[54]=d[53].get("queue_name"),d[54]!==void 0?d[55]=d[54]:(d[59]=d[53].get("restore_context"),d[60]=d[59].get("act_thread_id"),d[55]=["encrypted_backups_restore",":",d[60]].join("")),d[56]=c.toJSON(d[53]),c.storedProcedure(b("LSIssueNewTask"),d[55],c.i64.cast([0,50030]),d[56],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}]):c.sequence([function(e){return d[11]?(d[43]=new c.Map(),d[43].set("error_code",c.i64.cast([0,100])),d[43].set("error_message",""),d[43].set("stored_procedure","issueMessageRangeQueryTask"),d[44]=new c.Map(),d[44].set("act_thread_id",a[0]),d[45]=new c.Map(),d[45].set("restore_context",d[44]),d[45].set("failure",d[43]),d[46]=d[45].get("restore_context"),d[47]=d[46].get("act_thread_id"),d[48]=c.toJSON(d[45]),c.storedProcedure(b("LSIssueNewTask"),["encrypted_backups_restore",":",d[47]].join(""),c.i64.cast([0,50031]),d[48],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):c.sequence([function(a){return c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[55]=new c.Map(),d[55].set("error_msg","Expected a nonempty query result"),d[55].set("code",c.i64.cast([0,3])),d[55].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[56]=c.createArray(),d[57]=(d[56].push(d[55]),d[56]),e=[void 0,d[56]],d[43]=e[0],d[44]=e[1]):(b=a.item,d[55]=new c.Map(),d[55].set("backup_id",b.backupId),d[55].set("device_public_key_blob",b.devicePublicKeyBlob),d[55].set("device_private_key_blob",b.devicePrivateKeyBlob),d[55].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[55].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[55].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[55].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[55].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[55].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[55].set("orf_client_state_v2_blob",void 0),d[55].set("orf_v2_authority_level",void 0),d[55].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[55].set("device_id",b.deviceId),d[55].set("backup_tenancy",b.backupTenancy),d[55].set("encryption_version",b.encryptionVersion),d[55].set("revision_version",b.revisionVersion),d[55].set("initialize_restore_result",void 0),d[55].set("device_creation_timestamp_sec",void 0),d[55].set("authority_level",b.authorityLevel),e=[d[55],void 0],d[43]=e[0],d[44]=e[1])})},function(a){return d[46]=new c.Map(),d[46].set("value",d[43]),d[46].set("errors",d[44]),d[47]=d[46].get("value"),d[47]!==void 0?c.sequence([function(a){return d[55]=d[47].get("backup_id"),d[56]=d[47].get("device_public_key_blob"),d[57]=d[47].get("device_private_key_blob"),d[58]=d[47].get("epoch_storage_public_key_blob"),d[59]=d[47].get("epoch_storage_private_key_blob"),d[60]=d[47].get("epoch_auth_public_key_blob"),d[61]=d[47].get("epoch_auth_private_key_blob"),d[62]=d[47].get("mailbox_root_key_blob"),d[63]=d[47].get("ocmf_client_state_blob"),d[64]=d[47].get("orf_client_state_v2_blob"),d[65]=d[47].get("orf_v2_authority_level"),d[66]=d[47].get("oblivious_validation_token_blob"),d[67]=d[47].get("device_id"),d[68]=d[47].get("backup_tenancy"),d[69]=d[47].get("encryption_version"),d[70]=d[47].get("revision_version"),d[71]=d[47].get("initialize_restore_result"),d[72]=d[47].get("device_creation_timestamp_sec"),d[73]=d[47].get("authority_level"),c.i64.neq(d[67],void 0)?c.sequence([function(a){return d[75]=void 0,c.i64.neq(d[75],void 0)?c.resolve(d[76]=d[75]):c.sequence([function(a){return d[79]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[80]=a[0],a})},function(a){return d[80]?d[89]=(d[79].push(c.i64.cast([0,0])),d[79]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[81]=a[0],a})},function(a){return d[81]?d[89]=(d[79].push(c.i64.cast([0,2])),d[79]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[82]=a[0],a})},function(a){return d[82]?d[89]=(d[79].push(c.i64.cast([0,3])),d[79]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[83]=a[0],a})},function(a){return d[83]?d[89]=(d[79].push(c.i64.cast([0,4])),d[79]):0,d[84]=c.createArray(),d[85]=c.i64.of_int32(d[79].length),c.i64.gt(d[85],c.i64.cast([0,0]))?c.loopAsync(d[85],function(a){return d[89]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[79],d[89]).then(function(a){return a=a,d[90]=a[0],d[91]=a[1],a})},function(a){return d[92]=(d[84].push(d[90]),d[84])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[89]=c.createArray(),d[90]=c.i64.of_int32(d[84].length),c.i64.gt(d[90],c.i64.cast([0,0]))?c.loopAsync(d[90],function(a){return d[92]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[84],d[92]).then(function(a){return a=a,d[93]=a[0],d[94]=a[1],a})},function(a){return d[95]=(d[89].push(c.i64.to_string(d[93])),d[89])}])}):c.resolve()},function(a){return d[91]=d[89].join(","),d[86]=d[91]}])},function(a){return d[84].some(function(a){return c.i64.eq(d[69],a)})?d[87]=d[69]:d[87]=void 0,c.i64.neq(d[87],void 0)?d[88]=d[87]:d[88]=void 0,d[76]=d[88]}])},function(a){return c.i64.neq(d[76],void 0)?d[77]=d[76]:d[77]=c.i64.cast([0,0]),c.i64.neq(d[68],void 0)?d[78]=d[68]:d[78]=c.i64.cast([0,1]),d[74]=d[67]}]):c.resolve(d[74]=void 0)},function(a){return d[48]=d[74]}]):c.resolve((d[55]=d[46].get("errors"),d[56]=d[46].get("errors"),d[48]=void 0))},function(e){return d[49]=new c.Map(),d[49].set("error_code",c.i64.cast([0,100])),d[49].set("error_message",void 0==null?"":void 0),d[49].set("stored_procedure","issueMessageRangeQueryTask"),d[50]=new c.Map(),d[50].set("act_thread_id",a[0]),d[50].set("source",a[6]),d[50].set("restore_operation_type",c.i64.cast([0,2])),d[50].set("request_id",a[4]),d[50].set("device_id",d[48]),d[51]=new c.Map(),d[51].set("restore_context",d[50]),d[51].set("failure",d[49]),d[52]=d[51].get("queue_name"),d[52]!==void 0?d[53]=d[52]:(d[55]=d[51].get("restore_context"),d[56]=d[55].get("act_thread_id"),d[53]=["encrypted_backups_restore",":",d[56]].join("")),d[54]=c.toJSON(d[51]),c.storedProcedure(b("LSIssueNewTask"),d[53],c.i64.cast([0,50030]),d[54],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(e){return d[42]="threak pk not found for jid",d[42]!==void 0?(function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ","",d[42]].join("")),d[43]=c.createArray(),a[4]!==void 0?d[44]=(d[43].push(a[4]),d[43]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure",d[42],d[43],c.i64.cast([0,3]))):c.resolve()},function(a){return d[11]?d[41]=c.i64.cast([0,5]):d[41]=c.i64.cast([0,2])}])},function(a){return d[34]=!0}]):c.sequence([function(e){return d[11]?(d[37]=new c.Map(),d[37].set("error_code",c.i64.cast([0,1])),d[37].set("error_message",""),d[37].set("stored_procedure","issueMessageRangeQueryTask"),d[38]=new c.Map(),d[38].set("act_thread_id",a[0]),d[39]=new c.Map(),d[39].set("restore_context",d[38]),d[39].set("failure",d[37]),d[40]=d[39].get("restore_context"),d[41]=d[40].get("act_thread_id"),d[42]=c.toJSON(d[39]),c.storedProcedure(b("LSIssueNewTask"),["encrypted_backups_restore",":",d[41]].join(""),c.i64.cast([0,50031]),d[42],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):c.sequence([function(a){return c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[49]=new c.Map(),d[49].set("error_msg","Expected a nonempty query result"),d[49].set("code",c.i64.cast([0,3])),d[49].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[50]=c.createArray(),d[51]=(d[50].push(d[49]),d[50]),e=[void 0,d[50]],d[37]=e[0],d[38]=e[1]):(b=a.item,d[49]=new c.Map(),d[49].set("backup_id",b.backupId),d[49].set("device_public_key_blob",b.devicePublicKeyBlob),d[49].set("device_private_key_blob",b.devicePrivateKeyBlob),d[49].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[49].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[49].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[49].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[49].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[49].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[49].set("orf_client_state_v2_blob",void 0),d[49].set("orf_v2_authority_level",void 0),d[49].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[49].set("device_id",b.deviceId),d[49].set("backup_tenancy",b.backupTenancy),d[49].set("encryption_version",b.encryptionVersion),d[49].set("revision_version",b.revisionVersion),d[49].set("initialize_restore_result",void 0),d[49].set("device_creation_timestamp_sec",void 0),d[49].set("authority_level",b.authorityLevel),e=[d[49],void 0],d[37]=e[0],d[38]=e[1])})},function(a){return d[40]=new c.Map(),d[40].set("value",d[37]),d[40].set("errors",d[38]),d[41]=d[40].get("value"),d[41]!==void 0?c.sequence([function(a){return d[49]=d[41].get("backup_id"),d[50]=d[41].get("device_public_key_blob"),d[51]=d[41].get("device_private_key_blob"),d[52]=d[41].get("epoch_storage_public_key_blob"),d[53]=d[41].get("epoch_storage_private_key_blob"),d[54]=d[41].get("epoch_auth_public_key_blob"),d[55]=d[41].get("epoch_auth_private_key_blob"),d[56]=d[41].get("mailbox_root_key_blob"),d[57]=d[41].get("ocmf_client_state_blob"),d[58]=d[41].get("orf_client_state_v2_blob"),d[59]=d[41].get("orf_v2_authority_level"),d[60]=d[41].get("oblivious_validation_token_blob"),d[61]=d[41].get("device_id"),d[62]=d[41].get("backup_tenancy"),d[63]=d[41].get("encryption_version"),d[64]=d[41].get("revision_version"),d[65]=d[41].get("initialize_restore_result"),d[66]=d[41].get("device_creation_timestamp_sec"),d[67]=d[41].get("authority_level"),c.i64.neq(d[61],void 0)?c.sequence([function(a){return d[69]=void 0,c.i64.neq(d[69],void 0)?c.resolve(d[70]=d[69]):c.sequence([function(a){return d[73]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[74]=a[0],a})},function(a){return d[74]?d[83]=(d[73].push(c.i64.cast([0,0])),d[73]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[75]=a[0],a})},function(a){return d[75]?d[83]=(d[73].push(c.i64.cast([0,2])),d[73]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[76]=a[0],a})},function(a){return d[76]?d[83]=(d[73].push(c.i64.cast([0,3])),d[73]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[77]=a[0],a})},function(a){return d[77]?d[83]=(d[73].push(c.i64.cast([0,4])),d[73]):0,d[78]=c.createArray(),d[79]=c.i64.of_int32(d[73].length),c.i64.gt(d[79],c.i64.cast([0,0]))?c.loopAsync(d[79],function(a){return d[83]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[73],d[83]).then(function(a){return a=a,d[84]=a[0],d[85]=a[1],a})},function(a){return d[86]=(d[78].push(d[84]),d[78])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[83]=c.createArray(),d[84]=c.i64.of_int32(d[78].length),c.i64.gt(d[84],c.i64.cast([0,0]))?c.loopAsync(d[84],function(a){return d[86]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[78],d[86]).then(function(a){return a=a,d[87]=a[0],d[88]=a[1],a})},function(a){return d[89]=(d[83].push(c.i64.to_string(d[87])),d[83])}])}):c.resolve()},function(a){return d[85]=d[83].join(","),d[80]=d[85]}])},function(a){return d[78].some(function(a){return c.i64.eq(d[63],a)})?d[81]=d[63]:d[81]=void 0,c.i64.neq(d[81],void 0)?d[82]=d[81]:d[82]=void 0,d[70]=d[82]}])},function(a){return c.i64.neq(d[70],void 0)?d[71]=d[70]:d[71]=c.i64.cast([0,0]),c.i64.neq(d[62],void 0)?d[72]=d[62]:d[72]=c.i64.cast([0,1]),d[68]=d[61]}]):c.resolve(d[68]=void 0)},function(a){return d[42]=d[68]}]):c.resolve((d[49]=d[40].get("errors"),d[50]=d[40].get("errors"),d[42]=void 0))},function(e){return d[43]=new c.Map(),d[43].set("error_code",c.i64.cast([0,1])),d[43].set("error_message",void 0==null?"":void 0),d[43].set("stored_procedure","issueMessageRangeQueryTask"),d[44]=new c.Map(),d[44].set("act_thread_id",a[0]),d[44].set("source",a[6]),d[44].set("restore_operation_type",c.i64.cast([0,2])),d[44].set("request_id",a[4]),d[44].set("device_id",d[42]),d[45]=new c.Map(),d[45].set("restore_context",d[44]),d[45].set("failure",d[43]),d[46]=d[45].get("queue_name"),d[46]!==void 0?d[47]=d[46]:(d[49]=d[45].get("restore_context"),d[50]=d[49].get("act_thread_id"),d[47]=["encrypted_backups_restore",":",d[50]].join("")),d[48]=c.toJSON(d[45]),c.storedProcedure(b("LSIssueNewTask"),d[47],c.i64.cast([0,50030]),d[48],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(e){return d[36]="backup not found",d[36]!==void 0?(function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ","",d[36]].join("")),d[37]=c.createArray(),a[4]!==void 0?d[38]=(d[37].push(a[4]),d[37]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure",d[36],d[37],c.i64.cast([0,3]))):c.resolve()},function(a){return d[11]?d[35]=c.i64.cast([0,5]):d[35]=c.i64.cast([0,2]),d[34]=!1}])},function(a){return d[7]=d[34]}]):c.sequence([function(e){return d[15]=d[5].get("errors"),d[16]=d[5].get("errors"),d[11]?(d[19]=new c.Map(),d[19].set("error_code",c.i64.cast([0,1])),d[19].set("error_message",""),d[19].set("stored_procedure","issueMessageRangeQueryTask"),d[20]=new c.Map(),d[20].set("act_thread_id",a[0]),d[21]=new c.Map(),d[21].set("restore_context",d[20]),d[21].set("failure",d[19]),d[22]=d[21].get("restore_context"),d[23]=d[22].get("act_thread_id"),d[24]=c.toJSON(d[21]),c.storedProcedure(b("LSIssueNewTask"),["encrypted_backups_restore",":",d[23]].join(""),c.i64.cast([0,50031]),d[24],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):c.sequence([function(a){return c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[31]=new c.Map(),d[31].set("error_msg","Expected a nonempty query result"),d[31].set("code",c.i64.cast([0,3])),d[31].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[32]=c.createArray(),d[33]=(d[32].push(d[31]),d[32]),e=[void 0,d[32]],d[19]=e[0],d[20]=e[1]):(b=a.item,d[31]=new c.Map(),d[31].set("backup_id",b.backupId),d[31].set("device_public_key_blob",b.devicePublicKeyBlob),d[31].set("device_private_key_blob",b.devicePrivateKeyBlob),d[31].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[31].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[31].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[31].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[31].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[31].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[31].set("orf_client_state_v2_blob",void 0),d[31].set("orf_v2_authority_level",void 0),d[31].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[31].set("device_id",b.deviceId),d[31].set("backup_tenancy",b.backupTenancy),d[31].set("encryption_version",b.encryptionVersion),d[31].set("revision_version",b.revisionVersion),d[31].set("initialize_restore_result",void 0),d[31].set("device_creation_timestamp_sec",void 0),d[31].set("authority_level",b.authorityLevel),e=[d[31],void 0],d[19]=e[0],d[20]=e[1])})},function(a){return d[22]=new c.Map(),d[22].set("value",d[19]),d[22].set("errors",d[20]),d[23]=d[22].get("value"),d[23]!==void 0?c.sequence([function(a){return d[31]=d[23].get("backup_id"),d[32]=d[23].get("device_public_key_blob"),d[33]=d[23].get("device_private_key_blob"),d[34]=d[23].get("epoch_storage_public_key_blob"),d[35]=d[23].get("epoch_storage_private_key_blob"),d[36]=d[23].get("epoch_auth_public_key_blob"),d[37]=d[23].get("epoch_auth_private_key_blob"),d[38]=d[23].get("mailbox_root_key_blob"),d[39]=d[23].get("ocmf_client_state_blob"),d[40]=d[23].get("orf_client_state_v2_blob"),d[41]=d[23].get("orf_v2_authority_level"),d[42]=d[23].get("oblivious_validation_token_blob"),d[43]=d[23].get("device_id"),d[44]=d[23].get("backup_tenancy"),d[45]=d[23].get("encryption_version"),d[46]=d[23].get("revision_version"),d[47]=d[23].get("initialize_restore_result"),d[48]=d[23].get("device_creation_timestamp_sec"),d[49]=d[23].get("authority_level"),c.i64.neq(d[43],void 0)?c.sequence([function(a){return d[51]=void 0,c.i64.neq(d[51],void 0)?c.resolve(d[52]=d[51]):c.sequence([function(a){return d[55]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[56]=a[0],a})},function(a){return d[56]?d[65]=(d[55].push(c.i64.cast([0,0])),d[55]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[57]=a[0],a})},function(a){return d[57]?d[65]=(d[55].push(c.i64.cast([0,2])),d[55]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[58]=a[0],a})},function(a){return d[58]?d[65]=(d[55].push(c.i64.cast([0,3])),d[55]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[59]=a[0],a})},function(a){return d[59]?d[65]=(d[55].push(c.i64.cast([0,4])),d[55]):0,d[60]=c.createArray(),d[61]=c.i64.of_int32(d[55].length),c.i64.gt(d[61],c.i64.cast([0,0]))?c.loopAsync(d[61],function(a){return d[65]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[55],d[65]).then(function(a){return a=a,d[66]=a[0],d[67]=a[1],a})},function(a){return d[68]=(d[60].push(d[66]),d[60])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[65]=c.createArray(),d[66]=c.i64.of_int32(d[60].length),c.i64.gt(d[66],c.i64.cast([0,0]))?c.loopAsync(d[66],function(a){return d[68]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[60],d[68]).then(function(a){return a=a,d[69]=a[0],d[70]=a[1],a})},function(a){return d[71]=(d[65].push(c.i64.to_string(d[69])),d[65])}])}):c.resolve()},function(a){return d[67]=d[65].join(","),d[62]=d[67]}])},function(a){return d[60].some(function(a){return c.i64.eq(d[45],a)})?d[63]=d[45]:d[63]=void 0,c.i64.neq(d[63],void 0)?d[64]=d[63]:d[64]=void 0,d[52]=d[64]}])},function(a){return c.i64.neq(d[52],void 0)?d[53]=d[52]:d[53]=c.i64.cast([0,0]),c.i64.neq(d[44],void 0)?d[54]=d[44]:d[54]=c.i64.cast([0,1]),d[50]=d[43]}]):c.resolve(d[50]=void 0)},function(a){return d[24]=d[50]}]):c.resolve((d[31]=d[22].get("errors"),d[32]=d[22].get("errors"),d[24]=void 0))},function(e){return d[25]=new c.Map(),d[25].set("error_code",c.i64.cast([0,1])),d[25].set("error_message",void 0==null?"":void 0),d[25].set("stored_procedure","issueMessageRangeQueryTask"),d[26]=new c.Map(),d[26].set("act_thread_id",a[0]),d[26].set("source",a[6]),d[26].set("restore_operation_type",c.i64.cast([0,2])),d[26].set("request_id",a[4]),d[26].set("device_id",d[24]),d[27]=new c.Map(),d[27].set("restore_context",d[26]),d[27].set("failure",d[25]),d[28]=d[27].get("queue_name"),d[28]!==void 0?d[29]=d[28]:(d[31]=d[27].get("restore_context"),d[32]=d[31].get("act_thread_id"),d[29]=["encrypted_backups_restore",":",d[32]].join("")),d[30]=c.toJSON(d[27]),c.storedProcedure(b("LSIssueNewTask"),d[29],c.i64.cast([0,50030]),d[30],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(e){return d[18]="backup not found",d[18]!==void 0?(function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ","",d[18]].join("")),d[19]=c.createArray(),a[4]!==void 0?d[20]=(d[19].push(a[4]),d[19]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure",d[18],d[19],c.i64.cast([0,3]))):c.resolve()},function(a){return d[11]?d[17]=c.i64.cast([0,5]):d[17]=c.i64.cast([0,2]),d[7]=!1}])},function(a){return d[8]=c.i64.of_float(Date.now()),d[9]=c.i64.random(),d[12]="Finishing execution. Execution time: ",d[13]=c.i64.to_string(c.i64.sub(d[8],d[0])),d[14]=" ms",d[10]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueMessageRangeQueryTask] ",d[10],d[12],d[10],d[13],d[10],d[14]].join("")),c.i64.eq(c.i64.mod_(d[9],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[15]=",",d[16]=c.createArray(),void 0!==void 0?d[17]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"issueMessageRangeQueryTask",[d[12],d[15],d[13],d[15],d[14]].join(""),d[16],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs"];e.exports=a}),null);
__d("LSIssueMessageRangeQueryTaskStoredProcedure",["LSIssueMessageRangeQueryTask","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSIssueMessageRangeQueryTask"),e.threadId,e.numMessages,e.startSortKey,e.isPointQuery,e.traceId,e.newerNumMessages,e.source,e.includeOffset);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSProcessBackupIds",["LSAppendDataTraceAddon","LSIsMobileClient","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsProcessBackupIdsStoredProcedure] Beginning execution."),c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1487]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[9]=a[0],a})},function(a){return d[9]?d[10]=!0:d[10]=!1,d[10]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[12]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[12]].join("")),d[11]=c.createArray(),void 0!==void 0?d[13]=(d[11].push(void 0),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[12],d[11],c.i64.cast([0,3]))):c.resolve()}])},function(e){return c.db.table(172).fetch([[[c.i64.cast([0,1])]]]).next().then(function(e,f){var g=e.done;e=e.value;return g?c.sequence([function(e){return c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1488]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[9]=a[0],a})},function(a){return d[9]?d[10]=!0:d[10]=!1,d[10]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[12]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[12]].join("")),d[11]=c.createArray(),void 0!==void 0?d[13]=(d[11].push(void 0),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[12],d[11],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[1]=c.i64.cast([0,0])}]):(f=e.item,c.sequence([function(e){return d[11]=f.backupId,d[10]=f.authorityLevel,c.i64.eq(d[10],c.i64.cast([0,20]))?c.resolve(d[9]=c.i64.cast([0,1])):c.sequence([function(e){return c.i64.eq(d[10],c.i64.cast([0,80]))?c.sequence([function(e){return c.i64.eq(d[11],void 0)?c.sequence([function(e){return c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1492]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[14]=a[0],a})},function(a){return d[14]?d[15]=!0:d[15]=!1,d[15]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[17]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[17]].join("")),d[16]=c.createArray(),void 0!==void 0?d[18]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[17],d[16],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[13]=c.i64.cast([0,2])}]):c.sequence([function(e){return c.i64.eq(d[11],c.i64.cast([-1,4294967295]))?c.sequence([function(e){return c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1489]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[15]=a[0],a})},function(a){return d[15]?d[16]=!0:d[16]=!1,d[16]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[18]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[18]].join("")),d[17]=c.createArray(),void 0!==void 0?d[19]=(d[17].push(void 0),d[17]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[18],d[17],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[14]=c.i64.cast([-1,4294967295])}]):c.sequence([function(e){return c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.backupId,d[11])&&c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}).next().then(function(e,f){f=e.done;e=e.value;return f?c.sequence([function(e){return c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1490]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[17]=a[0],a})},function(a){return d[17]?d[18]=!0:d[18]=!1,d[18]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[20]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[20]].join("")),d[19]=c.createArray(),void 0!==void 0?d[21]=(d[19].push(void 0),d[19]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[20],d[19],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[15]=c.i64.cast([0,4])}]):(e.item,c.sequence([function(e){return c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1491]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[17]=a[0],a})},function(a){return d[17]?d[18]=!0:d[18]=!1,d[18]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[20]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[20]].join("")),d[19]=c.createArray(),void 0!==void 0?d[21]=(d[19].push(void 0),d[19]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[20],d[19],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[15]=c.i64.cast([0,3])}]))})},function(a){return d[14]=d[15]}])},function(a){return d[13]=d[14]}])},function(a){return d[12]=d[13]}]):c.sequence([function(e){return c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1489]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[13]=a[0],a})},function(a){return d[13]?d[14]=!0:d[14]=!1,d[14]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[16]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[16]].join("")),d[15]=c.createArray(),void 0!==void 0?d[17]=(d[15].push(void 0),d[15]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[16],d[15],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[12]=c.i64.cast([-1,4294967295])}])},function(a){return d[9]=d[12]}])},function(a){return d[1]=d[9]}]))})},function(a){return d[3]=c.i64.of_float(Date.now()),d[4]=c.i64.random(),d[6]="Finishing execution. Execution time: ",d[7]=c.i64.to_string(c.i64.sub(d[3],d[0])),d[8]=" ms",d[5]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsProcessBackupIdsStoredProcedure] ",d[5],d[6],d[5],d[7],d[5],d[8]].join("")),c.i64.eq(c.i64.mod_(d[4],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[9]=",",d[10]=c.createArray(),void 0!==void 0?d[11]=(d[10].push(void 0),d[10]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsProcessBackupIdsStoredProcedure",[d[6],d[9],d[7],d[9],d[8]].join(""),d[10],c.i64.cast([0,4]))):c.resolve()},function(a){return e[0]=d[1]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsProcessBackupIdsStoredProcedure";a.__tables__=["encrypted_backups","secure_encrypted_backups_client_state"];e.exports=a}),null);
__d("LSProcessBackupIdsStoredProcedure",["LSProcessBackupIds","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){e===void 0&&(e={});a=a.storedProcedure(c("LSProcessBackupIds"),e.traceId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MWEncryptedBackupsProcessBackupIdsDEPRECATED",["FBLogger","LSFactory","LSIntEnum","LSProcessBackupIdsStoredProcedure","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWEncryptedBackupsFirstRestoreUpsellTime","Promise","QPLEvent","QPLUserFlow","ReQL","WebSession","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=c("gkx")("23914");function l(a){if(k){var e=d("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime();c("QPLUserFlow").getActiveFlowIDs().includes((i||(i=d("QPLEvent"))).getMarkerId(d("MWChatEncryptedBackupsQPLEvents").processBackupIdsQPLEvent))||c("QPLUserFlow").start(d("MWChatEncryptedBackupsQPLEvents").processBackupIdsQPLEvent,{annotations:{string:{ebSessionIdentifier:e,processBackupIdsVersion:"msys",sessionTabId:d("WebSession").getId()}}});return a.runInTransaction(function(a){return c("LSProcessBackupIdsStoredProcedure")(c("LSFactory")(a))},"readwrite",void 0,void 0,f.id+":53").then(function(a){a=(j||(j=d("LSIntEnum"))).unwrapIntEnum(a[0]);c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").processBackupIdsQPLEvent,"EB_STATE_"+a+".");d("MWChatEncryptedBackupsLogging").endSuccess({event:d("MWChatEncryptedBackupsQPLEvents").processBackupIdsQPLEvent});return a})}else return(h||(h=b("Promise"))).resolve(0)}function a(a,b){return a.tables.encrypted_backups.subscribe(function(){c("promiseDone")(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.encrypted_backups)),function(d){if(d!=null){c("promiseDone")(l(a),b,function(a){c("FBLogger")("wmi_eb").catching(a).info("Error in db transaction")});return}})})}g.processBackupIdsStoredProcedure=l;g.subscribeToEncryptedBackupsRow=a}),98);
__d("isInstamadilloEB",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("670")===!0}g["default"]=a}),98);
__d("MWEncryptedBackupsListenForChangesToBackupStateInitPath",["EBAPIWorkerCheck","I64","LSAuthorityLevel","LSDataTraceType","LSEncryptedBackupsBackupTenancy","LSFactory","LSFetchBackupIdsStoredProcedure","LSIntEnum","LSIssueMessageRangeQueryTaskStoredProcedure","LSMEBTaskCreationSource","MAWEBRestoreTrackingUtils","MAWMainTraceUtils","MAWOfflineQueueStatus","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWEncryptedBackupsFirstRestoreUpsellTime","MWEncryptedBackupsProcessBackupIdsDEPRECATED","Promise","QPLEvent","QPLUserFlow","ReQL","WAJids","WATagsLogger","WebSession","gkx","isInstamadilloEB","promiseDone","qex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=c("gkx")("23961"),n=c("qex")._("121")===!0;function a(a){function b(){var b=d("ReQL").fromTableAscending(a.tables.encrypted_backups),e=b.subscribe(function(a,b){if(b.operation==="delete"||!(j||(j=d("I64"))).equal(b.value.authorityLevel,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE)))return;e();c("QPLUserFlow").getActiveFlowIDs().includes((l||(l=d("QPLEvent"))).getMarkerId(d("MWChatEncryptedBackupsQPLEvents").fetchBackupIdsQPLEvent))&&d("MWChatEncryptedBackupsLogging").endSuccess({event:d("MWChatEncryptedBackupsQPLEvents").fetchBackupIdsQPLEvent})});b=d("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime();c("QPLUserFlow").getActiveFlowIDs().includes((l||(l=d("QPLEvent"))).getMarkerId(d("MWChatEncryptedBackupsQPLEvents").fetchBackupIdsQPLEvent))||c("QPLUserFlow").start(d("MWChatEncryptedBackupsQPLEvents").fetchBackupIdsQPLEvent,{annotations:{string:{ebSessionIdentifier:b,fetchBackupIdsVersion:"msys",sessionTabId:d("WebSession").getId()}}});c("promiseDone")(a.runInTransaction(function(a){return c("LSFetchBackupIdsStoredProcedure")(c("LSFactory")(a),{backupTenancy:(k||(k=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION),isUiBlocking:!1})},"readwrite",void 0,void 0,f.id+":93"),function(){return p(a)})}(n||c("isInstamadilloEB")())&&b();var e=d("ReQL").fromTableAscending(a.tables.encrypted_backups_status_trigger);return e.subscribe(b)}function o(a){return a.runInTransaction(function(a){var e=d("MAWOfflineQueueStatus").getAllThreadsWithOfflineQueueIncomplete();return(i||(i=b("Promise"))).all(e.map(function(b){var e=d("WAJids").threadIdForChatJid(b),f=d("MAWMainTraceUtils").createTraceId();c("promiseDone")(d("MAWMainTraceUtils").startTraceWithTxn(a,(j||(j=d("I64"))).of_float(Date.now()),f,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_RESTORE)));e={isPointQuery:!1,newerNumMessages:j.zero,numMessages:j.of_int32(20),source:k.ofNumber(c("LSMEBTaskCreationSource").UNKNOWN),threadId:e,traceId:f};d("WATagsLogger").TAGS(["labyrinth_web","eb_prefetch",f]).LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[EB Prefetch] Issuing message range query for thread "," with params ",""])),b,JSON.stringify(e));d("MAWEBRestoreTrackingUtils").markEBRestoreFrontloaded(c("LSMEBTaskCreationSource").UNKNOWN,f,!1);return c("LSIssueMessageRangeQueryTaskStoredProcedure")(c("LSFactory")(a),e)}))},"readonly",void 0,void 0,f.id+":122")}function p(a){var b=d("MAWOfflineQueueStatus").isOfflineQueueComplete();m&&!b&&c("promiseDone")(d("MWEncryptedBackupsProcessBackupIdsDEPRECATED").processBackupIdsStoredProcedure(a),function(b){if(d("EBAPIWorkerCheck").runningInWorker())return;b===3&&c("promiseDone")(o(a))})}e={listenForChangesToBackupState:a,preloadEBData:p};g["default"]=e}),98);
__d("EBLS",["EBDB","EBDBEbsmApi","EBEpochChangeListener","EBIsEbEnabled","EBIsEbEnabledSubscriber","EBLogger","EBReadyNotifier","EBReenrollmentTriggerListener","EBWorkerAddDeviceUtils","I64","LSAuthorityLevel","LSDataTraceFlushDeferred","LSDatascriptEvaluatorMaybeDeferred","LSDedicatedMqttChannel","LSDefaultSyncGroups","LSDeleteAllAndInsertConnectivityStatusStoredProcedure","LSEncryptedBackupsBackupTenancy","LSFactory","LSIntEnum","LSInternetConnectionState","LSJSEBInMemoryStorage","LSMetadata","LSPlatformDeviceId","LSPlatformMessengerSyncParams","LSPlatformMqttRealtimeTransport","LSPlatformRealtimeTransport","LSPlatformTaskSystemTransport","LSReStoreWrapper","LSVersion","MAWBridge","MAWEBLSInWorkerSwitch","MAWEncryptedBackupsStateManager","MAWLSVaultingHooks","MAWODSProxy","MAWVaultMaterialsStorage","MWEncryptedBackupsListenForChangesToBackupStateInitPath","MWEncryptedBackupsProcessBackupIdsDEPRECATED","MWPlatformTaskSystem","MqttEnv","QPLUserFlow","ReQL","ServerAppID","WAAssertUnreachable","WAOdsEnums","WAPromiseDelays","WAResolvable","WAWaitForUserUnblocked","cr:7533","emptyFunction","err","getMWLSRegion","gkx","nullthrows","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F=d("EBLogger").EBLogger().tags(["EBLS"]),G=c("qpl")._(521478817,"2806");function a(){return K()}var H,I,J;function K(){return H?H.promise:L({copyKeys:!0,getNewDB:!1}).promise}function L(a){H!=null&&!H.isSettled&&H.reject(c("err")("LSClient is not settled"));I!=null&&!I.isSettled&&I.reject(c("err")("LSDBStorage is not settled"));var b=new(d("WAResolvable").Resolvable)();H=b;I=null;void N(a).then(function(a){b.resolve(a)},function(a){b.reject(a)});return b}async function M(){c("QPLUserFlow").addPoint(G,"offline_queue_wait_start"),await d("WAWaitForUserUnblocked").waitForUserUnblocked(),c("QPLUserFlow").addPoint(G,"offline_queue_wait_end")}async function N(a){var b;a=a.getNewDB;d("EBReadyNotifier").resetEBReady();(b=c("QPLUserFlow")).start(G,{timeoutInMs:6e4});b.addPoint(G,"ls_storage_creation_start");a=await O(a);b.addPoint(G,"ls_storage_creation_end");b.addPoint(G,"eb_worker_add_device_skipped");b.endSuccess(G);d("EBReadyNotifier").markEBReady();F.DEBUG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Initialised db"])));b={appId:c("nullthrows")(c("ServerAppID").app_id),executeGraphQLLightSpeedRequest:async function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];var e=await d("MAWBridge").getBridge().sendAndReceive("event","executeGraphQLLightSpeedRequest",{args:b});return e},getDb:O,getEval:function(){return c("LSDatascriptEvaluatorMaybeDeferred")()},platformName:"Messenger",realtimeUnderylingTransport:function(){return Promise.resolve(function(b,a){return c("LSPlatformMqttRealtimeTransport")(c("LSVersion"),a,{getInstance:d("LSDedicatedMqttChannel").getInstance(function(){return!0},(b={},b[d("MqttEnv").MqttGkNames.mqttweb_global_connection_counter]=!1,b),function(a,b){return b},c("emptyFunction")),shutdownAndClear:d("LSDedicatedMqttChannel").shutdownAndClear})})},region:c("getMWLSRegion")(),schemaVersion:c("LSVersion"),sendHardcodedInitSync:!1,syncParams:c("LSPlatformMessengerSyncParams")};F.DEBUG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["created config"])));c("QPLUserFlow").addAnnotations(G,{string:{appId:b.appId}});var e=d("LSPlatformDeviceId").getDeviceIdForProviderType("ephemeral");c("QPLUserFlow").addPoint(G,"platform_client_init_start");b=await R(a,b,e);c("QPLUserFlow").addPoint(G,"platform_client_init_end");J=S(a);await d("EBIsEbEnabledSubscriber").initIsEbEnabledPubSub(a);await d("EBEpochChangeListener").initEBEpochChangeListener(a);await d("EBReenrollmentTriggerListener").initEBReenrollmentTriggerListener(a);F.DEBUG(j||(j=babelHelpers.taggedTemplateLiteralLoose(["finished init successfully"])));return b}async function O(a){a===void 0&&(a=!1);if(!a&&I!=null)return I.promise;a=new(d("WAResolvable").Resolvable)();I=a;await d("MAWVaultMaterialsStorage").setupVaultMaterials();var b={clearEbStores:d("EBDB").clearEbStores,flushEBSMtoEBDB:d("EBDBEbsmApi").flushEBSMtoEBDB,rehydrateEBSMFromEBDB:d("EBDBEbsmApi").rehydrateEBSMFromEBDB},e=await d("LSJSEBInMemoryStorage").makeReStorePersistence(b);e=d("LSReStoreWrapper").createLSReStore(e,d("LSMetadata").schema,[c("MAWLSVaultingHooks")],void 0);b.updateEBSM=d("EBDBEbsmApi").updateEBSM(e);await e.runInTransaction(async function(a){await d("LSDefaultSyncGroups").seedDb(a,void 0)},"readwrite","ui",void 0,f.id+":240");a.resolve(e);return e}async function e(){if(b("cr:7533")!=null||H==null)return;await d("EBWorkerAddDeviceUtils").clearLSEBSMTables(await O())}function P(a){var b=c("MWEncryptedBackupsListenForChangesToBackupStateInitPath").listenForChangesToBackupState(a);return function(){b&&b()}}function Q(a,b){var e=b==="Connected"?(D||(D=d("LSIntEnum"))).ofNumber(c("LSInternetConnectionState").CONNECTED):(D||(D=d("LSIntEnum"))).ofNumber(c("LSInternetConnectionState").NOT_CONNECTED);F.DEBUG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync connection status: ",""])),b);c("promiseDone")(a.runInTransaction(function(a){return c("LSDeleteAllAndInsertConnectivityStatusStoredProcedure")(c("LSFactory")(a),{internetConnectionState:e})},"readwrite",void 0,void 0,f.id+":280"),function(){F.DEBUG(l||(l=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync connection status set successfully"])))},function(a){F.MUSTFIX(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync connection status set failed: ",""])),a==null?void 0:a.message);throw a})}async function R(a,e,f){F.DEBUG(n||(n=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync starting..."])));var g=await e.getEval();F.DEBUG(o||(o=babelHelpers.taggedTemplateLiteralLoose(["Getting datascript evaluator success"])));var h=g()(a);F.DEBUG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Clearing epoch before resume sync..."])));F.DEBUG(q||(q=babelHelpers.taggedTemplateLiteralLoose(["Starting realtime transport"])));g=await e.realtimeUnderylingTransport();var i=d("LSPlatformRealtimeTransport").LSPlatformRealtimeTransport(g,e.appId,f);F.DEBUG(r||(r=babelHelpers.taggedTemplateLiteralLoose(["Starting task system"])));var j=new(c("MWPlatformTaskSystem"))(a,new(c("LSPlatformTaskSystemTransport"))(a,i,h,e.schemaVersion));F.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Starting backup state listeners"])));var k=null;b("cr:7533")!=null?c("promiseDone")(M().then(function(a){return b("cr:7533")()}),function(b){c("QPLUserFlow").addPoint(G,"sync_system_creation_start"),k=b(a,i,h,e.schemaVersion,f,e.executeGraphQLLightSpeedRequest),c("QPLUserFlow").addPoint(G,"sync_system_creation_end")}):c("QPLUserFlow").addPoint(G,"sync_system_creation_skipped");var l=P(a);F.DEBUG(t||(t=babelHelpers.taggedTemplateLiteralLoose(["Watching for expired traces"])));var m;c("promiseDone")(d("LSDataTraceFlushDeferred").watchForExpiredTraces(a).then(function(a){m=a}));F.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Subscribing to mqtt sync status change events"])));i.onConnectionStatusChange(function(b){Q(a,b)});F.DEBUG(v||(v=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync starting sucess"])));return{cleanup:function(){var a;F.DEBUG(w||(w=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync cleaning up"])));j==null||j.cleanup();i.cleanup();(a=k)==null||a.cleanup();l();m==null||m();J.forEach(function(a){return a()})},db:a}}function S(a){var b=[];if(c("gkx")("12414")){var e=function(a){d("MAWEncryptedBackupsStateManager").setEncryptedBackupsState(a),d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"UpdateEBState",value:{newState:a}}]})},f=a.tables.encrypted_backups.subscribe(function(){c("promiseDone")(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.encrypted_backups)),function(b){if(b!=null){c("promiseDone")(d("MWEncryptedBackupsProcessBackupIdsDEPRECATED").processBackupIdsStoredProcedure(a),e,function(a){F.catching(a).mustfix("Process backup ids failed")});return}})});b.push(f)}else{f=T(a);b.push(f)}return b}function T(a){var b=null;function e(a){var e=b===null?"null":String(b),f=String(a);d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.EB_SWITCH_STATE,key:"ebls_switch.state_transition."+e+"_to_"+f});F.DEBUG(x||(x=babelHelpers.taggedTemplateLiteralLoose(["EBLS Switch state transition: "," -> ",""])),e,f);b===!0&&a===!1&&(F.DEBUG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["EBLS Switch detected true->false transition, setting timeout to check self-correction"]))),void d("WAPromiseDelays").delayMs(1e3).then(async function(){var a=await d("EBIsEbEnabled").isEBEnabled(),b=a===!0;F.DEBUG(z||(z=babelHelpers.taggedTemplateLiteralLoose(["EBLS Switch true->false correction check: corrected=",", current_state=",""])),String(b),String(a));d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.EB_SWITCH_STATE,key:"ebls_switch.true_to_false_correction."+(b?"corrected":"not_corrected")});b=c("MAWEBLSInWorkerSwitch").isEnabled();a=a===b?"match":"mismatch";d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.EB_SWITCH_STATE,key:"ebls_switch.true_to_false_check."+a})}).catch(function(a){F.catching(a).MUSTFIX(A||(A=babelHelpers.taggedTemplateLiteralLoose(["EBLS Switch failed to check true->false correction"])))}));c("MAWEBLSInWorkerSwitch").set(a);b=a}d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.secure_encrypted_backups_client_state)).then(function(a){a!=null?e(U(a)):e(!1)}).catch(function(a){F.catching(a).MUSTFIX(B||(B=babelHelpers.taggedTemplateLiteralLoose(["Failed to get initial state for EBLS Switch"])))});return a.tables.secure_encrypted_backups_client_state.subscribe(function(a,b){F.DEBUG(C||(C=babelHelpers.taggedTemplateLiteralLoose(["EBLS Switch state changed. operation: ",""])),b.operation);switch(b.operation){case"delete":e(!1);break;case"add":case"put":e(U(b.value));break;default:b.operation;throw c("WAAssertUnreachable")(b.operation)}})}function U(a){var b=a.authorityLevel;a=a.backupTenancy;if(b==null)return!1;a=a!=null?a:(D||(D=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION);return(E||(E=d("I64"))).equal(a,(D||(D=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION))&&(E||(E=d("I64"))).equal(b,(D||(D=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))}g.init=a;g.genLSClient=K;g.getLSStorage=O;g.clearEBSMStorage=e;g.platformClientInit=R}),98);
__d("EBLSResignCdnUrlDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("EBLSResignCdnUrl").__setRef("EBLSResignCdnUrlDeferred");function a(a){return h.load().then(function(b){return b.eblsResignCdnUrl(a)})}function b(a){return h.load().then(function(b){return b.eblsResignCdnUrlWithGraphQL(a)})}g.eblsResignCdnUrl=a;g.eblsResignCdnUrlWithGraphQL=b}),98);
__d("EBUploadMessagesFromWorkerMutationDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("EBUploadMessagesFromWorkerMutation").__setRef("EBUploadMessagesFromWorkerMutationDeferred");function a(a){return h.load().then(function(b){return b.uploadMessagesFromWorker(a)})}g.uploadMessagesFromWorker=a}),98);/*FB_PKG_DELIM*/
__d("BaseMultiPageEntryPointImpl.react",["CometPlaceholder.react","CometRelay","clearTimeout","react","react-compiler-runtime","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useRef;function a(a){var b=d("react-compiler-runtime").c(15),e=a.entryPoint,f=a.environmentProvider,g=a.fallback,h=a.loadedEntryPoint,l=a.otherProps,m=a.placeholderComponent,n=a.preloadParams;a=a.usePlaceholder;m=m===void 0?c("CometPlaceholder.react"):m;a=a===void 0?!0:a;f=d("CometRelay").useEntryPointLoader(f,e);var o=f[0],p=f[1],q=f[2],r=o!=null?o:h,s=k(null);b[0]!==q||b[1]!==r.isDisposed||b[2]!==h||b[3]!==n||b[4]!==p||b[5]!==o?(e=function(){s.current!=null&&(c("clearTimeout")(s.current),s.current=null);r.isDisposed&&p(n);return function(){s.current=c("setTimeout")(function(){o?q():h.dispose(),s.current=null},6e4)}},f=[q,r.isDisposed,h,n,p,o],b[0]=q,b[1]=r.isDisposed,b[2]=h,b[3]=n,b[4]=p,b[5]=o,b[6]=e,b[7]=f):(e=b[6],f=b[7]);j(e,f);b[8]!==r||b[9]!==l?(e=i.jsx(d("CometRelay").EntryPointContainer,{entryPointReference:r,props:l}),b[8]=r,b[9]=l,b[10]=e):e=b[10];f=e;if(!a)return f;b[11]!==m||b[12]!==f||b[13]!==g?(l=i.jsx(m,{fallback:g,children:f}),b[11]=m,b[12]=f,b[13]=g,b[14]=l):l=b[14];return l}g["default"]=a}),98);
__d("BaseMultiStepContainer.react",["BaseBaseMultiStepContainer.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["ref"],i,j=i||(i=d("react"));b=i;b.useCallback;var k=b.useState;function a(a){var b=d("react-compiler-runtime").c(11),e,f;b[0]!==a?(f=a.ref,e=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f):(e=b[1],f=b[2]);b[3]===Symbol["for"]("react.memo_cache_sentinel")?(a=[],b[3]=a):a=b[3];a=k(a);var g=a[0],i=a[1];a=k(0);var l=a[0],m=a[1];b[4]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(a){m(function(b){i(function(c){return c.slice(0,b).concat(a)});return b+1})},b[4]=a):a=b[4];a=a;var n;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(n=function(a){m(a)},b[5]=n):n=b[5];n=n;b[6]!==g||b[7]!==l||b[8]!==e||b[9]!==f?(n=j.jsx(c("BaseBaseMultiStepContainer.react"),babelHelpers["extends"]({},e,{pageComponents:g,pageCursor:l,ref:f,setPopPageState:n,setPushPageState:a,children:e.children})),b[6]=g,b[7]=l,b[8]=e,b[9]=f,b[10]=n):n=b[10];return n}g["default"]=a}),98);
__d("useBaseProgressRingSvg.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useMemo;var j=b.useRef,k=2;function a(a){var b=d("react-compiler-runtime").c(48),c=a.backgroundColor,e=a.foregroundColor,f=a.isHidden;a=a.size;var g=j(null),h=j(null),l=j(null),m=(a-k)*Math.PI,n;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(n={className:"x1ey2m1c x9f619 xtijo5x x1o0tod x10l6tqk x13vifvy"},b[0]=n):n=b[0];var o="0 0 "+a+" "+a,p=a/2,q=a/2,r=(a-k)/2,s;b[1]!==c||b[2]!==p||b[3]!==q||b[4]!==r?(s=i.jsx("circle",{cx:p,cy:q,fill:"none","non-scaling-stroke":"non-scaling-stroke",r:r,stroke:c,strokeLinecap:"round",strokeWidth:k}),b[1]=c,b[2]=p,b[3]=q,b[4]=r,b[5]=s):s=b[5];b[6]!==a||b[7]!==o||b[8]!==s?(c=i.jsx("svg",babelHelpers["extends"]({},n,{height:a,ref:g,viewBox:o,width:a,children:s})),b[6]=a,b[7]=o,b[8]=s,b[9]=c):c=b[9];b[10]===Symbol["for"]("react.memo_cache_sentinel")?(p={className:"x1ey2m1c xtijo5x xbudbmw x6ikm8r x10wlt62 x10l6tqk x13vifvy"},q={className:"x1ey2m1c x9f619 xtijo5x xyj9dbu x10l6tqk x13vifvy x1jpgh95"},b[10]=q,b[11]=p):(q=b[10],p=b[11]);r="0 0 "+a+" "+a;n=a/2;o=a/2;s=(a-k)/2;var t=m/2,u=3*m/4,v=f?"hidden":void 0,w;b[12]!==v?(w={visibility:v},b[12]=v,b[13]=w):w=b[13];b[14]!==e||b[15]!==n||b[16]!==o||b[17]!==s||b[18]!==t||b[19]!==u||b[20]!==w?(v=i.jsx("circle",{cx:n,cy:o,fill:"none","non-scaling-stroke":"non-scaling-stroke",r:s,stroke:e,strokeDasharray:t,strokeDashoffset:u,strokeWidth:k,style:w}),b[14]=e,b[15]=n,b[16]=o,b[17]=s,b[18]=t,b[19]=u,b[20]=w,b[21]=v):v=b[21];b[22]!==a||b[23]!==r||b[24]!==v?(n=i.jsx("div",babelHelpers["extends"]({},p,{children:i.jsx("svg",babelHelpers["extends"]({},q,{height:a,ref:h,viewBox:r,width:a,children:v}))})),b[22]=a,b[23]=r,b[24]=v,b[25]=n):n=b[25];b[26]===Symbol["for"]("react.memo_cache_sentinel")?(o={className:"x1ey2m1c x1dkd41z x1o0tod x6ikm8r x10wlt62 x10l6tqk x13vifvy"},s={className:"x1ey2m1c x9f619 x1h4o2ik x1o0tod x10l6tqk x13vifvy x1jpgh95"},b[26]=o,b[27]=s):(o=b[26],s=b[27]);t="0 0 "+a+" "+a;u=a/2;w=a/2;p=(a-k)/2;q=m/2;r=m/4;v=f?"hidden":void 0;b[28]!==v?(m={visibility:v},b[28]=v,b[29]=m):m=b[29];b[30]!==e||b[31]!==u||b[32]!==w||b[33]!==p||b[34]!==q||b[35]!==r||b[36]!==m?(f=i.jsx("circle",{cx:u,cy:w,fill:"none","non-scaling-stroke":"non-scaling-stroke",r:p,stroke:e,strokeDasharray:q,strokeDashoffset:r,strokeWidth:k,style:m}),b[30]=e,b[31]=u,b[32]=w,b[33]=p,b[34]=q,b[35]=r,b[36]=m,b[37]=f):f=b[37];b[38]!==a||b[39]!==t||b[40]!==f?(v=i.jsx("div",babelHelpers["extends"]({},o,{children:i.jsx("svg",babelHelpers["extends"]({},s,{height:a,ref:l,viewBox:t,width:a,children:f}))})),b[38]=a,b[39]=t,b[40]=f,b[41]=v):v=b[41];b[42]!==n||b[43]!==v||b[44]!==c?(e=i.jsxs(i.Fragment,{children:[c,n,v]}),b[42]=n,b[43]=v,b[44]=c,b[45]=e):e=b[45];u=e;w=u;b[46]!==w?(p={backgroundRef:g,leftCircleRef:l,progressRing:w,rightCircleRef:h},b[46]=w,b[47]=p):p=b[47];return p}g["default"]=a}),98);
__d("BaseProgressRing.react",["BaseLoadingStateElement.react","FDSProgressRingUtils","performanceNavigationStart","react","recoverableViolation","useBaseProgressRingSvg.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useCallback,k=b.useEffect,l=b.useLayoutEffect,m=b.useRef,n=b.useState,o={rootDiv:{position:"x1n2onr6",$$css:!0},rootSizing:function(a,b){return[{height:b!=null?"x16ye13r":b,width:a!=null?"x5lhr3w":a,$$css:!0},{"--x-height":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(b),"--x-width":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(a)}]}},p=d("FDSProgressRingUtils").getCubicBezierPercentageFunc(.45,0,.25,.85);function a(a){var b=a["aria-label"],d=a["aria-labelledby"],e=a.backgroundColor,f=a.beginningPercentage,g=a.duration,h=a.explicitStartTime,s=a.foregroundColor,t=a.onComplete,u=a.pause,v=a.percentage,w=a.size,x=a.type;x!=="default"&&v!=null&&c("recoverableViolation")("percentage should only be applied to default type","comet_ui");var y=m(null),z=m(null);a=n(!0);var A=a[0],B=a[1];a=q(x,v,f);f=a.completedPercentage;var C=a.finalPercentage;a=a.startPercentage;var D=m(a),E=m(C),F=m(f);a=c("useBaseProgressRingSvg.react")({backgroundColor:e,foregroundColor:s,isHidden:A,size:w});var G=a.backgroundRef,H=a.leftCircleRef;C=a.progressRing;var I=a.rightCircleRef,J=j(function(a){var b=I.current,d=H.current;if(b==null||d==null)return;if(!(b instanceof SVGSVGElement)||!(d instanceof SVGSVGElement))return;if((x==="default"||x==="count-down")&&u===!0)return;z.current==null&&(z.current=h!=null?h-c("performanceNavigationStart")():a);if(x==="estimated")if(F.current>75)F.current+=.3*Math.pow((100-F.current)/50,2);else{var e=(a-z.current)/g/1e3;e=p(e);F.current=e*75}else if(x==="default"&&F.current<E.current){e=(a-z.current)/1e3/g*100;F.current=Math.min(e,100)}else if(x==="count-down"&&F.current>E.current){e=(a-z.current)/1e3/g*100;F.current=D.current-e;F.current=Math.max(F.current,0)}a=Math.max(0,Math.min(100,F.current))/100*360;b.style.transform="rotate("+Math.min(a,180)+"deg)";d.style.transform="rotate("+Math.max(a-180,0)+"deg)";r(x,F.current,v)?(window.cancelAnimationFrame(y.current),b.style.opacity="0",d.style.opacity="0",z.current=null,y.current=null,G.current instanceof SVGSVGElement&&(G.current.style.opacity="0"),t&&t()):y.current=window.requestAnimationFrame(J)},[G,g,h,H,t,u,v,I,x]);l(function(){A&&B(!A)},[A]);k(function(){if(window.requestAnimationFrame!=null){y.current=window.requestAnimationFrame(J);return function(){y.current!=null&&(z.current=null,window.cancelAnimationFrame(y.current),y.current=null)}}},[w,J]);return i.jsx(c("BaseLoadingStateElement.react"),{"aria-label":b,"aria-labelledby":d,xstyle:[o.rootDiv,o.rootSizing(w,w)],children:C})}a.displayName=a.name+" [from "+f.id+"]";function q(a,b,c){switch(a){case"default":return{completedPercentage:c!=null?c:0,finalPercentage:b!=null?b:100,startPercentage:c!=null?c:0};case"count-down":return{completedPercentage:100,finalPercentage:0,startPercentage:100};case"estimated":return{completedPercentage:0,finalPercentage:75,startPercentage:0};default:return{completedPercentage:0,finalPercentage:0,startPercentage:0}}}function r(a,b,c){return a==="count-down"?b<=0||b>100:b>=(c!=null?c:100)}g["default"]=a}),98);
__d("FDSProgressRing.react",["BaseProgressRing.react","FDSProgressRingUtils","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(15),e=a.beginningPercentage,f=a.color,g=a.duration,h=a.explicitStartTime,j=a.onComplete,k=a.pause,l=a.percentage,m=a.size,n=a.type,o=a["aria-label"];a=a["aria-labelledby"];var p;b[0]!==f?(p=d("FDSProgressRingUtils").getRingColor(f),b[0]=f,b[1]=p):p=b[1];f=p;p=f.backgroundColor;f=f.foregroundColor;var q;b[2]!==o||b[3]!==a||b[4]!==p||b[5]!==e||b[6]!==g||b[7]!==h||b[8]!==f||b[9]!==j||b[10]!==k||b[11]!==l||b[12]!==m||b[13]!==n?(q=i.jsx(c("BaseProgressRing.react"),{"aria-label":o,"aria-labelledby":a,backgroundColor:p,beginningPercentage:e,duration:g,explicitStartTime:h,foregroundColor:f,onComplete:j,pause:k,percentage:l,size:m,type:n}),b[2]=o,b[3]=a,b[4]=p,b[5]=e,b[6]=g,b[7]=h,b[8]=f,b[9]=j,b[10]=k,b[11]=l,b[12]=m,b[13]=n,b[14]=q):q=b[14];return q}g["default"]=a}),98);
__d("LSContactGenderToGenderConst",["GenderConst","I64","LSContactGender","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactGender").FEMALE)))return c("GenderConst").FEMALE_SINGULAR;else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactGender").MALE)))return c("GenderConst").MALE_SINGULAR;else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactGender").NEUTER)))return c("GenderConst").NEUTER_SINGULAR;else return c("GenderConst").NOT_A_PERSON}g["default"]=a}),98);
__d("MAWMiActOnMiThreadExistsForJidDeferred__DO_NOT_USE",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").__setRef("MAWMiActOnMiThreadExistsForJidDeferred__DO_NOT_USE");function a(a,b,c,d){return h.load().then(function(e){e=e.onMiThreadExistsForJid__DO_NOT_USE;return e(a,b,c,d)})}g["default"]=a}),98);
__d("MAWCreateAndWaitForAuthoritativeOneToOneThread",["LSIntEnum","LSResult","MAWCreateOneToOneThread","MAWJids","MAWMiActOnMiThreadExistsForJidDeferred__DO_NOT_USE","MWV2OnAuthoritativeThreadInsert","Promise","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e,g,j){c("promiseDone")(d("MAWCreateOneToOneThread").call(a,e,void 0,g).then(function(e){return a.runInTransaction(function(f){return c("MAWMiActOnMiThreadExistsForJidDeferred__DO_NOT_USE")(f,e.jid,g,function(f,g){g!=null&&(e.isCreated?d("MWV2OnAuthoritativeThreadInsert").onAuthoritativeThreadInsert(c("LSResult")(g),a,function(a){return j(a.threadKey,a.clientThreadKey,a.threadType)}):j(g,d("MAWJids").convertChatJidToIntJid(e.jid),(i||(i=d("LSIntEnum"))).ofNumber(15)));return(h||(h=b("Promise"))).resolve()})},"readwrite",void 0,void 0,f.id+":43")}))}g["default"]=a}),98);
__d("MWEBRestoreDialogWrapperQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="23945042468436790"}),null);
__d("MWEBRestoreDialogWrapperQuery$Parameters",["MWEBRestoreDialogWrapperQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWEBRestoreDialogWrapperQuery_facebookRelayOperation"),metadata:{},name:"MWEBRestoreDialogWrapperQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MAWEncryptedBackupsRestoreDialog.entrypoint",["JSResourceForInteraction","MWEBRestoreDialogWrapperQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{queryReference:{parameters:c("MWEBRestoreDialogWrapperQuery$Parameters"),variables:{}}}}},root:c("JSResourceForInteraction")("MWEBRestoreDialogWrapper.react").__setRef("MAWEncryptedBackupsRestoreDialog.entrypoint")};g["default"]=a}),98);
__d("MDSButtonGroup.react",["Box.react","CometFocusTableContext","MDSButton.react","MDSRow.react","MDSRowItem.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["ref","testid","type"],i=["ref","testid"],j,k=j||(j=d("react")),l=j.useContext,m={hiddenButton:{height:"xqtp20y",opacity:"xg01cxk",visibility:"xlshs6z",$$css:!0},resetFlexBasis:{flexBasis:"xdl72j9",$$css:!0}};function n(a){var b=d("react-compiler-runtime").c(3),e=l(c("CometFocusTableContext"));e=e.FocusCell;a=a.children;if(e!=null){var f;b[0]!==e||b[1]!==a?(f=k.jsx(e,{children:a}),b[0]=e,b[1]=a,b[2]=f):f=b[2];return f}return a}function a(a){var b=d("react-compiler-runtime").c(36),e=a.align,f=a.direction,g=a.expanding,j=a.paddingHorizontal,l=a.paddingTop,o=a.primary,p=a.secondary,q=a.secondaryIcon,r=a.size,s=a.testid,t=a.verticalAlign;a=a.wrap;var u=e===void 0?"justify":e;e=f===void 0?"forward":f;f=g===void 0?!1:g;g=a===void 0?"none":a;var v,w;if(b[0]!==u||b[1]!==e||b[2]!==o||b[3]!==p||b[4]!==q||b[5]!==r){v=[];a=[];w=null;if(o!=null){var x,y,z,A;b[10]!==o?(y=o.ref,z=o.testid,A=o.type,x=babelHelpers.objectWithoutPropertiesLoose(o,h),b[10]=o,b[11]=x,b[12]=y,b[13]=z,b[14]=A):(x=b[11],y=b[12],z=b[13],A=b[14]);var B;b[15]!==x||b[16]!==y||b[17]!==z||b[18]!==r||b[19]!==A?(B=k.jsx(n,{children:k.jsx(c("MDSButton.react"),babelHelpers["extends"]({},x,{ref:y,size:r,testid:void 0,type:A}))}),b[15]=x,b[16]=y,b[17]=z,b[18]=r,b[19]=A,b[20]=B):B=b[20];w=B;v.push({hidden:k.jsx(c("MDSButton.react"),babelHelpers["extends"]({},x,{disabled:!0,padding:"normal",role:"none",size:r,type:A})),visible:w})}if(p!=null){y=p.ref;z=p.testid;B=babelHelpers.objectWithoutPropertiesLoose(p,i);v.push({hidden:k.jsx(c("MDSButton.react"),babelHelpers["extends"]({},B,{disabled:!0,padding:"normal",size:r,type:"secondary"})),visible:k.jsx(n,{children:k.jsx(c("MDSButton.react"),babelHelpers["extends"]({},B,{ref:y,size:r,testid:void 0,type:"secondary"}))})})}else if(q!=null){b[21]!==q||b[22]!==r?(x=k.jsx(c("MDSRowItem.react"),{children:k.jsx(n,{children:k.jsx(c("MDSButton.react"),babelHelpers["extends"]({},q,{labelIsHidden:!0,size:r,type:"secondary"}))})},"secondary-icon"),b[21]=q,b[22]=r,b[23]=x):x=b[23];a.push(x)}A=v.map(function(a,b){return k.jsx(c("MDSRowItem.react"),{expanding:u==="justify",xstyle:m.resetFlexBasis,children:v.map(function(a,d){return k.jsx(k.Fragment,{children:b!==d?k.jsx(c("Box.react"),{"aria-hidden":!0,xstyle:m.hiddenButton,children:a.hidden}):a.visible},d)})},b)});b[24]!==u||b[25]!==w?(z=w!=null?k.jsx(c("MDSRowItem.react"),{expanding:u==="justify",xstyle:m.resetFlexBasis,children:w},"primary"):null,b[24]=u,b[25]=w,b[26]=z):z=b[26];B=z;y=[B].concat(a);e==="backward"&&(A=A.reverse(),y=y.reverse());b[0]=u;b[1]=e;b[2]=o;b[3]=p;b[4]=q;b[5]=r;b[6]=v;b[7]=y;b[8]=A;b[9]=w}else v=b[6],y=b[7],A=b[8],w=b[9];x=v.length===2;z=x||w==null?A:y;b[27]!==u||b[28]!==f||b[29]!==j||b[30]!==l||b[31]!==z||b[32]!==s||b[33]!==t||b[34]!==g?(B=k.jsx(c("MDSRow.react"),{align:u,expanding:f,paddingHorizontal:j,paddingTop:l,spacing:8,testid:void 0,verticalAlign:t,wrap:g,children:z}),b[27]=u,b[28]=f,b[29]=j,b[30]=l,b[31]=z,b[32]=s,b[33]=t,b[34]=g,b[35]=B):B=b[35];return B}g["default"]=a}),98);
__d("MDSDialogContainerLegacy.react",["BaseDialog.react","BaseDialogLabelIDProvider","MDSDialogSizes","XPlatReactEnvironment","emptyFunction","react","react-compiler-runtime","useIsCometOnMobile"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useMemo;var j={anchor:{paddingTop:"x1x97wu9",paddingBottom:"xbr3nou",paddingInlineStart:"x10zyrgg",paddingInlineEnd:"xxe13sb",paddingLeft:null,paddingRight:null,$$css:!0},anchorInMobileEnvironment:{paddingTop:"xexx8yu",paddingBottom:"x18d9i69",$$css:!0},anchorWeb:{paddingInlineStart:"x10zyrgg x1mmp8wh",paddingLeft:null,paddingRight:null,paddingInlineEnd:"xxe13sb x1r9mfr6",$$css:!0},card:{backgroundColor:"x1jx94hy",borderStartStartRadius:"x9n396y",borderStartEndRadius:"x1ojodb8",borderEndEndRadius:"xul23gt",borderEndStartRadius:"x1zosaf",boxShadow:"xwhkkir",$$css:!0},cardWeb:{borderStartStartRadius:"x9n396y x15o3w11",borderStartEndRadius:"x1ojodb8 xogydr4",borderEndEndRadius:"xul23gt x1vmz7ll",borderEndStartRadius:"x1zosaf x1yyrj1m",boxShadow:"xwhkkir",$$css:!0},rootInMobileEnvironment:{justifyContent:"x1nhvcw1",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(24),e=a.ref,f=a.anchorXStyle,g=a["aria-label"],h=a.children,k=a.disableClosingWithMask,l=a.onClose,m=a.size,n=a.testid,o=a.title,p=a.xstyle;a=a.labelledBy;k=k===void 0?!1:k;l=l===void 0?c("emptyFunction"):l;m=m===void 0?"small":m;var q=c("useIsCometOnMobile")();m=m==="content-mobile-safe"&&!q?"content":m;var r;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(r=d("XPlatReactEnvironment").isWeb(),b[0]=r):r=b[0];r=r;var s=d("BaseDialogLabelIDProvider").useDialogLabelID();a=a!=null?a:s;bb0:{if(o!=null){b[1]!==o?(s={"aria-label":o},b[1]=o,b[2]=s):s=b[2];o=s;break bb0}if(g!=null){b[3]!==g?(s={"aria-label":g},b[3]=g,b[4]=s):s=b[4];o=s;break bb0}if(a!=null){b[5]!==a?(g={"aria-labelledby":a},b[5]=a,b[6]=g):g=b[6];o=g;break bb0}b[7]===Symbol["for"]("react.memo_cache_sentinel")?(s={},b[7]=s):s=b[7];o=s}a=o;g=q&&j.anchorInMobileEnvironment;b[8]!==f||b[9]!==g?(s=[j.anchor,r&&j.anchorWeb,g,f],b[8]=f,b[9]=g,b[10]=s):s=b[10];o=q&&j.rootInMobileEnvironment;f=d("MDSDialogSizes").sizeStyles[m];b[11]!==f||b[12]!==p?(g=[j.card,r&&j.cardWeb,f,p],b[11]=f,b[12]=p,b[13]=g):g=b[13];b[14]!==a||b[15]!==h||b[16]!==k||b[17]!==e||b[18]!==l||b[19]!==g||b[20]!==s||b[21]!==o||b[22]!==n?(q=i.jsx(c("BaseDialog.react"),babelHelpers["extends"]({anchorXStyle:s},a,{disableClosingWithMask:k,onClose:l,ref:e,rootXStyle:o,testid:void 0,withDeprecatedStyles:!0,xstyle:g,children:h})),b[14]=a,b[15]=h,b[16]=k,b[17]=e,b[18]=l,b[19]=g,b[20]=s,b[21]=o,b[22]=n,b[23]=q):q=b[23];return q}g["default"]=a}),98);
__d("MDSDialogFooter.react",["MDSButton.react","MDSButtonGroup.react","MDSSpinner.react","react","react-compiler-runtime","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h=["disabled","loading"],i=["disabled","loading"],j,k=j||d("react"),l={buttonContainer:{backgroundColor:"x1jx94hy",bottom:"x1ey2m1c",boxShadow:"x13xjmei",paddingTop:"xyamay9",paddingInlineEnd:"xv54qhq",paddingBottom:"x1l90r2v",paddingInlineStart:"xf7dkkf",position:"xv7j57z",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(29),e=a.callToActionGroupDirection,f=a.callToActionGroupWrap,g=a.primaryCallToAction;a=a.secondaryCallToAction;e=e===void 0?"forward":e;f=f===void 0?"none":f;var j=null;if(g!=null&&a!=null){var m,n,o;b[0]!==g?(m=g.disabled,n=g.loading,o=babelHelpers.objectWithoutPropertiesLoose(g,h),b[0]=g,b[1]=m,b[2]=n,b[3]=o):(m=b[1],n=b[2],o=b[3]);var p;b[4]!==n?(p=n===!0?k.jsx(c("MDSSpinner.react"),{color:"grey",size:24}):void 0,b[4]=n,b[5]=p):p=b[5];m=m===!0||n;b[6]!==o||b[7]!==p||b[8]!==m?(n=babelHelpers["extends"]({addOnStart:p,disabled:m,type:"primary"},o),b[6]=o,b[7]=p,b[8]=m,b[9]=n):n=b[9];b[10]!==e||b[11]!==f||b[12]!==a||b[13]!==n?(o=k.jsx(c("MDSButtonGroup.react"),{direction:e,expanding:!0,paddingHorizontal:0,paddingTop:0,primary:n,secondary:a,size:36,wrap:f}),b[10]=e,b[11]=f,b[12]=a,b[13]=n,b[14]=o):o=b[14];j=o}else if(g!=null){b[15]!==g?(p=g.disabled,m=g.loading,e=babelHelpers.objectWithoutPropertiesLoose(g,i),b[15]=g,b[16]=p,b[17]=m,b[18]=e):(p=b[16],m=b[17],e=b[18]);b[19]!==m?(f=m===!0?k.jsx(c("MDSSpinner.react"),{color:"grey",size:24}):void 0,b[19]=m,b[20]=f):f=b[20];n=p===!0||m;b[21]!==e||b[22]!==f||b[23]!==n?(o=k.jsx(c("MDSButton.react"),babelHelpers["extends"]({addOnStart:f,disabled:n,size:36,type:"primary"},e)),b[21]=e,b[22]=f,b[23]=n,b[24]=o):o=b[24];j=o}else if(a!=null){b[25]!==a?(g=k.jsx(c("MDSButton.react"),babelHelpers["extends"]({size:36,type:"secondary"},a)),b[25]=a,b[26]=g):g=b[26];j=g}b[27]!==j?(p=j!=null?k.jsx(d("react-strict-dom").html.div,{style:l.buttonContainer,children:j}):null,b[27]=j,b[28]=p):p=b[28];return p}g["default"]=a}),98);
__d("MDSDialogPageLegacy.react",["MDSDialogFooter.react","react","react-compiler-runtime","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h=["children","hasTextOnlyContent","ref"],i,j=i||d("react"),k={content:{paddingBottom:"xwib8y2",paddingInlineEnd:"xv54qhq",paddingInlineStart:"xf7dkkf",$$css:!0},textOnlyContent:{textAlign:"x2b8uid",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(16),e,f,g,i;b[0]!==a?(e=a.children,g=a.hasTextOnlyContent,i=a.ref,f=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=i):(e=b[1],f=b[2],g=b[3],i=b[4]);a=g===!0&&k.textOnlyContent;b[5]!==a?(g=[k.content,a],b[5]=a,b[6]=g):g=b[6];b[7]!==e||b[8]!==g?(a=j.jsx(d("react-strict-dom").html.div,{style:g,children:e}),b[7]=e,b[8]=g,b[9]=a):a=b[9];b[10]!==f?(e=j.jsx(c("MDSDialogFooter.react"),babelHelpers["extends"]({},f)),b[10]=f,b[11]=e):e=b[11];b[12]!==i||b[13]!==a||b[14]!==e?(g=j.jsxs(d("react-strict-dom").html.div,{ref:i,children:[a,e]}),b[12]=i,b[13]=a,b[14]=e,b[15]=g):g=b[15];return g}g["default"]=a}),98);
__d("MDSCardedDialog.react",["BaseDialogLabelIDProvider","BaseHeadingContextWrapper.react","MDSDialogContainerLegacy.react","MDSDialogHeader.react","MDSDialogPageLegacy.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["ref","callToActionGroupWrap","children","closeButtonType","onClose","header","title","titleHorizontalAlignment","withBackButton","onBack","backButtonType","withCloseButton","primaryCallToAction","secondaryCallToAction","callToActionGroupDirection","closeButtonTestId","hasTextOnlyContent"],i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(46),e,f,g,i,l,m,n,o,p,q,r,s,t,u,v,w,x,y;b[0]!==a?(l=a.ref,r=a.callToActionGroupWrap,f=a.children,g=a.closeButtonType,s=a.onClose,n=a.header,y=a.title,t=a.titleHorizontalAlignment,u=a.withBackButton,o=a.onBack,e=a.backButtonType,v=a.withCloseButton,p=a.primaryCallToAction,q=a.secondaryCallToAction,w=a.callToActionGroupDirection,x=a.closeButtonTestId,m=a.hasTextOnlyContent,i=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=i,b[5]=l,b[6]=m,b[7]=n,b[8]=o,b[9]=p,b[10]=q,b[11]=r,b[12]=s,b[13]=t,b[14]=u,b[15]=v,b[16]=w,b[17]=x,b[18]=y):(e=b[1],f=b[2],g=b[3],i=b[4],l=b[5],m=b[6],n=b[7],o=b[8],p=b[9],q=b[10],r=b[11],s=b[12],t=b[13],u=b[14],v=b[15],w=b[16],x=b[17],y=b[18]);a=r===void 0?"none":r;r=s===void 0?k:s;s=t===void 0?"center":t;t=u===void 0?!1:u;u=v===void 0?!1:v;v=w===void 0?"forward":w;w=x===void 0?"close_button":x;x=n!=null?n:null;n=n==null?y:null;var z;b[19]!==e||b[20]!==w||b[21]!==g||b[22]!==o||b[23]!==r||b[24]!==n||b[25]!==s||b[26]!==t||b[27]!==u?(z=j.jsx(c("MDSDialogHeader.react"),{backButtonType:e,closeButtonTestId:w,closeButtonType:g,onBack:o,onClose:r,title:n,titleHorizontalAlignment:s,withBackButton:t,withCloseButton:u}),b[19]=e,b[20]=w,b[21]=g,b[22]=o,b[23]=r,b[24]=n,b[25]=s,b[26]=t,b[27]=u,b[28]=z):z=b[28];b[29]!==v||b[30]!==a||b[31]!==f||b[32]!==m||b[33]!==p||b[34]!==q?(e=j.jsx(c("BaseHeadingContextWrapper.react"),{children:j.jsx(c("MDSDialogPageLegacy.react"),{callToActionGroupDirection:v,callToActionGroupWrap:a,hasTextOnlyContent:m,primaryCallToAction:p,secondaryCallToAction:q,children:f})}),b[29]=v,b[30]=a,b[31]=f,b[32]=m,b[33]=p,b[34]=q,b[35]=e):e=b[35];b[36]!==z||b[37]!==e?(w=j.jsxs(c("BaseHeadingContextWrapper.react"),{children:[z,e]}),b[36]=z,b[37]=e,b[38]=w):w=b[38];b[39]!==i||b[40]!==l||b[41]!==r||b[42]!==w||b[43]!==x||b[44]!==y?(g=j.jsx(d("BaseDialogLabelIDProvider").BaseDialogLabelIDProvider,{children:j.jsxs(c("MDSDialogContainerLegacy.react"),babelHelpers["extends"]({onClose:r,ref:l,title:y},i,{children:[x,w]}))}),b[39]=i,b[40]=l,b[41]=r,b[42]=w,b[43]=x,b[44]=y,b[45]=g):g=b[45];return g}function k(){}g["default"]=a}),98);
__d("MWGetInboxNavigateQPLEventTrace",["I64","InteractionTracing","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e=c("qpl")._(29818882,"2410"),f=c("InteractionTracing").getPendingInteractions();for(f of f){var g;if(((g=f.getTrace())==null?void 0:g.qplEvent)===e){((g=f.getTrace())==null||(g=g.annotations.string)==null?void 0:g.thread_id)===(h||(h=d("I64"))).to_string(a)&&b(f)}}}g["default"]=a}),98);
__d("MWBlockedComposerLogging",["$InternalEnum","Int64Hooks","MWGetChatTabOpenQPLEventTrace","MWGetInboxNavigateQPLEventTrace","MWLSThreadDisplayContext","MessengerWebUXLogger","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=b("$InternalEnum")({USER_BLOCKED_CANNOT_MESSAGE:"user_blocked_cannot_message",USER_BLOCKED_CANNOT_REPLY:"user_blocked_cannot_reply",USER_RESTRICTED:"user_restricted",GAMING_GAME_BOT:"gaming_game_bot",GAMING_GET_STARTED_CTA:"gaming_get_started_cta",FEATURE_LIMITED_TO_READONLY:"feature_limited_to_readonly",PAGE_THREAD_DISABLED:"page_thread_disabled",USER_BLOCKED:"user_blocked",USER_UNREACHABLE:"user_unreachable",ARMADILLO_THREAD_ALREADY_CUTOVER:"thread_already_cutover",ARMADILLO_GROUP_THREAD_CUTOVER:"cutover_group_thread",ARMADILLO_DEFAULT_E2EE_ONE_TO_ONE_BLOCK:"default_e2ee_one_to_one_block",ARMADILLO_RECEIVER_NON_ADDRESSABLE_ON_WA:"receiver_non_addressable_on_wa",ARMADILLO_DUAL_THREAD_CUTOVER:"dual_thread_cutover",NOT_BLOCKED:"not_blocked",ON_DEMAND_CUTOVER:"on_demand_cutover",USER_UNREACHABLE_MESSAGE_REQUEST:"user_unreachable_message_request"});function i(a,b){var c,d=a.getTrace();d=[].concat((d=d==null||(c=d.annotations.string_array)==null?void 0:c.blockedReasons)!=null?d:[],[b]);a.addAnnotationStringArray("blockedReasons",d);a.addMarkerPoint("composer_blocked_start","AppTiming")}function a(a,b){var e=d("react-compiler-runtime").c(8),f=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),g=c("MessengerWebUXLogger").useInteractionLogger(),l;e[0]!==g||e[1]!==b||e[2]!==a?(l=function(){if(a==null||b===h.NOT_BLOCKED)return;c("MWGetChatTabOpenQPLEventTrace")(a,function(a){i(a,b)});c("MWGetInboxNavigateQPLEventTrace")(a,function(a){i(a,b)});g==null||g({eventName:"composer_block",extraData:{blockedReason:b},threadKey:a});return function(){c("MWGetChatTabOpenQPLEventTrace")(a,k),c("MWGetInboxNavigateQPLEventTrace")(a,j)}},e[0]=g,e[1]=b,e[2]=a,e[3]=l):l=e[3];var m;e[4]!==f||e[5]!==b||e[6]!==a?(m=[f,b,a],e[4]=f,e[5]=b,e[6]=a,e[7]=m):m=e[7];d("Int64Hooks").useEffectInt64(l,m)}function j(a){a.addMarkerPoint("composer_blocked_end","AppTiming")}function k(a){a.addMarkerPoint("composer_blocked_end","AppTiming")}g.ComposerBlockingReason=h;g.useLogMWBlockedComposerReason=a}),98);
__d("MWDialogContentTypeValues",["gkx"],(function(a,b,c,d,e,f,g){"use strict";a=c("gkx")("23219")?4:3;b=c("gkx")("23219")?"headlineEmphasized4":"headlineEmphasized2";d=c("gkx")("23219")?"body4":"body3";e=c("gkx")("23219")?"bodyLink4":"bodyLink3";f=c("gkx")("23219")?"meta4":"meta3";g.textPairingLevel=a;g.textHeadlineType=b;g.textBodyType=d;g.textBodyLinkType=e;g.textMetaType=f}),98);
__d("MWXButton.react",["cr:1329","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["ref"],i,j=i||d("react");function a(a){var c=d("react-compiler-runtime").c(6),e,f;c[0]!==a?(f=a.ref,e=babelHelpers.objectWithoutPropertiesLoose(a,h),c[0]=a,c[1]=e,c[2]=f):(e=c[1],f=c[2]);c[3]!==e||c[4]!==f?(a=j.jsx(b("cr:1329"),babelHelpers["extends"]({ref:f},e)),c[3]=e,c[4]=f,c[5]=a):a=c[5];return a}g["default"]=a}),98);
__d("MWXTheme.react",["cr:7379","cr:7380","react"],(function(a,b,c,d,e,f,g){"use strict";var h=["displayMode"],i,j=i||d("react");function a(a){var c=a.displayMode;a=babelHelpers.objectWithoutPropertiesLoose(a,h);if(b("cr:7380")!=null)return j.jsx(b("cr:7380"),babelHelpers["extends"]({displayMode:c},a));return b("cr:7379")!=null?j.jsx(b("cr:7379"),babelHelpers["extends"]({theme:c},a)):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWXButtonSpinner",["fbt","FDSProgressRing.react","MWXSpinner.react","MWXTheme.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||c("react");function k(a){var b=d("react-compiler-runtime").c(2);a=a.children;var e;b[0]!==a?(e=c("MWXTheme.react")!=null?j.jsx(c("MWXTheme.react"),{displayMode:"dark",children:a}):null,b[0]=a,b[1]=e):e=b[1];return e}function a(a,b,e){var f=d("react-compiler-runtime").c(8);e=e===36;e=c("FDSProgressRing.react")!=null&&e?20:16;if(b===!0){f[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=h._(/*BTDS*/"Loading..."),f[0]=b):b=f[0];f[1]!==e?(b=j.jsx(c("FDSProgressRing.react"),{"aria-label":b,color:"disabled",duration:2,size:e,type:"estimated"}),f[1]=e,f[2]=b):b=f[2];return b}b=a!=="secondary"?k:j.Fragment;f[3]!==e?(a=j.jsx(c("MWXSpinner.react"),{color:"dark",size:e}),f[3]=e,f[4]=a):a=f[4];f[5]!==b||f[6]!==a?(e=j.jsx(b,{children:a}),f[5]=b,f[6]=a,f[7]=e):e=f[7];return e}g["default"]=a}),226);
__d("MWXButtonGroup.react",["cr:227","cr:6106","react","react-compiler-runtime","useMWXButtonSpinner"],(function(a,b,c,d,e,f,g){"use strict";var h=["icon","loading","type"],i=["icon","loading"],j,k=j||d("react");function a(a){var e=d("react-compiler-runtime").c(36),f=a.align,g=a.direction,j=a.expanding,l=a.paddingHorizontal,m=a.primary,n=a.secondary,o=a.secondaryReduceEmphasis;g=g===void 0?"backward":g;j=j===void 0?!1:j;l=l===void 0?0:l;o=o===void 0?!0:o;a=c("useMWXButtonSpinner")("primary",a.primary.disabled);if(b("cr:6106")!=null){var p,q,r,s;e[0]!==m?(r=m.icon,p=m.loading,s=m.type,q=babelHelpers.objectWithoutPropertiesLoose(m,h),e[0]=m,e[1]=p,e[2]=q,e[3]=r,e[4]=s):(p=e[1],q=e[2],r=e[3],s=e[4]);s=s==="destructive"?"fdsOverride_negative":s;var t=l===10?8:l,u=f!=null?f:"end";p=p===!0?a:void 0;r=(r=r)==null?void 0:r.component;var v;e[5]!==q||e[6]!==p||e[7]!==r||e[8]!==s?(v=babelHelpers["extends"]({},q,{addOnPrimary:p,icon:r,type:s}),e[5]=q,e[6]=p,e[7]=r,e[8]=s,e[9]=v):v=e[9];if(e[10]!==n||e[11]!==o){p=n!=null?babelHelpers["extends"]({},n,{icon:(q=n.icon)==null?void 0:q.component,reduceEmphasis:o,type:"secondary"}):null;e[10]=n;e[11]=o;e[12]=p}else p=e[12];e[13]!==g||e[14]!==j||e[15]!==t||e[16]!==u||e[17]!==v||e[18]!==p?(r=k.jsx(b("cr:6106"),{align:u,direction:g,expanding:j,paddingHorizontal:t,primary:v,secondary:p}),e[13]=g,e[14]=j,e[15]=t,e[16]=u,e[17]=v,e[18]=p,e[19]=r):r=e[19];return r}if(b("cr:227")!=null){e[20]!==m?(s=m.icon,q=m.loading,o=babelHelpers.objectWithoutPropertiesLoose(m,i),e[20]=m,e[21]=q,e[22]=o,e[23]=s):(q=e[21],o=e[22],s=e[23]);j=q===!0?a:void 0;u=(t=s)==null?void 0:t.originalComponent;e[24]!==o||e[25]!==j||e[26]!==u?(v=babelHelpers["extends"]({},o,{addOnStart:j,icon:u}),e[24]=o,e[25]=j,e[26]=u,e[27]=v):v=e[27];if(e[28]!==n){r=n!=null?babelHelpers["extends"]({},n,{icon:(p=n.icon)==null?void 0:p.originalComponent}):null;e[28]=n;e[29]=r}else r=e[29];e[30]!==f||e[31]!==g||e[32]!==l||e[33]!==v||e[34]!==r?(m=k.jsx(b("cr:227"),{align:f,direction:g,paddingHorizontal:l,primary:v,secondary:r}),e[30]=f,e[31]=g,e[32]=l,e[33]=v,e[34]=r,e[35]=m):m=e[35];return m}return null}g["default"]=a}),98);
__d("MWXButtonImpl.react",["cr:10054","cr:2625","react","react-compiler-runtime","useMWXButtonSpinner"],(function(a,b,c,d,e,f,g){"use strict";var h=["ref","icon","isContainerTarget","loading","size","type"],i,j=i||d("react");function a(a){var e=d("react-compiler-runtime").c(23),f,g,i,k,l,m,n;e[0]!==a?(l=a.ref,g=a.icon,i=a.isContainerTarget,k=a.loading,m=a.size,n=a.type,f=babelHelpers.objectWithoutPropertiesLoose(a,h),e[0]=a,e[1]=f,e[2]=g,e[3]=i,e[4]=k,e[5]=l,e[6]=m,e[7]=n):(f=e[1],g=e[2],i=e[3],k=e[4],l=e[5],m=e[6],n=e[7]);a=c("useMWXButtonSpinner")(n,f.disabled,m);if(b("cr:10054")){var o,p=m===36,q=k===!0?a:void 0;o=(o=g)==null?void 0:o.component;p=p?"large":"medium";var r=n==="destructive"?"fdsOverride_negative":n,s;e[8]!==f||e[9]!==l||e[10]!==q||e[11]!==o||e[12]!==p||e[13]!==r?(s=j.jsx(b("cr:10054"),babelHelpers["extends"]({addOnPrimary:q,icon:o,ref:l,size:p,type:r},f)),e[8]=f,e[9]=l,e[10]=q,e[11]=o,e[12]=p,e[13]=r,e[14]=s):s=e[14];return s}if(b("cr:2625")){q=k===!0?a:void 0;p=(o=g)==null?void 0:o.originalComponent;e[15]!==f||e[16]!==i||e[17]!==l||e[18]!==m||e[19]!==q||e[20]!==p||e[21]!==n?(r=j.jsx(b("cr:2625"),babelHelpers["extends"]({addOnStart:q,icon:p,isContainerTarget:i,ref:l,size:m,type:n},f)),e[15]=f,e[16]=i,e[17]=l,e[18]=m,e[19]=q,e[20]=p,e[21]=n,e[22]=r):r=e[22];return r}return null}g["default"]=a}),98);
__d("MWXComposerBanner.react",["CometAccessibilityAnnouncement.react","MWXButton.react","MWXColumn.react","MWXColumnItem.react","MWXGlimmer.react","MWXRow.react","MWXRowItem.react","MWXTextPairing.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={banner:{paddingBottom:"xjkvuk6",$$css:!0},block:{paddingBottom:"x1l90r2v",$$css:!0},button:{maxWidth:"x1va8c73",$$css:!0},buttonFullWidth:{width:"xh8yej3",$$css:!0},composerRow:{marginBottom:"xmgb6t1",$$css:!0},container:{alignSelf:"xkh2ocl",backgroundColor:"x57kliw",borderTopColor:"x1epquy7",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",$$css:!0},glimmerButton:{borderStartStartRadius:"x1rl75mt",borderStartEndRadius:"x19t5iym",borderEndEndRadius:"xz7t8uv",borderEndStartRadius:"x13xmedi",height:"xxk0z11",marginTop:"x1xmf6yo",marginInlineEnd:"xnnr8r",marginBottom:"xjpr12u",marginInlineStart:"xe9ewy2",width:"xvy4d1p",$$css:!0},glimmerButtonEmoji:{marginTop:"x1xmf6yo",marginInlineEnd:"x11lt19s",marginBottom:"xjpr12u",marginInlineStart:"xwklpps",$$css:!0},glimmerComposer:{borderStartStartRadius:"x12ol6y4",borderStartEndRadius:"x180vkcf",borderEndEndRadius:"x1khw62d",borderEndStartRadius:"x709u02",height:"xc9qbxq",marginTop:"xr9ek0c",marginInlineEnd:"x11lt19s",marginBottom:"xmgb6t1",marginInlineStart:"x1lziwak",width:"xh8yej3",$$css:!0},loading:{borderTopWidth:"x972fbf",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(21),e=a.assertive,f=a.bodyText,g=a.buttons,h=a.fullWidthButton,k=a.headerText,l=a.loading,m=a.ref,n=a.testid;a=a.variant;e=e===void 0?!1:e;var o=h===void 0?!1:h;h=l===void 0?!1:l;l=a===void 0?"block":a;a=Array.isArray(g)?g.length>0:g!=null;var p=l==="banner"&&j.banner;l=l==="block"&&j.block;var q=h&&j.loading,r;b[0]!==p||b[1]!==l||b[2]!==q?(r=[j.container,p,l,q],b[0]=p,b[1]=l,b[2]=q,b[3]=r):r=b[3];b[4]!==h?(p=h===!0?i.jsx(c("MWXColumnItem.react"),{paddingVertical:0,children:i.jsxs(c("MWXRow.react"),{paddingHorizontal:0,paddingVertical:0,children:[i.jsx(c("MWXRowItem.react"),{children:i.jsx(c("MWXGlimmer.react"),{index:0,xstyle:j.glimmerButton})}),i.jsx(c("MWXRowItem.react"),{children:i.jsx(c("MWXGlimmer.react"),{index:0,xstyle:j.glimmerButton})}),i.jsx(c("MWXRowItem.react"),{children:i.jsx(c("MWXGlimmer.react"),{index:0,xstyle:j.glimmerButton})}),i.jsx(c("MWXRowItem.react"),{children:i.jsx(c("MWXGlimmer.react"),{index:0,xstyle:j.glimmerButton})}),i.jsx(c("MWXRowItem.react"),{expanding:!0,xstyle:j.composerRow,children:i.jsx(c("MWXGlimmer.react"),{index:0,xstyle:j.glimmerComposer})}),i.jsx(c("MWXRowItem.react"),{children:i.jsx(c("MWXGlimmer.react"),{index:0,xstyle:[j.glimmerButton,j.glimmerButtonEmoji]})})]})}):null,b[4]=h,b[5]=p):p=b[5];b[6]!==e||b[7]!==f||b[8]!==k?(l=k!=null||f!=null?i.jsx(c("MWXColumnItem.react"),{children:i.jsx(c("CometAccessibilityAnnouncement.react"),{assertive:e,isVisible:!0,children:i.jsx(c("MWXRow.react"),{paddingHorizontal:0,paddingVertical:0,verticalAlign:"center",children:i.jsx(c("MWXRowItem.react"),{expanding:!0,children:i.jsx(c("MWXTextPairing.react"),{headline:k,isSemanticHeading:!0,level:4,meta:f,textAlign:"center"})})})})}):null,b[6]=e,b[7]=f,b[8]=k,b[9]=l):l=b[9];b[10]!==g||b[11]!==o||b[12]!==a?(q=a?i.jsx(c("MWXRow.react"),{align:"center",spacing:8,children:Array.isArray(g)?g.map(function(a,b){return i.jsx(c("MWXRowItem.react"),{expanding:!0,xstyle:o===!0?j.buttonFullWidth:j.button,children:i.jsx(c("MWXButton.react"),babelHelpers["extends"]({type:"secondary"},a))},b)}):i.jsx(c("MWXRowItem.react"),{expanding:!0,xstyle:o===!0?j.buttonFullWidth:j.button,children:g},"button")}):null,b[10]=g,b[11]=o,b[12]=a,b[13]=q):q=b[13];b[14]!==m||b[15]!==l||b[16]!==q||b[17]!==r||b[18]!==p||b[19]!==n?(h=i.jsxs(c("MWXColumn.react"),{paddingHorizontal:16,paddingVertical:16,ref:m,spacing:20,testid:void 0,xstyle:r,children:[p,l,q]}),b[14]=m,b[15]=l,b[16]=q,b[17]=r,b[18]=p,b[19]=n,b[20]=h):h=b[20];return h}g["default"]=a}),98);
__d("MWXIconDocument",["MWXSvgIcon","SVGIcon","cr:22296","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22296")),c("gkx")("23219"));g["default"]=a}),98);
__d("MessengerDocumentFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{d:"M17 7a1 1 0 0 1 1 1v4a4 4 0 0 0 4 4h4a1 1 0 0 1 1 1v10a2 2 0 0 1-2 2H11a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h6z"}),i.jsx(d("XPlatReactSVG").Path,{d:"M26.01 14H22a2 2 0 0 1-2-2V7.99a.99.99 0 0 1 1.69-.7l5.02 5.02a.99.99 0 0 1-.7 1.69z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("usePageEntryPointPrerenderer",["FBLogger","react","react-compiler-runtime","useCometEntryPointPrerendererWithQueryTimeoutPrivate"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.useState;function a(a,b,e){var f=d("react-compiler-runtime").c(6),g=i(),h=g[0],j=g[1];g=c("useCometEntryPointPrerendererWithQueryTimeoutPrivate")(a,b,e);var k=g[0];a=g[1];f[0]!==k?(b=function(a){var b=k();j(b);if(b==null){c("FBLogger")("comet_ui").blameToPreviousFrame().mustfix("Unable to present comet page EntryPoint component, preloadParams not set");return}b!=null&&a(b)},f[0]=k,f[1]=b):b=f[1];e=b;f[2]!==e||f[3]!==a||f[4]!==h?(g=[e,a,h],f[2]=e,f[3]=a,f[4]=h,f[5]=g):g=f[5];return g}g["default"]=a}),98);
__d("useWAInfraDeviceList",["WMIWABridgeApi","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).use,j=null;function k(){j==null&&(j=c("WMIWABridgeApi").getCurrentUserDeviceList());return j}function a(){var a=d("react-compiler-runtime").c(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=k(),a[0]=b):b=a[0];return i(b)}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("BaseHovercardStateContext.react",["fbt","emptyFunction","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i;a=i||d("react");b=a.createContext({active:!1,"aria-label":h._(/*BTDS*/"Press Alt-F1 or the up arrow key to access the link preview"),label:h._(/*BTDS*/"Press the up arrow key to access the link preview"),labelId:null,onClose:c("emptyFunction")});g["default"]=b}),226);
__d("BaseHovercardTriggerWrapper.react",["react","react-compiler-runtime","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=["display"],i,j,k=j||d("react"),l={displayInlineBlock:{display:"x1rg5ohu",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(11),e,f;b[0]!==a?(e=a.display,f=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f):(e=b[1],f=b[2]);if(e==="inline"){b[3]===Symbol["for"]("react.memo_cache_sentinel")?(a="xt0psk2",b[3]=a):a=b[3];b[4]!==f?(a=k.jsx("span",babelHelpers["extends"]({},f,{className:a})),b[4]=f,b[5]=a):a=b[5];return a}a=e==="inline-block"&&l.displayInlineBlock;b[6]!==a?(e=(i||(i=c("stylex")))(a),b[6]=a,b[7]=e):e=b[7];b[8]!==f||b[9]!==e?(a=k.jsx("div",babelHelpers["extends"]({},f,{className:e})),b[8]=f,b[9]=e,b[10]=a):a=b[10];return a}g["default"]=a}),98);
__d("BaseNestedHovercardContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext(!1);c=b;g["default"]=c}),98);
__d("useBaseHovercardTriggerAccessible",["fbt","BaseContextualLayer.react","BaseHovercardStateContext.react","BaseHovercardTriggerWrapper.react","CometErrorBoundary.react","CometHeroInteractionContextPassthrough.react","CometPlaceholder.react","FocusWithinHandler.react","HiddenSubtreeContextProvider.react","clearTimeout","react","setTimeout","useCometDisplayTimingTrackerForInteraction","useCometPrerenderer","useDelayedState","useFadeEffect","useMergeRefs"],(function(a,b,c,d,e,f,g,h){"use strict";var i=["children","display","fallback","onLoadEntryPoint","onVisibilityChange","showDelay"],j,k=j||(j=d("react"));b=j;var l=b.useCallback,m=b.useEffect,n=b.useId,o=b.useMemo,p=b.useRef,q=b.useState,r=300,s=100,t={disablePointerEvents:{pointerEvents:"x47corl",$$css:!0}};function a(a){var b=a.children,d=a.display,e=a.fallback,f=a.onLoadEntryPoint,g=a.onVisibilityChange,j=a.showDelay,v=babelHelpers.objectWithoutPropertiesLoose(a,i);a=c("useDelayedState")(!1);var w=a[0],x=a[1];a=q(!1);var y=a[0],z=a[1];a=q(!1);var A=a[0],B=a[1];a=q(!1);var C=a[0],D=a[1];a=q(!1);var E=a[0],F=a[1];a=q(!1);var G=a[0],H=a[1],I=C&&E&&!A,J=function(a){F(a),!a&&!G&&B(!1)},K=p(null),L=p(null),M=p(null),N=c("useCometDisplayTimingTrackerForInteraction")("HoverCard"),O=function(){if(!U)return;H(!0)};m(function(){if(G){var a=W.current;if(!a)return;a=a.querySelector(u);a==null||a.focus()}},[G]);var P=function(){if(G){H(!1);var a=L.current;a==null||a.focus()}},Q=p(O),R=p(P),S=l(function(){x(!1),z(!1),B(!0),R.current()},[x]),T=p(S);m(function(){Q.current=O,R.current=P,T.current=S},void 0);var aa=l(function(a){a.key==="Escape"&&(a.stopPropagation(),S())},[S]),ba=l(function(a){(a.key==="Escape"||a.key===" "||a.keyCode===9)&&(a.stopPropagation(),S()),(["ArrowDown","ArrowUp"].includes(a.key)||a.altKey&&a.key==="F1")&&(Q.current(),a.preventDefault(),a.stopPropagation())},[S]),U=w||y||I||G,V=p(U),W=p();m(function(){V.current!==U&&(g&&g(U),U||H(!1)),V.current=U},[U,g]);a=c("useFadeEffect")(U);var X=a[0],ca=a[1];C=a[2];E=c("useCometPrerenderer")("tooltip",U);a=E[0].shouldPrerender;var Y=a===void 0?!1:a,da=E[1],ea=E[2],Z=l(function(){f&&f()},[f]),fa=function(a){w?c("clearTimeout")(K.current):(x(!0,j!=null?j:r),Z()),!I&&!y&&da(a)},ga=function(){K.current=c("setTimeout")(function(){x(!1)},s),ea()},ha=function(){z(!1)},ia=function(){z(!1)},ja=function(){y||(z(!0),Z())},ka=function(){Z()},$=n(),la=o(function(){return{active:G,"aria-label":h._(/*BTDS*/"Press Alt-F1 or the up arrow key to access the link preview"),label:h._(/*BTDS*/"Press the up arrow key to access the link preview"),labelId:I?$:null,onClose:function(){R.current(),S()}}},[G,I,$,S]),ma=function(a){a.key==="Escape"&&S()},na=c("useMergeRefs")(C,W);m(function(){var a=L.current;if(a==null)return;I?a.setAttribute("aria-describedby",$):a.removeAttribute("aria-describedby")},[I,$]);a=function(a){a=a;e!=null&&(a=k.jsx(c("CometPlaceholder.react"),{fallback:e,children:a}));return k.jsxs(c("BaseHovercardTriggerWrapper.react"),{display:d,onKeyDown:aa,onMouseEnter:fa,onMouseLeave:ga,onTouchCancel:ha,onTouchEnd:ia,onTouchStart:ja,children:[k.jsx(c("FocusWithinHandler.react"),{onFocusChange:D,onFocusVisibleChange:J,onFocusWithin:ka,children:k.jsx("span",{className:"xjp7ctv",onKeyDown:ba,children:b(L)})}),(I||y||Y||X)&&!A&&k.jsx(c("CometHeroInteractionContextPassthrough.react"),{clear:!0,children:k.jsx(c("CometErrorBoundary.react"),{children:k.jsx(c("CometPlaceholder.react"),{fallback:null,name:"HovercardTriggerPopover",children:k.jsx(c("BaseContextualLayer.react"),babelHelpers["extends"]({align:"middle",contextRef:L,hidden:!U&&Y,imperativeRef:M,ref:N,xstyle:!U&&X?t.disablePointerEvents:void 0},v,{children:k.jsx(c("HiddenSubtreeContextProvider.react"),{isHidden:!U&&Y,children:k.jsx("div",babelHelpers["extends"]({},{0:{className:"xg01cxk x1n2onr6 x1ebt8du x19991ni x1dhq9h"},1:{className:"x1n2onr6 x19991ni x1hc1fzr xhb22t3 xls3em1"}}[!!ca<<0],{onKeyDown:ma,ref:na,children:k.jsx(c("BaseHovercardStateContext.react").Provider,{value:la,children:a})}))})}))})})})]})};return[a,S]}var u=['a[href]:not([href=""]):not([rel="ignore"])',"button:not(:disabled)","[tabindex]"].map(function(a){return a+':not([tabindex="-1"])'}).join(", ");g["default"]=a}),226);
__d("BaseHovercardTriggerAccessible.react",["BaseHovercardTriggerWrapper.react","BaseNestedHovercardContext.react","CometRelay","react","react-compiler-runtime","useBaseHovercardTriggerAccessible","useCometRelayEntrypointContextualEnvironmentProvider"],(function(a,b,c,d,e,f,g){"use strict";var h=["popoverEntryPoint","popoverOtherProps","popoverProps","preventNested"],i=["preventNested"],j,k=j||(j=d("react"));b=j;b.useCallback;var l=b.useContext,m=b.useRef,n={};function o(a){var b=d("react-compiler-runtime").c(19),e;if(b[0]!==a){var f=a.popoverEntryPoint,g=a.popoverOtherProps,i=a.popoverProps;a.preventNested;var j=babelHelpers.objectWithoutPropertiesLoose(a,h);f=f;g=g;e=i;i=j;b[0]=a;b[1]=i;b[2]=f;b[3]=e;b[4]=g}else i=b[1],f=b[2],e=b[3],g=b[4];j=g===void 0?n:g;a=c("useCometRelayEntrypointContextualEnvironmentProvider")();g=d("CometRelay").useEntryPointLoader(a,f);a=g[0];var l=g[1];b[5]!==l||b[6]!==e?(f=function(){l(e)},b[5]=l,b[6]=e,b[7]=f):f=b[7];g=f;b[8]!==i||b[9]!==g?(f=babelHelpers["extends"]({},i,{onLoadEntryPoint:g}),b[8]=i,b[9]=g,b[10]=f):f=b[10];i=c("useBaseHovercardTriggerAccessible")(f);g=i[0];b[11]!==a||b[12]!==j?(f=a!=null&&k.jsx(d("CometRelay").EntryPointContainer,{entryPointReference:a,props:j}),b[11]=a,b[12]=j,b[13]=f):f=b[13];b[14]!==f?(i=k.jsx(k.Fragment,{children:f}),b[14]=f,b[15]=i):i=b[15];b[16]!==i||b[17]!==g?(a=g(i),b[16]=i,b[17]=g,b[18]=a):a=b[18];return a}function a(a){var b=a.preventNested;b=b===void 0?!1:b;var d=babelHelpers.objectWithoutPropertiesLoose(a,i),e=l(c("BaseNestedHovercardContext.react")),f=m(null);return e?k.jsx(c("BaseHovercardTriggerWrapper.react"),{display:a.display,children:a.children(f)}):k.jsx(c("BaseNestedHovercardContext.react").Provider,{value:b,children:k.jsx(o,babelHelpers["extends"]({},d))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometTypeaheadViewList.react",["CometCompositeStructureContext","getItemRoleFromCompositeRole","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["ariaProps","children","entries","highlightedEntry"],i,j=i||(i=d("react"));i.useMemo;function a(a){var b=d("react-compiler-runtime").c(16),e,f,g,i,k;b[0]!==a?(e=a.ariaProps,f=a.children,g=a.entries,i=a.highlightedEntry,k=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=i,b[5]=k):(e=b[1],f=b[2],g=b[3],i=b[4],k=b[5]);var l=i!=null?i.key:null;a=e.role;b[6]!==a?(i=babelHelpers["extends"]({},a!=null?{role:a}:{}),b[6]=a,b[7]=i):i=b[7];i=i;i=i;var m;if(b[8]!==l||b[9]!==e||b[10]!==f||b[11]!==i||b[12]!==g||b[13]!==k||b[14]!==a){var n=c("getItemRoleFromCompositeRole")(a);m=g!=null&&g.length>0?j.jsxs(j.Fragment,{children:[k.label!=null&&j.jsx("div",{className:"x14vqqas xod5an3 x1diwwjn xbmvrgn",children:k.label}),j.jsx("ul",babelHelpers["extends"]({},e,{className:"x78zum5 xdt5ytf x1iyjqo2","data-testid":void 0,children:j.jsx(c("CometCompositeStructureContext").Provider,{value:i,children:g.map(function(a,b){var c=l===a.key;return f({entry:a,index:b,isActive:c,isLastItem:g.length-1===b,itemRole:n})})})}))]}):null;b[8]=l;b[9]=e;b[10]=f;b[11]=i;b[12]=g;b[13]=k;b[14]=a;b[15]=m}else m=b[15];return m}g["default"]=a}),98);
__d("CometTypeaheadViewListStrategy.react",["CometTypeaheadViewList.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["ariaProps","entries","extraViewProps","highlightedEntry","isLoading","onAbandonTypeahead_DO_NOT_USE","viewItemStrategyRenderer"],i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(17),e,f,g;if(b[0]!==a){var i=a.ariaProps,k=a.entries,l=a.extraViewProps,m=a.highlightedEntry;a.isLoading;a.onAbandonTypeahead_DO_NOT_USE;var n=a.viewItemStrategyRenderer,o=babelHelpers.objectWithoutPropertiesLoose(a,h);i=i;k=k;f=l;l=m;e=n;g=o;b[0]=a;b[1]=e;b[2]=i;b[3]=k;b[4]=f;b[5]=l;b[6]=g}else e=b[1],i=b[2],k=b[3],f=b[4],l=b[5],g=b[6];n=(m=f)==null?void 0:m.label;b[7]!==e||b[8]!==f||b[9]!==g?(o=function(a){var b=a.entry,c=a.isActive,d=a.isLastItem;a=a.itemRole;return j.createElement(e,babelHelpers["extends"]({},g,f,{entry:b,isActive:c,isLastItem:d,key:b.key,role:a}))},b[7]=e,b[8]=f,b[9]=g,b[10]=o):o=b[10];b[11]!==i||b[12]!==k||b[13]!==l||b[14]!==n||b[15]!==o?(a=j.jsx(c("CometTypeaheadViewList.react"),{ariaProps:i,entries:k,highlightedEntry:l,label:n,testid:void 0,children:o}),b[11]=i,b[12]=k,b[13]=l,b[14]=n,b[15]=o,b[16]=a):a=b[16];return a}g["default"]=a}),98);
__d("FDSCalendarFilled20Icon",["cr:13822"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:13822")}),98);
__d("FDSGroupFilled20Icon",["cr:15088"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:15088")}),98);
__d("FDSShieldFilled20Icon",["cr:14248"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:14248")}),98);
__d("FDSWatchTvFilled20Icon",["cr:15866"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:15866")}),98);
__d("LSDeleteThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.sequence([function(d){return b.db.table(9).fetch([[[a[0]]]]).next().then(function(a,d){var e=a.done;a=a.value;return e?(e=[b.i64.cast([0,0]),void 0],c[0]=e[0],c[1]=e[1],e):(d=a.item,e=[d.parentThreadKey,d.disappearingThreadKey],c[0]=e[0],c[1]=e[1])})},function(a){return b.count(b.db.table(9).fetch([[[c[0]]],"parentThreadKeyLastActivityTimestampMs"])).then(function(a){return c[3]=a})},function(d){return a[1]&&b.i64.neq(c[0],b.i64.cast([0,0]))&&b.i64.eq(c[3],b.i64.cast([0,1]))?b.sequence([function(d){return b.forEach(b.db.table(9).fetch([[[a[0]],[c[0]]]]),function(a){return a["delete"]()})},function(a){return b.i64.neq(c[1],void 0)?0:0}]):b.sequence([function(c){return b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(a){return a["delete"]()})},function(a){return b.i64.neq(c[1],void 0)?0:0}])}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxDeleteThreadStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSIssueCommunityAdminModerationActionsFetch",["LSIssueNewTaskAndGetTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("fb_group_id",a[0]),d[0].set("target_user_id",a[1]),d[0].set("source",a[2]),d[0].set("thread_id",a[3]),d[0].set("request_id",a[4]),c.i64.gt(c.i64.cast([0,0]),c.i64.cast([0,0]))?(d[5]=c.i64.of_float(Date.now()),d[1]=c.i64.add(d[5],c.i64.cast([0,0]))):d[1]=c.i64.cast([0,0]),d[2]=d[0].get("fb_group_id"),d[3]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),c.i64.to_string(d[2]),c.i64.cast([0,428]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,d[1],c.i64.cast([0,0])).then(function(a){return a=a,d[4]=a[0],a})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxIssueCommunityAdminModerationActionsFetchStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSIssueCommunityAdminModerationActionsFetchStoredProcedure",["LSIssueCommunityAdminModerationActionsFetch","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSIssueCommunityAdminModerationActionsFetch"),e.fbGroupId,e.targetUserId,e.source,e.threadId,e.requestId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSMoveThreadToArchivedFolder",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(9).fetch([[[a[0]]]]).next().then(function(c,d){d=c.done;c=c.value;return d?0:(c.item,b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(a){var c=a.update;a=a.item;return c({folderName:"",parentThreadKey:b.i64.cast([-1,4294967286]),capabilities2:b.i64.or_(a.capabilities2,b.i64.cast([0,2]))})}))})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxMoveThreadToArchivedFolderStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSOptimisticRemoveThread",["LSDeleteThread","LSIssueNewTaskAndGetTaskID","LSMoveThreadToArchivedFolder"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[4]=b.syncGroup,c.i64.neq(d[4],void 0)?d[3]=d[4]:d[3]=c.i64.cast([0,1]),d[0]=d[3])})},function(d){return[c.i64.cast([0,1]),c.i64.cast([0,2])].some(function(b){return c.i64.eq(a[1],b)})?c.storedProcedure(b("LSMoveThreadToArchivedFolder"),a[0]):c.storedProcedure(b("LSDeleteThread"),a[0],!1)},function(e){return c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),c.i64.to_string(a[0]),c.i64.cast([0,146]),"",void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),d[0],void 0,c.i64.cast([0,0]),c.i64.cast([0,0])).then(function(a){return a=a,d[2]=a[0],a})},function(b){return c.db.table(32).add({taskId:d[2],threadKey:a[0],removeType:a[1],syncGroup:d[0]})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticRemoveThreadStoredProcedure";a.__tables__=["threads","threads_optimistic_context"];e.exports=a}),null);
__d("LsThreadType",[],(function(a,b,c,d,e,f){a=Object.freeze({COMMUNITY_FOLDER:17,COMMUNITY_GROUP:18,COMMUNITY_GROUP_UNJOINED:19,COMMUNITY_CHANNEL_CATEGORY:20,COMMUNITY_PRIVATE_HIDDEN_JOINED_THREAD:21,COMMUNITY_PRIVATE_HIDDEN_UNJOINED_THREAD:22,COMMUNITY_BROADCAST_JOINED_THREAD:23,COMMUNITY_BROADCAST_UNJOINED_THREAD:24,COMMUNITY_GROUP_INVITED_UNJOINED:25,COMMUNITY_SUB_THREAD:26,COMMUNITY_ANNOUNCEMENT_JOINED_THREAD:27,COMMUNITY_ANNOUNCEMENT_UNJOINED_THREAD:28,DISCOVERABLE_PUBLIC_CHAT:150,DISCOVERABLE_PUBLIC_CHAT_UNJOINED:151,DISCOVERABLE_PUBLIC_BROADCAST_CHAT:152,DISCOVERABLE_PUBLIC_BROADCAST_CHAT_UNJOINED:153,DISCOVERABLE_PUBLIC_CHAT_V2:154,DISCOVERABLE_PUBLIC_CHAT_V2_UNJOINED:155,ONE_TO_ONE:1,GROUP:2,ROOM:3,MONTAGE:4,MARKETPLACE:5,FOLDER:6,TINCAN_ONE_TO_ONE:7,TINCAN_GROUP_DISAPPEARING:8,CARRIER_MESSAGING_ONE_TO_ONE:10,CARRIER_MESSAGING_GROUP:11,TINCAN_ONE_TO_ONE_DISAPPEARING:13,PAGE_FOLLOW_UP:14,SECURE_MESSAGE_OVER_WA_ONE_TO_ONE:15,SECURE_MESSAGE_OVER_WA_GROUP:16,PINNED:101,LWG:102,XAC_GROUP:200,AI_BOT:201,GROUP_WITH_AI_BOT:202,BIZ_AI_AGENT:203,PHONE_NUMBER:204,UNKNOWN:0,SELF_THREAD:12,ARMADILLO_ONE_TO_ONE:-1,ARMADILLO_GROUP:-2});f["default"]=a}),66);
__d("MWCommunityMessagingNUXQuickPromotionQuery$Parameters",["MWCommunityMessagingNUXQuickPromotionQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWCommunityMessagingNUXQuickPromotionQuery_facebookRelayOperation"),metadata:{},name:"MWCommunityMessagingNUXQuickPromotionQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWCommunityMessagingNUXQuickPromotionContainer.entrypoint",["JSResourceForInteraction","MWCommunityMessagingNUXQuickPromotionQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){return{extraProps:{folderId:a.folderId,isFolderRoute:a.isFolderRoute},queries:{queryRef:{parameters:c("MWCommunityMessagingNUXQuickPromotionQuery$Parameters"),variables:{isFolderRoute:a.isFolderRoute}}}}},root:c("JSResourceForInteraction")("MWCommunityMessagingNUXQuickPromotion.react").__setRef("MWCommunityMessagingNUXQuickPromotionContainer.entrypoint")};g["default"]=a}),98);
__d("MWCommunityMessagingNUXDialog.react",["I64","MWCommunityMessagingNUXQuickPromotionContainer.entrypoint","react","react-compiler-runtime","react-relay/relay-hooks/LazyLoadEntryPointContainer_DEPRECATED.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function a(a){var e=d("react-compiler-runtime").c(10),f=a.folderId;a=a.isFolderRoute;var g;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(g=b("MWCommunityMessagingNUXQuickPromotionContainer.entrypoint"),e[0]=g):g=e[0];var h;e[1]!==f?(h=(i||(i=d("I64"))).to_string(f),e[1]=f,e[2]=h):h=e[2];a=a||!1;var k;e[3]!==f||e[4]!==h||e[5]!==a?(k={folderId:f,folderIDString:h,isFolderRoute:a},e[3]=f,e[4]=h,e[5]=a,e[6]=k):k=e[6];e[7]===Symbol["for"]("react.memo_cache_sentinel")?(f={},e[7]=f):f=e[7];e[8]!==k?(h=j.jsx(c("react-relay/relay-hooks/LazyLoadEntryPointContainer_DEPRECATED.react"),{entryPoint:g,entryPointParams:k,props:f}),e[8]=k,e[9]=h):h=e[9];return h}g["default"]=a}),98);
__d("XCometCommunityThreadsControllerRouteBuilder",["jsExtraRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsExtraRouteBuilder")("/messages/c/{folder_id}/t/{thread_key}/",Object.freeze({}),["/messages/c/{folder_id}/"],void 0);b=a;g["default"]=b}),98);
__d("XMessengerDotComCometCommunityThreadsControllerRouteBuilder",["jsExtraRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsExtraRouteBuilder")("/c/{folder_id}/t/{thread_key}/",Object.freeze({}),["/c/{folder_id}/"],void 0);b=a;g["default"]=b}),98);
__d("MWInboxCommunityThreadsRouteBuilder",["CurrentEnvironment","XCometCommunityThreadsControllerRouteBuilder","XMessengerDotComCometCommunityThreadsControllerRouteBuilder"],(function(a,b,c,d,e,f,g){"use strict";a=c("CurrentEnvironment").facebookdotcom?{buildUriForMessage:function(a){var b=a.folder_id;a=a.thread_key;return c("XCometCommunityThreadsControllerRouteBuilder").buildUri({folder_id:b,thread_key:a})},buildURL:function(a){var b=a.folder_id;a=a.thread_key;return c("XCometCommunityThreadsControllerRouteBuilder").buildURL({folder_id:b,thread_key:a})},buildURLWithoutThread:function(a){a=a.folder_id;return c("XCometCommunityThreadsControllerRouteBuilder").buildExtraURL("/messages/c/{folder_id}/",{folder_id:a})}}:{buildUriForMessage:function(a){var b=a.folder_id;a=a.thread_key;return c("XMessengerDotComCometCommunityThreadsControllerRouteBuilder").buildUri({folder_id:b,thread_key:a})},buildURL:function(a){var b=a.folder_id;a=a.thread_key;return c("XMessengerDotComCometCommunityThreadsControllerRouteBuilder").buildURL({folder_id:b,thread_key:a})},buildURLWithoutThread:function(a){a=a.folder_id;return c("XMessengerDotComCometCommunityThreadsControllerRouteBuilder").buildExtraURL("/c/{folder_id}/",{folder_id:a})}};b=a.buildURL;d=a.buildURLWithoutThread;g.buildURL=b;g.buildURLWithoutThread=d}),98);
__d("MWLSGroupMembershipDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9265370860258042"}),null);
__d("MWXMessageBlockQuote.react",["react","react-compiler-runtime","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={forwarded:{height:"x5yr21d",marginTop:"x1gslohp",marginInlineEnd:"x14z9mp",marginBottom:"x12nagc",marginInlineStart:"x1lziwak",paddingInlineStart:"x1g0dm76",position:"x1n2onr6",whiteSpace:"x126k92a",wordWrap:"x1vvkbs",$$css:!0},fullLine:{bottom:"x19ip775",top:"xnfr1j",$$css:!0},line:{borderStartStartRadius:"xqbdsaf",borderStartEndRadius:"xpf24wh",borderEndEndRadius:"x14a4ghu",borderEndStartRadius:"x1a4jp9x",bottom:"xbfrwjf",insetInlineStart:"x1o0tod",left:null,right:null,position:"x10l6tqk",top:"xndqk7f",width:"xfo62xy",$$css:!0},lineIncomingColor:{backgroundColor:"xtyxhl7",$$css:!0},lineOutgoingColor:{backgroundColor:"xppy7ju",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(9),c=a.children,e=a.fullLine,f=a.outgoing;a=a.xstyle;e=e===void 0?!1:e;f=f===void 0?!0:f;var g;b[0]!==a?(g=[j.forwarded,a],b[0]=a,b[1]=g):g=b[1];a=e?j.fullLine:void 0;e=f?j.lineOutgoingColor:j.lineIncomingColor;b[2]!==a||b[3]!==e?(f=i.jsx(d("react-strict-dom").html.div,{style:[j.line,a,e]}),b[2]=a,b[3]=e,b[4]=f):f=b[4];b[5]!==c||b[6]!==g||b[7]!==f?(a=i.jsxs(d("react-strict-dom").html.blockquote,{style:g,children:[f,c]}),b[5]=c,b[6]=g,b[7]=f,b[8]=a):a=b[8];return a}g["default"]=a}),98);
__d("MessageRequestsLog",["I64","coerceMessagingThreadTypeToLSThreadType","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i=c("requireDeferred"))("MessageRequestsBulkActionConfirmedFalcoEvent").__setRef("MessageRequestsLog"),k=i("MessageRequestsBulkActionEditFalcoEvent").__setRef("MessageRequestsLog"),l=i("MessageRequestsBulkActionTappedFalcoEvent").__setRef("MessageRequestsLog"),m=i("MessageRequestsInfoBannerShownFalcoEvent").__setRef("MessageRequestsLog"),n=i("MessageRequestsThreadActionConfirmedFalcoEvent").__setRef("MessageRequestsLog"),o=i("MessageRequestsThreadActionTappedFalcoEvent").__setRef("MessageRequestsLog"),p=i("MessageRequestsThreadDenialOptionsTappedFalcoEvent").__setRef("MessageRequestsLog"),q=i("MessageRequestsViewThreadlistFalcoEvent").__setRef("MessageRequestsLog");function r(a){switch(a.folderName){case"pending":return-1;case"other":return-2;case"spam":return-3;case"inbox":return 0}}function a(a,b,e){m.onReady(function(f){f.log(function(){return{action:0,extra_data_map:void 0,group_thread_id:e,other_user_id:b,request_id:void 0,thread_folder:r(a),thread_id:e!=null?e:(h||(h=d("I64"))).to_string(a.threadKey),thread_type:c("coerceMessagingThreadTypeToLSThreadType")(a.threadType)}})})}function b(a,b){p.onReady(function(e){e.log(function(){return{action:0,extra_data_map:void 0,group_thread_id:void 0,other_user_id:b,request_id:void 0,thread_folder:r(a),thread_id:(h||(h=d("I64"))).to_string(a.threadKey),thread_type:c("coerceMessagingThreadTypeToLSThreadType")(a.threadType)}})})}function e(a,b,e,f){o.onReady(function(g){g.log(function(){return{action:b,extra_data_map:void 0,group_thread_id:f,other_user_id:e,request_id:void 0,thread_folder:r(a),thread_id:f!=null?f:(h||(h=d("I64"))).to_string(a.threadKey),thread_type:c("coerceMessagingThreadTypeToLSThreadType")(a.threadType)}})})}function f(a,b,e,f){n.onReady(function(g){g.log(function(){return{action:b,extra_data_map:void 0,group_thread_id:f,other_user_id:e,request_id:void 0,thread_folder:r(a),thread_id:f!=null?f:(h||(h=d("I64"))).to_string(a.threadKey),thread_type:c("coerceMessagingThreadTypeToLSThreadType")(a.threadType)}})})}function s(a,b){q.onReady(function(c){c.log(function(){return{action:0,actioned_thread_count:"0",actioned_thread_ids:void 0,actioned_unread_thread_count:"0",entry_point:a,folder:b,request_id:void 0}})})}function t(a,b,c,d,e){l.onReady(function(f){f.log(function(){return{action:d,actioned_thread_count:b.toString(),actioned_thread_ids:void 0,actioned_unread_thread_count:c.toString(),entry_point:a,folder:e,request_id:void 0}})})}function u(a,b,c,d,e){j.onReady(function(f){f.log(function(){return{action:d,actioned_thread_count:b.toString(),actioned_thread_ids:void 0,actioned_unread_thread_count:c.toString(),entry_point:a,folder:e,request_id:void 0}})})}function v(a,b,c){k.onReady(function(d){d.log(function(){return{action:b,actioned_thread_count:"0",actioned_thread_ids:void 0,actioned_unread_thread_count:"0",entry_point:a,folder:c,request_id:void 0}})})}g.logMessageRequestInfoShown=a;g.logDenialOptionsTapped=b;g.logActionTapped=e;g.logActionConfirmed=f;g.logMessageRequestsView=s;g.logMessageRequestsBulkActionTapped=t;g.logMessageRequestsBulkActionConfirmed=u;g.logMessageRequestsBulkActionEdit=v}),98);
__d("MessagingSpecialThreadRole",[],(function(a,b,c,d,e,f){a=Object.freeze({ADMIN:1,THREAD_CREATOR:2,SUPER_ADMIN:3,MODERATOR:4,IG_BROADCAST_CHAT_COLLABORATOR:5,CHAT_HOST:6,ADMIN_VIA_PAGE:7,MARKETPLACE_BUYER:8,MARKETPLACE_SELLER:9});f["default"]=a}),66);
__d("MessagingSpecialThreadRoleBitOffset",["I64","LSBitFlag"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return b==null?!1:d("LSBitFlag").has((h||(h=d("I64"))).lsl_(h.one,a),b.threadRoles)}g.has=a}),98);
__d("WorkCometIsEmployeeGKProvider.relayprovider",["gkx"],(function(a,b,c,d,e,f,g){"use strict";a={get:function(){return c("gkx")("20861")}};g["default"]=a}),98);
__d("XCometVanityURLControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/{vanity}/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("XInstagramHelpDotComContentControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/{cms_id}/{?cms_title}/",Object.freeze({region_hint:[],expand_folders:[],force_new_ighc:!1}),void 0);b=a;g["default"]=b}),98);
__d("castToEnum",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){var d=Object.keys(b);for(var e=0;e<d.length;e++)if(b[d[e]]===a)return b[d[e]];return c}f["default"]=a}),66);
__d("cometTypeaheadODSLogFetchCacheEvent",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("ODS").__setRef("cometTypeaheadODSLogFetchCacheEvent");function a(a,b,c){b===void 0&&(b=!0);c===void 0&&(c=1);if(!b)return;h.onReady(function(b){b.bumpEntityKey(354,a,"fetched-cache",c)})}g["default"]=a}),98);
__d("goURIOnWindow",["ConstUriUtils","FBLogger","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var e=typeof b==="string"?d("ConstUriUtils").getUri(b):d("ConstUriUtils").isConstUri(b);if(e){if(a==null)return!1;a.location=e.toString();return!0}else{a="Invalid URI "+b.toString()+" provided to goURIOnWindow";c("FBLogger")("comet_infra").blameToPreviousFrame().mustfix(a);return!1}}g["default"]=a}),98);
__d("useBaseTypeaheadDataSourceFetchResolverCache",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(a){var b=d("react-compiler-runtime").c(2),c=a.dataSource;b[0]!==c?(a=function(a){var b=a.onResolvePayload;a=a.requestParams;var d=a.perfTraceAPI;a=c.fetchCache(a);d&&d.addMarkerPoint("cachedResponse","AppTiming");b(a);return a},b[0]=c,b[1]=a):a=b[1];return a}g["default"]=a}),98);
__d("useBaseTypeaheadDataSourceFetchResolverNetwork",["promiseDone","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.useEffect,j=b.useRef,k=b.useState;function a(a){var b=d("react-compiler-runtime").c(9),e=a.dataSource;a=k(!1);var f=a[0],g=a[1],h=j(0),l=j(!1),m;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(){l.current=!1;return function(){l.current=!0}},m=[],b[0]=a,b[1]=m):(a=b[0],m=b[1]);i(a,m);b[2]!==e?(a=function(a){var b=a.onResolvePayload;a=a.requestParams;h.current=h.current+1;var d=h.current,f=a.perfTraceAPI;g(!0);c("promiseDone")(e.fetchNetwork(a).then(function(a){!l.current&&d===h.current&&(b(a),f&&f.addMarkerPoint("networkResponse","AppTiming"))})["finally"](function(){!l.current&&d===h.current&&(h.current=0,g(!1))}))},b[2]=e,b[3]=a):a=b[3];m=a;b[4]!==f?(a={isLoading:f},b[4]=f,b[5]=a):a=b[5];b[6]!==m||b[7]!==a?(f=[a,m],b[6]=m,b[7]=a,b[8]=f):f=b[8];return f}g["default"]=a}),98);
__d("useBaseTypeaheadDataSourceFetchResolver",["baseTypeaheadFlattenEntries","cometTypeaheadODSLogFetchCacheEvent","cometTypeaheadODSLogFetchNetworkEvent","emptyObject","react","recoverableViolation","useBaseTypeaheadDataSourceFetchResolverCache","useBaseTypeaheadDataSourceFetchResolverNetwork","useDebouncedComet"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef,k=8;function a(a,b){var d=a.dataSource,e=a.dataSourceFetchConfigParams,f=a.onResolvePayload;a=e!=null?e:c("emptyObject");e=a.renderLimit;var g=e===void 0?k:e;e=a.bypassCacheRenderLimitCheck;var h=e===void 0?!1:e;e=a.shouldDebounceNetwork;var l=e===void 0?!0:e;e=a.networkDebounceWaitDuration;a=a.requestFlow;var m=j(a),n=c("useBaseTypeaheadDataSourceFetchResolverCache")({dataSource:d});a=c("useBaseTypeaheadDataSourceFetchResolverNetwork")({dataSource:d});var o=a[0].isLoading,p=a[1],q=c("useDebouncedComet")(p,{wait:e});function r(){var a=!1;function e(b,d){var e=d.isTraceComplete;d=d.source;try{a||f(b,{isTraceComplete:e,source:d})}catch(b){a||c("recoverableViolation")("Failed to resolve fetched payload","search")}}function i(a){var b=a.requestParams;a=a.source;var f=b.requestFlow;f!=null&&(m.current=f);if(typeof d.fetchCache==="function"&&["all","cache"].includes(a)){f=n({onResolvePayload:function(a){var b=a.entries;b=c("baseTypeaheadFlattenEntries")(b).length;e(a,{isTraceComplete:!h&&b>=g,source:"cache"});c("cometTypeaheadODSLogFetchCacheEvent")&&c("cometTypeaheadODSLogFetchCacheEvent")("comet.ta.fetch",!0,1)},requestParams:b});f=f;f=f.entries;f=c("baseTypeaheadFlattenEntries")(f).length;if(!h&&f>=g)return}if(typeof d.fetchNetwork==="function"&&["all","network"].includes(a)){f={onResolvePayload:function(a){e(a,{isTraceComplete:!0,source:a.entries.length>0?"network":"network-no-results"}),c("cometTypeaheadODSLogFetchNetworkEvent")&&c("cometTypeaheadODSLogFetchNetworkEvent")("comet.ta.fetch",!0,1)},requestParams:babelHelpers["extends"]({},b,{requestFlow:m.current})};Boolean(l)?q(f):p(f)}}b!=null&&i(b);return function(){a=!0}}i(r,[b]);return[{isLoading:o}]}g["default"]=a}),98);
__d("useBaseTypeaheadDataSourceFetch",["react","react-compiler-runtime","recoverableViolation","useBaseTypeaheadDataSourceFetchResolver"],(function(a,b,c,d,e,f,g){"use strict";var h=["loggingEventTrace"],i;b=i||d("react");b.useCallback;var j=b.useState;function a(a){var b,e=d("react-compiler-runtime").c(9),f=j(null),g=f[0],i=f[1];f=c("useBaseTypeaheadDataSourceFetchResolver")(a,g);a=f[0];f=a.isLoading;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(a,b){b=b===void 0?"all":b;i({requestParams:a,source:b})},e[0]=a):a=e[0];var k=a;e[1]!==g?(a=function(a){a=a||{};var b=a.requestFlow;a=a.source;if(g==null){c("recoverableViolation")("Refetch cannot be called with undefined `fetchParams`","search");return}var d=g.requestParams,e=d.loggingEventTrace;d=babelHelpers.objectWithoutPropertiesLoose(d,h);e=babelHelpers["extends"]({loggingEventTrace:babelHelpers["extends"]({},e,{sequenceID:String(Date.now())}),requestFlow:b},d);k(e,a)},e[1]=g,e[2]=a):a=e[2];a=a;b=(b=g==null?void 0:g.source)!=null?b:"all";var l;e[3]!==f||e[4]!==b?(l={isLoading:f,source:b},e[3]=f,e[4]=b,e[5]=l):l=e[5];e[6]!==a||e[7]!==l?(f=[l,k,a],e[6]=a,e[7]=l,e[8]=f):f=e[8];return f}g["default"]=a}),98);
__d("useCometTypeaheadViewListStrategy",["CometTypeaheadProgressGlimmer.react","CometTypeaheadViewListStrategy.react","react","react-compiler-runtime","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=["entries","isLoading","queryString"],i,j,k=j||(j=d("react"));j.useCallback;function a(a){var b=d("react-compiler-runtime").c(8),e=a.emptyStateContent,f=a.extraViewProps,g=a.loadingState,j=a.nullstateContent,l=a.viewItemStrategyRenderer,m=a.viewListStrategyRenderer,n=a.viewXStyle,o=m===void 0?c("CometTypeaheadViewListStrategy.react"):m;b[0]!==o||b[1]!==e||b[2]!==f||b[3]!==g||b[4]!==j||b[5]!==l||b[6]!==n?(a=function(a){var b=a.entries,d=a.isLoading,m=a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,h);if(m.length===0&&j!=null)return j;return!d&&b.length===0&&e!=null?e:k.jsxs("div",babelHelpers["extends"]({},(i||(i=c("stylex"))).props([n]),{children:[k.jsx(o,babelHelpers["extends"]({},a,{entries:b,extraViewProps:f,isLoading:!1,queryString:m,viewItemStrategyRenderer:l})),d&&(g!=null?g:k.jsx(c("CometTypeaheadProgressGlimmer.react"),{}))]}))},b[0]=o,b[1]=e,b[2]=f,b[3]=g,b[4]=j,b[5]=l,b[6]=n,b[7]=a):a=b[7];return a}g["default"]=a}),98);
__d("useJSON",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useMemo;function a(a,b){var c=d("react-compiler-runtime").c(3),e;c[0]!==b||c[1]!==a?(e=JSON.parse(a,b),c[0]=b,c[1]=a,c[2]=e):e=c[2];b=e;return b}g["default"]=a}),98);
__d("useMAWMarkThreadAsRead",["I64","Int64Hooks","LSAuthorityLevel","LSContactUtils","LSIntEnum","MAWContactRelationshipType","MAWJobDefinitions","MAWMiActOnActThreadReady","MAWTimedJob","MessagingFolderTag","Promise","WAJobOrchestratorTypes","promiseDone","react-compiler-runtime","useMWGetOtherUserContact","useMWIsReadReceiptsDisabledForThread","useMWLSMarkThreadAsRead","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function a(a,e){var f=d("react-compiler-runtime").c(10),g=(k||(k=c("useReStore")))(),l=c("useMWLSMarkThreadAsRead")(e,a.threadKey),m=c("useMWIsReadReceiptsDisabledForThread")(a.threadKey);f[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=["capabilities","capabilities2","contactViewerRelationship","blockedByViewerStatus"],f[0]=e):e=f[0];var n=c("useMWGetOtherUserContact")(a.threadKey,a.threadType,e),o;f[1]!==n||f[2]!==g||f[3]!==m||f[4]!==l||f[5]!==a.authorityLevel||f[6]!==a.folderName||f[7]!==a.threadKey?(e=function(){if((i||(i=d("I64"))).ge(a.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))){l();c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(g.tables,a.threadKey,"useMAWMarkThreadAsRead",function(e,f){return a.folderName===c("MessagingFolderTag").SPAM||a.folderName===c("MessagingFolderTag").PENDING?(h||(h=b("Promise"))).resolve():d("MAWTimedJob").TimedUIJobStarters.fireAndForget(d("MAWJobDefinitions").jobSerializers.markThreadAsRead(f,n&&d("MAWContactRelationshipType").getContactRelationshipType(n),n?d("LSContactUtils").isContactBlocked(n):!1,n?d("LSContactUtils").isContactRestricted(n):!1,m,{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.HIGH}))}));return}},o=[a.folderName,a.authorityLevel,a.threadKey,l,g,n,m],f[1]=n,f[2]=g,f[3]=m,f[4]=l,f[5]=a.authorityLevel,f[6]=a.folderName,f[7]=a.threadKey,f[8]=e,f[9]=o):(e=f[8],o=f[9]);return d("Int64Hooks").useCallbackInt64(e,o)}g["default"]=a}),98);
__d("useMWCMIsSenderAdModOrChatHost",["Int64Hooks","LSFactory","LSIntEnum","LSIssueCommunityAdminModerationActionsFetchStoredProcedure","MWCMGetValidId","MessagingSpecialThreadRole","MessagingSpecialThreadRoleBitOffset","ReQL","ReQLSuspense","pageID","promiseDone","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,e){var g=d("react-compiler-runtime").c(17),j=(i||(i=c("useReStore")))(),k,l;g[0]!==a||g[1]!==j||g[2]!==e||g[3]!==b?(k=function(){var g=async function(){d("MWCMGetValidId").MWCMHasValidFbGroupId(a)&&await j.runInTransaction(function(f){return c("LSIssueCommunityAdminModerationActionsFetchStoredProcedure")(c("LSFactory")(f),{fbGroupId:a,requestId:c("pageID"),source:(h||(h=d("LSIntEnum"))).ofNumber(14),targetUserId:e,threadId:b})},"readwrite",void 0,void 0,f.id+":47")};c("promiseDone")(g())},l=[j,a,e,b],g[0]=a,g[1]=j,g[2]=e,g[3]=b,g[4]=k,g[5]=l):(k=g[4],l=g[5]);d("Int64Hooks").useEffectInt64(k,l);g[6]!==a||g[7]!==j||g[8]!==e?(k=function(){return a!=null?d("ReQL").fromTableAscending(j.tables.community_members.index("communityContact")).getKeyRange(a,e,c("pageID")):d("ReQL").empty()},l=[j,a,e],g[6]=a,g[7]=j,g[8]=e,g[9]=k,g[10]=l):(k=g[9],l=g[10]);k=d("ReQLSuspense").useFirst(k,l,f.id+":66");l=(k==null?void 0:k.isAdmin)==null?!1:k.isAdmin;var m=(k==null?void 0:k.isModerator)==null?!1:k.isModerator,n;g[11]!==k?(n=k!=null?d("MessagingSpecialThreadRoleBitOffset").has(c("MessagingSpecialThreadRole").CHAT_HOST,k):!1,g[11]=k,g[12]=n):n=g[12];k=n;g[13]!==l||g[14]!==k||g[15]!==m?(n={isAdmin:l,isChatHost:k,isModerator:m},g[13]=l,g[14]=k,g[15]=m,g[16]=n):n=g[16];return n}g.default=a}),98);
__d("useMWLSGetOngoingCallState",["MWLSThread","MWThreadKey.react"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("MWThreadKey.react").useMWThreadKeyMemoizedExn();return d("MWLSThread").useThread(a,h)}function h(a){return a.ongoingCallState}g["default"]=a}),98);
__d("useShouldShowMessagingEntrypointInCometRoot",["ShouldShowMessagingEntrypoint","useCometRouterState","useShouldRenderFullTopNav"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=c("useShouldRenderFullTopNav")(),d=c("useCometRouterState")(),e=d==null?void 0:d.main;d=d==null?void 0:d.pushViewStack;d=d&&d.length>0?d[d.length-1]:e;return c("ShouldShowMessagingEntrypoint")(d==null?void 0:d.route,a,b)}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("BaseInfiniteScrollListItem.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useRef;function a(a){var b=d("react-compiler-runtime").c(6),c=a["aria-posinset"],e=a["aria-setsize"];a=a.children;e=e===void 0?-1:e;var f=k(null),g,h;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g=function(){var a=f.current;if(a!=null){var b=function(b){bb9:switch(b.key){case"PageDown":b.preventDefault();l(a);break bb9;case"PageUp":b.preventDefault(),m(a)}};a.addEventListener("keydown",b);return function(){return a.removeEventListener("keydown",b)}}},h=[],b[0]=g,b[1]=h):(g=b[0],h=b[1]);j(g,h);b[2]!==c||b[3]!==e||b[4]!==a?(g=i.jsx("article",{"aria-posinset":c,"aria-setsize":e,ref:f,tabIndex:-1,children:a}),b[2]=c,b[3]=e,b[4]=a,b[5]=g):g=b[5];return g}function l(a){a=a.nextElementSibling;a!=null&&a instanceof HTMLElement&&a.hasAttribute("tabindex")&&a.focus()}function m(a){a=a.previousElementSibling;a!=null&&a instanceof HTMLElement&&a.hasAttribute("tabindex")&&a.focus()}g["default"]=a}),98);
__d("BaseInfiniteScrollList.react",["BaseInfiniteScrollListItem.react","BaseScrollableAreaContext","CometDialogContext","CometInfiniteScrollTrigger.react","CometScrollableArea.react","FBLogger","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["forceBrowserDefault","isLoading","items","loadingIndicator","nextFocusableElementRef","onScroll","onScrollBottom","onScrollTop","prevFocusableElementRef","renderItem","role","testid","xstyle"],i,j=i||(i=d("react"));b=i;var k=b.useContext,l=b.useEffect,m=b.useRef;function a(a){var b=d("react-compiler-runtime").c(44),e,f,g,i,n,q,r,s,t,u,v,w,x,y;b[0]!==a?(e=a.forceBrowserDefault,f=a.isLoading,g=a.items,i=a.loadingIndicator,n=a.nextFocusableElementRef,q=a.onScroll,r=a.onScrollBottom,s=a.onScrollTop,t=a.prevFocusableElementRef,u=a.renderItem,v=a.role,w=a.testid,y=a.xstyle,x=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=i,b[5]=n,b[6]=q,b[7]=r,b[8]=s,b[9]=t,b[10]=u,b[11]=v,b[12]=w,b[13]=x,b[14]=y):(e=b[1],f=b[2],g=b[3],i=b[4],n=b[5],q=b[6],r=b[7],s=b[8],t=b[9],u=b[10],v=b[11],w=b[12],x=b[13],y=b[14]);a=k(c("CometDialogContext"));var z=k(c("BaseScrollableAreaContext"));a==null&&z.length>0&&c("FBLogger")("comet_ui").blameToPreviousFrame().warn("For XPlat React compatibility, BaseInfiniteScrollList should not be nested inside scrollable containers such as BaseScrollableArea with the same orientation. It may cause unexpected behaviors and break infinite scroll in React Native platforms.");var A=m(null);b[15]!==n||b[16]!==t?(a=function(){var a=A.current;if(a!=null){var b=function(b){bb11:switch(b.key){case"Home":if(b.ctrlKey){var c;b.preventDefault();if((c=t)!=null&&c.current)t.current.focus();else{(c=o(a))==null||c.focus()}}break bb11;case"End":if(b.ctrlKey){b.preventDefault();if(((c=n)==null?void 0:c.current)!=null)n.current.focus();else{(b=p(a))==null||b.focus()}}}};a.addEventListener("keydown",b);return function(){return a.removeEventListener("keydown",b)}}},z=[n,t],b[15]=n,b[16]=t,b[17]=a,b[18]=z):(a=b[17],z=b[18]);l(a,z);if(b[19]!==g||b[20]!==u){b[22]!==u?(a=function(a,b){return j.jsx(c("BaseInfiniteScrollListItem.react"),{"aria-posinset":b+1,children:u(a,b)},b)},b[22]=u,b[23]=a):a=b[23];z=g.map(a);b[19]=g;b[20]=u;b[21]=z}else z=b[21];a=g.length+1;b[24]!==i||b[25]!==a?(g=j.jsx(c("BaseInfiniteScrollListItem.react"),{"aria-posinset":a,children:i}),b[24]=i,b[25]=a,b[26]=g):g=b[26];b[27]!==f||b[28]!==g||b[29]!==x?(i=j.jsx(c("CometInfiniteScrollTrigger.react"),babelHelpers["extends"]({},x,{isLoading:f,children:g})),b[27]=f,b[28]=g,b[29]=x,b[30]=i):i=b[30];b[31]!==f||b[32]!==z||b[33]!==i?(a=j.jsxs("section",{"aria-busy":f,ref:A,role:"feed",children:[z,i]}),b[31]=f,b[32]=z,b[33]=i,b[34]=a):a=b[34];b[35]!==e||b[36]!==q||b[37]!==r||b[38]!==s||b[39]!==v||b[40]!==a||b[41]!==w||b[42]!==y?(g=j.jsx(c("CometScrollableArea.react"),{forceBrowserDefault:e,horizontal:!1,onScroll:q,onScrollBottom:r,onScrollTop:s,role:v,testid:void 0,xstyle:y,children:a}),b[35]=e,b[36]=q,b[37]=r,b[38]=s,b[39]=v,b[40]=a,b[41]=w,b[42]=y,b[43]=g):g=b[43];return g}function n(){return Array.from(document.querySelectorAll('button, [href]:not(link), input, select, textarea, [tabindex]:not([tabindex="-1"])'))}function o(a){var b=n(),c=null;for(var d=0;d<b.length;d++){if(a.compareDocumentPosition(b[d])!==Node.DOCUMENT_POSITION_PRECEDING)break;c=b[d]}return c}function p(a){var b=n().reverse(),c=null;for(var d=0;d<b.length;d++){if(a.compareDocumentPosition(b[d])!==Node.DOCUMENT_POSITION_FOLLOWING)break;c=b[d]}return c}g["default"]=a}),98);
__d("LSCommunityWebSurfaceType",[],(function(a,b,c,d,e,f){a=Object.freeze({_TEST_:0,COMMUNITY_LIST:1,CHANNEL_LIST:2});f["default"]=a}),66);
__d("MAWCutoverQPLLogger",["QPLUserFlow","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h={instanceKey:0,isInProgress:!1};function a(a){h.isInProgress&&c("QPLUserFlow").endCancel(c("qpl")._(1056840990,"2431"),{instanceKey:h.instanceKey});c("QPLUserFlow").start(c("qpl")._(1056840990,"2431"),{annotations:{bool:{is_dtc:a}},instanceKey:++h.instanceKey,timeoutInMs:1e4});h.isInProgress=!0;return h.instanceKey}function b(a,b,d){if(a==null)return;c("QPLUserFlow").addPoint(c("qpl")._(1056840990,"2431"),b,babelHelpers["extends"]({instanceKey:a},d))}function d(a,b){if(a==null)return;c("QPLUserFlow").addAnnotations(c("qpl")._(1056840990,"2431"),b,{instanceKey:a})}function e(a){if(a==null)return;h.isInProgress=!1;c("QPLUserFlow").endSuccess(c("qpl")._(1056840990,"2431"),{instanceKey:a})}function f(a,b){if(a==null)return;c("QPLUserFlow").endFailure(c("qpl")._(1056840990,"2431"),b,{instanceKey:a})}g.startQpl=a;g.addPoint=b;g.addAnnotations=d;g.endSuccess=e;g.endFailure=f}),98);
__d("MDSInfiniteScrollList.react",["BaseInfiniteScrollList.react","MDSScrollableAreaStyles","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["xstyle"],i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(8),e,f;b[0]!==a?(f=a.xstyle,e=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f):(e=b[1],f=b[2]);b[3]!==f?(a=[c("MDSScrollableAreaStyles").unthemed,f],b[3]=f,b[4]=a):a=b[4];b[5]!==e||b[6]!==a?(f=j.jsx(c("BaseInfiniteScrollList.react"),babelHelpers["extends"]({forceBrowserDefault:!0,xstyle:a},e)),b[5]=e,b[6]=a,b[7]=f):f=b[7];return f}g["default"]=a}),98);
__d("MDSList.react",["BaseList.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["ref"],i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(6),e,f;b[0]!==a?(e=a.ref,f=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f):(e=b[1],f=b[2]);b[3]!==e||b[4]!==f?(a=j.jsx(c("BaseList.react"),babelHelpers["extends"]({ref:e},f)),b[3]=e,b[4]=f,b[5]=a):a=b[5];return a}b=a;g["default"]=b}),98);
__d("MessengerCrossIcon",["MessengerCross.svg.react","SVGIcon"],(function(a,b,c,d,e,f,g){"use strict";a=d("SVGIcon").svgIcon(c("MessengerCross.svg.react"));g["default"]=a}),98);
__d("MDSQuickPromotionCard.react",["fbt","MDSButton.react","MDSCircleButton.react","MDSColumn.react","MDSColumnItem.react","MDSRow.react","MDSRowItem.react","MDSText.react","MessengerCrossIcon","react","react-compiler-runtime","react-strict-dom"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={callToActionSection:{display:"x78zum5",flexDirection:"x1q0g3np",marginTop:"xhrpt6u",$$css:!0},callToActionSpacer:{flexShrink:"x2lah0s",width:"x1xc55vz",$$css:!0},card:{boxShadow:"xe4pinz",paddingTop:"xz9dl7a",paddingInlineEnd:"xpdmqnj",paddingBottom:"xsag5q8",paddingInlineStart:"x1g0dm76",$$css:!0},withRoundedCorners:{borderStartStartRadius:"x1i5p2am",borderStartEndRadius:"x1whfx0g",borderEndEndRadius:"xr2y4jy",borderEndStartRadius:"x1ihp6rs",$$css:!0}},l={primary:{backgroundColor:"x1jx94hy",$$css:!0},secondary:{backgroundColor:"xlhe6ec",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(31),e=a.body,f=a.headline,g=a.headlineNumberOfLines,i=a.icon,m=a.onClose,n=a.primaryCallToAction,o=a.secondaryCallToAction,p=a.type;a=a.withRoundedCorners;g=g===void 0?1:g;p=p===void 0?"primary":p;a=a===void 0?!0:a;var q=n!=null||o!=null;a=a&&k.withRoundedCorners;p=l[p];var r;b[0]!==a||b[1]!==p?(r=[k.card,a,p],b[0]=a,b[1]=p,b[2]=r):r=b[2];b[3]!==i?(a=i&&j.jsx(c("MDSRowItem.react"),{children:i}),b[3]=i,b[4]=a):a=b[4];b[5]!==f||b[6]!==g?(p=j.jsx(c("MDSColumnItem.react"),{children:j.jsx(c("MDSText.react"),{align:"start",isSemanticHeading:!0,numberOfLines:g,type:"headlineEmphasized4",children:f})}),b[5]=f,b[6]=g,b[7]=p):p=b[7];b[8]!==e?(i=j.jsx(c("MDSColumnItem.react"),{children:j.jsx(c("MDSText.react"),{align:"start",color:"secondary",numberOfLines:6,type:"body4",children:e})}),b[8]=e,b[9]=i):i=b[9];b[10]!==p||b[11]!==i?(f=j.jsx(c("MDSRowItem.react"),{expanding:!0,children:j.jsxs(c("MDSColumn.react"),{spacing:12,children:[p,i]})}),b[10]=p,b[11]=i,b[12]=f):f=b[12];b[13]!==m?(g=m!=null?j.jsx(c("MDSRowItem.react"),{children:j.jsx(c("MDSCircleButton.react"),{color:"primary",icon:c("MessengerCrossIcon"),label:h._(/*BTDS*/"Close"),onPress:m,size:24,testid:void 0})}):null,b[13]=m,b[14]=g):g=b[14];b[15]!==f||b[16]!==g||b[17]!==a?(e=j.jsx(c("MDSColumnItem.react"),{children:j.jsxs(c("MDSRow.react"),{paddingHorizontal:0,paddingVertical:0,spacing:12,children:[a,f,g]})}),b[15]=f,b[16]=g,b[17]=a,b[18]=e):e=b[18];if(b[19]!==q||b[20]!==n||b[21]!==o){i=q&&j.jsxs(d("react-strict-dom").html.div,{style:k.callToActionSection,children:[o!=null&&j.jsx(c("MDSButton.react"),{icon:o.icon,label:o.label,linkProps:o.linkProps,onPress:o.onPress,size:32,type:"secondary"}),n!=null&&j.jsxs(j.Fragment,{children:[o!=null&&j.jsx(d("react-strict-dom").html.div,{style:k.callToActionSpacer}),j.jsx(c("MDSButton.react"),{icon:n.icon,label:n.label,linkProps:n.linkProps,onPress:n.onPress,size:32,type:((p=n.type)!=null?p:n.reduceEmphasis===!0)?"secondary":"primary"})]})]});b[19]=q;b[20]=n;b[21]=o;b[22]=i}else i=b[22];b[23]!==i?(m=j.jsx(c("MDSColumnItem.react"),{children:i}),b[23]=i,b[24]=m):m=b[24];b[25]!==e||b[26]!==m?(f=j.jsxs(c("MDSColumn.react"),{children:[e,m]}),b[25]=e,b[26]=m,b[27]=f):f=b[27];b[28]!==f||b[29]!==r?(g=j.jsx(d("react-strict-dom").html.div,{style:r,children:f}),b[28]=f,b[29]=r,b[30]=g):g=b[30];return g}g["default"]=a}),226);
__d("MDSSegmentedControl.react",["CometFocusGroupContext","MDSPressable.react","MDSText.react","emptyFunction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext,k={pill:{alignItems:"x6s0dn4",borderStartStartRadius:"xal68kn",borderStartEndRadius:"x51dqfy",borderEndEndRadius:"x1w4cqa3",borderEndStartRadius:"x1byqp33",display:"x78zum5",flexBasis:"x1tuynyk",flexGrow:"x1iyjqo2",height:"xc9qbxq",justifyContent:"xl56j7k",minWidth:"x13qp9f6",paddingInlineStart:"x1g0dm76",paddingInlineEnd:"xpdmqnj",paddingLeft:null,paddingRight:null,$$css:!0},selected:{backgroundColor:"x1iutvsz",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(15),e=a.label,f=a.onPress,g=a.selected;a=a.testid;f=f===void 0?c("emptyFunction"):f;g=g===void 0?!1:g;var h=j(c("CometFocusGroupContext"));h=h.FocusItem;h=h!=null?h:i.Fragment;var l=g&&k.selected,m;b[0]!==l?(m=[k.pill,l],b[0]=l,b[1]=m):m=b[1];l=g?"primary":"secondary";var n;b[2]!==e||b[3]!==l?(n=i.jsx(c("MDSText.react"),{color:l,numberOfLines:1,type:"bodyLink3",children:e}),b[2]=e,b[3]=l,b[4]=n):n=b[4];b[5]!==e||b[6]!==f||b[7]!==g||b[8]!==m||b[9]!==n||b[10]!==a?(l=i.jsx(c("MDSPressable.react"),{"aria-label":e,"aria-selected":g,focusable:!0,onPress:f,role:"tab",testid:void 0,xstyle:m,children:n}),b[5]=e,b[6]=f,b[7]=g,b[8]=m,b[9]=n,b[10]=a,b[11]=l):l=b[11];b[12]!==h||b[13]!==l?(e=i.jsx(h,{children:l}),b[12]=h,b[13]=l,b[14]=e):e=b[14];return e}g["default"]=a}),98);
__d("MDSSegmentedControls.react",["CometFocusGroup.react","MDSSegmentedControl.react","XPlatReactEnvironment","focusScopeQueries","react","react-compiler-runtime","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={pillContainer:{borderTopColor:"x1d4wt55",borderInlineEndColor:"xks9344",borderBottomColor:"x1n79urc",borderInlineStartColor:"x103ojqp",borderStartStartRadius:"xal68kn",borderStartEndRadius:"x51dqfy",borderEndEndRadius:"x1w4cqa3",borderEndStartRadius:"x1byqp33",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",boxSizing:"x9f619",display:"x78zum5",$$css:!0},pillContainerWeb:{minWidth:"x13qp9f6",$$css:!0},root:{boxSizing:"x1afcbsf",width:"xh8yej3",$$css:!0},rootWeb:{marginTop:"x1rdy4ex",marginInlineEnd:"x1lxpwgx",marginBottom:"x4vbgl9",marginInlineStart:"x165d6jo",overflowX:"xw2csxc",overflowY:"x1odjw0f",paddingTop:"x1iorvi4",paddingInlineEnd:"x11lfxj5",paddingBottom:"xjkvuk6",paddingInlineStart:"x135b78x",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(4),e=a.tabs;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=d("XPlatReactEnvironment").isWeb(),b[0]=a):a=b[0];var f=a;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(a=[j.root,f&&j.rootWeb],b[1]=a):a=b[1];b[2]!==e?(a=i.jsx(d("react-strict-dom").html.div,{style:a,children:i.jsx(c("CometFocusGroup.react"),{hideArrowSignifiers:!0,orientation:"horizontal",role:"tablist",tabScopeQuery:d("focusScopeQueries").tabbableScopeQuery,children:function(a){return i.jsx(d("react-strict-dom").html.div,{role:"tablist",style:[j.pillContainer,f&&j.pillContainerWeb,a],children:e.map(k)})}})}),b[2]=e,b[3]=a):a=b[3];return a}function k(a,b){return i.createElement(c("MDSSegmentedControl.react"),babelHelpers["extends"]({},a,{key:b}))}k.displayName=k.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWBlockUtils",["FBLogger","LSClearTablesStoredProcedure","LSFactory","Promise","promiseDone","react","react-compiler-runtime","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useCallback;function a(){var a=d("react-compiler-runtime").c(2),e=c("useAsyncReStore")(),f;a[0]!==e?(f=function(){(h||(h=b("Promise"))).resolve(e).then(k)["catch"](j)},a[0]=e,a[1]=f):f=a[1];return f}function j(a){return c("FBLogger")("search").warn("Error occurred while clearing search tables",a)}function k(a){c("promiseDone")(a.runInTransaction(l,"readwrite",void 0,void 0,f.id+":26"))}function l(a){return c("LSClearTablesStoredProcedure")(c("LSFactory")(a))}g.useClearSearchTables=a}),98);
__d("MWEBWebOnboardingPostDecisionDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{}}},root:c("JSResourceForInteraction")("MWEBWebOnboardingPostDecisionDialog.react").__setRef("MWEBWebOnboardingPostDecisionDialog.entrypoint")};g["default"]=a}),98);
__d("MWGenAIMarkdownTextPrimitiveV1.react",["MWV2ChatTextParserUtils","MWXMessageBaseMessageListText.react","react","react-compiler-runtime","useMWTextRenderers"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||c("react");function a(a){var b=d("react-compiler-runtime").c(7),e=a.markdown;a=a.outgoing;a=a===void 0?!1:a;var f=c("useMWTextRenderers")(a,!1),g;b[0]!==e?(g=d("MWV2ChatTextParserUtils").findRanges(e,!0,!0,!0),b[0]=e,b[1]=g):g=b[1];g=g;var h;b[2]!==e||b[3]!==a||b[4]!==g||b[5]!==f?(h=i.jsx(c("MWXMessageBaseMessageListText.react"),{outgoing:a,ranges:g,renderers:f,text:e}),b[2]=e,b[3]=a,b[4]=g,b[5]=f,b[6]=h):h=b[6];return h}g["default"]=a}),98);
__d("MWGroupLimitConfig",["MAWAbPropsClient"],(function(a,b,c,d,e,f,g){"use strict";function a(){return d("MAWAbPropsClient").getAbProps().client_group_participants_limit}b=32;c=256;g.armadillo=a;g.gxac=b;g.nonGxac=c}),98);
__d("MWInboxMessageSearchPanelHeader.react",["fbt","MWResponsiveLayoutConstants","MWResponsiveLayoutContext.react","MWXCircleButton.react","MWXIconCross","MWXRow.react","MWXRowItem.react","MWXText.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;b.useCallback;var k=b.useContext;function a(a){var b=d("react-compiler-runtime").c(13),e=a.onReturn;a=a.titleComponent;var f=k(c("MWResponsiveLayoutContext.react")),g;b[0]!==f||b[1]!==e?(g=function(){e(),f==null||f.popCard(d("MWResponsiveLayoutConstants").MWLayoutPanel.INFO_PANEL)},b[0]=f,b[1]=e,b[2]=g):g=b[2];g=g;var i;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(i=h._(/*BTDS*/"Back"),b[3]=i):i=b[3];b[4]!==g?(i=j.jsx(c("MWXRowItem.react"),{children:j.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconCross"),label:i,onPress:g,size:32,type:"deemphasized"})}),b[4]=g,b[5]=i):i=b[5];b[6]!==a?(g=a!=null?a:j.jsx(c("MWXText.react"),{isSemanticHeading:!0,type:"bodyLink2",children:h._(/*BTDS*/"Search")}),b[6]=a,b[7]=g):g=b[7];b[8]!==g?(a=j.jsx(c("MWXRowItem.react"),{expanding:!0,verticalAlign:"center",children:g}),b[8]=g,b[9]=a):a=b[9];b[10]!==i||b[11]!==a?(g=j.jsxs(c("MWXRow.react"),{paddingHorizontal:16,paddingTop:16,spacingHorizontal:8,children:[i,a]}),b[10]=i,b[11]=a,b[12]=g):g=b[12];return g}g["default"]=a}),226);
__d("MWLayoutBackButton.react",["fbt","Locale","MWResponsiveLayoutConstants","MWResponsiveLayoutContext.react","MWResponsiveLayoutShowState","MWXCircleButton.react","MWXIconArrowLeft","MWXIconArrowRight","MWXRowItem.react","MWXThreadThemeColor","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;b.useCallback;var k=b.useContext;function a(a){var b=d("react-compiler-runtime").c(10),e=a.panel;a=k(c("MWResponsiveLayoutContext.react"));var f=a.popCard,g;b[0]!==e||b[1]!==f?(g=function(){return f(e)},b[0]=e,b[1]=f,b[2]=g):g=b[2];g=g;var i=e,l;b[3]!==a||b[4]!==i?(l=d("MWResponsiveLayoutShowState").isCardStackedAboveOthers(i,a),b[3]=a,b[4]=i,b[5]=l):l=b[5];a=l;b[6]!==a||b[7]!==g||b[8]!==e?(i=a?j.jsx(c("MWXRowItem.react"),{children:j.jsx(c("MWXCircleButton.react"),{color:e===d("MWResponsiveLayoutConstants").MWLayoutPanel.INFO_PANEL?"primary":d("MWXThreadThemeColor").mwxThreadThemeColor("var(--mwp-header-button-color)"),icon:d("Locale").isRTL()?c("MWXIconArrowRight"):c("MWXIconArrowLeft"),label:h._(/*BTDS*/"Back"),onPress:g,size:36,type:"deemphasized"})}):null,b[6]=a,b[7]=g,b[8]=e,b[9]=i):i=b[9];return i}g["default"]=a}),226);
__d("MWQPLLogUtils",["QPLUserFlow","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useRef,j=1e4;function a(a,b){var c=d("react-compiler-runtime").c(2);b=k(a,b);var e=b.hasLoggedSuccess;b=b.logFunc;a=l(a);var f=a.hasLoggedFailure;a=a.logFail;var g=m(b,a,e,f);c[0]!==g?(b=function(){g()},c[0]=g,c[1]=b):b=c[1];return b}function k(a,b){var d=i(!1),e=function(){d.current===!1&&(c("QPLUserFlow").endSuccess(a),d.current=!0)};b=b(e);return{hasLoggedSuccess:d,logFunc:b}}function l(a){var b=d("react-compiler-runtime").c(4),e=i(!1),f;b[0]!==a?(f=function(){c("QPLUserFlow").endFailure(a,"failed"),e.current=!0},b[0]=a,b[1]=f):f=b[1];f=f;var g;b[2]!==f?(g={hasLoggedFailure:e,logFail:f},b[2]=f,b[3]=g):g=b[3];return g}function m(a,b,c,e){var f=d("react-compiler-runtime").c(5),g;f[0]!==e||f[1]!==b||f[2]!==a||f[3]!==c?(g=function(){a(),window.setTimeout(function(){c.current===!1&&e.current===!1&&b()},j)},f[0]=e,f[1]=b,f[2]=a,f[3]=c,f[4]=g):g=f[4];return g}g.useLogEnd=a}),98);
__d("MWWellbeingQPLLogEndUtils",["I64","LSContactBitOffset","LSContactBlockedByViewerStatus","MWQPLLogUtils","QPLUserFlow","ReQL","qpl","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=d("react-compiler-runtime").c(4),e=(i||(i=c("useReStore")))(),f;b[0]!==a||b[1]!==e.tables.contacts?(f=function(b){return function(){d("ReQL").fromTableAscending(e.tables.contacts).getKeyRange(a).subscribe(function(a,c){c.operation==="put"&&d("LSContactBitOffset").has(66,c.value)&&b()})}},b[0]=a,b[1]=e.tables.contacts,b[2]=f):f=b[2];f=f;var g;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(g=c("qpl")._(756626838,"231"),b[3]=g):g=b[3];return d("MWQPLLogUtils").useLogEnd(g,f)}function b(a,b){var e=d("react-compiler-runtime").c(6),f;e[0]!==b?(f=c("qpl")._(756614954,"380"),c("QPLUserFlow").addAnnotations(f,{bool:{is_blocked:b}}),e[0]=b,e[1]=f):f=e[1];var g=(i||(i=c("useReStore")))(),j;e[2]!==a||e[3]!==g.tables.contacts||e[4]!==b?(j=function(e){return function(){d("ReQL").fromTableAscending(g.tables.contacts).getKeyRange(a).subscribe(function(a,f){if(f.operation==="put"){a=b&&(h||(h=d("I64"))).equal(f.value.blockedByViewerStatus,(h||(h=d("I64"))).of_int32(c("LSContactBlockedByViewerStatus").UNBLOCKED));f=!b&&((h||(h=d("I64"))).equal(f.value.blockedByViewerStatus,(h||(h=d("I64"))).of_int32(c("LSContactBlockedByViewerStatus").MESSAGE_BLOCKED))||(h||(h=d("I64"))).equal(f.value.blockedByViewerStatus,(h||(h=d("I64"))).of_int32(c("LSContactBlockedByViewerStatus").FULLY_BLOCKED)));(a||f)&&e()}})}},e[2]=a,e[3]=g.tables.contacts,e[4]=b,e[5]=j):j=e[5];e=j;return d("MWQPLLogUtils").useLogEnd(f,e)}g.useLogRestrictEnd=a;g.useLogBlockEnd=b}),98);
__d("MWXList.react",["cr:6150","cr:6324","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["children","ref"],i=["aria-label","aria-labelledby","variant"],j,k=j||d("react");function a(a){var c=d("react-compiler-runtime").c(16),e,f,g;c[0]!==a?(f=a.children,g=a.ref,e=babelHelpers.objectWithoutPropertiesLoose(a,h),c[0]=a,c[1]=e,c[2]=f,c[3]=g):(e=c[1],f=c[2],g=c[3]);if(b("cr:6324")!=null){a=f;if(c[4]!==e){var j=e,l=j["aria-label"];j["aria-labelledby"];j.variant;j=babelHelpers.objectWithoutPropertiesLoose(j,i);l=l;j=j;c[4]=e;c[5]=j;c[6]=l}else j=c[5],l=c[6];var m;c[7]!==a||c[8]!==j||c[9]!==l||c[10]!==g?(m=k.jsx(b("cr:6324"),babelHelpers["extends"]({},j,{children:a,label:l,ref:g})),c[7]=a,c[8]=j,c[9]=l,c[10]=g,c[11]=m):m=c[11];return m}if(b("cr:6150")!=null){a=f;c[12]!==e||c[13]!==a||c[14]!==g?(j=k.jsx(b("cr:6150"),babelHelpers["extends"]({},e,{children:a,ref:g})),c[12]=e,c[13]=a,c[14]=g,c[15]=j):j=c[15];return j}return null}g["default"]=a}),98);
__d("MWXPageletPlaceholder.react",["CometPageletWithDiv.react"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=d("CometPageletWithDiv.react").Placeholder}),98);
__d("MWXTabs.react",["cr:4220","cr:4354","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var c=d("react-compiler-runtime").c(4);if(b("cr:4220")!=null){var e;c[0]!==a?(e=i.jsx(b("cr:4220"),babelHelpers["extends"]({},a)),c[0]=a,c[1]=e):e=c[1];return e}if(b("cr:4354")!=null){c[2]!==a?(e=i.jsx(b("cr:4354"),babelHelpers["extends"]({},a)),c[2]=a,c[3]=e):e=c[3];return e}return null}g["default"]=a}),98);
__d("MessengerLikeFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{d:"M17.987 6c1.104 0 3.67.726 3.67 5.149 0 1.232-.123 2.001-.209 2.534-.018.115-.035.219-.048.314l-.001.005a.36.36 0 0 0 .362.406c4.399 0 6.748 1.164 6.748 2.353 0 .533-.2 1.02-.527 1.395a.11.11 0 0 0 .023.163 2.13 2.13 0 0 1 .992 1.79c0 .86-.477 1.598-1.215 1.943a.11.11 0 0 0-.046.157c.207.328.329.713.329 1.128 0 .946-.547 1.741-1.406 2.029a.109.109 0 0 0-.068.137c.061.184.098.38.098.584 0 1.056-1.776 1.913-5.95 1.913-3.05 0-5.154-.545-5.963-.936-.595-.288-1.276-.81-1.276-2.34v-6.086c0-1.72.958-2.87 1.911-4.014.946-1.135 1.888-2.265 1.888-3.943 0-1.34-.091-2.19-.159-2.817-.039-.368-.07-.66-.07-.928 0-.527.385-.934.917-.936zM10.5 17h-2c-1 0-1.5 2.686-1.5 6s.5 6 1.5 6h2a1 1 0 0 0 1-1V18a1 1 0 0 0-1-1z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerPencilFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{d:"M20.953 12.569a.75.75 0 0 0-1.06 0l-8.938 8.937a4.004 4.004 0 0 0-.715.973l-2.121 4.05c-.455.867.481 1.804 1.35 1.349l4.049-2.121c.358-.188.686-.429.972-.715l8.938-8.937a.75.75 0 0 0 0-1.061l-2.475-2.475zM24.842 13.63a.75.75 0 0 0 1.06 0l1.363-1.362a2.5 2.5 0 0 0-3.536-3.536l-1.362 1.362a.75.75 0 0 0 0 1.06l2.475 2.476z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("WebBloksSSRUtils",[],(function(a,b,c,d,e,f){a=!!(typeof window!=="undefined"&&window.document&&window.document.createElement);f.canUseDOM=a}),66);
__d("WebBloksURLUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){b=new RegExp("[?&]"+b.join("(?:=[^&]*)?|[?&]")+"(?:=[^&]*)?","gi");var c=a.indexOf("?")!==-1?"&":"?";a=a.replace(b,"").replace(/&$/,"");return a.indexOf("?")===-1&&a.indexOf("&")!==-1?a.replace("&","?"):a.replace("?&",c)}function b(a){if(/^(fb|https?|intent):\/\//i.test(a))return a;if(/^mailto:/i.test(a))return a;var b=window.location.protocol+"//"+window.location.hostname,c=a;a.charAt(0)==="/"&&(c=a.substr(1));return b+"/"+c}function c(a,b){b===void 0&&(b=!1);var c=window.location.href;b?window.open(a,"_blank"):a===c?window.location.reload():window.location.href=a}function d(a,b){var c=a.split("?")[0];a=a.split("?")[1]||"";a=g(a);a=babelHelpers["extends"]({},a,b);b=Object.entries(a).map(function(a){var b=a[0];a=a[1];return typeof a==="string"&&a.length===0?b:encodeURIComponent(b)+"="+encodeURIComponent(a)}).join("&");return c+"?"+b}function g(a){var b={};a&&a.split("&").forEach(function(a){a=a.split("=");var c=a[0];a=a[1];b[decodeURIComponent(c)]=decodeURIComponent(a===void 0?"":a)});return b}f.removeQueryParams=a;f.qualify=b;f.openURL=c;f.addQueryParamsToUrl=d}),66);
__d("XCometGroupLandingControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/groupslanding/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("useHasGroupLimitBeenReachedForThread",["I64","Int64Hooks","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWGroupLimitConfig","MWXacGating","ReQL","ReQLSuspense","isMWXacGroupThread","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){var e=d("react-compiler-runtime").c(18),g;e[0]!==b?(g=b===void 0?[]:b,e[0]=b,e[1]=g):g=e[1];var k=g,l=(i||(i=c("useReStore")))();e[2]!==l.tables.threads||e[3]!==a?(b=function(){return d("ReQL").fromTableAscending(l.tables.threads,["memberCount","threadType"].concat(d("LSThreadBitOffset").threadCapabilityFields)).getKeyRange(a)},e[2]=l.tables.threads,e[3]=a,e[4]=b):b=e[4];e[5]!==l||e[6]!==a?(g=[l,a],e[5]=l,e[6]=a,e[7]=g):g=e[7];var m=d("ReQLSuspense").useFirst(b,g,f.id+":31");b=(m==null?void 0:m.memberCount)!=null?(h||(h=d("I64"))).to_int32(m.memberCount):0;b=b+((g=k==null?void 0:k.length)!=null?g:0);var n;e[8]!==k||e[9]!==m?(g=function(){var a=(k!=null?k:[]).some(j);if(m==null)return!1;return d("MWXacGating").isGroupsEnabled()?c("isMWXacGroupThread")({capabilities:m.capabilities,capabilities2:m.capabilities2,capabilities3:m.capabilities3,capabilities4:m.capabilities4,capabilities5:m.capabilities5,threadType:m.threadType})||a:!1},n=[m,k],e[8]=k,e[9]=m,e[10]=g,e[11]=n):(g=e[10],n=e[11]);g=d("Int64Hooks").useMemoInt64(g,n);if(m==null){e[12]===Symbol["for"]("react.memo_cache_sentinel")?(n=[!1,!1],e[12]=n):n=e[12];return n}n=g?b>=d("MWGroupLimitConfig").gxac:d("LSMessagingThreadTypeUtil").isArmadilloSecure(m.threadType)?b>=d("MWGroupLimitConfig").armadillo():b>=d("MWGroupLimitConfig").nonGxac;e[13]!==b?(g=d("MWXacGating").isGroupsEnabled()&&b>=d("MWGroupLimitConfig").gxac,e[13]=b,e[14]=g):g=e[14];b=g;e[15]!==n||e[16]!==b?(g=[n,b],e[15]=n,e[16]=b,e[17]=g):g=e[17];return g}function j(a){return a.isInstagramAccount}g["default"]=a}),98);
__d("useMWCMNavigateNextCommunity",["I64","MWInboxCommunityThreadsRouteBuilder","MWInboxRouteBuilder","ReQL","ReQLSuspense","react","react-compiler-runtime","useCometRouterDispatcher","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=j||d("react");b.useCallback;b.useMemo;function a(a){var b=d("react-compiler-runtime").c(12),e=(h||(h=c("useReStore")))(),g=c("useCometRouterDispatcher")(),j;b[0]!==e.tables.community_folders||b[1]!==a?(j=function(){return d("ReQL").fromTableAscending(e.tables.community_folders).filter(function(b){return!(i||(i=d("I64"))).equal(a,b.folderId)}).filter(l)},b[0]=e.tables.community_folders,b[1]=a,b[2]=j):j=b[2];var m;b[3]!==e||b[4]!==a?(m=[e,a],b[3]=e,b[4]=a,b[5]=m):m=b[5];j=d("ReQLSuspense").useArray(j,m,f.id+":28");b[6]!==j?(m=j.slice(0).sort(k),b[6]=j,b[7]=m):m=b[7];j=m;var n=j;b[8]!==n[0]||b[9]!==n.length||b[10]!==g?(m=function(){var a=n.length!==0?d("MWInboxCommunityThreadsRouteBuilder").buildURLWithoutThread({folder_id:(i||(i=d("I64"))).to_string(n[0].folderId)}):d("MWInboxRouteBuilder").buildHomeURL();if(g!=null){g.go(a,{});return}},b[8]=n[0],b[9]=n.length,b[10]=g,b[11]=m):m=b[11];return m}function k(a,b){return a.name.localeCompare(b.name)}function l(a){a=a.isHidden;return!a}g["default"]=a}),98);
__d("useMWInboxMediaRestoreLoop",["Int64Hooks","LSMessagingThreadTypeUtil","MAWMiActOnActThreadReadyDeferred","promiseDone","react","react-compiler-runtime","requireDeferred","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.useState,j=c("requireDeferred")("MAWFTSRestoreSync").__setRef("useMWInboxMediaRestoreLoop");function a(a){var b=d("react-compiler-runtime").c(14),e=a.threadKey,f=c("useAsyncReStore")(),g=i(null),h=g[0],k=g[1],l;b[0]!==f||b[1]!==h||b[2]!==a.threadType||b[3]!==e?(g=function(){var b=async function(){var a=await f;c("promiseDone")(c("MAWMiActOnActThreadReadyDeferred")(a,e,"mediaRestore",function(a,b){j.onReady(function(a){a=a.getMediaRestoreSync;a().setActiveThreadId(b);c("promiseDone")(a().startMediaSyncingLoop());k(a())});return Promise.resolve()}))};d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType)&&c("promiseDone")(b());return function(){h==null||h.setIsStarted(!1),h==null||h.setShouldPauseRestore(!0)}},l=[f,h,a.threadType,e],b[0]=f,b[1]=h,b[2]=a.threadType,b[3]=e,b[4]=g,b[5]=l):(g=b[4],l=b[5]);d("Int64Hooks").useEffectInt64(g,l);b[6]!==h?(g=function(){h!=null&&(h.resetEBAvailability(),h.isStarted()||c("promiseDone")(h.startMediaSyncingLoop()))},b[6]=h,b[7]=g):g=b[7];var m=g;b[8]!==h?(l=function(){h!=null&&(h.isStarted()||c("promiseDone")(h.startMediaSyncingLoop()))},b[8]=h,b[9]=l):l=b[9];var n=l;b[10]!==m||b[11]!==n?(g=function(){return{onEBOnboarded:m,startMediaSync:n}},l=[m,n],b[10]=m,b[11]=n,b[12]=g,b[13]=l):(g=b[12],l=b[13]);return d("Int64Hooks").useMemoInt64(g,l)}g.default=a}),98);
__d("useMWMessengerResetBlockOrRestrictWC",["I64","Promise","ReQL","WebStorage","getWarningCardStorageKey","promiseDone","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l;(l||d("react")).useCallback;function m(a){var d=(k||(k=c("WebStorage"))).getLocalStorage();if(d==null)return;c("promiseDone")(a.then(function(a){a.forEach(function(a){a=c("getWarningCardStorageKey")(a);return d.removeItem(a)});return(h||(h=b("Promise"))).resolve()}))}function a(){var a=d("react-compiler-runtime").c(2),b=(j||(j=c("useReStore")))(),e;a[0]!==b.tables.participants?(e=function(a){return m(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(b.tables.participants).filter(function(b){return(i||(i=d("I64"))).equal(b.contactId,a)}).map(n)))},a[0]=b.tables.participants,a[1]=e):e=a[1];return e}function n(a){return a.threadKey}g["default"]=a}),98);
__d("useMWPCreateOneToOneThreadThenNavigate",["MAWCreateAndWaitForAuthoritativeOneToOneThread","MAWCutoverQPLLogger","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useCallback;function a(a,b,e){var f=d("react-compiler-runtime").c(7),g=(h||(h=c("useReStore")))(),i;f[0]!==b||f[1]!==a||f[2]!==e?(i=function(c,d,f){return a.openTabOrInbox({clientThreadKey:d,threadKey:c,threadType:f},b!=null?b:"groupMembers",void 0,void 0,{subEntrypoint:e})},f[0]=b,f[1]=a,f[2]=e,f[3]=i):i=f[3];var j=i;f[4]!==g||f[5]!==j?(i=function(a,b){d("MAWCutoverQPLLogger").addPoint(b,"create_one_to_one_thread_then_navigate_started"),c("MAWCreateAndWaitForAuthoritativeOneToOneThread")(g,a,"MWPCreateOneToOneThreadThenNavigate",function(a,c,e){d("MAWCutoverQPLLogger").addPoint(b,"navigate_to_thread"),d("MAWCutoverQPLLogger").endSuccess(b),j(a,c,e)})},f[4]=g,f[5]=j,f[6]=i):i=f[6];return i}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("LSEncryptedBackupsBackupTenancy",[],(function(a,b,c,d,e,f){a=Object.freeze({PRODUCTION:1,SHADOW:2,OPEN:3});f["default"]=a}),66);
__d("LSDataTraceCheckPoint",[],(function(a,b,c,d,e,f){a=Object.freeze({CLIENT_DB_OUTBOUND:1,CLIENT_NETWORK_OUTBOUND:2,CLIENT_NETWORK_INBOUND:10,CLIENT_DB_INBOUND:11,CLIENT_EVALUATE_DASM:12,CLIENT_APP_STATE_CHANGE:13,CLIENT_CREATE_TASK:20,CLIENT_RECIPIENT_PRESENCE:21,CLIENT_EVALUATE_DASM_BEGIN:22,MQTT_PUBLISH:30,MQTT_PUBLISH_ACK:31,MQTT_DISCONNECTED:32,MQTT_CONNECTING:33,MQTT_CONNECTED:34,MQTT_CONNECTION_ACKED:35,TINCAN_RECEIVE_MESSAGE:36,TINCAN_RECEIVE_DECRYPTION_COMPLETE:37,TINCAN_RECEIVE_DECRYPTION_FAILED:38,TINCAN_RECEIVE_DR_QUEUED:39,TINCAN_RECEIVE_DR_SENT_TO_NETWORK:40,TINCAN_RECEIVE_DR_PUBLISH_TO_MQTT:41,TINCAN_RECEIVE_DRMQTT_PUBACK:42,TINCAN_RECEIVE_BOUNCE_TASK_QUEUED:43,TINCAN_RECEIVE_BOUNCE_TASK_SENT_TO_NETWORK:44,TINCAN_RECEIVE_BOUNCE_TASK_PUBLISH_TO_MQTT:45,RICH_MEDIA_DOWNLOAD_START:50,RICH_MEDIA_DOWNLOAD_END:51,RICH_MEDIA_DOWNLOAD_ERROR:52,RICH_MEDIA_UPLOAD_START:53,ARMADILLO_ACT:60,ARMADILLO_ACT_TASK_PICK:61,ARMADILLO_ACT_SERIALIZE:62,ARMADILLO_ACT_GROUP_SEND:63,ARMADILLO_ACT_SEND_FAILURE:64,ARMADILLO_ACT_MESSAGE_SEND:65,NETWORK_DISCONNECTED:70,NETWORK_CONNECTED:71,NETWORK_UNKNOWN:72,FLOW_CREAT:80,FLOW_END:81,FLOW_INTERRUPTED:82,FLOW_CONNECT_ID:83,FLOW_END_AND_FLUSH:84,FLOW_END_FOR_FAILURE:85,TRACE_CREATED:98,CLIENT_READY_TO_FLUSH:99,PENDING_DELTA:100,NO_PENDING_DELTA:101,INIT_SYNC:102,RESNAPSHOT:103,CATCH_UP:104,PERIODIC_SYNC:105,CATCH_UP_FROM_REVISION:106,RESNAPSHOT_CONTINUE:107,RESNAPSHOT_END:108,PERIODIC_SYNC_CONTINUE:109,PERIODIC_SYNC_END:110,CONTACT_SYNC_OPTIMISTIC:111,CONTACT_SYNC_FROM_OMNISTORE:112,CONTACT_SYNC_TAM_OPTIMISTC:113,CONTACT_SYNC_TAM_FROM_OMNISTORE:114,CONTACT_SYNC_TAM_ERROR:115,VERIFY_USER_FOR_SYNC:116,SNAPSHOT_START:117,SNAPSHOT_CONTINUE:118,SNAPSHOT_END:119,FETCH_DELTA:120,DELTA_SUMMARY:130,RECEIVE_DELIVERY_RECEIPT:200,TASK_DESERIALIZATION_ERROR:201,OPTIMISIC_MESSAGE_FAILED:202,SEND_SERVER_AUTHORITATIVE:203,THREAD_RANGE_QUERY_COMPLETE:204,THREAD_RANGE_QUERY_FAILURE:205,THREAD_POINT_QUERY_COMPLETE:206,SEND_SERVER_PARTIAL:207,MARK_AS_OPTIMISTIC_SENT:208,XMS_TRANSPORT_MESSAGE_SEND_START:300,XMS_TRANSPORT_MESSAGE_SEND_FAIL:301,SKIP_TASK_DISPATCH:900,ADVANCED_CRYPTO_MEM_ENCRYPT_TASK_START:1200,ADVANCED_CRYPTO_MEM_ENCRYPT_TASK_COMPLETE:1201,ADVANCED_CRYPTO_MEM_WA_PUBLISH:1202,ADVANCED_CRYPTO_MEM_PUBLISH_ACK:1203,ADVANCED_CRYPTO_MEM_SEND_TASK_COMPLETE:1204,ADVANCED_CRYPTO_MEM_WA_CONNECTION_DISCONNECTED:1205,ADVANCED_CRYPTO_MEM_WA_CONNECTION_CONNECTING:1206,ADVANCED_CRYPTO_MEM_WA_CONNECTION_CONNECTED:1207,ADVANCED_CRYPTO_MEM_FAILURE:1208,ADVANCED_CRYPTO_MEM_SEND_SUCCESS_WITH_RETRY:1209,ADVANCED_CRYPTO_MEM_DELIVERY_RECEIPT_RECEIVED:1210,ADVANCED_CRYPTO_REGISTRATION_CAT_DISK_FETCH_START:1211,ADVANCED_CRYPTO_REGISTRATION_CAT_DISK_FETCH_END:1212,ADVANCED_CRYPTO_REGISTRATION_CAT_NETWORK_FETCH_START:1213,ADVANCED_CRYPTO_REGISTRATION_CAT_NETWORK_FETCH_RETRYSTART:1214,ADVANCED_CRYPTO_REGISTRATION_CAT_NETWORK_FETCH_END:1215,ADVANCED_CRYPTO_REGISTRATION_WA_REQUEST_SEND_START:1216,ADVANCED_CRYPTO_REGISTRATION_WA_REQUEST_SEND_END:1217,ADVANCED_CRYPTO_REGISTRATION_WCR_REGISTER:1218,ADVANCED_CRYPTO_REGISTRATION_SAVE_WA_DEVICE_ID_ERROR:1219,ADVANCED_CRYPTO_MEM_DEVICE_FETCH_START:1220,ADVANCED_CRYPTO_MEM_DEVICE_FETCH_END:1221,ADVANCED_CRYPTO_MEM_ENCRYPTION_BEGIN:1222,ADVANCED_CRYPTO_MEM_ENCRYPTION_END:1223,ADVANCED_CRYPTO_MEM_ENCRYPTION_DEVICE_COUNT:1224,ADVANCED_CRYPTO_DUAL_SEND:1225,ADVANCED_CRYPTO_REGISTRATION_SERVER_SUCCESS:1226,ADVANCED_CRYPTO_REGISTRATION_RETRY_REGISTER:1227,ADVANCED_CRYPTO_REGISTRATION_CAT_NULL:1228,ADVANCED_CRYPTO_REGISTRATION_WCR_MANAGER_NULL:1229,ADVANCED_CRYPTO_REGISTRATION_RESPONSE_NULL:1230,ADVANCED_CRYPTO_REGISTRATION_SELF_NULL:1231,ADVANCED_CRYPTO_REGISTRATION_EMPTY_DEVICE_ID:1232,ADVANCED_CRYPTO_REGISTRATIONRETRY_REGISTER_FAILURE:1233,ADVANCED_CRYPTO_GROUP_DUAL_SEND:1234,RAVEN_IMAGE_MESSAGE:1235,RAVEN_VIDEO_MESSAGE:1236,ADVANCED_CRYPTO_REGISTRATION_RETRY_REGISTER_CAT:1237,ADVANCED_CRYPTO_REGISTRATION_RETRY_REGISTER_NETWORK:1238,ADVANCED_CRYPTO_CAT_DISK_FETCH_CAT_INVALID:1239,ADVANCED_CRYPTO_RECONNECT_GENERIC_ERROR:1240,ADVANCED_CRYPTO_RECONNECT_CAT_INVALID:1241,ADVANCED_CRYPTO_RECONNECT_CAT_EXPIRED:1242,ADVANCED_CRYPTO_CAT_MEMORY_FETCH_NULL:1243,ADVANCED_CRYPTO_FIRST_CONNECTION_START:1244,LABYRINTH_INITIALIZE_BACKUP_SPROC:1400,LABYRINTH_INITIALIZE_BACKUP_SUCCESS_SPROC:1401,LABYRINTH_INITIALIZE_BACKUP_FAILURE:1402,LABYRINTH_CREATE_BACKUP_MAILBOX_SPROC:1403,LABYRINTH_HANDLE_CREATE_BACKUP_MAILBOX_SUCCESS_SPROC:1404,LABYRINTH_OPEN_EPOCH_SPROC:1405,LABYRINTH_HANDLER_OPEN_EPOCH_SUCCESS_SPROC:1406,LABYRINTH_HANDLER_OPEN_EPOCH_FAILURE_SPROC:1407,LABYRINTH_CREATE_VIRTUAL_DEVICE_SPROC:1410,LABYRINTH_HANDLE_CREATE_VIRTUAL_DEVICE_SUCCESS_SPROC:1411,LABYRINTH_HANDLE_CREATE_VIRTUAL_DEVICE_FAILURE_SPROC:1412,LABYRINTH_ADD_DEVICE_SPROC:1413,LABYRINTH_ADD_DEVICE_FROM_VIRTUAL_SPROC:1414,LABYRINTH_HANDOLE_WRONG_RECOVERY_CODE_SPROC:1415,LABYRINTH_HANDLE_ADD_DEVICE_SUCCESS_SPROC:1416,LABYRINTH_HANDLE_ADD_DEVICE_FAILURE_SPROC:1417,LABYRINTH_ADD_DEVICE_SPROC_ADD_DEVICE_ALREADY_PENDING:1600,LABYRINTH_ADD_DEVICE_SPROC_UPDATE_RECOVERY_DATA_TABLE_START:1601,LABYRINTH_ADD_DEVICE_SPROC_ADD_DEVICE_NO_VD_TABLE:1602,LABYRINTH_ADD_DEVICE_SPROC_GENERATE_RECOVERY_SECRETS_START:1603,LABYRINTH_ADD_DEVICE_SPROC_WRONG_RC:1604,LABYRINTH_ADD_DEVICE_SPROC_NULL_VD:1605,LABYRINTH_ADD_DEVICE_SPROC_NO_RC_STATUS_TABLE_FOUND:1606,LABYRINTH_ADD_DEVICE_SPROC_ISSUE_FETCH_VD_TASK:1607,LABYRINTH_ADD_DEVICE_SPROC_SUCCESS:1608,LABYRINTH_INITIALIZE_RESTORE_SPROC:1418,LABYRINTH_DECRYPT_THREADS_SPROC:1419,LABYRINTH_REQUEST_MESSAGES_FROM_THREADS_SPROC:1420,LABYRINTH_REQUEST_MESSAGES_FROM_RANGE_QUERY_SPROC:1421,LABYRINTH_DECRYPT_MESSAGES_SPROC:1422,LABYRINTH_DELETE_BACKUP_ON_CLIENT_SPROC:1423,LABYRINTH_DELETE_BACKUPS_SPROC:1424,LABYRINTH_HANDLE_DELETE_MAILBOX_SPROC:1425,LABYRINTH_ISSUE_DELETE_BACKUP_TASK_SPROC:1426,LABYRINTH_BACKUP_UPLOAD_BEGIN:1427,LABYRINTH_BACKUP_UPLOAD_SUCCESS_SPROC:1428,LABYRINTH_CREATE_EXTRA_VIRTUAL_DEVICE_SPROC:1429,LABYRINTH_QR_INIT_ADD_DEVICE_SPROC:1430,LABYRINTH_QR_INIT_ADD_DEVICE_SUCCESS_SPROC:1431,LABYRINTH_QR_INIT_GET_SECRETS_SPROC:1433,LABYRINTH_QR_FINISH_ADD_PEER_DEVICE_SPROC:1434,LABYRINTH_SYNC_EPOCHS_STORED_PROCEDURE_SPROC:1436,LABYRINTH_SYNC_EPOCHS_SUCCESS_SPROC:1437,LABYRINTH_SYNC_EPOCHS_FORWARD_DERIVATION_END:1438,LABYRINTH_SYNC_EPOCHS_BACKWARD_DERIVATION_END:1439,LABYRINTH_SYNC_EPOCHS_OPEN_NEW_EPOCH:1440,LABYRINTH_PREPARE_OPEN_EPOCH_SPROC:1441,LABYRINTH_PREPARE_OPEN_EPOCH_SUCCESS_SPROC:1442,LABYRINTH_MEB_MANAGER_ADD_DEVICE:1443,LABYRINTH_BACKUP_UPLOAD_FAIL:1450,LABYRINTH_DECRYPT_SINGLE_MESSAGE_SPROC:1498,LABYRINTH_DECRYPT_SINGLE_MESSAGE_SUCCESS:1499,LABYRINTH_MEDIA_BACKUP_START:1455,LABYRINTH_MEDIA_BACKUP_SUCCESS:1456,LABYRINTH_MEDIA_BACKUP_FAILURE:1458,LABYRINTH_MEDIA_RESTORE_START:1459,LABYRINTH_MEDIA_RESTORE_SUCCESS:1460,LABYRINTH_MEDIA_RESTORE_FAILURE:1462,LABYRINTH_REMOVE_VIRTUAL_DEVICE_SPROC:1484,LABYRINTH_HANDLE_REMOVE_VIRTUAL_DEVICE_RESULT_SUCCESS:1485,LABYRINTH_HANDLE_REMOVE_VIRTUAL_DEVICE_RESULT_FAILURE:1486,LABYRINTH_REMOVE_VIRTUAL_DEVICE_BACKUP_NOT_FOUND:1493,LABYRINTH_REMOVE_VIRTUAL_DEVICE_WRITE_TASK:1494,LABYRINTH_BACKUP_UPLOAD_ENQUEUE_TASK_EXECUTER:1495,LABYRINTH_BACKUP_UPLOAD_ENQUEUE_SERIALIZER:1496,LABYRINTH_BACKUP_UPLOAD_SERIALIZE:1451,LABYRINTH_BACKUP_UPLOAD_SERIALIZE_SUCCEED:1463,LABYRINTH_BACKUP_UPLOAD_SERIALIZE_FAIL:1464,LABYRINTH_UPDATE_BACKUP_TABLE_SPROC:1467,LABYRINTH_FETCH_BACKUP_IDS_SPROC:1468,LABYRINTH_PROCESS_BACKUP_IDS_SPROC:1487,LABYRINTH_BACKUP_STATUS_NO_INFO:1488,LABYRINTH_BACKUP_STATUS_FETCH_ERROR:1489,LABYRINTH_BACKUP_STATUS_NOT_ONBOARDED:1490,LABYRINTH_BACKUP_STATUS_ONBOARDED:1491,LABYRINTH_BACKUP_STATUS_NO_BACKUPS_PRESENT:1492,LABYRINTH_OPT_OUT_OF_BACKUP_SPROC:1469,LABYRINTH_TRIGGER_THIRD_PARTY_ID_GENERATION_SPROC:1470,LABYRINTH_HANDLE_TRIGGER_THIRD_PARTY_ID_GENERATION_SPROC:1471,LABYRINTH_FETCH_BACKUPS_METADATA_SPROC:1478,LABYRINTH_HANDLE_BACKUPS_METADATA_RESULT_SPROC:1480,LABYRINTH_RESTORE_THREADS_SUCCESS:1481,LABYRINTH_RESTORE_MESSAGES_SUCCESS:1482,LABYRINTH_POINT_QUERY_MESSAGE_RESTORE:2511,LABYRINTH_RESTORE_MESSAGE_NEWER_DIRECTION:2514,LABYRINTH_RESTORE_SURROUNDING_MESSAGES:2515,LABYRINTH_BACKUP_UPLOAD_GET_ECHO_DOC:1497,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_BACKUP_STATE:1800,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_BACKUP_STATE_SUCCESS:1801,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_BACKUP_STATE_FAILURE:1802,LABYRINTH_MEBMANAGER_ADD_DEVICE_ADD_DEVICE_SPROC_CALLED:1803,LABYRINTH_MEBMANAGER_ADD_DEVICE_ADD_DEVICE_SPROC_RETURN_SUCCESS:1804,LABYRINTH_MEBMANAGER_ADD_DEVICE_ADD_DEVICE_SPROC_RETURN_FAILURE:1805,LABYRINTH_MEBMANAGER_ADD_DEVICE_NOTOFICATION_TRIGGERED:1806,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_ADD_DEVICE_STATE:1807,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_ADD_DEVICE_STATEFAILURE:1808,LABYRINTH_MEBMANAGER_ADD_DEVICE_INIT_RESTORE_SPROC_CALLED:1809,LABYRINTH_MEBMANAGER_ADD_DEVICE_INIT_RESTORE_SPROC_RETURN_SUCCESS:1810,LABYRINTH_MEBMANAGER_ADD_DEVICE_INIT_RESTORE_SPROC_RETURN_FAILURE:1811,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_SPROC_CALLED:1812,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_SPROC_RETURN_SUCCESS:1813,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_SPROC_RETURN_FAILURE:1814,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_NOTIFICATION_TRIGGERRED:1815,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_FETCH_RECOVERY_CODE_STATUS:1816,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_FETCH_RECOVERY_CODE_STATUS_FAILURE:1817,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_CREATE_EXTRA_VIRTUAL_DEVICE_SUCCESS:1818,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_CREATE_EXTRA_VIRTUAL_DEVICE_FAILURE:1819,LABYRINTH_MEBMANAGER_WRONG_RECOVERY_CODE:1823,LABYRINTH_ENCRYPT_MESSAGE_FAIL:1828,LABYRINTH_ENCRYPT_MESSAGE_GENERATED_PAYLOAD:1824,LABYRINTH_ENCODE_DOCUMENT:1820,LABYRINTH_ENCODE_DOCUMENT_FAIL:1821,LABYRINTH_ENCODE_DOCUMENT_SUCCESS:1822,LABYRINTH_UPLOAD_CANCEL:1850,LABYRINTH_DELETE_BACKUP_ON_CLIENT_STARTING_CANCEL:1851,LABYRINTH_DELETE_BACKUP_ON_CLIENT_DID_CANCEL:1852,LABYRINTH_DELETE_BACKUP_ON_CLIENT_FAILED_CANCEL:1853,LABYRINTH_BACKUP_RETRY_DELETE_MESSAGE_BACKUP_STATUS_ENTRY:1865,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_BEGIN:1881,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_GOT_MESSAGE_IDS_FROM_ACT:1882,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_BEGIN_OCMF_OPE_OPERATIONS:1883,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_END_OCMF_OPE_OPERATIONS:1884,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_FETCH_MESSAGE_RANGE_ERROR:1885,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_ISSUE_COMPARATOR_TASK:1886,LABYRINTH_CLEAR_BACKUP_TABLE_ON_CLIENT:1891,LABYRINTH_CLEAR_VIRTUAL_DEVICES_TABLE_ON_CLIENT:1892,LABYRINTH_CLEAR_BACKUP_METADATA_TABLE_ON_CLIENT:1893,SAP_VESTA_FETCH_VESTA_KEY_AND_SECRET_BEGIN:2400,LABYRINTH_PLUGIN_CALLING_GENERATE_RECOVERY_CODE:2401,SAP_FESTA_FETCH_KEY_AND_SECRET_COMPLETION:2402,SAP_VESTA_CALLING_VESTA_REGISTRATION:2403,SAP_VESTA_REGISTRATION_COMPLETION:2404,LABYRINTH_PLUGIN_CALLING_CREATE_EXTRA_VIRTUAL_DEVICE:2405,SAP_VESTA_NOTIFY_SECRET_STORED_COMPLETION:2406,SAP_VESTA_NOTIFY_CLIENT_ABOUT_VESTA_REGISTRATION:2407,SAP_VESTA_CALLING_VESTA_LOGIN:2411,SAP_VESTA_LOGIN_COMPLETION:2412,LABYRINTH_PLUGIN_CALLING_ADD_DEVICE:2413,LABYRINTH_PLUGIN_CALLING_INITIALIZE_BACKUP:2416,LABYRINTH_PIN_SETUP_BEGIN:2417,LABYRINTH_PIN_SETUP_SUCCESS:2418,LABYRINTH_PIN_SETUP_FAILURE:2419,LABYRINTH_PIN_RESTORE_BEGIN:2420,LABYRINTH_PIN_RESTORE_SUCCESS:2421,LABYRINTH_PIN_RESTORE_FAILURE:2422,LABYRINTH_PLUGIN_CALLING_INITIALIZE_RESTORE:2423,LABYRINTH_FETCH_THREAD_IDS_SPROC:2500,LABYRINTH_FETCH_THREAD_IDS_NATIVE_OP_SUCCESS:2501,LABYRINTH_FETCH_THREAD_IDS_NATIVE_OP_FAILURE:2502,LABYRINTH_REQUEST_MESSAGES_FROM_FETCH_THREAD_IDS_SPROC:2503,LABYRINTH_REQUEST_MESSAGES_FROM_INIT_RESTORE_SPROC:2506,LABYRINTH_POINT_QUERY_RESTORE_TASK_SPROC_START:2512,LABYRINTH_POINT_QUERY_RESTORE_TASK_SPROC_END:2513,LABYRINTH_VERSIONING_UPSERT_DEVICE_ENCRYPTION_VERSIONS_TO_CLIENT_SPROC_START:2800,LABYRINTH_VERSIONING_UPSERT_DEVICE_ENCRYPTION_VERSIONS_TO_CLIENT_SPROC_END:2801,LABYRINTH_VERSIONING_DELETE_AND_SYNC_DEVICE_ENCRYPTION_VERSION_DATA_SPROC:2802,LABYRINTH_VERSIONING_UPSERT_DEVICE_DELETE_DEVICE_ENCRYPTION_VERSION_DATA:2803,LABYRINTH_VERSIONING_SYNC_ENCRYPTION_VERSION_DATA_SPROC:2804,LABYRINTH_VERSIONING_VERSION_SUPPORTED:2805,LABYRINTH_VERSIONING_SYNC_UPDATE_VERSION_DATA:2806,LABYRINTH_VERSIONING_SYNC_NO_VERSION_DATA:2807,LABYRINTH_VERSIONING_VERSION_SELECTED:2808,LABYRINTH_VERSIONING_DELETE_AND_SYNC_DEVICE_DELETE_DEVICE_ENCRYPTION_VERSION_DATA:2809,LABYRINTH_VERSIONING_VERSION_NOT_SUPPORTED:2810,LABYRINTH_VERSIONING_UPSERT_DEVICE_INVALID_SIGNATURE:2811,LABYRINTH_PREPARE_OPEN_EPOCH_SPROC_ISSUE_REQUEST_ASSOC_DEVICES:2821,LABYRINTH_PREPARE_OPEN_EPOCH_FAILURE_NO_BACKUP:2822,LABYRINTH_PREPARE_OPEN_EPOCH_FAILURE_FLOW_ALREADY_IN_PROGRES:2823,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC:2824,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_NUM_EDGES:2825,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_PROCESS_EDGE_FROM:2826,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_PROCESS_EDGE_TO:2827,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_EDGE_SOURCE:2828,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_SOURCE_EPOCH_LOADED:2829,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_DERIVE_CHAINING_KEY_PSK:2830,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_DECRYPT_FORWARD_EDGE_ENTROPY:2831,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_EDGE_DECRYPTION_SUCCESS:2832,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_EDGE_DECRYPTION_FAIL:2833,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_FAIL_TO_LOAD_SOURCE_EPOCH:2834,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_EDGE_SOURCE:2835,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_SOURCE_EPOCH_LOADED:2836,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_DECRYPT_BACKWARD_EDGE:2837,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_EDGE_DECRYPTION_SUCCESS:2838,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_EDGE_DERIVATION_FAIL:2839,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_FAIL_TO_LOAD_SOURCE_EPOCH:2840,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FAILURE:2841,LABYRINTH_GET_OPEN_EPOCH_KEYS_SPROC:2842,LABYRINTH_GET_OPEN_EPOCH_KEYS_NO_EPOCHS_ON_CLIENT:2843,LABYRINTH_GET_OPEN_EPOCH_KEYS_GET_ALL_EPOCH_ANON_IDS:2844,LABYRINTH_GET_OPEN_EPOCH_KEYS_NUM_ANON_IDS:2845,LABYRINTH_GET_OPEN_EPOCHS_KEYS_EPOCH_ANON_ID_LIST_EMPTY:2846,LABYRINTH_GET_OPEN_EPOCH_KEYS_GET_KEYS_FOR_ANON_ID:2847,LABYRINTH_GET_OPEN_EPOCH_KEYS_ANON_ID_NOT_FOUND:2848,LABYRINTH_SYNC_EPOCHS_SPROC_DOWNLOAD_EPOCHS_V2_WRITE_TASK:2849,LABYRINTH_OPEN_EPOCH_SPROC_OPEN_INITIAL_EPOCH:2850,LABYRINTH_OPEN_EPOCH_SPROC_OPEN_EPOCH_WITH_LAST_EPOCH_METADATA:2851,LABYRINTH_OPEN_EPOCH_SPROC_OPEN_AFTER_FIRST_EPOCH:2852,LABYRINTH_OPEN_EPOCH_SPROC_FAILURE_LAST_EPOCH_NOT_FOUND:2853,LABYRINTH_OPEN_EPOCH_SPROC_ERROR:2854,LABYRINTH_PREPARE_OPEN_EPOCH_SPROC_CLOSE_LAST_EPOCH:2855,LABYRINTH_PREPARE_OPEN_EPOCH_SPROC_DERIVE_AND_STORE_EPOCH:2856,LABYRINTH_HANDLER_OPEN_EPOCH_SUCCESS_SPROC_DERIVE_AND_STORE:2857,LABYRINTH_HANDLER_OPEN_EPOCH_SUCCESS_SPROC_UPDATE_AUTHORITY:2858,LABYRINTH_HANDLER_OPEN_EPOCH_SUCCESS_SPROC_UPDATE_EPOCH_ID:2859,LABYRINTH_INCLUDE_FALLBACK_KEY_DURING_ENCRYPTION:2860,LABYRINTH_DERIVE_FALLBACK_KEY:2861,LABYRINTH_FAILED_TO_INCLUDE_FALLBACK_KEY:2862,LABYRINTH_GET_OPEN_EPOCH_KEYS_ANON_ID_VALUE:2863,LABYRINTH_GET_OPEN_EPOCH_KEYS_ANON_ID_NULL_VALUE:2864,LABYRINTH_MESSAGE_RESTORE_EPOCH_ANON_ID_NULL:2865,LABYRINTH_WEB_EPOCH_ROTATION_ENABLED:2866,LABYRINTH_WEB_EPOCH_ROTATION_DISABLED:2867,LABYRINTH_MOBILE_EPOCH_ROTATION_ENABLED:2868,LABYRINTH_MOBILE_EPOCH_ROTATION_DISABLED:2869,LABYRINTH_DECRYPT_MESSAGE_SPROC_SINGLE_EPOCH_KEY:2870,LABYRINTH_DECRYPT_MESSAGE_SPROC_EPOCH_NOT_FOUND_ERROR:2871,LABYRINTH_DECRYPT_MESSAGE_SPROC_MULTIPLE_EPOCHS_ERROR:2872,LABYRINTH_WEB_ECHO_MESSAGE_RESTORE_BEGIN:3600,LABYRINTH_WEB_ISSUE_RESTORE_JOB_DONE:3601,LABYRINTH_WEB_INSERT_TO_BAKCUP_MESSAGE_TABLE_DONE:3602,LABYRINTH_WEB_RESTORE_WITH_SERIALIZER_START:3603,LABYRINTH_WEB_ISSUE_RESTORE_JOB_STARTED:3604,LABYRINTH_WEB_INSERT_TO_RESTORE_PAYLOAD_CONTEXT_TABLE_DONE:3605,LABYRINTH_WEB_XMA_RESTORE_STARTED:3606,LABYRINTH_WEB_XMA_RESTORE_ENDED:3607,LABYRINTH_WEB_XMA_RESTORE_MEDIAID_NULL:3608,LABYRINTH_WEB_XMA_RESTORE_DBXMA_NULL:3609,LABYRINTH_WEB_ISSUE_MESSAGE_RANGE_QUERY:3610,LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_INVALID_REQUEST:3700,LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_BEGIN:3701,LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_FAILURE:3702,LABYRINTH_WEB_UPLOAD_THREAD_NOT_PRESENT:3703,LABYRINTH_WEB_UPLOAD_THREAD_PRESENT:3704,LABYRINTH_WEB_UPLOAD_GET_SENDER_INFO_UNSUCCESSFUL:3705,LABYRINTH_WEB_UPLOAD_GET_SENDER_INFO_SUCCESSFUL:3706,LABYRINTH_WEB_UPLOAD_CONTACT_NAME_NULL:3707,LABYRINTH_WEB_UPLOAD_CONTACT_NAME_NOT_NULL:3708,LABYRINTH_WEB_UPLOAD_GET_RECEIPT_STATUS_LIST_SUCCESSFUL:3709,LABYRINTH_WEB_UPLOAD_GET_SENDER_DISPLAY_NAME_FOR_QUOTED_MSG_NULL:3710,LABYRINTH_WEB_UPLOAD_GET_SENDER_DISPLAY_NAME_FOR_QUOTED_MSG_NOT_NULL:3711,LABYRINTH_WEB_UPLOAD_XMA_DATA_UPLOAD_SUCCESSFUL:3712,LABYRINTH_WEB_UPLOAD_XMA_DATA_UPLOAD_UNSUCCESSFUL:3713,LABYRINTH_WEB_UPLOAD_INVALID_MSG_TYPE_FOR_MEDIA_TYPE:3714,LABYRINTH_WEB_UPLOAD_IS_MEDIA_MSG_TRUE:3715,LABYRINTH_WEB_UPLOAD_IS_MEDIA_MSG_FALSE:3716,LABYRINTH_WEB_UPLOAD_UNSUPPORTED_MEDIA_TYPE:3717,LABYRINTH_WEB_UPLOAD_NO_MEDIA_ID_FOUND_IN_MEDIA_MSG:3718,LABYRINTH_WEB_UPLOAD_NO_MEDIA_ENTRY_FOR_MEDIA_ID:3719,LABYRINTH_WEB_UPLOAD_GET_REACTION_DATA_SUCCESSFUL:3720,LABYRINTH_WEB_UPLOAD_GET_QUOTE_MSG_SUCCESSFUL:3721,LABYRINTH_WEB_UPLOAD_GET_QUOTE_SENDER_NAME_SUCCESSFUL:3722,LABYRINTH_WEB_UPLOAD_FB_ID_NULL_FOR_XMA_MSG:3723,LABYRINTH_WEB_UPLOAD_GET_XMA_DATA_SUCCESSFUL:3724,LABYRINTH_WEB_UPLOAD_NO_XMA_DB_ENTRY_FOR_EXTERNAL_ID:3725,LABYRINTH_WEB_UPLOAD_ECHO_MESSAGE_CREATION_SUCCESSFUL:3726,LABYRINTH_WEB_UPLOAD_MISSING_MEDIA_DATA_FOR_MEDIA_MSG:3727,LABYRINTH_WEB_UPLOAD_INVOKE_MESSAGE_UPLOAD_SPROC:3728,LABYRINTH_WEB_UPLOAD_ISSUE_MESSAGE_UPLOAD_UI_EVENT:3729,LABYRINTH_WEB_UPLOAD_USER_DEVICE_NOT_ENROLLED:3730,LABYRINTH_WEB_GET_BACKUP_TENANCY:3731,LABYRINTH_WEB_UPLOAD_ERROR_OCCURRED_ON_ISSUE_MESSAGE_UPLOAD_UI_EVENT:3739,LABYRINTH_WEB_UPLOAD_XMA_NOT_FOUND_IN_IDB:3740,LABYRINTH_WEB_UPLOAD_MEDIA_NOT_FOUND_FOR_XMA_IN_IDB:3741,LABYRINTH_WEB_UPLOAD_INVALID_ECHO_MESSAGE_SERIALIZATION_RESPONSE:3742,LABYRINTH_WEB_UPLOAD_DUPLICATE_REQUEST:3743,LABYRINTH_WEB_RETROACTIVE_BACKUPS_START_UPLOAD_MSG:3744,LABYRINTH_WEB_RETROACTIVE_BACKUPS_START_UPLOAD_MEDIA:3745,LABYRINTH_WEB_RETROACTIVE_BACKUPS_UPLOAD_MSG_ERROR:3746,LABYRINTH_WEB_RETROACTIVE_BACKUPS_UPLOAD_MEDIA_ERROR:3747,LABYRINTH_WEB_UPLOAD_XMA_DATA_IS_NULL:3748,LABYRINTH_WEB_UPLOAD_REPLIED_MESSAGE_NOT_IN_DB:3749,LABYRINTH_WEB_UPLOAD_REPLIED_MESSAGE_IN_DB:3750,MQTT_STATE_DISCONNECTED_EVENT:10000001,MQTT_STATE_CONNECTED_EVENT:10000002,APP_STATEBACKGROUND:10000003,APP_STATEFOREGROUND:10000004,MQTT_STATE_CONNECTING_EVENT:10000005,GLOBAL_CONNECTIVITY_BANNER_DISPLAY:10000006,GLOBAL_CONNECTIVITY_BANNER_VANISH:10000007,SWITCH_ACCOUNT_EVENT:10000008,ADVANCED_CRYPTO_MEM_WA_CONNECTION_DISCONNECTED_EVENT:10001205,ADVANCED_CRYPTO_MEM_WA_CONNECTION_CONNECTING_EVENT:10001206,ADVANCED_CRYPTO_MEM_WA_CONNECTION_CONNECTED_EVENT:10001207});f["default"]=a}),66);
__d("LSDataTraceTag",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;c=2;d=3;e=4;var g=5,h=6,i=7,j=20,k=21,l=22,m=23,n=24,o=25,p=26,q=27,r=28,s=29,t=30,u=31,v=32,w=33,x=34,y=35,z=36,A=37,B=38,C=39,D=40,E=41,F=42;f.none=a;f.sticker=b;f.image=c;f.animatedImage=d;f.video=e;f.audio=g;f.file=h;f.xma=i;f.messageTypeNone=j;f.messageTypeText=k;f.messageTypeFutureproof=l;f.messageTypeCiphertext=m;f.messageTypeUnavailable=n;f.messageTypeImage=o;f.messageTypeVideo=p;f.messageTypePtt=q;f.messageTypeAdmin=r;f.messageTypeRevoked=s;f.messageTypeGif=t;f.messageTypeSticker=u;f.messageTypeExpiredEphemeral=v;f.messageTypeEphemeralSettingAdmin=w;f.messageTypeEphemeralSyncResponse=x;f.messageTypeEphemeralScreenshotAction=y;f.messageTypeDeleteForMe=z;f.messageTypeEphemeralSettingChangeFromCurrentDevice=A;f.messageTypeAlertICDC=B;f.messageTypeGroupInvite=C;f.messageTypeXMA=D;f.messageTypeReaction=E;f.messageTypeSenderKeyDistribution=F}),66);
__d("LSRequestId",["uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h="0123456789abcdef",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function a(){var a=c("uuidv4")().replace(/[^0-9a-f]/gi,""),b=0,d=["#"];while(b<33){var e=h.indexOf(a.charAt(b))<<8,f=h.indexOf(a.charAt(b+1))<<4,g=h.indexOf(a.charAt(b+2));g=g|(f|e);f=g>>6;d.push(i.charAt(f));d.push(i.charAt(g&63));b+=3}return d.join("")}b={generate:a};g["default"]=b}),98);
__d("MAWBridgeTrace",["WAJids"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e,f,g,h,i){var j=a.ack,k=a.externalId,l=a.ts;a=a.type;var m=d("WAJids").switchOnMsgrChatJidType(b,{group:function(a){return"Group"},user:function(a){return"User"}});return{ack:j,externalId:k,isFirstMsg:!!f,openMessageOtid:e,openMessageParticipantCount:g,participantCount:h,threadJid:b,threadKey:i,threadType:m,traceType:c,ts:l,type_:a}}function b(a,b,c){return{traceContext:c,traceId:b,traceType:a}}function c(a,b,c,d){return{errorMessage:d,event:b,externalIds:a,traceType:c}}function e(a,b,c,d,e,f){return{checkPointId:a,dataTraceId:b,errorMessage:c,shouldFlush:d,syncChannel:e,tags:f}}g.createBridgeStartTraceData=a;g.createBridgeStartTraceWithTraceIdData=b;g.createBridgeUpdateTraceData=c;g.createBridgeTraceRecordCheckpointData=e}),98);
__d("MAWTraceUtils",["EBGating","LSDataTraceCheckPoint","LSDataTraceTag","LSIntEnum","LSRequestId","MAWBridge","MAWBridgeTrace","MAWMsgType"],(function(a,b,c,d,e,f,g){"use strict";var h,i="backup_upload",j="media_backup",k="vesta_registration",l="vesta_login";function m(){return c("LSRequestId").generate()}function a(a){return a}function b(a,b,c){c=c!=null?c:m();d("EBGating").isRemoveLSDataTrace()||d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"StartTraceWithTraceId",value:d("MAWBridgeTrace").createBridgeStartTraceWithTraceIdData(a,c,b)}]},!0);return c}function n(a,b,c,e,f){if(d("EBGating").isRemoveLSDataTrace())return;if(a!=null){c=c.length>0?c.map(function(a){return a.toString()}).join(","):void 0;d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"TraceRecordCheckpoint",value:d("MAWBridgeTrace").createBridgeTraceRecordCheckpointData(b,a,f,e,-1,c)}]},!0)}}function e(a,b,e,f){n(a,b,e,!1),n(a,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_FOR_FAILURE),e,!0,f)}function f(a,b,e){n(a,b,e,!1),n(a,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_AND_FLUSH),e,!0)}function o(a,b,e){n(a,b,e,!1),n(a,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_AND_FLUSH),e,!0)}function p(a){switch(a){case d("MAWMsgType").MSG_TYPE.TEXT:return d("LSDataTraceTag").messageTypeText;case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:return d("LSDataTraceTag").messageTypeFutureproof;case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:return d("LSDataTraceTag").messageTypeCiphertext;case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:return d("LSDataTraceTag").messageTypeUnavailable;case d("MAWMsgType").MSG_TYPE.IMAGE:return d("LSDataTraceTag").messageTypeImage;case d("MAWMsgType").MSG_TYPE.VIDEO:return d("LSDataTraceTag").messageTypeVideo;case d("MAWMsgType").MSG_TYPE.PTT:return d("LSDataTraceTag").messageTypePtt;case d("MAWMsgType").MSG_TYPE.ADMIN:return d("LSDataTraceTag").messageTypeAdmin;case d("MAWMsgType").MSG_TYPE.REVOKED:return d("LSDataTraceTag").messageTypeRevoked;case d("MAWMsgType").MSG_TYPE.GIF:return d("LSDataTraceTag").messageTypeGif;case d("MAWMsgType").MSG_TYPE.STICKER:return d("LSDataTraceTag").messageTypeSticker;case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return d("LSDataTraceTag").messageTypeExpiredEphemeral;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:return d("LSDataTraceTag").messageTypeEphemeralSettingAdmin;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:return d("LSDataTraceTag").messageTypeEphemeralSyncResponse;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:return d("LSDataTraceTag").messageTypeEphemeralScreenshotAction;case d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:return d("LSDataTraceTag").messageTypeDeleteForMe;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:return d("LSDataTraceTag").messageTypeEphemeralSettingChangeFromCurrentDevice;case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:return d("LSDataTraceTag").messageTypeAlertICDC;case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:return d("LSDataTraceTag").messageTypeGroupInvite;case d("MAWMsgType").MSG_TYPE.XMA:return d("LSDataTraceTag").messageTypeXMA;case d("MAWMsgType").MSG_TYPE.REACTION:return d("LSDataTraceTag").messageTypeReaction;case d("MAWMsgType").MSG_TYPE.SK_DISTRIBUTION:return d("LSDataTraceTag").messageTypeSenderKeyDistribution;default:return d("LSDataTraceTag").messageTypeNone}}g.CONTEXT_BACKUP_UPLOAD=i;g.CONTEXT_MEDIA_BACKUP=j;g.CONTEXT_VESTA_REGISTRATION=k;g.CONTEXT_VESTA_LOGIN=l;g.createTraceId=m;g.stringToTraceId=a;g.startNewTrace=b;g.recordCheckpointForTrace=n;g.recordFailureAndFlushForTraceId=e;g.recordSuccessAndFlushForTraceId=f;g.recordInvalidUploadRequestAndFlushTrace=o;g.getTagForMsgType=p}),98);
__d("MAWEncryptedBackupUtils",["FBLogger","I64","LSAuthorityLevel","LSDataTraceCheckPoint","LSDict","LSIntEnum","LSShape","LSVec","MAWTraceUtils","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,c,e,f){d("MAWTraceUtils").recordCheckpointForTrace(a,b,c,e,f)}function a(a,b,e){j(b,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_WEB_GET_BACKUP_TENANCY),[],!1);return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.secure_encrypted_backups_client_state)).then(function(a){return k(a,e)})}function k(a,b){var e;if(a==null){b!=null&&b.addPoint("get_backup_tenancy_null_client_state_row");return}e=(e=a.backupTenancy)!=null?e:(i||(i=d("I64"))).one;a=a.authorityLevel;b!=null&&b.addPoint("get_backup_tenancy",{"int":{authorityLevel:(i||(i=d("I64"))).to_int32(a!=null?a:(i||(i=d("I64"))).zero),backupTenancy:i.to_int32(e!=null?e:(i||(i=d("I64"))).zero)}});if(e!=null&&(i||(i=d("I64"))).equal((h||(h=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),a))return e}function b(a,b){var d=new Set(),e=a.length;for(a of a.entries()){var f=a[0],g=a[1];d.has(g)&&c("FBLogger")("wmi_eb").warn("Duplicate messages returned from server for restoreType: %s, index: %s of batchSize: %s",b,f,e);d.add(g)}}function e(a){a=a.map(function(a){var b=a.toplevelProtobuf;b=d("LSShape").ofRecord({decrypted_protobuf:b.decryptedProtobuf,protobuf_timestamp_ms:(i||(i=d("I64"))).of_float(b.protobufTimestampMS)});var e=new(c("LSDict"))();a.supplementalProtobufs.forEach(function(a,b){e.set(b,d("LSShape").ofRecord({decrypted_protobuf:a.decryptedProtobuf,protobuf_timestamp_ms:(i||(i=d("I64"))).of_float(a.protobufTimestampMS)}))});return d("LSShape").ofRecord({otid:a.otid,supplemental_protobufs:e,toplevel_protobuf:b})});return c("LSVec").ofArray(a)}function f(a){a=c("LSVec").toArray(a);a=a.map(function(a){return d("LSShape").toRecord(a)});return a.map(function(a){var b=d("LSShape").toRecord(a.toplevel_protobuf);b={decryptedProtobuf:b.decrypted_protobuf,protobufTimestampMS:(i||(i=d("I64"))).to_float(b.protobuf_timestamp_ms)};var c=new Map(),e=a.supplemental_protobufs;e.forEach(function(a,b){a=d("LSShape").toRecord(a);c.set(b,{decryptedProtobuf:a.decrypted_protobuf,protobufTimestampMS:(i||(i=d("I64"))).to_float(a.protobuf_timestamp_ms)})});return{otid:a.otid,supplementalProtobufs:c,toplevelProtobuf:b}})}g.getBackupTenancy=a;g.getBackupTenancyFromClientStateRow=k;g.logIfDuplicateMessagesFoundInRestore=b;g.convertJSTypesToLSTypesForRestoreJob=e;g.convertLSTypesToJSTypesForRestoreJob=f}),98);
__d("EBIsEbEnabled",["EBDeps","EBReadyNotifier","FBLogger","I64","LSEncryptedBackupsBackupTenancy","LSIntEnum","MAWEBSwitch","MAWEncryptedBackupUtils","WAResultOrError"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,e){return d("EBReadyNotifier").waitForEBReady().then(function(){return d("MAWEncryptedBackupUtils").getBackupTenancy(a,b,e)}).then(function(a){return a!=null&&(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION))})}function a(){try{return d("WAResultOrError").makeResult(c("MAWEBSwitch").isEnabled())}catch(a){c("FBLogger")("wmi_eb").catching(a).mustfix("Failed to check EB enabled");return d("WAResultOrError").makeResult(!1)}}async function b(){var a=await d("EBDeps").getDeps().getLSDB();return j(a.tables)}g.isEbEnabledLS=j;g.isEbEnabledEbSwitch=a;g.isEBEnabled=b}),98);
__d("EBIsEbEnabledSubscriber",["EBDeps","EBIsEbEnabled","I64","LSEncryptedBackupsBackupTenancy","LSIntEnum","ReQL","WAPubSub"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(){function a(a){this.$1=d("WAPubSub").simplePubSub(),this.$4=a,this.$2=!1}var b=a.prototype;b.initialize=async function(){this.$2=await d("EBIsEbEnabled").isEbEnabledLS(this.$4.tables),this.$5(this.$4)};b.$6=function(a){this.$2=a,this.$1.publish(a)};b.$5=function(a){var b=this;this.$3==null&&(this.$3=d("ReQL").fromTableAscending(a.tables.secure_encrypted_backups_client_state).take(1).subscribe(function(a,e){e.operation==="delete"&&b.$6(!1),(e.operation==="add"||e.operation==="put")&&(e.value.backupTenancy!=null&&(h||(h=d("I64"))).equal(e.value.backupTenancy,(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION))?b.$6(!0):b.$6(!1))}));return this.$3};b.subscribe=function(a){return this.$1.subscribe(a)};b.isEnabled=function(){return this.$2};return a}(),k;async function l(a){if(k!=null)return Promise.resolve();k=new j(a);await k.initialize()}async function a(){if(k==null){var a=await d("EBDeps").getDeps().getLSDB();await l(a)}return k}async function b(a){if(k==null){var b=await d("EBDeps").getDeps().getLSDB();await l(b)}a(k.isEnabled());b=k.subscribe(a);return b}async function e(){if(k==null){var a=await d("EBDeps").getDeps().getLSDB();await l(a)}return k.isEnabled()}g.initIsEbEnabledPubSub=l;g.isEbEnabledSubscriber=a;g.subscribeToEbChanges=b;g.isEBEnabledValueFromSubscriber=e}),98);
__d("LSAppendDataTraceAddonStoredProcedure",["LSAppendDataTraceAddon","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSAppendDataTraceAddon"),e.dataTraceId,e.checkPointId,e.syncChannel,e.errorMessage,e.tags);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWEBRestoreTrackingUtils",["LSIntEnum","LSMEBTaskCreationSource","MAWQplProxy","MWEBODSEntityName.enum","ODS","QPLUserFlow","WAHashStringToNumber","justknobx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j={dyi:c("justknobx")._("467"),frontloaded:20,initial:20,paginated:c("justknobx")._("3177"),point:1,search:c("justknobx")._("2477")};function a(a,b,e,f){b!=null&&p({querySource:e,runningInWorker:f!=null?f:!1,taskSource:a,traceId:b,triggerType:"paginated"}),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.paginated")}function b(a){var b=a.querySource,e=a.runningInWorker,f=a.taskSource;a=a.traceId;a!=null&&p({querySource:b,runningInWorker:e!=null?e:!1,taskSource:f,traceId:a,triggerType:"initial"});(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.initial")}function e(a,b,e){b!=null&&p({querySource:"LS",runningInWorker:e!=null?e:!1,taskSource:a,traceId:b,triggerType:"dyi"}),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.dyi")}function f(a,b,e){b!=null&&p({querySource:"LS",runningInWorker:e!=null?e:!1,taskSource:a,traceId:b,triggerType:"frontloaded"}),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.frontloaded")}function k(a,b,e,f){b!=null&&p({querySource:e,runningInWorker:f!=null?f:!1,taskSource:a,traceId:b,triggerType:"point"}),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.point")}function l(a){var b=a.querySource,e=a.runningInWorker;a=a.traceId;a!=null&&p({querySource:b,runningInWorker:e!=null?e:!1,taskSource:c("LSMEBTaskCreationSource").FTS_INDEX_EB_MESSAGES_WEB,traceId:a,triggerType:"search"});(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.search")}function m(a,b){a!=null&&(b!=null&&b?d("MAWQplProxy").sendQPLSuccessThroughBridge(c("qpl")._(521476165,"2432"),void 0,d("WAHashStringToNumber").hashStringToNumber(a)):c("QPLUserFlow").endSuccess(c("qpl")._(521476165,"2432"),{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.decryption.success")}function n(a,b,e,f){e===void 0&&(e="restore_failure"),a!=null&&(b!=null&&b?d("MAWQplProxy").sendQPLFailThroughBridge(c("qpl")._(521476165,"2432"),e,f,d("WAHashStringToNumber").hashStringToNumber(a)):c("QPLUserFlow").endFailure(c("qpl")._(521476165,"2432"),e,{annotations:f,instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.decryption.failure")}function o(a){u("protobuf",a)}function p(a){var b=a.querySource,e=a.runningInWorker,f=a.taskSource,g=a.traceId;a=a.triggerType;if(e!=null&&e){var h;d("MAWQplProxy").startQplUserFlow(c("qpl")._(521476165,"2432"),{bool:{runningInWorker:e===!0},"int":{requestedMessagesCount:(h=j[a])!=null?h:10},string:{querySource:b,taskSource:v(f),traceId:g,triggerType:a}},{providedInstanceKey:d("WAHashStringToNumber").hashStringToNumber(g),providedTimeoutInMs:c("justknobx")._("2950")})}else{c("QPLUserFlow").start(c("qpl")._(521476165,"2432"),{annotations:{bool:{runningInWorker:e===!0},"int":{requestedMessagesCount:(h=j[a])!=null?h:10},string:{querySource:b,taskSource:v(f),traceId:g,triggerType:a}},instanceKey:d("WAHashStringToNumber").hashStringToNumber(g),timeoutInMs:c("justknobx")._("2950")})}}function q(a){var b=a.pointName;a=a.traceId;c("QPLUserFlow").addPoint(c("qpl")._(521476165,"2432"),b,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})}function r(a){var b=a.annotations,e=a.pointName;a=a.traceId;c("QPLUserFlow").addAnnotations(c("qpl")._(521476165,"2432"),b,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)});c("QPLUserFlow").addPoint(c("qpl")._(521476165,"2432"),e,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})}function s(a){var b=a.annotations,e=a.pointName;a=a.traceId;a!=null&&d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(521476165,"2432"),e,{annotations:b,instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})}function t(a){var b=a.pointName;a=a.traceId;d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(521476165,"2432"),b,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})}function u(a,b){b=b?(i||(i=d("LSIntEnum"))).unwrapIntEnum(b):null;(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore."+a+"."+v(b))}function v(a){return(a=a==null?void 0:a.toString())!=null?a:"unknown"}g.markEBRestorePaginated=a;g.markEBRestoreInitial=b;g.markEBRestoreDYI=e;g.markEBRestoreFrontloaded=f;g.markEBRestorePoint=k;g.markEBRestoreSearch=l;g.markEBRestoreSuccess=m;g.markEBRestoreFail=n;g.markEBRestoreProtobuf=o;g.addQPLRestorePoint=q;g.addQPLRestorePointWithAnnotations=r;g.addQPLRestorePointWithAnnotationsWorker=s;g.addQPLRestorePointWorker=t}),98);
__d("OfflineThreadingId",["I64","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("I64"))).of_string("4194303");function a(){return(h||(h=d("I64"))).to_string(j())}function j(){var a=d("XPlatReactCrypto").getRandomValues(new Uint8Array(8));a=new DataView(a.buffer);a=(h||(h=d("I64"))).add(h.lsl_(h.of_int32(a.getUint32(0)),32),h.of_int32(a.getUint32(4)));return k(Date.now(),a)}function k(a,b){return(h||(h=d("I64"))).and_(h.or_(h.lsl_(h.of_float(a),22),h.and_(b,i)),h.max_int)}function b(a){var b=j(),c=[];for(var e=0;e<a.length;e++)c.push([a[e],(h||(h=d("I64"))).to_string(b)]),b=l(b);return c}function l(a,b){b===void 0&&(b=(h||(h=d("I64"))).one);var c=m(a);a=n(a);return k(c,(h||(h=d("I64"))).add(a,b))}function m(a){return(h||(h=d("I64"))).to_float(h.lsr_(a,22))}function n(a){return(h||(h=d("I64"))).and_(a,i)}g.createOfflineThreadingID=a;g.createForItemsInOrder=b;g.createNewFromExisting=l;g.extractTimestamp=m}),98);
__d("PublicEncryptionCreateEncryptedData",["CryptoLogger","Promise","PublicKeyEncryptionUtils","RetUtil","UInt8Array","XPlatReactCrypto","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("PublicKeyCrypto").__setRef("PublicEncryptionCreateEncryptedData"),j=c("requireDeferred")("X25519").__setRef("PublicEncryptionCreateEncryptedData");function k(a,b){if(a.byteLength>32)return b("PSK is too long")}function l(a,c){return new(h||(h=b("Promise")))(function(b,e){d("PublicKeyEncryptionUtils").assertValidCurvePoint(c,e);k(a,e);return b()})}function a(a,c,e,f,g,k){var m=new Uint8Array([1]),n=new Uint8Array(g),o=d("PublicKeyEncryptionUtils").getSalt(f),p=new Uint8Array(a),q=new Uint8Array(c),r=new Uint8Array(e);return(h||(h=b("Promise"))).all([d("PublicKeyEncryptionUtils").assertKeyLength(p),d("PublicKeyEncryptionUtils").assertKeyLength(q),d("PublicKeyEncryptionUtils").assertKeyLength(r)]).then(function(){return l(o,p)}).then(function(){return j.load()}).then(function(a){var c=a.generateKeys(a.KeyPurpose.Encryption),e=c.pk,f=d("PublicKeyEncryptionUtils").concatAad(m,q,p,e,n);e=function(c,d,e){c=a.publicKeyFromBytes(c,a.KeyPurpose.Encryption);d=a.publicKeyFromBytes(d,a.KeyPurpose.Encryption);e=a.secretKeyFromBytes(e,a.KeyPurpose.Encryption);return c==null||d==null||e==null?(h||(h=b("Promise"))).resolve():(h||(h=b("Promise"))).resolve([c,d,e])};return e(p,q,r).then(function(a){return a==null?null:{ephemeralPriv:c.sk,ephemeralPubBytes:c.pk,innerAad:f,receiverPub:a[0],senderPriv:a[2],senderPub:a[1]}})}).then(function(a){if(a==null)return;var b=a.ephemeralPubBytes,c=a.ephemeralPriv,e=a.senderPriv,f=a.receiverPub,g=a.innerAad;return i.load().then(function(a){return a.senderDeriveSharedSecret(e,c,f)}).then(function(a){if(a==null)return;return d("PublicKeyEncryptionUtils").getAesKey(a,o,g,"encrypt")}).then(function(a){if(a==null)return;var b=new Uint8Array(12).buffer;return d("XPlatReactCrypto").subtleEncrypt({additionalData:g,iv:new Uint8Array(b),name:"AES-GCM",tagLength:128},a,k)}).then(function(a){if(a==null)return;a=new Uint8Array(a);return d("UInt8Array").concatBytes([m,b,a]).buffer})}).then(function(a){return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult(a))})["catch"](function(a){var c=d("CryptoLogger").CryptoLogger("public_encryption_create_encrypted_data");d("CryptoLogger").captureError(c,a).mustfix("Creation of encrypted data for public encryption failed");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult(void 0))})}g["default"]=a}),98);
__d("ReQLTable",[],(function(a,b,c,d,e,f){"use strict";async function a(a,b,c){var d=await a.get.apply(a,b);c=c(d);await a.upsert(b,c)}f.update=a}),66);
__d("updateAndFlushLSDataTrace",["FBLogger","I64","LSAppendDataTraceAddonStoredProcedure","LSDataTraceCheckPoint","LSFactory","LSIntEnum","Promise","ReQLTable","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=c("requireDeferred")("LSDataTraceFlush").__setRef("updateAndFlushLSDataTrace");function a(a,e){return e==null?(j||(j=b("Promise"))).resolve():c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").CLIENT_READY_TO_FLUSH),dataTraceId:e,syncChannel:(i||(i=d("I64"))).neg_one}).then(function(){return d("ReQLTable").update(a.data_trace_meta,[e],function(a){if(a!=null)return{contextOne:a.contextOne,contextThree:a.contextThree,contextTwo:a.contextTwo,foregroundTimestampMs:a.foregroundTimestampMs,initTimestampMs:a.initTimestampMs,predefinedId:a.predefinedId,shouldFlush:!0,traceId:a.traceId,traceType:a.traceType};else throw c("FBLogger")("messenger_web").mustfixThrow('Data trace is missing, id: "%s"',e)}).then(function(){return k.load().then(function(b){return b.flush(a,e)})})})}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("WorkerRelayNetwork",["ActorURIConfig","MAWCurrentUser","RelayAPIConfig","WAResolvable","createRelayFBNetwork","createRelayFBNetworkFetch","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("WAResolvable").Resolvable)();function a(){var a=i(d("MAWCurrentUser").getID());a={execute:a.execute};h.resolve(a);return a}function b(){return h.promise}function i(a,b){b={actorID:a,batchResponseChunks:!0,getAdditionalData:function(){var b={};a!=null&&(b[c("ActorURIConfig").PARAMETER_ACTOR]=a);c("RelayAPIConfig").useXController===!1&&c("RelayAPIConfig").accessToken!==""&&(b.access_token=c("RelayAPIConfig").accessToken);return b},graphURI:b};b=c("createRelayFBNetworkFetch")(b);var e=function(a,b,c){return d("relay-runtime").Observable.create(function(a){return a.complete()})};return c("createRelayFBNetwork")(b,e,null,null)}g.createWorkerNetworkExecute=a;g.getWorkerNetworkExecute=b}),98);
__d("executeGraphQLQuery",["DTSG","FBLogger","MAWBridge","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";async function a(a,b,e){b=d("relay-runtime").getRequest(b);if(b.params.operationKind==="subscription")throw c("FBLogger")("messenger_web").mustfixThrow("executeGraphQLQuery: Expected query or mutation operation");var f={force:!0},g=d("DTSG").getToken();if(g==null||g===""||typeof g!=="string"){g=await d("MAWBridge").getBridge().sendAndReceive("event","getDTSGToken").catch(function(a){throw c("FBLogger")("messenger_web").mustfixThrow("executeGraphQLQuery: Failed to get DTSG token from the main thread",a)});if(g==null||g===""||typeof g!=="string")throw c("FBLogger")("messenger_web").mustfixThrow("executeGraphQLQuery: Received an empty DTSG token from the main thread");d("DTSG").setToken(g)}g=d("relay-runtime").createOperationDescriptor(b,e,f);return a.execute(g.request.node.params,g.request.variables,f)}g.executeGraphQLQuery=a}),98);
__d("MAWRotateDTSG",["CSRFGuard","DTSG","MWFBLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("MWFBLogger").MWLogger().tags(["RotateDTSG"]),k=async function(){var a,b;j.DEBUG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Getting new DTSG token"])));var c=new Request("/ajax/dtsg/?__a=true",{credentials:"include",method:"GET"});c=await self.fetch(c);if(c.status!==200)throw j.mustfixThrow("Unable to get new DTSG token: "+c.status);c=await c.text();c=d("CSRFGuard").clean(c);var e=JSON.parse(c),f=e==null||(a=e.payload)==null?void 0:a.token;e=e==null||(b=e.payload)==null?void 0:b.valid_for;if(f==null||e==null)throw j.mustfixThrow("DTSG response is not valid: "+c+"'");return{token:f,validFor:e}},l=null;async function m(){self.clearTimeout(l);try{var a=await k(),b=a.token;a=a.validFor;l=self.setTimeout(m,a/2*1e3);d("DTSG").setToken(b);return!0}catch(a){j.catching(a).MUSTFIX(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Error rotating DTSG"])));l=self.setTimeout(m,10*60*1e3);return!1}}g.getNewDTSG=k;g.tryRotateDTSG=m}),98);
__d("WARetryableError",["WACustomError"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(b){var c;c=a.call(this,"see error at this.source")||this;c.source=b;return c}babelHelpers.inheritsLoose(b,a);return b}(d("WACustomError").customError("RetryableError"));g["default"]=a}),98);
__d("createWorkerQuery",["FBLogger","IGDWebUtils","MAWRotateDTSG","WARetryableError","WorkerRelayNetwork","executeGraphQLQuery","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";async function a(a,b,e){var f=d("relay-runtime").getRequest(a);if(f.params.operationKind!=="query")throw c("FBLogger")("messenger_web").mustfixThrow("createWorkerQuery: Expected query operation");f=await d("WorkerRelayNetwork").getWorkerNetworkExecute();e==null||e.onExecute==null||e.onExecute();var g=d("IGDWebUtils").isOnInstagramWeb();f=await d("executeGraphQLQuery").executeGraphQLQuery(f,a,b).then(function(a){return a.toPromise()}).then(function(a){e==null||e.onResponse==null||e.onResponse(a);return Array.isArray(a)?a[0].data:(a=a.data)!=null?a:null}).catch(function(a){if(("code"in a&&a.code===1357004||"message"in a&&a.message.indexOf("1357004")!==-1||typeof a==="string"&&a.indexOf("1357004")!==-1)&&!g){c("FBLogger")("messenger_web").info("Failed with expired DTSG, attempting to rotate.");return d("MAWRotateDTSG").tryRotateDTSG().then(function(b){if(b)throw new(c("WARetryableError"))(a);throw a})}throw a});return f}g.default=a}),98);
__d("MAWEARGenNewKeychainCryptoKey",["FBLogger","MAWCryptoConsts","MAWKeychainCrypto","MAWWebInitDataHelpers","MessengerWebInitData","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";async function a(){try{var a,b=d("MAWWebInitDataHelpers").getLastAccountKeyFormatVersion(),e=(await (a=d("MAWKeychainCrypto")).getAccountKeys(b))[0],f=a.genBrowserEncryptionKeyString(),g=a.genDatabaseEncryptionSeed();e=await a.encryptDataToStringBuffer(e,g);g=d("WATimeUtils").castToUnixTime(d("WATimeUtils").unixTime()+d("MAWCryptoConsts").ENC_KEY_TTL);return{accountKeyString:await a.generateHashString(d("MAWWebInitDataHelpers").getAccountKeysString(b)[0]),appIdOrigin:c("MessengerWebInitData").appId,expiration:g,formatVersion:b,key:f,seed:e,userKeyBaseString:await a.generateHashString(c("MessengerWebInitData").userKeyBase)}}catch(a){throw c("FBLogger")("messenger_web").catching(a).mustfixThrow("Failed to generateNewKey")}}g.default=a}),98);
__d("MAWEARKeychainDecryptionError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){function b(b){var c;c=a.call(this,b)||this;c.name="MAWEARKeychainDecryptionError";c.message=b;return c}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));f["default"]=a}),66);
__d("MAWWorkerSetupArgs",[],(function(a,b,c,d,e,f){"use strict";var g=null;function a(a){g=a}function b(){return g}function c(){g=null}f.setWorkerSetupArgs=a;f.getWorkerSetupArgs=b;f.resetWorkerSetupArgs=c}),66);
__d("MAWGenKeychainCryptoKeyWithVersion",["ExecutionEnvironment","FBLogger","MAWCurrentUser","MAWEARKeychainDecryptionError","MAWKeychainCrypto","MAWWebInitDataHelpers","MAWWorkerSetupArgs","MessengerWebInitData","getErrorSafe"],(function(a,b,c,d,e,f,g){"use strict";var h;async function a(a,b,e,f,g,i,j){f===void 0&&(f=1);try{var k=await d("MAWKeychainCrypto").getAccountKeys(f);a=await Promise.all([d("MAWKeychainCrypto").importBrowserEncryptionKey(a),Promise.all(k.map(function(a){return d("MAWKeychainCrypto").decryptDataToArrayBuffer(a,b).catch(function(){return null})}))]);var l=a[0];k=a[1];a=await Promise.all(k.filter(Boolean).map(function(a){return d("MAWKeychainCrypto").genDatabaseEncryptionKey(l,a).catch(function(){return null})}));k=a.filter(Boolean);if(k.length===0)throw new(c("MAWEARKeychainDecryptionError"))("Failed to generate keys from seed");return{keys:k,version:e}}catch(b){a=null;k=null;e=d("MAWWorkerSetupArgs").getWorkerSetupArgs();(h||(h=c("ExecutionEnvironment"))).isInWorker&&e!=null&&(a=e.userKeyBase===c("MessengerWebInitData").userKeyBase,k=e.fbId===d("MAWCurrentUser").getID());e=d("MAWWebInitDataHelpers").getAccountKeysString(f);var m=e&&e[0]!=null?await d("MAWKeychainCrypto").generateHashString(e[0]):null;c("FBLogger")("messenger_web").catching(c("getErrorSafe")(b)).mustfix("Failed to genKeyWithVersion: accountKeyBackfilled = %s; accountKeyExists = %s; acccountKeyMatches = %s; userKeyBaseBackilled = %s; userKeyBaseExists = %s; userKeyBaseMatches = %s; appIdOrigin = %s; appIdInitData = %s; userIdMatches = %s; isInWorker = %s; userKeyBase_match_between_threads = %s; userId_match_between_threads = %s; formatVersion = %s;",g!=null,e!=null,g===m,i!=null,c("MessengerWebInitData").userKeyBase!=null,i===await d("MAWKeychainCrypto").generateHashString(c("MessengerWebInitData").userKeyBase),j,c("MessengerWebInitData").appId,d("MAWCurrentUser").getID()===String(c("MessengerWebInitData").userId),(h||(h=c("ExecutionEnvironment"))).isInWorker,a,k,f);throw b}}g.default=a}),98);
__d("MAWIndexedDBDeletion",["CurrentMessengerUser","FBLogger","MAWIndexedDbMetadata"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){return indexedDB==null||a==null?Promise.resolve():new Promise(function(d,e){var f=indexedDB.deleteDatabase(a);f.onsuccess=function(){c("FBLogger")("maw_db").warn("%s db was deleted",b),d()};f.onblocked=function(){c("FBLogger")("maw_db").mustfix("Cannot delete %s db: blocked. Make sure DB is closed.",b)};f.onerror=function(){c("FBLogger")("maw_db").mustfix("Cannot delete %s db",b),e(f.error)}})}async function a(){var a,b=d("CurrentMessengerUser").getID();await Promise.all([h((a=d("MAWIndexedDbMetadata")).dbName(b),"maw_v1"),h(a.restoreDbName2(b),"maw_v3"),h(a.jobsDbName(b),"signal"),h(a.logDbName(b),"logDb")])}g.deleteDB=h;g.deleteMAWPersistence=a}),98);
__d("WAWorkerGlobalScope",[],(function(a,b,c,d,e,f){"use strict";a=function(){if(typeof window!=="undefined")return window;return typeof globalThis!=="undefined"?globalThis:self}();f.workerGlobalScope=a}),66);
__d("MAWJobsIndexedDb",["FBLogger","MAWCurrentUser","MAWErrorObject","MAWIndexedDbMetadata","MAWQplProxy","MAWTransactionMode","Promise","WAExceededStorageQuota","WALogger","WAWorkerGlobalScope","emptyFunction","promiseDone","qex","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=null,k=null,l="jobs";function m(){return c("qex")._("940")}function n(){if(j==null)throw c("FBLogger")("messenger_web").mustfixThrow("JobDB IndexDB should've been initialized");return j}function o(){if(k==null)throw c("FBLogger")("messenger_web").mustfixThrow("JobDB IndexDB should've been initialized");return k.then(function(){return n()})}function a(){return j!=null}var p=[function(a){a=a.target.result;a=a.createObjectStore(l,{autoIncrement:!0,keyPath:"jobId"});a.createIndex("uniqKey","uniqKey")},c("emptyFunction"),c("emptyFunction")];function e(a){k=null;j=null;return q(a).then(function(){return j.version})}function q(a){if(k!=null)return k;if(j!=null)return(i||(i=b("Promise"))).resolve();var e=d("MAWCurrentUser").getID(),f=d("MAWIndexedDbMetadata").jobsDbName(e),g=(e=a!=null?a:m())!=null?e:p.length,l=c("qpl")._(25310776,"6155");k=new(i||(i=b("Promise")))(function(a,b){var c=indexedDB.open(f,g);c.onupgradeneeded=function(a){for(var b=0;b<p.length;b++){var c=p[b],d=b+1;r(a,d)&&c(a)}};c.onsuccess=function(b){var c=b.target.result;c.onversionchange=function(){var a;d("MAWQplProxy").sendQplPointThroughBridge(l,"database_jobs_db_versionchange");d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[JobsDb initialization] upgradeneeded is triggered in another worker. This should not happen."])));c.close();(a=d("WAWorkerGlobalScope").workerGlobalScope.location)==null||a.reload==null||a.reload()};j=c;d("MAWQplProxy").sendQplPointThroughBridge(l,"database_jobs_db_ready");a()};c.onerror=function(){d("MAWQplProxy").sendQplPointThroughBridge(l,"database_jobs_db_failed"),b(c.error)}});return k}function r(a,b){var c=a.newVersion;a=a.oldVersion;return a<b&&c>=b}function s(a){return a===d("MAWTransactionMode").READWRITE?"readwrite":"readonly"}function f(a,b,e,f){var g=s(b);return function(b){return function(){for(var h=arguments.length,i=new Array(h),l=0;l<h;l++)i[l]=arguments[l];var m=f!=null?d("MAWQplProxy").startQplUserFlow(f):null,n=function(f){return o().then(function(c){var e=function(b){b=c.transaction(a,b!=null?s(b):g,{durability:"relaxed"});d("WAExceededStorageQuota").listenToQuotaExceededError(b);return b.objectStore(a)};return b.apply(void 0,[e].concat(i))}).then(function(a){m==null||m.endSuccess();return a})["catch"](function(b){m==null||m.endFail("job_transaction_fail");b=d("MAWErrorObject").getErrorObject(b);if((b==null?void 0:b.name)==="InvalidStateError"&&f===1){k=null;j=null;c("promiseDone")(q());return n(f-1)}if(b instanceof Error)throw c("FBLogger")("maw_db").catching(b).mustfixThrow("%s:%s - Error performing transaction in jobDB transactor v2",e,a);throw c("FBLogger")("maw_db").mustfixThrow("%s:%s - Error performing transaction in jobDB transactor v2",e,a)})};return n(1)}}}g.getJobsDbVersion=m;g.getJobDB=n;g.isJobDBInitted=a;g.dbMigrations=p;g.makeJobsDbIgnoringPreviousCreations=e;g.makeJobsDb=q;g.makeJobsTransactor=f}),98);
__d("MWEARKeychainV3Errors",[],(function(a,b,c,d,e,f){"use strict";a=function(a){function b(b){var c;c=a.call(this,b)||this;c.name="EARKeychainNotFoundError";c.message=b;return c}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));f.EARKeychainNotFoundError=a}),66);
__d("MWTabCommunicationChannel",["MAWLocalStorage"],(function(a,b,c,d,e,f,g){"use strict";var h=typeof window!=="undefined"?window:self;function i(a){var b=d("MAWLocalStorage").getStorage(),c=function(c){d("MAWLocalStorage").setItemGuarded(b,a,JSON.stringify(c))},e=function(c){window.removeEventListener("storage",c),d("MAWLocalStorage").removeItemGuarded(b,a)},f=function(a){window.addEventListener("storage",a)},g=function(b){return b!=null&&b.key===a&&typeof b.newValue==="string"?JSON.parse(b.newValue):null};return{getMessage:g,onRequestReceived:function(a){var b=function(b){b=g(b);b!=null&&a(b)};f(b);return{release:function(){e(b)}}},sendMessage:c,stopWaitingForReply:e,waitForReply:f}}function j(a){var b=new h.BroadcastChannel(a),c=new Set();b.addEventListener("message",function(a){c.forEach(function(b){b(a)})});var d=function(a){c.add(a)},e=function(a){c["delete"](a)};a=function(a){b.postMessage(JSON.stringify(a))};var f=function(a){return a!=null&&typeof a.data==="string"?JSON.parse(a.data):null};return{getMessage:f,onRequestReceived:function(a){var b=function(b){b=f(b);b!=null&&a(b)};d(b);return{release:function(){e(b)}}},sendMessage:a,stopWaitingForReply:e,waitForReply:d}}function a(a){return h.BroadcastChannel!=null?j(a):i(a)}g.getChannel=a}),98);
__d("MWTabCommunication",["MWTabCommunicationChannel","Promise","clearTimeout","pageID","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a,b){var c=this;this.$2=null;this.$5=function(a){a=c.$4.getMessage(a);a!=null&&a.a==="sb"&&a.t!==c.tabID()&&a.r===c.tabID()&&a.k!=null&&(c.$2&&c.$2(a.k),c.$4.stopWaitingForReply(c.$5),c.$2=null)};this.$1=a;this.$3=b!=null?b:500;this.$4=d("MWTabCommunicationChannel").getChannel(a)}var e=a.prototype;e.tabID=function(){return c("pageID")};e.$6=function(){var a={a:"r",t:this.tabID()};this.$4.sendMessage(a)};e.listenToRequest=function(a){return this.listenToRequestAsync(function(){return(h||(h=b("Promise"))).resolve(a())})};e.listenToRequestAsync=function(a){var b=this,d=function(d){d.a==="r"&&d.t!==b.tabID()&&c("promiseDone")(a().then(function(a){a={a:"sb",k:a,r:d.t,t:b.tabID()};b.$4.sendMessage(a)}))};return this.$4.onRequestReceived(d)};e.$7=function(){var a=this;return new(h||(h=b("Promise")))(function(b){a.$2=b,a.$4.waitForReply(a.$5),a.$6()})};e.request=function(a,d){var e=this,f,g=function(){f!=null&&c("clearTimeout")(f)};return(h||(h=b("Promise"))).race([this.$7().then(function(b){e.$4.stopWaitingForReply(e.$5);return a(b)}),new h(function(a){f=c("setTimeout")(function(){a(d()),e.$4.stopWaitingForReply(e.$5)},e.$3)})]).then(function(a){g();return a})};return a}();g.MWTabCommunication=a}),98);
__d("MWEARKeychainV3",["$InternalEnum","Deferred","ExecutionEnvironment","FBLogger","LSPlatformLsInitLog","MAWCryptoConsts","MAWCurrentUser","MAWEARGenNewKeychainCryptoKey","MAWGenKeychainCryptoKeyWithVersion","MAWQplProxy","MAWReliabilityMonitor","MWEARKeychainV3Errors","MWTabCommunication","QPLUserFlow","Random","ReStoreTabNotifier","WAArrayBufferUtils","WAResultOrError","WATimeUtils","getErrorSafe","gkx","memoizeOneWithArgs","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(){return{accountKey:null,databaseEncryptionKeys:new Map(),dbReady:new(c("Deferred"))(),latestVersion:d("MAWCryptoConsts").VERSION}},j={global_ear:i(),maw_ear:i()},k=null,l=function(){var a=Object.keys(j).reduce(function(a,b){a[b]="none";return a},{});return{get:function(b){return a[b]},is:function(b,c){return a[b]===c},set:function(b,c){a[b]=c;(b=k)==null||b.updateState()}}}();function a(a){j[a]=i(),l.set(a,"none")}function e(a,b){l.set(a,b)}function m(a){var b=d("Random").uint32();while(a.some(function(a){return a.randomisedVersion===b}))b=d("Random").uint32();return b}var n={global_ear:function(){return null},maw_ear:function(){return null}},o=function(a){return n[a]()},p=function(a,b){n[a]=function(){return b}},q=function(a,b){p(a,b),v(a).dbReady.resolve()},r={global_ear:"browserEncryptionMetaV2",maw_ear:"encryptionMetaV3"},s=c("memoizeOneWithArgs")(function(a,b){return new(d("MWTabCommunication").MWTabCommunication)("ear_keys_"+b+"_"+a)});async function f(a,b,e){var f;e===void 0&&(e=K);c("gkx")("9396")&&c("FBLogger")("messenger_web").info("Initialise EAR keychain: %s",a);k=I(a);if(l.is(a,"success")&&v(a).databaseEncryptionKeys.size!==0)return d("WAResultOrError").makeResult(u(a));var g=d("MAWCurrentUser").getID(),i=c("ReStoreTabNotifier")("channel-ear-keychain-v3-"+g);i.onEventReceive("notifyEarKeychainV2",E);var j=(h||(h=c("ExecutionEnvironment"))).isInWorker?"Worker":"UI";e(a+"_ear_init_start",{string:(f={},f["initFlow_"+a+"_"+j]=b,f)});try{b=await J(i,a,void 0,e);e(a+"_ear_import_end");for(f of b)v(a).databaseEncryptionKeys.set(f.result.version,{dbEntry:f.entry,keys:f.result.keys});D(a);s(a,g).listenToRequest(function(){return JSON.stringify(Array.from(v(a).databaseEncryptionKeys.entries()).map(function(a){var b=a[0];a=a[1];var c=a.dbEntry;a=a.keys;return[b,{dbEntry:c,keys:a.map(function(a){return d("WAArrayBufferUtils").arrayBufferToString(a)})}]}))});e(a+"_ear_init_end",{string_array:(i={},i[a+"_randomisedVersionKeys"+j]=t(a).map(function(a){a[0];a=a[1].dbEntry;return String(a.randomisedVersion)}),i)});l.set(a,"success");return d("WAResultOrError").makeResult(u(a))}catch(b){l.set(a,"failure");e(a+"_ear_init_error");c("gkx")("9396")&&c("FBLogger")("messenger_web").catching(c("getErrorSafe")(b)).mustfix("Failed to setup EAR Keychain V3. Namespace: %s",a);return d("WAResultOrError").DEPRECATED_makeError("keychain-setup-failure",b)}}function t(a){return Array.from(v(a).databaseEncryptionKeys.entries())}function u(a){return v(a).latestVersion}function v(a){return j[a]}function w(a,b){var e=b!=null?b:u(a);b=v(a).databaseEncryptionKeys.get(e);if(b==null){c("promiseDone")(A(a).then(function(a){var b=a.map(function(a){return a.version}).includes(e);c("FBLogger")("messenger_web").info("EAR Keychain DB match found: %s. Version = %s. NumberVersions = %s",b,e,a.length)}));var f=u(a),g=Array.from(v(a).databaseEncryptionKeys.keys());c("FBLogger")("messenger_web").mustfix("EAR Key v%s was null. Latest version: %s has key: %s, keychain length: %s, currentLatestVersion: %s, init status %s, in worker %s",e,f,v(a).databaseEncryptionKeys.get(f)==null,v(a).databaseEncryptionKeys.size,Math.max.apply(Math,g),l.get(a),(h||(h=c("ExecutionEnvironment"))).isInWorker);throw new(d("MWEARKeychainV3Errors").EARKeychainNotFoundError)("EAR Key "+e+" was null.")}return{dbEntry:b.dbEntry,keys:b.keys,randomisedVersion:b.dbEntry.randomisedVersion,version:e}}function x(a){return c("MAWGenKeychainCryptoKeyWithVersion")(a.key,a.seed,a.version,a.formatVersion,a.accountKeyString,a.userKeyBaseString,a.appIdOrigin)}var y=b("$InternalEnum")({UNKNOWN:-1,NO_KEY:0,EBSM_EARV2_UPGRADE:1,RANDOMISED_VERSION_UPGRADE:2,EXPIRED_KEY:3,FORCE_KEY_ROTATION:4});function z(a){if(a.length===0)return{reason:y.NO_KEY,result:!0};a=a[a.length-1];return!d("WATimeUtils").isInFuture(a.expiration)?{reason:y.EXPIRED_KEY,result:!0}:{result:!1}}function A(a){var b=C(a,"readonly");return new Promise(function(c,d){b.onabort=function(){return d(b.error)};b.onerror=function(){return d(b.error)};var e=b.objectStore(r[a]).getAll();e.onsuccess=function(){return c(e.result)};e.onerror=function(){return d(e.error)}}).then(B)}function B(a){var b=a.find(function(a){return a.version==null});b!=null&&c("FBLogger")("messenger_web").mustfix("EAR Keychain Rotation null version: fields nonnull: %s %s %s %s %s %s",b.id==null,b.key==null,b.seed==null,b.formatVersion==null,b.accountKeyString==null,b.userKeyBaseString==null);b=a.filter(function(a){return a.version!=null});return b.sort(function(a,b){return a.version-b.version})}function C(a,b){var d=o(a);if(d==null)throw c("FBLogger")("messenger_web").mustfixThrow("Encryption IndexDB should've been initialized. Namespace: %s",a);return d.transaction(r[a],b,{durability:"strict"})}var D=function(a){var b=Array.from(v(a).databaseEncryptionKeys.keys());b.length>0?v(a).latestVersion=Math.max.apply(Math,b):c("FBLogger")("messenger_web").mustfix("EAR latest version does not exist")},E=function(a){var b=a.namespace,d=a.version;c("promiseDone")(async function(){try{c("FBLogger")("messenger_web").info("Received key rotation notification. Namespace: %s",b);await v(b).dbReady.getPromise();var a=(await A(b)).find(function(a){return a.version===d});if(a==null)throw c("FBLogger")("messenger_web").mustfixThrow("Notified new Ear Key but missing in DB");var e=await x(a);v(b).databaseEncryptionKeys.set(e.version,{dbEntry:a,keys:e.keys});D(b);c("FBLogger")("messenger_web").info("Rotated key successfully. Namespace: %s",b)}catch(a){return c("FBLogger")("messenger_web").catching(a).mustfix("Failed to handleNewVersion. In worker %s. Namespace: %s.",(h||(h=c("ExecutionEnvironment"))).isInWorker,b)}}())};function F(a){return l.get(a)!=="none"}function G(a){return l.get(a)}function H(a){if(l.is(a,"success")){v(a).databaseEncryptionKeys.size===0&&c("FBLogger")("messenger_web").mustfix("Keychain initialised but no keys present");return!0}return!1}function I(a){return d("MAWReliabilityMonitor").MAWReliabilityMonitorSingleton.startMonitoring("EARv3",function(){return{extra:{isKeychainInitialised:H(a).toString(),latestVersion:u(a).toString()},reason:l.get(a),state:function(){switch(l.get(a)){case"none":return d("MAWReliabilityMonitor").HealthReportState.PENDING;case"success":return d("MAWReliabilityMonitor").HealthReportState.OK;case"failure":return d("MAWReliabilityMonitor").HealthReportState.ERROR;default:return d("MAWReliabilityMonitor").HealthReportState.UNKNOWN}}()}})}async function J(a,b,d,e){var f=await c("MAWEARGenNewKeychainCryptoKey")();e(b+"_ear_raw_key_generated");var g=await new Promise(function(g,i){var j=C(b,"readwrite");j.onerror=function(){return i(j.error)};j.onabort=function(){return i(j.error)};var k=j.objectStore(r[b]).getAll();k.onerror=function(){return i(k.error)};k.onsuccess=function(){var l;e(b+"_ear_keys_fetched");var n=B(k.result),o=z(n),p=o.reason;o=o.result;if((d==null?void 0:d.forceKeyRotation)!==!0&&!o)return g(n);o=(d==null?void 0:d.forceKeyRotation)===!0?y.FORCE_KEY_ROTATION:p!=null?p:y.UNKNOWN;p=n.map(function(a){return a.version});l=(l=p[p.length-1])!=null?l:0;c("FBLogger")("messenger_web").info("Key rotation. EAR versions: %s. Latest version: %s. Namespace: %s, Worker: %s",p.toString(),l,b,(h||(h=c("ExecutionEnvironment"))).isInWorker);var q=babelHelpers.extends({},f,{randomisedVersion:m(n),source:o,version:l+1});e(b+"_ear_adding_new_key");j.oncomplete=function(){n.push(babelHelpers.extends({},q,{id:q.version})),a.postMessage("notifyEarKeychainV2",{namespace:b,version:q.version}),e(b+"_ear_gen_key_end"),g(n)};var s=j.objectStore(r[b]).add(q);s.onerror=function(){return i(c("FBLogger")("messenger_web").catching(s.error).mustfixThrow("Failed to rotate EAR key"))}}});e(b+"_ear_import_start");g=await Promise.allSettled(g.map(function(a){return x(a).then(function(b){return{entry:a,result:b}})}));var i=g[g.length-1];if(i.status==="rejected"){var j;j=(j=d==null?void 0:d.corruptedEARRetryCount)!=null?j:0;if(j>=1)throw i.reason;return J(a,b,{corruptedEARRetryCount:j+1,forceKeyRotation:!0},e)}return g.map(function(a){if(a.status==="fulfilled")return a.value}).filter(Boolean)}var K=function(a,b){d("LSPlatformLsInitLog").addPoint(a,b),L(a,b)},L=function(a,b){var e=c("qpl")._(25310776,"6155");(h||(h=c("ExecutionEnvironment"))).isInWorker?d("MAWQplProxy").sendQplPointThroughBridge(e,"backend_"+a,{annotations:b}):(c("QPLUserFlow").addPoint(e,"ui_"+a),b!=null&&c("QPLUserFlow").addAnnotations(e,b))};b=function(a,b){return s(a,b).request(function(b){b=JSON.parse(b);b.forEach(function(b){var c=b[0];b=b[1];var e=b.keys.map(d("WAArrayBufferUtils").stringToArrayBuffer);v(a).databaseEncryptionKeys.set(c,{dbEntry:b.dbEntry,keys:e})});D(a);l.set(a,"success");return!0},function(){return!1})};g.InitStatus=l;g.resetKeychain__TEST_ONLY_DO_NOT_USE=a;g.setInitStatus__TEST_ONLY_DO_NOT_USE=e;g.generateNewRandomisedVersionNumber=m;g.setNamespaceSourceDbWithoutMarkingDbReady=p;g.setNamespaceSourceDbAndMarkAsReady=q;g.getEncryptionKeysTabCommunication=s;g.init=f;g.getLatestVersion=u;g.getKeychain=v;g.getDbEncryptionKey=w;g.isKeychainSettled=F;g.getKeychainInitStatus=G;g.isKeychainInitialised=H;g.logMawInitPoint=L;g.importKeysFromOtherTab=b}),98);
__d("WATypedArraysCast",["WABase64"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(b instanceof a)return b;return typeof b==="string"?new a(d("WABase64").decodeB64(b)):new a(b)}g.castTypedArrays=a}),98);
__d("WACryptoHmac",["WACryptoDependencies","WATypedArraysCast"],(function(a,b,c,d,e,f,g){"use strict";var h=32,i=new Uint8Array(h),j={name:"HMAC",hash:"SHA-256"},k={name:"HMAC",hash:"SHA-512"},l={name:"HMAC",hash:"SHA-1"};function m(a,b){b=d("WATypedArraysCast").castTypedArrays(Uint8Array,b);return d("WACryptoDependencies").getCrypto().subtle.importKey("raw",b,a,!1,["sign"]).then(function(b){return{key:b,algo:a}})}function a(a){return m(j,a)}function n(a,b,c){var e=a.key;a=a.algo;return d("WACryptoDependencies").getCrypto().subtle.sign(a,e,b).then(function(a){return c!=null&&c!==0?a.slice(0,c):a})}function b(a,b){return m(j,a!=null?a:i).then(function(a){return n(a,b)})}function c(a,b,c){return m(j,a).then(function(a){return n(a,b,c)})}function e(a,b,c){return m(k,a).then(function(a){return n(a,b,c)})}function f(a,b,c){return m(l,a).then(function(a){return n(a,b,c)})}g.SHA256_BYTE_LENGTH=h;g.DEFAULT_SALT=i;g.encodeKeySha256=a;g.sign=n;g.extractSha256=b;g.hmacSha256=c;g.hmacSha512=e;g.hmacSha1=f}),98);
__d("WACryptoHkdf",["Promise","WABinary","WACryptoHmac","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i=255*d("WACryptoHmac").SHA256_BYTE_LENGTH;function j(a,e,f){if(f<0||f>i)return(h||(h=b("Promise"))).reject(c("err")("HKDF::expand given bad length "+f));var g,j=Math.ceil(f/d("WACryptoHmac").SHA256_BYTE_LENGTH),k=d("WABinary").Binary.build(e).readByteArrayView(),l=new(d("WABinary").Binary)(),m=d("WACryptoHmac").encodeKeySha256(a).then(function(a){g=a;return new Uint8Array(0)});e=function(a){m=m.then(function(b){return d("WACryptoHmac").sign(g,d("WABinary").Binary.build(b,k,a).readByteArrayView())}).then(function(a){a=new Uint8Array(a);l.writeByteArray(a);return a})};for(a=1;a<=j;a++)e(a);return m.then(function(){return l.readBuffer(f)})}function a(a,b,c){return d("WACryptoHmac").extractSha256(null,a).then(function(a){return j(new Uint8Array(a),b,c)})}function e(a,b,c,e){return d("WACryptoHmac").extractSha256(b,a).then(function(a){return j(new Uint8Array(a),c,e)})}g.expand=j;g.extractAndExpand=a;g.extractWithSaltAndExpand=e}),98);
__d("WADbDeviceRegistration",["gkx"],(function(a,b,c,d,e,f,g){"use strict";a=25;b=6;d=b;e="https://reg-e2ee.facebook.com";f=c("gkx")("13108")?"https://reg-e2ee.messenger.com":e;c="https://v.whatsapp.net";var h="https://reg-e2ee.instagram.com",i="/v2/fb_icdc_fetch",j="/v2/fb_register_v2",k="Device has already been registered to WA servers",l="Device registration finished successfully",m="Device registration retries failed "+b+" times. No longer attempting registration.",n="Device registration response was null",o="Current user id is zero",p="CryptoAuthToken is empty",q="CryptoAuthToken is expired",r={failed:"failed",finished:"finished"};g.MAX_USERS_FOR_NOTIFY_DEVICE_CHANGE=a;g.MAX_DEVICE_REGISTRATION_RETRIES=b;g.MAX_ROTATE_CRYPTO_AUTH_TOKEN_RETRIES=d;g.REG_FB_DOMAIN=e;g.REG_MSGR_DOMAIN=f;g.REG_WA_DOMAIN=c;g.REG_IGD_DOMAIN=h;g.ICDC_ENDPOINT=i;g.REGISTRATION_ENDPOINT=j;g.DEVICE_ALREADY_REGISTERED=k;g.DEVICE_SUCCESSFULLY_REGISTERED=l;g.FAILED_REGISTRATION_RETRIES=m;g.NULL_RESPONSE_FROM_SERVER=n;g.DEVICE_REGISTER_ERROR_ZERO_AS_USER_ID=o;g.DEVICE_REGISTER_ERROR_EMPTY_CAT_TOKEN=p;g.DEVICE_REGISTER_ERROR_EXPIRED_CAT_TOKEN=q;g.RegistrationStatesEnum=r}),98);
__d("WAPromiseBackoffs",["Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){if(a===0)return 0;var c=o(b.algo);for(var d=1;d<a;d++)c();return j(b,c())}function i(a){var b=a.relativeDelay,c=b===void 0?!1:b,d=null,e=o(a.algo);return function(){var b=d;if(b==null){d=c?Date.now():0;return 0}var f=j(a,e());if(c){var g=Date.now();b=g-b;b>0&&(f=Math.max(0,f-b));d=g}return f}}function d(a){var c=i(a);return function(a){return new(h||(h=b("Promise")))(function(b){var d=c();d>0?setTimeout(b,d,a):b(a)})}}function j(a,b){var c=a.max,d=a.min;a=a.jitter;a=a===void 0?.1:a;b=b;c!=null&&b>c&&(b=c);d!=null&&b<d&&(b=d);a!==0&&(b=Math.ceil(b*(1+a*Math.random())));return b}function k(a){var b=a.second-a.first,c=a.first-b;return function(){var a=b+c;c=b;b=a;return a}}function l(a){var b=a.base,c=b===void 0?2:b,d=a.first;return function(){var a=d;d*=c;return a}}function m(a){var b=a.delay;return function(){return b}}function n(a){var b=a.toMs;a=a.backoff;var c=o(a);return function(){return b(c())}}function o(a){switch(a.type){case"fibonacci":return k(a);case"exponential":return l(a);case"constant":return m(a);case"adjust":return n(a);default:a;throw c("err")("makeTimeFunc unrecognized backoff "+a.type)}}g.getDelay=a;g.createTimer=i;g.createPromiseTimer=d}),98);
__d("WAPromiseQueue",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;a=function(){function a(a){a===void 0&&(a=-1),this.$1=(g||(g=b("Promise"))).resolve(),this.$3=0,this.$2=a}var c=a.prototype;c.wait=function(){return this.$1};c.enqueueHandlers=function(a,b,c){var d=this;this.$3++;b=this.$1.then(function(){return a}).then(b,c);c=b.then();this.$1=h(b,this.$2)["finally"](function(){d.$3--});return c};c.enqueue=function(a){var b=this;this.$3++;a=this.$1.then(a);var c=a.then();this.$1=h(a,this.$2)["finally"](function(){b.$3--});return c};c.size=function(){return this.$3};return a}();c=function(){function a(a){a===void 0&&(a=-1),this.$1=new Map(),this.$2=a}var c=a.prototype;c.waitIfPending=function(a){return this.$1.get(a)};c.wait=function(a){return this.$1.get(a)||(g||(g=b("Promise"))).resolve()};c.enqueueHandlers=function(a,b,c,d){c=this.wait(a).then(function(){return b}).then(c,d);return this.$3(a,c)};c.enqueue=function(a,b){b=this.wait(a).then(b);return this.$3(a,b)};c.$3=function(a,b){var c=this,d=b.then(),e,f=function(){c.$1.get(a)===e&&c.$1["delete"](a)};e=h(b,this.$2).then(f,f);this.$1.set(a,e);return d};return a}();function h(a,c){if(c>=0)return new(g||(g=b("Promise")))(function(b){var d=function(){return void b()};a.then(d,d);setTimeout(d,c)});else return a.then(i,i)}function i(){}f.PromiseQueue=a;f.PromiseQueueMap=c}),66);/*FB_PKG_DELIM*/
__d("BootloaderErrorsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5080");b=d("FalcoLoggerInternal").create("bootloader_errors",a);e=b;g["default"]=e}),98);
__d("BootloaderErrorLoggerUtil",["BootloaderErrorsFalcoEvent","BootloaderEvents","BootloaderEventsPerf","ResourceTimingStore","ScriptPath","SiteData","performanceNavigationStart"],(function(a,b,c,d,e,f){var g=!1;a={initLogging:function(a){var c=a.parent_lid;if(g)return;g=!0;b("ResourceTimingStore").init();var d=function(a){return{ms_since_navstart:Math.round(a-b("performanceNavigationStart")()),parent_lid:c,pkg_cohort:b("SiteData").pkg_cohort,request_path:b("ScriptPath").getScriptPath(),ef_page:b("ScriptPath").getEarlyFlushPage(),svn_rev:b("SiteData").client_revision}};b("BootloaderEvents").onBootloadError(function(a){return b("BootloaderErrorsFalcoEvent").log(function(){var c=b("BootloaderEventsPerf").computeBLData(a.bootloaderData),e=b("BootloaderEventsPerf").flattenData(c);e=babelHelpers["extends"]({},e,d(c.start_time),{status:"ERROR",was_offline:a.offline});a.erroredResources!=null&&(e.errored_resource_urls=Array.from(a.erroredResources));return e})})}};e.exports=a}),null);
__d("EchoSerializationFailureFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5722");b=d("FalcoLoggerInternal").create("echo_serialization_failure",a);e=b;g["default"]=e}),98);
__d("EchoSerializationSuccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5723");b=d("FalcoLoggerInternal").create("echo_serialization_success",a);e=b;g["default"]=e}),98);
__d("MAWDropCutoverThreadsTable",["Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var c=d("ReQL").fromTableAscending(a.cutover_threads);return d("ReQL").toArrayAsync(c).then(function(c){return c.reduce(function(b,c){return b.then(function(){return a.cutover_threads["delete"](c.openThreadId)})},(h||(h=b("Promise"))).resolve())})}g.call=a}),98);
__d("ReStoreEvent",[],(function(a,b,c,d,e,f){"use strict";a=function(){};f["default"]=a}),66);
__d("ReStoreIndexedDbClosedEvent",["ReStoreEvent"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(b,c){var d;d=a.call(this)||this;d.idb=b;d.error=c;return d}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.getError=function(){return this.error};return b}(c("ReStoreEvent"));g["default"]=a}),98);
__d("ReStoreIndexedDbFailToOpenEvent",["ReStoreEvent"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(){return a.apply(this,arguments)||this}babelHelpers.inheritsLoose(b,a);return b}(c("ReStoreEvent"));g["default"]=a}),98);
__d("ReStoreIndexedDbUpgradedEvent",["ReStoreEvent"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(){return a.apply(this,arguments)||this}babelHelpers.inheritsLoose(b,a);return b}(c("ReStoreEvent"));g["default"]=a}),98);
__d("ReStoreUnexpectedlyClosed",[],(function(a,b,c,d,e,f){"use strict";a="ReStoreUnexpectedlyClosed";b=function(a){function b(){return a.apply(this,arguments)||this}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));f.ERROR_NAME=a;f.ReStoreUnexpectedlyClosed=b}),66);
__d("GetLsDatabase",["ExecutionEnvironment","LSDefaultSyncGroups","LSPlatformErrorChannel","LSPlatformLsInitLog","MAWDropCutoverThreadsTable","MessengerLogHistory","MultipleTabsLogger","ReStoreDecryptionFailure","ReStoreEARSetupFailure","ReStoreIndexedDbClosedEvent","ReStoreIndexedDbFailToOpenEvent","ReStoreIndexedDbUpgradedEvent","ReStoreUnexpectedlyClosed","UserTimingUtils","cr:10099","cr:10200","cr:10755","cr:4489","cr:6218","cr:665","cr:7000","cr:7351","cr:8915","justknobx","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(e=b("cr:6218"))!=null?e:b("cr:10755"),j=(e=b("cr:7000"))!=null?e:b("cr:7351");function k(a){if(a instanceof c("ReStoreIndexedDbUpgradedEvent")&&i!=null&&c("justknobx")._("1410"))c("promiseDone")(i.killSharedWorker(!0,"ls_upgrade"));else if(a instanceof c("ReStoreIndexedDbClosedEvent")){a=a.getError();b("cr:8915")!=null&&a instanceof(b("cr:8915")==null?void 0:b("cr:8915").ReStoreDbVersionChange)?c("LSPlatformErrorChannel").emit(a):a instanceof d("ReStoreDecryptionFailure").ReStoreDecryptionFailure?c("LSPlatformErrorChannel").emit(a):a instanceof d("ReStoreEARSetupFailure").ReStoreEARSetupFailure?c("LSPlatformErrorChannel").emit(a):a instanceof d("ReStoreUnexpectedlyClosed").ReStoreUnexpectedlyClosed&&b("cr:10099")!=null?(b("cr:10099")==null||b("cr:10099").releaseIfExist(),c("LSPlatformErrorChannel").emit(a)):a instanceof c("ReStoreIndexedDbFailToOpenEvent")&&b("cr:10099")!=null&&(b("cr:10099")==null||b("cr:10099").releaseIfExist())}}var l=async function(){var a=d("MessengerLogHistory").getInstance("db_init");c("promiseDone")(d("MultipleTabsLogger").getMultipleTabsAnnotation().then(function(b){a.debug("Has multiple tabs: "+b),d("MultipleTabsLogger").addAnnotationToQPLEvent(c("qpl")._(25305590,"1127"))}));a.debug("====Creating DB====");d("LSPlatformLsInitLog").addPoint("vaulting_setup_start");b("cr:4489")!=null&&b("cr:665")!=null&&(h||(h=c("ExecutionEnvironment"))).isInBrowser&&(a.debug("Vaulting setup started"),b("cr:665").setupMainWaLogger(),await d("UserTimingUtils").asyncMeasure("Setup Vaulting Materials",async function(){await b("cr:4489").setupVaultMaterials()}),a.debug("Vaulting setup finished"));d("LSPlatformLsInitLog").addPoint("vaulting_setup_end");a.debug("Connecting to DB");var e=await b("cr:10200").createDB(k);a.debug("Connection established");await e.runInTransaction(async function(b){var c=j==null?[Promise.resolve(),Promise.resolve()]:[j.call(b),d("MAWDropCutoverThreadsTable").call(b)],e=c[0];c=c[1];await Promise.all([e,c]);d("LSPlatformLsInitLog").addPoint("success_maw_data_deletion");a.debug("Seeding DB");await d("LSDefaultSyncGroups").seedDb(b,void 0);a.debug("DB seeded")},"readwrite","ui",void 0,f.id+":113");a.debug("====DB created====");return e},m;function a(){m==null&&(m=(h||(h=c("ExecutionEnvironment"))).isInBrowser?l():new Promise(function(){}));return m}g.get=a}),98);
__d("LSJSONOp",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({BLOCK:1,LOAD:2,STORE:3,STORE_ARRAY:4,CALL_STORED_PROCEDURE:5,CALL_NATIVE_TYPE_OPERATION:6,CALL_NATIVE_OPERATION:7,LIST:8,UNDEFINED:9,INFINITY:10,NAN:11,RETURN:12,BOOL_TO_STR:13,BLOBS_TO_STRING:14,BLOBS_OF_STRING:15,TO_BLOB:16,I64_OF_FLOAT:17,I64_TO_FLOAT:18,I64_FROM_STRING:19,I64_TO_STRING:20,READ_GK:21,READ_QE:22,IF:23,OR:24,AND:25,NOT:26,IS_NULL:27,ENFORCE_NOT_NULL:28,GENERIC_EQUAL:29,I64_EQUAL:30,BLOB_EQUAL:31,GENERIC_NOT_EQUAL:32,I64_NOT_EQUAL:33,BLOB_NOT_EQUAL:34,GENERIC_GREATER_THAN:35,I64_GREATER_THAN:36,BLOB_GREATER_THAN:37,GENERIC_GREATER_THAN_OR_EQUAL:38,I64_GREATER_THAN_OR_EQUAL:39,BLOB_GREATER_THAN_OR_EQUAL:40,GENERIC_LESS_THAN:41,I64_LESS_THAN:42,BLOB_LESS_THAN:43,GENERIC_LESS_THAN_OR_EQUAL:44,I64_LESS_THAN_OR_EQUAL:45,BLOB_LESS_THAN_OR_EQUAL:46,THROW:47,LOG_CONSOLE:48,LOGGER_LOG:49,NATIVE_OP_ARRAY_CREATE:50,NATIVE_OP_ARRAY_APPEND:51,NATIVE_OP_ARRAY_GET_SIZE:52,NATIVE_OP_MAP_CREATE:53,NATIVE_OP_MAP_GET:54,NATIVE_OP_MAP_SET:55,NATIVE_OP_MAP_KEYS:56,NATIVE_OP_MAP_DELETE:57,NATIVE_OP_MAP_HAS:58,NATIVE_OP_STR_JOIN:59,NATIVE_OP_CURRENT_TIME:60,NATIVE_OP_JSON_STRINGIFY:61,NATIVE_OP_RNG_NUM:62,NATIVE_OP_LOCALIZATION_SUPPORTED:63,NATIVE_OP_LOCALIZATION_SUPPORTED_V2:64,NATIVE_OP_RESOLVE_LOCALIZED:65,NATIVE_OP_RESOLVE_LOCALIZED_V2:66,ADD:68,I64_ADD:69,I64_CAST:70,READ_JUSTKNOB:71,READ_IGGK:72,GET_RUN_MODE:73,STR_TRIM:74,STR_REPLACE:75,JOIN:76,STR_LIKE:77,LENGTH:78,IN:79,IN_VEC:80,SUB:81,MUL:82,DIV:83,MOD:84,I64_SUB:85,I64_MUL:86,I64_DIV:87,I64_MOD:88,I64_IN:89,I64_IN_VEC:90,BITWISE_LEFT_SHIFT:91,BITWISE_RIGHT_SHIFT:92,ARITHMETIC_RIGHT_SHIFT:93,BITWISE_AND:94,BITWISE_OR:95,BITWISE_XOR:96,TERNARY:97,XOR:98,NULLISH_COALESE:99,READ_COLUMN:100,READ_COLUMN_REF:101,READ_GROUP_COUNT:102,COMMENT:103,IMPORT:104,LOOP:105,QUERY_COMPARISON_EQUAL:106,QUERY_COMPARISON_NOT_EQUAL:107,QUERY_COMPARISON_GREATER_THAN:108,QUERY_COMPARISON_GREATER_THAN_OR_EQUAL:109,QUERY_COMPARISON_LESS_THAN:110,QUERY_COMPARISON_LESS_THAN_OR_EQUAL:111,QUERY_MERGE_CONSTRAINTS:112,QUERY_FETCH_ROWS:113,QUERY_FILTER_ROWS:114,QUERY_SORT_ROWS_BY:115,QUERY_DELETE_ROWS:116,QUERY_SLICE_ROWS:117,QUERY_COUNT_ROWS:118,QUERY_PEEK_NEXT_ROW_ID:119,QUERY_UPDATE_ROWS:120,QUERY_INSERT_ROWS:121,QUERY_PUT_ROWS:122,QUERY_FOREACH_ROW:123,QUERY_SELECT_MATCH_ROW:124,QUERY_CURSOR_SLICE:125,QUERY_GROUP_BY:126,SUB_STRING:127});c=a;f["default"]=c}),66);
__d("LSMaybeDeferredImports",["LSSynchronousPromise"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return h(a)}function b(a){return h(a)}function h(b){var a=null;return{load:function(){return a==null?b.load().then(function(b){a=b;return a}):d("LSSynchronousPromise").makeSynchronousPromise(a)}}}g.wrapReqDeferredMaybeSync=a;g.wrapJSResourceForInteractionMaybeSync=b}),98);
__d("LSSelectOrder",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["ASC","DESC"]);c=a;f["default"]=c}),66);
__d("LSDatascriptJSONEval",["FBLogger","JSResourceForInteraction","LS","LSMaybeDeferredImports","isPromise"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=d("LSMaybeDeferredImports").wrapJSResourceForInteractionMaybeSync(c("JSResourceForInteraction")("LSLocalize").__setRef("LSDatascriptJSONEval"));function l(a,b,d){if((j||(j=c("isPromise")))(a))return a.then(b,d);try{return b(a)}catch(a){if(d)return d(a);else throw a}}a=function(){function a(a,b,d,e){var f=this;e===void 0&&(e=[]);this.$4={};this.$5=[];this.$6=null;this.$7=function(a){return l(f.$8(a),function(a){return a},function(b){c("FBLogger")("messenger_web").catching(b).mustfix("Error evaluating step op: %s",Array.isArray(a)?a[0]:"<primitive value>");throw b})};this.$1=b;this.$2=a;this.$3=d;for(b=0;b<e.length;b++)this.$4[b]=e[b]}var d=a.prototype;d.eval=function(){return this.$2==null?this.$1.resolveGuaranteeAsync([]):this.$1.resolveGuaranteeAsync(this.$7(this.$2.step))};d.$8=function(a){var d=this;if(!Array.isArray(a))return a;var e=a[0];a=a.slice(1);var f=a;switch(e){case 8:return f.map(this.$7);case 2:return this.$4[f[0]];case 3:return l(this.$7(f[1]),function(a){return d.$4[f[0]]=a});case 4:return l(this.$7(f[2]),function(a){var b=f[0],c=f[1];for(var e=0;e<c;e++,b++)d.$4[b]=a[e];return a});case 12:a=f[0];e=f[1];var g=[];for(a=a;a<e;a++)g[a]=this.$4[a];return g;case 1:var j;a=function(a){j=l(j,function(){return d.$7(f[a])})};for(e=0;e<f.length;e++)a(e);return j;case 5:return(g=this.$1).storedProcedure.apply(g,f.map(this.$7));case 6:return(e=this.$1).nativeTypeOperation.apply(e,f.map(this.$7));case 7:return(a=this.$1).nativeOperation.apply(a,f.map(this.$7));case 9:return;case 10:return Infinity;case 11:return NaN;case 13:return this.$7(f[0])?"1":"0";case 14:return this.$1.blobs.to_string(this.$7(f[0]));case 15:return this.$1.blobs.of_string(this.$7(f[0]));case 16:return this.$1.blob(this.$7(f[0]));case 17:return this.$1.i64.of_float(this.$7(f[0]));case 18:g=this.$7(f[0]);return g!=null?this.$1.i64.to_float(g):void 0;case 19:return this.$1.i64.from_string(this.$7(f[0]));case 70:return this.$1.i64.cast(this.$7(f[0]));case 20:return this.$1.i64.to_string(this.$7(f[0]));case 21:return(e=this.$3)==null||(e=e.gk)==null?void 0:e[f[0]];case 22:var m;a=f[0];g=f[1];e=f[2];var n=f[3];a=(m=this.$3)==null||(m=m.qe)==null||(m=m[a])==null||(m=m[g])==null?void 0:m[e];if(a==null)return a;switch(n){case"BOOL":case"STR":return a;case"I64":if(typeof a!=="object")throw c("FBLogger")("messenger_web").mustfixThrow("Cannot convert value to string");return this.$1.i64.from_string(a.toString())}return;case 23:if(this.$7(f[0]))return this.$7(f[1]);else if(f[2]!=null)return this.$7(f[2]);return;case 24:return this.$7(f[0])||this.$7(f[1]);case 25:return this.$7(f[0])&&this.$7(f[1]);case 26:return!this.$7(f[0]);case 27:return this.$7(f[0])==null;case 28:return this.$1.notnull(this.$7(f[0]));case 29:return this.$7(f[0])===this.$7(f[1]);case 30:return this.$1.i64.eq(this.$7(f[0]),this.$7(f[1]));case 31:return this.$1.blobs.eq(this.$7(f[0]),this.$7(f[1]));case 32:return this.$7(f[0])!==this.$7(f[1]);case 33:return this.$1.i64.neq(this.$7(f[0]),this.$7(f[1]));case 34:return this.$1.blobs.neq(this.$7(f[0]),this.$7(f[1]));case 35:return this.$7(f[0])>this.$7(f[1]);case 36:return this.$1.i64.gt(this.$7(f[0]),this.$7(f[1]));case 37:return this.$1.blobs.gt(this.$7(f[0]),this.$7(f[1]));case 38:return this.$7(f[0])>=this.$7(f[1]);case 39:return this.$1.i64.ge(this.$7(f[0]),this.$7(f[1]));case 40:return this.$1.blobs.ge(this.$7(f[0]),this.$7(f[1]));case 41:return this.$7(f[0])<this.$7(f[1]);case 42:return this.$1.i64.lt(this.$7(f[0]),this.$7(f[1]));case 43:return this.$1.blobs.lt(this.$7(f[0]),this.$7(f[1]));case 44:return this.$7(f[0])<=this.$7(f[1]);case 45:return this.$1.i64.le(this.$7(f[0]),this.$7(f[1]));case 46:return this.$1.blobs.le(this.$7(f[0]),this.$7(f[1]));case 47:return this.$1["throw"](f[0]);case 48:return this.$1.print(this.$7(f[0]));case 49:g=this.$7(f[0]);m=f[1];e=this.$1.logger(g);switch(m){case"mustfix":return e.mustfix(g);case"info":return e.info(g);case"warn":return e.warn(g);case"debug":return e.debug(g);default:throw c("FBLogger")("messenger_web").mustfixThrow("Invalid logger level %s",m)}case 50:return f.length===0?this.$1.createArray():(n=this.$1).createArrayWithElements.apply(n,this.$7(f[0]));case 51:a=this.$7(f[0]);a.push(this.$7(f[1]));return a;case 52:return this.$1.i64.of_int32(this.$7(f[0]).length);case 53:return new this.$1.Map();case 54:return this.$7(f[0]).get(this.$7(f[1]));case 55:return this.$7(f[0]).set(this.$7(f[1]),this.$7(f[2]));case 56:return this.$7(f[0]).keys();case 57:return this.$7(f[0])["delete"](this.$7(f[1]));case 58:return this.$7(f[0]).has(this.$7(f[1]));case 59:return this.$7(f[0]).join(this.$7(f[1])||"");case 60:return this.$1.i64.of_float(Date.now());case 61:return this.$1.toJSON(this.$7(f[0]));case 62:return this.$1.i64.random();case 63:case 64:return!0;case 65:return k.load().then(function(a){a=a.localizeV1Async;return a(d.$7(f[0]),d.$7(f[1]))});case 66:return k.load().then(function(a){a=a.localizeV2Async;return a(d.$7(f[0]),d.$7(f[1]))});case 68:return this.$7(f[0])+this.$7(f[1]);case 69:return this.$1.i64.add(this.$7(f[0]),this.$7(f[1]));case 71:return(e=this.$3)==null||(e=e.justknob)==null?void 0:e[f[0]];case 72:return(g=this.$3)==null||(g=g.iggk)==null?void 0:g[f[0]];case 100:return this.$5[f[0]][f[1]];case 101:if(this.$6==null)throw c("FBLogger")("messenger_web").mustfixThrow("Attempting to read column ref when none exist!");return this.$6[f[0]];case 102:return this.$5[this.$7(f[0])].group_count;case 73:return this.$1.rm;case 74:return this.$7(f[0]).trim();case 75:return this.$7(f[0]).split(this.$7(f[1])).join(this.$7(f[2]));case 76:return f.map(this.$7).join("");case 77:return this.$1.like(this.$7(f[0]),this.$7(f[1]));case 78:return[0,this.$7(f[0]).length];case 79:m=f.map(this.$7);n=m[0];a=m.slice(1);return a.includes(n);case 80:return this.$7(f[1]).includes(this.$7(f[0]));case 81:return this.$7(f[0])-this.$7(f[1]);case 82:return this.$7(f[0])*this.$7(f[1]);case 83:return this.$7(f[0])/this.$7(f[1]);case 84:return this.$7(f[0])%this.$7(f[1]);case 91:return this.$1.i64.lsl_(this.$7(f[0]),this.$1.i64.to_int32(this.$7(f[1])));case 92:return this.$1.i64.lsr_(this.$7(f[0]),this.$1.i64.to_int32(this.$7(f[1])));case 93:return this.$1.i64.asr_(this.$7(f[0]),this.$1.i64.to_int32(this.$7(f[1])));case 94:return this.$1.i64.and_(this.$7(f[0]),this.$7(f[1]));case 95:return this.$1.i64.or_(this.$7(f[0]),this.$7(f[1]));case 96:return this.$1.i64.xor(this.$7(f[0]),this.$7(f[1]));case 85:return this.$1.i64.sub(this.$7(f[0]),this.$7(f[1]));case 86:return this.$1.i64.mul(this.$7(f[0]),this.$7(f[1]));case 87:return this.$1.i64.div(this.$7(f[0]),this.$7(f[1]));case 88:return this.$1.i64.mod_(this.$7(f[0]),this.$7(f[1]));case 89:e=f.map(this.$7);var o=e[0];g=e.slice(1);return g.some(function(a){return d.$1.i64.eq(o,a)});case 90:var p=this.$7(f[0]);return this.$7(f[1]).some(function(a){return d.$1.i64.eq(p,a)});case 97:return this.$7(f[0])?this.$7(f[1]):this.$7(f[2]);case 98:m=this.$7(f[0]);a=this.$7(f[1]);return(m||a)&&!(m&&a);case 99:return(n=this.$7(f[0]))!=null?n:this.$7(f[1]);case 103:return;case 104:return b.call(null,f[0]);case 105:e=this.$7(f[0]);var q=f[1];g=c("LS").n;var r;m=function(a){r=l(r,function(){d.$4[q]=a;return d.$7(f[2])})};for(a=g(h||(h=babelHelpers.taggedTemplateLiteralLoose(["0"])));this.$1.i64.lt(a,e);a=this.$1.i64.add(a,g(i||(i=babelHelpers.taggedTemplateLiteralLoose(["2"])))))m(a);return r;case 106:return this.$7(f[0]);case 107:throw c("FBLogger")("messenger_web").mustfixThrow("not equal query comparison operator not supported");case 108:return{gt:this.$7(f[0])};case 109:return{gte:this.$7(f[0])};case 110:return{lt:this.$7(f[0])};case 111:return{lte:this.$7(f[0])};case 112:return f.length===1?this.$7(f[0]):(n=this.$1).merge.apply(n,f.map(this.$7));case 113:a=f[0];m=f[1];e=f.slice(2);g=e.map(this.$7);switch(m){case"ASC":return(n=this.$1.db.table(a)).fetch.apply(n,g);case"DESC":return(e=this.$1.db.table(a)).fetchDesc.apply(e,g)}return;case 114:return this.$1.filter(this.$7(f[0]),function(a){d.$6=a;a=d.$7(f[1]);d.$6=null;return a});case 115:return(m=this.$1).sortBy.apply(m,f.map(this.$7));case 116:return this.$1.forEach(this.$7(f[0]),function(a){return a["delete"]()});case 117:return this.$1.islc(this.$7(f[0]),0,this.$7(f[1]));case 118:return this.$1.count(this.$7(f[0]));case 119:return this.$1.db.table(f[0]).peekNextAutoIncrementId();case 120:return this.$1.forEach(this.$7(f[0]),function(a){var b=a.item;a=a.update;var c={};d.$6=b;for(b=1;b<f.length;b+=2)c[f[b]]=d.$7(f[b+1]);d.$6=null;return a(c)});case 121:n=f[0];a={};for(e=1;e<f.length;e+=2)a[f[e]]=this.$7(f[e+1]);return this.$1.db.table(n).add(a);case 122:g=f[0];m={};for(e=1;e<f.length;e+=2)m[f[e]]=this.$7(f[e+1]);return this.$1.db.table(g).put(m);case 123:return this.$1.forEach(this.$7(f[0]),function(a){a=a.item;d.$5[f[1]]=a;return d.$7(f[2])});case 124:return this.$7(f[0]).next().then(function(a){var b=a.done;a=a.value;if(b)return d.$7(f[3]);else{b=f[1];if(b!=null){d.$5[b]=a.item;return d.$7(f[2])}}return 0});case 125:return this.$7(f[0]).slice(0,this.$7(f[1]));case 126:return this.$1.groupBy(this.$7(f[0]),f[1]).forEach(function(a){d.$5[f[2]]=a;return d.$7(f[3])});case 127:return this.$7(f[0]).substr(this.$1.i64.to_int32(this.$7(f[1])),this.$1.i64.to_int32(this.$7(f[2])))}};return a}();g["default"]=a}),98);
__d("TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE",["Env","TrustedTypes","err"],(function(a,b,c,d,e,f,g){"use strict";var h;d={createScript:function(a){for(var b=arguments.length,d=new Array(b>1?b-1:0),e=1;e<b;e++)d[e-1]=arguments[e];d.forEach(function(a){if(typeof window!=="undefined"&&typeof window.trustedTypes!=="undefined"&&!window.trustedTypes.isScript(a))throw c("err")("Trusted Function requires TrustedScripts args only.")});var f=d.slice(0,-1).join(","),g=d.pop().toString();return"(function anonymous(\n     "+f+"\n     ) {\n     "+g+"\n     })"}};var i=c("TrustedTypes").createPolicy("unsafe-function-do-not-use",d);function b(){for(var b=arguments.length,d=new Array(b),e=0;e<b;e++)d[e]=arguments[e];if(c("TrustedTypes").isSupportedNatively()&&(h||(h=c("Env"))).useTrustedTypes){var f=i.createScript.apply(i,[""].concat(d));return a.eval(f)}else return babelHelpers.construct(Function,d)}g.TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE=i;g.createTrustedFunction=b}),98);
__d("LSDatascriptEvaluator",["ExecutionEnvironment","FBLogger","LSDatascriptJSONEval","LSFactory","MWPBumpEntityKey","TrustedTypesNoOpPolicy_DO_NOT_USE","TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE","cr:8018","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b){var e=function(b){return function(c,d){var e;return a==null||(e=a.qe)==null||(e=e[c])==null||(e=e[b])==null?void 0:e[d]}},f=new Proxy({getBool:e("fb"),getNumber:e("fb"),getString:e("fb")},{get:function(a,b){return b in a?a[b]:{getBool:e(b),getNumber:e(b),getString:e(b)}}}),g=function(b){var c;return a==null||(c=a.gk)==null?void 0:c[b]};g.ig=function(b){var c;return a==null||(c=a.iggk)==null?void 0:c[b]};var h={getBool:function(b){var c;return a==null||(c=a.justknob)==null?void 0:c[b]}};return function(a){var e;e=d("TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE").createTrustedFunction((e=c("TrustedTypesNoOpPolicy_DO_NOT_USE")).createScript("gkx"),e.createScript("qex"),e.createScript("justknobx"),e.createScript("return "+b));return e(g,f,h)(c("LSFactory")(a,{dynamic:!0}))}}var j=function(a){return c("FBLogger")("messenger_web","invalid_sync_script_target").mustfixThrow('Received a sync script with an illegal target of "%s"',a!=null?a:-1)};function k(a,d){var e=JSON.parse(d),f=a!=null?a:{gk:{},iggk:{},justknob:{},qe:{}};return function(a){var d=b("cr:8018")!=null?new(b("cr:8018"))():void 0,g=d==null?void 0:d.start({bool:{isInWorker:(h||(h=c("ExecutionEnvironment"))).isInWorker},string:{dynamic:String(!0)}});a=c("LSFactory")(a,{dynamic:!0,lsRuntimeLogger:d});return new(c("LSDatascriptJSONEval"))(e,a,f).eval().finally(function(){g==null||g.end();return Promise.resolve()})}}function l(a,b,d){if(!c("justknobx")._("3078"))return m(a,b,d);if(d==null)throw j(d);switch(d){case 3:return k(a,b);default:throw j(d)}}function m(a,b,d){if(d==null){c("FBLogger")("lightspeed","null_target").mustfix("Received <null> target field for sync script!");return i(a,b)}switch(d){case 3:return k(a,b);case 2:return i(a,b);case 1:throw c("FBLogger")("messenger_web","invalid_sync_script_target").mustfixThrow("Received a sync script with LSProgramTarget of DASM, this should never happen!")}}function a(a){return function(b){if(b==null)throw c("FBLogger")("messenger_web").mustfixThrow("Error creating eval function, db is undefined. This is likely a currying error in the definition for LSDatascriptEvaluator");return function(e){var g=e.experiments,h=e.priority,i=e.syncScript,j=e.target;e=e.taskNames;g=g!=null?JSON.parse(g):null;try{var k=l(g,i,j);return b.runInTransaction(function(b){a&&a();return k(b)},"readwrite",h,{taskNames:e,type:"sync_script"},f.id+":246")}catch(a){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform","eval_datascript_failure");c("FBLogger")("messenger_web").catching(a).mustfix("Error executing sync script");throw a}}}}a.__debugModuleName="LSDatascriptEvaluator";g.default=a}),98);
__d("MAWBridgeDropAllSecureThreadsHandler",["I64","LSIntEnum","LSMessagingThreadTypeUtil","Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a){var c=d("ReQL").fromTableAscending(a.threads_ranges_v2__generated).filter(function(a){return(i||(i=d("I64"))).equal(a.parentThreadKey,(j||(j=d("LSIntEnum"))).ofNumber(-1))||(i||(i=d("I64"))).equal(a.parentThreadKey,(j||(j=d("LSIntEnum"))).ofNumber(-10))});return d("ReQL").toArrayAsync(c).then(function(c){return c.reduce(function(b,c){return b.then(function(){return a.threads_ranges_v2__generated["delete"](c.parentThreadKey,c.minThreadKey,c.minLastActivityTimestampMs)})},(h||(h=b("Promise"))).resolve())})}function l(a){var c=d("ReQL").fromTableAscending(a.threads).filter(function(a){return d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType)});return d("ReQL").toArrayAsync(c).then(function(c){return c.reduce(function(b,c){return b.then(function(){return a.threads["delete"](c.threadKey)})},(h||(h=b("Promise"))).resolve())})}function a(a){return(h||(h=b("Promise"))).all([k(a),l(a)]).then(function(){return(h||(h=b("Promise"))).resolve()})}g.call=a}),98);
__d("MWConditionallySetupEBStateDB",["EBDB","EBReadyNotifier","ExecutionEnvironment","MAWCurrentUser","MAWIndexedDbMetadata","MessengerWebInitData","ODS","WAHex","WAOdsEnums","WormGlobalConfig","cr:23151","cr:8233","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i;async function a(a){if(b("cr:23151")!=null&&(i||(i=c("ExecutionEnvironment"))).isInBrowser){d("WormGlobalConfig").setWormGlobalConfig({});b("cr:8233")==null||b("cr:8233").setupMainWaLogger();void d("EBDB").makeEBDB(d("MAWIndexedDbMetadata").ebdbName(d("MAWCurrentUser").getID()),c("qpl")._(1056840657,"2716"),d("WAHex").parseHex(c("MessengerWebInitData").accountKeyV2),d("EBDB").EBDBEnvironment.UI,{log:function(a){return(h||(h=d("ODS"))).bumpEntityKey(3185,d("WAOdsEnums").Entity.WORM,a)}});a=await b("cr:23151").makeReStorePersistence(a);d("EBReadyNotifier").markEBReady();return a}}g.conditionallyMakeEBStateDB=a}),98);
__d("MWLSSchemaEphemeral",["EBDB","EBDBEbsmApi","FBLogger","LSJSInMemoryStorage","LSMetadata","LSPlatformLsInitLog","LSReStoreWrapper","MAWLSVaultingHooks","MWConditionallySetupEBStateDB","MessengerLogHistory"],(function(a,b,c,d,e,f,g){"use strict";var h=d("MessengerLogHistory").getInstance("db_init");async function a(a){d("LSPlatformLsInitLog").addPoint("init_start");var b;a={clearEbStores:d("EBDB").clearEbStores,flushEBSMtoEBDB:d("EBDBEbsmApi").flushEBSMtoEBDB,rehydrateEBSMFromEBDB:d("EBDBEbsmApi").rehydrateEBSMFromEBDB};try{var e=await d("MWConditionallySetupEBStateDB").conditionallyMakeEBStateDB(a);e!=null&&(h.debug("Creating EB State DB"),b=d("LSReStoreWrapper").createLSReStore(e,d("LSMetadata").schema,[c("MAWLSVaultingHooks")],void 0,d("LSPlatformLsInitLog").lsInitLogger),a.updateEBSM=d("EBDBEbsmApi").updateEBSM(b),h.debug("EB State DB inited"))}catch(a){c("FBLogger")("messenger_web_clients").catching(a).mustfix("EBSM failed")}b==null&&(h.debug("Creating EDB"),b=c("LSJSInMemoryStorage")(d("LSMetadata").schema),h.debug("EDB inited"));d("LSPlatformLsInitLog").addPoint("init_end");return b}g.createDB=a}),98);
__d("WASmaxInPreKeysRotateSignedResponseRequestError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysRequestErrors","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInPreKeysRequestErrors").parseRequestErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorRequestErrors:b.value}))}g.parseRotateSignedResponseRequestError=a}),98);
__d("WASmaxInPreKeysRotateSignedResponseServerError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysServerErrors","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInPreKeysServerErrors").parseServerErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorServerErrors:b.value}))}g.parseRotateSignedResponseServerError=a}),98);
__d("WASmaxInPreKeysRotateSignedResponseSuccess",["WASmaxInPreKeysIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInPreKeysIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!c.success?c:c}g.parseRotateSignedResponseSuccess=a}),98);
__d("WASmaxInPreKeysRotateSignedResponseValidationError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysIdentityKeyMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;var e=d("WASmaxParseUtils").attrString(c.value,"text");if(!e.success)return e;var f=d("WASmaxParseUtils").attrIntRange(c.value,"code",400,499);if(!f.success)return f;c=d("WASmaxInPreKeysIdentityKeyMixin").parseIdentityKeyMixin(c.value);if(!c.success)return c;a=d("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({errorText:e.value,errorCode:f.value,errorIdentityKeyMixin:c.value},a.value))}g.parseRotateSignedResponseValidationError=a}),98);
__d("WASmaxOutPreKeysRotateSignedRequest",["WASmaxJsx","WASmaxOutPreKeysClientRequestMixin","WASmaxOutPreKeysSignedPreKeyMixin"],(function(a,b,c,d,e,f,g){function a(a){a=a.signedPreKeyMixinArgs;a=d("WASmaxOutPreKeysClientRequestMixin").mergeClientRequestMixin(d("WASmaxJsx").smax("iq",{type:"set"},d("WASmaxOutPreKeysSignedPreKeyMixin").mergeSignedPreKeyMixin(d("WASmaxJsx").smax("rotate",null),a)));return a}g.makeRotateSignedRequest=a}),98);
__d("WASmaxPreKeysRotateSignedRPC",["WAComms","WASmaxInPreKeysRotateSignedResponseRequestError","WASmaxInPreKeysRotateSignedResponseServerError","WASmaxInPreKeysRotateSignedResponseSuccess","WASmaxInPreKeysRotateSignedResponseValidationError","WASmaxOutPreKeysRotateSignedRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){async function a(a,b){a=d("WASmaxOutPreKeysRotateSignedRequest").makeRotateSignedRequest(a);b=await d("WAComms").sendSmaxStanza(a,b);var c=d("WASmaxInPreKeysRotateSignedResponseSuccess").parseRotateSignedResponseSuccess(b,a);if(c.success)return{name:"RotateSignedResponseSuccess",value:c.value};var e=d("WASmaxInPreKeysRotateSignedResponseValidationError").parseRotateSignedResponseValidationError(b,a);if(e.success)return{name:"RotateSignedResponseValidationError",value:e.value};var f=d("WASmaxInPreKeysRotateSignedResponseRequestError").parseRotateSignedResponseRequestError(b,a);if(f.success)return{name:"RotateSignedResponseRequestError",value:f.value};b=d("WASmaxInPreKeysRotateSignedResponseServerError").parseRotateSignedResponseServerError(b,a);if(b.success)return{name:"RotateSignedResponseServerError",value:b.value};throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("RotateSigned",{Success:c,ValidationError:e,RequestError:f,ServerError:b}))}g.sendRotateSignedRPC=a}),98);
__d("WARotateSignedPreKeyProtocol",["WACryptoManager","WAErrorMessage","WAGlobals","WAHandleFailureUtils","WAMakeSignedPreKeyMixin","WAResultOrError","WASmaxPreKeysRotateSignedRPC","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n=d("WATagsLogger").TAGS(["rotateSignedPreKeyProtocol"]);async function a(){n.LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["start generating skey..."])));try{var a=await d("WAGlobals").getWaOneQueue().enqueue(function(a){a=a.cryptoManager;return d("WACryptoManager").generateSignedPreKey(a)},{operationType:"generate_signed_prekey",flush:!0,afterInit:!0});n.LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["generated skey. Start rotating skey..."])));a=await d("WASmaxPreKeysRotateSignedRPC").sendRotateSignedRPC({signedPreKeyMixinArgs:d("WAMakeSignedPreKeyMixin").makeSignedPreKeyMixin(a)});switch(a.name){case"RotateSignedResponseValidationError":var b=a.value,c=b.errorCode,e=b.errorText;b=b.errorIdentityKeyMixin;n.ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["ValidationError: "," ",""])),c,e);return d("WAResultOrError").makeError({type:"validation-error",identity:b.elementValue});case"RotateSignedResponseRequestError":c=a.value.errorRequestErrors.value.code;e=a.value.errorRequestErrors.name;n.ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["RequestError: "," ",""])),c,e);return d("WAResultOrError").makeError({type:"request-error"});case"RotateSignedResponseServerError":b=a.value.errorServerErrors.value.code;c=a.value.errorServerErrors.name;n.ERROR(l||(l=babelHelpers.taggedTemplateLiteralLoose(["ServerError: "," ",""])),b,c);return d("WAResultOrError").makeError({type:"server-error"});default:a.name;n.LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["successfully rotated new skey"])));return d("WAResultOrError").makeResult()}}catch(a){e=d("WAErrorMessage").maybeGetMessageFromError(a);if(e.includes("No lastSignedPrekeyId and registration")){await d("WAHandleFailureUtils").reregisterPhone();return d("WAResultOrError").makeError({type:"no-prekey-reregistered"})}throw a}}g.rotateSignedPreKeyProtocol=a}),98);
__d("WARotateSignedPreKey",["WAGenerateAndUploadPreKeys","WALoggerTag","WARotateSignedPreKeyProtocol","WATagsLogger","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=d("WATagsLogger").TAGS([c("WALoggerTag").SignedPrekeyRotation,c("WALoggerTag").SignedPrekey]);async function a(a){a=await d("WARotateSignedPreKeyProtocol").rotateSignedPreKeyProtocol();if(a.success||a.error.type==="no-prekey-reregistered")return;if(a.error.type==="validation-error"){k.ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Signed prekey failed server validation. need to upload all keys."])));d("WAGenerateAndUploadPreKeys").generateAndUploadPreKeys(null,{reason:"signed prekey failed server validation"}).catch(function(a){k.ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Error while generating and uploading prekeys: ",""])),a)});return Promise.resolve()}k.ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["rotateSignedPreKey failed."])));throw c("err")("rotateSignedPreKey RPC failed: "+a.error.type)}g.rotateSignedPreKey=a}),98);
__d("WebWorkerInitDeferred",["BootloaderErrorLoggerUtil","CometBootloaderErrorLoggerUtil","cr:7429"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a.blLoggingCavalryFields&&(b("cr:7429").initLogging(a.blLoggingCavalryFields),d("CometBootloaderErrorLoggerUtil").initLogging(a.blLoggingCavalryFields),d("BootloaderErrorLoggerUtil").initLogging(a.blLoggingCavalryFields))}g.initDeferred=a}),98);